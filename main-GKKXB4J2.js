var ZL=Object.defineProperty,XL=Object.defineProperties;var eV=Object.getOwnPropertyDescriptors;var Ud=Object.getOwnPropertySymbols;var _D=Object.prototype.hasOwnProperty,yD=Object.prototype.propertyIsEnumerable;var vD=(n,e,t)=>e in n?ZL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})_D.call(e,t)&&vD(n,t,e[t]);if(Ud)for(var t of Ud(e))yD.call(e,t)&&vD(n,t,e[t]);return n},Z=(n,e)=>XL(n,eV(e));var av=(n,e)=>{var t={};for(var r in n)_D.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Ud)for(var r of Ud(n))e.indexOf(r)<0&&yD.call(n,r)&&(t[r]=n[r]);return t};var Gt=null,jd=!1,dv=1,tV=null,Zt=Symbol("SIGNAL");function ge(n){let e=Gt;return Gt=n,e}function $d(){return Gt}var Gc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zc(n){if(jd)throw new Error("");if(Gt===null)return;Gt.consumerOnSignalRead(n);let e=Gt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Gt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Gt.producers,t!==void 0&&t.producer===n)){Gt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Gt&&(!r||rV(i,Gt)))return;let o=Os(Gt),s={producer:n,consumer:Gt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Gt.producersTail=s,e!==void 0?e.nextProducer=s:Gt.producers=s,o&&wD(n,s)}function ED(){dv++}function hv(n){if(!(Os(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===dv)){if(!n.producerMustRecompute(n)&&!Gd(n)){uv(n);return}n.producerRecomputeValue(n),uv(n)}}function fv(n){if(n.consumers===void 0)return;let e=jd;jd=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||nV(r)}}finally{jd=e}}function pv(){return Gt?.consumerAllowSignalWrites!==!1}function nV(n){n.dirty=!0,fv(n),n.consumerMarkedDirty?.(n)}function uv(n){n.dirty=!1,n.lastCleanEpoch=dv}function qc(n){return n&&ID(n),ge(n)}function ID(n){n.producersTail=void 0,n.recomputing=!0}function Hd(n,e){ge(e),n&&bD(n)}function bD(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Os(n))do t=mv(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Gd(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(hv(t),r!==t.version))return!0}return!1}function Wc(n){if(Os(n)){let e=n.producers;for(;e!==void 0;)e=mv(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function wD(n,e){let t=n.consumersTail,r=Os(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)wD(i.producer,i)}function mv(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Os(e)){let o=e.producers;for(;o!==void 0;)o=mv(o)}return t}function Os(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function gv(n){tV?.(n)}function rV(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function vv(n,e){return Object.is(n,e)}function zd(n,e){let t=Object.create(iV);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(hv(t),zc(t),t.value===Bd)throw t.error;return t.value};return r[Zt]=t,gv(t),r}var cv=Symbol("UNSET"),lv=Symbol("COMPUTING"),Bd=Symbol("ERRORED"),iV=Z(O({},Gc),{value:cv,dirty:!0,error:null,equal:vv,kind:"computed",producerMustRecompute(n){return n.value===cv||n.value===lv},producerRecomputeValue(n){if(n.value===lv)throw new Error("");let e=n.value;n.value=lv;let t=qc(n),r,i=!1;try{r=n.computation(),ge(null),i=e!==cv&&e!==Bd&&r!==Bd&&n.equal(e,r)}catch(o){r=Bd,n.error=o}finally{Hd(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function oV(){throw new Error}var CD=oV;function SD(n){CD(n)}function _v(n){CD=n}var sV=null;function yv(n,e){let t=Object.create(qd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>DD(t);return r[Zt]=t,gv(t),[r,s=>Kc(t,s),s=>TD(t,s)]}function DD(n){return zc(n),n.value}function Kc(n,e){pv()||SD(n),n.equal(n.value,e)||(n.value=e,aV(n))}function TD(n,e){pv()||SD(n),Kc(n,e(n.value))}var qd=Z(O({},Gc),{equal:vv,value:void 0,kind:"signal"});function aV(n){n.version++,ED(),fv(n),sV?.(n)}function Ev(n){let e=ge(null);try{return n()}finally{ge(e)}}function pe(n){return typeof n=="function"}function Fs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wd=Fs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Do(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){e=o instanceof Wd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{AD(o)}catch(s){e=e??[],s instanceof Wd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Wd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)AD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Do(t,e)}remove(e){let{_finalizers:t}=this;t&&Do(t,e),e instanceof n&&e._removeParent(this)}};je.EMPTY=(()=>{let n=new je;return n.closed=!0,n})();var Iv=je.EMPTY;function Kd(n){return n instanceof je||n&&"closed"in n&&pe(n.remove)&&pe(n.add)&&pe(n.unsubscribe)}function AD(n){pe(n)?n():n.unsubscribe()}var Wn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ls={setTimeout(n,e,...t){let{delegate:r}=Ls;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ls;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Yd(n){Ls.setTimeout(()=>{let{onUnhandledError:e}=Wn;if(e)e(n);else throw n})}function Yc(){}var xD=bv("C",void 0,void 0);function RD(n){return bv("E",void 0,n)}function PD(n){return bv("N",n,void 0)}function bv(n,e,t){return{kind:n,value:e,error:t}}var To=null;function Vs(n){if(Wn.useDeprecatedSynchronousErrorHandling){let e=!To;if(e&&(To={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=To;if(To=null,t)throw r}}else n()}function kD(n){Wn.useDeprecatedSynchronousErrorHandling&&To&&(To.errorThrown=!0,To.error=n)}var Ao=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Kd(e)&&e.add(this)):this.destination=uV}static create(e,t,r){return new Us(e,t,r)}next(e){this.isStopped?Cv(PD(e),this):this._next(e)}error(e){this.isStopped?Cv(RD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cv(xD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cV=Function.prototype.bind;function wv(n,e){return cV.call(n,e)}var Sv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Qd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Qd(r)}else Qd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Qd(t)}}},Us=class extends Ao{constructor(e,t,r){super();let i;if(pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Wn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&wv(e.next,o),error:e.error&&wv(e.error,o),complete:e.complete&&wv(e.complete,o)}):i=e}this.destination=new Sv(i)}};function Qd(n){Wn.useDeprecatedSynchronousErrorHandling?kD(n):Yd(n)}function lV(n){throw n}function Cv(n,e){let{onStoppedNotification:t}=Wn;t&&Ls.setTimeout(()=>t(n,e))}var uV={closed:!0,next:Yc,error:lV,complete:Yc};var js=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kn(n){return n}function Dv(...n){return Tv(n)}function Tv(n){return n.length===0?Kn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=hV(t)?t:new Us(t,r,i);return Vs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=ND(r),new r((i,o)=>{let s=new Us({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[js](){return this}pipe(...t){return Tv(t)(this)}toPromise(t){return t=ND(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function ND(n){var e;return(e=n??Wn.Promise)!==null&&e!==void 0?e:Promise}function dV(n){return n&&pe(n.next)&&pe(n.error)&&pe(n.complete)}function hV(n){return n&&n instanceof Ao||dV(n)&&Kd(n)}function fV(n){return pe(n?.lift)}function Ne(n){return e=>{if(fV(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Re(n,e,t,r,i){return new Av(n,e,t,r,i)}var Av=class extends Ao{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Bs={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=Bs;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(o=>{t=void 0,n(o)});return new je(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=Bs;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=Bs;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var MD=Fs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Jd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new MD}next(t){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Iv:(this.currentObservers=null,o.push(t),new je(()=>{this.currentObservers=null,Do(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new Jd(e,t),n})(),Jd=class extends fe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Iv}};var ot=class extends fe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xv={now(){return(xv.delegate||Date).now()},delegate:void 0};var Zd=class extends je{constructor(e,t){super()}schedule(e,t=0){return this}};var Qc={setInterval(n,e,...t){let{delegate:r}=Qc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Qc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var wi=class extends Zd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Qc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Qc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Do(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var $s=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};$s.now=xv.now;var Ci=class extends $s{constructor(e,t=$s.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Si=new Ci(wi),Rv=Si;var Xd=class extends wi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var eh=class extends Ci{};var Pv=new eh(Xd);var th=class extends wi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Bs.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:o}=e;t!=null&&t===e._scheduled&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==t&&(Bs.cancelAnimationFrame(t),e._scheduled=void 0)}};var nh=class extends Ci{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var rh=new nh(th);var zt=new le(n=>n.complete());function ih(n){return n&&pe(n.schedule)}function kv(n){return n[n.length-1]}function oh(n){return pe(kv(n))?n.pop():void 0}function ur(n){return ih(kv(n))?n.pop():void 0}function OD(n,e){return typeof kv(n)=="number"?n.pop():e}function sh(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function LD(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(p){s(p)}}function c(d){try{u(r.throw(d))}catch(p){s(p)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function FD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xo(n){return this instanceof xo?(this.v=n,this):new xo(n)}function VD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(V){return new Promise(function(M,j){o.push([y,V,M,j])>1||c(y,V)})},T&&(i[y]=T(i[y])))}function c(y,T){try{u(r[y](T))}catch(V){m(o[0][3],V)}}function u(y){y.value instanceof xo?Promise.resolve(y.value.v).then(d,p):m(o[0][2],y)}function d(y){c("next",y)}function p(y){c("throw",y)}function m(y,T){y(T),o.shift(),o.length&&c(o[0][0],o[0][1])}}function UD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof FD=="function"?FD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var ah=n=>n&&typeof n.length=="number"&&typeof n!="function";function ch(n){return pe(n?.then)}function lh(n){return pe(n[js])}function uh(n){return Symbol.asyncIterator&&pe(n?.[Symbol.asyncIterator])}function dh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hh=pV();function fh(n){return pe(n?.[hh])}function ph(n){return VD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield xo(t.read());if(i)return yield xo(void 0);yield yield xo(r)}}finally{t.releaseLock()}})}function mh(n){return pe(n?.getReader)}function Ze(n){if(n instanceof le)return n;if(n!=null){if(lh(n))return mV(n);if(ah(n))return gV(n);if(ch(n))return vV(n);if(uh(n))return jD(n);if(fh(n))return _V(n);if(mh(n))return yV(n)}throw dh(n)}function mV(n){return new le(e=>{let t=n[js]();if(pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gV(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function vV(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Yd)})}function _V(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function jD(n){return new le(e=>{EV(n,e).catch(t=>e.error(t))})}function yV(n){return jD(ph(n))}function EV(n,e){var t,r,i,o;return LD(this,void 0,void 0,function*(){try{for(t=UD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function ln(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Di(n,e=0){return Ne((t,r)=>{t.subscribe(Re(r,i=>ln(r,n,()=>r.next(i),e),()=>ln(r,n,()=>r.complete(),e),i=>ln(r,n,()=>r.error(i),e)))})}function Ti(n,e=0){return Ne((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function BD(n,e){return Ze(n).pipe(Ti(e),Di(e))}function $D(n,e){return Ze(n).pipe(Ti(e),Di(e))}function HD(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function GD(n,e){return new le(t=>{let r;return ln(t,e,()=>{r=n[hh](),ln(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}function gh(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{ln(t,e,()=>{let r=n[Symbol.asyncIterator]();ln(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function zD(n,e){return gh(ph(n),e)}function qD(n,e){if(n!=null){if(lh(n))return BD(n,e);if(ah(n))return HD(n,e);if(ch(n))return $D(n,e);if(uh(n))return gh(n,e);if(fh(n))return GD(n,e);if(mh(n))return zD(n,e)}throw dh(n)}function Oe(n,e){return e?qD(n,e):Ze(n)}function ve(...n){let e=ur(n);return Oe(n,e)}function Nv(n,e){let t=pe(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function Jc(n){return!!n&&(n instanceof le||pe(n.lift)&&pe(n.subscribe))}var Ro=Fs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function WD(n){return n instanceof Date&&!isNaN(n)}function De(n,e){return Ne((t,r)=>{let i=0;t.subscribe(Re(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:IV}=Array;function bV(n,e){return IV(e)?n(...e):n(e)}function vh(n){return De(e=>bV(n,e))}var{isArray:wV}=Array,{getPrototypeOf:CV,prototype:SV,keys:DV}=Object;function _h(n){if(n.length===1){let e=n[0];if(wV(e))return{args:e,keys:null};if(TV(e)){let t=DV(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function TV(n){return n&&typeof n=="object"&&CV(n)===SV}function yh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Eh(...n){let e=ur(n),t=oh(n),{args:r,keys:i}=_h(n);if(r.length===0)return Oe([],e);let o=new le(AV(r,e,i?s=>yh(i,s):Kn));return t?o.pipe(vh(t)):o}function AV(n,e,t=Kn){return r=>{KD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)KD(e,()=>{let u=Oe(n[c],e),d=!1;u.subscribe(Re(r,p=>{o[c]=p,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function KD(n,e,t){n?ln(t,n,e):e()}function YD(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,p=!1,m=()=>{p&&!c.length&&!u&&e.complete()},y=V=>u<r?T(V):c.push(V),T=V=>{o&&e.next(V),u++;let M=!1;Ze(t(V,d++)).subscribe(Re(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{M=!0},void 0,()=>{if(M)try{for(u--;c.length&&u<r;){let j=c.shift();s?ln(e,s,()=>T(j)):T(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(Re(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Nt(n,e,t=1/0){return pe(e)?Nt((r,i)=>De((o,s)=>e(r,o,i,s))(Ze(n(r,i))),t):(typeof e=="number"&&(t=e),Ne((r,i)=>YD(r,i,n,t)))}function Ai(n=1/0){return Nt(Kn,n)}function QD(){return Ai(1)}function Hs(...n){return QD()(Oe(n,ur(n)))}function Zc(n){return new le(e=>{Ze(n()).subscribe(e)})}function Mv(...n){let e=oh(n),{args:t,keys:r}=_h(n),i=new le(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let p=!1;Ze(t[d]).subscribe(Re(o,m=>{p||(p=!0,u--),a[d]=m},()=>c--,void 0,()=>{(!c||!p)&&(u||o.next(r?yh(r,a):a),o.complete())}))}});return e?i.pipe(vh(e)):i}function Ih(n=0,e,t=Rv){let r=-1;return e!=null&&(ih(e)?t=e:r=e),new le(i=>{let o=WD(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function xi(n=0,e=Si){return n<0&&(n=0),Ih(n,n,e)}function bh(...n){let e=ur(n),t=OD(n,1/0),r=n;return r.length?r.length===1?Ze(r[0]):Ai(t)(Oe(r,e)):zt}function Xt(n,e){return Ne((t,r)=>{let i=0;t.subscribe(Re(r,o=>n.call(e,o,i++)&&r.next(o)))})}function JD(n){return Ne((e,t)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let u=i;i=null,t.next(u)}s&&t.complete()},c=()=>{o=null,s&&t.complete()};e.subscribe(Re(t,u=>{r=!0,i=u,o||Ze(n(u)).subscribe(o=Re(t,a,c))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}function Ov(n,e=Si){return JD(()=>Ih(n,e))}function Gs(n){return Ne((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Re(t,void 0,void 0,s=>{o=Ze(n(s,Gs(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function zs(n,e){return pe(e)?Nt(n,e,1):Nt(n,1)}function Fv(n){return Ne((e,t)=>{let r=!1;e.subscribe(Re(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mt(n){return n<=0?()=>zt:Ne((e,t)=>{let r=0;e.subscribe(Re(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ZD(n=xV){return Ne((e,t)=>{let r=!1;e.subscribe(Re(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function xV(){return new Ro}function Lv(n){return Ne((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function jr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Xt((i,o)=>n(i,o,r)):Kn,mt(1),t?Fv(e):ZD(()=>new Ro))}function wh(n){return n<=0?()=>zt:Ne((e,t)=>{let r=[];e.subscribe(Re(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function qs(...n){let e=ur(n);return Ne((t,r)=>{(e?Hs(n,t,e):Hs(n,t)).subscribe(r)})}function un(n,e){return Ne((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Re(r,c=>{i?.unsubscribe();let u=0,d=o++;Ze(n(c,d)).subscribe(i=Re(r,p=>r.next(e?e(c,p,d,u++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function dr(n){return Ne((e,t)=>{Ze(n).subscribe(Re(t,()=>t.complete(),Yc)),!t.closed&&e.subscribe(t)})}function Mt(n,e,t){let r=pe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ne((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Re(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Kn}var Vv;function Ch(){return Vv}function hr(n){let e=Vv;return Vv=n,e}var XD=Symbol("NotFound");function Ws(n){return n===XD||n?.name==="\u0275NotFound"}var Ri=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},e_=new Ri("21.0.0");var t_="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",W=class extends Error{code;constructor(e,t){super(Mi(e,t)),this.code=e}};function kV(n){return`NG0${Math.abs(n)}`}function Mi(n,e){return`${kV(n)}${e?": "+e:""}`}var tn=globalThis;function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("")}function iT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function $r(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map($r).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function n_(n,e){return n?e?`${n} ${e}`:n:e||""}var NV=Fe({__forward_ref__:Fe});function Oi(n){return n.__forward_ref__=Oi,n.toString=function(){return $r(this())},n}function Ot(n){return r_(n)?n():n}function r_(n){return typeof n=="function"&&n.hasOwnProperty(NV)&&n.__forward_ref__===Oi}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nt(n){return{providers:n.providers||[],imports:n.imports||[]}}function il(n){return MV(n,xh)}function i_(n){return il(n)!==null}function MV(n,e){return n.hasOwnProperty(e)&&n[e]||null}function OV(n){let e=n?.[xh]??null;return e||null}function jv(n){return n&&n.hasOwnProperty(Dh)?n[Dh]:null}var xh=Fe({\u0275prov:Fe}),Dh=Fe({\u0275inj:Fe}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function o_(n){return n&&!!n.\u0275providers}var s_=Fe({\u0275cmp:Fe}),a_=Fe({\u0275dir:Fe}),c_=Fe({\u0275pipe:Fe}),l_=Fe({\u0275mod:Fe}),el=Fe({\u0275fac:Fe}),Oo=Fe({__NG_ELEMENT_ID__:Fe}),eT=Fe({__NG_ENV_ID__:Fe});function Ys(n){return typeof n=="string"?n:n==null?"":String(n)}function oT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ys(n)}var sT=Fe({ngErrorCode:Fe}),FV=Fe({ngErrorMessage:Fe}),LV=Fe({ngTokenPath:Fe});function u_(n,e){return aT("",-200,e)}function Rh(n,e){throw new W(-201,!1)}function aT(n,e,t){let r=new W(e,n);return r[sT]=e,r[FV]=n,t&&(r[LV]=t),r}function VV(n){return n[sT]}var Bv;function cT(){return Bv}function en(n){let e=Bv;return Bv=n,e}function d_(n,e,t){let r=il(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Rh(n,"Injector")}var UV={},Po=UV,$v="__NG_DI_FLAG__",Hv=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ko(t)||0;try{return this.injector.get(e,r&8?null:Po,r)}catch(i){if(Ws(i))return i;throw i}}};function jV(n,e=0){let t=Ch();if(t===void 0)throw new W(-203,!1);if(t===null)return d_(n,void 0,e);{let r=BV(e),i=t.retrieve(n,r);if(Ws(i)){if(r.optional)return null;throw i}return i}}function te(n,e=0){return(cT()||jV)(Ot(n),e)}function N(n,e){return te(n,ko(e))}function ko(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function BV(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Gv(n){let e=[];for(let t=0;t<n.length;t++){let r=Ot(n[t]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=$V(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(te(i,o))}else e.push(te(r))}return e}function lT(n,e){return n[$v]=e,n.prototype[$v]=e,n}function $V(n){return n[$v]}function Pi(n,e){let t=n.hasOwnProperty(el);return t?n[el]:null}function uT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function dT(n){return n.flat(Number.POSITIVE_INFINITY)}function Ph(n,e){n.forEach(t=>Array.isArray(t)?Ph(t,e):e(t))}function h_(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ol(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function hT(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function fT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function pT(n,e,t){let r=Qs(n,e);return r>=0?n[r|1]=t:(r=~r,fT(n,r,e,t)),r}function kh(n,e){let t=Qs(n,e);if(t>=0)return n[t|1]}function Qs(n,e){return HV(n,e,1)}function HV(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Fi={},En=[],Js=new q(""),f_=new q("",-1),p_=new q(""),tl=class{get(e,t=Po){if(t===Po){let i=aT("",-201);throw i.name="\u0275NotFound",i}return t}};function m_(n){return n[l_]||null}function pr(n){return n[s_]||null}function g_(n){return n[a_]||null}function mT(n){return n[c_]||null}function Yn(n){return{\u0275providers:n}}function gT(...n){return{\u0275providers:v_(!0,n),\u0275fromNgModule:!0}}function v_(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Ph(e,s=>{let a=s;Th(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&vT(i,o),t}function vT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];__(i,o=>{e(o,r)})}}function Th(n,e,t,r){if(n=Ot(n),!n)return!1;let i=null,o=jv(n),s=!o&&pr(n);if(!o&&!s){let c=n.ngModule;if(o=jv(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Th(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Ph(o.imports,d=>{Th(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&vT(u,e)}if(!a){let u=Pi(i)||(()=>new i);e({provide:i,useFactory:u,deps:En},i),e({provide:p_,useValue:i,multi:!0},i),e({provide:Js,useValue:()=>te(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;__(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function __(n,e){for(let t of n)o_(t)&&(t=t.\u0275providers),Array.isArray(t)?__(t,e):e(t)}var GV=Fe({provide:String,useValue:Fe});function _T(n){return n!==null&&typeof n=="object"&&GV in n}function zV(n){return!!(n&&n.useExisting)}function qV(n){return!!(n&&n.useFactory)}function No(n){return typeof n=="function"}function yT(n){return!!n.useClass}var sl=new q(""),Sh={},tT={},Uv;function Zs(){return Uv===void 0&&(Uv=new tl),Uv}var st=class{},Mo=class extends st{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,qv(e,s=>this.processProvider(s)),this.records.set(f_,Ks(void 0,this)),i.has("environment")&&this.records.set(st,Ks(void 0,this));let o=this.records.get(sl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(p_,En,{self:!0}))}retrieve(e,t){let r=ko(t)||0;try{return this.get(e,Po,r)}catch(i){if(Ws(i))return i;throw i}}destroy(){Xc(this),this._destroyed=!0;let e=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return Xc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Xc(this);let t=hr(this),r=en(void 0),i;try{return e()}finally{hr(t),en(r)}}get(e,t=Po,r){if(Xc(this),e.hasOwnProperty(eT))return e[eT](this);let i=ko(r),o,s=hr(this),a=en(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=JV(e)&&il(e);d&&this.injectableDefInScope(d)?u=Ks(zv(e),Sh):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Zs():this.parent;return t=i&8&&t===Po?null:t,c.get(e,t)}catch(c){let u=VV(c);throw u===-200||u===-201?new W(u,null):c}finally{en(a),hr(s)}}resolveInjectorInitializers(){let e=ge(null),t=hr(this),r=en(void 0),i;try{let o=this.get(Js,En,{self:!0});for(let s of o)s()}finally{hr(t),en(r),ge(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push($r(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ot(e);let t=No(e)?e:Ot(e&&e.provide),r=KV(e);if(!No(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ks(void 0,Sh,!0),i.factory=()=>Gv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ge(null);try{if(t.value===tT)throw u_($r(e));return t.value===Sh&&(t.value=tT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&QV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ge(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ot(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function zv(n){let e=il(n),t=e!==null?e.factory:Pi(n);if(t!==null)return t;if(n instanceof q)throw new W(204,!1);if(n instanceof Function)return WV(n);throw new W(204,!1)}function WV(n){if(n.length>0)throw new W(204,!1);let t=OV(n);return t!==null?()=>t.factory(n):()=>new n}function KV(n){if(_T(n))return Ks(void 0,n.useValue);{let e=y_(n);return Ks(e,Sh)}}function y_(n,e,t){let r;if(No(n)){let i=Ot(n);return Pi(i)||zv(i)}else if(_T(n))r=()=>Ot(n.useValue);else if(qV(n))r=()=>n.useFactory(...Gv(n.deps||[]));else if(zV(n))r=(i,o)=>te(Ot(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ot(n&&(n.useClass||n.provide));if(YV(n))r=()=>new i(...Gv(n.deps));else return Pi(i)||zv(i)}return r}function Xc(n){if(n.destroyed)throw new W(205,!1)}function Ks(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function YV(n){return!!n.deps}function QV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function JV(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function qv(n,e){for(let t of n)Array.isArray(t)?qv(t,e):t&&o_(t)?qv(t.\u0275providers,e):e(t)}function gt(n,e){let t;n instanceof Mo?(Xc(n),t=n):t=new Hv(n);let r,i=hr(t),o=en(void 0);try{return e()}finally{hr(i),en(o)}}function E_(){return cT()!==void 0||Ch()!=null}var Qn=0,se=1,de=2,St=3,kn=4,nn=5,Xs=6,ea=7,qt=8,Li=9,Hr=10,rt=11,ta=12,I_=13,Fo=14,dn=15,Vi=16,Lo=17,mr=18,al=19,b_=20,Br=21,Nh=22,cl=23,In=24,Vo=25,ll=26,vt=27,ET=1;var Ui=7,ul=8,Uo=9,rn=10;function gr(n){return Array.isArray(n)&&typeof n[ET]=="object"}function Jn(n){return Array.isArray(n)&&n[ET]===!0}function w_(n){return(n.flags&4)!==0}function ji(n){return n.componentOffset>-1}function na(n){return(n.flags&1)===1}function vr(n){return!!n.template}function ra(n){return(n[de]&512)!==0}function jo(n){return(n[de]&256)===256}var IT="svg",bT="math";function Nn(n){for(;Array.isArray(n);)n=n[Qn];return n}function C_(n,e){return Nn(e[n])}function _r(n,e){return Nn(e[n.index])}function Mh(n,e){return n.data[e]}function S_(n,e){return n[e]}function D_(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Mn(n,e){let t=e[n];return gr(t)?t:t[Qn]}function wT(n){return(n[de]&4)===4}function Oh(n){return(n[de]&128)===128}function CT(n){return Jn(n[St])}function ia(n,e){return e==null?null:n[e]}function T_(n){n[Lo]=0}function A_(n){n[de]&1024||(n[de]|=1024,Oh(n)&&oa(n))}function ST(n,e){for(;n>0;)e=e[Fo],n--;return e}function dl(n){return!!(n[de]&9216||n[In]?.dirty)}function Fh(n){n[Hr].changeDetectionScheduler?.notify(8),n[de]&64&&(n[de]|=1024),dl(n)&&oa(n)}function oa(n){n[Hr].changeDetectionScheduler?.notify(0);let e=ki(n);for(;e!==null&&!(e[de]&8192||(e[de]|=8192,!Oh(e)));)e=ki(e)}function x_(n,e){if(jo(n))throw new W(911,!1);n[Br]===null&&(n[Br]=[]),n[Br].push(e)}function DT(n,e){if(n[Br]===null)return;let t=n[Br].indexOf(e);t!==-1&&n[Br].splice(t,1)}function ki(n){let e=n[St];return Jn(e)?e[St]:e}function R_(n){return n[ea]??=[]}function P_(n){return n.cleanup??=[]}function TT(n,e,t,r){let i=R_(e);i.push(t),n.firstCreatePass&&P_(n).push(r,i.length-1)}var ye={lFrame:BT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Wv=!1;function AT(){return ye.lFrame.elementDepthCount}function xT(){ye.lFrame.elementDepthCount++}function RT(){ye.lFrame.elementDepthCount--}function Lh(){return ye.bindingsEnabled}function k_(){return ye.skipHydrationRootTNode!==null}function PT(n){return ye.skipHydrationRootTNode===n}function kT(){ye.skipHydrationRootTNode=null}function Ee(){return ye.lFrame.lView}function Ft(){return ye.lFrame.tView}function Y(n){return ye.lFrame.contextLView=n,n[qt]}function Q(n){return ye.lFrame.contextLView=null,n}function on(){let n=N_();for(;n!==null&&n.type===64;)n=n.parent;return n}function N_(){return ye.lFrame.currentTNode}function NT(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function sa(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function M_(){return ye.lFrame.isParent}function O_(){ye.lFrame.isParent=!1}function F_(){return Wv}function L_(n){let e=Wv;return Wv=n,e}function aa(){let n=ye.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function MT(){return ye.lFrame.bindingIndex}function OT(n){return ye.lFrame.bindingIndex=n}function hl(){return ye.lFrame.bindingIndex++}function V_(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function FT(){return ye.lFrame.inI18n}function LT(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,Vh(e)}function VT(){return ye.lFrame.currentDirectiveIndex}function Vh(n){ye.lFrame.currentDirectiveIndex=n}function UT(n){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function U_(){return ye.lFrame.currentQueryIndex}function Uh(n){ye.lFrame.currentQueryIndex=n}function ZV(n){let e=n[se];return e.type===2?e.declTNode:e.type===1?n[nn]:null}function j_(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=ZV(o),i===null||(o=o[Fo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=jT();return r.currentTNode=e,r.lView=n,!0}function jh(n){let e=jT(),t=n[se];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function jT(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?BT(n):e}function BT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function $T(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var B_=$T;function Bh(){let n=$T();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function HT(n){return(ye.lFrame.contextLView=ST(n,ye.lFrame.contextLView))[qt]}function Bi(){return ye.lFrame.selectedIndex}function $i(n){ye.lFrame.selectedIndex=n}function $_(){let n=ye.lFrame;return Mh(n.tView,n.selectedIndex)}function GT(){return ye.lFrame.currentNamespace}var zT=!0;function $h(){return zT}function fl(n){zT=n}function Kv(n,e=null,t=null,r){let i=H_(n,e,t,r);return i.resolveInjectorInitializers(),i}function H_(n,e=null,t=null,r,i=new Set){let o=[t||En,gT(n)];return r=r||(typeof n=="object"?void 0:$r(n)),new Mo(o,e||Zs(),r||null,i)}var Ue=class n{static THROW_IF_NOT_FOUND=Po;static NULL=new tl;static create(e,t){if(Array.isArray(e))return Kv({name:""},t,e,"");{let r=e.name??"";return Kv({name:r},e.parent,e.providers,r)}}static \u0275prov=G({token:n,providedIn:"any",factory:()=>te(f_)});static __NG_ELEMENT_ID__=-1},Je=new q(""),On=(()=>{class n{static __NG_ELEMENT_ID__=XV;static __NG_ENV_ID__=t=>t}return n})(),Yv=class extends On{_lView;constructor(e){super(),this._lView=e}get destroyed(){return jo(this._lView)}onDestroy(e){let t=this._lView;return x_(t,e),()=>DT(t,e)}};function XV(){return new Yv(Ee())}var qT=!1,Gr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ot(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new le(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),Qv=class extends fe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,E_()&&(this.destroyRef=N(On,{optional:!0})??void 0,this.pendingTasks=N(Gr,{optional:!0})??void 0)}emit(e){let t=ge(null);try{super.next(e)}finally{ge(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Be=Qv;function Ah(...n){}function G_(n){let e,t;function r(){n=Ah;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function z_(n){return queueMicrotask(()=>n()),()=>{n=Ah}}var q_="isAngularZone",nl=q_+"_ID",e2=0,Pe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Be(!1);onMicrotaskEmpty=new Be(!1);onStable=new Be(!1);onError=new Be(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qT}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,r2(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(q_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new W(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,t2,Ah,Ah);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},t2={};function W_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function n2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){G_(()=>{n.callbackScheduled=!1,Jv(n),n.isCheckStableRunning=!0,W_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Jv(n)}function r2(n){let e=()=>{n2(n)},t=e2++;n._inner=n._inner.fork({name:"angular",properties:{[q_]:!0,[nl]:t,[nl+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(i2(c))return r.invokeTask(o,s,a,c);try{return nT(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),rT(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return nT(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!o2(c)&&e(),rT(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Jv(n),W_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Jv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function nT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rT(n){n._nesting--,W_(n)}var rl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Be;onMicrotaskEmpty=new Be;onStable=new Be;onError=new Be;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function i2(n){return WT(n,"__ignore_ng_zone__")}function o2(n){return WT(n,"__scheduler_tick__")}function WT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var fr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Fn=new q("",{factory:()=>{let n=N(Pe),e=N(st),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(fr),t.handleError(r))})}}}),KT={provide:Js,useValue:()=>{let n=N(fr,{optional:!0})},multi:!0};function Lt(n,e){let[t,r,i]=yv(n,e?.equal),o=t,s=o[Zt];return o.set=r,o.update=i,o.asReadonly=YT.bind(o),o}function YT(){let n=this[Zt];if(n.readonlyFn===void 0){let e=()=>this();e[Zt]=n,n.readonlyFn=e}return n.readonlyFn}var Hh=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=s2}return n})();function s2(){return new Hh(Ee(),on())}var Ni=class{},pl=new q("",{factory:()=>!0});var K_=new q(""),ca=(()=>{class n{internalPendingTasks=N(Gr);scheduler=N(Ni);errorHandler=N(Fn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),Y_=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>new Zv})}return n})(),Zv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Xv=class{[Zt];constructor(e){this[Zt]=e}destroy(){this[Zt].destroy()}};function ft(n){return Ev(n)}function pa(n){return{toString:n}.toString()}var Gh="__parameters__";function p2(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function m2(n,e,t){return pa(()=>{let r=p2(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let p=c.hasOwnProperty(Gh)?c[Gh]:Object.defineProperty(c,Gh,{value:[]})[Gh];for(;p.length<=d;)p.push(null);return(p[d]=p[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var wn=lT(m2("Optional"),8);function bA(n){let e=tn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function g2(n){return typeof n=="function"}function wA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Jh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Ir=(()=>{let n=()=>CA;return n.ngInherit=!0,n})();function CA(n){return n.type.prototype.ngOnChanges&&(n.setInput=_2),v2}function v2(){let n=DA(this),e=n?.current;if(e){let t=n.previous;if(t===Fi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function _2(n,e,t,r,i){let o=this.declaredInputs[r],s=DA(n)||y2(n,{previous:Fi,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Jh(u&&u.currentValue,t,c===Fi),wA(n,e,i,t)}var SA="__ngSimpleChanges__";function DA(n){return n[SA]||null}function y2(n,e){return n[SA]=e}var QT=[];var ze=function(n,e=null,t){for(let r=0;r<QT.length;r++){let i=QT[r];i(n,e,t)}};function E2(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=CA(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function TA(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Wh(n,e,t){AA(n,e,3,t)}function Kh(n,e,t,r){(n[de]&3)===t&&AA(n,e,t,r)}function Q_(n,e){let t=n[de];(t&3)===e&&(t&=16383,t+=1,n[de]=t)}function AA(n,e,t,r){let i=r!==void 0?n[Lo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Lo]+=65536),(a<o||o==-1)&&(I2(n,t,e,c),n[Lo]=(n[Lo]&4294901760)+c+2),c++}function JT(n,e){ze(4,n,e);let t=ge(null);try{e.call(n)}finally{ge(t),ze(5,n,e)}}function I2(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[de]>>14<n[Lo]>>16&&(n[de]&3)===e&&(n[de]+=16384,JT(a,o)):JT(a,o)}var ua=-1,$o=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function b2(n){return(n.flags&8)!==0}function w2(n){return(n.flags&16)!==0}function C2(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];D2(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function S2(n){return n===3||n===4||n===6}function D2(n){return n.charCodeAt(0)===64}function yl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ZT(n,t,i,null,e[++r]):ZT(n,t,i,null,null))}}return n}function ZT(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function xA(n){return n!==ua}function Zh(n){return n&32767}function T2(n){return n>>16}function Xh(n,e){let t=T2(n),r=e;for(;t>0;)r=r[Fo],t--;return r}var sy=!0;function ef(n){let e=sy;return sy=n,e}var A2=256,RA=A2-1,PA=5,x2=0,yr={};function R2(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Oo)&&(r=t[Oo]),r==null&&(r=t[Oo]=x2++);let i=r&RA,o=1<<i;e.data[n+(i>>PA)]|=o}function tf(n,e){let t=kA(n,e);if(t!==-1)return t;let r=e[se];r.firstCreatePass&&(n.injectorIndex=e.length,J_(r.data,n),J_(e,null),J_(r.blueprint,null));let i=Ny(n,e),o=n.injectorIndex;if(xA(i)){let s=Zh(i),a=Xh(i,e),c=a[se].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function J_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function kA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Ny(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=LA(i),r===null)return ua;if(t++,i=i[Fo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ua}function ay(n,e,t){R2(n,e,t)}function NA(n,e,t){if(t&8||n!==void 0)return n;Rh(e,"NodeInjector")}function MA(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Li],o=en(void 0);try{return i?i.get(e,r,t&8):d_(e,r,t&8)}finally{en(o)}}return NA(r,e,t)}function OA(n,e,t,r=0,i){if(n!==null){if(e[de]&2048&&!(r&2)){let s=M2(n,e,t,r,yr);if(s!==yr)return s}let o=FA(n,e,t,r,yr);if(o!==yr)return o}return MA(e,t,r,i)}function FA(n,e,t,r,i){let o=k2(t);if(typeof o=="function"){if(!j_(e,n,r))return r&1?NA(i,t,r):MA(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Rh(t);else return s}finally{B_()}}else if(typeof o=="number"){let s=null,a=kA(n,e),c=ua,u=r&1?e[dn][nn]:null;for((a===-1||r&4)&&(c=a===-1?Ny(n,e):e[a+8],c===ua||!eA(r,!1)?a=-1:(s=e[se],a=Zh(c),e=Xh(c,e)));a!==-1;){let d=e[se];if(XT(o,a,d.data)){let p=P2(a,e,t,s,r,u);if(p!==yr)return p}c=e[a+8],c!==ua&&eA(r,e[se].data[a+8]===u)&&XT(o,a,e)?(s=d,a=Zh(c),e=Xh(c,e)):a=-1}}return i}function P2(n,e,t,r,i,o){let s=e[se],a=s.data[n+8],c=r==null?ji(a)&&sy:r!=s&&(a.type&3)!==0,u=i&1&&o===a,d=Yh(a,s,t,c,u);return d!==null?El(e,s,d,a,i):yr}function Yh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,p=r?a:a+d,m=i?a+d:u;for(let y=p;y<m;y++){let T=s[y];if(y<c&&t===T||y>=c&&T.type===t)return y}if(i){let y=s[c];if(y&&vr(y)&&y.type===t)return c}return null}function El(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof $o){let a=o;if(a.resolving){let y=oT(s[t]);throw u_(y)}let c=ef(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],d,p=a.injectImpl?en(a.injectImpl):null,m=j_(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&E2(t,s[t],e)}finally{p!==null&&en(p),ef(c),a.resolving=!1,B_()}}return o}function k2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Oo)?n[Oo]:void 0;return typeof e=="number"?e>=0?e&RA:N2:e}function XT(n,e,t){let r=1<<n;return!!(t[e+(n>>PA)]&r)}function eA(n,e){return!(n&2)&&!(n&1&&e)}var Bo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return OA(this._tNode,this._lView,e,ko(r),t)}};function N2(){return new Bo(on(),Ee())}function zo(n){return pa(()=>{let e=n.prototype.constructor,t=e[el]||cy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[el]||cy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function cy(n){return r_(n)?()=>{let e=cy(Ot(n));return e&&e()}:Pi(n)}function M2(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[de]&2048&&!ra(s);){let a=FA(o,s,t,r|2,yr);if(a!==yr)return a;let c=o.parent;if(!c){let u=s[b_];if(u){let d=u.get(t,yr,r);if(d!==yr)return d}c=LA(s),s=s[Fo]}o=c}return i}function LA(n){let e=n[se],t=e.type;return t===2?e.declTNode:t===1?n[nn]:null}function O2(){return ma(on(),Ee())}function ma(n,e){return new Vt(_r(n,e))}var Vt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=O2}return n})();function F2(n){return n instanceof Vt?n.nativeElement:n}function L2(){return this._results[Symbol.iterator]()}var nf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new fe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=dT(e);(this._changesDetected=!uT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=L2};function VA(n){return(n.flags&128)===128}var My=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(My||{}),UA=new Map,V2=0;function U2(){return V2++}function j2(n){UA.set(n[al],n)}function ly(n){UA.delete(n[al])}var tA="__ngContext__";function da(n,e){gr(e)?(n[tA]=e[al],j2(e)):n[tA]=e}function jA(n){return $A(n[ta])}function BA(n){return $A(n[kn])}function $A(n){for(;n!==null&&!Jn(n);)n=n[kn];return n}var uy;function Oy(n){uy=n}function HA(){if(uy!==void 0)return uy;if(typeof document<"u")return document;throw new W(210,!1)}var df=new q("",{factory:()=>B2}),B2="ng";var hf=new q(""),qr=new q("",{providedIn:"platform",factory:()=>"unknown"});var ff=new q("",{factory:()=>HA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var GA=!1,zA=new q("",{factory:()=>GA});var Fy=new q("");var $2=(n,e,t,r)=>{};function H2(n,e,t,r){$2(n,e,t,r)}function pf(n){return(n.flags&32)===32}var G2=()=>null;function qA(n,e,t=!1){return G2(n,e,t)}function WA(n,e){let t=n.contentQueries;if(t!==null){let r=ge(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Uh(o),a.contentQueries(2,e[s],s)}}}finally{ge(r)}}}function dy(n,e,t){Uh(0);let r=ge(null);try{e(n,t)}finally{ge(r)}}function Ly(n,e,t){if(w_(e)){let r=ge(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{ge(r)}}}var Xn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Xn||{});var hy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${t_})`}};function Vy(n){return n instanceof hy?n.changingThisBreaksApplicationSecurity:n}var z2=/^>|^->|<!--|-->|--!>|<!-$/g,q2=/(<|>)/g,W2="\u200B$1\u200B";function K2(n){return n.replace(z2,e=>e.replace(q2,W2))}function Sl(n){return n.ownerDocument.defaultView}function KA(n){return n instanceof Function?n():n}function Y2(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var YA="ng-template";function Q2(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Y2(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Uy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Uy(n){return n.type===4&&n.value!==YA}function J2(n,e,t){let r=n.type===4&&!t?YA:n.value;return e===r}function Z2(n,e,t){let r=4,i=n.attrs,o=i!==null?tU(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Zn(r)&&!Zn(c))return!1;if(s&&Zn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!J2(n,c,t)||c===""&&e.length===1){if(Zn(r))return!1;s=!0}}else if(r&8){if(i===null||!Q2(n,i,c,t)){if(Zn(r))return!1;s=!0}}else{let u=e[++a],d=X2(c,i,Uy(n),t);if(d===-1){if(Zn(r))return!1;s=!0;continue}if(u!==""){let p;if(d>o?p="":p=i[d+1].toLowerCase(),r&2&&u!==p){if(Zn(r))return!1;s=!0}}}}return Zn(r)||s}function Zn(n){return(n&1)===0}function X2(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return nU(e,n)}function QA(n,e,t=!1){for(let r=0;r<e.length;r++)if(Z2(n,e[r],t))return!0;return!1}function eU(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function tU(n){for(let e=0;e<n.length;e++){let t=n[e];if(S2(t))return e}return n.length}function nU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function rU(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function nA(n,e){return n?":not("+e.trim()+")":e}function iU(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zn(s)&&(e+=nA(o,i),i=""),r=s,o=o||!Zn(r);t++}return i!==""&&(e+=nA(o,i)),e}function oU(n){return n.map(iU).join(",")}function sU(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Zn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Cn={};function aU(n,e){return n.createText(e)}function cU(n,e,t){n.setValue(e,t)}function lU(n,e){return n.createComment(K2(e))}function JA(n,e,t){return n.createElement(e,t)}function rf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ZA(n,e,t){n.appendChild(e,t)}function rA(n,e,t,r,i){r!==null?rf(n,e,t,r,i):ZA(n,e,t)}function uU(n,e,t,r){n.removeChild(null,e,t,r)}function dU(n,e,t){n.setAttribute(e,"style",t)}function hU(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XA(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&C2(n,e,r),i!==null&&hU(n,e,i),o!==null&&dU(n,e,o)}function jy(n,e,t,r,i,o,s,a,c,u,d){let p=vt+r,m=p+i,y=fU(p,m),T=typeof u=="function"?u():u;return y[se]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:d}}function fU(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Cn);return t}function pU(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function By(n,e,t,r,i,o,s,a,c,u,d){let p=e.blueprint.slice();return p[Qn]=i,p[de]=r|4|128|8|64|1024,(u!==null||n&&n[de]&2048)&&(p[de]|=2048),T_(p),p[St]=p[Fo]=n,p[qt]=t,p[Hr]=s||n&&n[Hr],p[rt]=a||n&&n[rt],p[Li]=c||n&&n[Li]||null,p[nn]=o,p[al]=U2(),p[Xs]=d,p[b_]=u,p[dn]=e.type==2?n[dn]:p,p}function mU(n,e,t){let r=_r(e,n),i=pU(t),o=n[Hr].rendererFactory,s=$y(n,By(n,i,null,ex(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function ex(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function tx(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $y(n,e){return n[ta]?n[I_][kn]=e:n[ta]=e,n[I_]=e,e}function I(n=1){nx(Ft(),Ee(),Bi()+n,!1)}function nx(n,e,t,r){if(!r)if((e[de]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Wh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Kh(e,o,0,t)}$i(t)}var mf=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(mf||{});function fy(n,e,t,r){let i=ge(null);try{let[o,s,a]=n.inputs[t],c=null;(s&mf.SignalBased)!==0&&(c=e[o][Zt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):wA(e,c,o,r)}finally{ge(i)}}var Er=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Er||{}),gU;function Hy(n,e){return gU(n,e)}var ha=new Set,gf=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(gf||{}),qo=new q(""),iA=new Set;function ga(n){iA.has(n)||(iA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Gy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),rx=[0,1,2,3],ix=(()=>{class n{ngZone=N(Pe);scheduler=N(Ni);errorHandler=N(fr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){N(qo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ze(16),this.executing=!0;for(let r of rx)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ze(17)}register(t){let{view:r}=t;r!==void 0?((r[Vo]??=[]).push(t),oa(r),r[de]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(gf.AFTER_NEXT_RENDER,t):t()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),of=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Vo];e&&(this.view[Vo]=e.filter(t=>t!==this))}};function Wo(n,e){let t=e?.injector??N(Ue);return ga("NgAfterNextRender"),_U(n,t,e,!0)}function vU(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function _U(n,e,t,r){let i=e.get(Gy);i.impl??=e.get(ix);let o=e.get(qo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(On):null,a=e.get(Hh,null,{optional:!0}),c=new of(i.impl,vU(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var yU=new q("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function ox(n,e,t){let r=n.get(yU);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function EU(n,e){for(let[t,r]of e)ox(n,r.animateFns)}function oA(n,e,t,r){let i=n?.[ll]?.enter;e!==null&&i&&i.has(t.index)&&EU(r,i)}function la(n,e,t,r,i,o,s,a){if(i!=null){let c,u=!1;Jn(i)?c=i:gr(i)&&(u=!0,i=i[Qn]);let d=Nn(i);n===0&&r!==null?(oA(a,r,o,t),s==null?ZA(e,r,d):rf(e,r,d,s||null,!0)):n===1&&r!==null?(oA(a,r,o,t),rf(e,r,d,s||null,!0)):n===2?sA(a,o,t,p=>{uU(e,d,u,p)}):n===3&&sA(a,o,t,()=>{e.destroyNode(d)}),c!=null&&PU(e,n,t,c,o,r,s)}}function IU(n,e){sx(n,e),e[Qn]=null,e[nn]=null}function bU(n,e,t,r,i,o){r[Qn]=i,r[nn]=e,vf(n,r,t,1,i,o)}function sx(n,e){e[Hr].changeDetectionScheduler?.notify(9),vf(n,e,e[rt],2,null,null)}function wU(n){let e=n[ta];if(!e)return Z_(n[se],n);for(;e;){let t=null;if(gr(e))t=e[ta];else{let r=e[rn];r&&(t=r)}if(!t){for(;e&&!e[kn]&&e!==n;)gr(e)&&Z_(e[se],e),e=e[St];e===null&&(e=n),gr(e)&&Z_(e[se],e),t=e&&e[kn]}e=t}}function zy(n,e){let t=n[Uo],r=t.indexOf(e);t.splice(r,1)}function ax(n,e){if(jo(e))return;let t=e[rt];t.destroyNode&&vf(n,e,t,3,null,null),wU(e)}function Z_(n,e){if(jo(e))return;let t=ge(null);try{e[de]&=-129,e[de]|=256,e[In]&&Wc(e[In]),DU(n,e),SU(n,e),e[se].type===1&&e[rt].destroy();let r=e[Vi];if(r!==null&&Jn(e[St])){r!==e[St]&&zy(r,e);let i=e[mr];i!==null&&i.detachView(n)}ly(e)}finally{ge(t)}}function sA(n,e,t,r){let i=n?.[ll];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&ha.add(n),ox(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),CU(n,r)}else n&&ha.delete(n),r(!1)},i)}function CU(n,e){let t=n[ll]?.running;if(t){t.then(()=>{n[ll].running=void 0,ha.delete(n),e(!0)});return}e(!1)}function SU(n,e){let t=n.cleanup,r=e[ea];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ea]=null);let i=e[Br];if(i!==null){e[Br]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[cl];if(o!==null){e[cl]=null;for(let s of o)s.destroy()}}function DU(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof $o)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ze(4,a,c);try{c.call(a)}finally{ze(5,a,c)}}else{ze(4,i,o);try{o.call(i)}finally{ze(5,i,o)}}}}}function cx(n,e,t){return TU(n,e.parent,t)}function TU(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Qn];if(ji(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Xn.None||i===Xn.Emulated)return null}return _r(r,t)}function lx(n,e,t){return xU(n,e,t)}function AU(n,e,t){return n.type&40?_r(n,t):null}var xU=AU,aA;function qy(n,e,t,r){let i=cx(n,r,e),o=e[rt],s=r.parent||e[nn],a=lx(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)rA(o,i,t[c],a,!1);else rA(o,i,t,a,!1);aA!==void 0&&aA(o,r,e,t,i)}function gl(n,e){if(e!==null){let t=e.type;if(t&3)return _r(e,n);if(t&4)return py(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return gl(n,r);{let i=n[e.index];return Jn(i)?py(-1,i):Nn(i)}}else{if(t&128)return gl(n,e.next);if(t&32)return Hy(e,n)()||Nn(n[e.index]);{let r=ux(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ki(n[dn]);return gl(i,r)}else return gl(n,e.next)}}}return null}function ux(n,e){if(e!==null){let r=n[dn][nn],i=e.projection;return r.projection[i]}return null}function py(n,e){let t=rn+n+1;if(t<e.length){let r=e[t],i=r[se].firstChild;if(i!==null)return gl(r,i)}return e[Ui]}function Wy(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Li];if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(s&&e===0&&(c&&da(Nn(c),r),t.flags|=2),!pf(t))if(u&8)Wy(n,e,t.child,r,i,o,!1),la(e,n,a,i,c,t,o,r);else if(u&32){let d=Hy(t,r),p;for(;p=d();)la(e,n,a,i,p,t,o,r);la(e,n,a,i,c,t,o,r)}else u&16?dx(n,e,r,t,i,o):la(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function vf(n,e,t,r,i,o){Wy(t,r,n.firstChild,e,i,o,!1)}function RU(n,e,t){let r=e[rt],i=cx(n,t,e),o=t.parent||e[nn],s=lx(o,t,e);dx(r,0,e,t,i,s)}function dx(n,e,t,r,i,o){let s=t[dn],c=s[nn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];la(e,n,t[Li],i,d,r,o,t)}else{let u=c,d=s[St];VA(r)&&(u.flags|=128),Wy(n,e,u,d,i,o,!0)}}function PU(n,e,t,r,i,o,s){let a=r[Ui],c=Nn(r);a!==c&&la(e,n,t,o,a,i,s);for(let u=rn;u<r.length;u++){let d=r[u];vf(d[se],d,n,e,o,a)}}function kU(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Er.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Er.Important),n.setStyle(t,r,i,o))}}function hx(n,e,t,r,i){let o=Bi(),s=r&2;try{$i(-1),s&&e.length>vt&&nx(n,e,vt,!1),ze(s?2:0,i,t),t(r,i)}finally{$i(o),ze(s?3:1,i,t)}}function _f(n,e,t){UU(n,e,t),(t.flags&64)===64&&jU(n,e,t)}function yf(n,e,t=_r){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function NU(n,e,t,r){let o=r.get(zA,GA)||t===Xn.ShadowDom||t===Xn.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return MU(s),s}function MU(n){OU(n)}var OU=()=>null;function FU(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function fx(n,e,t,r,i,o){let s=e[se];if(Yy(n,s,e,t,r)){ji(n)&&VU(e,n.index);return}n.type&3&&(t=FU(t)),LU(n,e,t,r,i,o)}function LU(n,e,t,r,i,o){if(n.type&3){let s=_r(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function VU(n,e){let t=Mn(e,n);t[de]&16||(t[de]|=64)}function UU(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ji(t)&&mU(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||tf(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=El(e,n,s,t);if(da(c,e),o!==null&&$U(e,s-r,c,a,t,o),vr(a)){let u=Mn(t.index,e);u[qt]=El(e,n,s,t)}}}function jU(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=VT();try{$i(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Vh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&BU(c,u)}}finally{$i(-1),Vh(s)}}function BU(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Ky(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];QA(e,o.selectors,!1)&&(r??=[],vr(o)?r.unshift(o):r.push(o))}return r}function $U(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];fy(r,t,c,u)}}function px(n,e,t,r,i){let o=vt+t,s=e[se],a=i(s,e,n,r,t);e[o]=a,sa(n,!0);let c=n.type===2;return c?(XA(e[rt],a,n),(AT()===0||na(n))&&da(a,e),xT()):da(a,e),$h()&&(!c||!pf(n))&&qy(s,e,a,n),n}function mx(n){let e=n;return M_()?O_():(e=e.parent,sa(e,!1)),e}function HU(n,e){let t=n[Li];if(!t)return;let r;try{r=t.get(Fn,null)}catch{r=null}r?.(e)}function Yy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1],p=e.data[u];fy(p,t[u],d,i),a=!0}if(o)for(let c of o){let u=t[c],d=e.data[c];fy(d,u,r,i),a=!0}return a}function GU(n,e){let t=Mn(e,n),r=t[se];zU(r,t);let i=t[Qn];i!==null&&t[Xs]===null&&(t[Xs]=qA(i,t[Li])),ze(18),Qy(r,t,t[qt]),ze(19,t[qt])}function zU(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Qy(n,e,t){jh(e);try{let r=n.viewQuery;r!==null&&dy(1,r,t);let i=n.template;i!==null&&hx(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[mr]?.finishViewCreation(n),n.staticContentQueries&&WA(n,e),n.staticViewQueries&&dy(2,n.viewQuery,t);let o=n.components;o!==null&&qU(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[de]&=-5,Bh()}}function qU(n,e){for(let t=0;t<e.length;t++)GU(n,e[t])}function gx(n,e,t,r){let i=ge(null);try{let o=e.tView,a=n[de]&4096?4096:16,c=By(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Vi]=u;let d=n[mr];return d!==null&&(c[mr]=d.createEmbeddedView(o)),Qy(o,c,t),c}finally{ge(i)}}function my(n,e){return!e||e.firstChild===null||VA(n)}function Il(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Nn(o)),Jn(o)&&vx(o,r);let s=t.type;if(s&8)Il(n,e,t.child,r);else if(s&32){let a=Hy(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=ux(e,t);if(Array.isArray(a))r.push(...a);else{let c=ki(e[dn]);Il(c[se],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function vx(n,e){for(let t=rn;t<n.length;t++){let r=n[t],i=r[se].firstChild;i!==null&&Il(r[se],r,i,e)}n[Ui]!==n[Qn]&&e.push(n[Ui])}function _x(n){if(n[Vo]!==null){for(let e of n[Vo])e.impl.addSequence(e);n[Vo].length=0}}var yx=[];function WU(n){return n[In]??KU(n)}function KU(n){let e=yx.pop()??Object.create(QU);return e.lView=n,e}function YU(n){n.lView[In]!==n&&(n.lView=null,yx.push(n))}var QU=Z(O({},Gc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{oa(n.lView)},consumerOnSignalRead(){this.lView[In]=this}});function JU(n){let e=n[In]??Object.create(ZU);return e.lView=n,e}var ZU=Z(O({},Gc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ki(n.lView);for(;e&&!Ex(e[se]);)e=ki(e);e&&A_(e)},consumerOnSignalRead(){this.lView[In]=this}});function Ex(n){return n.type!==2}function Ix(n){if(n[cl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[cl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[de]&8192)}}var XU=100;function bx(n,e=0){let r=n[Hr].rendererFactory,i=!1;i||r.begin?.();try{ej(n,e)}finally{i||r.end?.()}}function ej(n,e){let t=F_();try{L_(!0),gy(n,e);let r=0;for(;dl(n);){if(r===XU)throw new W(103,!1);r++,gy(n,1)}}finally{L_(t)}}function tj(n,e,t,r){if(jo(e))return;let i=e[de],o=!1,s=!1;jh(e);let a=!0,c=null,u=null;o||(Ex(n)?(u=WU(e),c=qc(u)):$d()===null?(a=!1,u=JU(e),c=qc(u)):e[In]&&(Wc(e[In]),e[In]=null));try{T_(e),OT(n.bindingStartIndex),t!==null&&hx(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let y=n.preOrderCheckHooks;y!==null&&Wh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Kh(e,y,0,null),Q_(e,0)}if(s||nj(e),Ix(e),wx(e,0),n.contentQueries!==null&&WA(n,e),!o)if(d){let y=n.contentCheckHooks;y!==null&&Wh(e,y)}else{let y=n.contentHooks;y!==null&&Kh(e,y,1),Q_(e,1)}ij(n,e);let p=n.components;p!==null&&Sx(e,p,0);let m=n.viewQuery;if(m!==null&&dy(2,m,r),!o)if(d){let y=n.viewCheckHooks;y!==null&&Wh(e,y)}else{let y=n.viewHooks;y!==null&&Kh(e,y,2),Q_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Nh]){for(let y of e[Nh])y();e[Nh]=null}o||(_x(e),e[de]&=-73)}catch(d){throw o||oa(e),d}finally{u!==null&&(Hd(u,c),a&&YU(u)),Bh()}}function wx(n,e){for(let t=jA(n);t!==null;t=BA(t))for(let r=rn;r<t.length;r++){let i=t[r];Cx(i,e)}}function nj(n){for(let e=jA(n);e!==null;e=BA(e)){if(!(e[de]&2))continue;let t=e[Uo];for(let r=0;r<t.length;r++){let i=t[r];A_(i)}}}function rj(n,e,t){ze(18);let r=Mn(e,n);Cx(r,t),ze(19,r[qt])}function Cx(n,e){Oh(n)&&gy(n,e)}function gy(n,e){let r=n[se],i=n[de],o=n[In],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Gd(o)),s||=!1,o&&(o.dirty=!1),n[de]&=-9217,s)tj(r,n,r.template,n[qt]);else if(i&8192){let a=ge(null);try{Ix(n),wx(n,1);let c=r.components;c!==null&&Sx(n,c,1),_x(n)}finally{ge(a)}}}function Sx(n,e,t){for(let r=0;r<e.length;r++)rj(n,e[r],t)}function ij(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)$i(~i);else{let o=i,s=t[++r],a=t[++r];LT(s,o);let c=e[o];ze(24,c),a(2,c),ze(25,c)}}}finally{$i(-1)}}function Jy(n,e){let t=F_()?64:1088;for(n[Hr].changeDetectionScheduler?.notify(e);n;){n[de]|=t;let r=ki(n);if(ra(n)&&!r)return n;n=r}return null}function Dx(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Tx(n,e,t,r=!0){let i=e[se];if(oj(i,e,n,t),r){let s=py(t,n),a=e[rt],c=a.parentNode(n[Ui]);c!==null&&bU(i,n[nn],a,e,c,s)}let o=e[Xs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vy(n,e){if(n.length<=rn)return;let t=rn+e,r=n[t];if(r){let i=r[Vi];i!==null&&i!==n&&zy(i,r),e>0&&(n[t-1][kn]=r[kn]);let o=ol(n,rn+e);IU(r[se],r);let s=o[mr];s!==null&&s.detachView(o[se]),r[St]=null,r[kn]=null,r[de]&=-129}return r}function oj(n,e,t,r){let i=rn+r,o=t.length;r>0&&(t[i-1][kn]=e),r<o-rn?(e[kn]=t[i],h_(t,rn+r,e)):(t.push(e),e[kn]=null),e[St]=t;let s=e[Vi];s!==null&&t!==s&&Ax(s,e);let a=e[mr];a!==null&&a.insertView(n),Fh(e),e[de]|=128}function Ax(n,e){let t=n[Uo],r=e[St];if(gr(r))n[de]|=2;else{let i=r[St][dn];e[dn]!==i&&(n[de]|=2)}t===null?n[Uo]=[e]:t.push(e)}var Hi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[se];return Il(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[qt]}set context(e){this._lView[qt]=e}get destroyed(){return jo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[St];if(Jn(e)){let t=e[ul],r=t?t.indexOf(this):-1;r>-1&&(vy(e,r),ol(t,r))}this._attachedToViewContainer=!1}ax(this._lView[se],this._lView)}onDestroy(e){x_(this._lView,e)}markForCheck(){Jy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[de]&=-129}reattach(){Fh(this._lView),this._lView[de]|=128}detectChanges(){this._lView[de]|=1024,bx(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ra(this._lView),t=this._lView[Vi];t!==null&&!e&&zy(t,this._lView),sx(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let t=ra(this._lView),r=this._lView[Vi];r!==null&&!t&&Ax(r,this._lView),Fh(this._lView)}};var bn=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=sj;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=gx(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Hi(o)}}return n})();function sj(){return Zy(on(),Ee())}function Zy(n,e){return n.type&4?new bn(e,n,ma(n,e)):null}function Dl(n,e,t,r,i){let o=n.data[e];if(o===null)o=aj(n,e,t,r,i),FT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=NT();o.injectorIndex=s===null?-1:s.injectorIndex}return sa(o,!0),o}function aj(n,e,t,r,i){let o=N_(),s=M_(),a=s?o:o&&o.parent,c=n.data[e]=lj(n,a,t,e,r,i);return cj(n,c,o,s),c}function cj(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function lj(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return k_()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var uj=()=>null;function _y(n,e){return uj(n,e)}var xx=class{},Ef=class{},yy=class{resolveComponentFactory(e){throw new W(917,!1)}},Tl=class{static NULL=new yy},Ln=class{},Wr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>dj()}return n})();function dj(){let n=Ee(),e=on(),t=Mn(e.index,n);return(gr(t)?t:n)[rt]}var Rx=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>null})}return n})();var Qh={},Ey=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Qh,r);return i!==Qh||t===Qh?i:this.parentInjector.get(e,t,r)}};function cA(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=n_(i,a);else if(o==2){let c=a,u=e[++s];r=n_(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function X(n,e=0){let t=Ee();if(t===null)return te(n,e);let r=on();return OA(r,t,Ot(n),e)}function Xy(){let n="invalid";throw new Error(n)}function Px(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,u=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(s);break}pj(n,e,t,a,o,c,u)}o!==null&&r!==null&&hj(t,r,o)}function hj(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new W(-301,!1);r.push(e[i],o)}}function fj(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function pj(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let m=0;m<a;m++){let y=r[m];!c&&vr(y)&&(c=!0,fj(n,t,m)),ay(tf(t,e),n,y.type)}Ej(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let u=!1,d=!1,p=tx(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=yl(t.mergedAttrs,y.hostAttrs),gj(n,t,e,p,y),yj(p,y,i),s!==null&&s.has(y)){let[V,M]=s.get(y);t.directiveToIndex.set(y.type,[p,V+t.directiveStart,M+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let T=y.type.prototype;!u&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),p++}mj(n,t,o)}function mj(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))lA(0,e,i,r),lA(1,e,i,r),dA(e,r,!1);else{let o=t.get(i);uA(0,e,o,r),uA(1,e,o,r),dA(e,r,!0)}}}function lA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),kx(e,o)}}function uA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),kx(e,s)}}function kx(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function dA(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Uy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function gj(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Pi(i.type,!0)),s=new $o(o,vr(i),X,null);n.blueprint[r]=s,t[r]=s,vj(n,e,r,tx(n,t,i.hostVars,Cn),i)}function vj(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;_j(s)!=a&&s.push(a),s.push(t,r,o)}}function _j(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function yj(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;vr(e)&&(t[""]=n)}}function Ej(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function e0(n,e,t,r,i,o,s,a){let c=e[se],u=c.consts,d=ia(u,s),p=Dl(c,n,t,r,d);return o&&Px(c,e,p,ia(u,a),i),p.mergedAttrs=yl(p.mergedAttrs,p.attrs),p.attrs!==null&&cA(p,p.attrs,!1),p.mergedAttrs!==null&&cA(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function t0(n,e){TA(n,e),w_(e)&&n.queries.elementEnd(e)}function n0(n){return Mx(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Nx(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Mx(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function If(n,e,t){return n[e]=t}function Ij(n,e){return n[e]}function zr(n,e,t){if(t===Cn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function r0(n,e,t,r){let i=zr(n,e,t);return zr(n,e+1,r)||i}function bj(n,e,t,r,i){let o=r0(n,e,t,r);return zr(n,e+2,i)||o}function X_(n,e,t){return function r(i){let o=ji(n)?Mn(n.index,e):e;Jy(o,5);let s=e[qt],a=hA(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=hA(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function hA(n,e,t,r){let i=ge(null);try{return ze(6,e,t),t(r)!==!1}catch(o){return HU(n,o),!1}finally{ze(7,e,t),ge(i)}}function wj(n,e,t,r,i,o,s,a){let c=na(n),u=!1,d=null;if(!r&&c&&(d=Sj(e,t,o,n.index)),d!==null){let p=d.__ngLastListenerFn__||d;p.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0}else{let p=_r(n,t),m=r?r(p):p;H2(t,m,o,a);let y=i.listen(m,o,a);if(!Cj(o)){let T=r?V=>r(Nn(V[n.index])):n.index;Ox(T,e,t,o,a,y,!1)}}return u}function Cj(n){return n.startsWith("animation")||n.startsWith("transition")}function Sj(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ea],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Ox(n,e,t,r,i,o,s){let a=e.firstCreatePass?P_(e):null,c=R_(t),u=c.length;c.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function fA(n,e,t,r,i,o){let s=e[t],a=e[se],u=a.data[t].outputs[r],p=s[u].subscribe(o);Ox(n.index,a,e,i,o,p,!0)}var Iy=Symbol("BINDING");var sf=class extends Tl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=pr(e);return new Gi(t,this.ngModule)}};function Dj(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&mf.SignalBased)!==0};return i&&(o.transform=i),o})}function Tj(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Aj(n,e,t){let r=e instanceof st?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Ey(t,r):t}function xj(n){let e=n.get(Ln,null);if(e===null)throw new W(407,!1);let t=n.get(Rx,null),r=n.get(Ni,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function Rj(n,e){let t=Fx(n);return JA(e,t,t==="svg"?IT:t==="math"?bT:null)}function Fx(n){return(n.selectors[0][0]||"div").toLowerCase()}var Gi=class extends Ef{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Dj(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Tj(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=oU(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){ze(22);let a=ge(null);try{let c=this.componentDef,u=Pj(r,c,s,o),d=Aj(c,i||this.ngModule,e),p=xj(d),m=p.rendererFactory.createRenderer(null,c),y=r?NU(m,r,c.encapsulation,d):Rj(c,m),T=s?.some(pA)||o?.some(j=>typeof j!="function"&&j.bindings.some(pA)),V=By(null,u,null,512|ex(c),null,null,p,m,d,null,qA(y,d,!0));V[vt]=y,jh(V);let M=null;try{let j=e0(vt,V,2,"#host",()=>u.directiveRegistry,!0,0);XA(m,y,j),da(y,V),_f(u,V,j),Ly(u,j,V),t0(u,j),t!==void 0&&Nj(j,this.ngContentSelectors,t),M=Mn(j.index,V),V[qt]=M[qt],Qy(u,V,null)}catch(j){throw M!==null&&ly(M),ly(V),j}finally{ze(23),Bh()}return new af(this.componentType,V,!!T)}finally{ge(a)}}};function Pj(n,e,t,r){let i=n?["ng-version","21.0.0"]:sU(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[Iy].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let p=r[d];if(typeof p!="function")for(let m of p.bindings){a+=m[Iy].requiredVars;let y=d+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let c=[e];if(r)for(let d of r){let p=typeof d=="function"?d:d.type,m=g_(p);c.push(m)}return jy(0,null,kj(o,s),1,a,c,null,null,null,[i],null)}function kj(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function pA(n){let e=n[Iy].kind;return e==="input"||e==="twoWay"}var af=class extends xx{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Mh(t[se],vt),this.location=ma(this._tNode,t),this.instance=Mn(this._tNode.index,t)[qt],this.hostView=this.changeDetectorRef=new Hi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Yy(r,i[se],i,e,t);this.previousInputValues.set(e,t);let s=Mn(r.index,i);Jy(s,1)}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Nj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var hn=(()=>{class n{static __NG_ELEMENT_ID__=Mj}return n})();function Mj(){let n=on();return Vx(n,Ee())}var Oj=hn,Lx=class extends Oj{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ma(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ny(this._hostTNode,this._hostLView);if(xA(e)){let t=Xh(e,this._hostLView),r=Zh(e),i=t[se].data[r+8];return new Bo(i,t)}else return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=mA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-rn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=_y(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,my(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!g2(e),u;if(c)u=t;else{let M=t||{};u=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,a=M.bindings}let d=c?e:new Gi(pr(e)),p=r||this.parentInjector;if(!o&&d.ngModule==null){let j=(c?p:this.parentInjector).get(st,null);j&&(o=j)}let m=pr(d.componentType??{}),y=_y(this._lContainer,m?.id??null),T=y?.firstChild??null,V=d.create(p,i,T,o,s,a);return this.insertImpl(V.hostView,u,my(this._hostTNode,y)),V}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(CT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[St],u=new Lx(c,c[nn],c[St]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Tx(s,i,o,r),e.attachToViewContainerRef(),h_(ey(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=mA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=vy(this._lContainer,t);r&&(ol(ey(this._lContainer),t),ax(r[se],r))}detach(e){let t=this._adjustIndex(e,-1),r=vy(this._lContainer,t);return r&&ol(ey(this._lContainer),t)!=null?new Hi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function mA(n){return n[ul]}function ey(n){return n[ul]||(n[ul]=[])}function Vx(n,e){let t,r=e[n.index];return Jn(r)?t=r:(t=Dx(r,e,null,n),e[n.index]=t,$y(e,t)),Lj(t,e,n,r),new Lx(t,n,e)}function Fj(n,e){let t=n[rt],r=t.createComment(""),i=_r(e,n),o=t.parentNode(i);return rf(t,o,r,t.nextSibling(i),!1),r}var Lj=jj,Vj=()=>!1;function Uj(n,e,t){return Vj(n,e,t)}function jj(n,e,t,r){if(n[Ui])return;let i;t.type&8?i=Nn(r):i=Fj(e,t),n[Ui]=i}var by=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},wy=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)i0(e,t).matches!==null&&this.queries[t].setDirty()}},Cy=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=Kj(e):this.predicate=e}},Sy=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Dy=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,Bj(t,o)),this.matchTNodeWithReadOption(e,t,Yh(t,e,o,!1,!1))}else r===bn?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Yh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Vt||i===hn||i===bn&&t.type&4)this.addMatch(t.index,-2);else{let o=Yh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function Bj(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function $j(n,e){return n.type&11?ma(n,e):n.type&4?Zy(n,e):null}function Hj(n,e,t,r){return t===-1?$j(e,n):t===-2?Gj(n,e,r):El(n,n[se],t,e)}function Gj(n,e,t){if(t===Vt)return ma(e,n);if(t===bn)return Zy(e,n);if(t===hn)return Vx(e,n)}function Ux(n,e,t,r){let i=e[mr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(Hj(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Ty(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Ux(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let p=rn;p<d.length;p++){let m=d[p];m[Vi]===m[St]&&Ty(m[se],m,u,r)}if(d[Uo]!==null){let p=d[Uo];for(let m=0;m<p.length;m++){let y=p[m];Ty(y[se],y,u,r)}}}}}return r}function zj(n,e){return n[mr].queries[e].queryList}function qj(n,e,t){let r=new nf((t&4)===4);return TT(n,e,r,r.destroy),(e[mr]??=new wy).queries.push(new by(r))-1}function Wj(n,e,t){let r=Ft();return r.firstCreatePass&&(Yj(r,new Cy(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),qj(r,Ee(),e)}function Kj(n){return n.split(",").map(e=>e.trim())}function Yj(n,e,t){n.queries===null&&(n.queries=new Sy),n.queries.track(new Dy(e,t))}function i0(n,e){return n.queries.getByIndex(e)}function Qj(n,e){let t=n[se],r=i0(t,e);return r.crossesNgTemplate?Ty(t,n,e,[]):Ux(t,n,r,e)}var Ay=new Map,Jj=new Set;async function jx(n){let e=Ay;Ay=new Map;let t=new Map;function r(o){let s=t.get(o);if(s)return s;let a=n(o).then(c=>Zj(o,c));return t.set(o,a),a}let i=Array.from(e).map(async([o,s])=>{if(s.styleUrl&&s.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");let a=[];s.templateUrl&&a.push(r(s.templateUrl).then(p=>{s.template=p}));let c=typeof s.styles=="string"?[s.styles]:s.styles??[];s.styles=c;let{styleUrl:u,styleUrls:d}=s;if(u&&(d=[u],s.styleUrl=void 0),d?.length){let p=Promise.all(d.map(m=>r(m))).then(m=>{c.push(...m),s.styleUrls=void 0});a.push(p)}await Promise.all(a),Jj.delete(o)});await Promise.all(i)}function Bx(){return Ay.size===0}async function Zj(n,e){if(typeof e=="string")return e;if(e.status!==void 0&&e.status!==200)throw new W(918,!1);return e.text()}var Ho=class{},bf=class{};var bl=class extends Ho{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new sf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=m_(e);this._bootstrapComponents=KA(o.bootstrap),this._r3Injector=H_(e,t,[{provide:Ho,useValue:this},{provide:Tl,useValue:this.componentFactoryResolver},...r],$r(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wl=class extends bf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new bl(this.moduleType,e,[])}};function $x(n,e,t){return new bl(n,e,t,!1)}var cf=class extends Ho{injector;componentFactoryResolver=new sf(this);instance=null;constructor(e){super();let t=new Mo([...e.providers,{provide:Ho,useValue:this},{provide:Tl,useValue:this.componentFactoryResolver}],e.parent||Zs(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function va(n,e,t=null){return new cf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Xj=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=v_(!1,t.type),i=r.length>0?va([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(te(st))})}return n})();function at(n){return pa(()=>{let e=Hx(n),t=Z(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===My.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Xj).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xn.Emulated,styles:n.styles||En,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ga("NgStandalone"),Gx(t);let r=n.dependencies;return t.directiveDefs=gA(r,eB),t.pipeDefs=gA(r,mT),t.id=rB(t),t})}function eB(n){return pr(n)||g_(n)}function ct(n){return pa(()=>({type:n.type,bootstrap:n.bootstrap||En,declarations:n.declarations||En,imports:n.imports||En,exports:n.exports||En,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function tB(n,e){if(n==null)return Fi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=mf.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function nB(n){if(n==null)return Fi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function pt(n){return pa(()=>{let e=Hx(n);return Gx(e),e})}function Al(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Hx(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Fi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||En,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:tB(n.inputs,e),outputs:nB(n.outputs),debugInfo:null}}function Gx(n){n.features?.forEach(e=>e(n))}function gA(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function rB(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function iB(n){return Object.getPrototypeOf(n.prototype).constructor}function zi(n){let e=iB(n.type),t=!0,r=[n];for(;e;){let i;if(vr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ty(n.inputs),s.declaredInputs=ty(n.declaredInputs),s.outputs=ty(n.outputs);let a=i.hostBindings;a&&lB(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&aB(n,c),u&&cB(n,u),oB(n,i),iT(n.outputs,i.outputs),vr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===zi&&(t=!1)}}e=Object.getPrototypeOf(e)}sB(r)}function oB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function sB(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yl(i.hostAttrs,t=yl(t,i.hostAttrs))}}function ty(n){return n===Fi?{}:n===En?[]:n}function aB(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function cB(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function lB(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function zx(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=yl(n.mergedAttrs,n.attrs);let d=n.tView=jy(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),sa(n,!1);let c=hB(t,e,n,r);$h()&&qy(t,e,c,n),da(c,e);let u=Dx(c,e,c,n);e[r+vt]=u,$y(e,u),Uj(u,n,e)}function uB(n,e,t,r,i,o,s,a,c,u,d){let p=t+vt,m;return e.firstCreatePass?(m=Dl(e,p,4,s||null,a||null),Lh()&&Px(e,n,m,ia(e.consts,u),Ky),TA(e,m)):m=e.data[p],zx(m,n,e,t,r,i,o,c),na(m)&&_f(e,n,m),u!=null&&yf(n,m,d),m}function dB(n,e,t,r,i,o,s,a,c,u,d){let p=t+vt,m;if(e.firstCreatePass){if(m=Dl(e,p,4,s||null,a||null),u!=null){let y=ia(e.consts,u);m.localNames=[];for(let T=0;T<y.length;T+=2)m.localNames.push(y[T],-1)}}else m=e.data[p];return zx(m,n,e,t,r,i,o,c),u!=null&&yf(n,m,d),m}function $(n,e,t,r,i,o,s,a){let c=Ee(),u=Ft(),d=ia(u.consts,o);return uB(c,u,n,e,t,r,i,d,void 0,s,a),$}var hB=fB;function fB(n,e,t,r){return fl(!0),e[rt].createComment("")}var o0=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function qx(n){return typeof n=="function"&&n[Zt]!==void 0}function s0(n){return qx(n)&&typeof n.set=="function"}var wf=new q(""),Cf=new q(""),xl=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,E_()&&(this._destroyRef=N(On,{optional:!0})??void 0),a0||(Kx(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(te(Pe),te(Wx),te(Cf))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),Wx=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return a0?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Kx(n){a0=n}var a0;function Kr(n){return!!n&&typeof n.then=="function"}function Sf(n){return!!n&&typeof n.subscribe=="function"}var c0=new q("");function Df(n){return Yn([{provide:c0,multi:!0,useValue:n}])}var l0=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=N(c0,{optional:!0})??[];injector=N(Ue);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=gt(this.injector,i);if(Kr(o))t.push(o);else if(Sf(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tf=new q("");function Yx(){_v(()=>{let n="";throw new W(600,n)})}function Qx(n){return n.isBoundToModule}var pB=10;function u0(n,e){return Array.isArray(e)?e.reduce(u0,n):O(O({},n),e)}var Vn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=N(Fn);afterRenderManager=N(Gy);zonelessEnabled=N(pl);rootEffectScheduler=N(Y_);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new fe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=N(Gr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(De(t=>!t))}constructor(){N(qo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=N(st);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ue.NULL){return this._injector.get(Pe).run(()=>{ze(10);let s=t instanceof Ef;if(!this._injector.get(l0).done){let T="";throw new W(405,T)}let c;s?c=t:c=this._injector.get(Tl).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=Qx(c)?void 0:this._injector.get(Ho),d=r||c.selector,p=c.create(i,[],d,u),m=p.location.nativeElement,y=p.injector.get(wf,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),vl(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),ze(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ze(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(gf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new W(101,!1);let t=ge(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ge(t),this.afterTick.next(),ze(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ln,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<pB;)ze(14),this.synchronizeOnce(),ze(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!dl(i))continue;let o=r&&!this.zonelessEnabled?0:1;bx(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>dl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;vl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Tf,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>vl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new W(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Ure=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function P(n,e,t){let r=Ee(),i=hl();if(zr(r,i,e)){let o=Ft(),s=$_();fx(s,r,n,e,r[rt],t)}return P}function vA(n,e,t,r,i){Yy(e,n,t,i?"class":"style",r)}function v(n,e,t,r){let i=Ee(),o=i[se],s=n+vt,a=o.firstCreatePass?e0(s,i,2,e,Ky,Lh(),t,r):o.data[s];if(px(a,i,n,e,mB),na(a)){let c=i[se];_f(c,i,a),Ly(c,a,i)}return r!=null&&yf(i,a),v}function g(){let n=Ft(),e=on(),t=mx(e);return n.firstCreatePass&&t0(n,t),PT(t)&&kT(),RT(),t.classesWithoutHost!=null&&b2(t)&&vA(n,t,Ee(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&w2(t)&&vA(n,t,Ee(),t.stylesWithoutHost,!1),g}function _e(n,e,t,r){return v(n,e,t,r),g(),_e}var mB=(n,e,t,r,i)=>(fl(!0),JA(e[rt],r,GT()));function Rl(n,e,t){let r=Ee(),i=r[se],o=n+vt,s=i.firstCreatePass?e0(o,r,8,"ng-container",Ky,Lh(),e,t):i.data[o];if(px(s,r,n,"ng-container",gB),na(s)){let a=r[se];_f(a,r,s),Ly(a,s,r)}return t!=null&&yf(r,s),Rl}function Pl(){let n=Ft(),e=on(),t=mx(e);return n.firstCreatePass&&t0(n,t),Pl}var gB=(n,e,t,r,i)=>(fl(!0),lU(e[rt],""));function Ie(){return Ee()}var ml=void 0;function vB(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var _B=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ml,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ml,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",ml,ml,ml],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",vB],_l={};function d0(n,e,t){typeof e!="string"&&(t=e,e=n[Xe.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),_l[e]=n,t&&(_l[e][Xe.ExtraData]=t)}function fn(n){let e=yB(n),t=_A(e);if(t)return t;let r=e.split("-")[0];if(t=_A(r),t)return t;if(r==="en")return _B;throw new W(701,!1)}function _A(n){return n in _l||(_l[n]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[n]),_l[n]}var Xe=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Xe||{});function yB(n){return n.toLowerCase().replace(/_/g,"-")}var kl="en-US";var EB=kl;function Jx(n){typeof n=="string"&&(EB=n.toLowerCase().replace(/_/g,"-"))}function z(n,e,t){let r=Ee(),i=Ft(),o=on();return Zx(i,r,r[rt],o,n,e,t),z}function Zx(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=X_(r,e,o),wj(r,n,e,s,t,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let p=0;p<d.length;p+=2){let m=d[p],y=d[p+1];c??=X_(r,e,o),fA(r,e,m,y,i,c)}if(u&&u.length)for(let p of u)c??=X_(r,e,o),fA(r,e,p,i,i,c)}}function F(n=1){return HT(n)}function IB(n,e){let t=null,r=eU(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?QA(n,o,!0):rU(r,o))return i}return t}function Af(n){let e=Ee()[dn][nn];if(!e.projection){let t=n?n.length:1,r=e.projection=hT(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?IB(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function xf(n,e=0,t,r,i,o){let s=Ee(),a=Ft(),c=r?n+1:null;c!==null&&dB(s,a,c,r,i,o,null,t);let u=Dl(a,vt+n,16,null,t||null);u.projection===null&&(u.projection=e),O_();let p=!s[Xs]||k_();s[dn][nn].projection[u.projection]===null&&c!==null?bB(s,a,c):p&&!pf(u)&&RU(a,s,u)}function bB(n,e,t){let r=vt+t,i=e.data[r],o=n[r],s=_y(o,i.tView.ssrId),a=gx(n,i,void 0,{dehydratedView:s});Tx(o,a,0,my(i,s))}function _a(n,e,t){Wj(n,e,t)}function Ko(n){let e=Ee(),t=Ft(),r=U_();Uh(r+1);let i=i0(t,r);if(n.dirty&&wT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=Qj(e,r);n.reset(o,F2),n.notifyOnChanges()}return!0}return!1}function Yo(){return zj(Ee(),U_())}function zh(n,e){return n<<17|e<<2}function Go(n){return n>>17&32767}function wB(n){return(n&2)==2}function CB(n,e){return n&131071|e<<17}function xy(n){return n|2}function fa(n){return(n&131068)>>2}function ny(n,e){return n&-131069|e<<2}function SB(n){return(n&1)===1}function Ry(n){return n|1}function DB(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Go(s),c=fa(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let p=t;d=p[1],(d===null||Qs(p,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let m=Go(n[a+1]);n[r+1]=zh(m,a),m!==0&&(n[m+1]=ny(n[m+1],r)),n[a+1]=CB(n[a+1],r)}else n[r+1]=zh(a,0),a!==0&&(n[a+1]=ny(n[a+1],r)),a=r;else n[r+1]=zh(c,0),a===0?a=r:n[c+1]=ny(n[c+1],r),c=r;u&&(n[r+1]=xy(n[r+1])),yA(n,d,r,!0),yA(n,d,r,!1),TB(e,d,n,r,o),s=zh(a,c),o?e.classBindings=s:e.styleBindings=s}function TB(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Qs(o,e)>=0&&(t[r+1]=Ry(t[r+1]))}function yA(n,e,t,r){let i=n[t+1],o=e===null,s=r?Go(i):fa(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];AB(c,e)&&(a=!0,n[s+1]=r?Ry(u):xy(u)),s=r?Go(u):fa(u)}a&&(n[t+1]=r?xy(i):Ry(i))}function AB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Qs(n,e)>=0:!1}function Dt(n,e,t){return Xx(n,e,t,!1),Dt}function We(n,e){return Xx(n,e,null,!0),We}function Xx(n,e,t,r){let i=Ee(),o=Ft(),s=V_(2);if(o.firstUpdatePass&&RB(o,n,s,r),e!==Cn&&zr(i,s,e)){let a=o.data[Bi()];OB(o,a,i,i[rt],n,i[s+1]=FB(e,t),r,s)}}function xB(n,e){return e>=n.expandoStartIndex}function RB(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Bi()],s=xB(n,t);LB(o,r)&&e===null&&!s&&(e=!1),e=PB(i,o,e,r),DB(i,o,e,t,s,r)}}function PB(n,e,t,r){let i=UT(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=ry(null,n,e,t,r),t=Cl(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=ry(i,n,e,t,r),o===null){let c=kB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=ry(null,n,e,c[1],r),c=Cl(c,e.attrs,r),NB(n,e,r,c))}else o=MB(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function kB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(fa(r)!==0)return n[Go(r)]}function NB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Go(i)]=r}function MB(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Cl(r,s,t)}return Cl(r,e.attrs,t)}function ry(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Cl(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Cl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),pT(n,s,t?!0:e[++o]))}return n===void 0?null:n}function OB(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=SB(u)?EA(c,e,t,i,fa(u),s):void 0;if(!lf(d)){lf(o)||wB(u)&&(o=EA(c,null,t,i,a,s));let p=C_(Bi(),t);kU(r,s,p,i,o)}}function EA(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,p=d===null,m=t[i+1];m===Cn&&(m=p?En:void 0);let y=p?kh(m,r):d===r?m:void 0;if(u&&!lf(y)&&(y=kh(c,r)),lf(y)&&(a=y,s))return a;let T=n[i+1];i=s?Go(T):fa(T)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=kh(c,r))}return a}function lf(n){return n!==void 0}function FB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=$r(Vy(n)))),n}function LB(n,e){return(n.flags&(e?8:16))!==0}function E(n,e=""){let t=Ee(),r=Ft(),i=n+vt,o=r.firstCreatePass?Dl(r,i,1,e,null):r.data[i],s=VB(r,t,o,e,n);t[i]=s,$h()&&qy(r,t,s,o),sa(o,!1)}var VB=(n,e,t,r,i)=>(fl(!0),aU(e[rt],r));function UB(n,e,t,r=""){return zr(n,hl(),t)?e+Ys(t)+r:Cn}function jB(n,e,t,r,i,o=""){let s=MT(),a=r0(n,s,t,i);return V_(2),a?e+Ys(t)+r+Ys(i)+o:Cn}function he(n){return K("",n),he}function K(n,e,t){let r=Ee(),i=UB(r,n,e,t);return i!==Cn&&eR(r,Bi(),i),K}function Rf(n,e,t,r,i){let o=Ee(),s=jB(o,n,e,t,r,i);return s!==Cn&&eR(o,Bi(),s),Rf}function eR(n,e,t){let r=C_(e,n);cU(n[rt],r,t)}function Qo(n,e,t){s0(e)&&(e=e());let r=Ee(),i=hl();if(zr(r,i,e)){let o=Ft(),s=$_();fx(s,r,n,e,r[rt],t)}return Qo}function ya(n,e){let t=s0(n);return t&&n.set(e),t}function Jo(n,e){let t=Ee(),r=Ft(),i=on();return Zx(r,t,t[rt],i,n,e),Jo}function h0(n){return zr(Ee(),hl(),n)?Ys(n):Cn}function BB(n,e,t){let r=Ft();if(r.firstCreatePass){let i=vr(n);Py(t,r.data,r.blueprint,i,!0),Py(e,r.data,r.blueprint,i,!1)}}function Py(n,e,t,r,i){if(n=Ot(n),Array.isArray(n))for(let o=0;o<n.length;o++)Py(n[o],e,t,r,i);else{let o=Ft(),s=Ee(),a=on(),c=No(n)?n:Ot(n.provide),u=y_(n),d=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(No(n)||!n.multi){let y=new $o(u,i,X,null),T=oy(c,e,i?d:d+m,p);T===-1?(ay(tf(a,s),o,c),iy(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[T]=y,s[T]=y)}else{let y=oy(c,e,d+m,p),T=oy(c,e,d,d+m),V=y>=0&&t[y],M=T>=0&&t[T];if(i&&!M||!i&&!V){ay(tf(a,s),o,c);let j=GB(i?HB:$B,t.length,i,r,u,n);!i&&M&&(t[T].providerFactory=j),iy(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=tR(t[i?T:y],u,!i&&r);iy(o,n,y>-1?y:T,j)}!i&&r&&M&&t[T].componentProviders++}}}function iy(n,e,t,r){let i=No(e),o=yT(e);if(i||o){let c=(o?Ot(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function tR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function oy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function $B(n,e,t,r,i){return ky(this.multi,[])}function HB(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=El(r,r[se],this.providerFactory.index,i);s=c.slice(0,a),ky(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],ky(o,s);return s}function ky(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function GB(n,e,t,r,i,o){let s=new $o(n,t,X,null);return s.multi=[],s.index=e,s.componentProviders=0,tR(s,i,r&&!t),s}function qi(n,e=[]){return t=>{t.providersResolver=(r,i)=>BB(r,i?i(n):n,e)}}function Pf(n,e,t){let r=aa()+n,i=Ee();return i[r]===Cn?If(i,r,t?e.call(t):e()):Ij(i,r)}function kf(n,e,t,r,i){return nR(Ee(),aa(),n,e,t,r,i)}function Ea(n,e,t,r,i,o){return qB(Ee(),aa(),n,e,t,r,i,o)}function f0(n,e){let t=n[e];return t===Cn?void 0:t}function zB(n,e,t,r,i,o){let s=e+t;return zr(n,s,i)?If(n,s+1,o?r.call(o,i):r(i)):f0(n,s+1)}function nR(n,e,t,r,i,o,s){let a=e+t;return r0(n,a,i,o)?If(n,a+2,s?r.call(s,i,o):r(i,o)):f0(n,a+2)}function qB(n,e,t,r,i,o,s,a){let c=e+t;return bj(n,c,i,o,s)?If(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):f0(n,c+3)}function ne(n,e){let t=Ft(),r,i=n+vt;t.firstCreatePass?(r=WB(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Pi(r.type,!0)),s,a=en(X);try{let c=ef(!1),u=o();return ef(c),D_(t,Ee(),i,u),u}finally{en(a)}}function WB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function et(n,e,t){let r=n+vt,i=Ee(),o=S_(i,r);return rR(i,r)?zB(i,aa(),e,o.transform,t,o):o.transform(t)}function Te(n,e,t,r){let i=n+vt,o=Ee(),s=S_(o,i);return rR(o,i)?nR(o,aa(),e,s.transform,t,r,s):s.transform(t,r)}function rR(n,e){return n[se].data[e].pure}var qh=null;function iR(n){qh!==null&&(n.defaultEncapsulation!==qh.defaultEncapsulation||n.preserveWhitespaces!==qh.preserveWhitespaces)||(qh=n)}var uf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},p0=(()=>{class n{compileModuleSync(t){return new wl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=m_(t),o=KA(i.declarations).reduce((s,a)=>{let c=pr(a);return c&&s.push(new Gi(c)),s},[]);return new uf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oR=new q("");var sR=(()=>{class n{applicationErrorHandler=N(Fn);appRef=N(Vn);taskService=N(Gr);ngZone=N(Pe);zonelessEnabled=N(pl);tracing=N(qo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(K_,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?z_:G_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,z_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aR(){return[{provide:Ni,useExisting:sR},{provide:Pe,useClass:rl},{provide:pl,useValue:!0}]}function KB(){return typeof $localize<"u"&&$localize.locale||kl}var Wi=new q("",{factory:()=>N(Wi,{optional:!0,skipSelf:!0})||KB()});function Nl(n,e){return zd(n,e?.equal)}var gR=Symbol("InputSignalNode#UNSET"),a3=Z(O({},qd),{transformFn:void 0,applyValueToInputSignal(n,e){Kc(n,e)}});function vR(n,e){let t=Object.create(a3);t.value=n,t.transformFn=e?.transform;function r(){if(zc(t),t.value===gR){let i=null;throw new W(-950,i)}return t.value}return r[Zt]=t,r}function cR(n,e){return vR(n,e)}function c3(n){return vR(gR,n)}var _R=(cR.required=c3,cR);function l3(n,e,t){let r=new wl(t);return Promise.resolve(r)}function lR(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var Nf=new q(""),u3=new q("");function Ml(n){return!n.moduleRef}function d3(n){let e=Ml(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Pe);return t.run(()=>{Ml(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Fn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Ml(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Nf);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Nf);s.add(o),n.moduleRef.onDestroy(()=>{vl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return f3(r,t,()=>{let o=e.get(Gr),s=o.add(),a=e.get(l0);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Wi,kl);if(Jx(c||kl),!e.get(u3,!0))return Ml(n)?e.get(Vn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ml(n)){let d=e.get(Vn);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return yR?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var yR;function uR(){yR=h3}function h3(n,e){let t=n.injector.get(Vn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new W(-403,!1);e.push(n)}function f3(n,e,t){try{let r=t();return Kr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var ER=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=[],o=[aR(),...i,...r?.applicationProviders??[],KT],s=$x(t.moduleType,this.injector,o);return uR(),d3({moduleRef:s,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=u0({},r);return uR(),l3(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new W(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Nf,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(te(Ue))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),E0=null;function p3(n){if(b0())throw new W(400,!1);Yx(),E0=n;let e=n.get(ER);return v3(n),e}function I0(n,e,t=[]){let r=`Platform: ${e}`,i=new q(r);return(o=[])=>{let s=b0();if(!s){let a=[...t,...o,{provide:i,useValue:!0}];s=n?.(a)??p3(m3(a,r))}return g3(i)}}function m3(n=[],e){return Ue.create({name:e,providers:[{provide:sl,useValue:"platform"},{provide:Nf,useValue:new Set([()=>E0=null])},...n]})}function g3(n){let e=b0();if(!e)throw new W(-401,!1);return e}function b0(){return E0?.get(ER)??null}function v3(n){let e=n.get(hf,null);gt(n,()=>{e?.forEach(t=>t())})}function w0(){return!1}var Ut=(()=>{class n{static __NG_ELEMENT_ID__=_3}return n})();function _3(n){return y3(on(),Ee(),(n&16)===16)}function y3(n,e,t){if(ji(n)&&!t){let r=Mn(n.index,e);return new Hi(r,r)}else if(n.type&175){let r=e[dn];return new Hi(r,e)}return null}var m0=class{constructor(){}supports(e){return n0(e)}create(e){return new g0(e)}},E3=(n,e)=>e,g0=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||E3}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<dR(r,i,o)?t:r,a=dR(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let m=0;m<u;m++){let y=m<o.length?o[m]:o[m]=0,T=y+m;d<=T&&T<u&&(o[m]=y+1)}let p=s.previousIndex;o[p]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!n0(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,Nx(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new v0(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Mf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Mf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},v0=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},_0=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Mf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new _0,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function hR(){return new Of([new m0])}var Of=(()=>{class n{factories;static \u0275prov=G({token:n,providedIn:"root",factory:hR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=N(n,{optional:!0,skipSelf:!0});return n.create(t,r||hR())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new W(901,!1)}}return n})();var IR=I0(null,"core",[]),bR=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(te(Vn))};static \u0275mod=ct({type:n});static \u0275inj=nt({})}return n})();function Zo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function C0(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function wR(n,e){let t=pr(n),r=e.elementInjector||Zs();return new Gi(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function CR(n){let e=pr(n);if(!e)return null;let t=new Gi(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var TR=null;function Sn(){return TR}function S0(n){TR??=n}var Ol=class{},Fl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>N(AR),providedIn:"platform"})}return n})(),D0=new q(""),AR=(()=>{class n extends Fl{_location;_history;_doc=N(Je);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sn().getBaseHref(this._doc)}onPopState(t){let r=Sn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Sn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Ff(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function SR(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function er(n){return n&&n[0]!=="?"?`?${n}`:n}var Yr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>N(Vf),providedIn:"root"})}return n})(),Lf=new q(""),Vf=(()=>{class n extends Yr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(Je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ff(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+er(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+er(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+er(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(te(Fl),te(Lf,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yi=(()=>{class n{_subject=new fe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=w3(SR(DR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+er(r))}normalize(t){return n.stripTrailingSlash(b3(this._basePath,DR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+er(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+er(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=er;static joinWithSlash=Ff;static stripTrailingSlash=SR;static \u0275fac=function(r){return new(r||n)(te(Yr))};static \u0275prov=G({token:n,factory:()=>I3(),providedIn:"root"})}return n})();function I3(){return new Yi(te(Yr))}function b3(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function DR(n){return n.replace(/\/index.html$/,"")}function w3(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var O0=(()=>{class n extends Yr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Ff(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+er(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+er(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(te(Fl),te(Lf,8))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();var F0=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(F0||{});var Wt=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Wt||{}),He=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(He||{}),pn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(pn||{}),mn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function MR(n){return fn(n)[Xe.LocaleId]}function OR(n,e,t){let r=fn(n),i=[r[Xe.DayPeriodsFormat],r[Xe.DayPeriodsStandalone]],o=Un(i,e);return Un(o,t)}function FR(n,e,t){let r=fn(n),i=[r[Xe.DaysFormat],r[Xe.DaysStandalone]],o=Un(i,e);return Un(o,t)}function LR(n,e,t){let r=fn(n),i=[r[Xe.MonthsFormat],r[Xe.MonthsStandalone]],o=Un(i,e);return Un(o,t)}function VR(n,e){let r=fn(n)[Xe.Eras];return Un(r,e)}function Ll(n,e){let t=fn(n);return Un(t[Xe.DateFormat],e)}function Vl(n,e){let t=fn(n);return Un(t[Xe.TimeFormat],e)}function Ul(n,e){let r=fn(n)[Xe.DateTimeFormat];return Un(r,e)}function br(n,e){let t=fn(n),r=t[Xe.NumberSymbols][e];if(typeof r>"u"){if(e===mn.CurrencyDecimal)return t[Xe.NumberSymbols][mn.Decimal];if(e===mn.CurrencyGroup)return t[Xe.NumberSymbols][mn.Group]}return r}function UR(n,e){return fn(n)[Xe.NumberFormats][e]}function jR(n){if(!n[Xe.ExtraData])throw new W(2303,!1)}function BR(n){let e=fn(n);return jR(e),(e[Xe.ExtraData][2]||[]).map(r=>typeof r=="string"?T0(r):[T0(r[0]),T0(r[1])])}function $R(n,e,t){let r=fn(n);jR(r);let i=[r[Xe.ExtraData][0],r[Xe.ExtraData][1]],o=Un(i,e)||[];return Un(o,t)||[]}function Un(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new W(2304,!1)}function T0(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var C3=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Uf={},S3=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function HR(n,e,t,r){let i=M3(n);e=Qr(t,e)||e;let s=[],a;for(;e;)if(a=S3.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=zR(r,c),i=N3(i,r));let u="";return s.forEach(d=>{let p=P3(d);u+=p?p(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Gf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Qr(n,e){let t=MR(n);if(Uf[t]??={},Uf[t][e])return Uf[t][e];let r="";switch(e){case"shortDate":r=Ll(n,pn.Short);break;case"mediumDate":r=Ll(n,pn.Medium);break;case"longDate":r=Ll(n,pn.Long);break;case"fullDate":r=Ll(n,pn.Full);break;case"shortTime":r=Vl(n,pn.Short);break;case"mediumTime":r=Vl(n,pn.Medium);break;case"longTime":r=Vl(n,pn.Long);break;case"fullTime":r=Vl(n,pn.Full);break;case"short":let i=Qr(n,"shortTime"),o=Qr(n,"shortDate");r=jf(Ul(n,pn.Short),[i,o]);break;case"medium":let s=Qr(n,"mediumTime"),a=Qr(n,"mediumDate");r=jf(Ul(n,pn.Medium),[s,a]);break;case"long":let c=Qr(n,"longTime"),u=Qr(n,"longDate");r=jf(Ul(n,pn.Long),[c,u]);break;case"full":let d=Qr(n,"fullTime"),p=Qr(n,"fullDate");r=jf(Ul(n,pn.Full),[d,p]);break}return r&&(Uf[t][e]=r),r}function jf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function tr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function D3(n,e){return tr(n,3).substring(0,e)}function _t(n,e,t=0,r=!1,i=!1){return function(o,s){let a=T3(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return D3(a,e);let c=br(s,mn.MinusSign);return tr(a,e,c,r,i)}}function T3(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new W(2301,!1)}}function Ke(n,e,t=Wt.Format,r=!1){return function(i,o){return A3(i,o,n,e,t,r)}}function A3(n,e,t,r,i,o){switch(t){case 2:return LR(e,i,r)[n.getMonth()];case 1:return FR(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=BR(e),d=$R(e,i,r),p=u.findIndex(m=>{if(Array.isArray(m)){let[y,T]=m,V=s>=y.hours&&a>=y.minutes,M=s<T.hours||s===T.hours&&a<T.minutes;if(y.hours<T.hours){if(V&&M)return!0}else if(V||M)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return d[p]}return OR(e,i,r)[s<12?0:1];case 3:return VR(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new W(2302,!1)}}function Bf(n){return function(e,t,r){let i=-1*r,o=br(t,mn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+tr(s,2,o)+tr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+tr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+tr(s,2,o)+":"+tr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+tr(s,2,o)+":"+tr(Math.abs(i%60),2,o);default:throw new W(2310,!1)}}}var x3=0,Hf=4;function R3(n){let e=Gf(n,x3,1).getDay();return Gf(n,0,1+(e<=Hf?Hf:Hf+7)-e)}function GR(n){let e=n.getDay(),t=e===0?-3:Hf-e;return Gf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function A0(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=GR(t),s=R3(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return tr(i,n,br(r,mn.MinusSign))}}function $f(n,e=!1){return function(t,r){let o=GR(t).getFullYear();return tr(o,n,br(r,mn.MinusSign),e)}}var x0={};function P3(n){if(x0[n])return x0[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ke(3,He.Abbreviated);break;case"GGGG":e=Ke(3,He.Wide);break;case"GGGGG":e=Ke(3,He.Narrow);break;case"y":e=_t(0,1,0,!1,!0);break;case"yy":e=_t(0,2,0,!0,!0);break;case"yyy":e=_t(0,3,0,!1,!0);break;case"yyyy":e=_t(0,4,0,!1,!0);break;case"Y":e=$f(1);break;case"YY":e=$f(2,!0);break;case"YYY":e=$f(3);break;case"YYYY":e=$f(4);break;case"M":case"L":e=_t(1,1,1);break;case"MM":case"LL":e=_t(1,2,1);break;case"MMM":e=Ke(2,He.Abbreviated);break;case"MMMM":e=Ke(2,He.Wide);break;case"MMMMM":e=Ke(2,He.Narrow);break;case"LLL":e=Ke(2,He.Abbreviated,Wt.Standalone);break;case"LLLL":e=Ke(2,He.Wide,Wt.Standalone);break;case"LLLLL":e=Ke(2,He.Narrow,Wt.Standalone);break;case"w":e=A0(1);break;case"ww":e=A0(2);break;case"W":e=A0(1,!0);break;case"d":e=_t(2,1);break;case"dd":e=_t(2,2);break;case"c":case"cc":e=_t(7,1);break;case"ccc":e=Ke(1,He.Abbreviated,Wt.Standalone);break;case"cccc":e=Ke(1,He.Wide,Wt.Standalone);break;case"ccccc":e=Ke(1,He.Narrow,Wt.Standalone);break;case"cccccc":e=Ke(1,He.Short,Wt.Standalone);break;case"E":case"EE":case"EEE":e=Ke(1,He.Abbreviated);break;case"EEEE":e=Ke(1,He.Wide);break;case"EEEEE":e=Ke(1,He.Narrow);break;case"EEEEEE":e=Ke(1,He.Short);break;case"a":case"aa":case"aaa":e=Ke(0,He.Abbreviated);break;case"aaaa":e=Ke(0,He.Wide);break;case"aaaaa":e=Ke(0,He.Narrow);break;case"b":case"bb":case"bbb":e=Ke(0,He.Abbreviated,Wt.Standalone,!0);break;case"bbbb":e=Ke(0,He.Wide,Wt.Standalone,!0);break;case"bbbbb":e=Ke(0,He.Narrow,Wt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ke(0,He.Abbreviated,Wt.Format,!0);break;case"BBBB":e=Ke(0,He.Wide,Wt.Format,!0);break;case"BBBBB":e=Ke(0,He.Narrow,Wt.Format,!0);break;case"h":e=_t(3,1,-12);break;case"hh":e=_t(3,2,-12);break;case"H":e=_t(3,1);break;case"HH":e=_t(3,2);break;case"m":e=_t(4,1);break;case"mm":e=_t(4,2);break;case"s":e=_t(5,1);break;case"ss":e=_t(5,2);break;case"S":e=_t(6,1);break;case"SS":e=_t(6,2);break;case"SSS":e=_t(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Bf(0);break;case"ZZZZZ":e=Bf(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Bf(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Bf(2);break;default:return null}return x0[n]=e,e}function zR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function k3(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function N3(n,e,t){let i=n.getTimezoneOffset(),o=zR(e,i);return k3(n,-1*(o-i))}function M3(n){if(xR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Gf(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(C3))return O3(r)}let e=new Date(n);if(!xR(e))throw new W(2311,!1);return e}function O3(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function xR(n){return n instanceof Date&&!isNaN(n.valueOf())}var F3=/^(\d+)?\.((\d+)(-(\d+))?)?$/,RR=22,zf=".",jl="0",L3=";",V3=",",R0="#";function U3(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=br(t,mn.Infinity);else{let u=$3(n);s&&(u=B3(u));let d=e.minInt,p=e.minFrac,m=e.maxFrac;if(o){let ee=o.match(F3);if(ee===null)throw new W(2306,!1);let oe=ee[1],Se=ee[3],ht=ee[5];oe!=null&&(d=P0(oe)),Se!=null&&(p=P0(Se)),ht!=null?m=P0(ht):Se!=null&&p>m&&(m=p)}H3(u,p,m);let y=u.digits,T=u.integerLen,V=u.exponent,M=[];for(c=y.every(ee=>!ee);T<d;T++)y.unshift(0);for(;T<0;T++)y.unshift(0);T>0?M=y.splice(T,y.length):(M=y,y=[0]);let j=[];for(y.length>=e.lgSize&&j.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)j.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&j.unshift(y.join("")),a=j.join(br(t,r)),M.length&&(a+=br(t,i)+M.join("")),V&&(a+=br(t,mn.Exponential)+"+"+V)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function qR(n,e,t){let r=UR(e,F0.Decimal),i=j3(r,br(e,mn.MinusSign));return U3(n,i,e,mn.Group,mn.Decimal,t)}function j3(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(L3),i=r[0],o=r[1],s=i.indexOf(zf)!==-1?i.split(zf):[i.substring(0,i.lastIndexOf(jl)+1),i.substring(i.lastIndexOf(jl)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(R0));for(let d=0;d<c.length;d++){let p=c.charAt(d);p===jl?t.minFrac=t.maxFrac=d+1:p===R0?t.maxFrac=d+1:t.posSuf+=p}let u=a.split(V3);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,p=o.indexOf(R0);t.negPre=o.substring(0,p).replace(/'/g,""),t.negSuf=o.slice(p+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function B3(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function $3(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(zf))>-1&&(e=e.replace(zf,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===jl;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===jl;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>RR&&(r=r.splice(0,RR-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function H3(n,e,t){if(e>t)throw new W(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,u=e+n.integerLen,d=r.reduceRight(function(p,m,y,T){return m=m+p,T[y]=m<10?m:m-10,c&&(T[y]===0&&y>=u?T.pop():c=!1),m>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function P0(n){let e=parseInt(n);if(isNaN(e))throw new W(2305,!1);return e}var k0=/\s+/,PR=[],Xo=(()=>{class n{_ngEl;_renderer;initialClasses=PR;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(k0):PR}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(k0):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(k0).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(X(Vt),X(Wr))};static \u0275dir=pt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var qf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new qf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),kR(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);kR(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(X(hn),X(bn),X(Of))};static \u0275dir=pt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function kR(n,e){n.context.$implicit=e.item}var nr=(()=>{class n{_viewContainer;_context=new Wf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){NR(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){NR(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(X(hn),X(bn))};static \u0275dir=pt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Wf=class{$implicit=null;ngIf=null};function NR(n,e){if(n&&!n.createEmbeddedView)throw new W(2020,!1)}var Kf=class{_viewContainerRef;_templateRef;_created=!1;constructor(e,t){this._viewContainerRef=e,this._templateRef=t}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},Bl=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(t){this._ngSwitch=t,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){let r=t===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(let r of this._defaultViews)r.enforceState(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275dir=pt({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),L0=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new Kf(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||n)(X(hn),X(bn),X(Bl,9))};static \u0275dir=pt({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})(),V0=(()=>{class n{constructor(t,r,i){i._addDefault(new Kf(t,r))}static \u0275fac=function(r){return new(r||n)(X(hn),X(bn),X(Bl,9))};static \u0275dir=pt({type:n,selectors:[["","ngSwitchDefault",""]]})}return n})();function U0(n,e){return new W(2100,!1)}var N0=class{createSubscription(e,t,r){return ft(()=>e.subscribe({next:t,error:r}))}dispose(e){ft(()=>e.unsubscribe())}},M0=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},G3=new M0,z3=new N0,j0=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=N(Fn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Kr(t))return G3;if(Sf(t))return z3;throw U0(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(X(Ut,16))};static \u0275pipe=Al({name:"async",type:n,pure:!1})}return n})();var q3="mediumDate",WR=new q(""),KR=new q(""),B0=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??q3,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return HR(t,s,o||this.locale,a)}catch(s){throw U0(n,s.message)}}static \u0275fac=function(r){return new(r||n)(X(Wi,16),X(WR,24),X(KR,24))};static \u0275pipe=Al({name:"date",type:n,pure:!0})}return n})();var Jr=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!W3(t))return null;i||=this._locale;try{let o=K3(t);return qR(o,i,r)}catch(o){throw U0(n,o.message)}}static \u0275fac=function(r){return new(r||n)(X(Wi,16))};static \u0275pipe=Al({name:"number",type:n,pure:!0})}return n})();function W3(n){return!(n==null||n===""||n!==n)}function K3(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new W(2309,!1);return n}var $l=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=nt({})}return n})();function $0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Hl=class{};function YR(n,e,t){return d0(n,e,t)}var G0="browser";function QR(n){return n===G0}var JR=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>new H0(N(Je),window)})}return n})(),H0=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Z(O({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=Y3(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Mi(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Z(O({},t),{left:i-s[0],top:o-s[1]}))}};function Y3(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var zl=class{_doc;constructor(e){this._doc=e}manager},Yf=(()=>{class n extends zl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(te(Je))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),Zf=new q(""),K0=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Yf));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Yf);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(te(Zf),te(Pe))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),z0="ng-app-id";function ZR(n){for(let e of n)e.remove()}function XR(n,e){let t=e.createElement("style");return t.textContent=n,t}function Q3(n,e,t,r){let i=n.head?.querySelectorAll(`style[${z0}="${e}"],link[${z0}="${e}"]`);if(i)for(let o of i)o.removeAttribute(z0),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function W0(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Y0=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,Q3(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,XR);r?.forEach(i=>this.addUsage(i,this.external,W0))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(ZR(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])ZR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,XR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,W0(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(te(Je),te(df),te(ff,8),te(qr))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),q0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Q0=/%COMP%/g;var t1="%COMP%",J3=`_nghost-${t1}`,Z3=`_ngcontent-${t1}`,X3=!0,e4=new q("",{factory:()=>X3});function t4(n){return Z3.replace(Q0,n)}function n4(n){return J3.replace(Q0,n)}function n1(n,e){return e.map(t=>t.replace(Q0,n))}var J0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new ql(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Jf?i.applyToHost(t):i instanceof Wl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Xn.Emulated:o=new Jf(c,u,r,this.appId,d,s,a,p,m);break;case Xn.ShadowDom:return new Qf(c,t,r,s,a,this.nonce,p,m,u);case Xn.ExperimentalIsolatedShadowDom:return new Qf(c,t,r,s,a,this.nonce,p,m);default:o=new Wl(c,u,r,d,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(te(K0),te(Y0),te(df),te(e4),te(Je),te(Pe),te(ff),te(qo,8))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),ql=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(q0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(e1(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(e1(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=q0[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=q0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Er.DashCase|Er.Important)?e.style.setProperty(t,r,i&Er.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Er.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Sn().getGlobalEventTarget(this.doc,e),!e))throw new W(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function e1(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Qf=class extends ql{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,i,o,a,c),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=n1(r.id,d);for(let m of d){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=m,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let m of p){let y=W0(m,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Wl=class extends ql{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?n1(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ha.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Jf=class extends Wl{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,u,d),this.contentAttr=t4(d),this.hostAttr=n4(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Xf=class n extends Ol{supportsDOMEvents=!0;static makeCurrent(){S0(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=r4();return t==null?null:i4(t)}resetBaseElement(){Kl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $0(document.cookie,e)}},Kl=null;function r4(){return Kl=Kl||document.head.querySelector("base"),Kl?Kl.getAttribute("href"):null}function i4(n){return new URL(n,document.baseURI).pathname}var ep=class{addToWindow(e){tn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new W(5103,!1);return o},tn.getAllAngularTestabilities=()=>e.getAllTestabilities(),tn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=tn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};tn.frameworkStabilizers||(tn.frameworkStabilizers=[]),tn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Sn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},o4=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),r1=["alt","control","meta","shift"],s4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},a4={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},i1=(()=>{class n extends zl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),r1.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=s4[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),r1.forEach(s=>{if(s!==i){let a=a4[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(te(Je))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();function c4(){Xf.makeCurrent()}function l4(){return new fr}function u4(){return Oy(document),document}var d4=[{provide:qr,useValue:G0},{provide:hf,useValue:c4,multi:!0},{provide:Je,useFactory:u4}],Z0=I0(IR,"browser",d4);var h4=[{provide:Cf,useClass:ep},{provide:wf,useClass:xl},{provide:xl,useClass:xl}],f4=[{provide:sl,useValue:"root"},{provide:fr,useFactory:l4},{provide:Zf,useClass:Yf,multi:!0},{provide:Zf,useClass:i1,multi:!0},J0,Y0,K0,{provide:Ln,useExisting:J0},{provide:Hl,useClass:o4},[]],X0=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=nt({providers:[...f4,...h4],imports:[$l,bR]})}return n})();var o1=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(te(Je))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function p4(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===0||t===1?1:i===0&&t!==0&&t%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var a1=["fr",[["AM","PM"]],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}",void 0,void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",p4];var c1=()=>{};var d1=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},m4=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},tp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|u>>6,y=u&63;c||(y=64,s||(m=64)),r.push(t[d],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(d1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):m4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new tE;let m=o<<2|a>>4;if(r.push(m),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let T=u<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},tE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},g4=function(n){let e=d1(n);return tp.encodeByteArray(e,!0)},Ql=function(n){return g4(n).replace(/\./g,"")},np=function(n){try{return tp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var v4=()=>rE().__FIREBASE_DEFAULTS__,_4=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},y4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&np(n[1]);return e&&JSON.parse(e)},rp=()=>{try{return c1()||v4()||_4()||y4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iE=n=>{var e,t;return(t=(e=rp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},h1=n=>{let e=iE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},oE=()=>{var n;return(n=rp())===null||n===void 0?void 0:n.config},sE=n=>{var e;return(e=rp())===null||e===void 0?void 0:e[`_${n}`]};var es=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Qi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ip(n){return(await fetch(n,{credentials:"include"})).ok}function f1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ql(JSON.stringify(t)),Ql(JSON.stringify(s)),""].join(".")}var Yl={};function E4(){let n={prod:[],emulator:[]};for(let e of Object.keys(Yl))Yl[e]?n.emulator.push(e):n.prod.push(e);return n}function I4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var l1=!1;function op(n,e){if(typeof window>"u"||typeof document>"u"||!Qi(window.location.host)||Yl[n]===e||Yl[n]||l1)return;Yl[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=E4().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{l1=!0,s()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=I4(r),y=t("text"),T=document.getElementById(y)||document.createElement("span"),V=t("learnmore"),M=document.getElementById(V)||document.createElement("a"),j=t("preprendIcon"),ee=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let oe=m.element;a(oe),d(M,V);let Se=u();c(ee,j),oe.append(ee,T,M,Se),document.body.appendChild(oe)}o?(T.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function b4(){var n;let e=(n=rp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function g1(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function v1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _1(){let n=Tt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function y1(){return!b4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jl(){try{return typeof indexedDB=="object"}catch{return!1}}function E1(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var w4="FirebaseError",Dn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=w4,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rr.prototype.create)}},rr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?C4(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Dn(i,a,r)}};function C4(n,e){return n.replace(S4,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var S4=/\{\$([^}]+)}/g;function I1(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Cr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(u1(o)&&u1(s)){if(!Cr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function u1(n){return n!==null&&typeof n=="object"}function Ia(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function b1(n,e){let t=new nE(n,e);return t.subscribe.bind(t)}var nE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");D4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=eE),i.error===void 0&&(i.error=eE),i.complete===void 0&&(i.complete=eE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function D4(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function eE(){}var wde=14400*1e3;function yt(n){return n&&n._delegate?n._delegate:n}var sn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ts="[DEFAULT]";var aE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new es;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(A4(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function T4(n){return n===ts?void 0:n}function A4(n){return n.instantiationMode==="EAGER"}var sp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new aE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var x4=[],we=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(we||{}),R4={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},P4=we.INFO,k4={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},N4=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=k4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Sr=class{constructor(e){this.name=e,this._logLevel=P4,this._logHandler=N4,this._userLogHandler=null,x4.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?R4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}};var M4=(n,e)=>e.some(t=>n instanceof t),w1,C1;function O4(){return w1||(w1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F4(){return C1||(C1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var S1=new WeakMap,lE=new WeakMap,D1=new WeakMap,cE=new WeakMap,dE=new WeakMap;function L4(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Dr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&S1.set(t,n)}).catch(()=>{}),dE.set(e,n),e}function V4(n){if(lE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});lE.set(n,e)}var uE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||D1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Dr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function T1(n){uE=n(uE)}function U4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(ap(this),e,...t);return D1.set(r,e.sort?e.sort():[e]),Dr(r)}:F4().includes(n)?function(...e){return n.apply(ap(this),e),Dr(S1.get(this))}:function(...e){return Dr(n.apply(ap(this),e))}}function j4(n){return typeof n=="function"?U4(n):(n instanceof IDBTransaction&&V4(n),M4(n,O4())?new Proxy(n,uE):n)}function Dr(n){if(n instanceof IDBRequest)return L4(n);if(cE.has(n))return cE.get(n);let e=j4(n);return e!==n&&(cE.set(n,e),dE.set(e,n)),e}var ap=n=>dE.get(n);function cp(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Dr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Dr(s.result),c.oldVersion,c.newVersion,Dr(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var B4=["get","getKey","getAll","getAllKeys","count"],$4=["put","add","delete","clear"],hE=new Map;function A1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hE.get(e))return hE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=$4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||B4.includes(t)))return;let o=async function(s,...a){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&c.done]))[0]};return hE.set(e,o),o}T1(n=>Z(O({},n),{get:(e,t,r)=>A1(e,t)||n.get(e,t,r),has:(e,t)=>!!A1(e,t)||n.has(e,t)}));var pE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(H4(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function H4(n){let e=n.getComponent();return e?.type==="VERSION"}var mE="@firebase/app",x1="0.13.2";var Zr=new Sr("@firebase/app"),G4="@firebase/app-compat",z4="@firebase/analytics-compat",q4="@firebase/analytics",W4="@firebase/app-check-compat",K4="@firebase/app-check",Y4="@firebase/auth",Q4="@firebase/auth-compat",J4="@firebase/database",Z4="@firebase/data-connect",X4="@firebase/database-compat",e$="@firebase/functions",t$="@firebase/functions-compat",n$="@firebase/installations",r$="@firebase/installations-compat",i$="@firebase/messaging",o$="@firebase/messaging-compat",s$="@firebase/performance",a$="@firebase/performance-compat",c$="@firebase/remote-config",l$="@firebase/remote-config-compat",u$="@firebase/storage",d$="@firebase/storage-compat",h$="@firebase/firestore",f$="@firebase/ai",p$="@firebase/firestore-compat",m$="firebase",g$="11.10.0";var gE="[DEFAULT]",v$={[mE]:"fire-core",[G4]:"fire-core-compat",[q4]:"fire-analytics",[z4]:"fire-analytics-compat",[K4]:"fire-app-check",[W4]:"fire-app-check-compat",[Y4]:"fire-auth",[Q4]:"fire-auth-compat",[J4]:"fire-rtdb",[Z4]:"fire-data-connect",[X4]:"fire-rtdb-compat",[e$]:"fire-fn",[t$]:"fire-fn-compat",[n$]:"fire-iid",[r$]:"fire-iid-compat",[i$]:"fire-fcm",[o$]:"fire-fcm-compat",[s$]:"fire-perf",[a$]:"fire-perf-compat",[c$]:"fire-rc",[l$]:"fire-rc-compat",[u$]:"fire-gcs",[d$]:"fire-gcs-compat",[h$]:"fire-fst",[p$]:"fire-fst-compat",[f$]:"fire-vertex","fire-js":"fire-js",[m$]:"fire-js-all"};var Zl=new Map,_$=new Map,vE=new Map;function R1(n,e){try{n.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ir(n){let e=n.name;if(vE.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;vE.set(e,n);for(let t of Zl.values())R1(t,n);for(let t of _$.values())R1(t,n);return!0}function ba(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function an(n){return n==null?!1:n.settings!==void 0}var y$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new rr("app","Firebase",y$);var _E=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}};var Zi=g$;function IE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:gE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ji.create("bad-app-name",{appName:String(i)});if(t||(t=oE()),!t)throw Ji.create("no-options");let o=Zl.get(i);if(o){if(Cr(t,o.options)&&Cr(r,o.config))return o;throw Ji.create("duplicate-app",{appName:i})}let s=new sp(i);for(let c of vE.values())s.addComponent(c);let a=new _E(t,r,s);return Zl.set(i,a),a}function ns(n=gE){let e=Zl.get(n);if(!e&&n===gE&&oE())return IE();if(!e)throw Ji.create("no-app",{appName:n});return e}function lp(){return Array.from(Zl.values())}function lt(n,e,t){var r;let i=(r=v$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(a.join(" "));return}ir(new sn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var E$="firebase-heartbeat-database",I$=1,Xl="firebase-heartbeat-store",fE=null;function M1(){return fE||(fE=cp(E$,I$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ji.create("idb-open",{originalErrorMessage:n.message})})),fE}async function b$(n){try{let t=(await M1()).transaction(Xl),r=await t.objectStore(Xl).get(O1(n));return await t.done,r}catch(e){if(e instanceof Dn)Zr.warn(e.message);else{let t=Ji.create("idb-get",{originalErrorMessage:e?.message});Zr.warn(t.message)}}}async function P1(n,e){try{let r=(await M1()).transaction(Xl,"readwrite");await r.objectStore(Xl).put(e,O1(n)),await r.done}catch(t){if(t instanceof Dn)Zr.warn(t.message);else{let r=Ji.create("idb-set",{originalErrorMessage:t?.message});Zr.warn(r.message)}}}function O1(n){return`${n.name}!${n.options.appId}`}var w$=1024,C$=30,yE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new EE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=k1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>C$){let s=D$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=k1(),{heartbeatsToSend:r,unsentEntries:i}=S$(this._heartbeatsCache.heartbeats),o=Ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Zr.warn(t),""}}};function k1(){return new Date().toISOString().substring(0,10)}function S$(n,e=w$){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),N1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),N1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var EE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jl()?E1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await b$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return P1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return P1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function N1(n){return Ql(JSON.stringify({version:2,heartbeats:n})).length}function D$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function T$(n){ir(new sn("platform-logger",e=>new pE(e),"PRIVATE")),ir(new sn("heartbeat",e=>new yE(e),"PRIVATE")),lt(mE,x1,n),lt(mE,x1,"esm2017"),lt("fire-js","")}T$("");var A$="firebase",x$="11.10.0";lt(A$,x$,"app");function F1(n){n===void 0&&(n=N(Ue));let e=n.get(ca);return t=>new le(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Xi=new Ri("ANGULARFIRE2_VERSION");function eu(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ca=(n,e)=>{let t=e?[e]:lp(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},wa=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(wa||{}),L1=w0()&&typeof Zone<"u"?wa.WARN:wa.SILENT;var up=class{zone;delegate;constructor(e,t=Pv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},eo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=N(Pe);this.outsideAngular=t.runOutsideAngular(()=>new up(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new up(typeof Zone>"u"?void 0:Zone.current,Si))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),V1=!1;function R$(n,e){!V1&&(L1>wa.SILENT||w0())&&(V1=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),L1>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function P$(n){let e=N(Pe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function rs(n){let e=N(Pe,{optional:!0});return e?e.run(()=>n()):n()}var k$=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),gt(t,()=>rs(()=>n.apply(void 0,r)))),ut=(n,e,t)=>(t||=e?wa.WARN:wa.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=N(eo),s=N(ca),a=N(st)}catch{return R$(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=rs(()=>s.add())),i[u]=k$(i[u],r,a));let c=P$(()=>n.apply(this,i));return e?c instanceof le?c.pipe(Ti(o.outsideAngular),Di(o.insideAngular),F1(a)):c instanceof Promise?rs(()=>{let u=s.add();return new Promise((d,p)=>{c.then(m=>gt(a,()=>rs(()=>d(m))),m=>gt(a,()=>rs(()=>p(m)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:rs(()=>c):c instanceof le?c.pipe(Ti(o.outsideAngular),Di(o.insideAngular)):rs(()=>c)});var Xr=class{constructor(e){return e}},is=class{constructor(){return lp()}};function N$(n){return n&&n.length===1?n[0]:new Xr(ns())}var bE=new q("angularfire2._apps"),M$={provide:Xr,useFactory:N$,deps:[[new wn,bE]]},O$={provide:is,deps:[[new wn,bE]]};function F$(n){return(e,t)=>{let r=t.get(qr);lt("angularfire",Xi.full,"core"),lt("angularfire",Xi.full,"app"),lt("angular",e_.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xr(i)}}function U1(n,...e){return Yn([M$,O$,{provide:bE,useFactory:F$(n),multi:!0,deps:[Pe,Ue,eo,...e]}])}var j1=ut(IE,!0);var L$=new Map,V$={activated:!1,tokenObservers:[]},U$={initialized:!1,enabled:!1};function or(n){return L$.get(n)||Object.assign({},V$)}function G1(){return U$}var j$="https://content-firebaseappcheck.googleapis.com/v1";var B$="exchangeDebugToken",B1={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},whe=1440*60*1e3;var SE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new es,this.pending.promise.catch(t=>{}),await $$(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new es,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function $$(n){return new Promise(e=>{setTimeout(e,n)})}var H$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},to=new rr("appCheck","AppCheck",H$);function z1(n){if(!or(n).activated)throw to.create("use-before-activation",{appName:n.name})}async function q1({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(p){throw to.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw to.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw to.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw to.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let u=Number(c[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+u,issuedAtTimeMillis:d}}function W1(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${j$}/projects/${t}/apps/${r}:${B$}?key=${i}`,body:{debug_token:e}}}var G$="firebase-app-check-database",z$=1,DE="firebase-app-check-store";var dp=null;function q$(){return dp||(dp=new Promise((n,e)=>{try{let t=indexedDB.open(G$,z$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(to.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(DE,{keyPath:"compositeKey"})}}}catch(t){e(to.create("storage-open",{originalErrorMessage:t?.message}))}}),dp)}function W$(n,e){return K$(Y$(n),e)}async function K$(n,e){let r=(await q$()).transaction(DE,"readwrite"),o=r.objectStore(DE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(to.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function Y$(n){return`${n.options.appId}-${n.name}`}var tu=new Sr("@firebase/app-check");function wE(n,e){return Jl()?W$(n,e).catch(t=>{tu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function K1(){return G1().enabled}async function Y1(){let n=G1();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Q$={error:"UNKNOWN_ERROR"};function J$(n){return tp.encodeString(JSON.stringify(n),!1)}async function TE(n,e=!1,t=!1){let r=n.app;z1(r);let i=or(r),o=i.token,s;if(o&&!nu(o)&&(i.token=void 0,o=void 0),!o){let u=await i.cachedTokenPromise;u&&(nu(u)?o=u:await wE(r,void 0))}if(!e&&o&&nu(o))return{token:o.token};let a=!1;if(K1())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=q1(W1(r,await Y1()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=await i.exchangeTokenPromise;return await wE(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?tu.warn(u.message):t&&tu.error(u),CE(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await or(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?tu.warn(u.message):t&&tu.error(u),s=u}let c;return o?s?nu(o)?c={token:o.token,internalError:s}:c=CE(s):(c={token:o.token},i.token=o,await wE(r,o)):c=CE(s),a&&t5(r,c),c}async function Z$(n){let e=n.app;z1(e);let{provider:t}=or(e);if(K1()){let r=await Y1(),{token:i}=await q1(W1(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function X$(n,e,t,r){let{app:i}=n,o=or(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&nu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),$1(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>$1(n))}function Q1(n,e){let t=or(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function $1(n){let{app:e}=n,t=or(e),r=t.tokenRefresher;r||(r=e5(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function e5(n){let{app:e}=n;return new SE(async()=>{let t=or(e),r;if(t.token?r=await TE(n,!0):r=await TE(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=or(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},B1.RETRIAL_MIN_WAIT,B1.RETRIAL_MAX_WAIT)}function t5(n,e){let t=or(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function nu(n){return n.expireTimeMillis-Date.now()>0}function CE(n){return{token:J$(Q$),error:n}}var AE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=or(this.app);for(let t of e)Q1(this.app,t.next);return Promise.resolve()}};function n5(n,e){return new AE(n,e)}function r5(n){return{getToken:e=>TE(n,e),getLimitedUseToken:()=>Z$(n),addTokenListener:e=>X$(n,"INTERNAL",e),removeTokenListener:e=>Q1(n.app,e)}}var i5="@firebase/app-check",o5="0.10.1";var s5="app-check",H1="app-check-internal";function a5(){ir(new sn(s5,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return n5(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(H1).initialize()})),ir(new sn(H1,n=>{let e=n.getProvider("app-check").getImmediate();return r5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),lt(i5,o5)}a5();var c5="app-check";var Sa=class{constructor(){return Ca(c5)}};var l5=["localhost","0.0.0.0","127.0.0.1"],Ohe=typeof window<"u"&&l5.includes(window.location.hostname);var J1=()=>{};var Z1=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},u5=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},X1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|u>>6,y=u&63;c||(y=64,s||(m=64)),r.push(t[d],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Z1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):u5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new RE;let m=o<<2|a>>4;if(r.push(m),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let T=u<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},RE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},d5=function(n){let e=Z1(n);return X1.encodeByteArray(e,!0)},kE=function(n){return d5(n).replace(/\./g,"")},hp=function(n){try{return X1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var f5=()=>h5().__FIREBASE_DEFAULTS__,p5=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},m5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&hp(n[1]);return e&&JSON.parse(e)},g5=()=>{try{return J1()||f5()||p5()||m5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var eP=n=>g5()?.[`_${n}`];function NE(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function sr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sr())}function nP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oP(){try{return typeof indexedDB=="object"}catch{return!1}}function sP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var v5="FirebaseError",Tr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=v5,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ei.prototype.create)}},ei=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?_5(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Tr(i,a,r)}};function _5(n,e){return n.replace(y5,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var y5=/\{\$([^}]+)}/g;function ME(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aP(n,e){let t=new PE(n,e);return t.subscribe.bind(t)}var PE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");E5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=xE),i.error===void 0&&(i.error=xE),i.complete===void 0&&(i.complete=xE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function E5(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xE(){}var jhe=14400*1e3;function Da(n){return n&&n._delegate?n._delegate:n}var ti=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var I5=[],qe=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(qe||{}),b5={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},w5=qe.INFO,C5={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},S5=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=C5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ta=class{constructor(e){this.name=e,this._logLevel=w5,this._logHandler=S5,this._userLogHandler=null,I5.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}};var FE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(T5(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function T5(n){return n.getComponent()?.type==="VERSION"}var LE="@firebase/app",cP="0.14.6";var ni=new Ta("@firebase/app"),A5="@firebase/app-compat",x5="@firebase/analytics-compat",R5="@firebase/analytics",P5="@firebase/app-check-compat",k5="@firebase/app-check",N5="@firebase/auth",M5="@firebase/auth-compat",O5="@firebase/database",F5="@firebase/data-connect",L5="@firebase/database-compat",V5="@firebase/functions",U5="@firebase/functions-compat",j5="@firebase/installations",B5="@firebase/installations-compat",$5="@firebase/messaging",H5="@firebase/messaging-compat",G5="@firebase/performance",z5="@firebase/performance-compat",q5="@firebase/remote-config",W5="@firebase/remote-config-compat",K5="@firebase/storage",Y5="@firebase/storage-compat",Q5="@firebase/firestore",J5="@firebase/ai",Z5="@firebase/firestore-compat",X5="firebase",eH="12.6.0";var tH={[LE]:"fire-core",[A5]:"fire-core-compat",[R5]:"fire-analytics",[x5]:"fire-analytics-compat",[k5]:"fire-app-check",[P5]:"fire-app-check-compat",[N5]:"fire-auth",[M5]:"fire-auth-compat",[O5]:"fire-rtdb",[F5]:"fire-data-connect",[L5]:"fire-rtdb-compat",[V5]:"fire-fn",[U5]:"fire-fn-compat",[j5]:"fire-iid",[B5]:"fire-iid-compat",[$5]:"fire-fcm",[H5]:"fire-fcm-compat",[G5]:"fire-perf",[z5]:"fire-perf-compat",[q5]:"fire-rc",[W5]:"fire-rc-compat",[K5]:"fire-gcs",[Y5]:"fire-gcs-compat",[Q5]:"fire-fst",[Z5]:"fire-fst-compat",[J5]:"fire-vertex","fire-js":"fire-js",[X5]:"fire-js-all"};var nH=new Map,rH=new Map,lP=new Map;function uP(n,e){try{n.container.addComponent(e)}catch(t){ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xa(n){let e=n.name;if(lP.has(e))return ni.debug(`There were multiple attempts to register component ${e}.`),!1;lP.set(e,n);for(let t of nH.values())uP(t,n);for(let t of rH.values())uP(t,n);return!0}function os(n){return n==null?!1:n.settings!==void 0}var iH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jE=new ei("app","Firebase",iH);var fp=eH;function Aa(n,e,t){let r=tH[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ni.warn(s.join(" "));return}xa(new ti(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var oH="firebase-heartbeat-database",sH=1,ru="firebase-heartbeat-store",OE=null;function pP(){return OE||(OE=cp(oH,sH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ru)}catch(t){console.warn(t)}}}}).catch(n=>{throw jE.create("idb-open",{originalErrorMessage:n.message})})),OE}async function aH(n){try{let t=(await pP()).transaction(ru),r=await t.objectStore(ru).get(mP(n));return await t.done,r}catch(e){if(e instanceof Tr)ni.warn(e.message);else{let t=jE.create("idb-get",{originalErrorMessage:e?.message});ni.warn(t.message)}}}async function dP(n,e){try{let r=(await pP()).transaction(ru,"readwrite");await r.objectStore(ru).put(e,mP(n)),await r.done}catch(t){if(t instanceof Tr)ni.warn(t.message);else{let r=jE.create("idb-set",{originalErrorMessage:t?.message});ni.warn(r.message)}}}function mP(n){return`${n.name}!${n.options.appId}`}var cH=1024,lH=30,VE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new UE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=hP();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>lH){let i=dH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ni.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=hP(),{heartbeatsToSend:t,unsentEntries:r}=uH(this._heartbeatsCache.heartbeats),i=kE(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ni.warn(e),""}}};function hP(){return new Date().toISOString().substring(0,10)}function uH(n,e=cH){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),fP(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),fP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var UE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oP()?sP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await aH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return dP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return dP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function fP(n){return kE(JSON.stringify({version:2,heartbeats:n})).length}function dH(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function hH(n){xa(new ti("platform-logger",e=>new FE(e),"PRIVATE")),xa(new ti("heartbeat",e=>new VE(e),"PRIVATE")),Aa(LE,cP,n),Aa(LE,cP,"esm2020"),Aa("fire-js","")}hH("");function wP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var CP=wP,SP=new ei("auth","Firebase",wP());var vp=new Ta("@firebase/auth");function fH(n,...e){vp.logLevel<=qe.WARN&&vp.warn(`Auth (${fp}): ${n}`,...e)}function mp(n,...e){vp.logLevel<=qe.ERROR&&vp.error(`Auth (${fp}): ${n}`,...e)}function gP(n,...e){throw ZE(n,...e)}function JE(n,...e){return ZE(n,...e)}function DP(n,e,t){let r=Z(O({},CP()),{[e]:t});return new ei("auth","Firebase",r).create(e,{appName:n.name})}function gp(n){return DP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return SP.create(n,...e)}function Me(n,e,...t){if(!n)throw ZE(e,...t)}function iu(n){let e="INTERNAL ASSERTION FAILED: "+n;throw mp(e),new Error(e)}function _p(n,e){n||iu(e)}function pH(){return vP()==="http:"||vP()==="https:"}function vP(){return typeof self<"u"&&self.location?.protocol||null}function mH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pH()||rP()||"connection"in navigator)?navigator.onLine:!0}function gH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var cs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,_p(t>e,"Short delay should be less than long delay!"),this.isMobile=tP()||iP()}get(){return mH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function vH(n,e){_p(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var yp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;iu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;iu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;iu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var _H={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var yH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EH=new cs(3e4,6e4);function TP(n,e){return n.tenantId&&!e.tenantId?Z(O({},e),{tenantId:n.tenantId}):e}async function Cp(n,e,t,r,i={}){return AP(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=ME(O({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=O({method:e,headers:c},o);return nP()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&NE(n.emulatorConfig.host)&&(u.credentials="include"),yp.fetch()(await xP(n,n.config.apiHost,t,a),u)})}async function AP(n,e,t){n._canInitEmulator=!1;let r=O(O({},_H),e);try{let i=new HE(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw pp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw pp(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw pp(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw pp(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw DP(n,d,u);gP(n,d)}}catch(i){if(i instanceof Tr)throw i;gP(n,"network-request-failed",{message:String(i)})}}async function xP(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?vH(n.config,i):`${n.config.apiScheme}://${i}`;return yH.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var HE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(JE(this.auth,"network-request-failed")),EH.get())})}};function pp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=JE(n,e,r);return i.customData._tokenResponse=t,i}async function IH(n,e){return Cp(n,"POST","/v1/accounts:delete",e)}async function Ep(n,e){return Cp(n,"POST","/v1/accounts:lookup",e)}function ou(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RP(n,e=!1){let t=Da(n),r=await t.getIdToken(e),i=PP(r);Me(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ou(BE(i.auth_time)),issuedAtTime:ou(BE(i.iat)),expirationTime:ou(BE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function BE(n){return Number(n)*1e3}function PP(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return mp("JWT malformed, contained fewer than 3 sections"),null;try{let i=hp(t);return i?JSON.parse(i):(mp("Failed to decode base64 JWT payload"),null)}catch(i){return mp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function _P(n){let e=PP(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function GE(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Tr&&bH(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function bH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var zE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var au=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Ip(n){let e=n.auth,t=await n.getIdToken(),r=await GE(n,Ep(e,{idToken:t}));Me(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?NP(i.providerUserInfo):[],s=wH(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new au(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function kP(n){let e=Da(n);await Ip(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NP(n){return n.map(r=>{var i=r,{providerId:e}=i,t=av(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function CH(n,e){let t=await AP(n,{},async()=>{let r=ME({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await xP(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&NE(n.emulatorConfig.host)&&(c.credentials="include"),yp.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SH(n,e){return Cp(n,"POST","/v2/accounts:revokeToken",TP(n,e))}var su=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_P(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");let t=_P(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await CH(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Me(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Me(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Me(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return iu("not implemented")}};function no(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ss=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=av(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new au(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await GE(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RP(this,e)}reload(){return kP(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>O({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Z(O({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ip(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(os(this.auth.app))return Promise.reject(gp(this.auth));let e=await this.getIdToken();return await GE(this,IH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Z(O({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>O({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:T,stsTokenManager:V}=t;Me(p&&V,e,"internal-error");let M=su.fromJSON(this.name,V);Me(typeof p=="string",e,"internal-error"),no(r,e.name),no(i,e.name),Me(typeof m=="boolean",e,"internal-error"),Me(typeof y=="boolean",e,"internal-error"),no(o,e.name),no(s,e.name),no(a,e.name),no(c,e.name),no(u,e.name),no(d,e.name);let j=new n({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:M,createdAt:u,lastLoginAt:d});return T&&Array.isArray(T)&&(j.providerData=T.map(ee=>O({},ee))),c&&(j._redirectEventId=c),j}static async _fromIdTokenResponse(e,t,r=!1){let i=new su;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ip(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Me(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?NP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new su;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new au(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c}};var yP=new Map;function as(n){_p(n instanceof Function,"Expected a class definition");let e=yP.get(n);return e?(_p(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yP.set(n,e),e)}var DH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),qE=DH;function $E(n,e,t){return`firebase:${n}:${e}:${t}`}var bp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=$E(this.userKey,i.apiKey,o),this.fullPersistenceKey=$E("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Ep(this.auth,{idToken:e}).catch(()=>{});return t?ss._fromGetAccountInfoResponse(this.auth,t,e):null}return ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(as(qE),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),o=i[0]||as(qE),s=$E(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(s);if(d){let p;if(typeof d=="string"){let m=await Ep(e,{idToken:d}).catch(()=>{});if(!m)break;p=await ss._fromGetAccountInfoResponse(e,m,d)}else p=ss._fromJSON(e,d);u!==o&&(a=p),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new n(o,e,r))}};function EP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kH(e))return"Blackberry";if(NH(e))return"Webos";if(AH(e))return"Safari";if((e.includes("chrome/")||xH(e))&&!e.includes("edge/"))return"Chrome";if(PH(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function TH(n=sr()){return/firefox\//i.test(n)}function AH(n=sr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xH(n=sr()){return/crios\//i.test(n)}function RH(n=sr()){return/iemobile/i.test(n)}function PH(n=sr()){return/android/i.test(n)}function kH(n=sr()){return/blackberry/i.test(n)}function NH(n=sr()){return/webos/i.test(n)}function MP(n,e=[]){let t;switch(n){case"Browser":t=EP(sr());break;case"Worker":t=`${EP(sr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fp}/${r}`}var WE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function MH(n,e={}){return Cp(n,"GET","/v2/passwordPolicy",TP(n,e))}var OH=6,KE=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??OH,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var YE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wp(this),this.idTokenSubscription=new wp(this),this.beforeStateQueue=new WE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=as(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bp.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Ep(this,{idToken:e}),r=await ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(os(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ip(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(os(this.app))return Promise.reject(gp(this));let t=e?Da(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return os(this.app)?Promise.reject(gp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return os(this.app)?Promise.reject(gp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await MH(this),t=new KE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ei("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await SH(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&as(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await bp.create(this,[as(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&fH(`Error while retrieving App Check token: ${e.error}`),e?.token}};function FH(n){return Da(n)}var wp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=aP(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var LH={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VH(n){LH=n}function UH(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function jH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(as);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function XE(n,e,t,r){return Da(n).onIdTokenChanged(e,t,r)}var yfe=UH("rcb"),Efe=new cs(3e4,6e4);var Ife=new cs(2e3,1e4);var bfe=600*1e3;var wfe=new cs(3e4,6e4);var Cfe=new cs(5e3,15e3);var Sfe=encodeURIComponent("fac");var IP="@firebase/auth",bP="1.11.1";var QE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function BH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $H(n){xa(new ti("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Me(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MP(n)},u=new YE(r,i,o,c);return jH(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xa(new ti("auth-internal",e=>{let t=FH(e.getProvider("auth").getImmediate());return(r=>new QE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Aa(IP,bP,BH(n)),Aa(IP,bP,"esm2020")}var HH=300,Dfe=eP("authIdTokenMaxAge")||HH;function GH(){return document.getElementsByTagName("head")?.[0]??document}VH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=JE("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",GH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$H("Browser");function OP(n){return new le(function(e){var t=XE(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function QP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var JP=QP,ZP=new rr("auth","Firebase",QP());var Rp=new Sr("@firebase/auth");function WH(n,...e){Rp.logLevel<=we.WARN&&Rp.warn(`Auth (${Zi}): ${n}`,...e)}function Dp(n,...e){Rp.logLevel<=we.ERROR&&Rp.error(`Auth (${Zi}): ${n}`,...e)}function xr(n,...e){throw vI(n,...e)}function ar(n,...e){return vI(n,...e)}function gI(n,e,t){let r=Object.assign(Object.assign({},JP()),{[e]:t});return new rr("auth","Firebase",r).create(e,{appName:n.name})}function oi(n){return gI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KH(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&xr(n,"argument-error"),gI(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ZP.create(n,...e)}function ae(n,e,...t){if(!n)throw vI(e,...t)}function ri(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Dp(e),new Error(e)}function si(n,e){n||ri(e)}function nI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function YH(){return FP()==="http:"||FP()==="https:"}function FP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function QH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YH()||g1()||"connection"in navigator)?navigator.onLine:!0}function JH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ls=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,si(t>e,"Short delay should be less than long delay!"),this.isMobile=p1()||v1()}get(){return QH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function _I(n,e){si(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Pp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ZH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var XH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],e6=new ls(3e4,6e4);function mu(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Pa(n,e,t,r,i={}){return XP(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Ia(Object.assign({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=Object.assign({method:e,headers:c},o);return m1()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Qi(n.emulatorConfig.host)&&(u.credentials="include"),Pp.fetch()(await ek(n,n.config.apiHost,t,a),u)})}async function XP(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},ZH),e);try{let i=new rI(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Sp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sp(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Sp(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Sp(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw gI(n,d,u);xr(n,d)}}catch(i){if(i instanceof Dn)throw i;xr(n,"network-request-failed",{message:String(i)})}}async function yI(n,e,t,r,i={}){let o=await Pa(n,e,t,r,i);return"mfaPendingCredential"in o&&xr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function ek(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?_I(n.config,i):`${n.config.apiScheme}://${i}`;return XH.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var rI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ar(this.auth,"network-request-failed")),e6.get())})}};function Sp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ar(n,e,r);return i.customData._tokenResponse=t,i}async function t6(n,e){return Pa(n,"POST","/v1/accounts:delete",e)}async function kp(n,e){return Pa(n,"POST","/v1/accounts:lookup",e)}function cu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EI(n,e=!1){let t=yt(n),r=await t.getIdToken(e),i=II(r);ae(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:cu(eI(i.auth_time)),issuedAtTime:cu(eI(i.iat)),expirationTime:cu(eI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function eI(n){return Number(n)*1e3}function II(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Dp("JWT malformed, contained fewer than 3 sections"),null;try{let i=np(t);return i?JSON.parse(i):(Dp("Failed to decode base64 JWT payload"),null)}catch(i){return Dp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function LP(n){let e=II(n);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function uu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Dn&&n6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function n6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var iI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var du=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Np(n){var e;let t=n.auth,r=await n.getIdToken(),i=await uu(n,kp(t,{idToken:r}));ae(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?tk(o.providerUserInfo):[],a=r6(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new du(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function bI(n){let e=yt(n);await Np(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function r6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tk(n){return n.map(e=>{var{providerId:t}=e,r=sh(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function i6(n,e){let t=await XP(n,{},async()=>{let r=Ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await ek(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Qi(n.emulatorConfig.host)&&(c.credentials="include"),Pp.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function o6(n,e){return Pa(n,"POST","/v2/accounts:revokeToken",mu(n,e))}var lu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ae(e.length!==0,"internal-error");let t=LP(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await i6(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ae(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ae(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ri("not implemented")}};function ro(n,e){ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var io=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=sh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new du(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await uu(this,this.stsTokenManager.getToken(this.auth,e));return ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return EI(this,e)}reload(){return bI(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Np(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(oi(this.auth));let e=await this.getIdToken();return await uu(this,t6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=t.photoURL)!==null&&s!==void 0?s:void 0,V=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,j=(u=t.createdAt)!==null&&u!==void 0?u:void 0,ee=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:oe,emailVerified:Se,isAnonymous:ht,providerData:Ve,stsTokenManager:D}=t;ae(oe&&D,e,"internal-error");let b=lu.fromJSON(this.name,D);ae(typeof oe=="string",e,"internal-error"),ro(p,e.name),ro(m,e.name),ae(typeof Se=="boolean",e,"internal-error"),ae(typeof ht=="boolean",e,"internal-error"),ro(y,e.name),ro(T,e.name),ro(V,e.name),ro(M,e.name),ro(j,e.name),ro(ee,e.name);let C=new n({uid:oe,auth:e,email:m,emailVerified:Se,displayName:p,isAnonymous:ht,photoURL:T,phoneNumber:y,tenantId:V,stsTokenManager:b,createdAt:j,lastLoginAt:ee});return Ve&&Array.isArray(Ve)&&(C.providerData=Ve.map(S=>Object.assign({},S))),M&&(C._redirectEventId=M),C}static async _fromIdTokenResponse(e,t,r=!1){let i=new lu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Np(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];ae(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?tk(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new lu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new du(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c}};var VP=new Map;function ii(n){si(n instanceof Function,"Expected a class definition");let e=VP.get(n);return e?(si(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,VP.set(n,e),e)}var s6=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),oI=s6;function Tp(n,e,t){return`firebase:${n}:${e}:${t}`}var Mp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Tp(this.userKey,i.apiKey,o),this.fullPersistenceKey=Tp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await kp(this.auth,{idToken:e}).catch(()=>{});return t?io._fromGetAccountInfoResponse(this.auth,t,e):null}return io._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ii(oI),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),o=i[0]||ii(oI),s=Tp(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(s);if(d){let p;if(typeof d=="string"){let m=await kp(e,{idToken:d}).catch(()=>{});if(!m)break;p=await io._fromGetAccountInfoResponse(e,m,d)}else p=io._fromJSON(e,d);u!==o&&(a=p),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new n(o,e,r))}};function UP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ok(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ak(e))return"Blackberry";if(ck(e))return"Webos";if(rk(e))return"Safari";if((e.includes("chrome/")||ik(e))&&!e.includes("edge/"))return"Chrome";if(sk(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function nk(n=Tt()){return/firefox\//i.test(n)}function rk(n=Tt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ik(n=Tt()){return/crios\//i.test(n)}function ok(n=Tt()){return/iemobile/i.test(n)}function sk(n=Tt()){return/android/i.test(n)}function ak(n=Tt()){return/blackberry/i.test(n)}function ck(n=Tt()){return/webos/i.test(n)}function wI(n=Tt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function a6(n=Tt()){var e;return wI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function c6(){return _1()&&document.documentMode===10}function lk(n=Tt()){return wI(n)||sk(n)||ck(n)||ak(n)||/windows phone/i.test(n)||ok(n)}function uk(n,e=[]){let t;switch(n){case"Browser":t=UP(Tt());break;case"Worker":t=`${UP(Tt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Zi}/${r}`}var sI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function l6(n,e={}){return Pa(n,"GET","/v2/passwordPolicy",mu(n,e))}var u6=6,aI=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:u6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var cI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Op(this),this.idTokenSubscription=new Op(this),this.beforeStateQueue=new sI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ii(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Mp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await kp(this,{idToken:e}),r=await io._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(an(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Np(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(oi(this));let t=e?yt(e):null;return t&&ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ii(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await l6(this),t=new aI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await o6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ii(e)||this._popupRedirectResolver;ae(t,this,"argument-error"),this.redirectPersistenceManager=await Mp.create(this,[ii(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&WH(`Error while retrieving App Check token: ${t.error}`),t?.token}};function ka(n){return yt(n)}var Op=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=b1(t=>this.observer=t)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var CI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d6(n){CI=n}function h6(n){return CI.loadJS(n)}function f6(){return CI.gapiScript}function dk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function SI(n,e){let t=ba(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Cr(o,e??{}))return i;xr(i,"already-initialized")}return t.initialize({options:e})}function p6(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ii);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function DI(n,e,t){let r=ka(n);ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=hk(e),{host:s,port:a}=m6(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ae(Cr(u,r.config.emulator)&&Cr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Qi(s)?(ip(`${o}//${s}${c}`),op("Auth",!0)):i||g6()}function hk(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function m6(n){let e=hk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:jP(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:jP(s)}}}function jP(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function g6(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var hu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,t){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}};async function Ra(n,e){return yI(n,"POST","/v1/accounts:signInWithIdp",mu(n,e))}var v6="http://localhost",Fp=class n extends hu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=sh(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Ra(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Ra(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ra(e,t)}buildRequest(){let e={requestUri:v6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ia(t)}return e}};var fu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Lp=class extends fu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var TI=(()=>{class n extends Lp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Fp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();async function _6(n,e){return yI(n,"POST","/v1/accounts:signUp",mu(n,e))}var oo=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await io._fromIdTokenResponse(e,r,i),s=BP(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=BP(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function BP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function AI(n){var e;if(an(n.app))return Promise.reject(oi(n));let t=ka(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new oo({user:t.currentUser,providerId:null,operationType:"signIn"});let r=await _6(t,{returnSecureToken:!0}),i=await oo._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}var lI=class n extends Dn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function fk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lI._fromErrorAndOperation(n,o,e,r):o})}async function y6(n,e,t=!1){let r=await uu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return oo._forOperation(n,"link",r)}async function E6(n,e,t=!1){let{auth:r}=n;if(an(r.app))return Promise.reject(oi(r));let i="reauthenticate";try{let o=await uu(n,fk(r,i,e,n),t);ae(o.idToken,r,"internal-error");let s=II(o.idToken);ae(s,r,"internal-error");let{sub:a}=s;return ae(n.uid===a,r,"user-mismatch"),oo._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&xr(r,"user-mismatch"),o}}async function I6(n,e,t=!1){if(an(n.app))return Promise.reject(oi(n));let r="signIn",i=await fk(n,r,e),o=await oo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function b6(n,e){return yI(n,"POST","/v1/accounts:signInWithCustomToken",mu(n,e))}async function xI(n,e){if(an(n.app))return Promise.reject(oi(n));let t=ka(n),r=await b6(t,{token:e,returnSecureToken:!0}),i=await oo._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}function RI(n,e,t,r){return yt(n).onIdTokenChanged(e,t,r)}function PI(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function kI(n){return yt(n).signOut()}var Vp="__sak";var Up=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vp,"1"),this.storage.removeItem(Vp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var w6=1e3,C6=10,S6=(()=>{class n extends Up{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);c6()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,C6):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},w6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),pk=S6;var D6=(()=>{class n extends Up{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),NI=D6;function T6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var A6=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(async d=>d(r.origin,s)),u=await T6(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function MI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var uI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=MI("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Ar(){return window}function x6(n){Ar().location.href=n}function mk(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function R6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P6(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function k6(){return mk()?self:null}var gk="firebaseLocalStorageDb",N6=1,jp="firebaseLocalStorage",vk="fbase_key",us=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Hp(n,e){return n.transaction([jp],e?"readwrite":"readonly").objectStore(jp)}function M6(){let n=indexedDB.deleteDatabase(gk);return new us(n).toPromise()}function dI(){let n=indexedDB.open(gk,N6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(jp,{keyPath:vk})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(jp)?e(r):(r.close(),await M6(),e(await dI()))})})}async function $P(n,e,t){let r=Hp(n,!0).put({[vk]:e,value:t});return new us(r).toPromise()}async function O6(n,e){let t=Hp(n,!1).get(e),r=await new us(t).toPromise();return r===void 0?null:r.value}function HP(n,e){let t=Hp(n,!0).delete(e);return new us(t).toPromise()}var F6=800,L6=3,V6=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dI(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>L6)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=A6._getInstance(k6()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await R6(),!this.activeServiceWorker)return;this.sender=new uI(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||P6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await dI();return await $P(t,Vp,"1"),await HP(t,Vp),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>$P(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>O6(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>HP(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=Hp(o,!1).getAll();return new us(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),_k=V6;var vme=dk("rcb"),_me=new ls(3e4,6e4);function yk(n,e){return e?ii(e):(ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var pu=class extends hu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ra(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function U6(n){return I6(n.auth,new pu(n),n.bypassAuthState)}function j6(n){let{auth:e,user:t}=n;return ae(t,e,"internal-error"),E6(t,new pu(n),n.bypassAuthState)}async function B6(n){let{auth:e,user:t}=n;return ae(t,e,"internal-error"),y6(t,new pu(n),n.bypassAuthState)}var Bp=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U6;case"linkViaPopup":case"linkViaRedirect":return B6;case"reauthViaPopup":case"reauthViaRedirect":return j6;default:xr(this.auth,"internal-error")}}resolve(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $6=new ls(2e3,1e4);async function OI(n,e,t){if(an(n.app))return Promise.reject(ar(n,"operation-not-supported-in-this-environment"));let r=ka(n);KH(n,e,fu);let i=yk(r,t);return new H6(r,"signInViaPopup",e,i).executeNotNull()}var H6=(()=>{class n extends Bp{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return ae(t,this.auth,"internal-error"),t}async onExecution(){si(this.filter.length===1,"Popup operations only handle one event");let t=MI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,$6.get())};t()}}n.currentPopupAction=null;return n})(),G6="pendingRedirect",Ap=new Map,hI=class extends Bp{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ap.get(this.auth._key());if(!e){try{let r=await z6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ap.set(this.auth._key(),e)}return this.bypassAuthState||Ap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function z6(n,e){let t=K6(e),r=W6(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function q6(n,e){Ap.set(n._key(),e)}function W6(n){return ii(n._redirectPersistence)}function K6(n){return Tp(G6,n.config.apiKey,n.name)}async function Y6(n,e,t=!1){if(an(n.app))return Promise.reject(oi(n));let r=ka(n),i=yk(r,e),s=await new hI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var Q6=600*1e3,fI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Ek(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ar(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q6&&this.cachedEventUids.clear(),this.cachedEventUids.has(GP(e))}saveEventToCache(e){this.cachedEventUids.add(GP(e)),this.lastProcessedEventTime=Date.now()}};function GP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ek({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function J6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ek(n);default:return!1}}async function Z6(n,e={}){return Pa(n,"GET","/v1/projects",e)}var X6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e8=/^https?/;async function t8(n){if(n.config.emulator)return;let{authorizedDomains:e}=await Z6(n);for(let t of e)try{if(n8(t))return}catch{}xr(n,"unauthorized-domain")}function n8(n){let e=nI(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!e8.test(t))return!1;if(X6.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var r8=new ls(3e4,6e4);function zP(){let n=Ar().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function i8(n){return new Promise((e,t)=>{var r,i,o;function s(){zP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zP(),t(ar(n,"network-request-failed"))},timeout:r8.get()})}if(!((i=(r=Ar().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ar().gapi)===null||o===void 0)&&o.load)s();else{let a=dk("iframefcb");return Ar()[a]=()=>{gapi.load?s():t(ar(n,"network-request-failed"))},h6(`${f6()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw xp=null,e})}var xp=null;function o8(n){return xp=xp||i8(n),xp}var s8=new ls(5e3,15e3),a8="__/auth/iframe",c8="emulator/auth/iframe",l8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d8(n){let e=n.config;ae(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?_I(e,c8):`https://${n.config.authDomain}/${a8}`,r={apiKey:e.apiKey,appName:n.name,v:Zi},i=u8.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ia(r).slice(1)}`}async function h8(n){let e=await o8(n),t=Ar().gapi;return ae(t,n,"internal-error"),e.open({where:document.body,url:d8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l8,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=ar(n,"network-request-failed"),a=Ar().setTimeout(()=>{o(s)},s8.get());function c(){Ar().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})}))}var f8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p8=500,m8=600,g8="_blank",v8="http://localhost",$p=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function _8(n,e,t,r=p8,i=m8){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},f8),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Tt().toLowerCase();t&&(a=ik(u)?g8:t),nk(u)&&(e=e||v8,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[y,T])=>`${m}${y}=${T},`,"");if(a6(u)&&a!=="_self")return y8(e||"",a),new $p(null);let p=window.open(e||"",a,d);ae(p,n,"popup-blocked");try{p.focus()}catch{}return new $p(p)}function y8(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var E8="__/auth/handler",I8="emulator/auth/handler",b8=encodeURIComponent("fac");async function qP(n,e,t,r,i,o){ae(n.config.authDomain,n,"auth-domain-config-required"),ae(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Zi,eventId:i};if(e instanceof fu){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",I1(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,p]of Object.entries(o||{}))s[d]=p}if(e instanceof Lp){let d=e.getScopes().filter(p=>p!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=await n._getAppCheckToken(),u=c?`#${b8}=${encodeURIComponent(c)}`:"";return`${w8(n)}?${Ia(a).slice(1)}${u}`}function w8({config:n}){return n.emulator?_I(n,I8):`https://${n.authDomain}/${E8}`}var tI="webStorageSupport",pI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NI,this._completeRedirectFn=Y6,this._overrideRedirectResult=q6}async _openPopup(e,t,r,i){var o;si((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await qP(e,t,r,nI(),i);return _8(e,s,MI())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await qP(e,t,r,nI(),i);return x6(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(si(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await h8(e),r=new fI(e);return t.register("authEvent",i=>(ae(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tI,{type:tI},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[tI];s!==void 0&&t(!!s),xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=t8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lk()||rk()||wI()}},Ik=pI;var WP="@firebase/auth",KP="1.10.8";var mI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function C8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S8(n){ir(new sn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ae(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uk(n)},u=new cI(r,i,o,c);return p6(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ir(new sn("auth-internal",e=>{let t=ka(e.getProvider("auth").getImmediate());return(r=>new mI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),lt(WP,KP,C8(n)),lt(WP,KP,"esm2017")}var D8=300,T8=sE("authIdTokenMaxAge")||D8,YP=null,A8=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>T8)return;let i=t?.token;YP!==i&&(YP=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function FI(n=ns()){let e=ba(n,"auth");if(e.isInitialized())return e.getImmediate();let t=SI(n,{popupRedirectResolver:Ik,persistence:[_k,pk,NI]}),r=sE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=A8(o.toString());PI(t,s,()=>s(t.currentUser)),RI(t,a=>s(a))}}let i=iE("auth");return i&&DI(t,`http://${i}`),t}function x8(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}d6({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ar("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",x8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S8("Browser");var bk="auth",ds=class{constructor(e){return e}},gu=class{constructor(){return Ca(bk)}};var LI=new q("angularfire2.auth-instances");function _G(n,e){let t=eu(bk,n,e);return t&&new ds(t)}function yG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ds(r)}}var EG={provide:gu,deps:[[new wn,LI]]},IG={provide:ds,useFactory:_G,deps:[[new wn,LI],Xr]};function wk(n,...e){return lt("angularfire",Xi.full,"auth"),Yn([IG,EG,{provide:LI,useFactory:yG(n),multi:!0,deps:[Pe,Ue,eo,is,[new wn,Sa],...e]}])}var Ck=ut(OP,!0);var Sk=ut(FI,!0);var Dk=ut(AI,!0,2);var Tk=ut(xI,!0,2);var Ak=ut(OI,!0,2);var xk=ut(kI,!0,2);var Rk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pk={};var ai,VI;(function(){var n;function e(D,b){function C(){}C.prototype=b.prototype,D.D=b.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(S,A,R){for(var w=Array(arguments.length-2),Lr=2;Lr<arguments.length;Lr++)w[Lr-2]=arguments[Lr];return b.prototype[A].apply(S,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,b,C){C||(C=0);var S=Array(16);if(typeof b=="string")for(var A=0;16>A;++A)S[A]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(A=0;16>A;++A)S[A]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=D.g[0],C=D.g[1],A=D.g[2];var R=D.g[3],w=b+(R^C&(A^R))+S[0]+3614090360&4294967295;b=C+(w<<7&4294967295|w>>>25),w=R+(A^b&(C^A))+S[1]+3905402710&4294967295,R=b+(w<<12&4294967295|w>>>20),w=A+(C^R&(b^C))+S[2]+606105819&4294967295,A=R+(w<<17&4294967295|w>>>15),w=C+(b^A&(R^b))+S[3]+3250441966&4294967295,C=A+(w<<22&4294967295|w>>>10),w=b+(R^C&(A^R))+S[4]+4118548399&4294967295,b=C+(w<<7&4294967295|w>>>25),w=R+(A^b&(C^A))+S[5]+1200080426&4294967295,R=b+(w<<12&4294967295|w>>>20),w=A+(C^R&(b^C))+S[6]+2821735955&4294967295,A=R+(w<<17&4294967295|w>>>15),w=C+(b^A&(R^b))+S[7]+4249261313&4294967295,C=A+(w<<22&4294967295|w>>>10),w=b+(R^C&(A^R))+S[8]+1770035416&4294967295,b=C+(w<<7&4294967295|w>>>25),w=R+(A^b&(C^A))+S[9]+2336552879&4294967295,R=b+(w<<12&4294967295|w>>>20),w=A+(C^R&(b^C))+S[10]+4294925233&4294967295,A=R+(w<<17&4294967295|w>>>15),w=C+(b^A&(R^b))+S[11]+2304563134&4294967295,C=A+(w<<22&4294967295|w>>>10),w=b+(R^C&(A^R))+S[12]+1804603682&4294967295,b=C+(w<<7&4294967295|w>>>25),w=R+(A^b&(C^A))+S[13]+4254626195&4294967295,R=b+(w<<12&4294967295|w>>>20),w=A+(C^R&(b^C))+S[14]+2792965006&4294967295,A=R+(w<<17&4294967295|w>>>15),w=C+(b^A&(R^b))+S[15]+1236535329&4294967295,C=A+(w<<22&4294967295|w>>>10),w=b+(A^R&(C^A))+S[1]+4129170786&4294967295,b=C+(w<<5&4294967295|w>>>27),w=R+(C^A&(b^C))+S[6]+3225465664&4294967295,R=b+(w<<9&4294967295|w>>>23),w=A+(b^C&(R^b))+S[11]+643717713&4294967295,A=R+(w<<14&4294967295|w>>>18),w=C+(R^b&(A^R))+S[0]+3921069994&4294967295,C=A+(w<<20&4294967295|w>>>12),w=b+(A^R&(C^A))+S[5]+3593408605&4294967295,b=C+(w<<5&4294967295|w>>>27),w=R+(C^A&(b^C))+S[10]+38016083&4294967295,R=b+(w<<9&4294967295|w>>>23),w=A+(b^C&(R^b))+S[15]+3634488961&4294967295,A=R+(w<<14&4294967295|w>>>18),w=C+(R^b&(A^R))+S[4]+3889429448&4294967295,C=A+(w<<20&4294967295|w>>>12),w=b+(A^R&(C^A))+S[9]+568446438&4294967295,b=C+(w<<5&4294967295|w>>>27),w=R+(C^A&(b^C))+S[14]+3275163606&4294967295,R=b+(w<<9&4294967295|w>>>23),w=A+(b^C&(R^b))+S[3]+4107603335&4294967295,A=R+(w<<14&4294967295|w>>>18),w=C+(R^b&(A^R))+S[8]+1163531501&4294967295,C=A+(w<<20&4294967295|w>>>12),w=b+(A^R&(C^A))+S[13]+2850285829&4294967295,b=C+(w<<5&4294967295|w>>>27),w=R+(C^A&(b^C))+S[2]+4243563512&4294967295,R=b+(w<<9&4294967295|w>>>23),w=A+(b^C&(R^b))+S[7]+1735328473&4294967295,A=R+(w<<14&4294967295|w>>>18),w=C+(R^b&(A^R))+S[12]+2368359562&4294967295,C=A+(w<<20&4294967295|w>>>12),w=b+(C^A^R)+S[5]+4294588738&4294967295,b=C+(w<<4&4294967295|w>>>28),w=R+(b^C^A)+S[8]+2272392833&4294967295,R=b+(w<<11&4294967295|w>>>21),w=A+(R^b^C)+S[11]+1839030562&4294967295,A=R+(w<<16&4294967295|w>>>16),w=C+(A^R^b)+S[14]+4259657740&4294967295,C=A+(w<<23&4294967295|w>>>9),w=b+(C^A^R)+S[1]+2763975236&4294967295,b=C+(w<<4&4294967295|w>>>28),w=R+(b^C^A)+S[4]+1272893353&4294967295,R=b+(w<<11&4294967295|w>>>21),w=A+(R^b^C)+S[7]+4139469664&4294967295,A=R+(w<<16&4294967295|w>>>16),w=C+(A^R^b)+S[10]+3200236656&4294967295,C=A+(w<<23&4294967295|w>>>9),w=b+(C^A^R)+S[13]+681279174&4294967295,b=C+(w<<4&4294967295|w>>>28),w=R+(b^C^A)+S[0]+3936430074&4294967295,R=b+(w<<11&4294967295|w>>>21),w=A+(R^b^C)+S[3]+3572445317&4294967295,A=R+(w<<16&4294967295|w>>>16),w=C+(A^R^b)+S[6]+76029189&4294967295,C=A+(w<<23&4294967295|w>>>9),w=b+(C^A^R)+S[9]+3654602809&4294967295,b=C+(w<<4&4294967295|w>>>28),w=R+(b^C^A)+S[12]+3873151461&4294967295,R=b+(w<<11&4294967295|w>>>21),w=A+(R^b^C)+S[15]+530742520&4294967295,A=R+(w<<16&4294967295|w>>>16),w=C+(A^R^b)+S[2]+3299628645&4294967295,C=A+(w<<23&4294967295|w>>>9),w=b+(A^(C|~R))+S[0]+4096336452&4294967295,b=C+(w<<6&4294967295|w>>>26),w=R+(C^(b|~A))+S[7]+1126891415&4294967295,R=b+(w<<10&4294967295|w>>>22),w=A+(b^(R|~C))+S[14]+2878612391&4294967295,A=R+(w<<15&4294967295|w>>>17),w=C+(R^(A|~b))+S[5]+4237533241&4294967295,C=A+(w<<21&4294967295|w>>>11),w=b+(A^(C|~R))+S[12]+1700485571&4294967295,b=C+(w<<6&4294967295|w>>>26),w=R+(C^(b|~A))+S[3]+2399980690&4294967295,R=b+(w<<10&4294967295|w>>>22),w=A+(b^(R|~C))+S[10]+4293915773&4294967295,A=R+(w<<15&4294967295|w>>>17),w=C+(R^(A|~b))+S[1]+2240044497&4294967295,C=A+(w<<21&4294967295|w>>>11),w=b+(A^(C|~R))+S[8]+1873313359&4294967295,b=C+(w<<6&4294967295|w>>>26),w=R+(C^(b|~A))+S[15]+4264355552&4294967295,R=b+(w<<10&4294967295|w>>>22),w=A+(b^(R|~C))+S[6]+2734768916&4294967295,A=R+(w<<15&4294967295|w>>>17),w=C+(R^(A|~b))+S[13]+1309151649&4294967295,C=A+(w<<21&4294967295|w>>>11),w=b+(A^(C|~R))+S[4]+4149444226&4294967295,b=C+(w<<6&4294967295|w>>>26),w=R+(C^(b|~A))+S[11]+3174756917&4294967295,R=b+(w<<10&4294967295|w>>>22),w=A+(b^(R|~C))+S[2]+718787259&4294967295,A=R+(w<<15&4294967295|w>>>17),w=C+(R^(A|~b))+S[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(A+(w<<21&4294967295|w>>>11))&4294967295,D.g[2]=D.g[2]+A&4294967295,D.g[3]=D.g[3]+R&4294967295}r.prototype.u=function(D,b){b===void 0&&(b=D.length);for(var C=b-this.blockSize,S=this.B,A=this.h,R=0;R<b;){if(A==0)for(;R<=C;)i(this,D,R),R+=this.blockSize;if(typeof D=="string"){for(;R<b;)if(S[A++]=D.charCodeAt(R++),A==this.blockSize){i(this,S),A=0;break}}else for(;R<b;)if(S[A++]=D[R++],A==this.blockSize){i(this,S),A=0;break}}this.h=A,this.o+=b},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;var C=8*this.o;for(b=D.length-8;b<D.length;++b)D[b]=C&255,C/=256;for(this.u(D),D=Array(16),b=C=0;4>b;++b)for(var S=0;32>S;S+=8)D[C++]=this.g[b]>>>S&255;return D};function o(D,b){var C=a;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=b(D)}function s(D,b){this.h=b;for(var C=[],S=!0,A=D.length-1;0<=A;A--){var R=D[A]|0;S&&R==b||(C[A]=R,S=!1)}this.g=C}var a={};function c(D){return-128<=D&&128>D?o(D,function(b){return new s([b|0],0>b?-1:0)}):new s([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return M(u(-D));for(var b=[],C=1,S=0;D>=C;S++)b[S]=D/C|0,C*=4294967296;return new s(b,0)}function d(D,b){if(D.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D.charAt(0)=="-")return M(d(D.substring(1),b));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(b,8)),S=p,A=0;A<D.length;A+=8){var R=Math.min(8,D.length-A),w=parseInt(D.substring(A,A+R),b);8>R?(R=u(Math.pow(b,R)),S=S.j(R).add(u(w))):(S=S.j(C),S=S.add(u(w)))}return S}var p=c(0),m=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(V(this))return-M(this).m();for(var D=0,b=1,C=0;C<this.g.length;C++){var S=this.i(C);D+=(0<=S?S:4294967296+S)*b,b*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(T(this))return"0";if(V(this))return"-"+M(this).toString(D);for(var b=u(Math.pow(D,6)),C=this,S="";;){var A=Se(C,b).g;C=j(C,A.j(b));var R=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=A,T(C))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function T(D){if(D.h!=0)return!1;for(var b=0;b<D.g.length;b++)if(D.g[b]!=0)return!1;return!0}function V(D){return D.h==-1}n.l=function(D){return D=j(this,D),V(D)?-1:T(D)?0:1};function M(D){for(var b=D.g.length,C=[],S=0;S<b;S++)C[S]=~D.g[S];return new s(C,~D.h).add(m)}n.abs=function(){return V(this)?M(this):this},n.add=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],S=0,A=0;A<=b;A++){var R=S+(this.i(A)&65535)+(D.i(A)&65535),w=(R>>>16)+(this.i(A)>>>16)+(D.i(A)>>>16);S=w>>>16,R&=65535,w&=65535,C[A]=w<<16|R}return new s(C,C[C.length-1]&-2147483648?-1:0)};function j(D,b){return D.add(M(b))}n.j=function(D){if(T(this)||T(D))return p;if(V(this))return V(D)?M(this).j(M(D)):M(M(this).j(D));if(V(D))return M(this.j(M(D)));if(0>this.l(y)&&0>D.l(y))return u(this.m()*D.m());for(var b=this.g.length+D.g.length,C=[],S=0;S<2*b;S++)C[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<D.g.length;A++){var R=this.i(S)>>>16,w=this.i(S)&65535,Lr=D.i(A)>>>16,Sc=D.i(A)&65535;C[2*S+2*A]+=w*Sc,ee(C,2*S+2*A),C[2*S+2*A+1]+=R*Sc,ee(C,2*S+2*A+1),C[2*S+2*A+1]+=w*Lr,ee(C,2*S+2*A+1),C[2*S+2*A+2]+=R*Lr,ee(C,2*S+2*A+2)}for(S=0;S<b;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=b;S<2*b;S++)C[S]=0;return new s(C,0)};function ee(D,b){for(;(D[b]&65535)!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function oe(D,b){this.g=D,this.h=b}function Se(D,b){if(T(b))throw Error("division by zero");if(T(D))return new oe(p,p);if(V(D))return b=Se(M(D),b),new oe(M(b.g),M(b.h));if(V(b))return b=Se(D,M(b)),new oe(M(b.g),b.h);if(30<D.g.length){if(V(D)||V(b))throw Error("slowDivide_ only works with positive integers.");for(var C=m,S=b;0>=S.l(D);)C=ht(C),S=ht(S);var A=Ve(C,1),R=Ve(S,1);for(S=Ve(S,2),C=Ve(C,2);!T(S);){var w=R.add(S);0>=w.l(D)&&(A=A.add(C),R=w),S=Ve(S,1),C=Ve(C,1)}return b=j(D,A.j(b)),new oe(A,b)}for(A=p;0<=D.l(b);){for(C=Math.max(1,Math.floor(D.m()/b.m())),S=Math.ceil(Math.log(C)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=u(C),w=R.j(b);V(w)||0<w.l(D);)C-=S,R=u(C),w=R.j(b);T(R)&&(R=m),A=A.add(R),D=j(D,w)}return new oe(A,D)}n.A=function(D){return Se(this,D).h},n.and=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],S=0;S<b;S++)C[S]=this.i(S)&D.i(S);return new s(C,this.h&D.h)},n.or=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],S=0;S<b;S++)C[S]=this.i(S)|D.i(S);return new s(C,this.h|D.h)},n.xor=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],S=0;S<b;S++)C[S]=this.i(S)^D.i(S);return new s(C,this.h^D.h)};function ht(D){for(var b=D.g.length+1,C=[],S=0;S<b;S++)C[S]=D.i(S)<<1|D.i(S-1)>>>31;return new s(C,D.h)}function Ve(D,b){var C=b>>5;b%=32;for(var S=D.g.length-C,A=[],R=0;R<S;R++)A[R]=0<b?D.i(R+C)>>>b|D.i(R+C+1)<<32-b:D.i(R+C);return new s(A,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VI=Pk.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,ai=Pk.Integer=s}).apply(typeof Rk<"u"?Rk:typeof self<"u"?self:typeof window<"u"?window:{});var Gp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ci={};var UI,wG,Na,jI,vu,zp,BI,$I,HI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,f){return l==Array.prototype||l==Object.prototype||(l[h]=f.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gp=="object"&&Gp];for(var h=0;h<l.length;++h){var f=l[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var f=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var x=l[_];if(!(x in f))break e;f=f[x]}l=l[l.length-1],_=f[l],h=h(_),h!=_&&h!=null&&e(f,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var f=0,_=!1,x={next:function(){if(!_&&f<l.length){var k=f++;return{value:h(k,l[k]),done:!1}}return _=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,f){return f})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,f){return l.call.apply(l.bind,arguments)}function p(l,h,f){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,_),l.apply(h,x)}}return function(){return l.apply(h,arguments)}}function m(l,h,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function y(l,h){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function T(l,h){function f(){}f.prototype=h.prototype,l.aa=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(_,x,k){for(var B=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)B[Ge-2]=arguments[Ge];return h.prototype[x].apply(_,B)}}function V(l){let h=l.length;if(0<h){let f=Array(h);for(let _=0;_<h;_++)f[_]=l[_];return f}return[]}function M(l,h){for(let f=1;f<arguments.length;f++){let _=arguments[f];if(c(_)){let x=l.length||0,k=_.length||0;l.length=x+k;for(let B=0;B<k;B++)l[x+B]=_[B]}else l.push(_)}}class j{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function ee(l){return/^[\s\xa0]*$/.test(l)}function oe(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function Se(l){return Se[" "](l),l}Se[" "]=function(){};var ht=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function Ve(l,h,f){for(let _ in l)h.call(f,l[_],_,l)}function D(l,h){for(let f in l)h.call(void 0,l[f],f,l)}function b(l){let h={};for(let f in l)h[f]=l[f];return h}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let f,_;for(let x=1;x<arguments.length;x++){_=arguments[x];for(f in _)l[f]=_[f];for(let k=0;k<C.length;k++)f=C[k],Object.prototype.hasOwnProperty.call(_,f)&&(l[f]=_[f])}}function A(l){var h=1;l=l.split(":");let f=[];for(;0<h&&l.length;)f.push(l.shift()),h--;return l.length&&f.push(l.join(":")),f}function R(l){a.setTimeout(()=>{throw l},0)}function w(){var l=Fg;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Lr{constructor(){this.h=this.g=null}add(h,f){let _=Sc.get();_.set(h,f),this.h?this.h.next=_:this.g=_,this.h=_}}var Sc=new j(()=>new _L,l=>l.reset());class _L{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Dc,Tc=!1,Fg=new Lr,gS=()=>{let l=a.Promise.resolve(void 0);Dc=()=>{l.then(yL)}};var yL=()=>{for(var l;l=w();){try{l.h.call(l.g)}catch(f){R(f)}var h=Sc;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Tc=!1};function yi(){this.s=this.s,this.C=this.C}yi.prototype.s=!1,yi.prototype.ma=function(){this.s||(this.s=!0,this.N())},yi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function jt(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}jt.prototype.h=function(){this.defaultPrevented=!0};var EL=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let f=()=>{};a.addEventListener("test",f,h),a.removeEventListener("test",f,h)}catch{}return l})();function Ac(l,h){if(jt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(ht){e:{try{Se(h.nodeName);var x=!0;break e}catch{}x=!1}x||(h=null)}}else f=="mouseover"?h=l.fromElement:f=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:IL[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ac.aa.h.call(this)}}T(Ac,jt);var IL={2:"touch",3:"pen",4:"mouse"};Ac.prototype.h=function(){Ac.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var xc="closure_listenable_"+(1e6*Math.random()|0),bL=0;function wL(l,h,f,_,x){this.listener=l,this.proxy=null,this.src=h,this.type=f,this.capture=!!_,this.ha=x,this.key=++bL,this.da=this.fa=!1}function bd(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function wd(l){this.src=l,this.g={},this.h=0}wd.prototype.add=function(l,h,f,_,x){var k=l.toString();l=this.g[k],l||(l=this.g[k]=[],this.h++);var B=Vg(l,h,_,x);return-1<B?(h=l[B],f||(h.fa=!1)):(h=new wL(h,this.src,k,!!_,x),h.fa=f,l.push(h)),h};function Lg(l,h){var f=h.type;if(f in l.g){var _=l.g[f],x=Array.prototype.indexOf.call(_,h,void 0),k;(k=0<=x)&&Array.prototype.splice.call(_,x,1),k&&(bd(h),l.g[f].length==0&&(delete l.g[f],l.h--))}}function Vg(l,h,f,_){for(var x=0;x<l.length;++x){var k=l[x];if(!k.da&&k.listener==h&&k.capture==!!f&&k.ha==_)return x}return-1}var Ug="closure_lm_"+(1e6*Math.random()|0),jg={};function vS(l,h,f,_,x){if(_&&_.once)return yS(l,h,f,_,x);if(Array.isArray(h)){for(var k=0;k<h.length;k++)vS(l,h[k],f,_,x);return null}return f=Gg(f),l&&l[xc]?l.K(h,f,u(_)?!!_.capture:!!_,x):_S(l,h,f,!1,_,x)}function _S(l,h,f,_,x,k){if(!h)throw Error("Invalid event type");var B=u(x)?!!x.capture:!!x,Ge=$g(l);if(Ge||(l[Ug]=Ge=new wd(l)),f=Ge.add(h,f,_,B,k),f.proxy)return f;if(_=CL(),f.proxy=_,_.src=l,_.listener=f,l.addEventListener)EL||(x=B),x===void 0&&(x=!1),l.addEventListener(h.toString(),_,x);else if(l.attachEvent)l.attachEvent(IS(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function CL(){function l(f){return h.call(l.src,l.listener,f)}let h=SL;return l}function yS(l,h,f,_,x){if(Array.isArray(h)){for(var k=0;k<h.length;k++)yS(l,h[k],f,_,x);return null}return f=Gg(f),l&&l[xc]?l.L(h,f,u(_)?!!_.capture:!!_,x):_S(l,h,f,!0,_,x)}function ES(l,h,f,_,x){if(Array.isArray(h))for(var k=0;k<h.length;k++)ES(l,h[k],f,_,x);else _=u(_)?!!_.capture:!!_,f=Gg(f),l&&l[xc]?(l=l.i,h=String(h).toString(),h in l.g&&(k=l.g[h],f=Vg(k,f,_,x),-1<f&&(bd(k[f]),Array.prototype.splice.call(k,f,1),k.length==0&&(delete l.g[h],l.h--)))):l&&(l=$g(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Vg(h,f,_,x)),(f=-1<l?h[l]:null)&&Bg(f))}function Bg(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[xc])Lg(h.i,l);else{var f=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(f,_,l.capture):h.detachEvent?h.detachEvent(IS(f),_):h.addListener&&h.removeListener&&h.removeListener(_),(f=$g(h))?(Lg(f,l),f.h==0&&(f.src=null,h[Ug]=null)):bd(l)}}}function IS(l){return l in jg?jg[l]:jg[l]="on"+l}function SL(l,h){if(l.da)l=!0;else{h=new Ac(h,this);var f=l.listener,_=l.ha||l.src;l.fa&&Bg(l),l=f.call(_,h)}return l}function $g(l){return l=l[Ug],l instanceof wd?l:null}var Hg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gg(l){return typeof l=="function"?l:(l[Hg]||(l[Hg]=function(h){return l.handleEvent(h)}),l[Hg])}function Bt(){yi.call(this),this.i=new wd(this),this.M=this,this.F=null}T(Bt,yi),Bt.prototype[xc]=!0,Bt.prototype.removeEventListener=function(l,h,f,_){ES(this,l,h,f,_)};function Qt(l,h){var f,_=l.F;if(_)for(f=[];_;_=_.F)f.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new jt(h,l);else if(h instanceof jt)h.target=h.target||l;else{var x=h;h=new jt(_,l),S(h,x)}if(x=!0,f)for(var k=f.length-1;0<=k;k--){var B=h.g=f[k];x=Cd(B,_,!0,h)&&x}if(B=h.g=l,x=Cd(B,_,!0,h)&&x,x=Cd(B,_,!1,h)&&x,f)for(k=0;k<f.length;k++)B=h.g=f[k],x=Cd(B,_,!1,h)&&x}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var f=l.g[h],_=0;_<f.length;_++)bd(f[_]);delete l.g[h],l.h--}}this.F=null},Bt.prototype.K=function(l,h,f,_){return this.i.add(String(l),h,!1,f,_)},Bt.prototype.L=function(l,h,f,_){return this.i.add(String(l),h,!0,f,_)};function Cd(l,h,f,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var x=!0,k=0;k<h.length;++k){var B=h[k];if(B&&!B.da&&B.capture==f){var Ge=B.listener,kt=B.ha||B.src;B.fa&&Lg(l.i,B),x=Ge.call(kt,_)!==!1&&x}}return x&&!_.defaultPrevented}function bS(l,h,f){if(typeof l=="function")f&&(l=m(l,f));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function wS(l){l.g=bS(()=>{l.g=null,l.i&&(l.i=!1,wS(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class DL extends yi{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:wS(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rc(l){yi.call(this),this.h=l,this.g={}}T(Rc,yi);var CS=[];function SS(l){Ve(l.g,function(h,f){this.g.hasOwnProperty(f)&&Bg(h)},l),l.g={}}Rc.prototype.N=function(){Rc.aa.N.call(this),SS(this)},Rc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zg=a.JSON.stringify,TL=a.JSON.parse,AL=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function qg(){}qg.prototype.h=null;function DS(l){return l.h||(l.h=l.i())}function TS(){}var Pc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wg(){jt.call(this,"d")}T(Wg,jt);function Kg(){jt.call(this,"c")}T(Kg,jt);var bo={},AS=null;function Sd(){return AS=AS||new Bt}bo.La="serverreachability";function xS(l){jt.call(this,bo.La,l)}T(xS,jt);function kc(l){let h=Sd();Qt(h,new xS(h))}bo.STAT_EVENT="statevent";function RS(l,h){jt.call(this,bo.STAT_EVENT,l),this.stat=h}T(RS,jt);function Jt(l){let h=Sd();Qt(h,new RS(h,l))}bo.Ma="timingevent";function PS(l,h){jt.call(this,bo.Ma,l),this.size=h}T(PS,jt);function Nc(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Mc(){this.g=!0}Mc.prototype.xa=function(){this.g=!1};function xL(l,h,f,_,x,k){l.info(function(){if(l.g)if(k)for(var B="",Ge=k.split("&"),kt=0;kt<Ge.length;kt++){var ke=Ge[kt].split("=");if(1<ke.length){var $t=ke[0];ke=ke[1];var Ht=$t.split("_");B=2<=Ht.length&&Ht[1]=="type"?B+($t+"="+ke+"&"):B+($t+"=redacted&")}}else B=null;else B=k;return"XMLHTTP REQ ("+_+") [attempt "+x+"]: "+h+`
`+f+`
`+B})}function RL(l,h,f,_,x,k,B){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+x+"]: "+h+`
`+f+`
`+k+" "+B})}function Ps(l,h,f,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+kL(l,f)+(_?" "+_:"")})}function PL(l,h){l.info(function(){return"TIMEOUT: "+h})}Mc.prototype.info=function(){};function kL(l,h){if(!l.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var _=f[l];if(!(2>_.length)){var x=_[1];if(Array.isArray(x)&&!(1>x.length)){var k=x[0];if(k!="noop"&&k!="stop"&&k!="close")for(var B=1;B<x.length;B++)x[B]=""}}}}return zg(f)}catch{return h}}var Dd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yg;function Td(){}T(Td,qg),Td.prototype.g=function(){return new XMLHttpRequest},Td.prototype.i=function(){return{}},Yg=new Td;function Ei(l,h,f,_){this.j=l,this.i=h,this.l=f,this.R=_||1,this.U=new Rc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new NS}function NS(){this.i=null,this.g="",this.h=!1}var MS={},Qg={};function Jg(l,h,f){l.L=1,l.v=Pd(Vr(h)),l.m=f,l.P=!0,OS(l,null)}function OS(l,h){l.F=Date.now(),Ad(l),l.A=Vr(l.v);var f=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),YS(f.i,"t",_),l.C=0,f=l.j.J,l.h=new NS,l.g=fD(l.j,f?h:null,!l.m),0<l.O&&(l.M=new DL(m(l.Y,l,l.g),l.O)),h=l.U,f=l.g,_=l.ca;var x="readystatechange";Array.isArray(x)||(x&&(CS[0]=x.toString()),x=CS);for(var k=0;k<x.length;k++){var B=vS(f,x[k],_||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.H?b(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),kc(),xL(l.i,l.u,l.A,l.l,l.R,l.m)}Ei.prototype.ca=function(l){l=l.target;let h=this.M;h&&Ur(l)==3?h.j():this.Y(l)},Ei.prototype.Y=function(l){try{if(l==this.g)e:{let Ht=Ur(this.g);var h=this.g.Ba();let Ms=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||nD(this.g)))){this.J||Ht!=4||h==7||(h==8||0>=Ms?kc(3):kc(2)),Zg(this);var f=this.g.Z();this.X=f;t:if(FS(this)){var _=nD(this.g);l="";var x=_.length,k=Ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wo(this),Oc(this);var B="";break t}this.h.i=new a.TextDecoder}for(h=0;h<x;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(k&&h==x-1)});_.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,RL(this.i,this.u,this.A,this.l,this.R,Ht,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,kt=this.g;if((Ge=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Ge)){var ke=Ge;break t}}ke=null}if(f=ke)Ps(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xg(this,f);else{this.o=!1,this.s=3,Jt(12),wo(this),Oc(this);break e}}if(this.P){f=!0;let qn;for(;!this.J&&this.C<B.length;)if(qn=NL(this,B),qn==Qg){Ht==4&&(this.s=4,Jt(14),f=!1),Ps(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==MS){this.s=4,Jt(15),Ps(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else Ps(this.i,this.l,qn,null),Xg(this,qn);if(FS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||B.length!=0||this.h.h||(this.s=1,Jt(16),f=!1),this.o=this.o&&f,!f)Ps(this.i,this.l,B,"[Invalid Chunked Response]"),wo(this),Oc(this);else if(0<B.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),ov($t),$t.M=!0,Jt(11))}}else Ps(this.i,this.l,B,null),Xg(this,B);Ht==4&&wo(this),this.o&&!this.J&&(Ht==4?lD(this.j,this):(this.o=!1,Ad(this)))}else QL(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),wo(this),Oc(this)}}}catch{}finally{}};function FS(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function NL(l,h){var f=l.C,_=h.indexOf(`
`,f);return _==-1?Qg:(f=Number(h.substring(f,_)),isNaN(f)?MS:(_+=1,_+f>h.length?Qg:(h=h.slice(_,_+f),l.C=_+f,h)))}Ei.prototype.cancel=function(){this.J=!0,wo(this)};function Ad(l){l.S=Date.now()+l.I,LS(l,l.I)}function LS(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Nc(m(l.ba,l),h)}function Zg(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ei.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(PL(this.i,this.A),this.L!=2&&(kc(),Jt(17)),wo(this),this.s=2,Oc(this)):LS(this,this.S-l)};function Oc(l){l.j.G==0||l.J||lD(l.j,l)}function wo(l){Zg(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,SS(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Xg(l,h){try{var f=l.j;if(f.G!=0&&(f.g==l||ev(f.h,l))){if(!l.K&&ev(f.h,l)&&f.G==3){try{var _=f.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var x=_;if(x[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)Fd(f),Md(f);else break e;iv(f),Jt(18)}}else f.za=x[1],0<f.za-f.T&&37500>x[2]&&f.F&&f.v==0&&!f.C&&(f.C=Nc(m(f.Za,f),6e3));if(1>=jS(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else So(f,11)}else if((l.K||f.g==l)&&Fd(f),!ee(h))for(x=f.Da.g.parse(h),h=0;h<x.length;h++){let ke=x[h];if(f.T=ke[0],ke=ke[1],f.G==2)if(ke[0]=="c"){f.K=ke[1],f.ia=ke[2];let $t=ke[3];$t!=null&&(f.la=$t,f.j.info("VER="+f.la));let Ht=ke[4];Ht!=null&&(f.Aa=Ht,f.j.info("SVER="+f.Aa));let Ms=ke[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(_=1.5*Ms,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;let qn=l.g;if(qn){let Vd=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vd){var k=_.h;k.g||Vd.indexOf("spdy")==-1&&Vd.indexOf("quic")==-1&&Vd.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(tv(k,k.h),k.h=null))}if(_.D){let sv=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;sv&&(_.ya=sv,Qe(_.I,_.D,sv))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var B=l;if(_.qa=hD(_,_.J?_.ia:null,_.W),B.K){BS(_.h,B);var Ge=B,kt=_.L;kt&&(Ge.I=kt),Ge.B&&(Zg(Ge),Ad(Ge)),_.g=B}else aD(_);0<f.i.length&&Od(f)}else ke[0]!="stop"&&ke[0]!="close"||So(f,7);else f.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?So(f,7):rv(f):ke[0]!="noop"&&f.l&&f.l.ta(ke),f.v=0)}}kc(4)}catch{}}var ML=class{constructor(l,h){this.g=l,this.map=h}};function VS(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function US(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function jS(l){return l.h?1:l.g?l.g.size:0}function ev(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function tv(l,h){l.g?l.g.add(h):l.h=h}function BS(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}VS.prototype.cancel=function(){if(this.i=$S(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function $S(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let f of l.g.values())h=h.concat(f.D);return h}return V(l.i)}function OL(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],f=l.length,_=0;_<f;_++)h.push(l[_]);return h}h=[],f=0;for(_ in l)h[f++]=l[_];return h}function FL(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var f=0;f<l;f++)h.push(f);return h}h=[],f=0;for(let _ in l)h[f++]=_;return h}}}function HS(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var f=FL(l),_=OL(l),x=_.length,k=0;k<x;k++)h.call(void 0,_[k],f&&f[k],l)}var GS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LL(l,h){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var _=l[f].indexOf("="),x=null;if(0<=_){var k=l[f].substring(0,_);x=l[f].substring(_+1)}else k=l[f];h(k,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Co(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Co){this.h=l.h,xd(this,l.j),this.o=l.o,this.g=l.g,Rd(this,l.s),this.l=l.l;var h=l.i,f=new Vc;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),zS(this,f),this.m=l.m}else l&&(h=String(l).match(GS))?(this.h=!1,xd(this,h[1]||"",!0),this.o=Fc(h[2]||""),this.g=Fc(h[3]||"",!0),Rd(this,h[4]),this.l=Fc(h[5]||"",!0),zS(this,h[6]||"",!0),this.m=Fc(h[7]||"")):(this.h=!1,this.i=new Vc(null,this.h))}Co.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Lc(h,qS,!0),":");var f=this.g;return(f||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Lc(h,qS,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(Lc(f,f.charAt(0)=="/"?jL:UL,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",Lc(f,$L)),l.join("")};function Vr(l){return new Co(l)}function xd(l,h,f){l.j=f?Fc(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Rd(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function zS(l,h,f){h instanceof Vc?(l.i=h,HL(l.i,l.h)):(f||(h=Lc(h,BL)),l.i=new Vc(h,l.h))}function Qe(l,h,f){l.i.set(h,f)}function Pd(l){return Qe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Fc(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Lc(l,h,f){return typeof l=="string"?(l=encodeURI(l).replace(h,VL),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function VL(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var qS=/[#\/\?@]/g,UL=/[#\?:]/g,jL=/[#\?]/g,BL=/[#\?@]/g,$L=/#/g;function Vc(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Ii(l){l.g||(l.g=new Map,l.h=0,l.i&&LL(l.i,function(h,f){l.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}n=Vc.prototype,n.add=function(l,h){Ii(this),this.i=null,l=ks(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(h),this.h+=1,this};function WS(l,h){Ii(l),h=ks(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function KS(l,h){return Ii(l),h=ks(l,h),l.g.has(h)}n.forEach=function(l,h){Ii(this),this.g.forEach(function(f,_){f.forEach(function(x){l.call(h,x,_,this)},this)},this)},n.na=function(){Ii(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let _=0;_<h.length;_++){let x=l[_];for(let k=0;k<x.length;k++)f.push(h[_])}return f},n.V=function(l){Ii(this);let h=[];if(typeof l=="string")KS(this,l)&&(h=h.concat(this.g.get(ks(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)h=h.concat(l[f])}return h},n.set=function(l,h){return Ii(this),this.i=null,l=ks(this,l),KS(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function YS(l,h,f){WS(l,h),0<f.length&&(l.i=null,l.g.set(ks(l,h),V(f)),l.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var _=h[f];let k=encodeURIComponent(String(_)),B=this.V(_);for(_=0;_<B.length;_++){var x=k;B[_]!==""&&(x+="="+encodeURIComponent(String(B[_]))),l.push(x)}}return this.i=l.join("&")};function ks(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function HL(l,h){h&&!l.j&&(Ii(l),l.i=null,l.g.forEach(function(f,_){var x=_.toLowerCase();_!=x&&(WS(this,_),YS(this,x,f))},l)),l.j=h}function GL(l,h){let f=new Mc;if(a.Image){let _=new Image;_.onload=y(bi,f,"TestLoadImage: loaded",!0,h,_),_.onerror=y(bi,f,"TestLoadImage: error",!1,h,_),_.onabort=y(bi,f,"TestLoadImage: abort",!1,h,_),_.ontimeout=y(bi,f,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function zL(l,h){let f=new Mc,_=new AbortController,x=setTimeout(()=>{_.abort(),bi(f,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(k=>{clearTimeout(x),k.ok?bi(f,"TestPingServer: ok",!0,h):bi(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(x),bi(f,"TestPingServer: error",!1,h)})}function bi(l,h,f,_,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),_(f)}catch{}}function qL(){this.g=new AL}function WL(l,h,f){let _=f||"";try{HS(l,function(x,k){let B=x;u(x)&&(B=zg(x)),h.push(_+k+"="+encodeURIComponent(B))})}catch(x){throw h.push(_+"type="+encodeURIComponent("_badmap")),x}}function Uc(l){this.l=l.Ub||null,this.j=l.eb||!1}T(Uc,qg),Uc.prototype.g=function(){return new kd(this.l,this.j)},Uc.prototype.i=(function(l){return function(){return l}})({});function kd(l,h){Bt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(kd,Bt),n=kd.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Bc(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jc(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Bc(this)),this.g&&(this.readyState=3,Bc(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;QS(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function QS(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?jc(this):Bc(this),this.readyState==3&&QS(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,jc(this))},n.Qa=function(l){this.g&&(this.response=l,jc(this))},n.ga=function(){this.g&&jc(this)};function jc(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Bc(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=h.next();return l.join(`\r
`)};function Bc(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(kd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function JS(l){let h="";return Ve(l,function(f,_){h+=_,h+=":",h+=f,h+=`\r
`}),h}function nv(l,h,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=JS(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):Qe(l,h,f))}function it(l){Bt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(it,Bt);var KL=/^https?$/i,YL=["POST","PUT"];n=it.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yg.g(),this.v=this.o?DS(this.o):DS(Yg),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(k){ZS(this,k);return}if(l=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var x in _)f.set(x,_[x]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let k of _.keys())f.set(k,_.get(k));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(k=>k.toLowerCase()=="content-type"),x=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(YL,h,void 0))||_||x||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,B]of f)this.g.setRequestHeader(k,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tD(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){ZS(this,k)}};function ZS(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,XS(l),Nd(l)}function XS(l){l.A||(l.A=!0,Qt(l,"complete"),Qt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Qt(this,"complete"),Qt(this,"abort"),Nd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nd(this,!0)),it.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?eD(this):this.bb())},n.bb=function(){eD(this)};function eD(l){if(l.h&&typeof s<"u"&&(!l.v[1]||Ur(l)!=4||l.Z()!=2)){if(l.u&&Ur(l)==4)bS(l.Ea,0,l);else if(Qt(l,"readystatechange"),Ur(l)==4){l.h=!1;try{let B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var _;if(_=B===0){var x=String(l.D).match(GS)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),_=!KL.test(x?x.toLowerCase():"")}f=_}if(f)Qt(l,"complete"),Qt(l,"success");else{l.m=6;try{var k=2<Ur(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",XS(l)}}finally{Nd(l)}}}}function Nd(l,h){if(l.g){tD(l);let f=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Qt(l,"ready");try{f.onreadystatechange=_}catch{}}}function tD(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Ur(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Ur(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),TL(h)}};function nD(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function QL(l){let h={};l=(l.g&&2<=Ur(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(ee(l[_]))continue;var f=A(l[_]);let x=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let k=h[x]||[];h[x]=k,k.push(f)}D(h,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $c(l,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||h}function rD(l){this.Aa=0,this.i=[],this.j=new Mc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$c("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$c("baseRetryDelayMs",5e3,l),this.cb=$c("retryDelaySeedMs",1e4,l),this.Wa=$c("forwardChannelMaxRetries",2,l),this.wa=$c("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new VS(l&&l.concurrentRequestLimit),this.Da=new qL,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=rD.prototype,n.la=8,n.G=1,n.connect=function(l,h,f,_){Jt(0),this.W=l,this.H=h||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=hD(this,null,this.W),Od(this)};function rv(l){if(iD(l),l.G==3){var h=l.U++,f=Vr(l.I);if(Qe(f,"SID",l.K),Qe(f,"RID",h),Qe(f,"TYPE","terminate"),Hc(l,f),h=new Ei(l,l.j,h),h.L=2,h.v=Pd(Vr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=h.v,f=!0),f||(h.g=fD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ad(h)}dD(l)}function Md(l){l.g&&(ov(l),l.g.cancel(),l.g=null)}function iD(l){Md(l),l.u&&(a.clearTimeout(l.u),l.u=null),Fd(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Od(l){if(!US(l.h)&&!l.s){l.s=!0;var h=l.Ga;Dc||gS(),Tc||(Dc(),Tc=!0),Fg.add(h,l),l.B=0}}function JL(l,h){return jS(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Nc(m(l.Ga,l,h),uD(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let x=new Ei(this,this.j,l),k=this.o;if(this.S&&(k?(k=b(k),S(k,this.S)):k=this.S),this.m!==null||this.O||(x.H=k,k=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=sD(this,x,h),f=Vr(this.I),Qe(f,"RID",l),Qe(f,"CVER",22),this.D&&Qe(f,"X-HTTP-Session-Id",this.D),Hc(this,f),k&&(this.O?h="headers="+encodeURIComponent(String(JS(k)))+"&"+h:this.m&&nv(f,this.m,k)),tv(this.h,x),this.Ua&&Qe(f,"TYPE","init"),this.P?(Qe(f,"$req",h),Qe(f,"SID","null"),x.T=!0,Jg(x,f,null)):Jg(x,f,h),this.G=2}}else this.G==3&&(l?oD(this,l):this.i.length==0||US(this.h)||oD(this))};function oD(l,h){var f;h?f=h.l:f=l.U++;let _=Vr(l.I);Qe(_,"SID",l.K),Qe(_,"RID",f),Qe(_,"AID",l.T),Hc(l,_),l.m&&l.o&&nv(_,l.m,l.o),f=new Ei(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),h&&(l.i=h.D.concat(l.i)),h=sD(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),tv(l.h,f),Jg(f,_,h)}function Hc(l,h){l.H&&Ve(l.H,function(f,_){Qe(h,_,f)}),l.l&&HS({},function(f,_){Qe(h,_,f)})}function sD(l,h,f){f=Math.min(l.i.length,f);var _=l.l?m(l.l.Na,l.l,l):null;e:{var x=l.i;let k=-1;for(;;){let B=["count="+f];k==-1?0<f?(k=x[0].g,B.push("ofs="+k)):k=0:B.push("ofs="+k);let Ge=!0;for(let kt=0;kt<f;kt++){let ke=x[kt].g,$t=x[kt].map;if(ke-=k,0>ke)k=Math.max(0,x[kt].g-100),Ge=!1;else try{WL($t,B,"req"+ke+"_")}catch{_&&_($t)}}if(Ge){_=B.join("&");break e}}}return l=l.i.splice(0,f),h.D=l,_}function aD(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Dc||gS(),Tc||(Dc(),Tc=!0),Fg.add(h,l),l.v=0}}function iv(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Nc(m(l.Fa,l),uD(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,cD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Nc(m(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jt(10),Md(this),cD(this))};function ov(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function cD(l){l.g=new Ei(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Vr(l.qa);Qe(h,"RID","rpc"),Qe(h,"SID",l.K),Qe(h,"AID",l.T),Qe(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Qe(h,"TO",l.ja),Qe(h,"TYPE","xmlhttp"),Hc(l,h),l.m&&l.o&&nv(h,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=Pd(Vr(h)),f.m=null,f.P=!0,OS(f,l)}n.Za=function(){this.C!=null&&(this.C=null,Md(this),iv(this),Jt(19))};function Fd(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function lD(l,h){var f=null;if(l.g==h){Fd(l),ov(l),l.g=null;var _=2}else if(ev(l.h,h))f=h.D,BS(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var x=l.B;_=Sd(),Qt(_,new PS(_,f)),Od(l)}else aD(l);else if(x=h.s,x==3||x==0&&0<h.X||!(_==1&&JL(l,h)||_==2&&iv(l)))switch(f&&0<f.length&&(h=l.h,h.i=h.i.concat(f)),x){case 1:So(l,5);break;case 4:So(l,10);break;case 3:So(l,6);break;default:So(l,2)}}}function uD(l,h){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*h}function So(l,h){if(l.j.info("Error code "+h),h==2){var f=m(l.fb,l),_=l.Xa;let x=!_;_=new Co(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xd(_,"https"),Pd(_),x?GL(_.toString(),f):zL(_.toString(),f)}else Jt(2);l.G=0,l.l&&l.l.sa(h),dD(l),iD(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function dD(l){if(l.G=0,l.ka=[],l.l){let h=$S(l.h);(h.length!=0||l.i.length!=0)&&(M(l.ka,h),M(l.ka,l.i),l.h.i.length=0,V(l.i),l.i.length=0),l.l.ra()}}function hD(l,h,f){var _=f instanceof Co?Vr(f):new Co(f);if(_.g!="")h&&(_.g=h+"."+_.g),Rd(_,_.s);else{var x=a.location;_=x.protocol,h=h?h+"."+x.hostname:x.hostname,x=+x.port;var k=new Co(null);_&&xd(k,_),h&&(k.g=h),x&&Rd(k,x),f&&(k.l=f),_=k}return f=l.D,h=l.ya,f&&h&&Qe(_,f,h),Qe(_,"VER",l.la),Hc(l,_),_}function fD(l,h,f){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new it(new Uc({eb:f})):new it(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pD(){}n=pD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ld(){}Ld.prototype.g=function(l,h){return new yn(l,h)};function yn(l,h){Bt.call(this),this.g=new rD(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!ee(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!ee(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ns(this)}T(yn,Bt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){rv(this.g)},yn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=zg(l),l=f);h.i.push(new ML(h.Ya++,l)),h.G==3&&Od(h)},yn.prototype.N=function(){this.g.l=null,delete this.j,rv(this.g),delete this.g,yn.aa.N.call(this)};function mD(l){Wg.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let f in h){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}T(mD,Wg);function gD(){Kg.call(this),this.status=1}T(gD,Kg);function Ns(l){this.g=l}T(Ns,pD),Ns.prototype.ua=function(){Qt(this.g,"a")},Ns.prototype.ta=function(l){Qt(this.g,new mD(l))},Ns.prototype.sa=function(l){Qt(this.g,new gD)},Ns.prototype.ra=function(){Qt(this.g,"b")},Ld.prototype.createWebChannel=Ld.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,HI=ci.createWebChannelTransport=function(){return new Ld},$I=ci.getStatEventTarget=function(){return Sd()},BI=ci.Event=bo,zp=ci.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dd.NO_ERROR=0,Dd.TIMEOUT=8,Dd.HTTP_ERROR=6,vu=ci.ErrorCode=Dd,kS.COMPLETE="complete",jI=ci.EventType=kS,TS.EventType=Pc,Pc.OPEN="a",Pc.CLOSE="b",Pc.ERROR="c",Pc.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,Na=ci.WebChannel=TS,wG=ci.FetchXmlHttpFactory=Uc,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,UI=ci.XhrIo=it}).apply(typeof Gp<"u"?Gp:typeof self<"u"?self:typeof window<"u"?window:{});var kk="@firebase/firestore",Nk="4.8.0";var At=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");var tc="11.10.0";var ps=new Sr("@firebase/firestore");function Ma(){return ps.logLevel}function J(n,...e){if(ps.logLevel<=we.DEBUG){let t=e.map(Nw);ps.debug(`Firestore (${tc}): ${n}`,...t)}}function ui(n,...e){if(ps.logLevel<=we.ERROR){let t=e.map(Nw);ps.error(`Firestore (${tc}): ${n}`,...t)}}function ho(n,...e){if(ps.logLevel<=we.WARN){let t=e.map(Nw);ps.warn(`Firestore (${tc}): ${n}`,...t)}}function Nw(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function re(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,CN(n,r,t)}function CN(n,e,t){let r=`FIRESTORE (${tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ui(r),new Error(r)}function xe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||CN(e,i,r)}function ue(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends Dn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $n=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Zp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},WI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(At.UNAUTHENTICATED))}shutdown(){}},KI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},YI=class{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xe(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $n,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $n)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new Zp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new At(e)}},QI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},JI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new QI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Xp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ZI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xe(this.o===void 0,3512);let r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,J("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Xp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function CG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function SN(){return new TextEncoder}var Su=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=CG(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function be(n,e){return n<e?-1:n>e?1:0}function XI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return be(r,i);{let o=SN(),s=SG(o.encode(Mk(n,t)),o.encode(Mk(e,t)));return s!==0?s:be(r,i)}}t+=r>65535?2:1}return be(n.length,e.length)}function Mk(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function SG(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return be(n[t],e[t]);return be(n.length,e.length)}function $a(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ok="__name__",em=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&re(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&re(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return be(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):XI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}},Ye=class n extends em{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},DG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,An=class n extends em{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return DG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ok}static keyField(){return new n([Ok])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ie=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ye.fromString(e))}static fromName(e){return new n(Ye.fromString(e).popFirst(5))}static empty(){return new n(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ye(e.slice()))}};function DN(n,e,t){if(!t)throw new H(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TG(n,e,t,r){if(e===!0&&r===!0)throw new H(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Fk(n){if(!ie.isDocumentKey(n))throw new H(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Lk(n){if(ie.isDocumentKey(n))throw new H(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Nm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":re(12329,{type:typeof n})}function di(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Nm(n);throw new H(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AG(n,e){if(e<=0)throw new H(L.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function wt(n,e){let t={typeString:n};return e&&(t.value=e),t}function ju(n,e){if(!TN(n))throw new H(L.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new H(L.INVALID_ARGUMENT,t);return!0}var Vk=-62135596800,Uk=1e6,Ct=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Uk);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vk)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uk}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ju(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Vk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:wt("string",Ct._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};var ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ct(0,0))}static max(){return new n(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Du=-1,eb=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};eb.UNKNOWN_ID=-1;function xG(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new Ct(t+1,0):new Ct(t,r));return new ms(i,ie.empty(),e)}function RG(n){return new ms(n.readTime,n.key,Du)}var ms=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ce.min(),ie.empty(),Du)}static max(){return new n(ce.max(),ie.empty(),Du)}};function PG(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ie.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}var kG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function nc(n){if(n.code!==L.FAILED_PRECONDITION||n.message!==kG)throw n;J("LocalStore","Unexpectedly lost primary lease")}var U=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function NG(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function rc(n){return n.name==="IndexedDbTransactionError"}var Mw=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Ow=-1;function Bu(n){return n==null}function Tu(n){return n===0&&1/n==-1/0}function MG(n){return typeof n=="number"&&Number.isInteger(n)&&!Tu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var AN="";function OG(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jk(e)),e=FG(n.get(t),e);return jk(e)}function FG(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case AN:t+="";break;default:t+=o}}return t}function jk(n){return n+AN+""}var LG="remoteDocuments",xN="owner";var RN="mutationQueues";var PN="mutations";var kN="documentMutations",VG="remoteDocumentsV14";var NN="remoteDocumentGlobal";var MN="targets";var ON="targetDocuments";var FN="targetGlobal",LN="collectionParents";var VN="clientMetadata";var UN="bundles";var jN="namedQueries";var UG="indexConfiguration";var jG="indexState";var BG="indexEntries";var BN="documentOverlays";var $G="globals";var HG=[RN,PN,kN,LG,MN,xN,FN,ON,VN,NN,LN,UN,jN],Ege=[...HG,BN],GG=[RN,PN,kN,VG,MN,xN,FN,ON,VN,NN,LN,UN,jN,BN],zG=GG,qG=[...zG,UG,jG,BG];var Ige=[...qG,$G];function Bk(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $N(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var dt=class n{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Va(this.root,e,this.comparator,!1)}getReverseIterator(){return new Va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Va(this.root,e,this.comparator,!0)}},Va=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}};Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1;Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xt=class n{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tm(this.data.getIterator())}getIteratorFrom(e){return new tm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},tm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Bn=class n{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new n([])}unionWith(e){let t=new xt(An.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var nm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Yt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nm("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Yt.EMPTY_BYTE_STRING=new Yt("");var WG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(n){if(xe(!!n,39018),typeof n=="string"){let e=0,t=WG.exec(n);if(xe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(n.seconds),nanos:tt(n.nanos)}}function tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fi(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}var HN="server_timestamp",GN="__type__",zN="__previous_value__",qN="__local_write_time__";function Fw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[GN])===null||t===void 0?void 0:t.stringValue)===HN}function Mm(n){let e=n.mapValue.fields[zN];return Fw(e)?Mm(e):e}function Au(n){let e=hi(n.mapValue.fields[qN].timestampValue);return new Ct(e.seconds,e.nanos)}var nb=class{constructor(e,t,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},rm="(default)",im=class n{constructor(e,t){this.projectId=e,this.database=t||rm}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===rm}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Lw="__type__",WN="__max__",qp={mapValue:{fields:{__type__:{stringValue:WN}}}},Vw="__vector__",Ha="value";function fo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fw(n)?4:YN(n)?9007199254740991:KN(n)?10:11:re(28295,{value:n})}function kr(n,e){if(n===e)return!0;let t=fo(n);if(t!==fo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Au(n).isEqual(Au(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=hi(i.timestampValue),a=hi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return fi(i.bytesValue).isEqual(fi(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return tt(i.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return tt(i.integerValue)===tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=tt(i.doubleValue),a=tt(o.doubleValue);return s===a?Tu(s)===Tu(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return $a(n.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Bk(s)!==Bk(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!kr(s[c],a[c])))return!1;return!0})(n,e);default:return re(52216,{left:n})}}function xu(n,e){return(n.values||[]).find(t=>kr(t,e))!==void 0}function Ga(n,e){if(n===e)return 0;let t=fo(n),r=fo(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=tt(o.integerValue||o.doubleValue),c=tt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return $k(n.timestampValue,e.timestampValue);case 4:return $k(Au(n),Au(e));case 5:return XI(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=fi(o),c=fi(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=be(a[u],c[u]);if(d!==0)return d}return be(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=be(tt(o.latitude),tt(s.latitude));return a!==0?a:be(tt(o.longitude),tt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Hk(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,u,d;let p=o.fields||{},m=s.fields||{},y=(a=p[Ha])===null||a===void 0?void 0:a.arrayValue,T=(c=m[Ha])===null||c===void 0?void 0:c.arrayValue,V=be(((u=y?.values)===null||u===void 0?void 0:u.length)||0,((d=T?.values)===null||d===void 0?void 0:d.length)||0);return V!==0?V:Hk(y,T)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===qp.mapValue&&s===qp.mapValue)return 0;if(o===qp.mapValue)return 1;if(s===qp.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){let m=XI(c[p],d[p]);if(m!==0)return m;let y=Ga(a[c[p]],u[d[p]]);if(y!==0)return y}return be(c.length,d.length)})(n.mapValue,e.mapValue);default:throw re(23264,{le:t})}}function $k(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);let t=hi(n),r=hi(e),i=be(t.seconds,r.seconds);return i!==0?i:be(t.nanos,r.nanos)}function Hk(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ga(t[i],r[i]);if(o)return o}return be(t.length,r.length)}function za(n){return rb(n)}function rb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=hi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return fi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=rb(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${rb(t.fields[s])}`;return i+"}"})(n.mapValue):re(61005,{value:n})}function Yp(n){switch(fo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Mm(n);return e?16+Yp(e):16;case 5:return 2*n.stringValue.length;case 6:return fi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Yp(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return yo(r.fields,(o,s)=>{i+=o.length+Yp(s)}),i})(n.mapValue);default:throw re(13486,{value:n})}}function Gk(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ib(n){return!!n&&"integerValue"in n}function Uw(n){return!!n&&"arrayValue"in n}function zk(n){return!!n&&"nullValue"in n}function qk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qp(n){return!!n&&"mapValue"in n}function KN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Lw])===null||t===void 0?void 0:t.stringValue)===Vw}function Eu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return yo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Eu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Eu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===WN}var wge={mapValue:{fields:{[Lw]:{stringValue:Vw},[Ha]:{arrayValue:{}}}}};var gn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(t)}setAll(e){let t=An.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Eu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Qp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Eu(this.value))}};function QN(n){let e=[];return yo(n.fields,(t,r)=>{let i=new An([t]);if(Qp(r)){let o=QN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Bn(e)}var Rn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),gn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qa=class{constructor(e,t){this.position=e,this.inclusive=t}};function Wk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ie.comparator(ie.fromName(s.referenceValue),t.key):r=Ga(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kr(n.position[t],e.position[t]))return!1;return!0}var gs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function KG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var om=class{},bt=class n extends om{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sb(e,t,r):t==="array-contains"?new lb(e,r):t==="in"?new ub(e,r):t==="not-in"?new db(e,r):t==="array-contains-any"?new hb(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ab(e,r):new cb(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ga(t,this.value)):t!==null&&fo(this.value)===fo(t)&&this.matchesComparison(Ga(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},cr=class n extends om{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return JN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function JN(n){return n.op==="and"}function ZN(n){return YG(n)&&JN(n)}function YG(n){for(let e of n.filters)if(e instanceof cr)return!1;return!0}function ob(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+za(n.value);if(ZN(n))return n.filters.map(e=>ob(e)).join(",");{let e=n.filters.map(t=>ob(t)).join(",");return`${n.op}(${e})`}}function XN(n,e){return n instanceof bt?(function(r,i){return i instanceof bt&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)})(n,e):n instanceof cr?(function(r,i){return i instanceof cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&XN(s,i.filters[a]),!0):!1})(n,e):void re(19439)}function eM(n){return n instanceof bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${za(t.value)}`})(n):n instanceof cr?(function(t){return t.op.toString()+" {"+t.getFilters().map(eM).join(" ,")+"}"})(n):"Filter"}var sb=class extends bt{constructor(e,t,r){super(e,t,r),this.key=ie.fromName(r.referenceValue)}matches(e){let t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}},ab=class extends bt{constructor(e,t){super(e,"in",t),this.keys=tM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},cb=class extends bt{constructor(e,t){super(e,"not-in",t),this.keys=tM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function tM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ie.fromName(r.referenceValue))}var lb=class extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Uw(t)&&xu(t.arrayValue,this.value)}},ub=class extends bt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&xu(this.value.arrayValue,t)}},db=class extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xu(this.value.arrayValue,t)}},hb=class extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Uw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xu(this.value.arrayValue,r))}};var fb=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function Yk(n,e=null,t=[],r=[],i=null,o=null,s=null){return new fb(n,e,t,r,i,o,s)}function jw(n){let e=ue(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ob(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Bu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>za(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>za(r)).join(",")),e.Pe=t}return e.Pe}function Bw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Kk(n.startAt,e.startAt)&&Kk(n.endAt,e.endAt)}function pb(n){return ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var po=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function QG(n,e,t,r,i,o,s,a){return new po(n,e,t,r,i,o,s,a)}function $w(n){return new po(n)}function Qk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nM(n){return n.collectionGroup!==null}function Iu(n){let e=ue(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xt(An.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new gs(o,r))}),t.has(An.keyField().canonicalString())||e.Te.push(new gs(An.keyField(),r))}return e.Te}function Pr(n){let e=ue(n);return e.Ie||(e.Ie=JG(e,Iu(n))),e.Ie}function JG(n,e){if(n.limitType==="F")return Yk(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new gs(i.field,o)});let t=n.endAt?new qa(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qa(n.startAt.position,n.startAt.inclusive):null;return Yk(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function mb(n,e){let t=n.filters.concat([e]);return new po(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sm(n,e,t){return new po(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Om(n,e){return Bw(Pr(n),Pr(e))&&n.limitType===e.limitType}function rM(n){return`${jw(Pr(n))}|lt:${n.limitType}`}function Oa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>eM(i)).join(", ")}]`),Bu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>za(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>za(i)).join(",")),`Target(${r})`})(Pr(n))}; limitType=${n.limitType})`}function Fm(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ie.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Iu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let u=Wk(s,a,c);return s.inclusive?u<=0:u<0})(r.startAt,Iu(r),i)||r.endAt&&!(function(s,a,c){let u=Wk(s,a,c);return s.inclusive?u>=0:u>0})(r.endAt,Iu(r),i))})(n,e)}function ZG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iM(n){return(e,t)=>{let r=!1;for(let i of Iu(n)){let o=XG(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function XG(n,e,t){let r=n.field.isKeyField()?ie.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Ga(c,u):re(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:n.dir})}}var pi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return $N(this.inner)}size(){return this.innerSize}};var ez=new dt(ie.comparator);function mi(){return ez}var oM=new dt(ie.comparator);function _u(...n){let e=oM;for(let t of n)e=e.insert(t.key,t);return e}function sM(n){let e=oM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function hs(){return bu()}function aM(){return bu()}function bu(){return new pi(n=>n.toString(),(n,e)=>n.isEqual(e))}var tz=new dt(ie.comparator),nz=new xt(ie.comparator);function Ce(...n){let e=nz;for(let t of n)e=e.add(t);return e}var rz=new xt(be);function iz(){return rz}function Hw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tu(e)?"-0":e}}function cM(n){return{integerValue:""+n}}function oz(n,e){return MG(e)?cM(e):Hw(n,e)}var Wa=class{constructor(){this._=void 0}};function sz(n,e,t){return n instanceof Ka?(function(i,o){let s={fields:{[GN]:{stringValue:HN},[qN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Fw(o)&&(o=Mm(o)),o&&(s.fields[zN]=o),{mapValue:s}})(t,e):n instanceof vs?uM(n,e):n instanceof _s?dM(n,e):(function(i,o){let s=lM(i,o),a=Jk(s)+Jk(i.Ee);return ib(s)&&ib(i.Ee)?cM(a):Hw(i.serializer,a)})(n,e)}function az(n,e,t){return n instanceof vs?uM(n,e):n instanceof _s?dM(n,e):t}function lM(n,e){return n instanceof Ya?(function(r){return ib(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ka=class extends Wa{},vs=class extends Wa{constructor(e){super(),this.elements=e}};function uM(n,e){let t=hM(e);for(let r of n.elements)t.some(i=>kr(i,r))||t.push(r);return{arrayValue:{values:t}}}var _s=class extends Wa{constructor(e){super(),this.elements=e}};function dM(n,e){let t=hM(e);for(let r of n.elements)t=t.filter(i=>!kr(i,r));return{arrayValue:{values:t}}}var Ya=class extends Wa{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Jk(n){return tt(n.integerValue||n.doubleValue)}function hM(n){return Uw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function cz(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof vs&&i instanceof vs||r instanceof _s&&i instanceof _s?$a(r.elements,i.elements,kr):r instanceof Ya&&i instanceof Ya?kr(r.Ee,i.Ee):r instanceof Ka&&i instanceof Ka})(n.transform,e.transform)}var gb=class{constructor(e,t){this.version=e,this.transformResults=t}},Tn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Jp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Qa=class{};function fM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ru(n.key,Tn.none()):new ys(n.key,n.data,Tn.none());{let t=n.data,r=gn.empty(),i=new xt(An.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Nr(n.key,r,new Bn(i.toArray()),Tn.none())}}function lz(n,e,t){n instanceof ys?(function(i,o,s){let a=i.value.clone(),c=Xk(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Nr?(function(i,o,s){if(!Jp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Xk(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(pM(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function wu(n,e,t,r){return n instanceof ys?(function(o,s,a,c){if(!Jp(o.precondition,s))return a;let u=o.value.clone(),d=eN(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Nr?(function(o,s,a,c){if(!Jp(o.precondition,s))return a;let u=eN(o.fieldTransforms,c,s),d=s.data;return d.setAll(pM(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return Jp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function uz(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=lM(r.transform,i||null);o!=null&&(t===null&&(t=gn.empty()),t.set(r.field,o))}return t||null}function Zk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$a(r,i,(o,s)=>cz(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ys=class extends Qa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Nr=class extends Qa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function pM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Xk(n,e,t){let r=new Map;xe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,az(s,a,t[i]))}return r}function eN(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,sz(o,s,e))}return r}var Ru=class extends Qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},am=class extends Qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var vb=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&lz(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=wu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=wu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=aM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=fM(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ce())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,(t,r)=>Zk(t,r))&&$a(this.baseMutations,e.baseMutations,(t,r)=>Zk(t,r))}},_b=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return tz})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var yb=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Eb=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Et,Ae;function mM(n){switch(n){case L.OK:return re(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return re(15467,{code:n})}}function gM(n){if(n===void 0)return ui("GRPC error has no .code"),L.UNKNOWN;switch(n){case Et.OK:return L.OK;case Et.CANCELLED:return L.CANCELLED;case Et.UNKNOWN:return L.UNKNOWN;case Et.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Et.INTERNAL:return L.INTERNAL;case Et.UNAVAILABLE:return L.UNAVAILABLE;case Et.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Et.NOT_FOUND:return L.NOT_FOUND;case Et.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Et.ABORTED:return L.ABORTED;case Et.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Et.DATA_LOSS:return L.DATA_LOSS;default:return re(39323,{code:n})}}(Ae=Et||(Et={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";var tN=null;var dz=new ai([4294967295,4294967295],0);function nN(n){let e=SN().encode(n),t=new VI;return t.update(e),new Uint8Array(t.digest())}function rN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ai([t,r],0),new ai([i,o],0)]}var Ib=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fs(`Invalid padding: ${t}`);if(r<0)throw new fs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fs(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ai.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ai.fromNumber(r)));return i.compare(dz)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=nN(e),[r,i]=rN(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=nN(e),[r,i]=rN(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},fs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var cm=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ce.min(),i,new dt(be),mi(),Ce())}},Pu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ce(),Ce(),Ce())}};var Ua=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},lm=class{constructor(e,t){this.targetId=e,this.De=t}},um=class{constructor(e,t,r=Yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},dm=class{constructor(){this.ve=0,this.Ce=iN(),this.Fe=Yt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ce(),t=Ce(),r=Ce();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:re(38017,{changeType:o})}}),new Pu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=iN()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},bb=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=mi(),this.je=Wp(),this.Je=Wp(),this.He=new dt(be)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(pb(o))if(r===0){let s=new ie(o.path);this.Xe(t,s,Rn.newNoDocument(s,ce.min()))}else xe(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}tN?.ct((function(d,p,m,y,T){var V,M,j,ee,oe,Se;let ht={localCacheCount:d,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Ve=p.unchangedNames;return Ve&&(ht.bloomFilter={applied:T===0,hashCount:(V=Ve?.hashCount)!==null&&V!==void 0?V:0,bitmapLength:(ee=(j=(M=Ve?.bits)===null||M===void 0?void 0:M.bitmap)===null||j===void 0?void 0:j.length)!==null&&ee!==void 0?ee:0,padding:(Se=(oe=Ve?.bits)===null||oe===void 0?void 0:oe.padding)!==null&&Se!==void 0?Se:0,mightContain:D=>{var b;return(b=y?.mightContain(D))!==null&&b!==void 0&&b}}),ht})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=fi(r).toUint8Array()}catch(c){if(c instanceof nm)return ho("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ib(s,i,o)}catch(c){return ho(c instanceof fs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&pb(a.target)){let c=new ie(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Rn.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Ce();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new cm(e,t,this.He,this.ze,r);return this.ze=mi(),this.je=Wp(),this.Je=Wp(),this.He=new dt(be),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new dm,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new xt(be),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new xt(be),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new dm),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Wp(){return new dt(ie.comparator)}function iN(){return new dt(ie.comparator)}var hz={asc:"ASCENDING",desc:"DESCENDING"},fz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pz={and:"AND",or:"OR"},wb=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Cb(n,e){return n.useProto3Json||Bu(e)?e:{value:e}}function hm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mz(n,e){return hm(n,e.toTimestamp())}function xn(n){return xe(!!n,49232),ce.fromTimestamp((function(t){let r=hi(t);return new Ct(r.seconds,r.nanos)})(n))}function Gw(n,e){return Sb(n,e).canonicalString()}function Sb(n,e){let t=(function(i){return new Ye(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function _M(n){let e=Ye.fromString(n);return xe(CM(e),10190,{key:e.toString()}),e}function fm(n,e){return Gw(n.databaseId,e.path)}function Cu(n,e){let t=_M(e);if(t.get(1)!==n.databaseId.projectId)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ie(EM(t))}function yM(n,e){return Gw(n.databaseId,e)}function gz(n){let e=_M(n);return e.length===4?Ye.emptyPath():EM(e)}function Db(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EM(n){return xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function oN(n,e,t){return{name:fm(n,e),fields:t.value.mapValue.fields}}function vz(n,e){return"found"in e?(function(r,i){xe(!!i.found,43571),i.found.name,i.found.updateTime;let o=Cu(r,i.found.name),s=xn(i.found.updateTime),a=i.found.createTime?xn(i.found.createTime):ce.min(),c=new gn({mapValue:{fields:i.found.fields}});return Rn.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){xe(!!i.missing,3894),xe(!!i.readTime,22933);let o=Cu(r,i.missing),s=xn(i.readTime);return Rn.newNoDocument(o,s)})(n,e):re(7234,{result:e})}function _z(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,d){return u.useProto3Json?(xe(d===void 0||typeof d=="string",58123),Yt.fromBase64String(d||"")):(xe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Yt.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let d=u.code===void 0?L.UNKNOWN:gM(u.code);return new H(d,u.message||"")})(s);t=new um(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Cu(n,r.document.name),o=xn(r.document.updateTime),s=r.document.createTime?xn(r.document.createTime):ce.min(),a=new gn({mapValue:{fields:r.document.fields}}),c=Rn.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new Ua(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Cu(n,r.document),o=r.readTime?xn(r.readTime):ce.min(),s=Rn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ua([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Cu(n,r.document),o=r.removedTargetIds||[];t=new Ua([],o,i,null)}else{if(!("filter"in e))return re(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Eb(i,o),a=r.targetId;t=new lm(a,s)}}return t}function IM(n,e){let t;if(e instanceof ys)t={update:oN(n,e.key,e.value)};else if(e instanceof Ru)t={delete:fm(n,e.key)};else if(e instanceof Nr)t={update:oN(n,e.key,e.data),updateMask:Tz(e.fieldMask)};else{if(!(e instanceof am))return re(16599,{Rt:e.type});t={verify:fm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Ka)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _s)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ya)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw re(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:mz(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:re(27497)})(n,e.precondition)),t}function yz(n,e){return n&&n.length>0?(xe(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?xn(i.updateTime):xn(o);return s.isEqual(ce.min())&&(s=xn(o)),new gb(s,i.transformResults||[])})(t,e))):[]}function Ez(n,e){return{documents:[yM(n,e.path)]}}function Iz(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yM(n,i);let o=(function(u){if(u.length!==0)return wM(cr.create(u,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(d=>(function(m){return{field:Fa(m.field),direction:Cz(m.dir)}})(d))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Cb(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function bz(n){let e=gz(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){xe(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=(function(p){let m=bM(p);return m instanceof cr&&ZN(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(T){return new gs(La(T.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,Bu(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(p){let m=!!p.before,y=p.values||[];return new qa(y,m)})(t.startAt));let u=null;return t.endAt&&(u=(function(p){let m=!p.before,y=p.values||[];return new qa(y,m)})(t.endAt)),QG(e,i,s,o,a,"F",c,u)}function wz(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bM(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=La(t.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=La(t.unaryFilter.field);return bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=La(t.unaryFilter.field);return bt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=La(t.unaryFilter.field);return bt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return bt.create(La(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return cr.create(t.compositeFilter.filters.map(r=>bM(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re(1026)}})(t.compositeFilter.op))})(n):re(30097,{filter:n})}function Cz(n){return hz[n]}function Sz(n){return fz[n]}function Dz(n){return pz[n]}function Fa(n){return{fieldPath:n.canonicalString()}}function La(n){return An.fromServerFormat(n.fieldPath)}function wM(n){return n instanceof bt?(function(t){if(t.op==="=="){if(qk(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NAN"}};if(zk(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qk(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NAN"}};if(zk(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(t.field),op:Sz(t.op),value:t.value}}})(n):n instanceof cr?(function(t){let r=t.getFilters().map(i=>wM(i));return r.length===1?r[0]:{compositeFilter:{op:Dz(t.op),filters:r}}})(n):re(54877,{filter:n})}function Tz(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function CM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ku=class n{constructor(e,t,r,i,o=ce.min(),s=ce.min(),a=Yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Tb=class{constructor(e){this.gt=e}};function Az(n){let e=bz({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sm(e,e.limit,"L"):e}var pm=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(tt(e.integerValue));else if("doubleValue"in e){let r=tt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Tu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=hi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(fi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?YN(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):KN(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):re(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ha,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(tt(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ie.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};pm.Ut=new pm;var Ab=class{constructor(){this.Dn=new xb}addToCollectionParentIndex(e,t){return this.Dn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(ms.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}},xb=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xt(Ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(Ye.comparator)).toArray()}};var Cge=new Uint8Array(0);var sN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SM=41943040,jn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(SM,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);var Nu=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var aN="LruGarbageCollector",xz=1048576;function cN([n,e],[t,r]){let i=be(n,t);return i===0?be(e,r):i}var Rb=class{constructor(e){this.Tr=e,this.buffer=new xt(cN),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();cN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Pb=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){J(aN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){rc(t)?J(aN,"Ignoring IndexedDB error during garbage collection: ",t):await nc(t)}await this.Rr(3e5)})}},kb=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(Mw.ue);let r=new Rb(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(sN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sN):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Ma()<=we.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Rz(n,e){return new kb(n,e)}var Nb=class{constructor(){this.changes=new pi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Mb=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ob=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&wu(r.mutation,i,Bn.empty(),Ct.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ce()){let i=hs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=_u();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=hs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=mi(),s=bu(),a=(function(){return bu()})();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Nr)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),wu(d.mutation,u,d.mutation.getFieldMask(),Ct.now())):s.set(u.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var p;return a.set(u,new Mb(d,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=bu(),i=new dt((s,a)=>s-a),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||Bn.empty();d=a.applyToLocalView(u,d),r.set(c,d);let p=(i.get(a.batchId)||Ce()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,p=aM();d.forEach(m=>{if(!o.has(m)){let y=fM(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return U.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):U.resolve(hs()),a=Du,c=o;return s.next(u=>U.forEach(u,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Ce())).next(d=>({batchId:a,changes:sM(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(r=>{let i=_u();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=_u();return this.indexManager.getCollectionParents(e,o).next(a=>U.forEach(a,c=>{let u=(function(p,m){return new po(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Rn.newInvalidDocument(d)))});let a=_u();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&wu(d.mutation,u,Bn.empty(),Ct.now()),Fm(t,u)&&(a=a.insert(c,u))}),a})}};var Fb=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return U.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:xn(i.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:Az(i.bundledQuery),readTime:xn(i.readTime)}})(t)),U.resolve()}};var Lb=class{constructor(){this.overlays=new dt(ie.comparator),this.kr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){let r=hs();return U.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),U.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){let i=hs(),o=t.length+1,s=new ie(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new dt((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=hs(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=hs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return U.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new yb(t,r));let o=this.kr.get(t);o===void 0&&(o=Ce(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Vb=class{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}};var Mu=class{constructor(){this.qr=new xt(It.Qr),this.$r=new xt(It.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new It(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new It(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new ie(new Ye([])),r=new It(t,e),i=new It(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new ie(new Ye([])),r=new It(t,e),i=new It(t,e+1),o=Ce();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new It(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},It=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ie.comparator(e.key,t.key)||be(e.Hr,t.Hr)}static Ur(e,t){return be(e.Hr,t.Hr)||ie.comparator(e.key,t.key)}};var Ub=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new xt(It.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new vb(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new It(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Ow:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new It(t,0),i=new It(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xt(be);return t.forEach(i=>{let o=new It(i,0),s=new It(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ie.isDocumentKey(o)||(o=o.child(""));let s=new It(new ie(o),0),a=new xt(be);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),U.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(t.mutations,i=>{let o=new It(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new It(t,0),i=this.Yr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var jb=class{constructor(e){this.ni=e,this.docs=(function(){return new dt(ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let r=mi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Rn.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=mi(),s=t.path,a=new ie(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||PG(RG(d),r)<=0||(i.has(d.key)||Fm(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,t,r,i){re(9500)}ri(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Bb(this)}getSize(e){return U.resolve(this.size)}},Bb=class extends Nb{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var $b=class{constructor(e){this.persistence=e,this.ii=new pi(t=>jw(t),Bw),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.si=0,this.oi=new Mu,this.targetCount=0,this._i=Nu.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),U.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Nu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.hr(t),U.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(o).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),U.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.oi.containsKey(t))}};var mm=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Mw(0),this.ci=!1,this.ci=!0,this.li=new Vb,this.referenceDelegate=e(this),this.hi=new $b(this),this.indexManager=new Ab,this.remoteDocumentCache=(function(i){return new jb(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Tb(t),this.Ti=new Fb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Ub(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){J("MemoryPersistence","Starting transaction:",e);let i=new Hb(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},Hb=class extends tb{constructor(e){super(),this.currentSequenceNumber=e}},Gb=class n{constructor(e){this.persistence=e,this.Ai=new Mu,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw re(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{let i=ie.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ce.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return U.or([()=>U.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},gm=class n{constructor(e,t){this.persistence=e,this.gi=new pi(r=>OG(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Rz(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return U.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?U.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),U.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yp(e.data.value)),t}Sr(e,t,r){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var zb=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ce(),i=Ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var qb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Wb=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return y1()?8:NG(Tt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new qb;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ma()<=we.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Oa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Ma()<=we.DEBUG&&J("QueryEngine","Query:",Oa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ma()<=we.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Oa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(t))):U.resolve())}ps(e,t){if(Qk(t))return U.resolve(null);let r=Pr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=sm(t,null,"F"),r=Pr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ce(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,s,c.readTime)?this.ps(e,sm(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return Qk(t)||i.isEqual(ce.min())?U.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?U.resolve(null):(Ma()<=we.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oa(t)),this.vs(e,s,t,xG(i,Du)).next(a=>a))})}bs(e,t){let r=new xt(iM(e));return t.forEach((i,o)=>{Fm(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Ma()<=we.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Oa(t)),this.gs.getDocumentsMatchingQuery(e,t,ms.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var zw="LocalStore",Pz=3e8,Kb=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new dt(be),this.Ms=new pi(o=>jw(o),Bw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ob(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function kz(n,e,t,r){return new Kb(n,e,t,r)}async function DM(n,e){let t=ue(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ce();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})}function Nz(n,e){let t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,d){let p=u.batch,m=p.keys(),y=U.resolve();return m.forEach(T=>{y=y.next(()=>d.getEntry(c,T)).next(V=>{let M=u.docVersions.get(T);xe(M!==null,48541),V.version.compareTo(M)<0&&(p.applyToRemoteDocument(V,u),V.isValidDocument()&&(V.setReadTime(u.commitVersion),d.addEntry(V)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function TM(n){let e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Mz(n,e){let t=ue(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,d.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,d.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Yt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(p,y),(function(V,M,j){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Pz?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(m,y,d)&&a.push(t.hi.updateTargetData(o,y))});let c=mi(),u=Ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(Oz(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(ce.min())){let d=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Fs=i,o))}function Oz(n,e,t){let r=Ce(),i=Ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=mi();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):J(zw,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function Fz(n,e){let t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ow),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Lz(n,e){let t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,U.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new ku(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Yb(n,e,t){let r=ue(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!rc(s))throw s;J(zw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function lN(n,e,t){let r=ue(n),i=ce.min(),o=Ce();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,u,d){let p=ue(c),m=p.Ms.get(d);return m!==void 0?U.resolve(p.Fs.get(m)):p.hi.getTargetData(u,d)})(r,s,Pr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ce.min(),t?o:Ce())).next(a=>(Vz(r,ZG(e),a),{documents:a,qs:o})))}function Vz(n,e,t){let r=n.xs.get(e)||ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var vm=class{constructor(){this.activeTargetIds=iz()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Qb=class{constructor(){this.Fo=new vm,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new vm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Jb=class{xo(e){}shutdown(){}};var uN="ConnectivityMonitor",_m=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){J(uN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){J(uN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Kp=null;function Zb(){return Kp===null?Kp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kp++,"0x"+Kp.toString(16)}var GI="RestConnection",Uz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Xb=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===rm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=Zb(),a=this.Go(e,t.toUriEncodedString());J(GI,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),d=Qi(u);return this.jo(e,a,c,r,d).then(p=>(J(GI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ho(GI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=Uz[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var ew=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Kt="WebChannelConnection",tw=class extends Xb{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=Zb();return new Promise((a,c)=>{let u=new UI;u.setWithCredentials(!0),u.listenOnce(jI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case vu.NO_ERROR:let p=u.getResponseJson();J(Kt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case vu.TIMEOUT:J(Kt,`RPC '${e}' ${s} timed out`),c(new H(L.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:let m=u.getStatus();if(J(Kt,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let V=(function(j){let ee=j.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(ee)>=0?ee:L.UNKNOWN})(T.status);c(new H(V,T.message))}else c(new H(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new H(L.UNAVAILABLE,"Connection failed."));break;default:re(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{J(Kt,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);J(Kt,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}P_(e,t,r){let i=Zb(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=HI(),a=$I(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");J(Kt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let p=s.createWebChannel(d,c);this.T_(p);let m=!1,y=!1,T=new ew({Ho:M=>{y?J(Kt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(J(Kt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),J(Kt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),V=(M,j,ee)=>{M.listen(j,oe=>{try{ee(oe)}catch(Se){setTimeout(()=>{throw Se},0)}})};return V(p,Na.EventType.OPEN,()=>{y||(J(Kt,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),V(p,Na.EventType.CLOSE,()=>{y||(y=!0,J(Kt,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(p))}),V(p,Na.EventType.ERROR,M=>{y||(y=!0,ho(Kt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),T.__(new H(L.UNAVAILABLE,"The operation could not be completed")))}),V(p,Na.EventType.MESSAGE,M=>{var j;if(!y){let ee=M.data[0];xe(!!ee,16349);let oe=ee,Se=oe?.error||((j=oe[0])===null||j===void 0?void 0:j.error);if(Se){J(Kt,`RPC '${e}' stream ${i} received error:`,Se);let ht=Se.status,Ve=(function(C){let S=Et[C];if(S!==void 0)return gM(S)})(ht),D=Se.message;Ve===void 0&&(Ve=L.INTERNAL,D="Unknown error status: "+ht+" with message "+Se.message),y=!0,T.__(new H(Ve,D)),p.close()}else J(Kt,`RPC '${e}' stream ${i} received:`,ee),T.a_(ee)}}),V(a,BI.STAT_EVENT,M=>{M.stat===zp.PROXY?J(Kt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===zp.NOPROXY&&J(Kt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function zI(){return typeof document<"u"?document:null}function Lm(n){return new wb(n,!0)}var Ou=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var dN="PersistentStream",ym=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Ou(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(ui(t.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new H(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return J(dN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(J(dN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},nw=class extends ym{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=_z(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ce.min():s.readTime?xn(s.readTime):ce.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Db(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=pb(c)?{documents:Ez(o,c)}:{query:Iz(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=vM(o,s.resumeToken);let u=Cb(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ce.min())>0){a.readTime=hm(o,s.snapshotVersion.toTimestamp());let u=Cb(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=wz(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Db(this.serializer),t.removeTarget=e,this.k_(t)}},rw=class extends ym{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=yz(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Db(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>IM(this.serializer,r))};this.k_(t)}};var iw=class{},ow=class extends iw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Sb(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(L.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,Sb(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(L.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},sw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ui(t),this._a=!1):J("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Es="RemoteStore",aw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Is(this)&&(J(Es,"Restarting streams for network reachability change."),await(async function(c){let u=ue(c);u.Ia.add(4),await $u(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Vm(u)})(this))})}),this.Aa=new sw(r,i)}};async function Vm(n){if(Is(n))for(let e of n.da)await e(!0)}async function $u(n){for(let e of n.da)await e(!1)}function AM(n,e){let t=ue(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Yw(t)?Kw(t):ic(t).x_()&&Ww(t,e))}function qw(n,e){let t=ue(n),r=ic(t);t.Ta.delete(e),r.x_()&&xM(t,e),t.Ta.size===0&&(r.x_()?r.B_():Is(t)&&t.Aa.set("Unknown"))}function Ww(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ic(n).H_(e)}function xM(n,e){n.Ra.$e(e),ic(n).Y_(e)}function Kw(n){n.Ra=new bb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ic(n).start(),n.Aa.aa()}function Yw(n){return Is(n)&&!ic(n).M_()&&n.Ta.size>0}function Is(n){return ue(n).Ia.size===0}function RM(n){n.Ra=void 0}async function jz(n){n.Aa.set("Online")}async function Bz(n){n.Ta.forEach((e,t)=>{Ww(n,e)})}async function $z(n,e){RM(n),Yw(n)?(n.Aa.la(e),Kw(n)):n.Aa.set("Unknown")}async function Hz(n,e,t){if(n.Aa.set("Online"),e instanceof um&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){J(Es,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Em(n,r)}else if(e instanceof Ua?n.Ra.Ye(e):e instanceof lm?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ce.min()))try{let r=await TM(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(Yt.EMPTY_BYTE_STRING,d.snapshotVersion)),xM(o,c);let p=new ku(d.target,c,u,d.sequenceNumber);Ww(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){J(Es,"Failed to raise snapshot:",r),await Em(n,r)}}async function Em(n,e,t){if(!rc(e))throw e;n.Ia.add(1),await $u(n),n.Aa.set("Offline"),t||(t=()=>TM(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{J(Es,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Vm(n)})}function PM(n,e){return e().catch(t=>Em(n,t,e))}async function Um(n){let e=ue(n),t=mo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ow;for(;Gz(e);)try{let i=await Fz(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,zz(e,i)}catch(i){await Em(e,i)}kM(e)&&NM(e)}function Gz(n){return Is(n)&&n.Pa.length<10}function zz(n,e){n.Pa.push(e);let t=mo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function kM(n){return Is(n)&&!mo(n).M_()&&n.Pa.length>0}function NM(n){mo(n).start()}async function qz(n){mo(n).na()}async function Wz(n){let e=mo(n);for(let t of n.Pa)e.X_(t.mutations)}async function Kz(n,e,t){let r=n.Pa.shift(),i=_b.from(r,e,t);await PM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Um(n)}async function Yz(n,e){e&&mo(n).Z_&&await(async function(r,i){if((function(s){return mM(s)&&s!==L.ABORTED})(i.code)){let o=r.Pa.shift();mo(r).N_(),await PM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Um(r)}})(n,e),kM(n)&&NM(n)}async function hN(n,e){let t=ue(n);t.asyncQueue.verifyOperationInProgress(),J(Es,"RemoteStore received new credentials");let r=Is(t);t.Ia.add(3),await $u(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Vm(t)}async function Qz(n,e){let t=ue(n);e?(t.Ia.delete(2),await Vm(t)):e||(t.Ia.add(2),await $u(t),t.Aa.set("Unknown"))}function ic(n){return n.Va||(n.Va=(function(t,r,i){let o=ue(t);return o.ia(),new nw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:jz.bind(null,n),e_:Bz.bind(null,n),n_:$z.bind(null,n),J_:Hz.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Yw(n)?Kw(n):n.Aa.set("Unknown")):(await n.Va.stop(),RM(n))})),n.Va}function mo(n){return n.ma||(n.ma=(function(t,r,i){let o=ue(t);return o.ia(),new rw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:qz.bind(null,n),n_:Yz.bind(null,n),ea:Wz.bind(null,n),ta:Kz.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Um(n)):(await n.ma.stop(),n.Pa.length>0&&(J(Es,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var cw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Qw(n,e){if(ui("AsyncQueue",`${e}: ${n}`),rc(n))return new H(L.UNAVAILABLE,`${e}: ${n}`);throw n}var Im=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ie.comparator(t.key,r.key):(t,r)=>ie.comparator(t.key,r.key),this.keyedMap=_u(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var bm=class{constructor(){this.fa=new dt(ie.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):re(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ja=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Im.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Om(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var lw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},uw=class{constructor(){this.queries=fN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ue(t),o=i.queries;i.queries=fN(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new H(L.ABORTED,"Firestore shutting down"))}};function fN(){return new pi(n=>rM(n),Om)}async function MM(n,e){let t=ue(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new lw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(i,!0);break;case 1:o.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=Qw(s,`Initialization of query '${Oa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&Jw(t)}async function OM(n,e){let t=ue(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Jz(n,e){let t=ue(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&Jw(t)}function Zz(n,e,t){let r=ue(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function Jw(n){n.Da.forEach(e=>{e.next()})}var dw,pN;(pN=dw||(dw={})).Fa="default",pN.Cache="cache";var wm=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==dw.Cache}};var Cm=class{constructor(e){this.key=e}},Sm=class{constructor(e){this.key=e}},hw=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ce(),this.mutatedKeys=Ce(),this.Xa=iM(e),this.eu=new Im(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new bm,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{let m=i.get(d),y=Fm(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),V=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?T!==V&&(r.track({type:3,doc:y}),M=!0):this.iu(m,y)||(r.track({type:2,doc:y}),M=!0,(c&&this.Xa(y,c)>0||u&&this.Xa(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(c||u)&&(a=!0)),M&&(y?(s=s.add(y),o=V?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((d,p)=>(function(y,T){let V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{At:M})}};return V(y)-V(T)})(d.type,p.type)||this.Xa(d.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new Ja(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new bm,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ce(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Sm(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Cm(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ce();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ja.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Zw="SyncEngine",fw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},pw=class{constructor(e){this.key=e,this.lu=!1}},mw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new pi(a=>rM(a),Om),this.Tu=new Map,this.Iu=new Set,this.du=new dt(ie.comparator),this.Eu=new Map,this.Au=new Mu,this.Ru={},this.Vu=new Map,this.mu=Nu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function Xz(n,e,t=!0){let r=BM(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await FM(r,e,t,!0),i}async function e9(n,e){let t=BM(n);await FM(t,e,!0,!1)}async function FM(n,e,t,r){let i=await Lz(n.localStore,Pr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await t9(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&AM(n.remoteStore,i),a}async function t9(n,e,t,r,i){n.gu=(p,m,y)=>(async function(V,M,j,ee){let oe=M.view.nu(j);oe.Ds&&(oe=await lN(V.localStore,M.query,!1).then(({documents:D})=>M.view.nu(D,oe)));let Se=ee&&ee.targetChanges.get(M.targetId),ht=ee&&ee.targetMismatches.get(M.targetId)!=null,Ve=M.view.applyChanges(oe,V.isPrimaryClient,Se,ht);return gN(V,M.targetId,Ve._u),Ve.snapshot})(n,p,m,y);let o=await lN(n.localStore,e,!0),s=new hw(e,o.qs),a=s.nu(o.documents),c=Pu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);gN(n,t,u._u);let d=new fw(e,t,s);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function n9(n,e,t){let r=ue(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Om(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Yb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&qw(r.remoteStore,i.targetId),gw(r,i.targetId)}).catch(nc)):(gw(r,i.targetId),await Yb(r.localStore,i.targetId,!0))}async function r9(n,e){let t=ue(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),qw(t.remoteStore,r.targetId))}async function i9(n,e,t){let r=d9(n);try{let i=await(function(s,a){let c=ue(s),u=Ct.now(),d=a.reduce((y,T)=>y.add(T.key),Ce()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=mi(),V=Ce();return c.Os.getEntries(y,d).next(M=>{T=M,T.forEach((j,ee)=>{ee.isValidDocument()||(V=V.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,T)).next(M=>{p=M;let j=[];for(let ee of a){let oe=uz(ee,p.get(ee.key).overlayedDocument);oe!=null&&j.push(new Nr(ee.key,oe,QN(oe.value.mapValue),Tn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,j,a)}).next(M=>{m=M;let j=M.applyToLocalDocumentSet(p,V);return c.documentOverlayCache.saveOverlays(y,M.batchId,j)})}).then(()=>({batchId:m.batchId,changes:sM(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new dt(be)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u})(r,i.batchId,t),await Hu(r,i.changes),await Um(r.remoteStore)}catch(i){let o=Qw(i,"Failed to persist write");t.reject(o)}}async function LM(n,e){let t=ue(n);try{let r=await Mz(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?xe(s.lu,14607):i.removedDocuments.size>0&&(xe(s.lu,42227),s.lu=!1))}),await Hu(t,r,e)}catch(r){await nc(r)}}function mN(n,e,t){let r=ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=ue(s);c.onlineState=a;let u=!1;c.queries.forEach((d,p)=>{for(let m of p.wa)m.va(a)&&(u=!0)}),u&&Jw(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function o9(n,e,t){let r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new dt(ie.comparator);s=s.insert(o,Rn.newNoDocument(o,ce.min()));let a=Ce().add(o),c=new cm(ce.min(),new Map,new dt(be),s,a);await LM(r,c),r.du=r.du.remove(o),r.Eu.delete(e),Xw(r)}else await Yb(r.localStore,e,!1).then(()=>gw(r,e,t)).catch(nc)}async function s9(n,e){let t=ue(n),r=e.batch.batchId;try{let i=await Nz(t.localStore,e);UM(t,r,null),VM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Hu(t,i)}catch(i){await nc(i)}}async function a9(n,e,t){let r=ue(n);try{let i=await(function(s,a){let c=ue(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(p=>(xe(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})})(r.localStore,e);UM(r,e,t),VM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Hu(r,i)}catch(i){await nc(i)}}function VM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function UM(n,e,t){let r=ue(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function gw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||jM(n,r)})}function jM(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(qw(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Xw(n))}function gN(n,e,t){for(let r of t)r instanceof Cm?(n.Au.addReference(r.key,e),c9(n,r)):r instanceof Sm?(J(Zw,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||jM(n,r.key)):re(19791,{yu:r})}function c9(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(J(Zw,"New document in limbo: "+t),n.Iu.add(r),Xw(n))}function Xw(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new ie(Ye.fromString(e)),r=n.mu.next();n.Eu.set(r,new pw(t)),n.du=n.du.insert(t,r),AM(n.remoteStore,new ku(Pr($w(t.path)),r,"TargetPurposeLimboResolution",Mw.ue))}}async function Hu(n,e,t){let r=ue(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);let p=zb.Es(c.targetId,u);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(c,u){let d=ue(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(u,m=>U.forEach(m.Is,y=>d.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>U.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!rc(p))throw p;J(zw,"Failed to update sequence numbers: "+p)}for(let p of u){let m=p.targetId;if(!p.fromCache){let y=d.Fs.get(m),T=y.snapshotVersion,V=y.withLastLimboFreeSnapshotVersion(T);d.Fs=d.Fs.insert(m,V)}}})(r.localStore,o))}async function l9(n,e){let t=ue(n);if(!t.currentUser.isEqual(e)){J(Zw,"User change. New user:",e.toKey());let r=await DM(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new H(L.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hu(t,r.Bs)}}function u9(n,e){let t=ue(n),r=t.Eu.get(e);if(r&&r.lu)return Ce().add(r.key);{let i=Ce(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function BM(n){let e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=u9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o9.bind(null,e),e.hu.J_=Jz.bind(null,e.eventManager),e.hu.pu=Zz.bind(null,e.eventManager),e}function d9(n){let e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a9.bind(null,e),e}var $M=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Lm(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return kz(this.persistence,new Wb,t.initialUser,this.serializer)}Du(t){return new mm(Gb.Vi,this.serializer)}bu(t){return new Qb}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),vw=class extends $M{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){xe(this.persistence.referenceDelegate instanceof gm,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Pb(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new mm(r=>gm.Vi(r,t),this.serializer)}};var h9=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=l9.bind(null,this.syncEngine),await Qz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new uw})()}createDatastore(t){let r=Lm(t.databaseInfo.databaseId),i=(function(s){return new tw(s)})(t.databaseInfo);return(function(s,a,c,u){return new ow(s,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new aw(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>mN(this.syncEngine,r,0),(function(){return _m.C()?new _m:new Jb})())}createSyncEngine(t,r){return(function(o,s,a,c,u,d,p){let m=new mw(o,s,a,c,u,d);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(o){let s=ue(o);J(Es,"RemoteStore shutting down."),s.Ia.add(5),await $u(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var Dm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var _w=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new H(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await(async function(i,o){let s=ue(i),a={documents:o.map(p=>fm(s.serializer,p))},c=await s.Jo("BatchGetDocuments",s.serializer.databaseId,Ye.emptyPath(),a,o.length),u=new Map;c.forEach(p=>{let m=vz(s.serializer,p);u.set(m.key.toString(),m)});let d=[];return o.forEach(p=>{let m=u.get(p.toString());xe(!!m,55234,{key:p}),d.push(m)}),d})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ru(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=ie.fromPath(r);this.mutations.push(new am(i,this.precondition(i)))}),await(async function(r,i){let o=ue(r),s={writes:i.map(a=>IM(o.serializer,a))};await o.Wo("Commit",o.serializer.databaseId,Ye.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw re(50498,{Wu:e.constructor.name});t=ce.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new H(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ce.min())?Tn.exists(!1):Tn.updateTime(t):Tn.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ce.min()))throw new H(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tn.updateTime(t)}return Tn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var yw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new Ou(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{let e=new _w(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{let t=this.updateFunction(e);return!Bu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!mM(t)}return!1}};var go="FirestoreClient",Ew=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=Su.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{J(go,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(J(go,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Qw(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function qI(n,e){n.asyncQueue.verifyOperationInProgress(),J(go,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ho("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{J("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ho("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function vN(n,e){n.asyncQueue.verifyOperationInProgress();let t=await f9(n);J(go,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>hN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>hN(e.remoteStore,i)),n._onlineComponents=e}async function f9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){J(go,"Using user provided OfflineComponentProvider");try{await qI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ho("Error using user provided cache. Falling back to memory cache: "+t),await qI(n,new $M)}}else J(go,"Using default OfflineComponentProvider"),await qI(n,new vw(void 0));return n._offlineComponents}async function eC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(J(go,"Using user provided OnlineComponentProvider"),await vN(n,n._uninitializedComponentsProvider._online)):(J(go,"Using default OnlineComponentProvider"),await vN(n,new h9))),n._onlineComponents}function p9(n){return eC(n).then(e=>e.syncEngine)}function m9(n){return eC(n).then(e=>e.datastore)}async function HM(n){let e=await eC(n),t=e.eventManager;return t.onListen=Xz.bind(null,e.syncEngine),t.onUnlisten=n9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=e9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=r9.bind(null,e.syncEngine),t}function g9(n,e,t={}){let r=new $n;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,c,u){let d=new Dm({next:m=>{d.Ou(),s.enqueueAndForget(()=>OM(o,p));let y=m.docs.has(a);!y&&m.fromCache?u.reject(new H(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new H(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new wm($w(a.path),d,{includeMetadataChanges:!0,ka:!0});return MM(o,p)})(await HM(n),n.asyncQueue,e,t,r)),r.promise}function v9(n,e,t={}){let r=new $n;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,c,u){let d=new Dm({next:m=>{d.Ou(),s.enqueueAndForget(()=>OM(o,p)),m.fromCache&&c.source==="server"?u.reject(new H(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new wm(a,d,{includeMetadataChanges:!0,ka:!0});return MM(o,p)})(await HM(n),n.asyncQueue,e,t,r)),r.promise}function GM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var _N=new Map;var zM="firestore.googleapis.com",yN=!0,Tm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zM,this.ssl=yN}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:yN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xz)throw new H(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Za=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new WI;switch(r.type){case"firstParty":return new JI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=_N.get(t);r&&(J("ComponentProvider","Removing Datastore"),_N.delete(t),r.terminate())})(this),Promise.resolve()}};function qM(n,e,t,r={}){var i;n=di(n,Za);let o=Qi(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(ip(`https://${c}`),op("Firestore",!0)),s.host!==zM&&s.host!==c&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Cr(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=At.MOCK_USER;else{d=f1(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new H(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new At(m)}n._authCredentials=new KI(new Zp(d,p))}}var vo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Rt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ju(t,n._jsonSchema))return new n(e,r||null,new ie(Ye.fromString(t.referencePath)))}};Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:wt("string",Rt._jsonSchemaVersion),referencePath:wt("string")};var ao=class n extends vo{constructor(e,t,r){super(e,t,$w(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new ie(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function WM(n,e,...t){if(n=yt(n),DN("collection","path",e),n instanceof Za){let r=Ye.fromString(e,...t);return Lk(r),new ao(n,null,r)}{if(!(n instanceof Rt||n instanceof ao))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ye.fromString(e,...t));return Lk(r),new ao(n.firestore,null,r)}}function tC(n,e,...t){if(n=yt(n),arguments.length===1&&(e=Su.newId()),DN("doc","path",e),n instanceof Za){let r=Ye.fromString(e,...t);return Fk(r),new Rt(n,null,new ie(r))}{if(!(n instanceof Rt||n instanceof ao))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ye.fromString(e,...t));return Fk(r),new Rt(n.firestore,n instanceof ao?n.converter:null,new ie(r))}}var EN="AsyncQueue",Am=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Ou(this,"async_queue_retry"),this.oc=()=>{let r=zI();r&&J(EN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=zI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=zI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new $n;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!rc(e))throw e;J(EN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ui("INTERNAL UNHANDLED ERROR: ",IN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=cw.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&re(47125,{hc:IN(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function IN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var _o=class extends Za{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Am,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Am(e),this._firestoreClient=void 0,await e}}};function KM(n,e){let t=typeof n=="object"?n:ns(),r=typeof n=="string"?n:e||rm,i=ba(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=h1("firestore");o&&qM(i,...o)}return i}function jm(n){if(n._terminated)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_9(n),n._firestoreClient}function _9(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,u,d){return new nb(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,GM(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Ew(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var li=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Yt.fromBase64String(e))}catch(t){throw new H(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ju(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};li._jsonSchemaVersion="firestore/bytes/1.0",li._jsonSchema={type:wt("string",li._jsonSchemaVersion),bytes:wt("string")};var Xa=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Fu=class{constructor(e){this._methodName=e}};var co=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ju(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};co._jsonSchemaVersion="firestore/geoPoint/1.0",co._jsonSchema={type:wt("string",co._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};var lo=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ju(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new H(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};lo._jsonSchemaVersion="firestore/vectorValue/1.0",lo._jsonSchema={type:wt("string",lo._jsonSchemaVersion),vectorValues:wt("object")};var y9=/^__.*__$/,Iw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ys(e,this.data,t,this.fieldTransforms)}},xm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function YM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ec:n})}}var bw=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Pm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(YM(this.Ec)&&y9.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},ww=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Lm(e)}Dc(e,t,r,i=!1){return new bw({Ec:e,methodName:t,bc:r,path:An.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bm(n){let e=n._freezeSettings(),t=Lm(n._databaseId);return new ww(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nC(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);rC("Data must be an object, but it was:",s,r);let a=QM(r,s),c,u;if(o.merge)c=new Bn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let p of o.mergeFields){let m=Cw(e,p,t);if(!s.contains(m))throw new H(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ZM(d,m)||d.push(m)}c=new Bn(d),u=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=s.fieldTransforms;return new Iw(new gn(a),c,u)}var Rm=class n extends Fu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function E9(n,e,t,r){let i=n.Dc(1,e,t);rC("Data must be an object, but it was:",i,r);let o=[],s=gn.empty();yo(r,(c,u)=>{let d=iC(e,c,t);u=yt(u);let p=i.gc(d);if(u instanceof Rm)o.push(d);else{let m=Gu(u,p);m!=null&&(o.push(d),s.set(d,m))}});let a=new Bn(o);return new xm(s,a,i.fieldTransforms)}function I9(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[Cw(e,r,t)],c=[i];if(o.length%2!=0)throw new H(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Cw(e,o[m])),c.push(o[m+1]);let u=[],d=gn.empty();for(let m=a.length-1;m>=0;--m)if(!ZM(u,a[m])){let y=a[m],T=c[m];T=yt(T);let V=s.gc(y);if(T instanceof Rm)u.push(y);else{let M=Gu(T,V);M!=null&&(u.push(y),d.set(y,M))}}let p=new Bn(u);return new xm(d,p,s.fieldTransforms)}function b9(n,e,t,r=!1){return Gu(t,n.Dc(r?4:3,e))}function Gu(n,e){if(JM(n=yt(n)))return rC("Unsupported field value:",e,n),QM(n,e);if(n instanceof Fu)return(function(r,i){if(!YM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=Gu(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ct.fromDate(r);return{timestampValue:hm(i.serializer,o)}}if(r instanceof Ct){let o=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hm(i.serializer,o)}}if(r instanceof co)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof li)return{bytesValue:vM(i.serializer,r._byteString)};if(r instanceof Rt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Gw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lo)return(function(s,a){return{mapValue:{fields:{[Lw]:{stringValue:Vw},[Ha]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return Hw(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Nm(r)}`)})(n,e)}function QM(n,e){let t={};return $N(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(n,(r,i)=>{let o=Gu(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function JM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof co||n instanceof li||n instanceof Rt||n instanceof Fu||n instanceof lo)}function rC(n,e,t){if(!JM(t)||!TN(t)){let r=Nm(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Cw(n,e,t){if((e=yt(e))instanceof Xa)return e._internalPath;if(typeof e=="string")return iC(n,e);throw Pm("Field path arguments must be of type string or ",n,!1,void 0,t)}var w9=new RegExp("[~\\*/\\[\\]]");function iC(n,e,t){if(e.search(w9)>=0)throw Pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xa(...e.split("."))._internalPath}catch{throw Pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new H(L.INVALID_ARGUMENT,a+n+c)}function ZM(n,e){return n.some(t=>t.isEqual(e))}var ec=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Sw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(oC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Sw=class extends ec{data(){return super.data()}};function oC(n,e){return typeof e=="string"?iC(n,e):e instanceof Xa?e._internalPath:e._delegate._internalPath}function C9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Lu=class{},Vu=class extends Lu{};function XM(n,e,...t){let r=[];e instanceof Lu&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof Tw).length,a=o.filter(c=>c instanceof Dw).length;if(s>1||s>0&&a>0)throw new H(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Dw=class n extends Vu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return nO(e._query,t),new vo(e.firestore,e.converter,mb(e._query,t))}_parse(e){let t=Bm(e.firestore);return(function(o,s,a,c,u,d,p){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new H(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){wN(p,d);let T=[];for(let V of p)T.push(bN(c,o,V));m={arrayValue:{values:T}}}else m=bN(c,o,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||wN(p,d),m=b9(a,s,p,d==="in"||d==="not-in");return bt.create(u,d,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var Tw=class n extends Lu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:cr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)nO(s,c),s=mb(s,c)})(e._query,t),new vo(e.firestore,e.converter,mb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Aw=class n extends Vu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new H(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gs(o,s)})(e._query,this._field,this._direction);return new vo(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new po(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function eO(n,e="asc"){let t=e,r=oC("orderBy",n);return Aw._create(r,t)}var xw=class n extends Vu{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new vo(e.firestore,e.converter,sm(e._query,this._limit,this._limitType))}};function tO(n){return AG("limit",n),xw._create("limit",n,"F")}function bN(n,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new H(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nM(e)&&t.indexOf("/")!==-1)throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ye.fromString(t));if(!ie.isDocumentKey(r))throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gk(n,new ie(r))}if(t instanceof Rt)return Gk(n,t._key);throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nm(t)}.`)}function wN(n,e){if(!Array.isArray(n)||n.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nO(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new H(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var km=class{convertValue(e,t="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return yo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ha].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>tt(s.doubleValue));return new lo(o)}convertGeoPoint(e){return new co(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Mm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){let t=hi(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ye.fromString(e);xe(CM(r),9688,{name:e});let i=new im(r.get(1),r.get(3)),o=new ie(r.popFirst(5));return i.isEqual(t)||ui(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function sC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Rw=class extends km{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}};var so=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},uo=class n extends ec{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ja(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(oC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",uo._jsonSchema={type:wt("string",uo._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};var ja=class extends uo{data(e={}){return super.data(e)}},Ba=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new so(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ja(this._firestore,this._userDataWriter,r.key,r,new so(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new so(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new so(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:S9(a.type),doc:c,oldIndex:u,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Su.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function S9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:n})}}function rO(n){n=di(n,Rt);let e=di(n.firestore,_o);return g9(jm(e),n._key).then(t=>D9(e,n,t))}Ba._jsonSchemaVersion="firestore/querySnapshot/1.0",Ba._jsonSchema={type:wt("string",Ba._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};var Uu=class extends km{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}};function iO(n){n=di(n,vo);let e=di(n.firestore,_o),t=jm(e),r=new Uu(e);return C9(n._query),v9(t,n._query).then(i=>new Ba(e,r,n,i))}function oO(n,e,t){n=di(n,Rt);let r=di(n.firestore,_o),i=sC(n.converter,e,t);return aO(r,[nC(Bm(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Tn.none())])}function sO(n,e){let t=di(n.firestore,_o),r=tC(n),i=sC(n.converter,e);return aO(t,[nC(Bm(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}function aO(n,e){return(function(r,i){let o=new $n;return r.asyncQueue.enqueueAndForget(async()=>i9(await p9(r),i,o)),o.promise})(jm(n),e)}function D9(n,e,t){let r=t.docs.get(e._key),i=new Uu(n);return new uo(n,i,e._key,r,new so(t.hasPendingWrites,t.fromCache),e.converter)}var T9={maxAttempts:5};function yu(n,e){if((n=yt(n)).firestore!==e)throw new H(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Pw=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bm(e)}get(e){let t=yu(e,this._firestore),r=new Rw(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return re(24041);let o=i[0];if(o.isFoundDocument())return new ec(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new ec(this._firestore,r,t._key,null,t.converter);throw re(18433,{doc:o})})}set(e,t,r){let i=yu(e,this._firestore),o=sC(i.converter,t,r),s=nC(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=yu(e,this._firestore),s;return s=typeof(t=yt(t))=="string"||t instanceof Xa?I9(this._dataReader,"Transaction.update",o._key,t,r,i):E9(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=yu(e,this._firestore);return this._transaction.delete(t._key),this}};var kw=class extends Pw{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=yu(e,this._firestore),r=new Uu(this._firestore);return super.get(e).then(i=>new uo(this._firestore,r,t._key,i._document,new so(!1,!1),t.converter))}};function cO(n,e,t){n=di(n,_o);let r=Object.assign(Object.assign({},T9),t);return(function(o){if(o.maxAttempts<1)throw new H(L.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let c=new $n;return o.asyncQueue.enqueueAndForget(async()=>{let u=await m9(o);new yw(o.asyncQueue,u,a,s,c).zu()}),c.promise})(jm(n),i=>e(new kw(n,i)),r)}(function(e,t=!0){(function(i){tc=i})(Zi),ir(new sn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new _o(new YI(r.getProvider("auth-internal")),new ZI(s,r.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new H(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new im(u.options.projectId,d)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),lt(kk,Nk,e),lt(kk,Nk,"esm2017")})();var bs=class{constructor(e){return e}},lO="firestore",aC=class{constructor(){return Ca(lO)}};var cC=new q("angularfire2.firestore-instances");function A9(n,e){let t=eu(lO,n,e);return t&&new bs(t)}function x9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new bs(r)}}var R9={provide:aC,deps:[[new wn,cC]]},P9={provide:bs,useFactory:A9,deps:[[new wn,cC],Xr]};function uO(n,...e){return lt("angularfire",Xi.full,"fst"),Yn([P9,R9,{provide:cC,useFactory:x9(n),multi:!0,deps:[Pe,Ue,eo,is,[new wn,gu],[new wn,Sa],...e]}])}var lC=ut(sO,!0,2);var oc=ut(WM,!0,2);var $m=ut(tC,!0,2);var dO=ut(rO,!0);var Hm=ut(iO,!0);var hO=ut(KM,!0);var Gm=ut(tO,!0,2);var zm=ut(eO,!0,2),qm=ut(XM,!0,2);var fO=ut(cO,!0),pO=ut(oO,!0,2);var mO={production:!1,firebase:{apiKey:"AIzaSyBQ18QYhul1hn4RaOsgCsWUW_YaxrwEoqQ",authDomain:"jeub2-online.firebaseapp.com",projectId:"jeub2-online",storageBucket:"jeub2-online.firebasestorage.app",messagingSenderId:"702638381652",appId:"1:702638381652:web:fd034689545996dd8d2bc1",measurementId:"G-M3MPPHV9VB"}};var me="primary",nd=Symbol("RouteTitle"),pC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function dc(n){return new pC(n)}function N9(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zm(n){return new Promise((e,t)=>{n.pipe(jr()).subscribe({next:r=>e(r),error:r=>t(r)})})}function M9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mr(n[t],e[t]))return!1;return!0}function Mr(n,e){let t=n?mC(n):void 0,r=e?mC(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!CO(n[i],e[i]))return!1;return!0}function mC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function CO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function SO(n){return n.length>0?n[n.length-1]:null}function As(n){return Jc(n)?n:Kr(n)?Oe(Promise.resolve(n)):ve(n)}function DO(n){return Jc(n)?Zm(n):Promise.resolve(n)}var O9={exact:AO,subset:xO},TO={exact:F9,subset:L9,ignored:()=>!0};function gO(n,e,t){return O9[t.paths](n.root,e.root,t.matrixParams)&&TO[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function F9(n,e){return Mr(n,e)}function AO(n,e,t){if(!Ss(n.segments,e.segments)||!Ym(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!AO(n.children[r],e.children[r],t))return!1;return!0}function L9(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>CO(n[t],e[t]))}function xO(n,e,t){return RO(n,e,e.segments,t)}function RO(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ss(i,t)||e.hasChildren()||!Ym(i,t,r))}else if(n.segments.length===t.length){if(!Ss(n.segments,t)||!Ym(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!xO(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ss(n.segments,i)||!Ym(n.segments,i,r)||!n.children[me]?!1:RO(n.children[me],e,o,r)}}function Ym(n,e,t){return e.every((r,i)=>TO[t](n[i].parameters,r.parameters))}var Or=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Le([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=dc(this.queryParams),this._queryParamMap}toString(){return j9.serialize(this)}},Le=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qm(this)}},Cs=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=dc(this.parameters),this._parameterMap}toString(){return kO(this)}};function V9(n,e){return Ss(n,e)&&n.every((t,r)=>Mr(t.parameters,e[r].parameters))}function Ss(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function U9(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===me&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==me&&(t=t.concat(e(i,r)))}),t}var mc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>new Eo,providedIn:"root"})}return n})(),Eo=class{parse(e){let t=new vC(e);return new Or(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${zu(e.root,!0)}`,r=H9(e.queryParams),i=typeof e.fragment=="string"?`#${B9(e.fragment)}`:"";return`${t}${r}${i}`}},j9=new Eo;function Qm(n){return n.segments.map(e=>kO(e)).join("/")}function zu(n,e){if(!n.hasChildren())return Qm(n);if(e){let t=n.children[me]?zu(n.children[me],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==me&&r.push(`${i}:${zu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=U9(n,(r,i)=>i===me?[zu(n.children[me],!1)]:[`${i}:${zu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[me]!=null?`${Qm(n)}/${t[0]}`:`${Qm(n)}/(${t.join("//")})`}}function PO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wm(n){return PO(n).replace(/%3B/gi,";")}function B9(n){return encodeURI(n)}function gC(n){return PO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jm(n){return decodeURIComponent(n)}function vO(n){return Jm(n.replace(/\+/g,"%20"))}function kO(n){return`${gC(n.path)}${$9(n.parameters)}`}function $9(n){return Object.entries(n).map(([e,t])=>`;${gC(e)}=${gC(t)}`).join("")}function H9(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Wm(t)}=${Wm(i)}`).join("&"):`${Wm(t)}=${Wm(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var G9=/^[^\/()?;#]+/;function uC(n){let e=n.match(G9);return e?e[0]:""}var z9=/^[^\/()?;=#]+/;function q9(n){let e=n.match(z9);return e?e[0]:""}var W9=/^[^=?&#]+/;function K9(n){let e=n.match(W9);return e?e[0]:""}var Y9=/^[^&#]+/;function Q9(n){let e=n.match(Y9);return e?e[0]:""}var vC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[me]=new Le(e,t)),r}parseSegment(){let e=uC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new Cs(Jm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=q9(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=uC(this.remaining);i&&(r=i,this.capture(r))}e[Jm(t)]=Jm(r)}parseQueryParam(e){let t=K9(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Q9(this.remaining);s&&(r=s,this.capture(r))}let i=vO(t),o=vO(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=uC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=me);let s=this.parseChildren();t[o??me]=Object.keys(s).length===1&&s[me]?s[me]:new Le([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function NO(n){return n.segments.length>0?new Le([],{[me]:n}):n}function MO(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=MO(i);if(r===me&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Le(n.segments,e);return J9(t)}function J9(n){if(n.numberOfChildren===1&&n.children[me]){let e=n.children[me];return new Le(n.segments.concat(e.segments),e.children)}return n}function hc(n){return n instanceof Or}function Z9(n,e,t=null,r=null,i=new Eo){let o=OO(n);return FO(o,e,t,r,i)}function OO(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Le(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=NO(r);return e??i}function FO(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return dC(o,o,o,t,r,i);let s=X9(e);if(s.toRoot())return dC(o,o,new Le([],{}),t,r,i);let a=eq(s,o,n),c=a.processChildren?Wu(a.segmentGroup,a.index,s.commands):VO(a.segmentGroup,a.index,s.commands);return dC(o,a.segmentGroup,c,t,r,i)}function Xm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Yu(n){return typeof n=="object"&&n!=null&&n.outlets}function _O(n,e,t){n||="\u0275";let r=new Or;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function dC(n,e,t,r,i,o){let s={};for(let[u,d]of Object.entries(r??{}))s[u]=Array.isArray(d)?d.map(p=>_O(u,p,o)):_O(u,d,o);let a;n===e?a=t:a=LO(n,e,t);let c=NO(MO(a));return new Or(c,s,i)}function LO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=LO(o,e,t)}),new Le(n.segments,r)}var eg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Xm(r[0]))throw new W(4003,!1);let i=r.find(Yu);if(i&&i!==SO(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function X9(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new eg(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new eg(t,e,r)}var ac=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function eq(n,e,t){if(n.isAbsolute)return new ac(e,!0,0);if(!t)return new ac(e,!1,NaN);if(t.parent===null)return new ac(t,!0,0);let r=Xm(n.commands[0])?0:1,i=t.segments.length-1+r;return tq(t,i,n.numberOfDoubleDots)}function tq(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new ac(r,!1,i-o)}function nq(n){return Yu(n[0])?n[0].outlets:{[me]:n}}function VO(n,e,t){if(n??=new Le([],{}),n.segments.length===0&&n.hasChildren())return Wu(n,e,t);let r=rq(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Le(n.segments.slice(0,r.pathIndex),{});return o.children[me]=new Le(n.segments.slice(r.pathIndex),n.children),Wu(o,0,i)}else return r.match&&i.length===0?new Le(n.segments,{}):r.match&&!n.hasChildren()?_C(n,e,t):r.match?Wu(n,0,i):_C(n,e,t)}function Wu(n,e,t){if(t.length===0)return new Le(n.segments,{});{let r=nq(t),i={};if(Object.keys(r).some(o=>o!==me)&&n.children[me]&&n.numberOfChildren===1&&n.children[me].segments.length===0){let o=Wu(n.children[me],e,t);return new Le(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=VO(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Le(n.segments,i)}}function rq(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Yu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!EO(c,u,s))return o;r+=2}else{if(!EO(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function _C(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Yu(o)){let c=iq(o.outlets);return new Le(r,c)}if(i===0&&Xm(t[0])){let c=n.segments[e];r.push(new Cs(c.path,yO(t[0]))),i++;continue}let s=Yu(o)?o.outlets[me]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Xm(a)?(r.push(new Cs(s,yO(a))),i+=2):(r.push(new Cs(s,{})),i++)}return new Le(r,{})}function iq(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=_C(new Le([],{}),0,r))}),e}function yO(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function EO(n,e,t){return n==t.path&&Mr(e,t.parameters)}var cc="imperative",Pt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Pt||{}),Hn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ds=class extends Hn{type=Pt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fr=class extends Hn{urlAfterRedirects;type=Pt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(vn||{}),Qu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Qu||{}),gi=class extends Hn{reason;code;type=Pt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},vi=class extends Hn{reason;code;type=Pt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ju=class extends Hn{error;target;type=Pt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tg=class extends Hn{urlAfterRedirects;state;type=Pt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yC=class extends Hn{urlAfterRedirects;state;type=Pt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},EC=class extends Hn{urlAfterRedirects;state;shouldActivate;type=Pt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},IC=class extends Hn{urlAfterRedirects;state;type=Pt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bC=class extends Hn{urlAfterRedirects;state;type=Pt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wC=class{route;type=Pt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},CC=class{route;type=Pt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},SC=class{snapshot;type=Pt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},DC=class{snapshot;type=Pt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},TC=class{snapshot;type=Pt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},AC=class{snapshot;type=Pt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zu=class{routerEvent;position;anchor;type=Pt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Xu=class{},fc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function oq(n){return!(n instanceof Xu)&&!(n instanceof fc)}function sq(n,e){return n.providers&&!n._injector&&(n._injector=va(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lr(n){return n.outlet||me}function aq(n,e){let t=n.filter(r=>lr(r)===e);return t.push(...n.filter(r=>lr(r)!==e)),t}function gc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var xC=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return gc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new vc(this.rootInjector)}},vc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xC(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(te(st))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ng=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=RC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=RC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=PC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return PC(e,this._root).map(t=>t.value)}};function RC(n,e){if(n===e.value)return e;for(let t of e.children){let r=RC(n,t);if(r)return r}return null}function PC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=PC(n,t);if(r.length)return r.unshift(e),r}return[]}var Pn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function sc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var rg=class extends ng{snapshot;constructor(e,t){super(e),this.snapshot=t,VC(this,e)}toString(){return this.snapshot.toString()}};function UO(n){let e=cq(n),t=new ot([new Cs("",{})]),r=new ot({}),i=new ot({}),o=new ot({}),s=new ot(""),a=new Ts(t,r,o,s,i,me,n,e.root);return a.snapshot=e.root,new rg(new Pn(a,[]),e)}function cq(n){let e={},t={},r={},o=new lc([],e,r,"",t,me,n,null,{});return new og("",new Pn(o,[]))}var Ts=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(De(u=>u[nd]))??ve(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(De(e=>dc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(De(e=>dc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ig(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&BO(i)&&(r.resolve[nd]=i.title),r}var lc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[nd]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=dc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=dc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},og=class extends ng{url;constructor(e,t){super(t),this.url=e,VC(this,t)}toString(){return jO(this._root)}};function VC(n,e){e.value._routerState=n,e.children.forEach(t=>VC(n,t))}function jO(n){let e=n.children.length>0?` { ${n.children.map(jO).join(", ")} } `:"";return`${n.value}${e}`}function hC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mr(e.params,t.params)||n.paramsSubject.next(t.params),M9(e.url,t.url)||n.urlSubject.next(t.url),Mr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function kC(n,e){let t=Mr(n.params,e.params)&&V9(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||kC(n.parent,e.parent))}function BO(n){return typeof n.title=="string"||n.title===null}var lq=new q(""),$O=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=me;activateEvents=new Be;deactivateEvents=new Be;attachEvents=new Be;detachEvents=new Be;routerOutletData=_R();parentContexts=N(vc);location=N(hn);changeDetector=N(Ut);inputBinder=N(rd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new NC(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=pt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ir]})}return n})(),NC=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ts?this.route:e===vc?this.childContexts:e===lq?this.outletData:this.parent.get(e,t)}},rd=new q(""),UC=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Eh([r.queryParams,r.params,r.data]).pipe(un(([o,s,a],c)=>(a=O(O(O({},o),s),a),c===0?ve(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=CR(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),HO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=at({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&_e(0,"router-outlet")},dependencies:[$O],encapsulation:2})}return n})();function jC(n){let e=n.children&&n.children.map(jC),t=e?Z(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==me&&(t.component=HO),t}function uq(n,e,t){let r=ed(n,e._root,t?t._root:void 0);return new rg(r,e)}function ed(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=dq(n,e,t);return new Pn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ed(n,a)),s}}let r=hq(e.value),i=e.children.map(o=>ed(n,o));return new Pn(r,i)}}function dq(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ed(n,r,i);return ed(n,r)})}function hq(n){return new Ts(new ot(n.url),new ot(n.params),new ot(n.queryParams),new ot(n.fragment),new ot(n.data),n.outlet,n.component,n)}var td=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},GO="ngNavigationCancelingError";function sg(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=hc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=zO(!1,vn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function zO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[GO]=!0,t.cancellationCode=e,t}function fq(n){return qO(n)&&hc(n.url)}function qO(n){return!!n&&n[GO]}var pq=(n,e,t,r)=>De(i=>(new MC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),MC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=sc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=sc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=sc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=sc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new AC(o.value.snapshot))}),e.children.length&&this.forwardEvent(new DC(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(hC(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),hC(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ag=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},uc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function mq(n,e,t){let r=n._root,i=e?e._root:null;return qu(r,i,t,[r.value])}function gq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function _c(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!i_(n)?n:e.get(n):r}function qu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=sc(e);return n.children.forEach(s=>{vq(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ku(a,t.getContext(s),i)),i}function vq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=_q(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ag(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?qu(n,e,a?a.children:null,r,i):qu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new uc(a.outlet.component,s))}else s&&Ku(e,a,i),i.canActivateChecks.push(new ag(r)),o.component?qu(n,null,a?a.children:null,r,i):qu(n,null,t,r,i);return i}function _q(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ss(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ss(n.url,e.url)||!Mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kC(n,e)||!Mr(n.queryParams,e.queryParams);case"paramsChange":default:return!kC(n,e)}}function Ku(n,e,t){let r=sc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ku(s,e.children.getContext(o),t):Ku(s,null,t):Ku(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new uc(e.outlet.component,i)):t.canDeactivateChecks.push(new uc(null,i)):t.canDeactivateChecks.push(new uc(null,i))}function id(n){return typeof n=="function"}function yq(n){return typeof n=="boolean"}function Eq(n){return n&&id(n.canLoad)}function Iq(n){return n&&id(n.canActivate)}function bq(n){return n&&id(n.canActivateChild)}function wq(n){return n&&id(n.canDeactivate)}function Cq(n){return n&&id(n.canMatch)}function WO(n){return n instanceof Ro||n?.name==="EmptyError"}var Km=Symbol("INITIAL_VALUE");function pc(){return un(n=>Eh(n.map(e=>e.pipe(mt(1),qs(Km)))).pipe(De(e=>{for(let t of e)if(t!==!0){if(t===Km)return Km;if(t===!1||Sq(t))return t}return!0}),Xt(e=>e!==Km),mt(1)))}function Sq(n){return hc(n)||n instanceof td}function KO(n){return n.aborted?ve(void 0).pipe(mt(1)):new le(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function YO(n){return dr(KO(n))}function Dq(n,e){return Nt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ve(Z(O({},t),{guardsResult:!0})):Tq(s,r,i,n).pipe(Nt(a=>a&&yq(a)?Aq(r,o,n,e):ve(a)),De(a=>Z(O({},t),{guardsResult:a})))})}function Tq(n,e,t,r){return Oe(n).pipe(Nt(i=>Nq(i.component,i.route,t,e,r)),jr(i=>i!==!0,!0))}function Aq(n,e,t,r){return Oe(e).pipe(zs(i=>Hs(Rq(i.route.parent,r),xq(i.route,r),kq(n,i.path,t),Pq(n,i.route,t))),jr(i=>i!==!0,!0))}function xq(n,e){return n!==null&&e&&e(new TC(n)),ve(!0)}function Rq(n,e){return n!==null&&e&&e(new SC(n)),ve(!0)}function Pq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ve(!0);let i=r.map(o=>Zc(()=>{let s=gc(e)??t,a=_c(o,s),c=Iq(a)?a.canActivate(e,n):gt(s,()=>a(e,n));return As(c).pipe(jr())}));return ve(i).pipe(pc())}function kq(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>gq(s)).filter(s=>s!==null).map(s=>Zc(()=>{let a=s.guards.map(c=>{let u=gc(s.node)??t,d=_c(c,u),p=bq(d)?d.canActivateChild(r,n):gt(u,()=>d(r,n));return As(p).pipe(jr())});return ve(a).pipe(pc())}));return ve(o).pipe(pc())}function Nq(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ve(!0);let s=o.map(a=>{let c=gc(e)??i,u=_c(a,c),d=wq(u)?u.canDeactivate(n,e,t,r):gt(c,()=>u(n,e,t,r));return As(d).pipe(jr())});return ve(s).pipe(pc())}function Mq(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return ve(!0);let s=o.map(a=>{let c=_c(a,n),u=Eq(c)?c.canLoad(e,t):gt(n,()=>c(e,t)),d=As(u);return i?d.pipe(YO(i)):d});return ve(s).pipe(pc(),QO(r))}function QO(n){return Dv(Mt(e=>{if(typeof e!="boolean")throw sg(n,e)}),De(e=>e===!0))}function Oq(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return ve(!0);let s=o.map(a=>{let c=_c(a,n),u=Cq(c)?c.canMatch(e,t):gt(n,()=>c(e,t)),d=As(u);return i?d.pipe(YO(i)):d});return ve(s).pipe(pc(),QO(r))}var ws=class JO extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,JO.prototype)}},OC=class ZO extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,ZO.prototype)}};function Fq(n){throw new W(4e3,!1)}function Lq(n){throw zO(!1,vn.GuardRejected)}var Vq=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[me])throw Fq(`${e.redirectTo}`);i=i.children[me]}}async applyRedirectCommands(e,t,r,i,o){let s=await Uq(t,i,o);if(s instanceof Or)throw new OC(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new OC(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Or(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Le(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Uq(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:p}=e;return Zm(As(gt(t,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p}))))}var FC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jq(n,e,t,r,i,o){let s=XO(n,e,t);return s.matched?(r=sq(e,r),Oq(r,e,t,i,o).pipe(De(a=>a===!0?s:O({},FC)))):ve(s)}function XO(n,e,t){if(e.path==="**")return Bq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},FC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||N9)(t,n,e);if(!i)return O({},FC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Bq(n){return{matched:!0,parameters:n.length>0?SO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function IO(n,e,t,r){return t.length>0&&Gq(n,t,r)?{segmentGroup:new Le(e,Hq(r,new Le(t,n.children))),slicedSegments:[]}:t.length===0&&zq(n,t,r)?{segmentGroup:new Le(n.segments,$q(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Le(n.segments,n.children),slicedSegments:t}}function $q(n,e,t,r){let i={};for(let o of t)if(cg(n,e,o)&&!r[lr(o)]){let s=new Le([],{});i[lr(o)]=s}return O(O({},r),i)}function Hq(n,e){let t={};t[me]=e;for(let r of n)if(r.path===""&&lr(r)!==me){let i=new Le([],{});t[lr(r)]=i}return t}function Gq(n,e,t){return t.some(r=>cg(n,e,r)&&lr(r)!==me)}function zq(n,e,t){return t.some(r=>cg(n,e,r))}function cg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qq(n,e,t){return e.length===0&&!n.children[t]}var Wq=class{};async function Kq(n,e,t,r,i,o,s="emptyOnly",a){return new Qq(n,e,t,r,i,s,o,a).recognize()}var Yq=31,Qq=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new Vq(this.urlSerializer,this.urlTree)}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}async recognize(){let e=IO(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Pn(r,t),o=new og("",i),s=Z9(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let t=new lc([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),me,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,me,t),rootSnapshot:t}}catch(r){if(r instanceof OC)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ws?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=await this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof Pn?[s]:[]}async processChildren(e,t,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let u=r.children[c],d=aq(t,c),p=await this.processSegmentGroup(e,d,u,c,i);s.push(...p)}let a=eF(s);return Jq(a),a}async processSegment(e,t,r,i,o,s,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a)}catch(u){if(u instanceof ws||WO(u))continue;throw u}if(qq(r,i,o))return new Wq;throw new ws(r)}async processSegmentAgainstRoute(e,t,r,i,o,s,a,c){if(lr(r)!==s&&(s===me||!cg(i,o,r)))throw new ws(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c);throw new ws(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:p,remainingSegments:m}=XO(t,i,o);if(!c)throw new ws(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Yq&&(this.allowRedirects=!1));let y=new lc(o,u,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,bO(i),lr(i),i.component??i._loadedComponent??null,i,wO(i)),T=ig(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let V=await this.applyRedirects.applyRedirectCommands(d,i.redirectTo,p,y,e),M=await this.applyRedirects.lineralizeSegments(i,V);return this.processSegment(e,r,t,M.concat(m),s,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Zm(jq(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new ws(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),u=r._loadedInjector??e,{parameters:d,consumedSegments:p,remainingSegments:m}=a,y=new lc(p,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,bO(r),lr(r),r.component??r._loadedComponent??null,r,wO(r)),T=ig(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(T.params),y.data=Object.freeze(T.data);let{segmentGroup:V,slicedSegments:M}=IO(t,p,m,c);if(M.length===0&&V.hasChildren()){let oe=await this.processChildren(u,c,V,y);return new Pn(y,oe)}if(c.length===0&&M.length===0)return new Pn(y,[]);let j=lr(r)===o,ee=await this.processSegment(u,c,V,M,j?me:o,!0,y);return new Pn(y,ee instanceof Pn?[ee]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Zm(Mq(e,t,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,o}throw Lq(t)}return{routes:[],injector:e}}};function Jq(n){n.sort((e,t)=>e.value.outlet===me?-1:t.value.outlet===me?1:e.value.outlet.localeCompare(t.value.outlet))}function Zq(n){let e=n.value.routeConfig;return e&&e.path===""}function eF(n){let e=[],t=new Set;for(let r of n){if(!Zq(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=eF(r.children);e.push(new Pn(r.value,i))}return e.filter(r=>!t.has(r))}function bO(n){return n.data||{}}function wO(n){return n.resolve||{}}var Xq=new q("",{factory:()=>Kq});function eW(n,e,t,r,i,o,s){let a=n.get(Xq);return Nt(c=>ve(c).pipe(un(u=>a(n,e,t,r,u.extractedUrl,i,o,s)),De(({state:u,tree:d})=>Z(O({},c),{targetSnapshot:u,urlAfterRedirects:d}))))}function tW(n,e){return Nt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ve(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of tF(c))s.add(u);let a=0;return Oe(s).pipe(zs(c=>o.has(c)?nW(c,r,n,e):(c.data=ig(c,c.parent,n).resolve,ve(void 0))),Mt(()=>a++),wh(1),Nt(c=>a===s.size?ve(t):zt))})}function tF(n){let e=n.children.map(t=>tF(t)).flat();return[n,...e]}function nW(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!BO(i)&&(o[nd]=i.title),Zc(()=>(n.data=ig(n,n.parent,t).resolve,rW(o,n,e,r).pipe(De(s=>(n._resolvedData=s,n.data=O(O({},n.data),s),null)))))}function rW(n,e,t,r){let i=mC(n);if(i.length===0)return ve({});let o={};return Oe(i).pipe(Nt(s=>iW(n[s],e,t,r).pipe(jr(),Mt(a=>{if(a instanceof td)throw sg(new Eo,a);o[s]=a}))),wh(1),De(()=>o),Gs(s=>WO(s)?zt:Nv(s)))}function iW(n,e,t,r){let i=gc(e)??r,o=_c(n,i),s=o.resolve?o.resolve(e,t):gt(i,()=>o(e,t));return As(s)}function fC(n){return un(e=>{let t=n(e);return t?Oe(t).pipe(De(()=>e)):ve(e)})}var nF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===me);return r}getResolvedTitleForRoute(t){return t.data[nd]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>N(oW),providedIn:"root"})}return n})(),oW=(()=>{class n extends nF{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(te(o1))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yc=new q("",{factory:()=>({})}),od=new q(""),lg=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=N(p0);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await DO(gt(t,()=>r.loadComponent())),s=await iF(rF(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await sW(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function sW(n,e,t,r){let i=await DO(gt(t,()=>n.loadChildren())),o=await iF(rF(i)),s;o instanceof bf||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(n);let a,c,u=!1;return Array.isArray(s)?(c=s,u=!0):(a=s.create(t).injector,c=a.get(od,[],{optional:!0,self:!0}).flat()),{routes:c.map(jC),injector:a}}function aW(n){return n&&typeof n=="object"&&"default"in n}function rF(n){return aW(n)?n.default:n}async function iF(n){return n}var BC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>N(cW),providedIn:"root"})}return n})(),cW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$C=new q(""),HC=new q("");function oF(n,e,t){let r=n.get(HC),i=n.get(Je);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),lW(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&gt(n,()=>c({transition:a,from:e,to:t})),s}function lW(n){return new Promise(e=>{Wo({read:()=>setTimeout(e)},{injector:n})})}var uW=()=>{},GC=new q(""),ug=(()=>{class n{currentNavigation=Lt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Lt(null);events=new fe;transitionAbortWithErrorSubject=new fe;configLoader=N(lg);environmentInjector=N(st);destroyRef=N(On);urlSerializer=N(mc);rootContexts=N(vc);location=N(Yi);inputBindingEnabled=N(rd,{optional:!0})!==null;titleStrategy=N(nF);options=N(yc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=N(BC);createViewTransition=N($C,{optional:!0});navigationErrorHandler=N(GC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ve(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new wC(i)),r=i=>this.events.next(new CC(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;ft(()=>{this.transitions?.next(Z(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new ot(null),this.transitions.pipe(Xt(r=>r!==null),un(r=>{let i=!1,o=new AbortController;return ve(r).pipe(un(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",vn.SupersededByNewNavigation),zt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?Z(O({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new vi(s.id,this.urlSerializer.serialize(s.rawUrl),"",Qu.IgnoredSameUrlNavigation)),s.resolve(!1),zt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ve(s).pipe(un(d=>(this.events.next(new Ds(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?zt:Promise.resolve(d))),eW(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Mt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=d.urlAfterRedirects,m));let p=new tg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:d,extractedUrl:p,source:m,restoredState:y,extras:T}=s,V=new Ds(d,this.urlSerializer.serialize(p),m,y);this.events.next(V);let M=UO(this.rootComponentType).snapshot;return this.currentTransition=r=Z(O({},s),{targetSnapshot:M,urlAfterRedirects:p,extras:Z(O({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(j=>(j.finalUrl=p,j)),ve(r)}else return this.events.next(new vi(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Qu.IgnoredByUrlHandlingStrategy)),s.resolve(!1),zt}),Mt(s=>{let a=new yC(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),De(s=>(this.currentTransition=r=Z(O({},s),{guards:mq(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),Dq(this.environmentInjector,s=>this.events.next(s)),Mt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw sg(this.urlSerializer,s.guardsResult);let a=new EC(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Xt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",vn.GuardRejected),!1)),fC(s=>{if(s.guards.canActivateChecks.length!==0)return ve(s).pipe(Mt(a=>{let c=new IC(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),un(a=>{let c=!1;return ve(a).pipe(tW(this.paramsInheritanceStrategy,this.environmentInjector),Mt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",vn.NoDataFromResolver)}}))}),Mt(a=>{let c=new bC(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),fC(s=>{let a=u=>{let d=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let p=gc(u)??this.environmentInjector;d.push(this.configLoader.loadComponent(p,u.routeConfig).then(m=>{u.component=m}))}for(let p of u.children)d.push(...a(p));return d},c=a(s.targetSnapshot.root);return c.length===0?ve(s):Oe(Promise.all(c).then(()=>s))}),fC(()=>this.afterPreactivation()),un(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Oe(c).pipe(De(()=>r)):ve(r)}),De(s=>{let a=uq(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Z(O({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Mt(()=>{this.events.next(new Xu)}),pq(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),mt(1),dr(KO(o.signal).pipe(Xt(()=>!i&&!r.targetRouterState),Mt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",vn.Aborted)}))),Mt({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=uW,a)),this.lastSuccessfulNavigation.set(ft(this.currentNavigation)),this.events.next(new Fr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),dr(this.transitionAbortWithErrorSubject.pipe(Mt(s=>{throw s}))),Lv(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",vn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Gs(s=>{if(this.destroyed)return r.resolve(!1),zt;if(i=!0,qO(s))this.events.next(new gi(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),fq(s)?this.events.next(new fc(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ju(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=gt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof td){let{message:u,cancellationCode:d}=sg(this.urlSerializer,c);this.events.next(new gi(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new fc(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return zt}))}))}cancelNavigationTransition(t,r,i){let o=new gi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ft(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dW(n){return n!==cc}var hW=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>N(fW),providedIn:"root"})}return n})(),LC=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},fW=(()=>{class n extends LC{static \u0275fac=(()=>{let t;return function(i){return(t||(t=zo(n)))(i||n)}})();static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zC=(()=>{class n{urlSerializer=N(mc);options=N(yc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=N(Yi);urlHandlingStrategy=N(BC);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Or;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Or?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=UO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>N(sF),providedIn:"root"})}return n})(),sF=(()=>{class n extends zC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ds?this.updateStateMemento():t instanceof vi?this.commitTransition(r):t instanceof tg?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Xu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof gi&&t.code!==vn.SupersededByNewNavigation&&t.code!==vn.Redirect?this.restoreHistory(r):t instanceof Ju?this.restoreHistory(r,!0):t instanceof Fr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=zo(n)))(i||n)}})();static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qC(n,e){n.events.pipe(Xt(t=>t instanceof Fr||t instanceof gi||t instanceof Ju||t instanceof vi),De(t=>t instanceof Fr||t instanceof vi?0:(t instanceof gi?t.code===vn.Redirect||t.code===vn.SupersededByNewNavigation:!1)?2:1),Xt(t=>t!==2),mt(1)).subscribe(()=>{e()})}var pW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xs=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=N(o0);stateManager=N(zC);options=N(yc,{optional:!0})||{};pendingTasks=N(Gr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=N(ug);urlSerializer=N(mc);location=N(Yi);urlHandlingStrategy=N(BC);injector=N(st);_events=new fe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=N(hW);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=N(od,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!N(rd,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new je;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=ft(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof gi&&r.code!==vn.Redirect&&r.code!==vn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fr)this.navigated=!0;else if(r instanceof fc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dW(i.source)},s);this.scheduleNavigation(a,cc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}oq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),cc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=O({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Fn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ft(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(jC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=OO(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return FO(p,t,d,u??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=hc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,cc,null,r)}navigate(t,r={skipLocationChange:!1}){return gW(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Mi(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},pW):r===!1?i=O({},mW):i=r,hc(t))return gO(this.currentUrlTree,t,i);let o=this.parseUrl(t);return gO(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((p,m)=>{a=p,c=m});let d=this.pendingTasks.add();return qC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gW(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new W(4008,!1)}var sd=class{};var aF=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Xt(t=>t instanceof Fr),zs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=va(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Oe(i).pipe(Ai())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=Oe(this.loader.loadChildren(t,r)):i=ve(null);let o=i.pipe(Nt(s=>s===null?ve(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Oe([o,s]).pipe(Ai())}else return o})}static \u0275fac=function(r){return new(r||n)(te(xs),te(st),te(sd),te(lg))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cF=new q(""),vW=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=cc;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ds?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof vi&&t.code===Qu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Zu))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Zu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Xy()};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();function _W(){return N(xs).routerState.root}function ad(n,e){return{\u0275kind:n,\u0275providers:e}}function yW(){let n=N(Ue);return e=>{let t=n.get(Vn);if(e!==t.components[0])return;let r=n.get(xs),i=n.get(lF);n.get(KC)===1&&r.initialNavigation(),n.get(hF,null,{optional:!0})?.setUpPreloading(),n.get(cF,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var lF=new q("",{factory:()=>new fe}),KC=new q("",{factory:()=>1});function uF(){let n=[{provide:Fy,useValue:!0},{provide:KC,useValue:0},Df(()=>{let e=N(Ue);return e.get(D0,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(xs),o=e.get(lF);qC(i,()=>{r(!0)}),e.get(ug).afterPreactivation=()=>(r(!0),o.closed?ve(void 0):o),i.initialNavigation()}))})];return ad(2,n)}function dF(){let n=[Df(()=>{N(xs).setUpLocationChangeListener()}),{provide:KC,useValue:2}];return ad(3,n)}var hF=new q("");function fF(n){return ad(0,[{provide:hF,useExisting:aF},{provide:sd,useExisting:n}])}function pF(){return ad(8,[UC,{provide:rd,useExisting:UC}])}function mF(n){ga("NgRouterViewTransitions");let e=[{provide:$C,useValue:oF},{provide:HC,useValue:O({skipNextTransition:!!n?.skipInitialTransition},n)}];return ad(9,e)}var gF=[Yi,{provide:mc,useClass:Eo},xs,vc,{provide:Ts,useFactory:_W},lg,[]],dg=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[gF,[],{provide:od,multi:!0,useValue:t},[],r?.errorHandler?{provide:GC,useValue:r.errorHandler}:[],{provide:yc,useValue:r||{}},r?.useHash?IW():bW(),EW(),r?.preloadingStrategy?fF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?wW(r):[],r?.bindToComponentInputs?pF().\u0275providers:[],r?.enableViewTransitions?mF().\u0275providers:[],CW()]}}static forChild(t){return{ngModule:n,providers:[{provide:od,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=nt({})}return n})();function EW(){return{provide:cF,useFactory:()=>{let n=N(JR),e=N(Pe),t=N(yc),r=N(ug),i=N(mc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new vW(i,r,n,e,t)}}}function IW(){return{provide:Yr,useClass:O0}}function bW(){return{provide:Yr,useClass:Vf}}function wW(n){return[n.initialNavigation==="disabled"?dF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?uF().\u0275providers:[]]}var WC=new q("");function CW(){return[{provide:WC,useFactory:yW},{provide:Tf,multi:!0,useExisting:WC}]}var DW=[],hg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ct({type:n});static \u0275inj=nt({imports:[dg.forRoot(DW),dg]})};var fg=(o=>(o.CLOTHING_STORE="CLOTHING_STORE",o.FREELANCE_DEV="FREELANCE_DEV",o.WEB_AGENCY="WEB_AGENCY",o.FOODTRUCK="FOODTRUCK",o.FACTORY="FACTORY",o))(fg||{});var pg=(i=>(i.CHAIR="CHAIR",i.SCREEN="SCREEN",i.COFFEE="COFFEE",i.PC="PC",i))(pg||{}),cd=(u=>(u.BUN="BUN",u.STEAK="STEAK",u.CHEESE="CHEESE",u.SALAD="SALAD",u.TOMATO="TOMATO",u.SAUCE="SAUCE",u.ONION="ONION",u.PICKLE="PICKLE",u.BACON="BACON",u))(cd||{});var ld=[{id:"DEFAULT",name:"VS Code Dark",cost:0,bgClass:"bg-[#1e1e1e]",textClass:"text-slate-200",accentClass:"text-blue-400",cursorClass:"bg-blue-500",borderClass:"border-slate-700",successClass:"text-green-400"},{id:"MATRIX",name:"The Matrix",cost:2500,bgClass:"bg-black",textClass:"text-green-700 font-mono",accentClass:"text-green-400",cursorClass:"bg-green-500",borderClass:"border-green-800",successClass:"text-green-400 neon-glow"},{id:"DRACULA",name:"Dracula",cost:5e3,bgClass:"bg-[#282a36]",textClass:"text-[#f8f8f2]",accentClass:"text-[#bd93f9]",cursorClass:"bg-[#bd93f9]",borderClass:"border-[#6272a4]",successClass:"text-[#ff79c6] drop-shadow-md"},{id:"SOLARIZED",name:"Solarized Light",cost:1e4,bgClass:"bg-[#fdf6e3]",textClass:"text-[#657b83]",accentClass:"text-[#b58900]",cursorClass:"bg-[#d33682]",borderClass:"border-[#93a1a1]",successClass:"text-[#d33682] font-bold"}];var Io=class n{constructor(e,t){this.auth=e;this.firestore=t;this.authInstance=e,this.user$=Ck(this.auth),this.user$.subscribe(r=>{this.currentUserId=r?.uid||null,r&&console.log("\u2705 Connect\xE9:",r.uid)}),this.initAuth()}user$;currentUserId=null;authInstance;async initAuth(){try{typeof __initial_auth_token<"u"&&__initial_auth_token&&await Tk(this.auth,__initial_auth_token)}catch{console.warn("Auth auto failed")}}async loginAnonymous(){return await Dk(this.auth)}async loginGoogle(){try{let e=new TI;return e.setCustomParameters({prompt:"select_account"}),await Ak(this.auth,e)}catch(e){throw console.warn("Google Auth Error",e),e}}async logout(){return await xk(this.auth)}async saveProgress(e){if(!this.currentUserId)return;let t=$m(this.firestore,"players",this.currentUserId);try{await pO(t,Z(O({},e),{leaderboardStats:{money:e.money,prestige:e.freelanceUpgrades?.bossBeaten||0,username:e.user?.username||"Anonyme",creationDate:e.user?.creationDate||Date.now(),holdingId:e.user?.holdingId||null,stats:e.stats||{}},lastUpdated:Date.now()}),{merge:!0})}catch(r){console.error(r)}}async loadProgress(){if(!this.currentUserId)return null;try{let e=await dO($m(this.firestore,"players",this.currentUserId));return e.exists()?e.data():null}catch{return null}}getLeaderboard(){let e=qm(oc(this.firestore,"players"),zm("leaderboardStats.money","desc"),Gm(50));return Oe(Hm(e)).pipe(De(t=>t.docs.map(r=>O({id:r.id},r.data().leaderboardStats))))}getHoldings(){let e=qm(oc(this.firestore,"holdings"),zm("totalValuation","desc"),Gm(20));return Oe(Hm(e)).pipe(De(t=>t.docs.map(r=>O({id:r.id},r.data()))))}async createHolding(e,t){if(!this.currentUserId)return;let r={id:"",name:e,leaderName:t,totalValuation:0,membersCount:1,icon:"\u{1F3E2}"};return(await lC(oc(this.firestore,"holdings"),r)).id}getMarketItems(){let e=qm(oc(this.firestore,"market"),zm("timestamp","desc"),Gm(50));return Oe(Hm(e)).pipe(De(t=>t.docs.map(r=>O({id:r.id},r.data()))))}async sellItem(e){await lC(oc(this.firestore,"market"),e)}async buyItem(e){if(!e.id)return"ERROR";if(Date.now()-e.timestamp<1e4)return"SNIPER_PROTECTION";let t=$m(this.firestore,"market",e.id);try{return await fO(this.firestore,async r=>{if(!(await r.get(t)).exists())throw"SOLD";r.delete(t)}),"SUCCESS"}catch{return"SOLD"}}static \u0275fac=function(t){return new(t||n)(te(ds),te(bs))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var QC={DEV_JUNIOR:{role:"DEV_JUNIOR",name:"Stagiaire",baseCost:2e3,costFactor:1.5,baseDailySalary:100,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.2,description:"Code lentement"},DEV_SENIOR:{role:"DEV_SENIOR",name:"Lead Dev",baseCost:1e4,costFactor:1.6,baseDailySalary:800,salaryFactor:1.3,baseEfficiency:4,efficiencyFactor:1.4,description:"Code tr\xE8s vite + Bonus"},COOK:{role:"COOK",name:"Cuisinier",baseCost:500,costFactor:1.55,baseDailySalary:50,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.1,description:"Cuisine"},SERVER:{role:"SERVER",name:"Serveur",baseCost:300,costFactor:1.6,baseDailySalary:40,salaryFactor:1.15,baseEfficiency:5,efficiencyFactor:1.05,description:"Service"},CASHIER:{role:"CASHIER",name:"Caissier",baseCost:200,costFactor:1.4,baseDailySalary:30,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Caisse"},STOCK_MANAGER:{role:"STOCK_MANAGER",name:"Stock",baseCost:500,costFactor:1.4,baseDailySalary:60,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Stock"},WORKER:{role:"WORKER",name:"Ouvrier",baseCost:2e3,costFactor:1.4,baseDailySalary:200,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Prod"},LINE_MANAGER:{role:"LINE_MANAGER",name:"Chef",baseCost:1e4,costFactor:1.5,baseDailySalary:1e3,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.2,description:"Supervision"}},_n=class n{constructor(e){this.firebaseService=e;this.loadLocalState(),xi(this.TICK_RATE_MS).subscribe(()=>this.gameLoop()),xi(6e4).subscribe(()=>this.saveToCloud()),this.firebaseService.user$.subscribe(t=>{t?document.querySelector("app-title-screen")||this.loadCloudDataForUser(t):this.isLoading$.next(!1)})}SAVE_KEY="JEUB2_SAVE_V3_ONLINE";TICK_RATE_MS=1e3;HOURS_PER_TICK=1/60;dayEnded$=new fe;isLoading$=new ot(!0);defaultState={user:{username:"Entrepreneur",title:"D\xE9butant",creationDate:Date.now(),avatarId:"\u{1F468}\u200D\u{1F4BC}"},money:2e3,gems:0,totalMoneyEarned:0,hasCompletedIntro:!1,tutoFlags:{foodtruckIntroSeen:!1},day:1,timeOfDay:6,companies:[this.createCompany("1","CLOTHING_STORE","Friperie Cool",!0,0),this.createCompany("2","FREELANCE_DEV","Agence Web",!1,1e3),this.createCompany("3","FOODTRUCK","Burger Truck",!1,5e3),this.createCompany("4","FACTORY","Usine Tesla",!1,2e4)],employees:[],foodtruckMastery:this.initFoodtruckMastery(),foodtruckUpgrades:{grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:["BUN","STEAK"],maxServiceReached:1,hasKeyboard:!1},freelanceUpgrades:{chairLevel:0,screenLevel:0,coffeeLevel:0,pcLevel:0,bossBeaten:0,contractsCompleted:0,ownedThemes:["DEFAULT"],activeThemeId:"DEFAULT"},dailyStats:{revenue:0,expenses:0,customersServed:0,day:1},quests:[],achievements:[],activeEvents:[],lastSavedAt:Date.now(),lastOnlineAt:Date.now(),stats:{foodtruckIncome:0,freelanceIncome:0,factoryIncome:0,totalPlayTimeMinutes:0}};state$=new ot(this.defaultState);gameState$=this.state$.asObservable();async checkIfUserHasSave(e){return!!await this.firebaseService.loadProgress()}async initializeNewUser(e,t){console.log("\u2728 Initialisation nouveau joueur :",t);let r=JSON.parse(JSON.stringify(this.defaultState));r.foodtruckMastery=this.initFoodtruckMastery(),r.lastSavedAt=Date.now(),r.user={username:t,title:"D\xE9butant",creationDate:Date.now(),avatarId:"\u{1F468}\u200D\u{1F4BC}",holdingId:void 0},this.state$.next(r),this.saveLocalState(),await this.firebaseService.saveProgress(r),this.isLoading$.next(!1)}async loadCloudDataForUser(e){this.isLoading$.next(!0);let t=await this.firebaseService.loadProgress();t?(console.log("\u2601\uFE0F Sauvegarde charg\xE9e."),this.state$.next(t),this.saveLocalState()):console.log("\u{1F195} Compte vide (Reload)."),this.isLoading$.next(!1)}logoutAndClear(){localStorage.removeItem(this.SAVE_KEY),this.resetToDefaultState(!1),this.firebaseService.logout().then(()=>window.location.reload())}hardResetGame(){confirm("Tout effacer ?")&&this.resetToDefaultState(!0)}resetToDefaultState(e){let t=JSON.parse(JSON.stringify(this.defaultState));t.foodtruckMastery=this.initFoodtruckMastery(),t.lastSavedAt=Date.now(),this.state$.next(t),this.saveLocalState(),e&&this.saveToCloud()}updateUsername(e,t=!0){let i=this.state$.getValue().user||this.defaultState.user,o=i&&i.title?i.title:"D\xE9butant",s={username:e,title:o,avatarId:i?.avatarId,holdingId:i?.holdingId,creationDate:i?.creationDate||Date.now()};this.updateState({user:s}),t&&(this.saveLocalState(),this.saveToCloud())}buyPrestigeItem(e){let t=this.state$.getValue(),r="PRESTIGE_"+e.id;if(t.achievements.some(i=>i.id===r))return!1;if(this.spendMoney(e.cost)){let i=[...t.achievements,{id:r,name:e.name,icon:e.icon}];return this.updateState({achievements:i}),this.saveLocalState(),this.saveToCloud(),!0}return!1}buyFreelanceTheme(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=Z(O({},r.freelanceUpgrades),{ownedThemes:[...r.freelanceUpgrades.ownedThemes,e],activeThemeId:e});this.updateState({freelanceUpgrades:i}),this.saveLocalState()}}setFreelanceTheme(e){let t=this.state$.getValue(),r=Z(O({},t.freelanceUpgrades),{activeThemeId:e});this.updateState({freelanceUpgrades:r}),this.saveLocalState()}createCompany(e,t,r,i,o){return{id:e,type:t,name:r,unlocked:i,unlockCost:o,level:1,baseRevenuePerAction:10,revenuePerSecond:0,costPerSecond:0,netProfitPerSecond:0,employees:[]}}unlockCompany(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({companies:r.companies.map(i=>i.id===e?Z(O({},i),{unlocked:!0}):i)}),this.saveLocalState()}}buyFoodtruckUpgrade(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=O({},r.foodtruckUpgrades);e==="grill"?i.grillLevel++:e==="marketing"?i.marketingLevel++:i.serviceLevel++,this.updateState({foodtruckUpgrades:i}),this.saveLocalState()}}unlockIngredient(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=Z(O({},r.foodtruckUpgrades),{unlockedIngredients:[...r.foodtruckUpgrades.unlockedIngredients,e]});this.updateState({foodtruckUpgrades:i}),this.saveLocalState()}}unlockKeyboard(e){if(this.spendMoney(e)){let t=this.state$.getValue(),r=Z(O({},t.foodtruckUpgrades),{hasKeyboard:!0});this.updateState({foodtruckUpgrades:r}),this.saveLocalState()}}incrementContractsCompleted(){let e=this.state$.getValue(),t=Z(O({},e.freelanceUpgrades),{contractsCompleted:(e.freelanceUpgrades.contractsCompleted||0)+1});this.updateState({freelanceUpgrades:t}),this.saveLocalState()}incrementBossBeaten(){let e=this.state$.getValue(),t=Z(O({},e.freelanceUpgrades),{bossBeaten:e.freelanceUpgrades.bossBeaten+1});this.updateState({freelanceUpgrades:t}),this.saveLocalState()}buySetupUpgrade(e,t){let r=this.state$.getValue(),i=0;if(e==="CHAIR"&&(i=r.freelanceUpgrades.chairLevel),e==="SCREEN"&&(i=r.freelanceUpgrades.screenLevel),e==="COFFEE"&&(i=r.freelanceUpgrades.coffeeLevel),e==="PC"&&(i=r.freelanceUpgrades.pcLevel),!(i>=1)&&this.spendMoney(t)){let o=O({},r.freelanceUpgrades);switch(e){case"CHAIR":o.chairLevel=1;break;case"SCREEN":o.screenLevel=1;break;case"COFFEE":o.coffeeLevel=1;break;case"PC":o.pcLevel=1;break}this.updateState({freelanceUpgrades:o}),this.saveLocalState()}}getEmployeeConfig(e){return QC[e]}getNextHireCost(e,t){let r=this.state$.getValue().companies.find(i=>i.id===e);return r?Math.floor(QC[t].baseCost*Math.pow(1.5,r.employees.filter(i=>i.role===t).length)):0}hireEmployee(e,t){let r=this.getNextHireCost(e,t);if(this.spendMoney(r)){let i=this.state$.getValue(),o={id:Math.random().toString(36).substr(2,9),role:t,hiredAt:Date.now(),dailySalary:QC[t].baseDailySalary,efficiency:1,isPaused:!1};this.updateState({companies:i.companies.map(s=>s.id===e?Z(O({},s),{employees:[...s.employees,o]}):s)}),this.saveLocalState()}}upgradeEmployeeSetup(e,t,r){if(this.spendMoney(r)){let i=this.state$.getValue();this.updateState({companies:i.companies.map(o=>o.id===e?Z(O({},o),{employees:o.employees.map(s=>s.id===t?Z(O({},s),{efficiency:s.efficiency+1}):s)}):o)}),this.saveLocalState()}}toggleEmployeePause(e,t){let r=this.state$.getValue();this.updateState({companies:r.companies.map(i=>i.id===e?Z(O({},i),{employees:i.employees.map(o=>o.id===t?Z(O({},o),{isPaused:!o.isPaused}):o)}):i)})}getTotalEmployeePower(e,t){return this.state$.getValue().companies.find(r=>r.type===e)?.employees.filter(r=>r.role===t).length||0}addMoney(e){let t=this.state$.getValue(),r=O({},t.dailyStats||{day:t.day,revenue:0,expenses:0,customersServed:0});e>0&&(r.revenue+=e),this.updateState({money:t.money+e,totalMoneyEarned:e>0?t.totalMoneyEarned+e:t.totalMoneyEarned,dailyStats:r})}spendMoney(e){let t=this.state$.getValue();return t.money>=e?(this.updateState({money:t.money-e}),!0):!1}gameLoop(){let e=this.state$.getValue();if(!e.hasCompletedIntro)return;let t=e.timeOfDay+this.HOURS_PER_TICK,r=e.day,i=O({},e.dailyStats||{day:e.day,revenue:0,expenses:0,customersServed:0});if(t>=24){t=0;let o=0;e.companies.forEach(s=>{s.employees.forEach(a=>{o+=a.dailySalary})}),o>0&&(this.addMoney(-o),i.expenses+=o),this.dayEnded$.next(Z(O({},i),{day:e.day})),r++,i={day:r,revenue:0,expenses:0,customersServed:0}}this.updateState({day:r,timeOfDay:t,dailyStats:i}),this.tickPassiveIncome()}tickPassiveIncome(){let e=this.state$.getValue(),t=0;e.companies.forEach(r=>{r.unlocked&&r.employees.length>0&&(r.type==="FREELANCE_DEV"?r.employees.forEach(i=>{if(!i.isPaused){let o=0;if(i.role==="DEV_JUNIOR"){let s=.05+i.efficiency*.01;Math.random()<s&&(o=100*i.efficiency)}else if(i.role==="DEV_SENIOR"){let s=.02+i.efficiency*.005;Math.random()<s&&(o=1500*i.efficiency)}if(o>0){t+=o;let s=e.stats||{foodtruckIncome:0,freelanceIncome:0,factoryIncome:0,totalPlayTimeMinutes:0};this.updateState({stats:Z(O({},s),{freelanceIncome:s.freelanceIncome+o})})}}}):t+=r.netProfitPerSecond/10)}),t>0&&this.addMoney(t)}completeIntro(){let t=this.state$.getValue().companies.map(r=>r.id==="3"?Z(O({},r),{unlocked:!0}):r);this.updateState({hasCompletedIntro:!0,money:1e4,companies:t}),this.saveLocalState(),this.saveToCloud()}setTimeOfDay(e){this.updateState({timeOfDay:e})}unlockIngredientByService(e){let t=this.state$.getValue();if(!t.foodtruckUpgrades.unlockedIngredients.includes(e)){let r=O({},t.foodtruckUpgrades);r.unlockedIngredients.push(e),this.updateState({foodtruckUpgrades:r}),this.saveLocalState()}}updateMaxServiceReached(e){let t=this.state$.getValue();if(e>t.foodtruckUpgrades.maxServiceReached){let r=Z(O({},t.foodtruckUpgrades),{maxServiceReached:e});this.updateState({foodtruckUpgrades:r}),this.saveLocalState()}}initFoodtruckMastery(){let e={};return Object.values(cd).forEach(t=>e[t]={level:1,xp:0,xpMax:5}),e}updateIngredientMastery(e){this.updateState({foodtruckMastery:e}),this.saveLocalState()}incrementCustomersServed(){let e=this.state$.getValue(),t=O({},e.dailyStats);t.customersServed++,this.updateState({dailyStats:t})}updateState(e){this.state$.next(O(O({},this.state$.getValue()),e))}saveLocalState(){localStorage.setItem(this.SAVE_KEY,JSON.stringify(this.state$.getValue()))}loadLocalState(){let e=localStorage.getItem(this.SAVE_KEY);if(e)try{let t=JSON.parse(e);this.state$.next(O(O({},this.defaultState),t)),this.isLoading$.next(!1)}catch{}}async saveToCloud(){let e=this.state$.getValue();if(this.firebaseService.authInstance.currentUser?.isAnonymous&&(!e.hasCompletedIntro||e.totalMoneyEarned<=2e3))return;let r=e.stats||{foodtruckIncome:0,freelanceIncome:0,factoryIncome:0,totalPlayTimeMinutes:0},i=Z(O({},r),{totalPlayTimeMinutes:(r.totalPlayTimeMinutes||0)+1});this.updateState({stats:i}),await this.firebaseService.saveProgress(Z(O({},e),{stats:i}))}async connectOnline(){}static \u0275fac=function(t){return new(t||n)(te(Io))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gn=class n{audioCtx;isMuted=!1;noiseBuffer;constructor(){let e=window.AudioContext||window.webkitAudioContext;this.audioCtx=new e,this.noiseBuffer=this.createNoiseBuffer(1)}resume(){this.audioCtx.state==="suspended"&&this.audioCtx.resume()}playTone(e,t,r,i,o=0,s=0){if(this.isMuted)return;this.resume();let a=this.audioCtx.currentTime,c=this.audioCtx.createOscillator(),u=this.audioCtx.createGain();if(c.type=t,c.frequency.setValueAtTime(e,a),c.detune.value=o,u.gain.setValueAtTime(i,a),u.gain.exponentialRampToValueAtTime(.001,a+r),s>0){let d=this.audioCtx.createBiquadFilter();d.type="lowpass",d.frequency.setValueAtTime(s,a),c.connect(d).connect(u).connect(this.audioCtx.destination)}else c.connect(u).connect(this.audioCtx.destination);c.start(a),c.stop(a+r)}playNoise(e,t,r,i){if(this.isMuted)return;this.resume();let o=this.audioCtx.currentTime,s=this.audioCtx.createBufferSource();s.buffer=this.noiseBuffer;let a=this.audioCtx.createBiquadFilter();a.type=t,a.frequency.setValueAtTime(r,o);let c=this.audioCtx.createGain();c.gain.setValueAtTime(i,o),c.gain.exponentialRampToValueAtTime(.001,o+e),s.connect(a).connect(c).connect(this.audioCtx.destination),s.start(o),s.stop(o+e)}playCash(){this.playTone(1200,"square",.1,.1),setTimeout(()=>this.playTone(1600,"square",.1,.1),80)}playSuccess(){[523,659,783,1046].forEach((e,t)=>{setTimeout(()=>this.playTone(e,"sine",.2,.1),t*100)})}playError(){this.playTone(150,"sawtooth",.3,.2)}playPop(){this.playTone(600,"sine",.1,.1)}playSoftPop(){this.playTone(400,"sine",.1,.05)}startRainAmbience(){}stopRainAmbience(){}playTrashInBin(){this.playNoise(.2,"lowpass",200,.5)}playPaperSound(){this.playNoise(.1,"highpass",1e3,.3)}playLeafSound(){this.playNoise(.15,"bandpass",500,.2)}playCanSound(){this.playNoise(.1,"highpass",2e3,.4)}playScratchSound(){this.playNoise(.1,"bandpass",800,.3)}playSteakSound(){this.playNoise(.3,"lowpass",400,.4)}playSaladSound(){this.playNoise(.1,"highpass",1500,.3)}getVariation(){return Math.random()*50-25}playKeystroke(){this.playRandomKey()}playRandomKey(){this.playTone(300,"triangle",.05,.1,this.getVariation())}playSpace(){this.playTone(150,"square",.1,.15,this.getVariation())}createNoiseBuffer(e){let t=this.audioCtx.sampleRate*e,r=this.audioCtx.createBuffer(1,t,this.audioCtx.sampleRate),i=r.getChannelData(0);for(let o=0;o<t;o++)i[o]=Math.random()*2-1;return r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var SF=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(X(Wr),X(Vt))};static \u0275dir=pt({type:n})}return n})(),TW=(()=>{class n extends SF{static \u0275fac=(()=>{let t;return function(i){return(t||(t=zo(n)))(i||n)}})();static \u0275dir=pt({type:n,features:[zi]})}return n})(),DF=new q("");var AW={provide:DF,useExisting:Oi(()=>wc),multi:!0};function xW(){let n=Sn()?Sn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var RW=new q(""),wc=(()=>{class n extends SF{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!xW())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(X(Wr),X(Vt),X(RW,8))};static \u0275dir=pt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&z("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[qi([AW]),zi]})}return n})();var PW=new q(""),kW=new q("");function TF(n){return n!=null}function AF(n){return Kr(n)?Oe(n):n}function xF(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function RF(n,e){return e.map(t=>t(n))}function NW(n){return!n.validate}function PF(n){return n.map(e=>NW(e)?e:t=>e.validate(t))}function MW(n){if(!n)return null;let e=n.filter(TF);return e.length==0?null:function(t){return xF(RF(t,e))}}function kF(n){return n!=null?MW(PF(n)):null}function OW(n){if(!n)return null;let e=n.filter(TF);return e.length==0?null:function(t){let r=RF(t,e).map(AF);return Mv(r).pipe(De(xF))}}function NF(n){return n!=null?OW(PF(n)):null}function _F(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function FW(n){return n._rawValidators}function LW(n){return n._rawAsyncValidators}function JC(n){return n?Array.isArray(n)?n:[n]:[]}function gg(n,e){return Array.isArray(n)?n.includes(e):n===e}function yF(n,e){let t=JC(e);return JC(n).forEach(i=>{gg(t,i)||t.push(i)}),t}function EF(n,e){return JC(e).filter(t=>!gg(n,t))}var vg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kF(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=NF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ZC=class extends vg{name;get formDirective(){return null}get path(){return null}},md=class extends vg{_parent=null;name=null;valueAccessor=null},XC=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var yg=(()=>{class n extends XC{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(X(md,2))};static \u0275dir=pt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&We("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[zi]})}return n})();var dd="VALID",mg="INVALID",Ic="PENDING",hd="DISABLED",Rs=class{},_g=class extends Rs{value;source;constructor(e,t){super(),this.value=e,this.source=t}},fd=class extends Rs{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},pd=class extends Rs{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},bc=class extends Rs{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var eS=class extends Rs{source;constructor(e){super(),this.source=e}};function VW(n){return(Eg(n)?n.validators:n)||null}function UW(n){return Array.isArray(n)?kF(n):n||null}function jW(n,e){return(Eg(e)?e.asyncValidators:n)||null}function BW(n){return Array.isArray(n)?NF(n):n||null}function Eg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var tS=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ft(this.statusReactive)}set status(e){ft(()=>this.statusReactive.set(e))}_status=Nl(()=>this.statusReactive());statusReactive=Lt(void 0);get valid(){return this.status===dd}get invalid(){return this.status===mg}get pending(){return this.status==Ic}get disabled(){return this.status===hd}get enabled(){return this.status!==hd}errors;get pristine(){return ft(this.pristineReactive)}set pristine(e){ft(()=>this.pristineReactive.set(e))}_pristine=Nl(()=>this.pristineReactive());pristineReactive=Lt(!0);get dirty(){return!this.pristine}get touched(){return ft(this.touchedReactive)}set touched(e){ft(()=>this.touchedReactive.set(e))}_touched=Nl(()=>this.touchedReactive());touchedReactive=Lt(!1);get untouched(){return!this.touched}_events=new fe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(yF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(EF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(EF(e,this._rawAsyncValidators))}hasValidator(e){return gg(this._rawValidators,e)}hasAsyncValidator(e){return gg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Z(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new pd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new pd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Z(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new fd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new fd(!0,r))}markAsPending(e={}){this.status=Ic;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Z(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hd,this.errors=null,this._forEachChild(i=>{i.disable(Z(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _g(this.value,r)),this._events.next(new bc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=dd,this._forEachChild(r=>{r.enable(Z(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dd||this.status===Ic)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _g(this.value,t)),this._events.next(new bc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Z(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hd:dd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ic,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=AF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new bc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Be,this.statusChanges=new Be}_calculateStatus(){return this._allControlsDisabled()?hd:this.errors?mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ic)?Ic:this._anyControlsHaveStatus(mg)?mg:dd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new fd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new pd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Eg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=UW(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=BW(this._rawAsyncValidators)}};var MF=new q("",{factory:()=>nS}),nS="always";function $W(n,e){return[...e.path,n]}function HW(n,e,t=nS){zW(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),qW(n,e),KW(n,e),WW(n,e),GW(n,e)}function IF(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function GW(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function zW(n,e){let t=FW(n);e.validator!==null?n.setValidators(_F(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=LW(n);e.asyncValidator!==null?n.setAsyncValidators(_F(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();IF(e._rawValidators,i),IF(e._rawAsyncValidators,i)}function qW(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&OF(n,e)})}function WW(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&OF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function OF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function KW(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function YW(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function QW(n){return Object.getPrototypeOf(n.constructor)===TW}function JW(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===wc?t=o:QW(o)?r=o:i=o}),i||r||t||null}function bF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function wF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ZW=class extends tS{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(VW(t),jW(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Eg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(wF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new eS(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){wF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var XW={provide:md,useExisting:Oi(()=>gd)},CF=Promise.resolve(),gd=(()=>{class n extends md{_changeDetectorRef;callSetDisabledState;control=new ZW;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Be;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=JW(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),YW(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){HW(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){CF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Zo(r);CF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?$W(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(X(ZC,9),X(PW,10),X(kW,10),X(DF,10),X(Ut,8),X(MF,8))};static \u0275dir=pt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[qi([XW]),zi,Ir]})}return n})();var e7=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=nt({})}return n})();var FF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:MF,useValue:t.callSetDisabledState??nS}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=nt({imports:[e7]})}return n})();var rS;function t7(){if(rS==null){let n=typeof document<"u"?document.head:null;rS=!!(n&&(n.createShadowRoot||n.attachShadow))}return rS}function Ig(n){if(t7()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function vd(n){return n.composedPath?n.composedPath()[0]:n.target}function VF(n){return n.buttons===0||n.detail===0}function UF(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function jF(n,e=0){return n7(n)?Number(n):arguments.length===2?e:0}function n7(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function _i(n){return n instanceof Vt?n.nativeElement:n}var bg=new WeakMap,BF=(()=>{class n{_appRef;_injector=N(Ue);_environmentInjector=N(st);load(t){let r=this._appRef=this._appRef||this._injector.get(Vn),i=bg.get(r);i||(i={loaders:new Set,refs:[]},bg.set(r,i),r.onDestroy(()=>{bg.get(r)?.refs.forEach(o=>o.destroy()),bg.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(wR(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var iS;try{iS=typeof Intl<"u"&&Intl.v8BreakIterator}catch{iS=!1}var $F=(()=>{class n{_platformId=N(qr);isBrowser=this._platformId?QR(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||iS)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var r7=new q("cdk-dir-doc",{providedIn:"root",factory:()=>N(Je)}),i7=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function o7(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?i7.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var HF=(()=>{class n{get value(){return this.valueSignal()}valueSignal=Lt("ltr");change=new Be;constructor(){let t=N(r7,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(o7(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var s7=20,GF=(()=>{class n{_platform=N($F);_listeners;_viewportSize;_change=new fe;_document=N(Je);constructor(){let t=N(Pe),r=N(Ln).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect(),s=-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:s,left:a}}change(t=s7){return t>0?this._change.pipe(Ov(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=nt({})}return n})();function aS(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?KF(n,e):(r==="input"||r==="select"||r==="textarea")&&WF(n,e),qF("canvas",n,e,KF),qF("input, textarea, select",n,e,WF),e}function qF(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let o=t.querySelectorAll(n);for(let s=0;s<i.length;s++)r(i[s],o[s])}}var a7=0;function WF(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${a7++}`)}function KF(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function pS(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function cS(n,e,t){let{top:r,bottom:i,left:o,right:s}=n;return t>=r&&t<=i&&e>=o&&e<=s}function c7(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,o=e.top+e.height>n.bottom;return t||r||i||o}function Ed(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function YF(n,e,t,r){let{top:i,right:o,bottom:s,left:a,width:c,height:u}=n,d=c*e,p=u*e;return r>i-p&&r<s+p&&t>a-d&&t<o+d}var wg=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:pS(t)})})}handleScroll(e){let t=vd(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,o,s;if(t===this._document){let u=this.getViewportScrollPosition();o=u.top,s=u.left}else o=t.scrollTop,s=t.scrollLeft;let a=i.top-o,c=i.left-s;return this.positions.forEach((u,d)=>{u.clientRect&&t!==d&&t.contains(d)&&Ed(u.clientRect,a,c)}),i.top=o,i.left=s,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function sL(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function mS(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function Cc(n,e){let t=e?"":"none";mS(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function QF(n,e,t){mS(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Cg(n,e){return e&&e!="none"?n+" "+e:n}function JF(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Id(e.left,e.top)}function Id(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function ZF(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function l7(n){let e=getComputedStyle(n),t=oS(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),o=oS(e,"transition-duration"),s=oS(e,"transition-delay");return ZF(o[i])+ZF(s[i])}function oS(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var u7=new Set(["position"]),lS=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,o,s,a,c,u,d){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=u,this._renderer=d}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),XF(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return l7(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(r,e.context);s.detectChanges(),i=sL(s,this._document),this._previewEmbeddedView=s,e.matchSize?JF(i,o):i.style.transform=Id(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=aS(this._rootElement),JF(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return mS(i.style,{"pointer-events":"none",margin:XF(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},u7),Cc(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>i.classList.add(o)):i.classList.add(t)),i}};function XF(n){return"showPopover"in n}var d7={passive:!0},eL={passive:!1},h7={passive:!1,capture:!0},f7=800,tL="cdk-drag-placeholder",nL=new Set(["position"]),uS=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Lt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new fe;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=je.EMPTY;_pointerUpSubscription=je.EMPTY;_scrollSubscription=je.EMPTY;_resizeSubscription=je.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>Cc(t,e)))}_disabled=!1;beforeStarted=new fe;started=new fe;released=new fe;ended=new fe;entered=new fe;exited=new fe;dropped=new fe;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,o,s,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new wg(r),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>_i(r)),this._handles.forEach(r=>Cc(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=_i(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,eL),r.listen(t,"touchstart",this._pointerDown,d7),r.listen(t,"dragstart",this._nativeDragStart,eL)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?_i(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&c7(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,a=o+r,c=s+i;this._rootElement.style.transform=Id(a,c),this._activeTransform={x:a,y:c},this._passiveTransform={x:a,y:c}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Cc(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Cc(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),o=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),c=this._dropContainer;if(!a){this._endDragSequence(e);return}(!c||!c.isDragging()&&!c.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=r.x-i.x+this._passiveTransform.x,o.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){_d(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",p7,h7)}),r){let i=this._rootElement,o=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");o.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new lS(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,t)),QF(i,!1,nL),this._document.body.appendChild(o.replaceChild(s,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=_d(t),o=!i&&t.button!==0,s=this._rootElement,a=vd(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+f7>Date.now(),u=i?UF(t):VF(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||o||c||u)return;if(this._handles.length){let m=s.style;this._rootElementTapHighlight=m.webkitTapHighlightColor||"",m.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(m=>this._updateOnScroll(m)),this._boundaryElement&&(this._boundaryRect=pS(this._boundaryElement));let d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){QF(this._rootElement,!0,nL),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),o=this._getDragDistance(i),s=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:o,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,s,o,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{let s=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(s+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,a),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&vd(a)===this._preview.element&&a.propertyName==="transform")&&(s(),r(),clearTimeout(o))},o=setTimeout(i,t*1.5),s=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=sL(this._placeholderRef,this._document)):r=aS(this._rootElement),r.style.pointerEvents="none",r.classList.add(tL),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():e,s=_d(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),c=s.pageX-o.left-a.left,u=s.pageY-o.top-a.top;return{x:o.left-e.left+c,y:o.top-e.top+u}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=_d(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(s.inverse())}}return{x:i,y:o}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:u}=this._getPreviewRect(),d=a.top+s,p=a.bottom-(u-s),m=a.left+o,y=a.right-(c-o);r=rL(r,m,y),i=rL(i,d,p)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-o.x),a=Math.abs(r-o.y);return s>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>o.y?1:-1,o.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Cc(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=Id(e*r,t*r),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=Cg(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=Id(e,t);this._preview.setTransform(Cg(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let o=i.left-r.left,s=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:_d(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=vd(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&Ed(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Ig(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return _i(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,r){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let i=this._anchor??=aS(this._placeholder);i.classList.remove(tL),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):_i(t.element).appendChild(i)}}};function rL(n,e,t){return Math.max(e,Math.min(t,n))}function _d(n){return n.type[0]==="t"}function p7(n){n.preventDefault()}function aL(n,e,t){let r=iL(e,n.length-1),i=iL(t,n.length-1);if(r===i)return;let o=n[r],s=i<r?-1:1;for(let a=r;a!==i;a+=s)n[a]=n[a+s];n[i]=o}function iL(n,e){return Math.max(0,Math.min(e,n))}var Sg=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,r,i);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",c=o.findIndex(M=>M.drag===e),u=o[s],d=o[c].clientRect,p=u.clientRect,m=c>s?1:-1,y=this._getItemOffsetPx(d,p,m),T=this._getSiblingOffsetPx(c,o,m),V=o.slice();return aL(o,c,s),o.forEach((M,j)=>{if(V[j]===M)return;let ee=M.drag===e,oe=ee?y:T,Se=ee?e.getPlaceholderElement():M.drag.getRootElement();M.offset+=oe;let ht=Math.round(M.offset*(1/M.drag.scale));a?(Se.style.transform=Cg(`translate3d(${ht}px, 0, 0)`,M.initialTransform),Ed(M.clientRect,0,oe)):(Se.style.transform=Cg(`translate3d(0, ${ht}px, 0)`,M.initialTransform),Ed(M.clientRect,oe,0))}),this._previousSwap.overlaps=cS(p,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:s}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,s=this._activeDraggables,a=s.indexOf(e),c=e.getPlaceholderElement(),u=s[o];if(u===e&&(u=s[o+1]),!u&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=s[0]),a>-1&&s.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){let d=u.getRootElement();d.parentElement.insertBefore(c,d),s.splice(o,0,e)}else this._element.appendChild(c),s.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{Ed(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:pS(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=i?t.left-e.left:t.top-e.top;return r===-1&&(o+=i?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=t[e].clientRect,s=t[e+r*-1],a=o[i?"width":"height"]*r;if(s){let c=i?"left":"top",u=i?"right":"bottom";r===-1?a-=s.clientRect[c]-o[u]:a+=o[c]-s.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let s=r[r.length-1].clientRect;return i?e>=s.right:t>=s.bottom}else{let s=r[0].clientRect;return i?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,r,i){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(i){let u=o?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return o?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},dS=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let o=this._getItemIndexFromPointerPosition(e,t,r),s=this._previousSwap;if(o===-1||this._activeItems[o]===e)return null;let a=this._activeItems[o];if(s.drag===a&&s.overlaps&&s.deltaX===i.x&&s.deltaY===i.y)return null;let c=this.getItemIndex(e),u=e.getPlaceholderElement(),d=a.getRootElement();o>c?d.after(u):d.before(u),aL(this._activeItems,c,o);let p=this._getRootNode().elementFromPoint(t,r);return s.deltaX=i.x,s.deltaY=i.y,s.drag=a,s.overlaps=d===p||d.contains(p),{previousIndex:c,currentIndex:o}}enter(e,t,r,i){let o=this._activeItems.indexOf(e);o>-1&&this._activeItems.splice(o,1);let s=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;s===-1&&(s=this._getClosestItemIndexToPointer(e,t,r));let a=this._activeItems[s];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(s,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,o]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==o&&(o===null?e.appendChild(i):o.parentNode===e&&e.insertBefore(i,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),o=i?this._activeItems.findIndex(s=>{let a=s.getRootElement();return i===a||a.contains(i)}):-1;return o===-1||!this._sortPredicate(o,e)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=Ig(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==e){let{x:c,y:u}=a.getRootElement().getBoundingClientRect(),d=Math.hypot(t-c,r-u);d<i&&(i=d,o=s)}}return o}},oL=.05,cL=.05,zn=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(zn||{}),cn=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(cn||{}),hS=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new fe;entered=new fe;exited=new fe;dropped=new fe;sorted=new fe;receivingStarted=new fe;receivingStopped=new fe;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=je.EMPTY;_verticalScrollDirection=zn.NONE;_horizontalScrollDirection=cn.NONE;_scrollNode;_stopScrollTimers=new fe;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,o){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=o;let s=this.element=_i(e);this._document=r,this.withOrientation("vertical").withElementContainer(s),t.registerDropContainer(this),this._parentPositions=new wg(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,o,s,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:o,distance:s,dropPoint:a,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof Sg&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new dS(this._document,this._dragDropRegistry);else{let t=new Sg(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=_i(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!YF(this._domRect,oL,t,r))return;let o=this._sortStrategy.sort(e,t,r,i);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=zn.NONE,o=cn.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||r||YF(s.clientRect,oL,e,t)&&([i,o]=m7(a,s.clientRect,this._direction,e,t),(i||o)&&(r=a))}),!i&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),c={width:s,height:a,top:0,right:s,bottom:a,left:0};i=lL(c,t),o=uL(c,e),r=window}r&&(i!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=o,this._scrollNode=r,(i||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),xi(0,rh).pipe(dr(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===zn.UP?e.scrollBy(0,-t):this._verticalScrollDirection===zn.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===cn.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===cn.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&cS(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!cS(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Ig(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function lL(n,e){let{top:t,bottom:r,height:i}=n,o=i*cL;return e>=t-o&&e<=t+o?zn.UP:e>=r-o&&e<=r+o?zn.DOWN:zn.NONE}function uL(n,e){let{left:t,right:r,width:i}=n,o=i*cL;return e>=t-o&&e<=t+o?cn.LEFT:e>=r-o&&e<=r+o?cn.RIGHT:cn.NONE}function m7(n,e,t,r,i){let o=lL(e,i),s=uL(e,r),a=zn.NONE,c=cn.NONE;if(o){let u=n.scrollTop;o===zn.UP?u>0&&(a=zn.UP):n.scrollHeight-u>n.clientHeight&&(a=zn.DOWN)}if(s){let u=n.scrollLeft;t==="rtl"?s===cn.RIGHT?u<0&&(c=cn.RIGHT):n.scrollWidth+u>n.clientWidth&&(c=cn.LEFT):s===cn.LEFT?u>0&&(c=cn.LEFT):n.scrollWidth-u>n.clientWidth&&(c=cn.RIGHT)}return[a,c]}var yd={capture:!0},sS={passive:!1,capture:!0},g7=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=at({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),dL=(()=>{class n{_ngZone=N(Pe);_document=N(Je);_styleLoader=N(BF);_renderer=N(Ln).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new fe;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Lt([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new fe;pointerUp=new fe;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,sS)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(g7),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),o=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),yd],["selectstart",this._preventDefaultWhileDragging,sS]];i?s.push(["touchend",o,yd],["touchcancel",o,yd]):s.push(["mouseup",o,yd]),i||s.push(["mousemove",a=>this.pointerMove.next(a),sS]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,c,u])=>this._renderer.listen(this._document,a,c,u))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new le(i=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(t,"scroll",s=>{this._activeDragInstances().length&&i.next(s)},yd);return()=>{o()}}))),bh(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v7={dragStartThreshold:5,pointerDirectionChangeThreshold:5},hL=(()=>{class n{_document=N(Je);_ngZone=N(Pe);_viewportRuler=N(GF);_dragDropRegistry=N(dL);_renderer=N(Ln).createRenderer(null,null);constructor(){}createDrag(t,r=v7){return new uS(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new hS(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fS=new q("CDK_DRAG_PARENT");var _7=new q("CdkDragHandle");var y7=new q("CDK_DRAG_CONFIG"),E7=new q("CdkDropList"),fL=(()=>{class n{element=N(Vt);dropContainer=N(E7,{optional:!0,skipSelf:!0});_ngZone=N(Pe);_viewContainerRef=N(hn);_dir=N(HF,{optional:!0});_changeDetectorRef=N(Ut);_selfHandle=N(_7,{optional:!0,self:!0});_parentDrag=N(fS,{optional:!0,skipSelf:!0});_dragDropRegistry=N(dL);_destroyed=new fe;_handles=new ot([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new Be;released=new Be;ended=new Be;entered=new Be;exited=new Be;dropped=new Be;moved=new le(t=>{let r=this._dragRef.moved.pipe(De(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=N(Ue);constructor(){let t=this.dropContainer,r=N(y7,{optional:!0}),i=N(hL);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(dr(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Wo(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):_i(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:jF(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(mt(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:c,rootElementSelector:u,previewContainer:d}=t;this.disabled=c??!1,this.dragStartDelay=i||0,this.lockAxis=r||null,o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.pipe(Mt(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),un(t=>bh(...t.map(r=>r._stateChanges.pipe(qs(r))))),dr(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=pt({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&We("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Zo],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",C0]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[qi([{provide:fS,useExisting:n}]),Ir]})}return n})();var I7=new q("CdkDragPlaceholder"),pL=(()=>{class n{templateRef=N(bn);_drag=N(fS,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=pt({type:n,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[qi([{provide:I7,useExisting:n}])]})}return n})();var mL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=nt({providers:[hL],imports:[zF]})}return n})();var w7=["binRef"];function C7(n,e){if(n&1&&(v(0,"header",10)(1,"div",11)(2,"div",12),E(3,"P"),g(),v(4,"h1",13),E(5,"JEUB2 "),v(6,"span",14),E(7,"Prologue"),g()()(),v(8,"div",15)(9,"span",16),E(10),ne(11,"number"),g()()()),n&2){let t=F();I(10),K("",Te(11,1,t.currentMoney,"1.0-0")," \u20AC")}}function S7(n,e){if(n&1&&_e(0,"div",17),n&2){let t=e.$implicit;Dt("left",t.x,"px")("top",t.y,"px")("background-color",t.color)("opacity",t.life)("transform","scale("+t.life+")")}}function D7(n,e){if(n&1){let t=Ie();v(0,"div",28)(1,"button",29),z("click",function(){Y(t);let i=F(2);return Q(i.startPark())}),E(2," Commencer \xE0 chercher... \u{1F5D1}\uFE0F "),g()()}}function T7(n,e){if(n&1&&(v(0,"div",18),_e(1,"div",19)(2,"div",20),v(3,"div",21)(4,"div",22),E(5,"\u{1F976}"),g()(),v(6,"div",23)(7,"div",24),E(8,"Moi (Gal\xE9rien)"),g(),v(9,"div",25),E(10),v(11,"span",26),E(12,"|"),g()(),$(13,D7,3,0,"div",27),g()()),n&2){let t=F();I(10),he(t.displayedDialogue),I(3),P("ngIf",t.isTextFinished)}}function A7(n,e){n&1&&_e(0,"div")}function x7(n,e){if(n&1){let t=Ie();v(0,"div",39),z("cdkDragStarted",function(){let i=Y(t).$implicit,o=F(2);return Q(o.onDragStart(i))})("cdkDragEnded",function(i){let o=Y(t).$implicit,s=F(2);return Q(s.onDragEnded(i,o))}),_e(1,"div",40),v(2,"div",41),E(3),g(),$(4,A7,1,0,"div",42),g()}if(n&2){let t=e.$implicit,r=F(2);Dt("left",t.x,"%")("top",t.y,"%")("transform","rotate("+t.rotation+"deg) scale("+t.scale+")"),We("floating-anim",!r.isDragging),I(3),he(r.getIcon(t.type))}}function R7(n,e){if(n&1){let t=Ie();v(0,"div",43)(1,"button",44),z("click",function(){Y(t);let i=F(2);return Q(i.goToShop())}),E(2,"Aller au Tabac \u27A1\uFE0F"),g()()}}function P7(n,e){if(n&1&&(v(0,"div",30),_e(1,"div",19)(2,"div",20),v(3,"div",31,0)(5,"div",32)(6,"div",33)(7,"span",34),E(8,"\u{1F5D1}\uFE0F"),g()()(),v(9,"span",35),E(10,"Jette ici !"),g()(),v(11,"div",36),$(12,x7,5,9,"div",37),g(),$(13,R7,3,0,"div",38),g()),n&2){let t=F();I(3),We("bin-active",t.isHoveringBin)("bin-eating",t.isEating),I(9),P("ngForOf",t.trashItems)("ngForTrackBy",t.trackByItemId),I(),P("ngIf",t.currentMoney>=100)}}function k7(n,e){if(n&1){let t=Ie();v(0,"div",28)(1,"button",29),z("click",function(){Y(t);let i=F(2);return Q(i.buyTicket())}),v(2,"span",48),E(3,"\u{1F3AB}"),g(),E(4," Acheter un ticket (100\u20AC) "),g()()}}function N7(n,e){if(n&1&&(v(0,"div",45)(1,"div",46)(2,"div",47),E(3,"LE BALTO"),g()(),v(4,"div",21)(5,"div",22),E(6,"\u{1F9D4}\u{1F3FB}\u200D\u2642\uFE0F"),g()(),v(7,"div",23)(8,"div",24),E(9,"G\xE9rard (Patron)"),g(),v(10,"div",25),E(11),v(12,"span",26),E(13,"|"),g()(),$(14,k7,5,0,"div",27),g()()),n&2){let t=F();I(11),he(t.displayedDialogue),I(3),P("ngIf",t.isTextFinished)}}function M7(n,e){n&1&&(v(0,"span",65),E(1,"$"),g())}function O7(n,e){if(n&1){let t=Ie();v(0,"div",63),z("mouseenter",function(){let i=Y(t).$implicit,o=F(2);return Q(o.scratch(i))}),$(1,M7,2,0,"span",64),g()}if(n&2){let t=e.$implicit,r=F(2);We("scratched",r.scratched[t]),I(),P("ngIf",!r.scratched[t])}}function F7(n,e){if(n&1){let t=Ie();v(0,"button",66),z("click",function(){Y(t);let i=F(2);return Q(i.goToOutro())}),E(1," ENCAISSER LE GAIN \u{1F4B8} "),g()}}function L7(n,e){if(n&1&&(v(0,"div",49)(1,"div",50)(2,"div",51)(3,"div",52),E(4,"\u{1F48E} DIAMOND CASH \u{1F48E}"),g(),v(5,"div",53),E(6,"Grattez pour gagner"),g()(),v(7,"div",54)(8,"div",55)(9,"div",56)(10,"div",57),E(11,"10 000 \u20AC"),g(),v(12,"div",58),E(13,"\u{1F389} JACKPOT \u{1F389}"),g()(),v(14,"div",59),$(15,O7,2,3,"div",60),g()()(),v(16,"div",61),$(17,F7,2,0,"button",62),g()()()),n&2){let t=F();I(15),P("ngForOf",t.scratchGrid),I(2),P("ngIf",t.isRevealed)}}function V7(n,e){if(n&1){let t=Ie();v(0,"div",28)(1,"button",70),z("click",function(){Y(t);let i=F(2);return Q(i.finishIntro())}),E(2," \u{1F354} ACHETER LE FOODTRUCK "),g()()}}function U7(n,e){if(n&1&&(v(0,"div",67)(1,"div",21)(2,"div",22),E(3,"\u{1F911}"),g()(),v(4,"div",68)(5,"div",24),E(6,"Moi (Nouveau Riche)"),g(),v(7,"div",69),E(8),v(9,"span",26),E(10,"|"),g()(),$(11,V7,3,0,"div",27),g()()),n&2){let t=F();I(8),he(t.displayedDialogue),I(3),P("ngIf",t.isTextFinished)}}var Dg=class n{constructor(e,t,r){this.gameState=e;this.sound=t;this.cdr=r}binRef;phase="INTRO_DIALOGUE";currentMoney=0;particles=[];trashItems=[];isHoveringBin=!1;isEating=!1;isDragging=!1;currentDialogueText="";displayedDialogue="";isTextFinished=!1;typeWriterInterval;introText="Il pleut encore... J'en ai marre de cette vie de gal\xE8re. J'ai froid, j'ai faim. Si seulement je pouvais trouver 100 balles pour tenter ma chance au loto...";shopText="Alors mon petit... Une sale journ\xE9e hein ? T'es tout tremp\xE9. T'as enfin r\xE9uni les 100 balles ? Allez, prends ce ticket, c'est ta chance.";outroText="C'est... C'est pas possible... 10.000 EUROS ?! J'AI GAGN\xC9 ! Adieu la rue ! Je sais ce que je vais faire... Je vais racheter ce vieux Foodtruck abandonn\xE9 au coin de la rue. C'est le d\xE9but de mon empire !";scratchGrid=Array.from({length:60},(e,t)=>t);scratched=new Array(60).fill(!1);isRevealed=!1;ngOnInit(){this.sound.startRainAmbience(),this.startDialogue(this.introText)}ngOnDestroy(){this.sound.stopRainAmbience(),this.typeWriterInterval&&clearInterval(this.typeWriterInterval)}startDialogue(e){this.currentDialogueText=e,this.displayedDialogue="",this.isTextFinished=!1;let t=0;this.typeWriterInterval&&clearInterval(this.typeWriterInterval),this.typeWriterInterval=setInterval(()=>{t<this.currentDialogueText.length?(this.displayedDialogue+=this.currentDialogueText.charAt(t),t%3===0&&this.sound.playKeystroke(),t++,this.cdr.detectChanges()):(clearInterval(this.typeWriterInterval),this.isTextFinished=!0,this.cdr.detectChanges())},30)}startPark(){this.phase="PARK",this.spawnTrashWave()}goToShop(){this.phase="SHOP",this.sound.stopRainAmbience(),setTimeout(()=>this.startDialogue(this.shopText),800)}buyTicket(){this.currentMoney=0,this.phase="SCRATCH",this.sound.playPop()}goToOutro(){this.phase="OUTRO_DIALOGUE",this.sound.playSuccess(),setTimeout(()=>this.startDialogue(this.outroText),800)}finishIntro(){this.gameState.completeIntro()}trackByItemId(e,t){return t.id}spawnTrashWave(){this.trashItems=[];for(let e=0;e<40;e++)this.trashItems.push({id:Math.random(),x:Math.random()*80+10,y:Math.random()*70+10,type:Math.random()>.6?"can":Math.random()>.3?"paper":"leaf",rotation:Math.random()*360,scale:1,delay:Math.random()*2})}onDragStart(e){this.isDragging=!0,e.type==="can"?this.sound.playCanSound():e.type==="paper"?this.sound.playPaperSound():this.sound.playLeafSound()}onDragEnded(e,t){this.isDragging=!1,this.isHoveringBin=!1;let r=e.dropPoint,i=this.binRef.nativeElement.getBoundingClientRect();r.x>=i.left-50&&r.x<=i.right+50&&r.y>=i.top-50&&r.y<=i.bottom+50?this.cleanTrash(t):e.source.reset()}cleanTrash(e){this.trashItems=this.trashItems.filter(r=>r.id!==e.id),this.sound.playTrashInBin(),this.isEating=!0,setTimeout(()=>this.isEating=!1,200);let t=this.binRef.nativeElement.getBoundingClientRect();this.spawnParticles(t.left+t.width/2,t.top+t.height/2,"#22c55e"),this.currentMoney+=10,this.trashItems.length===0&&this.currentMoney<100&&setTimeout(()=>this.spawnTrashWave(),500)}getIcon(e){return e==="can"?"\u{1F96B}":e==="paper"?"\u{1F961}":"\u{1F342}"}scratch(e){this.scratched[e]||(this.scratched[e]=!0,Math.random()>.5&&this.sound.playScratchSound(),this.scratched.filter(t=>t).length>36&&!this.isRevealed&&(this.isRevealed=!0,this.sound.playSuccess(),this.spawnConfetti()))}spawnParticles(e,t,r){for(let i=0;i<8;i++)this.particles.push({id:Math.random(),x:e,y:t,color:r,speedX:(Math.random()-.5)*15,speedY:(Math.random()-1)*15,life:1});this.animateParticles()}spawnConfetti(){for(let e=0;e<50;e++)this.particles.push({id:Math.random(),x:window.innerWidth/2,y:window.innerHeight/2,color:["#f00","#0f0","#00f","#ff0"][Math.floor(Math.random()*4)],speedX:(Math.random()-.5)*25,speedY:(Math.random()-.5)*25,life:1});this.animateParticles()}animateParticles(){this.particles.length!==0&&(this.particles.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,e.life-=.03}),this.particles=this.particles.filter(e=>e.life>0),this.particles.length>0&&requestAnimationFrame(()=>this.animateParticles()))}static \u0275fac=function(t){return new(t||n)(X(_n),X(Gn),X(Ut))};static \u0275cmp=at({type:n,selectors:[["app-intro-game"]],viewQuery:function(t,r){if(t&1&&_a(w7,5),t&2){let i;Ko(i=Yo())&&(r.binRef=i.first)}},standalone:!1,decls:9,vars:7,consts:[["binRef",""],[1,"intro-container"],["class","intro-header",4,"ngIf"],[1,"fx-layer"],["class","particle",3,"left","top","background-color","opacity","transform",4,"ngFor","ngForOf"],["class","scene dialogue-scene fadeIn",4,"ngIf"],["class","scene park-scene fadeIn",4,"ngIf"],["class","scene shop-scene fadeIn",4,"ngIf"],["class","scene scratch-scene fadeIn",4,"ngIf"],["class","scene dialogue-scene fadeIn outro-bg",4,"ngIf"],[1,"intro-header"],[1,"flex","items-center","gap-3"],[1,"logo-box"],[1,"text-xl","font-bold","tracking-tight","text-white"],[1,"text-xs","font-normal","text-slate-400","ml-2"],[1,"money-badge"],[1,"text-green-400","font-bold","text-xl","mr-2"],[1,"particle"],[1,"scene","dialogue-scene","fadeIn"],[1,"rain-layer","layer-1"],[1,"rain-layer","layer-2"],[1,"character-container","slide-up"],[1,"character-emoji"],[1,"dialogue-box-container"],[1,"speaker-name"],[1,"dialogue-text"],[1,"cursor"],["class","dialogue-actions",4,"ngIf"],[1,"dialogue-actions"],[1,"action-btn",3,"click"],[1,"scene","park-scene","fadeIn"],[1,"bin-container"],[1,"bin-body"],[1,"bin-base"],[1,"bin-emoji"],[1,"bin-label"],[1,"trash-zone"],["class","trash-item","cdkDrag","",3,"floating-anim","left","top","transform","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["class","next-step-container",4,"ngIf"],["cdkDrag","",1,"trash-item",3,"cdkDragStarted","cdkDragEnded"],[1,"trash-shadow"],[1,"trash-content"],[4,"cdkDragPlaceholder"],[1,"next-step-container"],[1,"next-btn","pulse-glow",3,"click"],[1,"scene","shop-scene","fadeIn"],[1,"shop-bg"],[1,"neon-sign"],[1,"icon"],[1,"scene","scratch-scene","fadeIn"],[1,"ticket","zoom-in"],[1,"ticket-top"],[1,"ticket-logo"],[1,"ticket-sub"],[1,"scratch-zone-border"],[1,"scratch-zone"],[1,"winner-content"],[1,"win-amount"],[1,"win-emoji"],[1,"scratch-cover"],["class","scratch-pixel",3,"scratched","mouseenter",4,"ngFor","ngForOf"],[1,"ticket-footer"],["class","claim-btn pulse",3,"click",4,"ngIf"],[1,"scratch-pixel",3,"mouseenter"],["class","pattern",4,"ngIf"],[1,"pattern"],[1,"claim-btn","pulse",3,"click"],[1,"scene","dialogue-scene","fadeIn","outro-bg"],[1,"dialogue-box-container","light-theme"],[1,"dialogue-text","text-black"],[1,"action-btn","gold-btn",3,"click"]],template:function(t,r){t&1&&(v(0,"div",1),$(1,C7,12,4,"header",2),v(2,"div",3),$(3,S7,1,10,"div",4),g(),$(4,T7,14,2,"div",5)(5,P7,14,7,"div",6)(6,N7,15,2,"div",7)(7,L7,18,2,"div",8)(8,U7,12,2,"div",9),g()),t&2&&(I(),P("ngIf",r.phase==="PARK"||r.phase==="SCRATCH"),I(2),P("ngForOf",r.particles),I(),P("ngIf",r.phase==="INTRO_DIALOGUE"),I(),P("ngIf",r.phase==="PARK"),I(),P("ngIf",r.phase==="SHOP"),I(),P("ngIf",r.phase==="SCRATCH"),I(),P("ngIf",r.phase==="OUTRO_DIALOGUE"))},dependencies:[wr,nr,fL,pL,Jr],styles:[`.intro-container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;background:#0f172a;display:flex;flex-direction:column;font-family:Segoe UI,sans-serif;-webkit-user-select:none;user-select:none;position:absolute;top:0;left:0}.intro-header[_ngcontent-%COMP%]{background:#0f172ae6;border-bottom:1px solid #1e293b;height:64px;display:flex;justify-content:space-between;align-items:center;padding:0 24px;z-index:50}.logo-box[_ngcontent-%COMP%]{width:32px;height:32px;background:#2563eb;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}.money-badge[_ngcontent-%COMP%]{background:#020617;padding:8px 20px;border-radius:99px;border:1px solid rgba(22,163,74,.3)}.scene[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;height:100%;overflow:hidden}.dialogue-scene[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;background:#0f172a}.character-container[_ngcontent-%COMP%]{position:relative;z-index:10;margin-bottom:-10px}.character-emoji[_ngcontent-%COMP%]{font-size:12rem;filter:drop-shadow(0 0 30px rgba(0,0,0,.5))}.dialogue-box-container[_ngcontent-%COMP%]{width:90%;max-width:800px;margin-bottom:40px;z-index:20;background:#0f172af2;border:2px solid #475569;border-radius:8px;padding:24px;box-shadow:0 20px 50px #0009;position:relative;min-height:160px;display:flex;flex-direction:column}.outro-bg[_ngcontent-%COMP%]{background:radial-gradient(circle at center,#fef3c7,#fff7ed)}.light-theme[_ngcontent-%COMP%]{background:#fffffff2;border-color:#fbbf24;box-shadow:0 20px 50px #d9770633}.light-theme[_ngcontent-%COMP%]   .dialogue-text[_ngcontent-%COMP%]{color:#1e293b;font-weight:700}.speaker-name[_ngcontent-%COMP%]{position:absolute;top:-16px;left:24px;background:#d97706;color:#fff;padding:4px 16px;font-weight:700;font-size:.9rem;border-radius:4px;text-transform:uppercase}.dialogue-text[_ngcontent-%COMP%]{font-family:monospace;font-size:1.2rem;color:#e2e8f0;line-height:1.6;margin-top:10px;flex:1}.cursor[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite;color:#d97706;font-weight:700}.dialogue-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;animation:_ngcontent-%COMP%_fadeIn .5s}.action-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#16a34a,#15803d);color:#fff;border:1px solid #4ade80;padding:12px 24px;border-radius:6px;font-weight:700;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;gap:10px}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #22c55e66}.gold-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#f59e0b,#d97706);border-color:#fbbf24;color:#78350f}.park-scene[_ngcontent-%COMP%]{background:radial-gradient(circle at 50% 20%,#334155,#1e293b,#020617)}.rain-layer[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="40"><line x1="0" y1="0" x2="2" y2="10" stroke="rgba(148, 163, 184, 0.3)" stroke-width="1"/></svg>');z-index:5}.layer-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rain .8s linear infinite;opacity:.6;background-size:20px 40px}.layer-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rain 1.5s linear infinite;opacity:.3;background-size:40px 80px;transform:scale(1.5)}@keyframes _ngcontent-%COMP%_rain{0%{background-position:0 0}to{background-position:20px 100vh}}.trash-zone[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:30}.trash-item[_ngcontent-%COMP%]{position:absolute;width:60px;height:60px;display:flex;align-items:center;justify-content:center;cursor:grab;touch-action:none;transition:transform .1s}.trash-content[_ngcontent-%COMP%]{font-size:3.5rem;filter:drop-shadow(0 4px 6px rgba(0,0,0,.4));position:relative;z-index:2}.trash-shadow[_ngcontent-%COMP%]{position:absolute;bottom:5px;left:15%;width:70%;height:10px;background:#000;opacity:.3;filter:blur(4px);border-radius:50%;z-index:1;transition:all .2s}.trash-item[_ngcontent-%COMP%]:active   .trash-shadow[_ngcontent-%COMP%]{transform:scale(.5);opacity:.1;bottom:-20px}.floating-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.bin-container[_ngcontent-%COMP%]{position:absolute;bottom:40px;right:40px;width:140px;height:160px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;z-index:25;transition:transform .2s}.bin-body[_ngcontent-%COMP%]{font-size:6rem;filter:drop-shadow(0 10px 20px rgba(0,0,0,.5))}.bin-active[_ngcontent-%COMP%]{transform:scale(1.1)}.bin-eating[_ngcontent-%COMP%]   .bin-body[_ngcontent-%COMP%]{transform:scaleY(.8) scaleX(1.2)}.bin-label[_ngcontent-%COMP%]{font-weight:700;color:#cbd5e1;background:#0009;padding:4px 12px;border-radius:12px}.next-step-container[_ngcontent-%COMP%]{position:absolute;bottom:100px;width:100%;display:flex;justify-content:center;z-index:200}.next-btn[_ngcontent-%COMP%]{padding:15px 40px;background:linear-gradient(45deg,#f59e0b,#d97706);color:#fff;font-weight:900;font-size:1.3rem;border:none;border-radius:50px;cursor:pointer;box-shadow:0 10px 20px #d9770666;text-transform:uppercase}.pulse-glow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseGlow 2s infinite}@keyframes _ngcontent-%COMP%_pulseGlow{0%{box-shadow:0 0 #f59e0bb3}70%{box-shadow:0 0 0 20px #f59e0b00}to{box-shadow:0 0 #f59e0b00}}.shop-scene[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#2a0a0a,#1a0505);display:flex;flex-direction:column;align-items:center;justify-content:flex-end}.shop-bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.neon-sign[_ngcontent-%COMP%]{position:absolute;top:15%;left:50%;transform:translate(-50%);font-family:monospace;font-weight:900;font-size:4rem;color:#ff4d4d;text-shadow:0 0 20px #ff0000;border:4px solid #ff4d4d;padding:10px 30px;border-radius:20px;box-shadow:0 0 30px #f006;animation:_ngcontent-%COMP%_flicker 3s infinite}@keyframes _ngcontent-%COMP%_flicker{0%,to{opacity:1}50%{opacity:.8}52%{opacity:.2}54%{opacity:.8}}.scratch-scene[_ngcontent-%COMP%]{background:#0f172a;display:flex;justify-content:center;align-items:center}.ticket[_ngcontent-%COMP%]{width:360px;background:#f8fafc;border-radius:12px;overflow:hidden;box-shadow:0 25px 50px -12px #00000080;border:1px solid #94a3b8}.ticket-top[_ngcontent-%COMP%]{background:#1e1b4b;padding:20px;text-align:center;border-bottom:4px solid #fbbf24}.ticket-logo[_ngcontent-%COMP%]{font-family:Impact,sans-serif;font-size:2rem;color:#fbbf24;letter-spacing:1px}.ticket-sub[_ngcontent-%COMP%]{color:#94a3b8;font-size:.8rem;text-transform:uppercase;margin-top:5px}.scratch-zone-border[_ngcontent-%COMP%]{padding:20px;background:#e2e8f0}.scratch-zone[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;border:2px dashed #94a3b8;background:#fff;border-radius:8px;overflow:hidden}.winner-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(circle,#fef3c7,#fffbeb)}.win-amount[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:900;color:#16a34a}.win-emoji[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:10px;animation:pulse 1s infinite}.scratch-cover[_ngcontent-%COMP%]{position:absolute;inset:0;display:grid;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(6,1fr)}.scratch-pixel[_ngcontent-%COMP%]{background:#94a3b8;border:1px solid #64748b;display:flex;justify-content:center;align-items:center;cursor:crosshair}.scratch-pixel[_ngcontent-%COMP%]:nth-child(odd){background:#cbd5e1}.scratch-pixel.scratched[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.ticket-footer[_ngcontent-%COMP%]{padding:15px;text-align:center;background:#f1f5f9}.claim-btn[_ngcontent-%COMP%]{width:100%;background:#16a34a;color:#fff;font-weight:700;padding:12px;border:none;border-radius:6px;font-size:1.2rem;cursor:pointer}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .8s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.fadeIn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:0}}.particle[_ngcontent-%COMP%]{position:absolute;width:8px;height:8px;border-radius:50%;pointer-events:none;z-index:200}`]})};var B7=["*"];function $7(n,e){n&1&&(v(0,"div",43),E(1,"\u{1F525} RUSH (20h-02h) -1s \u{1F525}"),g())}function H7(n,e){n&1&&(v(0,"div",44),E(1,"\u{1F451} Client VIP \u{1F451}"),g())}function G7(n,e){n&1&&(v(0,"div",45),E(1,"Service Midi"),g())}function z7(n,e){if(n&1&&(v(0,"span",46),E(1),g()),n&2){let t=F();I(),K("\u{1F468}\u200D\u{1F373} ",t.cookCount," Auto")}}function q7(n,e){if(n&1&&(v(0,"span",47),E(1),g()),n&2){let t=F();I(),K("\u26A1 +",t.serverBonus,"% Vit.")}}function W7(n,e){if(n&1&&(v(0,"div",48),E(1),g()),n&2){let t=e.$implicit,r=e.index,i=F();Dt("animation-delay",r*50+"ms"),I(),K(" ",i.getIcon(t)," ")}}function K7(n,e){n&1&&(v(0,"div",49)(1,"span"),E(2,"\u2705 PR\xCAT"),g(),v(3,"span",50),E(4,"Envoie !"),g()())}function Y7(n,e){if(n&1&&_e(0,"div",51),n&2){let t=e.$implicit;Dt("left",t.x,"px")("top",t.y,"px")("background-color",t.color)("transform","rotate("+t.rotation+"deg)")}}function Q7(n,e){if(n&1&&(v(0,"div",52),E(1),g()),n&2){let t=e.$implicit,r=e.index,i=F();Dt("z-index",r),I(),K(" ",i.getIcon(t)," ")}}function J7(n,e){if(n&1&&(v(0,"div",53),E(1),g()),n&2){let t=e.$implicit;Dt("left",t.x,"px")("top",t.y,"px"),P("ngClass",t.type),I(),K(" ",t.text," ")}}function Z7(n,e){if(n&1&&(v(0,"div",60),E(1),g()),n&2){let t=F().index;I(),K(" ",t+1," ")}}function X7(n,e){if(n&1){let t=Ie();v(0,"button",54),z("click",function(i){let o=Y(t).$implicit,s=F();return Q(s.addIngredient(o,i))}),$(1,Z7,2,1,"div",55),v(2,"span",56),E(3),g(),v(4,"span",57),E(5),g(),v(6,"div",58),_e(7,"div",59),g()()}if(n&2){let t=e.$implicit,r=F();I(),P("ngIf",r.upgrades.hasKeyboard),I(2),he(r.getIcon(t)),I(2),he(r.getShortName(t)),I(2),Dt("width",r.mastery[t].xp/r.mastery[t].xpMax*100,"%")}}function eK(n,e){n&1&&(v(0,"span",61),E(1,"ESPACE"),g())}var Tg=class n{constructor(e,t,r){this.gameState=e;this.cdr=t;this.soundService=r;this.allIngredientsList.forEach(i=>this.mastery[i]={level:1,xp:0,xpMax:5})}CONFIG={TIME:{startSeconds:10,lessPerLevel:1,minSeconds:2},ECONOMY:{baseReward:35,percentPerLevel:20,ingredientLevelBonus:10},VIP:{chance:.1,rewardMult:5,timeDivisor:2},PROGRESSION:{unlockCheeseLevel:3,unlockSaladLevel:6,unlockTomatoLevel:9},FX:{confettiEvery:5,feverThreshold:5,confettiColors:["#ef4444","#3b82f6","#22c55e","#eab308","#a855f7","#ffffff"]},AUTO:{cookSpeedBase:5e3,serverSlowPct:10},UNLOCK_COSTS:{CHEESE:1e3,ONION:500,SALAD:2e3,BACON:3500,PICKLE:0,TOMATO:0,SAUCE:0}};currentMoney=0;isVip=!1;triggerShake=!1;comboMultiplier=1;currentOrder=[];currentStack=[];allIngredientsList=Object.values(cd);currentAvailableIngredients=[];mastery={};upgrades={grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:[],maxServiceReached:1,hasKeyboard:!1};cookCount=0;serverCount=0;serverBonus=0;autoCookInterval;displayTimeLeft=0;totalTimeForLevel=0;isRunning=!1;rafId;endTime=0;floatingTexts=[];particles=[];counter=0;timeOfDay=6;currentDay=1;get isFeverMode(){return this.timeOfDay>=20||this.timeOfDay<2}get remainingOrder(){return this.currentOrder.slice(this.currentStack.length)}handleKeyboardEvent(e){if(!this.upgrades.hasKeyboard)return;let t=e.key,r=parseInt(t);!isNaN(r)&&r>0&&r<=this.currentAvailableIngredients.length&&this.addIngredient(this.currentAvailableIngredients[r-1]),(t===" "||t==="Enter")&&(e.preventDefault(),this.validateBurger())}ngOnInit(){this.gameState.gameState$.subscribe(e=>{this.currentMoney=e.money,this.timeOfDay=e.timeOfDay,this.currentDay=e.day,e.foodtruckMastery&&(this.mastery=JSON.parse(JSON.stringify(e.foodtruckMastery))),e.foodtruckUpgrades&&(this.upgrades=O({},e.foodtruckUpgrades));let t=e.companies.find(r=>r.type==="FOODTRUCK");if(t){let r=this.gameState.getTotalEmployeePower(t.type,"COOK"),i=this.gameState.getTotalEmployeePower(t.type,"SERVER");this.cookCount=Math.floor(r),this.serverBonus=Math.min(75,i)}this.cdr.markForCheck()}),this.resetGame(1)}ngOnDestroy(){this.stopChrono(),this.stopAutoCook()}startAutoCook(){if(this.stopAutoCook(),this.cookCount>0){let e=Math.max(500,this.CONFIG.AUTO.cookSpeedBase/this.cookCount);this.autoCookInterval=setInterval(()=>{this.isRunning&&(this.performAutoAction(),this.cdr.markForCheck())},e)}}stopAutoCook(){this.autoCookInterval&&clearInterval(this.autoCookInterval)}performAutoAction(){this.currentStack.length<this.currentOrder.length?this.addIngredient(this.currentOrder[this.currentStack.length],void 0,!0):this.validateBurger()}addIngredient(e,t,r=!1){this.isRunning||(this.startChrono(),this.startAutoCook()),r||(["STEAK","BACON"].includes(e)?this.soundService.playSteakSound():["SALAD","ONION"].includes(e)?this.soundService.playSaladSound():this.soundService.playSoftPop()),this.currentStack.push(e),r&&this.spawnText("\u{1F916}",100+Math.random()*150,200,"auto");let i=this.currentStack.length-1;this.currentOrder[i]!==e&&(this.spawnText("RAT\xC9 !",t?.clientX||200,t?.clientY||200,"error"),this.failLevel()),this.cdr.markForCheck()}validateBurger(e){if(this.currentStack.length!==this.currentOrder.length){this.failLevel();return}this.stopChrono(),this.stopAutoCook(),this.soundService.playSuccess(),this.gameState.incrementCustomersServed(),this.gainXpForIngredients(e);let t=this.getCurrentReward();this.gameState.addMoney(t),this.spawnText(`+${Math.floor(t)}\u20AC`,200,150,this.isVip?"vip":"success"),this.gameState.updateMaxServiceReached(this.comboMultiplier),this.comboMultiplier>=6&&this.gameState.unlockIngredientByService("PICKLE"),this.comboMultiplier>=10&&this.gameState.unlockIngredientByService("TOMATO"),this.comboMultiplier>=15&&this.gameState.unlockIngredientByService("SAUCE"),(this.isVip||this.comboMultiplier%this.CONFIG.FX.confettiEvery===0)&&this.spawnConfetti(),this.resetGame(this.comboMultiplier+1)}failLevel(){this.stopChrono(),this.stopAutoCook(),this.soundService.playError(),this.triggerShake=!0,setTimeout(()=>{this.triggerShake=!1,this.cdr.markForCheck()},400),this.resetGame(1)}resetGame(e,t=!1){this.comboMultiplier=e,this.currentStack=[],this.isRunning=!1,t?this.isVip=!0:this.isVip=Math.random()<this.CONFIG.VIP.chance+this.upgrades.marketingLevel*.02;let r=this.CONFIG.TIME.startSeconds-(this.comboMultiplier-1)*this.CONFIG.TIME.lessPerLevel;r+=this.upgrades.grillLevel*.5,this.isFeverMode&&!this.isVip&&(r-=1),r<this.CONFIG.TIME.minSeconds&&(r=this.CONFIG.TIME.minSeconds),this.serverBonus>0&&(r=r*(1+this.serverBonus/100)),this.isVip&&(r=r/this.CONFIG.VIP.timeDivisor),this.totalTimeForLevel=r*1e3,this.displayTimeLeft=this.totalTimeForLevel,this.generateSmartOrder(),this.cdr.detectChanges()}generateSmartOrder(){let e=["STEAK"];(this.isUnlocked("CHEESE")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockCheeseLevel)&&e.push("CHEESE"),(this.isUnlocked("SALAD")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockSaladLevel)&&e.push("SALAD"),(this.isUnlocked("TOMATO")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockTomatoLevel)&&e.push("TOMATO"),this.allIngredientsList.forEach(i=>{this.isUnlocked(i)&&!e.includes(i)&&i!=="BUN"&&e.push(i)}),this.currentAvailableIngredients=["BUN",...e];let t=Math.min(6,1+Math.floor(this.comboMultiplier/3)),r=[];for(let i=0;i<t;i++)r.push(e[Math.floor(Math.random()*e.length)]);this.currentOrder=["BUN",...r,"BUN"]}getCurrentReward(){let e=1+this.CONFIG.ECONOMY.percentPerLevel/100,t=this.CONFIG.ECONOMY.baseReward*Math.pow(e,this.comboMultiplier-1);t+=this.upgrades.serviceLevel*5;let r=0;this.currentOrder.forEach(s=>{this.mastery[s]&&(r+=this.mastery[s].level)});let o=1+((this.currentOrder.length>0?r/this.currentOrder.length:1)-1)*(this.CONFIG.ECONOMY.ingredientLevelBonus/100);return t=t*o,this.isVip&&(t=t*this.CONFIG.VIP.rewardMult),t}gainXpForIngredients(e){[...new Set(this.currentStack)].forEach(r=>{this.mastery[r]||(this.mastery[r]={level:1,xp:0,xpMax:5});let i=this.mastery[r];i.xp++,i.xp>=i.xpMax&&(i.level++,i.xp=0,i.xpMax=Math.floor(i.xpMax*1.5),e&&this.spawnText(`${this.getIcon(r)} UP!`,e.clientX,e.clientY-50,"levelup"))}),this.gameState.updateIngredientMastery(this.mastery)}startChrono(){this.isRunning=!0,this.endTime=Date.now()+this.totalTimeForLevel;let e=()=>{if(!this.isRunning)return;let t=this.endTime-Date.now();t<=0?(this.displayTimeLeft=0,this.spawnText("TEMPS \xC9COUL\xC9 !",200,200,"error"),this.failLevel(),this.cdr.detectChanges()):(this.displayTimeLeft=t,this.cdr.detectChanges(),this.rafId=requestAnimationFrame(e))};this.rafId=requestAnimationFrame(e)}stopChrono(){this.isRunning=!1,this.rafId&&cancelAnimationFrame(this.rafId)}getBarPercentage(){return this.displayTimeLeft/this.totalTimeForLevel*100}isTimeRunningOut(){return this.getBarPercentage()<30}getActionBtnClass(){return this.isFeverMode&&!this.isVip?"bg-red-600 hover:bg-red-500 border-red-800 text-white shadow-[0_4px_20px_rgba(239,68,68,0.4)] animate-pulse":this.isVip?"bg-gradient-to-r from-amber-600 to-amber-500 border-amber-700 text-amber-50 shadow-[0_4px_20px_rgba(245,158,11,0.4)]":"bg-blue-600 hover:bg-blue-500 border-blue-700 text-white"}getButtonLabel(){return this.isFeverMode&&!this.isVip?"\u{1F525} FEVER !":this.isVip?"\u{1F451} SERVIR LE ROI DU BURGER":"\u{1F6CE}\uFE0F ENVOYER"}formatGameTime(e){let t=Math.floor(e),r=Math.floor((e-t)*60);return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}spawnConfetti(){for(let e=0;e<30;e++)this.particles.push({id:this.counter++,x:Math.random()*300+50,y:200,color:this.CONFIG.FX.confettiColors[Math.floor(Math.random()*this.CONFIG.FX.confettiColors.length)],rotation:Math.random()*360,speedX:(Math.random()-.5)*10,speedY:(Math.random()-1)*15-5});this.animateParticles()}animateParticles(){this.particles.length!==0&&(this.particles.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,e.speedY+=.5,e.rotation+=5}),this.particles=this.particles.filter(e=>e.y<600),this.particles.length>0&&requestAnimationFrame(()=>{this.animateParticles(),this.cdr.detectChanges()}))}spawnText(e,t,r,i){let o=this.counter++;this.floatingTexts.push({id:o,text:e,x:t||200,y:r||100,type:i}),setTimeout(()=>{this.floatingTexts=this.floatingTexts.filter(s=>s.id!==o),this.cdr.detectChanges()},1e3)}isUnlocked(e){return this.upgrades.unlockedIngredients.includes(e)}getShortName(e){return{BUN:"Pain",STEAK:"Viande",CHEESE:"Fromage",SALAD:"Salade",TOMATO:"Tomate",SAUCE:"Sauce",ONION:"Oignon",PICKLE:"Cornich.",BACON:"Bacon"}[e]||e}getIcon(e){return{BUN:"\u{1F35E}",STEAK:"\u{1F969}",CHEESE:"\u{1F9C0}",SALAD:"\u{1F96C}",TOMATO:"\u{1F345}",SAUCE:"\u{1F963}",ONION:"\u{1F9C5}",PICKLE:"\u{1F952}",BACON:"\u{1F953}"}[e]||"\u2753"}static \u0275fac=function(t){return new(t||n)(X(_n),X(Ut),X(Gn))};static \u0275cmp=at({type:n,selectors:[["app-foodtruck-game"]],hostBindings:function(t,r){t&1&&z("keydown",function(o){return r.handleKeyboardEvent(o)},Sl)},standalone:!1,ngContentSelectors:B7,decls:60,vars:43,consts:[[1,"h-full","bg-slate-900","p-6","flex","flex-col","gap-6","font-sans","select-none","overflow-hidden","relative","transition-colors","duration-500"],[1,"grid","grid-cols-12","gap-6","h-24","shrink-0","z-10"],[1,"col-span-3","card-panel","flex","flex-col","justify-center","px-6","relative","overflow-hidden","group"],[1,"text-slate-500","text-[10px]","font-bold","uppercase","tracking-widest","mb-1","label-text"],[1,"text-2xl","font-black","text-white","tracking-tight","value-text","group-hover:scale-105","transition-transform","origin-left"],[1,"absolute","right-2","bottom-[-10px]","text-6xl","opacity-10","rotate-12","emoji-bg"],[1,"col-span-6","card-panel","flex","items-center","justify-between","px-2","relative"],[1,"flex","flex-col","items-center","justify-center","w-24","h-full","border-r","border-white/10"],[1,"text-3xl","font-black","text-white","value-text"],[1,"text-[9px]","text-slate-500","uppercase","font-bold","label-text"],[1,"flex-1","flex","flex-col","items-center","justify-center"],["class","text-red-500 font-black text-lg animate-pulse tracking-widest uppercase glow-text",4,"ngIf"],["class","text-amber-400 font-black text-lg animate-pulse tracking-widest uppercase glow-text",4,"ngIf"],["class","text-slate-400 font-bold text-xs uppercase tracking-wide",4,"ngIf"],[1,"flex","gap-2","mt-1","opacity-80"],["class","badge-pill bg-blue-500/20 text-blue-300 border-blue-500/30",4,"ngIf"],["class","badge-pill bg-green-500/20 text-green-300 border-green-500/30",4,"ngIf"],[1,"col-span-3","card-panel","flex","flex-col","justify-center","items-end","px-6","relative","overflow-hidden"],[1,"text-3xl","font-mono","font-bold","text-white","z-10","value-text"],[1,"absolute","bottom-0","left-0","h-1.5","w-full","bg-black/20"],[1,"h-full","transition-all","duration-200"],[1,"flex-1","grid","grid-cols-12","gap-6","min-h-0","z-0"],[1,"col-span-3","card-panel","flex","flex-col","items-center","py-4","overflow-hidden"],[1,"text-[10px]","font-bold","text-slate-500","uppercase","tracking-widest","mb-2","label-text","shrink-0"],[1,"mb-3","flex","flex-col","items-center","bg-slate-950/30","w-full","py-2","border-y","border-white/5","shrink-0"],[1,"text-2xl","font-black","text-green-400","tracking-tight"],[1,"text-[8px]","text-slate-500","uppercase","font-bold"],[1,"flex-1","min-h-0","w-full","overflow-y-auto","custom-scroll","px-2","flex","flex-col","items-center","gap-2","pb-2"],["class","w-14 h-14 shrink-0 rounded-xl flex items-center justify-center text-3xl shadow-inner border border-white/5 bg-black/20 animate-in",3,"animation-delay",4,"ngFor","ngForOf"],["class","mt-4 text-green-400 font-bold text-xs animate-pulse flex flex-col items-center",4,"ngIf"],[1,"col-span-9","card-panel","relative","overflow-hidden","flex","items-end","justify-center","pb-10","group","bg-grid-pattern"],[1,"absolute","inset-0","pointer-events-none"],["class","absolute w-2 h-2 rounded-full",3,"left","top","background-color","transform",4,"ngFor","ngForOf"],[1,"relative","z-10","flex","flex-col-reverse","items-center","transition-transform","duration-200"],["class","text-8xl -mb-14 drop-shadow-2xl animate-pop hover:scale-105 transition-transform cursor-pointer select-none",3,"zIndex",4,"ngFor","ngForOf"],[1,"w-72","h-6","bg-slate-700/50","rounded-[100%]","mt-8","shadow-xl","blur-sm","z-[-1]","plate-shadow"],["class","absolute pointer-events-none font-bold text-3xl z-50 animate-float",3,"left","top","ngClass",4,"ngFor","ngForOf"],[1,"shrink-0","card-panel","p-4","z-20","shadow-2xl","border-t","border-white/10","transition-all","duration-300"],[1,"flex","gap-4","items-stretch"],[1,"flex-1","flex","flex-wrap","gap-2","justify-center","content-center"],["class",`relative group bg-slate-800 border-b-4 border-slate-950 rounded-xl 
                              active:border-b-0 active:translate-y-1 transition-all 
                              flex flex-col items-center justify-center overflow-hidden hover:bg-slate-700 ing-key
                              w-20 h-20 lg:w-24 lg:h-24`,3,"click",4,"ngFor","ngForOf"],[1,"w-32","lg:w-48","rounded-xl","font-black","text-lg","lg:text-xl","uppercase","tracking-widest","shadow-lg","border-b-4","active:border-b-0","active:translate-y-1","transition-all","flex","flex-col","items-center","justify-center","text-center","leading-none","action-key","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none","shrink-0","self-stretch","min-h-[5rem]",3,"click","disabled","ngClass"],["class","text-[10px] opacity-60 font-normal mt-1 border border-white/30 px-2 rounded",4,"ngIf"],[1,"text-red-500","font-black","text-lg","animate-pulse","tracking-widest","uppercase","glow-text"],[1,"text-amber-400","font-black","text-lg","animate-pulse","tracking-widest","uppercase","glow-text"],[1,"text-slate-400","font-bold","text-xs","uppercase","tracking-wide"],[1,"badge-pill","bg-blue-500/20","text-blue-300","border-blue-500/30"],[1,"badge-pill","bg-green-500/20","text-green-300","border-green-500/30"],[1,"w-14","h-14","shrink-0","rounded-xl","flex","items-center","justify-center","text-3xl","shadow-inner","border","border-white/5","bg-black/20","animate-in"],[1,"mt-4","text-green-400","font-bold","text-xs","animate-pulse","flex","flex-col","items-center"],[1,"text-[9px]","opacity-70"],[1,"absolute","w-2","h-2","rounded-full"],[1,"text-8xl","-mb-14","drop-shadow-2xl","animate-pop","hover:scale-105","transition-transform","cursor-pointer","select-none"],[1,"absolute","pointer-events-none","font-bold","text-3xl","z-50","animate-float",3,"ngClass"],[1,"relative","group","bg-slate-800","border-b-4","border-slate-950","rounded-xl","active:border-b-0","active:translate-y-1","transition-all","flex","flex-col","items-center","justify-center","overflow-hidden","hover:bg-slate-700","ing-key","w-20","h-20","lg:w-24","lg:h-24",3,"click"],["class","absolute top-1 left-1 bg-white/20 text-white/70 text-[10px] px-1.5 rounded font-mono border border-white/10",4,"ngIf"],[1,"text-3xl","lg:text-4xl","mb-1","group-hover:scale-110","transition-transform","duration-200"],[1,"text-[8px]","lg:text-[9px]","font-bold","text-slate-500","uppercase","tracking-wide","group-hover:text-slate-300","label-text","truncate","w-full","text-center","px-1"],[1,"absolute","bottom-0","left-0","w-full","h-1","bg-black/40"],[1,"h-full","bg-blue-500","transition-all","duration-300"],[1,"absolute","top-1","left-1","bg-white/20","text-white/70","text-[10px]","px-1.5","rounded","font-mono","border","border-white/10"],[1,"text-[10px]","opacity-60","font-normal","mt-1","border","border-white/30","px-2","rounded"]],template:function(t,r){t&1&&(Af(),v(0,"div",0),xf(1),v(2,"div",1)(3,"div",2)(4,"div",3),E(5,"Caisse"),g(),v(6,"div",4),E(7),ne(8,"number"),g(),v(9,"div",5),E(10,"\u{1F4B0}"),g()(),v(11,"div",6)(12,"div",7)(13,"span",8),E(14),g(),v(15,"span",9),E(16),g()(),v(17,"div",10),$(18,$7,2,0,"div",11)(19,H7,2,0,"div",12)(20,G7,2,0,"div",13),v(21,"div",14),$(22,z7,2,1,"span",15)(23,q7,2,1,"span",16),g()()(),v(24,"div",17)(25,"div",3),E(26,"Temps Restant"),g(),v(27,"div",18),E(28),ne(29,"number"),g(),v(30,"div",19),_e(31,"div",20),g()()(),v(32,"div",21)(33,"div",22)(34,"div",23),E(35,"\xC0 Pr\xE9parer"),g(),v(36,"div",24)(37,"span",25),E(38),ne(39,"number"),g(),v(40,"span",26),E(41,"Valeur Commande"),g()(),v(42,"div",27),$(43,W7,2,3,"div",28)(44,K7,5,0,"div",29),g()(),v(45,"div",30)(46,"div",31),$(47,Y7,1,8,"div",32),g(),v(48,"div",33),$(49,Q7,2,3,"div",34),_e(50,"div",35),g(),$(51,J7,2,6,"div",36),g()(),v(52,"div",37)(53,"div",38)(54,"div",39),$(55,X7,8,5,"button",40),g(),v(56,"button",41),z("click",function(o){return r.validateBurger(o)}),v(57,"span"),E(58),g(),$(59,eK,2,0,"span",42),g()()()()),t&2&&(We("vip-theme",r.isVip)("fever-theme",r.isFeverMode&&!r.isVip),I(7),K(" ",Te(8,34,r.currentMoney,"1.0-0")," \u20AC "),I(7),he(r.formatGameTime(r.timeOfDay)),I(2),K("Jour ",r.currentDay),I(2),P("ngIf",r.isFeverMode),I(),P("ngIf",r.isVip&&!r.isFeverMode),I(),P("ngIf",!r.isFeverMode&&!r.isVip),I(2),P("ngIf",r.cookCount>0),I(),P("ngIf",r.serverBonus>0),I(5),K("",Te(29,37,r.displayTimeLeft/1e3,"1.1-1"),"s"),I(3),Dt("width",r.getBarPercentage(),"%"),We("bg-blue-500",!r.isTimeRunningOut()&&!r.isVip&&!r.isFeverMode)("bg-red-500",r.isTimeRunningOut()||r.isFeverMode)("bg-amber-400",r.isVip),I(7),K("",Te(39,40,r.getCurrentReward(),"1.0-0")," \u20AC"),I(5),P("ngForOf",r.remainingOrder),I(),P("ngIf",r.remainingOrder.length===0),I(3),P("ngForOf",r.particles),I(),Dt("transform","scale("+(1-r.currentStack.length*.02)+")"),I(),P("ngForOf",r.currentStack),I(2),P("ngForOf",r.floatingTexts),I(4),P("ngForOf",r.currentAvailableIngredients),I(),P("disabled",r.currentStack.length===0)("ngClass",r.getActionBtnClass()),I(2),he(r.getButtonLabel()),I(),P("ngIf",r.upgrades.hasKeyboard))},dependencies:[Xo,wr,nr,Jr],styles:[".card-panel[_ngcontent-%COMP%]{background-color:#1e293b;border:1px solid #334155;border-radius:1rem;box-shadow:0 4px 6px -1px #0000001a}.badge-pill[_ngcontent-%COMP%]{padding:2px 8px;border-radius:99px;font-size:10px;font-weight:700;border:1px solid;display:inline-block}.vip-theme[_ngcontent-%COMP%]   .card-panel[_ngcontent-%COMP%]{background-color:#2a2010;border-color:#78350f}.vip-theme[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#d97706}.vip-theme[_ngcontent-%COMP%]   .value-text[_ngcontent-%COMP%]{color:#fcd34d;text-shadow:0 0 10px rgba(251,191,36,.5)}.vip-theme[_ngcontent-%COMP%]   .ing-key[_ngcontent-%COMP%]{background-color:#451a03;border-color:#78350f}.vip-theme[_ngcontent-%COMP%]   .plate-shadow[_ngcontent-%COMP%]{background-color:#b45309;opacity:.5}.vip-theme[_ngcontent-%COMP%]   .glow-text[_ngcontent-%COMP%]{text-shadow:0 0 15px #fbbf24}.fever-theme[_ngcontent-%COMP%]   .card-panel[_ngcontent-%COMP%]{background-color:#2a1010;border-color:#7f1d1d}.fever-theme[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#f87171}.fever-theme[_ngcontent-%COMP%]   .value-text[_ngcontent-%COMP%]{color:#fecaca;text-shadow:0 0 10px rgba(239,68,68,.5)}.fever-theme[_ngcontent-%COMP%]   .glow-text[_ngcontent-%COMP%]{text-shadow:0 0 15px #ef4444}.bg-grid-pattern[_ngcontent-%COMP%]{background-image:radial-gradient(#334155 1px,transparent 1px);background-size:20px 20px;background-position:center}.vip-theme[_ngcontent-%COMP%]   .bg-grid-pattern[_ngcontent-%COMP%]{background-image:radial-gradient(#92400e 1px,transparent 1px)}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.4,0,.2,1) backwards}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-pop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop .15s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}.animate-float[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_floatUp .8s forwards ease-out}@keyframes _ngcontent-%COMP%_floatUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-40px)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade .2s ease-out}@keyframes _ngcontent-%COMP%_fade{0%{opacity:0}to{opacity:1}}.success[_ngcontent-%COMP%]{color:#4ade80;text-shadow:0 2px 0 #000}.error[_ngcontent-%COMP%]{color:#ef4444;text-shadow:0 2px 0 #000}.vip[_ngcontent-%COMP%]{color:#fbbf24;text-shadow:0 0 10px #b45309;font-size:2.5rem}.auto[_ngcontent-%COMP%]{color:#60a5fa;text-shadow:0 2px 0 #1e3a8a}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:2px}"],changeDetection:0})};var Ag=class n{constructor(e){this.gameState=e}progress=0;maxProgress=15;itemValue=150;get progressPercent(){return Math.floor(this.progress/this.maxProgress*100)}work(){this.progress++,this.progress>=this.maxProgress&&this.finishItem()}finishItem(){this.gameState.addMoney(this.itemValue),this.progress=0}static \u0275fac=function(t){return new(t||n)(X(_n))};static \u0275cmp=at({type:n,selectors:[["app-factory-game"]],standalone:!1,decls:13,vars:4,consts:[[1,"p-8","bg-slate-800","rounded-xl","border","border-slate-700","text-white","flex","flex-col","items-center","shadow-xl"],[1,"text-2xl","font-bold","mb-8","text-blue-400"],[1,"relative","w-56","h-56","mb-8","cursor-pointer","transition-transform","active:scale-95",3,"click"],[1,"absolute","inset-0","rounded-full","border-8","border-slate-700","bg-slate-900"],[1,"absolute","inset-0","rounded-full","bg-blue-600","opacity-50","transition-all","duration-75"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","z-10","select-none"],[1,"text-4xl","font-black"],[1,"text-xs","text-slate-400","uppercase","mt-1"],[1,"w-full","max-w-xs","py-4","bg-orange-600","hover:bg-orange-500","text-white","rounded-lg","font-bold","text-xl","uppercase","tracking-wider","shadow-lg","border-b-4","border-orange-800","active:border-0","active:translate-y-1","transition-all",3,"click"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h3",1),E(2,"\u{1F3ED} Ligne d'Assemblage"),g(),v(3,"div",2),z("click",function(){return r.work()}),_e(4,"div",3)(5,"div",4),v(6,"div",5)(7,"span",6),E(8),g(),v(9,"span",7),E(10,"Assemblage"),g()()(),v(11,"button",8),z("click",function(){return r.work()}),E(12),g()()),t&2&&(I(5),Dt("clip-path","inset("+(100-r.progressPercent)+"% 0 0 0)"),I(3),K("",r.progressPercent,"%"),I(4),K(" PRODUIRE (+",r.itemValue,"\u20AC) "))},encapsulation:2})};var xg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-clothing-store-game"]],standalone:!1,decls:2,vars:0,consts:[[1,"p-10","bg-slate-800","rounded-xl","text-center","text-slate-400","border","border-dashed","border-slate-600"]],template:function(t,r){t&1&&(v(0,"div",0),E(1,"\u{1F6A7} Magasin en travaux (Drag & Drop \xE0 venir) \u{1F6A7}"),g())},encapsulation:2})};var iK=["hiddenInput"],gL=(n,e)=>[n,e],vL=(n,e,t)=>[n,e,t];function oK(n,e){if(n&1){let t=Ie();v(0,"button",22),z("click",function(i){Y(t);let o=F(2);return i.stopPropagation(),Q(o.drinkCoffee())}),E(1," \u2615 PAUSE "),g()}}function sK(n,e){n&1&&(v(0,"div",23),E(1,"GEL\xC9"),g())}function aK(n,e){if(n&1&&(v(0,"div",8)(1,"div",18)(2,"span",19),E(3),ne(4,"number"),g()(),$(5,oK,2,0,"button",20)(6,sK,2,0,"div",21),g()),n&2){let t=F();I(),P("ngClass",kf(8,gL,t.activeTheme.borderClass,t.activeTheme.bgClass)),I(),P("ngClass",t.activeTheme.accentClass),I(),K("",Te(4,5,t.currentWpm,"1.0-0")," WPM"),I(2),P("ngIf",t.coffeeLevel>0&&!t.isCoffeeActive&&t.coffeeAvailable),I(),P("ngIf",t.isCoffeeActive)}}function cK(n,e){n&1&&(v(0,"span",24),_e(1,"span",25)(2,"span",26),g())}function lK(n,e){if(n&1&&(v(0,"div",27),E(1),g()),n&2){let t=e.$implicit,r=F();P("ngClass",Ea(2,vL,r.activeTheme.borderClass,r.activeTheme.accentClass,r.activeTheme.bgClass)),I(),K(" ",t," ")}}function uK(n,e){if(n&1){let t=Ie();v(0,"div",34),z("click",function(i){let o=Y(t).$implicit,s=F(2);return i.stopPropagation(),Q(s.startMission(o))}),v(1,"div",35)(2,"span",36),E(3),g(),v(4,"span",37),E(5),g()(),v(6,"h3",38),E(7),g(),v(8,"div",39)(9,"div",40)(10,"span",41),E(11,"Gain"),g(),v(12,"span",42),E(13),ne(14,"number"),g()(),v(15,"div",43)(16,"span",41),E(17,"Temps"),g(),v(18,"span",44),E(19),g()()()()}if(n&2){let t=e.$implicit,r=F(2);P("ngClass",Ea(12,vL,r.activeTheme.borderClass,r.activeTheme.bgClass,r.getMissionClass(t.difficulty))),I(3),he(r.getIcon(t.difficulty)),I(),P("ngClass",r.getDifficultyClass(t.difficulty)),I(),he(t.difficulty),I(2),he(t.title),I(),P("ngClass",r.activeTheme.borderClass),I(4),P("ngClass",r.activeTheme.accentClass),I(),K("",Te(14,9,r.calculateReward(t),"1.0-0")," \u20AC"),I(6),K("",t.timeLimit,"s")}}function dK(n,e){if(n&1&&(v(0,"div",28)(1,"div",29)(2,"h2",30),E(3,"\u{1F4DC} Vos Contrats"),g(),v(4,"p",31),E(5,"Vos employ\xE9s g\xE8rent leurs propres projets en autonomie."),g(),v(6,"div",32),$(7,uK,20,16,"div",33),g()()()),n&2){let t=F();I(7),P("ngForOf",t.availableMissions)}}function hK(n,e){if(n&1&&_e(0,"span",62),n&2){let t=F(4);P("ngClass",t.activeTheme.cursorClass)}}function fK(n,e){if(n&1&&(v(0,"span"),$(1,hK,1,1,"span",60),v(2,"span",61),E(3),g()()),n&2){let t=e.$implicit,r=F(3);I(),P("ngIf",t.index===r.userInput.length),I(),P("ngClass",r.getCharClass(t.index,t.value)),I(),he(t.index<r.userInput.length?r.userInput[t.index]:t.value)}}function pK(n,e){if(n&1&&(v(0,"span",58),$(1,fK,4,3,"span",59),g()),n&2){let t=e.$implicit;We("whitespace-nowrap",!t.isSpace),I(),P("ngForOf",t.chars)}}function mK(n,e){n&1&&(v(0,"div",63),E(1,"CORRIGEZ !"),g())}function gK(n,e){if(n&1){let t=Ie();v(0,"div",45),_e(1,"div",46),v(2,"div",47,0)(4,"div",48)(5,"div",49),E(6),g(),v(7,"div",50),E(8,"COMBO"),g()(),v(9,"div",51)(10,"div",52),$(11,pK,2,3,"span",53),g(),$(12,mK,2,0,"div",54),g(),v(13,"div",55)(14,"div",56),E(15),ne(16,"number"),g()(),v(17,"input",57,1),z("input",function(i){Y(t);let o=F();return Q(o.onInput(i))}),g()()()}if(n&2){let t=F();I(),P("ngClass",t.activeTheme.bgClass),I(3),We("opacity-0",t.currentCombo<2),I(),We("from-amber-400",t.currentCombo>=50),I(),K("x",t.currentCombo),I(3),We("shake-anim",t.hasError),I(2),P("ngForOf",t.currentDisplayTokens),I(),P("ngIf",t.isFinishedButWrong),I(2),We("text-red-500",t.timeLeft<=5),I(),K("",Te(16,13,t.timeLeft,"1.1-1"),"s")}}function vK(n,e){if(n&1&&(v(0,"div",84),E(1),g()),n&2){let t=F(2);I(),K("",t.TEAM_BUILDING_COST,"\u20AC \u2022 30s \u2022 Boost x2.5")}}function _K(n,e){n&1&&(v(0,"div",85)(1,"div",86),E(2,"\u{1F47B}"),g(),v(3,"div"),E(4,"Aucun employ\xE9."),g()())}function yK(n,e){n&1&&(v(0,"div",100),E(1,"En mission..."),g())}function EK(n,e){n&1&&(v(0,"div",101),E(1,"Libre"),g())}function IK(n,e){n&1&&(v(0,"div",102),E(1,"PAUSE"),g())}function bK(n,e){n&1&&(v(0,"div",103),E(1,"ACTIF"),g())}function wK(n,e){if(n&1&&(v(0,"div",104),_e(1,"div",105),g()),n&2){let t=e.ngIf,r=F(3);I(),Dt("width",t.currentMission?t.typedText.length/t.targetText.length*100:0,"%"),P("ngClass",r.isTeamBuildingActive?"bg-orange-500":"bg-blue-500")}}function CK(n,e){if(n&1){let t=Ie();v(0,"div",87)(1,"div",88)(2,"div",89)(3,"span",36),E(4),g(),v(5,"div")(6,"div",90),E(7),g(),$(8,yK,2,0,"div",91)(9,EK,2,0,"div",92),g()(),$(10,IK,2,0,"div",93)(11,bK,2,0,"div",94),g(),$(12,wK,2,3,"div",95),v(13,"div",96)(14,"button",97),z("click",function(){let i=Y(t).$implicit,o=F(2);return Q(o.watchEmployee(i))}),E(15,"\u{1F441}\uFE0F VOIR \xC9CRAN"),g(),v(16,"button",98),z("click",function(){let i=Y(t).$implicit,o=F(2);return Q(o.trainEmployee(i))}),v(17,"span"),E(18,"FORMATION"),g(),v(19,"span"),E(20),g()(),v(21,"button",99),z("click",function(){let i=Y(t).$implicit,o=F(2);return Q(o.togglePause(i))}),E(22),g()()()}if(n&2){let t,r,i=e.$implicit,o=e.index,s=F(2);We("opacity-50",i.isPaused),I(4),he(i.role==="DEV_JUNIOR"?"\u{1F468}\u200D\u{1F4BB}":"\u{1F9D9}\u200D\u2642\uFE0F"),I(3),K("Dev #",o+1),I(),P("ngIf",(t=s.getWorkerState(i.id))==null?null:t.currentMission),I(),P("ngIf",!((r=s.getWorkerState(i.id))!=null&&r.currentMission)),I(),P("ngIf",i.isPaused),I(),P("ngIf",!i.isPaused),I(),P("ngIf",s.getWorkerState(i.id)),I(4),P("disabled",s.currentMoney<s.getTrainCost(i)),I(4),K("",s.getTrainCost(i),"\u20AC"),I(2),he(i.isPaused?"REPRENDRE":"METTRE EN PAUSE")}}function SK(n,e){if(n&1){let t=Ie();v(0,"div",64),z("click",function(i){return Y(t),Q(i.stopPropagation())}),v(1,"div",65)(2,"div",66)(3,"h3",67),E(4,"\u{1F465} GESTION \xC9QUIPE"),g(),v(5,"button",68),z("click",function(){Y(t);let i=F();return Q(i.toggleStaff())}),E(6,"\u2715"),g()(),v(7,"div",69)(8,"div",70)(9,"button",71),z("click",function(){Y(t);let i=F();return Q(i.startTeamBuilding())}),v(10,"span",36),E(11,"\u{1F355}"),g(),v(12,"div",72)(13,"div"),E(14),g(),$(15,vK,2,1,"div",73),g()(),v(16,"div",74)(17,"div",75),E(18,"Stagiaire"),g(),v(19,"div",76),E(20,"Petits contrats."),g(),v(21,"button",77),z("click",function(){Y(t);let i=F();return Q(i.hire(0))}),E(22),g()(),v(23,"div",78)(24,"div",75),E(25,"Senior"),g(),v(26,"div",76),E(27,"Gros contrats."),g(),v(28,"button",79),z("click",function(){Y(t);let i=F();return Q(i.hire(1))}),E(29),g()()(),v(30,"div",80),$(31,_K,5,0,"div",81),v(32,"div",82),$(33,CK,23,12,"div",83),g()()()()()}if(n&2){let t=F();I(9),P("disabled",t.currentMoney<t.TEAM_BUILDING_COST||t.isTeamBuildingActive)("ngClass",t.isTeamBuildingActive?"bg-green-600 text-white animate-pulse":"bg-gradient-to-r from-orange-600 to-red-600 text-white hover:brightness-110"),I(5),he(t.isTeamBuildingActive?"PARTY EN COURS !":"PIZZA PARTY"),I(),P("ngIf",!t.isTeamBuildingActive),I(6),P("disabled",!t.canHire(0)),I(),K("",t.getHireCost(0)," \u20AC"),I(6),P("disabled",!t.canHire(1)),I(),K("",t.getHireCost(1)," \u20AC"),I(2),P("ngIf",t.employees.length===0),I(2),P("ngForOf",t.employees)}}function DK(n,e){if(n&1&&(v(0,"div",118)(1,"span"),E(2,"Bonus \xC9cran"),g(),v(3,"span"),E(4),ne(5,"number"),g()()),n&2){let t=F(3);I(4),K("+",Te(5,1,t.getScreenBonus((t.activeMission==null?null:t.activeMission.reward)||0),"1.0-0")," \u20AC")}}function TK(n,e){if(n&1&&(v(0,"div",112)(1,"div",96)(2,"div",113)(3,"span"),E(4,"Base"),g(),v(5,"span"),E(6),g()(),v(7,"div",114)(8,"span"),E(9,"Combo"),g(),v(10,"span"),E(11),g()(),$(12,DK,6,4,"div",115),_e(13,"div",116),v(14,"div",117)(15,"span"),E(16,"TOTAL"),g(),v(17,"span"),E(18),ne(19,"number"),g()()()()),n&2){let t=F(2);I(6),K("",t.activeMission==null?null:t.activeMission.reward," \u20AC"),I(5),K("+",t.maxComboReached," \u20AC"),I(),P("ngIf",t.screenLevel>0),I(6),K("+",Te(19,4,t.lastReward,"1.0-0")," \u20AC")}}function AK(n,e){if(n&1){let t=Ie();v(0,"div",106),z("click",function(i){return Y(t),Q(i.stopPropagation())}),v(1,"div",107)(2,"div",108),E(3),g(),v(4,"h3",109),E(5),g(),$(6,TK,20,7,"div",110),v(7,"button",111),z("click",function(){Y(t);let i=F();return Q(i.closeResult())}),E(8,"Continuer \u27A1\uFE0F"),g()()()}if(n&2){let t=F();I(3),he(t.missionResult==="SUCCESS"?"\u{1F3C6}":"\u{1F480}"),I(),We("text-green-400",t.missionResult==="SUCCESS")("text-red-400",t.missionResult==="FAIL"),I(),he(t.missionResult==="SUCCESS"?"CONTRAT REMPLI":"\xC9CHEC"),I(),P("ngIf",t.missionResult==="SUCCESS")}}var Rg=class n{constructor(e,t,r){this.gameStateService=e;this.soundService=t;this.cdr=r}hiddenInput;availableMissions=[];activeMission=null;currentLineIndex=0;currentTargetLine="";currentDisplayTokens=[];userInput="";timeLeft=0;timerInterval;missionResult=null;lastReward=0;hasError=!1;currentCombo=0;maxComboReached=0;startTime=0;endTime=0;totalCharsTyped=0;isShopOpen=!1;isStaffOpen=!1;chairLevel=0;screenLevel=0;coffeeLevel=0;pcLevel=0;isCoffeeActive=!1;coffeeAvailable=!0;currentMoney=0;contractsCompleted=0;employees=[];workerStates={};workerInterval;notifications=[];watchedEmployee=null;activeTheme=ld[0];isTeamBuildingActive=!1;teamBuildingEndTime=0;TEAM_BUILDING_COST=2e3;TEAM_BUILDING_DURATION=3e4;WORDS_EASY=["chat","chien","ami","pain","eau","mer","ciel","mur","sac","bus","lit","bol","the","sel","coq","or","loi","nez","vis","rue","pin","pot","jeu","gaz","main","pied","joie","papa","cafe"];WORDS_HARD=["voiture","maison","enfant","ecole","manger","dormir","prendre","parler","soleil","jardin","fleur","oiseau","pomme","table","chaise","livre","crayon","porte","fenetre","arbres","nuage","pluie","neige","route","ville","famille","musique","bonheur","sourire","liberte","courage","vitesse"];WORDS_HACKER=["mainframe","firewall","bypass","encrypt","socket","buffer","overflow","inject","root","sudo","access","denied","proxy","daemon","kernel","panic","matrix","cyber","secure","token"];get isFinishedButWrong(){return this.userInput.length===this.currentTargetLine.length&&this.userInput!==this.currentTargetLine}get currentWpm(){if(!this.startTime)return 0;let t=((this.endTime||performance.now())-this.startTime)/6e4;return t<.001?0:Math.floor(this.totalCharsTyped/5/t)}ngOnInit(){this.gameStateService.gameState$.subscribe(e=>{if(this.currentMoney=e.money,e.freelanceUpgrades){this.chairLevel=e.freelanceUpgrades.chairLevel,this.screenLevel=e.freelanceUpgrades.screenLevel,this.coffeeLevel=e.freelanceUpgrades.coffeeLevel,this.pcLevel=e.freelanceUpgrades.pcLevel,this.contractsCompleted=e.freelanceUpgrades.contractsCompleted||0;let r=e.freelanceUpgrades.activeThemeId,i=ld.find(o=>o.id===r);i&&(this.activeTheme=i)}let t=e.companies.find(r=>r.id==="2");t&&(this.employees=t.employees,this.employees.forEach(r=>{this.workerStates[r.id]||(this.workerStates[r.id]={currentMission:null,targetText:"",typedText:"",progress:0,status:"IDLE",cooldown:0})})),this.cdr.markForCheck()}),this.generateMissions(),this.startWorkerSimulation()}ngOnDestroy(){this.stopTimer(),this.stopWatching(),this.workerInterval&&clearInterval(this.workerInterval)}focusInput(){!this.isShopOpen&&!this.isStaffOpen&&!this.watchedEmployee&&!this.missionResult&&this.activeMission&&setTimeout(()=>this.hiddenInput?.nativeElement.focus(),0)}toggleShop(){this.isShopOpen=!this.isShopOpen,this.isStaffOpen=!1,this.isShopOpen||this.focusInput(),this.cdr.markForCheck()}toggleStaff(){this.isStaffOpen=!this.isStaffOpen,this.isShopOpen=!1,this.cdr.markForCheck()}startTeamBuilding(){this.currentMoney>=this.TEAM_BUILDING_COST&&!this.isTeamBuildingActive&&(this.gameStateService.addMoney(-this.TEAM_BUILDING_COST),this.isTeamBuildingActive=!0,this.teamBuildingEndTime=Date.now()+this.TEAM_BUILDING_DURATION,this.soundService.playSuccess(),this.showNotification("\u{1F355} PIZZA PARTY ACTIV\xC9E ! (+150% Vitesse)"),setTimeout(()=>{this.isTeamBuildingActive=!1,this.showNotification("Fin de la Pizza Party..."),this.cdr.markForCheck()},this.TEAM_BUILDING_DURATION))}getCost(e){return{CHAIR:2e3,SCREEN:5e3,COFFEE:1500,PC:2e4}[e]||0}canBuy(e){return this.currentMoney>=this.getCost(e)}buyItem(e){this.gameStateService.buySetupUpgrade(e,this.getCost(e))}getHireCost(e){let t=e===0?"DEV_JUNIOR":"DEV_SENIOR";return this.gameStateService.getNextHireCost("2",t)}canHire(e){return this.currentMoney>=this.getHireCost(e)}hire(e){let t=e===0?"DEV_JUNIOR":"DEV_SENIOR";this.gameStateService.hireEmployee("2",t)}getTrainCost(e){return Math.floor(500*Math.pow(1.5,e.efficiency))}trainEmployee(e){this.gameStateService.upgradeEmployeeSetup("2",e.id,this.getTrainCost(e))}togglePause(e){this.gameStateService.toggleEmployeePause("2",e.id)}drinkCoffee(){this.isCoffeeActive||!this.coffeeAvailable||(this.isCoffeeActive=!0,this.coffeeAvailable=!1,this.soundService.playPop(),setTimeout(()=>{this.isCoffeeActive=!1,this.cdr.markForCheck()},5e3))}startWorkerSimulation(){this.workerInterval&&clearInterval(this.workerInterval),this.workerInterval=setInterval(()=>{this.employees.forEach(e=>{if(e.isPaused)return;let t=this.workerStates[e.id];if(t){if(t.status==="IDLE")if(t.cooldown>0)t.cooldown-=this.isTeamBuildingActive?.3:.1;else{let r=e.role==="DEV_JUNIOR"?Math.random()>.7?"MEDIUM":"EASY":"HARD",i=this.createMission(0,r);t.currentMission=i,t.targetText=i.lines[0],t.typedText="",t.status="WORKING"}else if(t.status==="WORKING"&&t.targetText){let r=e.role==="DEV_SENIOR"?.3:.1;if(r+=e.efficiency*.05,this.isTeamBuildingActive&&(r*=2.5),Math.random()<r&&(t.typedText+=t.targetText[t.typedText.length],t.typedText.length>=t.targetText.length)){let i=Math.floor(t.currentMission.reward*.2);this.gameStateService.addMoney(i),this.showNotification(`+${i}\u20AC (${e.role==="DEV_JUNIOR"?"Jr":"Sr"})`),t.status="IDLE",t.currentMission=null,t.cooldown=3}}}}),this.cdr.markForCheck()},100)}getWorkerState(e){return this.workerStates[e]}showNotification(e){this.notifications.push(e),setTimeout(()=>{this.notifications.shift(),this.cdr.markForCheck()},2e3)}watchEmployee(e){this.watchedEmployee=e,this.isStaffOpen=!1,this.cdr.markForCheck()}stopWatching(){this.watchedEmployee=null,this.isStaffOpen=!0,this.cdr.markForCheck()}generateMissions(){this.availableMissions=[];let e=.05+this.pcLevel*.02,t=this.pcLevel>0?.1:0;for(let r=0;r<3;r++){let i=Math.random();if(i<e)this.availableMissions.push(this.createMission(r,"BOSS"));else if(i<e+t)this.availableMissions.push(this.createMission(r,"HACKER"));else{let o=Math.random()>.6?"HARD":Math.random()>.3?"MEDIUM":"EASY";this.availableMissions.push(this.createMission(r,o))}}}createMission(e,t){let r=30,i=100,o=2,s=5;return t==="BOSS"?(r=45,i=5e3,o=5,s=10):t==="HACKER"?(r=20,i=2e3,o=4,s=6):t==="EASY"?(r=20,i=150,o=2,s=4):t==="MEDIUM"?(r=35,i=400,o=3,s=6):(r=50,i=1e3,o=4,s=8),{id:e,title:t==="BOSS"?"URGENCE":t==="HACKER"?"HACKING":"Mission",description:t==="HACKER"?"Piratage...":"Tapez vite.",difficulty:t,reward:i,timeLimit:r,lines:this.generateRandomLines(o,s,t)}}generateRandomLines(e,t,r){let i=[],o=r==="HACKER"?this.WORDS_HACKER:r==="HARD"||r==="BOSS"?this.WORDS_HARD:this.WORDS_EASY;for(let s=0;s<e;s++){let a=[];for(let c=0;c<t;c++)a.push(o[Math.floor(Math.random()*o.length)]);i.push(a.join(" "))}return i}prepareDisplayTokens(e){let t=[],r=0;return e.split(/(\s+)/).forEach(o=>{if(o.length===0)return;let s=[];for(let a=0;a<o.length;a++)s.push({value:o[a],index:r}),r++;t.push({isSpace:/^\s+$/.test(o),chars:s})}),t}startMission(e){this.activeMission=e,this.currentLineIndex=0,this.loadLine(e.lines[0]),this.userInput="",this.timeLeft=e.timeLimit,this.missionResult=null,this.currentCombo=0,this.maxComboReached=0,this.totalCharsTyped=0,this.startTime=performance.now(),this.endTime=0,this.isCoffeeActive=!1,this.coffeeAvailable=!0,this.startTimer(),this.soundService.playPop(),setTimeout(()=>this.focusInput(),100),this.cdr.markForCheck()}loadLine(e){this.currentTargetLine=e,this.currentDisplayTokens=this.prepareDisplayTokens(e),this.userInput="",this.hiddenInput&&(this.hiddenInput.nativeElement.value="")}startTimer(){this.stopTimer(),this.timerInterval=setInterval(()=>{if(this.isCoffeeActive)return;let e=.1*(1-this.chairLevel*.2);this.timeLeft-=e,this.timeLeft<=0&&(this.timeLeft=0,this.endMission(!1)),this.cdr.markForCheck()},100)}stopTimer(){this.timerInterval&&clearInterval(this.timerInterval)}handleKeyboard(e){!this.activeMission||this.missionResult||this.isShopOpen||this.isStaffOpen||this.watchedEmployee||this.focusInput()}onInput(e){if(!this.activeMission||this.missionResult)return;let t=e.target.value;t.length>this.currentTargetLine.length?(this.userInput=t.slice(0,this.currentTargetLine.length),e.target.value=this.userInput):this.userInput=t,this.userInput.length>this.totalCharsTyped&&(this.userInput[this.userInput.length-1]===" "?this.soundService.playSpace():this.soundService.playRandomKey(),this.checkInput()),this.totalCharsTyped=this.userInput.length,this.cdr.markForCheck()}checkInput(){let e=this.userInput.length-1;e<0||(this.userInput[e]===this.currentTargetLine[e]?(this.currentCombo++,this.currentCombo>this.maxComboReached&&(this.maxComboReached=this.currentCombo)):(this.currentCombo=0,this.triggerError()),this.userInput===this.currentTargetLine&&(this.soundService.playSuccess(),setTimeout(()=>this.nextLine(),150)))}triggerError(){this.hasError=!0,this.soundService.playError(),setTimeout(()=>{this.hasError=!1,this.cdr.markForCheck()},300)}nextLine(){this.currentLineIndex++,this.activeMission&&this.currentLineIndex>=this.activeMission.lines.length?this.endMission(!0):this.activeMission&&(this.loadLine(this.activeMission.lines[this.currentLineIndex]),this.cdr.markForCheck())}calculateReward(e){let t=e.reward*(this.screenLevel*.5);return e.reward+t}getScreenBonus(e){return e*(this.screenLevel*.5)}endMission(e){if(this.stopTimer(),this.endTime=performance.now(),this.missionResult=e?"SUCCESS":"FAIL",e&&this.activeMission){let t=this.calculateReward(this.activeMission),r=this.maxComboReached;this.lastReward=t+r,this.gameStateService.addMoney(this.lastReward),this.gameStateService.incrementContractsCompleted(),this.activeMission.difficulty==="BOSS"&&this.gameStateService.incrementBossBeaten(),this.soundService.playSuccess()}else this.soundService.playError();this.cdr.markForCheck()}closeResult(){this.missionResult=null,this.activeMission=null,this.generateMissions(),this.cdr.markForCheck()}getCharClass(e,t){if(e>=this.userInput.length)return this.activeTheme.textClass+" opacity-40";let r=this.userInput[e];return r===t?this.activeTheme.successClass:r===" "?"bg-red-500/50 text-white":"text-red-500 font-bold"}getIcon(e){return e==="BOSS"?"\u{1F479}":e==="HACKER"?"\u{1F4BB}":e==="EASY"?"\u{1F7E2}":e==="MEDIUM"?"\u{1F7E0}":"\u{1F534}"}getDifficultyClass(e){return e==="HACKER"?"border-green-500 text-green-500 bg-green-900/20":e==="BOSS"?"border-red-500 text-red-500 bg-red-900/20 animate-pulse":"border-slate-500 text-slate-500"}getMissionClass(e){return e==="HACKER"?"border-green-500 bg-green-900/10":e==="BOSS"?"border-red-500 bg-red-900/10":"border-slate-700 bg-slate-800"}static \u0275fac=function(t){return new(t||n)(X(_n),X(Gn),X(Ut))};static \u0275cmp=at({type:n,selectors:[["app-freelance-dev-game"]],viewQuery:function(t,r){if(t&1&&_a(iK,5),t&2){let i;Ko(i=Yo())&&(r.hiddenInput=i.first)}},hostBindings:function(t,r){t&1&&z("keydown",function(o){return r.handleKeyboard(o)},Sl)},standalone:!1,decls:22,vars:17,consts:[["gameZone",""],["hiddenInput",""],[1,"h-full","font-sans","flex","flex-col","relative","overflow-hidden","select-none","transition-colors","duration-500",3,"click","ngClass"],[1,"p-4","border-b","flex","justify-between","items-center","shadow-md","z-10","relative",3,"ngClass"],[1,"flex","items-center","gap-4"],[1,"w-3","h-3","rounded-full","bg-red-500","animate-pulse"],[1,"text-sm","font-bold","opacity-50","hidden","sm:block"],["class","flex items-center gap-3",4,"ngIf"],[1,"flex","items-center","gap-3"],[1,"px-3","py-1","bg-blue-600","hover:bg-blue-500","text-white","text-xs","font-bold","rounded","shadow","flex","items-center","gap-2","transition-all","relative",3,"click"],["class","absolute -top-1 -right-1 flex h-2 w-2",4,"ngIf"],[1,"font-bold","font-mono","text-lg",3,"ngClass"],[1,"absolute","top-20","right-4","z-20","pointer-events-none","flex","flex-col","gap-2","items-end"],["class","backdrop-blur px-3 py-1 rounded border text-xs shadow-lg animate-fade-out-up",3,"ngClass",4,"ngFor","ngForOf"],["class","flex-1 p-8 overflow-y-auto custom-scroll",4,"ngIf"],["class","flex-1 flex flex-col relative transition-colors duration-500",4,"ngIf"],["class","absolute inset-0 bg-slate-950/95 z-50 flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-slate-900/90 z-50 flex items-center justify-center backdrop-blur-md animate-fade-in",3,"click",4,"ngIf"],[1,"px-3","py-1","rounded-full","border","text-xs","font-bold","flex","gap-2",3,"ngClass"],[3,"ngClass"],["class","bg-amber-700 hover:bg-amber-600 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 transition-all animate-bounce",3,"click",4,"ngIf"],["class","text-amber-400 text-xs font-black animate-pulse",4,"ngIf"],[1,"bg-amber-700","hover:bg-amber-600","text-white","px-3","py-1","rounded-full","text-xs","font-bold","flex","items-center","gap-1","transition-all","animate-bounce",3,"click"],[1,"text-amber-400","text-xs","font-black","animate-pulse"],[1,"absolute","-top-1","-right-1","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-green-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-green-500"],[1,"backdrop-blur","px-3","py-1","rounded","border","text-xs","shadow-lg","animate-fade-out-up",3,"ngClass"],[1,"flex-1","p-8","overflow-y-auto","custom-scroll"],[1,"max-w-4xl","mx-auto"],[1,"text-3xl","font-black","mb-2","tracking-tight","flex","items-center","gap-3"],[1,"opacity-60","mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","group relative border rounded-xl p-5 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-xl",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"group","relative","border","rounded-xl","p-5","cursor-pointer","transition-all","hover:-translate-y-1","hover:shadow-xl",3,"click","ngClass"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-2xl"],[1,"px-2","py-1","rounded","text-[10px]","font-bold","uppercase","tracking-wider","border",3,"ngClass"],[1,"font-bold","text-lg","mb-1","transition-colors","group-hover:opacity-80"],[1,"mt-4","pt-4","border-t","flex","justify-between","items-center",3,"ngClass"],[1,"flex","flex-col"],[1,"text-[10px]","opacity-60","uppercase"],[1,"font-bold",3,"ngClass"],[1,"flex","flex-col","items-end"],[1,"font-bold"],[1,"flex-1","flex","flex-col","relative","transition-colors","duration-500"],[1,"absolute","inset-0","opacity-10","pointer-events-none",3,"ngClass"],[1,"flex-1","p-8","flex","flex-col","justify-center","items-center","relative","overflow-hidden"],[1,"absolute","top-10","right-10","flex","flex-col","items-end","transition-all","duration-200","z-30"],[1,"text-6xl","font-black","italic","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-b","from-white","to-slate-400"],[1,"text-xs","font-bold","opacity-50","uppercase","tracking-widest"],[1,"relative","z-20","w-full","max-w-5xl","text-center","leading-relaxed","select-none","cursor-text","transition-transform","duration-100"],[1,"text-4xl","font-sans","font-medium","tracking-normal","opacity-80"],["class","inline-block",3,"whitespace-nowrap",4,"ngFor","ngForOf"],["class","mt-8 text-red-500 font-bold text-xl animate-bounce",4,"ngIf"],[1,"absolute","bottom-8","flex","flex-col","items-center","z-30"],[1,"text-5xl","font-mono","font-black","transition-colors","duration-300","drop-shadow-lg"],["type","text","autofocus","","autocomplete","off","spellcheck","false",1,"absolute","opacity-0","top-0","left-0","h-full","w-full","cursor-text",3,"input"],[1,"inline-block"],[4,"ngFor","ngForOf"],["class","inline-block w-[3px] h-8 align-middle animate-pulse -mb-1 mr-[1px] rounded-full shadow-[0_0_15px_rgba(59,130,246,1)]",3,"ngClass",4,"ngIf"],[1,"transition-all","duration-150","border-b-2","border-transparent","inline-block","min-w-[12px]","whitespace-pre","text-center",3,"ngClass"],[1,"inline-block","w-[3px]","h-8","align-middle","animate-pulse","-mb-1","mr-[1px]","rounded-full","shadow-[0_0_15px_rgba(59,130,246,1)]",3,"ngClass"],[1,"mt-8","text-red-500","font-bold","text-xl","animate-bounce"],[1,"absolute","inset-0","bg-slate-950/95","z-50","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-4xl","h-[85%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-900"],[1,"font-black","text-white","text-2xl"],[1,"w-8","h-8","rounded-full","bg-slate-800","hover:bg-slate-700","text-slate-400","flex","items-center","justify-center","transition-colors",3,"click"],[1,"flex-1","flex","overflow-hidden"],[1,"w-1/3","bg-slate-950","p-4","border-r","border-slate-800","flex","flex-col","gap-4"],[1,"w-full","py-4","rounded-xl","font-black","text-sm","uppercase","tracking-wider","shadow-lg","flex","flex-col","items-center","justify-center","gap-2","transition-all","transform","active:scale-95","border","border-white/10",3,"click","disabled","ngClass"],[1,"text-center","leading-tight"],["class","text-[10px] opacity-80 font-normal mt-1",4,"ngIf"],[1,"bg-slate-900","p-3","rounded","border","border-slate-800","hover:border-blue-500","transition-colors","mt-2"],[1,"font-bold","text-white"],[1,"text-xs","text-slate-400","mb-2"],[1,"w-full","py-2","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-800","text-white","text-xs","font-bold","rounded",3,"click","disabled"],[1,"bg-slate-900","p-3","rounded","border","border-slate-800","hover:border-purple-500","transition-colors"],[1,"w-full","py-2","bg-purple-600","hover:bg-purple-500","disabled:bg-slate-800","text-white","text-xs","font-bold","rounded",3,"click","disabled"],[1,"flex-1","p-6","bg-slate-900","overflow-y-auto","custom-scroll"],["class","h-full flex flex-col items-center justify-center text-slate-600",4,"ngIf"],[1,"grid","grid-cols-2","gap-4"],["class","bg-slate-800 p-3 rounded-lg border border-slate-700 relative",3,"opacity-50",4,"ngFor","ngForOf"],[1,"text-[10px]","opacity-80","font-normal","mt-1"],[1,"h-full","flex","flex-col","items-center","justify-center","text-slate-600"],[1,"text-4xl","mb-2"],[1,"bg-slate-800","p-3","rounded-lg","border","border-slate-700","relative"],[1,"flex","justify-between","items-start","mb-2"],[1,"flex","items-center","gap-2"],[1,"font-bold","text-white","text-sm"],["class","text-[10px] text-slate-400",4,"ngIf"],["class","text-[10px] text-slate-600",4,"ngIf"],["class","text-[10px] bg-red-900 text-red-300 px-2 py-0.5 rounded",4,"ngIf"],["class","text-[10px] bg-green-900 text-green-300 px-2 py-0.5 rounded",4,"ngIf"],["class","h-1 w-full bg-black rounded-full mb-2 overflow-hidden",4,"ngIf"],[1,"flex","flex-col","gap-2"],[1,"w-full","py-1.5","bg-slate-700","hover:bg-slate-600","text-white","text-[10px]","font-bold","rounded","border","border-slate-600","flex","items-center","justify-center","gap-2",3,"click"],[1,"w-full","py-1.5","bg-green-700","hover:bg-green-600","disabled:bg-slate-700","text-white","text-[10px]","font-bold","rounded","flex","justify-between","px-2",3,"click","disabled"],[1,"w-full","py-1.5","bg-slate-700","hover:bg-slate-600","text-white","text-[10px]","font-bold","rounded",3,"click"],[1,"text-[10px]","text-slate-400"],[1,"text-[10px]","text-slate-600"],[1,"text-[10px]","bg-red-900","text-red-300","px-2","py-0.5","rounded"],[1,"text-[10px]","bg-green-900","text-green-300","px-2","py-0.5","rounded"],[1,"h-1","w-full","bg-black","rounded-full","mb-2","overflow-hidden"],[1,"h-full","transition-all","duration-300",3,"ngClass"],[1,"absolute","inset-0","bg-slate-900/90","z-50","flex","items-center","justify-center","backdrop-blur-md","animate-fade-in",3,"click"],[1,"bg-slate-800","p-8","rounded-2xl","border-2","shadow-2xl","max-w-sm","w-full","text-center"],[1,"text-6xl","mb-4"],[1,"text-2xl","font-black","uppercase","mb-6"],["class","bg-green-900/20 p-4 rounded-xl mb-6 border border-green-500/30 w-full",4,"ngIf"],[1,"w-full","py-4","rounded-xl","font-bold","uppercase","tracking-wider","transition-all","shadow-lg","active:scale-95","bg-slate-700","hover:bg-slate-600","text-white",3,"click"],[1,"bg-green-900/20","p-4","rounded-xl","mb-6","border","border-green-500/30","w-full"],[1,"flex","justify-between","items-center","text-sm","text-green-200/70"],[1,"flex","justify-between","items-center","text-sm","text-amber-400","font-bold"],["class","flex justify-between items-center text-sm text-purple-400 font-bold",4,"ngIf"],[1,"h-px","bg-green-500/30","my-1"],[1,"flex","justify-between","items-center","text-2xl","font-black","text-green-400"],[1,"flex","justify-between","items-center","text-sm","text-purple-400","font-bold"]],template:function(t,r){t&1&&(v(0,"div",2),z("click",function(){return r.focusInput()}),v(1,"div",3)(2,"div",4),_e(3,"div",5),v(4,"span",6),E(5,"FreelanceOS v28"),g(),$(6,aK,7,11,"div",7),g(),v(7,"div",8)(8,"button",9),z("click",function(o){return o.stopPropagation(),r.toggleStaff()}),v(9,"span"),E(10,"\u{1F465}"),g(),E(11," \xC9QUIPE "),$(12,cK,3,0,"span",10),g(),v(13,"div",11),E(14),ne(15,"number"),g()()(),v(16,"div",12),$(17,lK,2,6,"div",13),g(),$(18,dK,8,1,"div",14)(19,gK,19,16,"div",15)(20,SK,34,10,"div",16)(21,AK,9,7,"div",17),g()),t&2&&(P("ngClass",kf(14,gL,r.activeTheme.bgClass,r.activeTheme.textClass)),I(),P("ngClass",r.activeTheme.borderClass),I(5),P("ngIf",r.activeMission),I(6),P("ngIf",r.employees.length>0),I(),P("ngClass",r.activeTheme.accentClass),I(),K(" ",Te(15,11,r.currentMoney,"1.0-0")," \u20AC "),I(3),P("ngForOf",r.notifications),I(),P("ngIf",!r.activeMission),I(),P("ngIf",r.activeMission),I(),P("ngIf",r.isStaffOpen),I(),P("ngIf",r.missionResult))},dependencies:[Xo,wr,nr,Jr],styles:[".custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:3px}.shake-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .2s cubic-bezier(.36,.07,.19,.97) both}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-2px,0,0)}20%,80%{transform:translate3d(4px,0,0)}40%,60%{transform:translate3d(6px,0,0)}}.neon-glow[_ngcontent-%COMP%]{color:#4ade80;text-shadow:0 0 5px #4ade80,0 0 10px #4ade80;font-weight:900;transform:scale(1.1)}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.animate-fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp 2s ease-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}"],changeDetection:0})};function RK(n,e){if(n&1&&(v(0,"p",18),E(1),g()),n&2){let t=F(2);I(),K(" \u274C ",t.errorMessage," ")}}function PK(n,e){n&1&&(v(0,"p",19),E(1," Connexion Google obligatoire pour sauvegarder et appara\xEEtre dans le classement. "),g())}function kK(n,e){if(n&1){let t=Ie();v(0,"div",7)(1,"div",8)(2,"h1",9),E(3," JEUB2 "),g(),v(4,"div",10),E(5," ONLINE EDITION "),g(),v(6,"div",11),E(7,"Devenez le CEO ultime"),g()(),v(8,"div",12)(9,"button",13),z("click",function(){Y(t);let i=F();return Q(i.login())}),v(10,"span",14),E(11,"G"),g(),v(12,"span"),E(13,"SE CONNECTER AVEC GOOGLE"),g(),_e(14,"div",15),g(),$(15,RK,2,1,"p",16)(16,PK,2,0,"p",17),g()()}if(n&2){let t=F();I(15),P("ngIf",t.errorMessage),I(),P("ngIf",!t.errorMessage)}}function NK(n,e){if(n&1){let t=Ie();v(0,"div",20)(1,"div",21),E(2,"\u{1F44B}"),g(),v(3,"h2",22),E(4,"Bienvenue, Futur CEO !"),g(),v(5,"p",23),E(6,"C'est votre premi\xE8re fois ici. Comment devons-nous vous appeler ?"),g(),v(7,"input",24),Jo("ngModelChange",function(i){Y(t);let o=F();return ya(o.chosenUsername,i)||(o.chosenUsername=i),Q(i)}),z("keyup.enter",function(){Y(t);let i=F();return Q(i.confirmName())}),g(),v(8,"button",25),z("click",function(){Y(t);let i=F();return Q(i.confirmName())}),E(9," COMMENCER L'AVENTURE \u{1F680} "),g()()}if(n&2){let t=F();I(7),Qo("ngModel",t.chosenUsername),I(),P("disabled",!t.chosenUsername)}}var Pg=class n{constructor(e,t,r){this.firebase=e;this.gameState=t;this.sound=r}isChoosingName=!1;chosenUsername="";pendingUser=null;errorMessage="";async login(){this.sound.playSoftPop(),this.errorMessage="";try{await this.firebase.loginGoogle();let e=this.firebase.authInstance.currentUser;if(e){if(!await this.gameState.checkIfUserHasSave(e)){this.pendingUser=e,this.chosenUsername=e.displayName||"",this.isChoosingName=!0;return}this.finalizeLogin()}}catch(e){console.error("Erreur Login",e),e.code==="auth/popup-closed-by-user"?this.errorMessage="Connexion annul\xE9e par l'utilisateur.":e.code==="auth/popup-blocked"?this.errorMessage="Le popup a \xE9t\xE9 bloqu\xE9. V\xE9rifiez vos param\xE8tres ou les domaines autoris\xE9s Firebase.":e.code==="auth/unauthorized-domain"?this.errorMessage="Domaine non autoris\xE9 dans Firebase Console (Ajoutez nathancas9999.github.io).":this.errorMessage="Impossible de se connecter : "+e.message,this.sound.playError()}}async confirmName(){this.chosenUsername.trim()&&(this.sound.playSuccess(),this.pendingUser&&await this.gameState.initializeNewUser(this.pendingUser,this.chosenUsername),this.finalizeLogin())}async finalizeLogin(){try{await this.gameState.connectOnline()}catch(e){console.error("Erreur fatale",e)}}static \u0275fac=function(t){return new(t||n)(X(Io),X(_n),X(Gn))};static \u0275cmp=at({type:n,selectors:[["app-title-screen"]],standalone:!1,decls:8,vars:2,consts:[[1,"h-screen","w-screen","bg-slate-950","flex","flex-col","items-center","justify-center","relative","overflow-hidden","font-sans","select-none"],[1,"absolute","inset-0","opacity-20","pointer-events-none"],[1,"absolute","top-0","left-0","w-full","h-full","bg-[radial-gradient(circle_at_50%_50%,_#3b82f6_0%,_transparent_50%)]","animate-pulse"],[1,"grid-bg","absolute","inset-0"],["class","z-10 flex flex-col items-center gap-8 animate-fade-in-up",4,"ngIf"],["class","z-20 bg-slate-900 border border-slate-700 p-8 rounded-2xl shadow-2xl flex flex-col items-center gap-6 animate-fade-in max-w-md w-full mx-4",4,"ngIf"],[1,"absolute","bottom-4","text-slate-700","text-xs","font-mono"],[1,"z-10","flex","flex-col","items-center","gap-8","animate-fade-in-up"],[1,"relative","group","cursor-default"],[1,"text-8xl","md:text-9xl","font-black","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-b","from-white","to-slate-400","drop-shadow-2xl"],[1,"absolute","-top-4","-right-8","bg-blue-600","text-white","text-xs","font-bold","px-2","py-1","rounded","rotate-12","shadow-lg"],[1,"text-center","text-slate-500","font-mono","text-sm","tracking-[0.5em]","mt-2","uppercase"],[1,"flex","flex-col","items-center","gap-4","mt-8"],[1,"group","relative","px-8","py-4","bg-white","text-slate-900","font-black","text-xl","rounded-full","shadow-[0_0_40px_rgba(255,255,255,0.3)]","hover:shadow-[0_0_60px_rgba(255,255,255,0.5)]","hover:scale-105","transition-all","duration-300","flex","items-center","gap-3",3,"click"],[1,"text-2xl"],[1,"absolute","inset-0","rounded-full","border-2","border-white","opacity-0","group-hover:opacity-100","group-hover:scale-110","transition-all","duration-500"],["class","text-red-400 font-bold text-xs mt-4 max-w-xs text-center bg-red-900/20 p-2 rounded border border-red-500/30",4,"ngIf"],["class","text-slate-600 text-xs mt-4 max-w-xs text-center",4,"ngIf"],[1,"text-red-400","font-bold","text-xs","mt-4","max-w-xs","text-center","bg-red-900/20","p-2","rounded","border","border-red-500/30"],[1,"text-slate-600","text-xs","mt-4","max-w-xs","text-center"],[1,"z-20","bg-slate-900","border","border-slate-700","p-8","rounded-2xl","shadow-2xl","flex","flex-col","items-center","gap-6","animate-fade-in","max-w-md","w-full","mx-4"],[1,"text-4xl"],[1,"text-2xl","font-black","text-white","text-center"],[1,"text-slate-400","text-center","text-sm"],["type","text","placeholder","Votre Pseudo...",1,"w-full","bg-slate-800","border","border-slate-600","rounded-lg","px-4","py-3","text-white","font-bold","text-center","focus:border-blue-500","focus:outline-none","transition-colors",3,"ngModelChange","keyup.enter","ngModel"],[1,"w-full","py-3","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-bold","rounded-lg","transition-all",3,"click","disabled"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1),_e(2,"div",2)(3,"div",3),g(),$(4,kK,17,2,"div",4)(5,NK,10,2,"div",5),v(6,"div",6),E(7," v1.0.0 \u2022 Made with Angular & Firebase "),g()()),t&2&&(I(4),P("ngIf",!r.isChoosingName),I(),P("ngIf",r.isChoosingName))},dependencies:[nr,wc,yg,gd],styles:[".grid-bg[_ngcontent-%COMP%]{background-image:linear-gradient(rgba(255,255,255,.05) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.05) 1px,transparent 1px);background-size:50px 50px}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};var OK=()=>["CHAIR","SCREEN","COFFEE","PC"],FK=(n,e,t)=>[n,e,t],LK=()=>["grill","marketing","service"];function VK(n,e){n&1&&_e(0,"app-title-screen")}function UK(n,e){n&1&&(v(0,"div",2)(1,"div",3),E(2,"\u{1F680}"),g(),v(3,"div",4),E(4,"CHARGEMENT DE L'EMPIRE..."),g()())}function jK(n,e){n&1&&_e(0,"app-intro-game")}function BK(n,e){if(n&1&&(v(0,"div",43),E(1),g()),n&2){let t=e.$implicit;P("title",h0(t.name)),I(),K(" ",t.icon," ")}}function $K(n,e){if(n&1&&(v(0,"div",39)(1,"div",40),E(2,"Mes Biens"),g(),v(3,"div",41),$(4,BK,2,3,"div",42),g()()),n&2){let t=F().ngIf,r=F(3);I(4),P("ngForOf",r.getMyPrestigeItems(t))}}function HK(n,e){if(n&1&&(v(0,"div"),$(1,$K,5,1,"div",38),g()),n&2){let t=e.ngIf,r=F(3);I(),P("ngIf",r.getMyPrestigeItems(t).length>0)}}function GK(n,e){if(n&1&&(v(0,"div",54),E(1),g()),n&2){let t=F(2).$implicit;I(),K("\u{1F465} ",t.employees.length)}}function zK(n,e){n&1&&_e(0,"div",55)}function qK(n,e){if(n&1){let t=Ie();v(0,"button",47),z("click",function(){Y(t);let i=F().$implicit,o=F(3);return Q(o.selectCompany(i))}),v(1,"div",48)(2,"div")(3,"div",49)(4,"span",50),E(5),g(),E(6),g(),v(7,"div",51),E(8),g()(),$(9,GK,2,1,"div",52),g(),$(10,zK,1,0,"div",53),g()}if(n&2){let t=F().$implicit,r=F(3);P("ngClass",(r.selectedCompany==null?null:r.selectedCompany.id)===t.id?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-900/20":"bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-300 hover:border-slate-600"),I(5),he(t.type==="FOODTRUCK"?"\u{1F354}":t.type==="FACTORY"?"\u{1F3ED}":t.type==="FREELANCE_DEV"?"\u{1F4BB}":"\u{1F4BC}"),I(),K(" ",t.name," "),I(2),K("Niveau ",t.level),I(),P("ngIf",t.employees.length>0),I(),P("ngIf",(r.selectedCompany==null?null:r.selectedCompany.id)===t.id)}}function WK(n,e){if(n&1){let t=Ie();v(0,"div",56)(1,"div",57)(2,"div",58)(3,"span",59),E(4),g(),E(5),g(),v(6,"span"),E(7,"\u{1F512}"),g()(),v(8,"button",60),ne(9,"async"),z("click",function(){Y(t);let i=F().$implicit,o=F(3);return Q(o.buyCompany(i))}),v(10,"span"),E(11,"ACHETER"),g(),v(12,"span",61),E(13),ne(14,"number"),g()()()}if(n&2){let t,r=F().$implicit,i=F(3);I(4),he(r.type==="FREELANCE_DEV"?"\u{1F4BB}":r.type==="FACTORY"?"\u{1F3ED}":"\u{1F4BC}"),I(),K(" ",r.name," "),I(3),P("disabled",(((t=et(9,4,i.gameState$))==null?null:t.money)||0)<i.getUnlockCost(r.type)),I(5),K("",Te(14,6,i.getUnlockCost(r.type),"1.0-0")," \u20AC")}}function KK(n,e){if(n&1&&(v(0,"div",44),$(1,qK,11,6,"button",45)(2,WK,15,9,"div",46),g()),n&2){let t=e.$implicit;I(),P("ngIf",t.unlocked),I(),P("ngIf",!t.unlocked)}}function YK(n,e){n&1&&(v(0,"div",62)(1,"div",63),E(2,"\u{1F3E2}"),g(),v(3,"p"),E(4,"S\xE9lectionnez une entreprise \xE0 gauche ou ouvrez la boutique"),g()())}function QK(n,e){n&1&&_e(0,"app-foodtruck-game",70)}function JK(n,e){n&1&&_e(0,"app-factory-game",70)}function ZK(n,e){n&1&&_e(0,"app-clothing-store-game",70)}function XK(n,e){n&1&&_e(0,"app-freelance-dev-game",70)}function eY(n,e){n&1&&(v(0,"div",71),E(1,"Jeu en construction... \u{1F6A7}"),g())}function tY(n,e){if(n&1&&(v(0,"div",64)(1,"div",65)(2,"div",66),Rl(3,67),$(4,QK,1,0,"app-foodtruck-game",68)(5,JK,1,0,"app-factory-game",68)(6,ZK,1,0,"app-clothing-store-game",68)(7,XK,1,0,"app-freelance-dev-game",68)(8,eY,2,0,"div",69),Pl(),g()()()),n&2){let t=F(3);I(3),P("ngSwitch",t.selectedCompany.type),I(),P("ngSwitchCase","FOODTRUCK"),I(),P("ngSwitchCase","FACTORY"),I(),P("ngSwitchCase","CLOTHING_STORE"),I(),P("ngSwitchCase","FREELANCE_DEV")}}function nY(n,e){n&1&&(v(0,"div",95),E(1,"POSS\xC9D\xC9"),g())}function rY(n,e){if(n&1){let t=Ie();v(0,"div",89),$(1,nY,2,0,"div",90),v(2,"div",91),E(3),g(),v(4,"div",92),E(5),g(),v(6,"div",93),E(7,"Am\xE9lioration setup niveau 1."),g(),v(8,"button",94),z("click",function(){let i=Y(t).$implicit,o=F(5);return Q(o.buySetup(i))}),E(9),ne(10,"number"),g()()}if(n&2){let t=e.$implicit,r=F().ngIf,i=F(4);I(),P("ngIf",i.getSetupLevel(r,t)>0),I(2),he(t==="CHAIR"?"\u{1FA91}":t==="SCREEN"?"\u{1F5A5}\uFE0F":t==="COFFEE"?"\u2615":"\u{1F680}"),I(2),he(t),I(3),P("disabled",i.getSetupLevel(r,t)>0||r.money<i.getSetupCost(t)),I(),K(" ",i.getSetupLevel(r,t)>0?"ACHET\xC9":Te(10,5,i.getSetupCost(t),"1.0-0")+" \u20AC"," ")}}function iY(n,e){n&1&&(v(0,"div",87),$(1,rY,11,8,"div",88),g()),n&2&&(I(),P("ngForOf",Pf(1,OK)))}function oY(n,e){n&1&&(v(0,"div",104),E(1,"ACTIF"),g())}function sY(n,e){if(n&1){let t=Ie();v(0,"div",98)(1,"div",99)(2,"span",100),E(3,"const"),g(),E(4," dev = "),v(5,"span",100),E(6,"true"),g(),E(7,"; "),g(),v(8,"div",101)(9,"div",92),E(10),g(),$(11,oY,2,0,"div",102),g(),v(12,"button",103),z("click",function(){let i=Y(t).$implicit,o=F(5);return Q(o.buyOrEquipTheme(i))}),E(13),ne(14,"number"),g()()}if(n&2){let t=e.$implicit,r=F().ngIf,i=F(4);I(),P("ngClass",Ea(10,FK,t.bgClass,t.textClass,t.borderClass)),I(),P("ngClass",t.accentClass),I(3),P("ngClass",t.successClass),I(5),he(t.name),I(),P("ngIf",i.isActiveTheme(r,t.id)),I(),P("ngClass",i.isThemeOwned(r,t.id)?"bg-slate-700 hover:bg-slate-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"),I(),K(" ",i.isThemeOwned(r,t.id)?i.isActiveTheme(r,t.id)?"UTILIS\xC9":"\xC9QUIPER":Te(14,7,t.cost,"1.0-0")+" \u20AC"," ")}}function aY(n,e){if(n&1&&(v(0,"div",96),$(1,sY,15,14,"div",97),g()),n&2){let t=F(4);I(),P("ngForOf",t.availableThemes)}}function cY(n,e){if(n&1){let t=Ie();v(0,"div",108)(1,"div",91),E(2),g(),v(3,"div",109),E(4),g(),v(5,"button",110),z("click",function(){let i=Y(t).$implicit,o=F(5);return Q(o.buyFoodtruck(i))}),E(6),ne(7,"number"),g()()}if(n&2){let t=e.$implicit,r=F().ngIf,i=F(4);I(2),he(t==="grill"?"\u{1F373}":t==="marketing"?"\u{1F4E2}":"\u26A1"),I(2),Rf("",t," (Niv. ",i.getFoodtruckLevel(r,t),")"),I(),P("disabled",r.money<i.getFoodtruckCost(r,t)),I(),K(" UP: ",Te(7,5,i.getFoodtruckCost(r,t),"1.0-0")," \u20AC ")}}function lY(n,e){if(n&1){let t=Ie();v(0,"div",87),$(1,cY,8,8,"div",105),v(2,"div",106)(3,"div",91),E(4,"\u2328\uFE0F"),g(),v(5,"div",92),E(6,"Clavier Magique"),g(),v(7,"div",93),E(8,"Joue avec 1-9 et Espace."),g(),v(9,"button",107),z("click",function(){Y(t);let i=F(4);return Q(i.buyKeyboard())}),E(10),g()()()}if(n&2){let t=e.ngIf;I(),P("ngForOf",Pf(3,LK)),I(8),P("disabled",t.foodtruckUpgrades.hasKeyboard||t.money<5e3),I(),K(" ",t.foodtruckUpgrades.hasKeyboard?"ACHET\xC9":"5 000 \u20AC"," ")}}function uY(n,e){if(n&1){let t=Ie();v(0,"div",113)(1,"div",114),E(2),g(),v(3,"div",115)(4,"div",92),E(5),g(),v(6,"div",116),E(7),g()(),v(8,"button",117),z("click",function(){let i=Y(t).$implicit,o=F(5);return Q(o.buyPrestige(i))}),E(9),ne(10,"number"),g()()}if(n&2){let t=e.$implicit,r=F().ngIf,i=F(4);I(2),he(t.icon),I(3),he(t.name),I(2),he(t.desc),I(),P("disabled",i.hasPrestigeItem(r,t.id)||r.money<t.cost),I(),K(" ",i.hasPrestigeItem(r,t.id)?"ACQUIS":Te(10,5,t.cost,"1.0-0")+"\u20AC"," ")}}function dY(n,e){if(n&1&&(v(0,"div",111),$(1,uY,11,8,"div",112),g()),n&2){let t=F(4);I(),P("ngForOf",t.prestigeItems)}}function hY(n,e){if(n&1){let t=Ie();v(0,"div",72),z("click",function(){Y(t);let i=F(3);return Q(i.toggleGlobalShop())}),v(1,"div",73),z("click",function(i){return Y(t),Q(i.stopPropagation())}),v(2,"div",74)(3,"h2",75),E(4,"BOUTIQUE GLOBALE"),g(),v(5,"div",76),E(6),ne(7,"async"),ne(8,"number"),g()(),v(9,"div",77)(10,"section")(11,"h3",78)(12,"span"),E(13,"\u{1F4BB}"),g(),E(14," Freelance Dev"),g(),$(15,iY,2,2,"div",79),ne(16,"async"),g(),v(17,"section")(18,"h3",80)(19,"span"),E(20,"\u{1F3A8}"),g(),E(21," Th\xE8mes IDE"),g(),$(22,aY,2,1,"div",81),ne(23,"async"),g(),v(24,"section")(25,"h3",82)(26,"span"),E(27,"\u{1F354}"),g(),E(28," Foodtruck"),g(),$(29,lY,11,4,"div",79),ne(30,"async"),g(),v(31,"section")(32,"h3",83)(33,"span"),E(34,"\u{1F451}"),g(),E(35," Prestige & Luxe"),g(),$(36,dY,2,1,"div",84),ne(37,"async"),g()(),v(38,"div",85)(39,"button",86),z("click",function(){Y(t);let i=F(3);return Q(i.toggleGlobalShop())}),E(40,"Fermer"),g()()()()}if(n&2){let t,r=F(3);I(6),K("",Te(8,7,(t=et(7,5,r.gameState$))==null?null:t.money,"1.0-0")," \u20AC"),I(9),P("ngIf",et(16,10,r.gameState$)),I(7),P("ngIf",et(23,12,r.gameState$)),I(7),P("ngIf",et(30,14,r.gameState$)),I(7),P("ngIf",et(37,16,r.gameState$))}}function fY(n,e){if(n&1){let t=Ie();v(0,"div",118),z("click",function(){Y(t);let i=F(3);return Q(i.toggleAdmin())}),v(1,"div",119),z("click",function(i){return Y(t),Q(i.stopPropagation())}),v(2,"h2",120)(3,"span"),E(4,"\u{1F575}\uFE0F\u200D\u2642\uFE0F"),g(),E(5," ZONE DE TRICHE "),g(),v(6,"div",121)(7,"div",122),E(8,"Ajouter de l'argent"),g(),v(9,"div",123)(10,"button",124),z("click",function(){Y(t);let i=F(3);return Q(i.adminAddMoney(1e3))}),E(11,"+1k \u20AC"),g(),v(12,"button",124),z("click",function(){Y(t);let i=F(3);return Q(i.adminAddMoney(1e5))}),E(13,"+100k \u20AC"),g()(),v(14,"div",125)(15,"label",126),E(16,"Voyage dans le temps (Heure)"),g(),v(17,"input",127),ne(18,"async"),z("input",function(i){Y(t);let o=F(3);return Q(o.adminSetTime(i))}),g(),v(19,"div",128),E(20),ne(21,"async"),g()(),v(22,"div",125)(23,"button",129),z("click",function(){Y(t);let i=F(3);return Q(i.resetData())}),E(24," \u26A0\uFE0F EFFACER MA SAUVEGARDE "),g()()()()()}if(n&2){let t,r,i=F(3);I(17),P("value",(t=et(18,2,i.gameState$))==null?null:t.timeOfDay),I(3),he(i.formatTime(((r=et(21,4,i.gameState$))==null?null:r.timeOfDay)||0))}}function pY(n,e){if(n&1&&(v(0,"div",158)(1,"div",159)(2,"div",160),E(3),g(),v(4,"div",161),E(5),ne(6,"number"),g()(),v(7,"div",162)(8,"div",163),E(9,"2"),g(),v(10,"div",164),E(11,"\u{1F948}"),g()()()),n&2){let t=F(5);I(3),he(t.leaderboard[1].username),I(2),K("",Te(6,2,t.leaderboard[1].money,"1.0-0")," \u20AC")}}function mY(n,e){if(n&1&&(v(0,"div",165)(1,"div",159)(2,"div",166),E(3),g(),v(4,"div",167),E(5),ne(6,"number"),g()(),v(7,"div",168)(8,"div",169),E(9,"1"),g(),v(10,"div",170),E(11,"\u{1F451}"),g()()()),n&2){let t=F(5);I(3),he(t.leaderboard[0].username),I(2),K("",Te(6,2,t.leaderboard[0].money,"1.0-0")," \u20AC")}}function gY(n,e){if(n&1&&(v(0,"div",158)(1,"div",159)(2,"div",171),E(3),g(),v(4,"div",161),E(5),ne(6,"number"),g()(),v(7,"div",172)(8,"div",173),E(9,"3"),g(),v(10,"div",174),E(11,"\u{1F949}"),g()()()),n&2){let t=F(5);I(3),he(t.leaderboard[2].username),I(2),K("",Te(6,2,t.leaderboard[2].money,"1.0-0")," \u20AC")}}function vY(n,e){if(n&1&&(v(0,"span",183)(1,"span"),E(2,"\u{1F480}"),g(),E(3),g()),n&2){let t=F().$implicit;I(3),K(" ",t.prestige)}}function _Y(n,e){if(n&1&&(v(0,"div",20),E(1),g()),n&2){let t=F().index;I(),he(t===0?"\u{1F3C6}":t===1?"\u{1F948}":"\u{1F949}")}}function yY(n,e){if(n&1){let t=Ie();v(0,"div",175),z("click",function(){let i=Y(t).$implicit,o=F(5);return Q(o.viewPlayerDetails(i))}),v(1,"div",176),E(2),g(),v(3,"div",177)(4,"div",178)(5,"span",179),E(6),g(),$(7,vY,4,1,"span",180),g(),v(8,"div",181),E(9),ne(10,"number"),g()(),$(11,_Y,2,1,"div",182),g()}if(n&2){let t=e.$implicit,r=e.index,i=F(5);P("ngClass",i.getRankClass(r)),I(2),K("#",r+1),I(4),he(t.username),I(),P("ngIf",t.prestige>0),I(2),K("",Te(10,6,t.money,"1.0-0")," \u20AC"),I(2),P("ngIf",r<3)}}function EY(n,e){if(n&1&&(v(0,"div",151)(1,"div",152)(2,"div",153),$(3,pY,12,5,"div",154)(4,mY,12,5,"div",155)(5,gY,12,5,"div",154),g(),v(6,"div",156),$(7,yY,12,9,"div",157),g()()()),n&2){let t=F(4);I(3),P("ngIf",t.leaderboard.length>1),I(),P("ngIf",t.leaderboard.length>0),I(),P("ngIf",t.leaderboard.length>2),I(2),P("ngForOf",t.leaderboard)}}function IY(n,e){n&1&&(v(0,"span",203),E(1,"RARE"),g())}function bY(n,e){n&1&&(v(0,"span",204),E(1,"Commun"),g())}function wY(n,e){if(n&1){let t=Ie();v(0,"div",192)(1,"div",193)(2,"div",194),E(3,"\u{1F468}\u200D\u{1F4BB}"),g(),v(4,"div",195),E(5),g()(),v(6,"div",196),E(7),g(),v(8,"div",197),$(9,IY,2,0,"span",198)(10,bY,2,0,"span",199),g(),v(11,"div",200)(12,"div",201),E(13),ne(14,"number"),g(),v(15,"button",202),z("click",function(){let i=Y(t).$implicit,o=F(5);return Q(o.buyItem(i))}),E(16,"ACHETER"),g()()()}if(n&2){let t=e.$implicit;I(5),K("Vendeur: ",t.sellerName),I(2),he(t.type),I(2),P("ngIf",t.rarity==="RARE"),I(),P("ngIf",!t.rarity),I(3),K("",Te(14,5,t.price,"1.0-0")," \u20AC")}}function CY(n,e){if(n&1){let t=Ie();v(0,"div",184)(1,"div",185)(2,"div")(3,"h3",186)(4,"span",187),E(5,"\u{1F4E6}"),g(),E(6," MARCH\xC9 NOIR"),g(),v(7,"p",188),E(8,"Recrutez des talents ou vendez les v\xF4tres."),g()(),v(9,"button",189),z("click",function(){Y(t);let i=F(4);return Q(i.sellEmployee())}),E(10,"\u2795 Vendre Dev Senior"),g()(),v(11,"div",190),$(12,wY,17,8,"div",191),g()()}if(n&2){let t=F(4);I(12),P("ngForOf",t.marketItems)}}function SY(n,e){if(n&1&&(v(0,"div",210)(1,"div",211),E(2),g(),v(3,"div")(4,"div",92),E(5),g(),v(6,"div",116),E(7),g(),v(8,"div",212),E(9),ne(10,"number"),g()()()),n&2){let t=e.$implicit;I(2),he(t.icon||"\u{1F3E2}"),I(3),he(t.name),I(2),K("Chef: ",t.leaderName),I(2),K("Valuation: ",Te(10,4,t.totalValuation,"1.0-0")," \u20AC")}}function DY(n,e){if(n&1){let t=Ie();v(0,"div",184)(1,"div",205)(2,"h3",186)(3,"span",187),E(4,"\u{1F91D}"),g(),E(5," HOLDINGS"),g(),v(6,"div",28)(7,"input",206),Jo("ngModelChange",function(i){Y(t);let o=F(4);return ya(o.newHoldingName,i)||(o.newHoldingName=i),Q(i)}),g(),v(8,"button",207),z("click",function(){Y(t);let i=F(4);return Q(i.createHolding())}),E(9,"CR\xC9ER"),g()()(),v(10,"div",208),$(11,SY,11,7,"div",209),g()()}if(n&2){let t=F(4);I(7),Qo("ngModel",t.newHoldingName),I(4),P("ngForOf",t.holdings)}}function TY(n,e){if(n&1){let t=Ie();v(0,"div",213),z("click",function(){Y(t);let i=F(4);return Q(i.closePlayerDetails())}),v(1,"div",214),z("click",function(i){return Y(t),Q(i.stopPropagation())}),v(2,"button",215),z("click",function(){Y(t);let i=F(4);return Q(i.closePlayerDetails())}),E(3,"\u2715"),g(),v(4,"div",216)(5,"div",217),E(6),g(),v(7,"h2",218),E(8),g(),v(9,"div",219),E(10),ne(11,"number"),g(),v(12,"div",220),E(13),ne(14,"date"),g()(),v(15,"div",221)(16,"div",222)(17,"div",223),E(18,"Temps de Jeu"),g(),v(19,"div",224),E(20),ne(21,"number"),g()(),v(22,"div",222)(23,"div",223),E(24,"Boss Battus"),g(),v(25,"div",224),E(26),g()()()()()}if(n&2){let t=F(4);I(6),K(" ",t.selectedPlayer.avatarId||"\u{1F464}"," "),I(2),he(t.selectedPlayer.username),I(2),K("",Te(11,6,t.selectedPlayer.money,"1.0-0")," \u20AC"),I(3),K("Membre depuis: ",Te(14,9,t.selectedPlayer.creationDate,"shortDate")||"Inconnu"),I(7),K("",Te(21,12,(t.selectedPlayer.stats==null?null:t.selectedPlayer.stats.totalPlayTimeMinutes)||0,"1.0-0")," min"),I(6),he(t.selectedPlayer.prestige||0)}}function AY(n,e){if(n&1){let t=Ie();v(0,"div",130),z("click",function(){Y(t);let i=F(3);return Q(i.toggleOnlineTab())}),v(1,"div",131),z("click",function(i){return Y(t),Q(i.stopPropagation())}),_e(2,"div",132)(3,"div",133),v(4,"div",134)(5,"div",135),E(6),g()(),v(7,"div",136)(8,"div",137)(9,"div",138),E(10,"\u{1F30D}"),g(),v(11,"div")(12,"h2",139),E(13,"LE MONDE CONNECT\xC9"),g(),v(14,"div",140)(15,"button",141),z("click",function(){Y(t);let i=F(3);return Q(i.activeTab="LEADERBOARD")}),E(16,"Classement"),g(),v(17,"button",141),z("click",function(){Y(t);let i=F(3);return Q(i.activeTab="MARKET")}),E(18,"March\xE9 Noir"),g(),v(19,"button",141),z("click",function(){Y(t);let i=F(3);return Q(i.activeTab="GUILD")}),E(20,"Guildes"),g()()()(),v(21,"div",137)(22,"div",142)(23,"span",143),E(24,"Identit\xE9"),g(),v(25,"input",144),Jo("ngModelChange",function(i){Y(t);let o=F(3);return ya(o.newUsername,i)||(o.newUsername=i),Q(i)}),g(),v(26,"button",145),z("click",function(){Y(t);let i=F(3);return Q(i.updateUsername())}),E(27,"OK"),g()(),v(28,"button",146),z("click",function(){Y(t);let i=F(3);return Q(i.connect())}),E(29,"\u{1F504}"),g(),v(30,"button",147),z("click",function(){Y(t);let i=F(3);return Q(i.toggleOnlineTab())}),E(31,"\u2715"),g()()(),$(32,EY,8,4,"div",148)(33,CY,13,1,"div",149)(34,DY,12,2,"div",149)(35,TY,27,15,"div",150),g()()}if(n&2){let t=F(3);I(6),K(" \u{1F4E2} ",t.tickerMessages[t.tickerIndex]," "),I(9),We("text-blue-400",t.activeTab==="LEADERBOARD")("text-slate-500",t.activeTab!=="LEADERBOARD"),I(2),We("text-blue-400",t.activeTab==="MARKET")("text-slate-500",t.activeTab!=="MARKET"),I(2),We("text-blue-400",t.activeTab==="GUILD")("text-slate-500",t.activeTab!=="GUILD"),I(6),Qo("ngModel",t.newUsername),I(7),P("ngIf",t.activeTab==="LEADERBOARD"),I(),P("ngIf",t.activeTab==="MARKET"),I(),P("ngIf",t.activeTab==="GUILD"),I(),P("ngIf",t.selectedPlayer)}}function xY(n,e){if(n&1){let t=Ie();v(0,"div",225)(1,"div",226)(2,"h2",227),E(3),g(),_e(4,"div",228),v(5,"div",229)(6,"div",230)(7,"span",231),E(8,"Revenus"),g(),v(9,"span",232),E(10),ne(11,"number"),g()(),v(12,"div",230)(13,"span",231),E(14,"Salaires & Frais"),g(),v(15,"span",233),E(16),ne(17,"number"),g()(),v(18,"div",230)(19,"span",231),E(20,"Clients Servis"),g(),v(21,"span",234),E(22),g()(),v(23,"div",235)(24,"span",236),E(25,"Profit Net"),g(),v(26,"span",237),E(27),ne(28,"number"),g()()(),v(29,"button",238),z("click",function(){Y(t);let i=F(3);return Q(i.closeReport())}),E(30," JOUR SUIVANT \u27A1\uFE0F "),g()()()}if(n&2){let t=F(3);I(3),K("FIN DE LA JOURN\xC9E ",t.dailyReport.day),I(7),K("+",Te(11,6,t.dailyReport.revenue,"1.0-0")," \u20AC"),I(6),K("-",Te(17,9,t.dailyReport.expenses,"1.0-0")," \u20AC"),I(6),he(t.dailyReport.customersServed),I(4),P("ngClass",t.dailyReport.revenue-t.dailyReport.expenses>=0?"text-green-400":"text-red-500"),I(),K(" ",Te(28,12,t.dailyReport.revenue-t.dailyReport.expenses,"1.0-0")," \u20AC ")}}function RY(n,e){if(n&1){let t=Ie();v(0,"div",6)(1,"div",7)(2,"div",8)(3,"h1",9)(4,"span",10),E(5,"\u{1F680}"),g(),E(6," JEUB2 "),v(7,"span",11),E(8,"v1.0"),g()(),v(9,"div",12)(10,"div",13)(11,"span",14),E(12,"Argent"),g(),v(13,"span",15),E(14),ne(15,"async"),ne(16,"number"),g()(),v(17,"div",16)(18,"span",14),E(19),ne(20,"async"),g(),v(21,"span",17),E(22),ne(23,"async"),g()()()(),v(24,"div",18)(25,"button",19),z("click",function(){Y(t);let i=F(2);return Q(i.toggleGlobalShop())}),v(26,"span",20),E(27,"\u{1F6D2}"),g(),E(28," BOUTIQUE "),g()(),$(29,HK,2,1,"div",0),ne(30,"async"),v(31,"div",21)(32,"div",22),E(33,"Mes Entreprises"),g(),$(34,KK,3,2,"div",23),ne(35,"async"),g(),v(36,"div",24)(37,"div",25),_e(38,"span",26),E(39),ne(40,"async"),ne(41,"async"),g(),v(42,"button",27),z("click",function(){Y(t);let i=F(2);return Q(i.toggleOnlineTab())}),v(43,"span"),E(44,"\u{1F30D}"),g(),E(45," Online / Classement"),g(),v(46,"div",28)(47,"button",29),z("click",function(){Y(t);let i=F(2);return Q(i.logout())}),v(48,"span"),E(49,"\u{1F6AA}"),g(),E(50," D\xE9co."),g(),v(51,"button",30),z("click",function(){Y(t);let i=F(2);return Q(i.toggleAdmin())}),v(52,"span"),E(53,"\u{1F575}\uFE0F\u200D\u2642\uFE0F"),g(),E(54," Cheat"),g()()()(),v(55,"div",31),$(56,YK,5,0,"div",32)(57,tY,9,5,"div",33),g(),$(58,hY,41,18,"div",34)(59,fY,25,6,"div",35)(60,AY,36,18,"div",36)(61,xY,31,15,"div",37),g()}if(n&2){let t,r,i,o,s,a=F(2);I(14),K("",Te(16,14,(t=et(15,12,a.gameState$))==null?null:t.money,"1.0-0")," \u20AC"),I(5),K("Jour ",(r=et(20,17,a.gameState$))==null?null:r.day),I(3),he(a.formatTime(((i=et(23,19,a.gameState$))==null?null:i.timeOfDay)||6)),I(7),P("ngIf",et(30,21,a.gameState$)),I(5),P("ngForOf",(o=et(35,23,a.gameState$))==null?null:o.companies),I(5),K(" ",((s=et(40,25,a.firebaseService.user$))==null?null:s.email)||((s=et(41,27,a.firebaseService.user$))==null||s.uid==null?null:s.uid.substring(0,8))," "),I(17),P("ngIf",!a.selectedCompany),I(),P("ngIf",a.selectedCompany),I(),P("ngIf",a.isGlobalShopOpen),I(),P("ngIf",a.isAdminOpen),I(),P("ngIf",a.isOnlineTabOpen),I(),P("ngIf",a.dailyReport)}}function PY(n,e){if(n&1&&(Rl(0),$(1,jK,1,0,"app-intro-game",0),ne(2,"async"),$(3,RY,62,29,"div",5),ne(4,"async"),Pl()),n&2){let t,r,i=F();I(),P("ngIf",!((t=et(2,2,i.gameState$))!=null&&t.hasCompletedIntro)),I(2),P("ngIf",(r=et(4,4,i.gameState$))==null?null:r.hasCompletedIntro)}}var kg=class n{constructor(e,t,r){this.gameStateService=e;this.soundService=t;this.firebaseService=r;this.gameState$=this.gameStateService.gameState$}gameState$;selectedCompany=null;dailyReport=null;isGlobalShopOpen=!1;isAdminOpen=!1;isOnlineTabOpen=!1;activeTab="LEADERBOARD";selectedPlayer=null;tickerMessages=["Bienvenue sur le march\xE9 mondial !","Le Bitcoin est en chute libre...","Qui sera le prochain CEO de l'ann\xE9e ?"];tickerIndex=0;newUsername="";newHoldingName="";JobType=fg;SetupItem=pg;availableThemes=ld;leaderboard=[];marketItems=[];holdings=[];prestigeItems=[{id:"WATCH",name:"Rolex en Or",icon:"\u231A",cost:5e3,desc:"Le temps c'est de l'argent."},{id:"CAR",name:"Tesla Model S",icon:"\u{1F697}",cost:45e3,desc:"Z\xE9ro \xE9mission, 100% style."},{id:"APARTMENT",name:"Penthouse",icon:"\u{1F3E2}",cost:25e4,desc:"Vue sur tout ton empire."},{id:"ISLAND",name:"\xCEle Priv\xE9e",icon:"\u{1F3DD}\uFE0F",cost:5e6,desc:"La retraite anticip\xE9e."}];ngOnInit(){this.gameState$.pipe(De(e=>e.companies.find(t=>t.unlocked)),Xt(e=>!!e),mt(1)).subscribe(e=>{!this.selectedCompany&&e&&(this.selectedCompany=e)}),this.gameState$.pipe(mt(1)).subscribe(e=>{e.user&&(this.newUsername=e.user.username)}),this.gameStateService.dayEnded$.subscribe(e=>{this.dailyReport=e,this.soundService.playSuccess()}),xi(5e3).subscribe(()=>{this.tickerIndex=(this.tickerIndex+1)%this.tickerMessages.length})}getRankClass(e){return e===0?"bg-yellow-500/20 border-yellow-500/50 text-yellow-100 shadow-[0_0_15px_rgba(234,179,8,0.3)]":e===1?"bg-slate-300/10 border-slate-300/50 text-slate-200":e===2?"bg-amber-700/10 border-amber-700/50 text-amber-200":"bg-slate-800/50 border-slate-700 text-slate-400 hover:bg-slate-700 transition-colors"}viewPlayerDetails(e){this.selectedPlayer=e,this.soundService.playSoftPop()}closePlayerDetails(){this.selectedPlayer=null}createHolding(){this.newHoldingName&&this.firebaseService.createHolding(this.newHoldingName,this.newUsername).then(()=>{this.refreshOnlineData(),this.newHoldingName=""})}logout(){confirm("Se d\xE9connecter ?")&&this.gameStateService.logoutAndClear()}updateUsername(){this.newUsername?.trim()&&(this.gameStateService.updateUsername(this.newUsername.trim()),this.soundService.playSuccess(),setTimeout(()=>this.refreshOnlineData(),1e3))}toggleGlobalShop(){this.isGlobalShopOpen=!this.isGlobalShopOpen,this.isGlobalShopOpen&&this.soundService.playSoftPop()}isThemeOwned(e,t){return e.freelanceUpgrades.ownedThemes.includes(t)}isActiveTheme(e,t){return e.freelanceUpgrades.activeThemeId===t}buyOrEquipTheme(e){this.gameState$.pipe(mt(1)).subscribe(t=>{this.isThemeOwned(t,e.id)?(this.gameStateService.setFreelanceTheme(e.id),this.soundService.playSoftPop()):t.money>=e.cost?(this.gameStateService.buyFreelanceTheme(e.id,e.cost),this.soundService.playSuccess()):this.soundService.playError()})}toggleAdmin(){this.isAdminOpen=!this.isAdminOpen}adminAddMoney(e){this.gameStateService.addMoney(e),this.soundService.playCash()}adminSetTime(e){let t=parseFloat(e.target.value);!isNaN(t)&&t>=0&&t<=24&&this.gameStateService.setTimeOfDay(t)}toggleOnlineTab(){this.isOnlineTabOpen=!this.isOnlineTabOpen,this.isOnlineTabOpen&&this.refreshOnlineData()}async connect(){await this.gameStateService.connectOnline(),this.refreshOnlineData()}refreshOnlineData(){this.firebaseService.getLeaderboard().subscribe(e=>{this.leaderboard=e,this.leaderboard.length>0&&this.tickerMessages.push(`\u{1F451} ${this.leaderboard[0].username} domine le classement !`)}),this.firebaseService.getMarketItems().subscribe(e=>this.marketItems=e),this.firebaseService.getHoldings().subscribe(e=>this.holdings=e)}sellEmployee(){this.gameState$.pipe(mt(1)).subscribe(e=>{let t={sellerId:this.firebaseService.currentUserId||"anon",sellerName:e.user?.username||"Anonyme",type:"Dev Senior",price:5e3,timestamp:Date.now(),rarity:"RARE"};this.firebaseService.sellItem(t),this.soundService.playCash(),setTimeout(()=>this.refreshOnlineData(),1e3)})}buyItem(e){this.gameState$.pipe(mt(1)).subscribe(async t=>{if(t.money>=e.price){let r=await this.firebaseService.buyItem(e);r==="SUCCESS"?(this.gameStateService.addMoney(-e.price),e.type==="Dev Senior"&&this.gameStateService.hireEmployee("2","DEV_SENIOR"),this.soundService.playSuccess(),this.refreshOnlineData()):r==="SNIPER_PROTECTION"?(alert("\u{1F6D1} Protection Sniper ! Attendez quelques secondes apr\xE8s la mise en vente."),this.soundService.playError()):(alert("Trop tard ! Objet d\xE9j\xE0 vendu."),this.soundService.playError(),this.refreshOnlineData())}else this.soundService.playError()})}buySetup(e){let t=this.getSetupCost(e);this.gameState$.pipe(mt(1)).subscribe(r=>{r.money>=t?(this.gameStateService.buySetupUpgrade(e,t),this.soundService.playSuccess()):this.soundService.playError()})}getSetupCost(e){return{CHAIR:2e3,SCREEN:5e3,COFFEE:1500,PC:2e4}[e]||0}getSetupLevel(e,t){if(!e.freelanceUpgrades)return 0;switch(t){case"CHAIR":return e.freelanceUpgrades.chairLevel;case"SCREEN":return e.freelanceUpgrades.screenLevel;case"COFFEE":return e.freelanceUpgrades.coffeeLevel;case"PC":return e.freelanceUpgrades.pcLevel;default:return 0}}getFoodtruckLevel(e,t){return e.foodtruckUpgrades&&e.foodtruckUpgrades[t+"Level"]||1}getFoodtruckCost(e,t){let r=this.getFoodtruckLevel(e,t);return Math.floor(150*Math.pow(1.6,r))}buyFoodtruck(e){this.gameState$.pipe(mt(1)).subscribe(t=>{let r=this.getFoodtruckCost(t,e);t.money>=r?(this.gameStateService.buyFoodtruckUpgrade(e,r),this.soundService.playSuccess()):this.soundService.playError()})}buyKeyboard(){this.gameState$.pipe(mt(1)).subscribe(e=>{e.money>=5e3&&!e.foodtruckUpgrades.hasKeyboard?(this.gameStateService.unlockKeyboard(5e3),this.soundService.playSuccess()):this.soundService.playError()})}hasPrestigeItem(e,t){return e.achievements.some(r=>r.id==="PRESTIGE_"+t)}buyPrestige(e){this.gameStateService.buyPrestigeItem(e)?this.soundService.playSuccess():this.soundService.playError()}getMyPrestigeItems(e){return e.achievements.filter(t=>t.id.startsWith("PRESTIGE_"))}getUnlockCost(e){switch(e){case"FREELANCE_DEV":return 10;case"FACTORY":return 50;case"CLOTHING_STORE":return 25;default:return 0}}buyCompany(e){let t=this.getUnlockCost(e.type);t>0&&(this.gameStateService.unlockCompany(e.id,t),this.soundService.playSuccess())}closeReport(){this.dailyReport=null}selectCompany(e){e.unlocked&&(this.gameState$.subscribe(t=>{let r=t.companies.find(i=>i.id===e.id);r&&this.selectedCompany?.id===r.id&&(this.selectedCompany=r)}),this.selectedCompany=e,this.soundService.playSoftPop())}formatTime(e){let t=Math.floor(e),r=Math.floor((e-t)*60);return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}resetData(){this.gameStateService.hardResetGame()}static \u0275fac=function(t){return new(t||n)(X(_n),X(Gn),X(Io))};static \u0275cmp=at({type:n,selectors:[["app-game-shell"]],standalone:!1,decls:8,vars:13,consts:[[4,"ngIf"],["class","fixed inset-0 bg-slate-950 flex flex-col items-center justify-center z-[9999]",4,"ngIf"],[1,"fixed","inset-0","bg-slate-950","flex","flex-col","items-center","justify-center","z-[9999]"],[1,"text-4xl","animate-bounce","mb-4"],[1,"text-white","font-bold","text-xl","tracking-widest","animate-pulse"],["class","flex h-screen bg-slate-950 text-slate-200 font-sans overflow-hidden selection:bg-blue-500 selection:text-white",4,"ngIf"],[1,"flex","h-screen","bg-slate-950","text-slate-200","font-sans","overflow-hidden","selection:bg-blue-500","selection:text-white"],[1,"w-64","bg-slate-900","border-r","border-slate-800","flex","flex-col","shrink-0","z-20","shadow-xl"],[1,"p-4","border-b","border-slate-800","flex","flex-col","gap-1","bg-slate-950/50"],[1,"font-black","text-xl","tracking-tighter","text-white","flex","items-center","gap-2"],[1,"text-2xl"],[1,"text-xs","font-normal","text-slate-500","border","border-slate-700","rounded","px-1"],[1,"flex","justify-between","items-end","mt-2"],[1,"flex","flex-col"],[1,"text-[10px]","uppercase","font-bold","text-slate-500","tracking-widest"],[1,"text-green-400","font-mono","font-bold","text-lg"],[1,"flex","flex-col","items-end"],[1,"text-blue-400","font-mono","font-bold","text-sm"],[1,"p-3","pb-0"],[1,"w-full","py-3","bg-gradient-to-r","from-purple-600","to-indigo-600","hover:from-purple-500","hover:to-indigo-500","text-white","font-black","uppercase","tracking-widest","rounded-xl","shadow-lg","border","border-white/10","flex","items-center","justify-center","gap-2","transition-all","hover:scale-[1.02]","active:scale-95",3,"click"],[1,"text-xl"],[1,"flex-1","overflow-y-auto","p-3","space-y-2","custom-scroll"],[1,"text-[10px]","font-bold","text-slate-600","uppercase","tracking-widest","px-2","mb-1","mt-2"],["class","mb-2",4,"ngFor","ngForOf"],[1,"p-4","border-t","border-slate-800","bg-slate-950/30","flex","flex-col","gap-2"],[1,"text-[10px]","text-slate-500","text-center","flex","items-center","justify-center","gap-2"],[1,"w-2","h-2","bg-green-500","rounded-full","animate-pulse"],[1,"w-full","py-2","px-3","rounded-lg","border","border-blue-500","text-blue-400","hover:bg-blue-900/30","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex","gap-2"],[1,"flex-1","py-2","px-3","rounded-lg","border","border-red-900/50","text-red-500","hover:bg-red-950/30","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","py-2","px-3","rounded-lg","border","border-slate-700","text-slate-400","hover:bg-slate-800","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","flex","flex-col","min-w-0","bg-slate-950","relative"],["class","flex-1 flex flex-col items-center justify-center text-slate-500",4,"ngIf"],["class","flex-1 flex flex-col h-full relative",4,"ngIf"],["class","absolute inset-0 bg-slate-950/90 z-[100] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-red-950/90 z-[200] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-slate-950/95 z-[150] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-slate-900/95 z-[100] flex items-center justify-center backdrop-blur-md animate-fade-in",4,"ngIf"],["class","px-3 pt-4 pb-0",4,"ngIf"],[1,"px-3","pt-4","pb-0"],[1,"text-[10px]","font-bold","text-amber-500","uppercase","tracking-widest","px-2","mb-2"],[1,"flex","flex-wrap","gap-2","px-2"],["class","w-10 h-10 bg-slate-800 rounded-lg border border-amber-900/30 flex items-center justify-center text-xl shadow-lg",3,"title",4,"ngFor","ngForOf"],[1,"w-10","h-10","bg-slate-800","rounded-lg","border","border-amber-900/30","flex","items-center","justify-center","text-xl","shadow-lg",3,"title"],[1,"mb-2"],["class","w-full text-left p-3 rounded-xl transition-all duration-200 border relative group overflow-hidden",3,"ngClass","click",4,"ngIf"],["class","w-full p-3 rounded-xl border border-slate-800 bg-slate-900/50 relative overflow-hidden flex flex-col gap-2 opacity-80 hover:opacity-100 transition-opacity",4,"ngIf"],[1,"w-full","text-left","p-3","rounded-xl","transition-all","duration-200","border","relative","group","overflow-hidden",3,"click","ngClass"],[1,"relative","z-10","flex","justify-between","items-start"],[1,"font-bold","text-sm","flex","items-center","gap-2"],[1,"text-lg"],[1,"text-xs","opacity-70","mt-1"],["class","bg-black/20 px-2 py-1 rounded text-[10px] font-bold",4,"ngIf"],["class","absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none",4,"ngIf"],[1,"bg-black/20","px-2","py-1","rounded","text-[10px]","font-bold"],[1,"absolute","inset-0","bg-gradient-to-br","from-white/10","to-transparent","pointer-events-none"],[1,"w-full","p-3","rounded-xl","border","border-slate-800","bg-slate-900/50","relative","overflow-hidden","flex","flex-col","gap-2","opacity-80","hover:opacity-100","transition-opacity"],[1,"flex","justify-between","items-center","opacity-60"],[1,"font-bold","text-sm","flex","items-center","gap-2","text-slate-400"],[1,"text-lg","grayscale"],[1,"w-full","py-2","bg-green-600","hover:bg-green-500","disabled:bg-slate-800","disabled:text-slate-600","text-white","font-bold","rounded-lg","transition-all","text-xs","flex","justify-center","items-center","gap-2","shadow-lg",3,"click","disabled"],[1,"bg-black/20","px-1.5","rounded","text-green-100"],[1,"flex-1","flex","flex-col","items-center","justify-center","text-slate-500"],[1,"text-6xl","mb-4","opacity-20"],[1,"flex-1","flex","flex-col","h-full","relative"],[1,"flex-1","p-6","overflow-hidden","flex"],[1,"flex-1","h-full","min-w-0","shadow-2xl","rounded-2xl","overflow-hidden","border","border-slate-700","relative","bg-slate-900"],[3,"ngSwitch"],["class","h-full w-full block",4,"ngSwitchCase"],["class","p-10 text-center text-slate-500",4,"ngSwitchDefault"],[1,"h-full","w-full","block"],[1,"p-10","text-center","text-slate-500"],[1,"absolute","inset-0","bg-slate-950/90","z-[100]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-5xl","h-[90%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden",3,"click"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-950"],[1,"text-2xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-purple-400","to-indigo-400"],[1,"font-mono","text-green-400","font-bold","text-xl"],[1,"flex-1","overflow-y-auto","custom-scroll","p-8","space-y-12"],[1,"text-lg","font-bold","text-blue-400","mb-4","border-b","border-blue-900/30","pb-2","uppercase","tracking-widest","flex","items-center","gap-2"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",4,"ngIf"],[1,"text-lg","font-bold","text-purple-400","mb-4","border-b","border-purple-900/30","pb-2","uppercase","tracking-widest","flex","items-center","gap-2"],["class","grid grid-cols-1 md:grid-cols-3 gap-4",4,"ngIf"],[1,"text-lg","font-bold","text-orange-400","mb-4","border-b","border-orange-900/30","pb-2","uppercase","tracking-widest","flex","items-center","gap-2"],[1,"text-lg","font-bold","text-amber-400","mb-4","border-b","border-amber-900/30","pb-2","uppercase","tracking-widest","flex","items-center","gap-2"],["class","grid grid-cols-1 md:grid-cols-2 gap-4",4,"ngIf"],[1,"p-4","border-t","border-slate-800","bg-slate-950","flex","justify-end"],[1,"px-6","py-2","bg-slate-700","hover:bg-slate-600","text-white","font-bold","rounded-lg",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],["class","bg-slate-800 p-4 rounded-xl border border-slate-700 flex flex-col gap-2 relative overflow-hidden group hover:border-blue-500 transition-all",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","flex-col","gap-2","relative","overflow-hidden","group","hover:border-blue-500","transition-all"],["class","absolute top-2 right-2 text-xs font-bold px-2 py-0.5 rounded bg-slate-950 text-slate-400",4,"ngIf"],[1,"text-3xl","mb-2"],[1,"font-bold","text-white"],[1,"text-xs","text-slate-400","flex-1"],[1,"mt-2","w-full","py-2","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-700","disabled:opacity-50","disabled:cursor-not-allowed","text-white","font-bold","rounded-lg","text-xs",3,"click","disabled"],[1,"absolute","top-2","right-2","text-xs","font-bold","px-2","py-0.5","rounded","bg-slate-950","text-slate-400"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["class","bg-slate-800 p-4 rounded-xl border border-slate-700 flex flex-col gap-2 relative overflow-hidden group hover:border-purple-500 transition-all",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","flex-col","gap-2","relative","overflow-hidden","group","hover:border-purple-500","transition-all"],[1,"h-20","w-full","rounded","mb-2","flex","items-center","justify-center","font-mono","text-xs","border",3,"ngClass"],[3,"ngClass"],[1,"flex","justify-between","items-center"],["class","text-[10px] bg-green-500/20 text-green-400 px-2 py-0.5 rounded border border-green-500/30",4,"ngIf"],[1,"mt-2","w-full","py-2","font-bold","rounded-lg","text-xs","transition-all",3,"click","ngClass"],[1,"text-[10px]","bg-green-500/20","text-green-400","px-2","py-0.5","rounded","border","border-green-500/30"],["class","bg-slate-800 p-4 rounded-xl border border-slate-700 flex flex-col gap-2 hover:border-orange-500 transition-all",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","flex-col","gap-2","hover:border-pink-500","transition-all"],[1,"mt-2","w-full","py-2","bg-pink-600","hover:bg-pink-500","disabled:bg-slate-700","disabled:opacity-50","text-white","font-bold","rounded-lg","text-xs",3,"click","disabled"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","flex-col","gap-2","hover:border-orange-500","transition-all"],[1,"font-bold","text-white","capitalize"],[1,"mt-auto","w-full","py-2","bg-orange-600","hover:bg-orange-500","disabled:bg-slate-700","disabled:opacity-50","text-white","font-bold","rounded-lg","text-xs",3,"click","disabled"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","bg-slate-800 p-4 rounded-xl border border-slate-700 flex items-center gap-4 relative overflow-hidden group hover:border-amber-500 transition-all",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","items-center","gap-4","relative","overflow-hidden","group","hover:border-amber-500","transition-all"],[1,"text-4xl","group-hover:scale-110","transition-transform"],[1,"flex-1"],[1,"text-xs","text-slate-400"],[1,"px-4","py-2","bg-amber-600","hover:bg-amber-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-bold","rounded-lg","text-xs","min-w-[80px]",3,"click","disabled"],[1,"absolute","inset-0","bg-red-950/90","z-[200]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-red-500","p-8","rounded-xl","w-96","shadow-2xl",3,"click"],[1,"text-2xl","font-black","text-red-500","mb-6","flex","items-center","gap-2"],[1,"space-y-4"],[1,"text-xs","uppercase","font-bold","text-slate-500","mb-2"],[1,"grid","grid-cols-2","gap-2"],[1,"w-full","py-3","bg-red-900/20","border","border-red-500/50","hover:bg-red-800","hover:text-white","text-red-300","font-bold","rounded","transition-all",3,"click"],[1,"pt-4","border-t","border-slate-800"],[1,"text-xs","uppercase","font-bold","text-slate-500","block","mb-2"],["type","range","min","0","max","24","step","0.5",1,"w-full","accent-red-500","h-2","bg-slate-800","rounded-lg","appearance-none","cursor-pointer",3,"input","value"],[1,"text-right","text-red-400","font-mono","font-bold","mt-1"],[1,"w-full","py-4","bg-black","border-2","border-red-600","text-red-500","hover:bg-red-600","hover:text-white","font-black","rounded-lg","mt-2","transition-all","uppercase","tracking-widest","shadow-[0_0_20px_rgba(220,38,38,0.2)]",3,"click"],[1,"absolute","inset-0","bg-slate-950/95","z-[150]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-blue-500/30","w-full","max-w-6xl","h-[90%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden","relative",3,"click"],[1,"absolute","top-0","right-0","w-96","h-96","bg-blue-500/10","rounded-full","blur-3xl","-translate-y-1/2","translate-x-1/3","pointer-events-none"],[1,"absolute","bottom-0","left-0","w-64","h-64","bg-purple-500/10","rounded-full","blur-3xl","translate-y-1/3","-translate-x-1/4","pointer-events-none"],[1,"bg-blue-600/10","border-b","border-blue-500/20","py-1","px-4","overflow-hidden","whitespace-nowrap"],[1,"text-[10px]","font-mono","text-blue-300","animate-marquee","inline-block"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-950/80","backdrop-blur-md","z-10"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-xl","bg-gradient-to-br","from-blue-600","to-indigo-600","flex","items-center","justify-center","text-2xl","shadow-lg","shadow-blue-500/20"],[1,"text-2xl","font-black","text-white","tracking-tight"],[1,"flex","gap-4","mt-1"],[1,"text-xs","font-bold","uppercase","tracking-wider","px-2","py-1","rounded","hover:bg-white/10","transition-colors",3,"click"],[1,"flex","items-center","gap-2","bg-slate-800/50","px-4","py-2","rounded-xl","border","border-slate-700/50","hover:border-slate-600","transition-colors"],[1,"text-xs","text-slate-500","uppercase","font-bold","tracking-wider"],["type","text","placeholder","Votre pseudo...",1,"bg-transparent","border-none","focus:ring-0","text-white","font-bold","w-32","text-sm","placeholder:text-slate-600","p-0",3,"ngModelChange","ngModel"],[1,"text-xs","bg-blue-600","px-3","py-1","rounded-lg","text-white","font-bold","hover:bg-blue-500","transition-colors","shadow-lg","shadow-blue-500/20",3,"click"],["title","Actualiser",1,"w-10","h-10","rounded-xl","bg-slate-800","hover:bg-slate-700","text-white","flex","items-center","justify-center","transition-all","active:scale-95","border","border-slate-700",3,"click"],[1,"w-10","h-10","rounded-xl","bg-slate-800","hover:bg-red-500/20","hover:text-red-500","text-slate-400","flex","items-center","justify-center","transition-all","border","border-slate-700",3,"click"],["class","flex-1 flex overflow-hidden z-10",4,"ngIf"],["class","flex-1 flex flex-col p-8 bg-slate-900 overflow-y-auto custom-scroll",4,"ngIf"],["class","absolute inset-0 bg-black/80 z-20 flex items-center justify-center p-12 backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],[1,"flex-1","flex","overflow-hidden","z-10"],[1,"w-full","flex","flex-col","bg-slate-950/30"],[1,"p-6","pb-2","flex","items-end","justify-center","gap-4","border-b","border-slate-800/50","min-h-[180px]"],["class","flex flex-col items-center gap-2 w-1/4",4,"ngIf"],["class","flex flex-col items-center gap-2 w-1/4 -mt-8",4,"ngIf"],[1,"flex-1","overflow-y-auto","custom-scroll","p-4","space-y-2"],["class","p-3 rounded-xl border flex items-center gap-4 transition-all hover:translate-x-1 cursor-pointer hover:bg-white/5",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","gap-2","w-1/4"],[1,"text-center"],[1,"text-sm","font-bold","text-slate-300","truncate","max-w-[100px]"],[1,"text-[10px]","text-slate-500"],[1,"w-full","h-24","bg-gradient-to-t","from-slate-700","to-slate-600","rounded-t-lg","flex","items-end","justify-center","pb-2","relative","group"],[1,"text-2xl","font-black","text-slate-400"],[1,"absolute","-top-3","w-8","h-8","rounded-full","bg-slate-300","border-2","border-slate-500","flex","items-center","justify-center","text-xs","font-bold","shadow-lg"],[1,"flex","flex-col","items-center","gap-2","w-1/4","-mt-8"],[1,"text-sm","font-bold","text-yellow-400","truncate","max-w-[120px]"],[1,"text-[10px]","text-yellow-600/80","font-mono"],[1,"w-full","h-32","bg-gradient-to-t","from-yellow-600","to-yellow-400","rounded-t-lg","flex","items-end","justify-center","pb-4","relative","shadow-[0_0_30px_rgba(234,179,8,0.3)]"],[1,"text-4xl","font-black","text-yellow-900"],[1,"absolute","-top-4","w-10","h-10","rounded-full","bg-yellow-300","border-2","border-yellow-500","flex","items-center","justify-center","text-lg","shadow-lg","animate-bounce"],[1,"text-sm","font-bold","text-amber-700","truncate","max-w-[100px]"],[1,"w-full","h-16","bg-gradient-to-t","from-amber-800","to-amber-700","rounded-t-lg","flex","items-end","justify-center","pb-2","relative"],[1,"text-xl","font-black","text-amber-900"],[1,"absolute","-top-3","w-8","h-8","rounded-full","bg-amber-600","border-2","border-amber-800","flex","items-center","justify-center","text-xs","font-bold","shadow-lg"],[1,"p-3","rounded-xl","border","flex","items-center","gap-4","transition-all","hover:translate-x-1","cursor-pointer","hover:bg-white/5",3,"click","ngClass"],[1,"font-black","text-lg","w-8","text-center","opacity-50"],[1,"flex-1","min-w-0"],[1,"flex","items-center","gap-2"],[1,"font-bold","text-sm","truncate"],["class","text-[10px] bg-purple-500/20 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/30 flex items-center gap-1",4,"ngIf"],[1,"text-xs","opacity-60","font-mono"],["class","text-xl",4,"ngIf"],[1,"text-[10px]","bg-purple-500/20","text-purple-400","px-1.5","py-0.5","rounded","border","border-purple-500/30","flex","items-center","gap-1"],[1,"flex-1","flex","flex-col","p-8","bg-slate-900","overflow-y-auto","custom-scroll"],[1,"flex","justify-between","items-end","mb-8"],[1,"text-2xl","font-black","text-white","flex","items-center","gap-3"],[1,"text-3xl"],[1,"text-slate-500","text-sm","mt-1"],[1,"px-5","py-3","bg-gradient-to-r","from-red-600","to-rose-600","hover:from-red-500","hover:to-rose-500","text-white","font-bold","rounded-xl","shadow-lg","shadow-red-900/20","active:scale-95","transition-all",3,"click"],[1,"grid","grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-slate-800 p-5 rounded-2xl border border-slate-700 relative group hover:border-blue-500 transition-all hover:shadow-2xl hover:shadow-blue-500/10 hover:-translate-y-1",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-5","rounded-2xl","border","border-slate-700","relative","group","hover:border-blue-500","transition-all","hover:shadow-2xl","hover:shadow-blue-500/10","hover:-translate-y-1"],[1,"flex","justify-between","items-start","mb-4"],[1,"w-12","h-12","rounded-full","bg-slate-700","flex","items-center","justify-center","text-2xl","border","border-slate-600","group-hover:border-blue-400","transition-colors"],[1,"text-[10px]","font-bold","bg-slate-950","px-2","py-1","rounded","text-slate-400","border","border-slate-700","uppercase","tracking-wide"],[1,"font-black","text-white","text-lg","mb-1"],[1,"text-xs","text-slate-400","mb-4"],["class","text-blue-400 font-bold",4,"ngIf"],["class","text-slate-500",4,"ngIf"],[1,"flex","items-center","justify-between","mt-auto","pt-4","border-t","border-slate-700"],[1,"text-green-400","font-mono","font-black","text-lg"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-500","text-white","font-bold","rounded-lg","text-xs","shadow-lg","shadow-blue-900/20","active:scale-95","transition-all",3,"click"],[1,"text-blue-400","font-bold"],[1,"text-slate-500"],[1,"flex","justify-between","items-center","mb-8"],["type","text","placeholder","Nom de la guilde...",1,"bg-slate-800","border","border-slate-700","px-3","py-2","rounded-lg","text-white","text-sm",3,"ngModelChange","ngModel"],[1,"px-4","py-2","bg-purple-600","hover:bg-purple-500","text-white","font-bold","rounded-lg","text-xs",3,"click"],[1,"grid","grid-cols-2","gap-4"],["class","bg-slate-800 p-4 rounded-xl border border-slate-700 flex items-center gap-4",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","items-center","gap-4"],[1,"text-4xl"],[1,"text-xs","text-purple-400","mt-1","font-mono"],[1,"absolute","inset-0","bg-black/80","z-20","flex","items-center","justify-center","p-12","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","p-8","rounded-2xl","w-full","max-w-lg","relative","shadow-2xl",3,"click"],[1,"absolute","top-4","right-4","text-slate-500","hover:text-white",3,"click"],[1,"text-center","mb-8"],[1,"w-24","h-24","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-full","mx-auto","mb-4","flex","items-center","justify-center","text-4xl","shadow-xl"],[1,"text-3xl","font-black","text-white"],[1,"text-blue-400","font-mono","text-xl"],[1,"text-slate-500","text-xs","mt-1"],[1,"grid","grid-cols-2","gap-4","text-center"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700"],[1,"text-xs","text-slate-500","uppercase","font-bold"],[1,"text-xl","font-bold","text-white"],[1,"absolute","inset-0","bg-slate-900/95","z-[100]","flex","items-center","justify-center","backdrop-blur-md","animate-fade-in"],[1,"bg-slate-800","p-8","rounded-2xl","border","border-slate-600","shadow-2xl","max-w-md","w-full","text-center"],[1,"text-3xl","font-black","text-white","mb-2"],[1,"h-1","w-20","bg-blue-500","mx-auto","mb-6","rounded-full"],[1,"space-y-4","mb-8"],[1,"flex","justify-between","items-center","p-3","bg-slate-900/50","rounded-lg","border","border-slate-700"],[1,"text-slate-400"],[1,"text-green-400","font-bold","font-mono","text-xl"],[1,"text-red-400","font-bold","font-mono","text-xl"],[1,"text-blue-400","font-bold","font-mono","text-xl"],[1,"pt-4","border-t","border-slate-700","flex","justify-between","items-center"],[1,"font-bold","text-white","uppercase","tracking-widest"],[1,"font-black","text-2xl","font-mono",3,"ngClass"],[1,"w-full","py-4","bg-blue-600","hover:bg-blue-500","text-white","font-black","rounded-xl","text-lg","shadow-lg","hover:shadow-blue-500/20","transition-all",3,"click"]],template:function(t,r){t&1&&($(0,VK,1,0,"app-title-screen",0),ne(1,"async"),$(2,UK,5,0,"div",1),ne(3,"async"),ne(4,"async"),$(5,PY,5,6,"ng-container",0),ne(6,"async"),ne(7,"async")),t&2&&(P("ngIf",!et(1,3,r.firebaseService.user$)),I(2),P("ngIf",et(3,5,r.gameStateService.isLoading$)&&et(4,7,r.firebaseService.user$)),I(3),P("ngIf",et(6,9,r.firebaseService.user$)&&!et(7,11,r.gameStateService.isLoading$)))},dependencies:[Xo,wr,nr,Bl,L0,V0,wc,yg,gd,Dg,Tg,Ag,xg,Rg,Pg,j0,Jr,B0],encapsulation:2})};var Ng=class n{title="JEUB2";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(t,r){t&1&&_e(0,"app-game-shell")},dependencies:[kg],encapsulation:2})};var Mg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ct({type:n});static \u0275inj=nt({imports:[$l,mL,FF]})};YR(a1);var Og=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ct({type:n,bootstrap:[Ng]});static \u0275inj=nt({providers:[{provide:Wi,useValue:"fr-FR"},U1(()=>j1(mO.firebase)),wk(()=>Sk()),uO(()=>hO())],imports:[X0,hg,Mg]})};Z0().bootstrapModule(Og).catch(n=>console.error(n));
