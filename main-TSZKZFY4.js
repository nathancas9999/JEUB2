var eU=Object.defineProperty,tU=Object.defineProperties;var nU=Object.getOwnPropertyDescriptors;var ph=Object.getOwnPropertySymbols;var FD=Object.prototype.hasOwnProperty,LD=Object.prototype.propertyIsEnumerable;var OD=(n,e,t)=>e in n?eU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})FD.call(e,t)&&OD(n,t,e[t]);if(ph)for(var t of ph(e))LD.call(e,t)&&OD(n,t,e[t]);return n},ee=(n,e)=>tU(n,nU(e));var _l=(n,e)=>{var t={};for(var r in n)FD.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&ph)for(var r of ph(n))e.indexOf(r)<0&&LD.call(n,r)&&(t[r]=n[r]);return t};var Yt=null,mh=!1,a_=1,rU=null,sn=Symbol("SIGNAL");function we(n){let e=Yt;return Yt=n,e}function yh(){return Yt}var vl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function El(n){if(mh)throw new Error("");if(Yt===null)return;Yt.consumerOnSignalRead(n);let e=Yt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Yt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Yt.producers,t!==void 0&&t.producer===n)){Yt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Yt&&(!r||sU(i,Yt)))return;let s=la(Yt),o={producer:n,consumer:Yt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Yt.producersTail=o,e!==void 0?e.nextProducer=o:Yt.producers=o,s&&jD(n,o)}function VD(){a_++}function c_(n){if(!(la(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===a_)){if(!n.producerMustRecompute(n)&&!vh(n)){o_(n);return}n.producerRecomputeValue(n),o_(n)}}function l_(n){if(n.consumers===void 0)return;let e=mh;mh=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||iU(r)}}finally{mh=e}}function u_(){return Yt?.consumerAllowSignalWrites!==!1}function iU(n){n.dirty=!0,l_(n),n.consumerMarkedDirty?.(n)}function o_(n){n.dirty=!1,n.lastCleanEpoch=a_}function bl(n){return n&&UD(n),we(n)}function UD(n){n.producersTail=void 0,n.recomputing=!0}function _h(n,e){we(e),n&&BD(n)}function BD(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(la(n))do t=d_(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function vh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(c_(t),r!==t.version))return!0}return!1}function Il(n){if(la(n)){let e=n.producers;for(;e!==void 0;)e=d_(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function jD(n,e){let t=n.consumersTail,r=la(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)jD(i.producer,i)}function d_(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!la(e)){let s=e.producers;for(;s!==void 0;)s=d_(s)}return t}function la(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function h_(n){rU?.(n)}function sU(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function f_(n,e){return Object.is(n,e)}function Eh(n,e){let t=Object.create(oU);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(c_(t),El(t),t.value===gh)throw t.error;return t.value};return r[sn]=t,h_(t),r}var i_=Symbol("UNSET"),s_=Symbol("COMPUTING"),gh=Symbol("ERRORED"),oU=ee(F({},vl),{value:i_,dirty:!0,error:null,equal:f_,kind:"computed",producerMustRecompute(n){return n.value===i_||n.value===s_},producerRecomputeValue(n){if(n.value===s_)throw new Error("");let e=n.value;n.value=s_;let t=bl(n),r,i=!1;try{r=n.computation(),we(null),i=e!==i_&&e!==gh&&r!==gh&&n.equal(e,r)}catch(s){r=gh,n.error=s}finally{_h(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function aU(){throw new Error}var $D=aU;function HD(n){$D(n)}function p_(n){$D=n}var cU=null;function m_(n,e){let t=Object.create(bh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>zD(t);return r[sn]=t,h_(t),[r,o=>wl(t,o),o=>GD(t,o)]}function zD(n){return El(n),n.value}function wl(n,e){u_()||HD(n),n.equal(n.value,e)||(n.value=e,lU(n))}function GD(n,e){u_()||HD(n),wl(n,e(n.value))}var bh=ee(F({},vl),{equal:f_,value:void 0,kind:"signal"});function lU(n){n.version++,VD(),l_(n),cU?.(n)}function g_(n){let e=we(null);try{return n()}finally{we(e)}}function Ee(n){return typeof n=="function"}function ua(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ih=ua(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function js(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var We=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ee(r))try{r()}catch(s){e=s instanceof Ih?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{qD(s)}catch(o){e=e??[],o instanceof Ih?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ih(e)}}add(e){var t;if(e&&e!==this)if(this.closed)qD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&js(t,e)}remove(e){let{_finalizers:t}=this;t&&js(t,e),e instanceof n&&e._removeParent(this)}};We.EMPTY=(()=>{let n=new We;return n.closed=!0,n})();var y_=We.EMPTY;function wh(n){return n instanceof We||n&&"closed"in n&&Ee(n.remove)&&Ee(n.add)&&Ee(n.unsubscribe)}function qD(n){Ee(n)?n():n.unsubscribe()}var rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var da={setTimeout(n,e,...t){let{delegate:r}=da;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=da;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Sh(n){da.setTimeout(()=>{let{onUnhandledError:e}=rr;if(e)e(n);else throw n})}function Sl(){}var WD=__("C",void 0,void 0);function KD(n){return __("E",void 0,n)}function YD(n){return __("N",n,void 0)}function __(n,e,t){return{kind:n,value:e,error:t}}var $s=null;function ha(n){if(rr.useDeprecatedSynchronousErrorHandling){let e=!$s;if(e&&($s={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=$s;if($s=null,t)throw r}}else n()}function QD(n){rr.useDeprecatedSynchronousErrorHandling&&$s&&($s.errorThrown=!0,$s.error=n)}var Hs=class extends We{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wh(e)&&e.add(this)):this.destination=hU}static create(e,t,r){return new fa(e,t,r)}next(e){this.isStopped?E_(YD(e),this):this._next(e)}error(e){this.isStopped?E_(KD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?E_(WD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},uU=Function.prototype.bind;function v_(n,e){return uU.call(n,e)}var b_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ch(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ch(r)}else Ch(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ch(t)}}},fa=class extends Hs{constructor(e,t,r){super();let i;if(Ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&rr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&v_(e.next,s),error:e.error&&v_(e.error,s),complete:e.complete&&v_(e.complete,s)}):i=e}this.destination=new b_(i)}};function Ch(n){rr.useDeprecatedSynchronousErrorHandling?QD(n):Sh(n)}function dU(n){throw n}function E_(n,e){let{onStoppedNotification:t}=rr;t&&da.setTimeout(()=>t(n,e))}var hU={closed:!0,next:Sl,error:dU,complete:Sl};var pa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ir(n){return n}function I_(...n){return w_(n)}function w_(n){return n.length===0?ir:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=pU(t)?t:new fa(t,r,i);return ha(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=JD(r),new r((i,s)=>{let o=new fa({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[pa](){return this}pipe(...t){return w_(t)(this)}toPromise(t){return t=JD(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function JD(n){var e;return(e=n??rr.Promise)!==null&&e!==void 0?e:Promise}function fU(n){return n&&Ee(n.next)&&Ee(n.error)&&Ee(n.complete)}function pU(n){return n&&n instanceof Hs||fU(n)&&wh(n)}function mU(n){return Ee(n?.lift)}function Ue(n){return e=>{if(mU(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Le(n,e,t,r,i){return new S_(n,e,t,r,i)}var S_=class extends Hs{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var ma={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=ma;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(s=>{t=void 0,n(s)});return new We(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=ma;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=ma;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var ZD=ua(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=(()=>{class n extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Th(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ZD}next(t){ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?y_:(this.currentObservers=null,s.push(t),new We(()=>{this.currentObservers=null,js(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new me;return t.source=this,t}}return n.create=(e,t)=>new Th(e,t),n})(),Th=class extends _e{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:y_}};var rt=class extends _e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var C_={now(){return(C_.delegate||Date).now()},delegate:void 0};var Dh=class extends We{constructor(e,t){super()}schedule(e,t=0){return this}};var Cl={setInterval(n,e,...t){let{delegate:r}=Cl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Cl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var zi=class extends Dh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Cl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Cl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,js(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ga=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ga.now=C_.now;var Gi=class extends ga{constructor(e,t=ga.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var qi=new Gi(zi),T_=qi;var Ah=class extends zi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var xh=class extends Gi{};var D_=new xh(Ah);var Rh=class extends zi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=ma.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:s}=e;t!=null&&t===e._scheduled&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==t&&(ma.cancelAnimationFrame(t),e._scheduled=void 0)}};var kh=class extends Gi{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var Ph=new kh(Rh);var Qt=new me(n=>n.complete());function Nh(n){return n&&Ee(n.schedule)}function A_(n){return n[n.length-1]}function Mh(n){return Ee(A_(n))?n.pop():void 0}function Cr(n){return Nh(A_(n))?n.pop():void 0}function XD(n,e){return typeof A_(n)=="number"?n.pop():e}function Oh(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function tA(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function eA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zs(n){return this instanceof zs?(this.v=n,this):new zs(n)}function nA(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(w){return Promise.resolve(w).then(g,f)}}function a(g,w){r[g]&&(i[g]=function(x){return new Promise(function(P,U){s.push([g,x,P,U])>1||c(g,x)})},w&&(i[g]=w(i[g])))}function c(g,w){try{u(r[g](w))}catch(x){m(s[0][3],x)}}function u(g){g.value instanceof zs?Promise.resolve(g.value.v).then(d,f):m(s[0][2],g)}function d(g){c("next",g)}function f(g){c("throw",g)}function m(g,w){g(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function rA(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof eA=="function"?eA(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var Fh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Lh(n){return Ee(n?.then)}function Vh(n){return Ee(n[pa])}function Uh(n){return Symbol.asyncIterator&&Ee(n?.[Symbol.asyncIterator])}function Bh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var jh=gU();function $h(n){return Ee(n?.[jh])}function Hh(n){return nA(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield zs(t.read());if(i)return yield zs(void 0);yield yield zs(r)}}finally{t.releaseLock()}})}function zh(n){return Ee(n?.getReader)}function ot(n){if(n instanceof me)return n;if(n!=null){if(Vh(n))return yU(n);if(Fh(n))return _U(n);if(Lh(n))return vU(n);if(Uh(n))return iA(n);if($h(n))return EU(n);if(zh(n))return bU(n)}throw Bh(n)}function yU(n){return new me(e=>{let t=n[pa]();if(Ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _U(n){return new me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function vU(n){return new me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Sh)})}function EU(n){return new me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function iA(n){return new me(e=>{IU(n,e).catch(t=>e.error(t))})}function bU(n){return iA(Hh(n))}function IU(n,e){var t,r,i,s;return tA(this,void 0,void 0,function*(){try{for(t=rA(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function yn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Wi(n,e=0){return Ue((t,r)=>{t.subscribe(Le(r,i=>yn(r,n,()=>r.next(i),e),()=>yn(r,n,()=>r.complete(),e),i=>yn(r,n,()=>r.error(i),e)))})}function Ki(n,e=0){return Ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sA(n,e){return ot(n).pipe(Ki(e),Wi(e))}function oA(n,e){return ot(n).pipe(Ki(e),Wi(e))}function aA(n,e){return new me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function cA(n,e){return new me(t=>{let r;return yn(t,e,()=>{r=n[jh](),yn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Ee(r?.return)&&r.return()})}function Gh(n,e){if(!n)throw new Error("Iterable cannot be null");return new me(t=>{yn(t,e,()=>{let r=n[Symbol.asyncIterator]();yn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function lA(n,e){return Gh(Hh(n),e)}function uA(n,e){if(n!=null){if(Vh(n))return sA(n,e);if(Fh(n))return aA(n,e);if(Lh(n))return oA(n,e);if(Uh(n))return Gh(n,e);if($h(n))return cA(n,e);if(zh(n))return lA(n,e)}throw Bh(n)}function je(n,e){return e?uA(n,e):ot(n)}function Se(...n){let e=Cr(n);return je(n,e)}function x_(n,e){let t=Ee(n)?n:()=>n,r=i=>i.error(t());return new me(e?i=>e.schedule(r,0,i):r)}function Tl(n){return!!n&&(n instanceof me||Ee(n.lift)&&Ee(n.subscribe))}var Gs=ua(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function dA(n){return n instanceof Date&&!isNaN(n)}function Me(n,e){return Ue((t,r)=>{let i=0;t.subscribe(Le(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:wU}=Array;function SU(n,e){return wU(e)?n(...e):n(e)}function qh(n){return Me(e=>SU(n,e))}var{isArray:CU}=Array,{getPrototypeOf:TU,prototype:DU,keys:AU}=Object;function Wh(n){if(n.length===1){let e=n[0];if(CU(e))return{args:e,keys:null};if(xU(e)){let t=AU(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function xU(n){return n&&typeof n=="object"&&TU(n)===DU}function Kh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Yh(...n){let e=Cr(n),t=Mh(n),{args:r,keys:i}=Wh(n);if(r.length===0)return je([],e);let s=new me(RU(r,e,i?o=>Kh(i,o):ir));return t?s.pipe(qh(t)):s}function RU(n,e,t=ir){return r=>{hA(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)hA(e,()=>{let u=je(n[c],e),d=!1;u.subscribe(Le(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function hA(n,e,t){n?yn(t,n,e):e()}function fA(n,e,t,r,i,s,o,a){let c=[],u=0,d=0,f=!1,m=()=>{f&&!c.length&&!u&&e.complete()},g=x=>u<r?w(x):c.push(x),w=x=>{s&&e.next(x),u++;let P=!1;ot(t(x,d++)).subscribe(Le(e,U=>{i?.(U),s?g(U):e.next(U)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;c.length&&u<r;){let U=c.shift();o?yn(e,o,()=>w(U)):w(U)}m()}catch(U){e.error(U)}}))};return n.subscribe(Le(e,g,()=>{f=!0,m()})),()=>{a?.()}}function jt(n,e,t=1/0){return Ee(e)?jt((r,i)=>Me((s,o)=>e(r,s,i,o))(ot(n(r,i))),t):(typeof e=="number"&&(t=e),Ue((r,i)=>fA(r,i,n,t)))}function Yi(n=1/0){return jt(ir,n)}function pA(){return Yi(1)}function ya(...n){return pA()(je(n,Cr(n)))}function Dl(n){return new me(e=>{ot(n()).subscribe(e)})}function R_(...n){let e=Mh(n),{args:t,keys:r}=Wh(n),i=new me(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let d=0;d<o;d++){let f=!1;ot(t[d]).subscribe(Le(s,m=>{f||(f=!0,u--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(u||s.next(r?Kh(r,a):a),s.complete())}))}});return e?i.pipe(qh(e)):i}function Qh(n=0,e,t=T_){let r=-1;return e!=null&&(Nh(e)?t=e:r=e),new me(i=>{let s=dA(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Qi(n=0,e=qi){return n<0&&(n=0),Qh(n,n,e)}function Jh(...n){let e=Cr(n),t=XD(n,1/0),r=n;return r.length?r.length===1?ot(r[0]):Yi(t)(je(r,e)):Qt}function on(n,e){return Ue((t,r)=>{let i=0;t.subscribe(Le(r,s=>n.call(e,s,i++)&&r.next(s)))})}function mA(n){return Ue((e,t)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let u=i;i=null,t.next(u)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(Le(t,u=>{r=!0,i=u,s||ot(n(u)).subscribe(s=Le(t,a,c))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}function k_(n,e=qi){return mA(()=>Qh(n,e))}function _a(n){return Ue((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Le(t,void 0,void 0,o=>{s=ot(n(o,_a(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function va(n,e){return Ee(e)?jt(n,e,1):jt(n,1)}function P_(n){return Ue((e,t)=>{let r=!1;e.subscribe(Le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function xt(n){return n<=0?()=>Qt:Ue((e,t)=>{let r=0;e.subscribe(Le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function gA(n=kU){return Ue((e,t)=>{let r=!1;e.subscribe(Le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function kU(){return new Gs}function N_(n){return Ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function si(n,e){let t=arguments.length>=2;return r=>r.pipe(n?on((i,s)=>n(i,s,r)):ir,xt(1),t?P_(e):gA(()=>new Gs))}function Zh(n){return n<=0?()=>Qt:Ue((e,t)=>{let r=[];e.subscribe(Le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ea(...n){let e=Cr(n);return Ue((t,r)=>{(e?ya(n,t,e):ya(n,t)).subscribe(r)})}function _n(n,e){return Ue((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Le(r,c=>{i?.unsubscribe();let u=0,d=s++;ot(n(c,d)).subscribe(i=Le(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Tr(n){return Ue((e,t)=>{ot(n).subscribe(Le(t,()=>t.complete(),Sl)),!t.closed&&e.subscribe(t)})}function $t(n,e,t){let r=Ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ue((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Le(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ir}var M_;function Xh(){return M_}function Dr(n){let e=M_;return M_=n,e}var yA=Symbol("NotFound");function ba(n){return n===yA||n?.name==="\u0275NotFound"}var Ji=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Q_=new Ji("21.0.0");var J_="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",B=class extends Error{code;constructor(e,t){super(ts(e,t)),this.code=e}};function MU(n){return`NG0${Math.abs(n)}`}function ts(n,e){return`${MU(n)}${e?": "+e:""}`}var ln=globalThis;function $e(n){for(let e in n)if(n[e]===$e)return e;throw Error("")}function IA(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ai(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ai).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function sf(n,e){return n?e?`${n} ${e}`:n:e||""}var OU=$e({__forward_ref__:$e});function ns(n){return n.__forward_ref__=ns,n.toString=function(){return ai(this())},n}function Ht(n){return Z_(n)?n():n}function Z_(n){return typeof n=="function"&&n.hasOwnProperty(OU)&&n.__forward_ref__===ns}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function it(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nl(n){return FU(n,of)}function X_(n){return Nl(n)!==null}function FU(n,e){return n.hasOwnProperty(e)&&n[e]||null}function LU(n){let e=n?.[of]??null;return e||null}function F_(n){return n&&n.hasOwnProperty(tf)?n[tf]:null}var of=$e({\u0275prov:$e}),tf=$e({\u0275inj:$e}),K=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ev(n){return n&&!!n.\u0275providers}var tv=$e({\u0275cmp:$e}),nv=$e({\u0275dir:$e}),rv=$e({\u0275pipe:$e}),iv=$e({\u0275mod:$e}),xl=$e({\u0275fac:$e}),Qs=$e({__NG_ELEMENT_ID__:$e}),_A=$e({__NG_ENV_ID__:$e});function wa(n){return typeof n=="string"?n:n==null?"":String(n)}function wA(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():wa(n)}var SA=$e({ngErrorCode:$e}),VU=$e({ngErrorMessage:$e}),UU=$e({ngTokenPath:$e});function sv(n,e){return CA("",-200,e)}function af(n,e){throw new B(-201,!1)}function CA(n,e,t){let r=new B(e,n);return r[SA]=e,r[VU]=n,t&&(r[UU]=t),r}function BU(n){return n[SA]}var L_;function TA(){return L_}function an(n){let e=L_;return L_=n,e}function ov(n,e,t){let r=Nl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;af(n,"Injector")}var jU={},qs=jU,V_="__NG_DI_FLAG__",U_=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ws(t)||0;try{return this.injector.get(e,r&8?null:qs,r)}catch(i){if(ba(i))return i;throw i}}};function $U(n,e=0){let t=Xh();if(t===void 0)throw new B(-203,!1);if(t===null)return ov(n,void 0,e);{let r=HU(e),i=t.retrieve(n,r);if(ba(i)){if(r.optional)return null;throw i}return i}}function te(n,e=0){return(TA()||$U)(Ht(n),e)}function M(n,e){return te(n,Ws(e))}function Ws(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function HU(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function B_(n){let e=[];for(let t=0;t<n.length;t++){let r=Ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=zU(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(te(i,s))}else e.push(te(r))}return e}function DA(n,e){return n[V_]=e,n.prototype[V_]=e,n}function zU(n){return n[V_]}function Zi(n,e){let t=n.hasOwnProperty(xl);return t?n[xl]:null}function AA(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function xA(n){return n.flat(Number.POSITIVE_INFINITY)}function cf(n,e){n.forEach(t=>Array.isArray(t)?cf(t,e):e(t))}function av(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ml(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function RA(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function kA(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function lf(n,e,t){let r=Sa(n,e);return r>=0?n[r|1]=t:(r=~r,kA(n,r,e,t)),r}function uf(n,e){let t=Sa(n,e);if(t>=0)return n[t|1]}function Sa(n,e){return GU(n,e,1)}function GU(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var rs={},cn=[],Ca=new K(""),cv=new K("",-1),lv=new K(""),Rl=class{get(e,t=qs){if(t===qs){let i=CA("",-201);throw i.name="\u0275NotFound",i}return t}};function uv(n){return n[iv]||null}function xr(n){return n[tv]||null}function dv(n){return n[nv]||null}function PA(n){return n[rv]||null}function sr(n){return{\u0275providers:n}}function NA(...n){return{\u0275providers:hv(!0,n),\u0275fromNgModule:!0}}function hv(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return cf(e,o=>{let a=o;nf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&MA(i,s),t}function MA(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];fv(i,s=>{e(s,r)})}}function nf(n,e,t,r){if(n=Ht(n),!n)return!1;let i=null,s=F_(n),o=!s&&xr(n);if(!s&&!o){let c=n.ngModule;if(s=F_(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)nf(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{cf(s.imports,d=>{nf(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&MA(u,e)}if(!a){let u=Zi(i)||(()=>new i);e({provide:i,useFactory:u,deps:cn},i),e({provide:lv,useValue:i,multi:!0},i),e({provide:Ca,useValue:()=>te(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=n;fv(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function fv(n,e){for(let t of n)ev(t)&&(t=t.\u0275providers),Array.isArray(t)?fv(t,e):e(t)}var qU=$e({provide:String,useValue:$e});function OA(n){return n!==null&&typeof n=="object"&&qU in n}function WU(n){return!!(n&&n.useExisting)}function KU(n){return!!(n&&n.useFactory)}function Ks(n){return typeof n=="function"}function FA(n){return!!n.useClass}var Ol=new K(""),ef={},vA={},O_;function Ta(){return O_===void 0&&(O_=new Rl),O_}var pt=class{},Ys=class extends pt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,$_(e,o=>this.processProvider(o)),this.records.set(cv,Ia(void 0,this)),i.has("environment")&&this.records.set(pt,Ia(void 0,this));let s=this.records.get(Ol);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(lv,cn,{self:!0}))}retrieve(e,t){let r=Ws(t)||0;try{return this.get(e,qs,r)}catch(i){if(ba(i))return i;throw i}}destroy(){Al(this),this._destroyed=!0;let e=we(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return Al(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Al(this);let t=Dr(this),r=an(void 0),i;try{return e()}finally{Dr(t),an(r)}}get(e,t=qs,r){if(Al(this),e.hasOwnProperty(_A))return e[_A](this);let i=Ws(r),s,o=Dr(this),a=an(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=XU(e)&&Nl(e);d&&this.injectableDefInScope(d)?u=Ia(j_(e),ef):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Ta():this.parent;return t=i&8&&t===qs?null:t,c.get(e,t)}catch(c){let u=BU(c);throw u===-200||u===-201?new B(u,null):c}finally{an(a),Dr(o)}}resolveInjectorInitializers(){let e=we(null),t=Dr(this),r=an(void 0),i;try{let s=this.get(Ca,cn,{self:!0});for(let o of s)o()}finally{Dr(t),an(r),we(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ai(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ht(e);let t=Ks(e)?e:Ht(e&&e.provide),r=QU(e);if(!Ks(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ia(void 0,ef,!0),i.factory=()=>B_(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=we(null);try{if(t.value===vA)throw sv(ai(e));return t.value===ef&&(t.value=vA,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&ZU(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{we(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function j_(n){let e=Nl(n),t=e!==null?e.factory:Zi(n);if(t!==null)return t;if(n instanceof K)throw new B(204,!1);if(n instanceof Function)return YU(n);throw new B(204,!1)}function YU(n){if(n.length>0)throw new B(204,!1);let t=LU(n);return t!==null?()=>t.factory(n):()=>new n}function QU(n){if(OA(n))return Ia(void 0,n.useValue);{let e=pv(n);return Ia(e,ef)}}function pv(n,e,t){let r;if(Ks(n)){let i=Ht(n);return Zi(i)||j_(i)}else if(OA(n))r=()=>Ht(n.useValue);else if(KU(n))r=()=>n.useFactory(...B_(n.deps||[]));else if(WU(n))r=(i,s)=>te(Ht(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Ht(n&&(n.useClass||n.provide));if(JU(n))r=()=>new i(...B_(n.deps));else return Zi(i)||j_(i)}return r}function Al(n){if(n.destroyed)throw new B(205,!1)}function Ia(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function JU(n){return!!n.deps}function ZU(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function XU(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function $_(n,e){for(let t of n)Array.isArray(t)?$_(t,e):t&&ev(t)?$_(t.\u0275providers,e):e(t)}function It(n,e){let t;n instanceof Ys?(Al(n),t=n):t=new U_(n);let r,i=Dr(t),s=an(void 0);try{return e()}finally{Dr(i),an(s)}}function mv(){return TA()!==void 0||Xh()!=null}var or=0,de=1,ye=2,Nt=3,jn=4,un=5,Da=6,Aa=7,Jt=8,is=9,ci=10,at=11,xa=12,gv=13,Js=14,vn=15,ss=16,Zs=17,Rr=18,Fl=19,yv=20,oi=21,df=22,Ll=23,An=24,Xs=25,Vl=26,wt=27,LA=1;var os=7,Ul=8,eo=9,dn=10;function kr(n){return Array.isArray(n)&&typeof n[LA]=="object"}function ar(n){return Array.isArray(n)&&n[LA]===!0}function _v(n){return(n.flags&4)!==0}function as(n){return n.componentOffset>-1}function Ra(n){return(n.flags&1)===1}function Pr(n){return!!n.template}function ka(n){return(n[ye]&512)!==0}function to(n){return(n[ye]&256)===256}var VA="svg",UA="math";function $n(n){for(;Array.isArray(n);)n=n[or];return n}function vv(n,e){return $n(e[n])}function Nr(n,e){return $n(e[n.index])}function hf(n,e){return n.data[e]}function Ev(n,e){return n[e]}function bv(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Hn(n,e){let t=e[n];return kr(t)?t:t[or]}function BA(n){return(n[ye]&4)===4}function ff(n){return(n[ye]&128)===128}function jA(n){return ar(n[Nt])}function Pa(n,e){return e==null?null:n[e]}function Iv(n){n[Zs]=0}function wv(n){n[ye]&1024||(n[ye]|=1024,ff(n)&&Na(n))}function $A(n,e){for(;n>0;)e=e[Js],n--;return e}function Bl(n){return!!(n[ye]&9216||n[An]?.dirty)}function pf(n){n[ci].changeDetectionScheduler?.notify(8),n[ye]&64&&(n[ye]|=1024),Bl(n)&&Na(n)}function Na(n){n[ci].changeDetectionScheduler?.notify(0);let e=Xi(n);for(;e!==null&&!(e[ye]&8192||(e[ye]|=8192,!ff(e)));)e=Xi(e)}function Sv(n,e){if(to(n))throw new B(911,!1);n[oi]===null&&(n[oi]=[]),n[oi].push(e)}function HA(n,e){if(n[oi]===null)return;let t=n[oi].indexOf(e);t!==-1&&n[oi].splice(t,1)}function Xi(n){let e=n[Nt];return ar(e)?e[Nt]:e}function Cv(n){return n[Aa]??=[]}function Tv(n){return n.cleanup??=[]}function zA(n,e,t,r){let i=Cv(e);i.push(t),n.firstCreatePass&&Tv(n).push(r,i.length-1)}var De={lFrame:ix(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var H_=!1;function GA(){return De.lFrame.elementDepthCount}function qA(){De.lFrame.elementDepthCount++}function WA(){De.lFrame.elementDepthCount--}function mf(){return De.bindingsEnabled}function Dv(){return De.skipHydrationRootTNode!==null}function KA(n){return De.skipHydrationRootTNode===n}function YA(){De.skipHydrationRootTNode=null}function Te(){return De.lFrame.lView}function Mt(){return De.lFrame.tView}function Y(n){return De.lFrame.contextLView=n,n[Jt]}function Q(n){return De.lFrame.contextLView=null,n}function hn(){let n=Av();for(;n!==null&&n.type===64;)n=n.parent;return n}function Av(){return De.lFrame.currentTNode}function QA(){let n=De.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ma(n,e){let t=De.lFrame;t.currentTNode=n,t.isParent=e}function xv(){return De.lFrame.isParent}function Rv(){De.lFrame.isParent=!1}function kv(){return H_}function Pv(n){let e=H_;return H_=n,e}function Oa(){let n=De.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function JA(){return De.lFrame.bindingIndex}function ZA(n){return De.lFrame.bindingIndex=n}function jl(){return De.lFrame.bindingIndex++}function gf(n){let e=De.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function XA(){return De.lFrame.inI18n}function ex(n,e){let t=De.lFrame;t.bindingIndex=t.bindingRootIndex=n,yf(e)}function tx(){return De.lFrame.currentDirectiveIndex}function yf(n){De.lFrame.currentDirectiveIndex=n}function nx(n){let e=De.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Nv(){return De.lFrame.currentQueryIndex}function _f(n){De.lFrame.currentQueryIndex=n}function eB(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[un]:null}function Mv(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=eB(s),i===null||(s=s[Js],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=De.lFrame=rx();return r.currentTNode=e,r.lView=n,!0}function vf(n){let e=rx(),t=n[de];De.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function rx(){let n=De.lFrame,e=n===null?null:n.child;return e===null?ix(n):e}function ix(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function sx(){let n=De.lFrame;return De.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ov=sx;function Ef(){let n=sx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ox(n){return(De.lFrame.contextLView=$A(n,De.lFrame.contextLView))[Jt]}function li(){return De.lFrame.selectedIndex}function cs(n){De.lFrame.selectedIndex=n}function Fv(){let n=De.lFrame;return hf(n.tView,n.selectedIndex)}function ax(){return De.lFrame.currentNamespace}var cx=!0;function bf(){return cx}function $l(n){cx=n}function z_(n,e=null,t=null,r){let i=Lv(n,e,t,r);return i.resolveInjectorInitializers(),i}function Lv(n,e=null,t=null,r,i=new Set){let s=[t||cn,NA(n)];return r=r||(typeof n=="object"?void 0:ai(n)),new Ys(s,e||Ta(),r||null,i)}var Ge=class n{static THROW_IF_NOT_FOUND=qs;static NULL=new Rl;static create(e,t){if(Array.isArray(e))return z_({name:""},t,e,"");{let r=e.name??"";return z_({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>te(cv)});static __NG_ELEMENT_ID__=-1},Qe=new K(""),zn=(()=>{class n{static __NG_ELEMENT_ID__=tB;static __NG_ENV_ID__=t=>t}return n})(),G_=class extends zn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return to(this._lView)}onDestroy(e){let t=this._lView;return Sv(t,e),()=>HA(t,e)}};function tB(){return new G_(Te())}var lx=!1,ui=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new rt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new me(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),q_=class extends _e{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,mv()&&(this.destroyRef=M(zn,{optional:!0})??void 0,this.pendingTasks=M(ui,{optional:!0})??void 0)}emit(e){let t=we(null);try{super.next(e)}finally{we(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof We&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ke=q_;function rf(...n){}function Vv(n){let e,t;function r(){n=rf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Uv(n){return queueMicrotask(()=>n()),()=>{n=rf}}var Bv="isAngularZone",kl=Bv+"_ID",nB=0,Ne=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ke(!1);onMicrotaskEmpty=new Ke(!1);onStable=new Ke(!1);onError=new Ke(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=lx}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,sB(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Bv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new B(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,rB,rf,rf);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},rB={};function jv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function iB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Vv(()=>{n.callbackScheduled=!1,W_(n),n.isCheckStableRunning=!0,jv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),W_(n)}function sB(n){let e=()=>{iB(n)},t=nB++;n._inner=n._inner.fork({name:"angular",properties:{[Bv]:!0,[kl]:t,[kl+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(oB(c))return r.invokeTask(s,o,a,c);try{return EA(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),bA(n)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return EA(n),r.invoke(s,o,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!aB(c)&&e(),bA(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,W_(n),jv(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function W_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function EA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bA(n){n._nesting--,jv(n)}var Pl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ke;onMicrotaskEmpty=new Ke;onStable=new Ke;onError=new Ke;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function oB(n){return ux(n,"__ignore_ng_zone__")}function aB(n){return ux(n,"__scheduler_tick__")}function ux(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ar=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Gn=new K("",{factory:()=>{let n=M(Ne),e=M(pt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Ar),t.handleError(r))})}}}),dx={provide:Ca,useValue:()=>{let n=M(Ar,{optional:!0})},multi:!0};function zt(n,e){let[t,r,i]=m_(n,e?.equal),s=t,o=s[sn];return s.set=r,s.update=i,s.asReadonly=hx.bind(s),s}function hx(){let n=this[sn];if(n.readonlyFn===void 0){let e=()=>this();e[sn]=n,n.readonlyFn=e}return n.readonlyFn}var If=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=cB}return n})();function cB(){return new If(Te(),hn())}var es=class{},Hl=new K("",{factory:()=>!0});var $v=new K(""),Fa=(()=>{class n{internalPendingTasks=M(ui);scheduler=M(es);errorHandler=M(Gn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Hv=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new K_})}return n})(),K_=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Y_=class{[sn];constructor(e){this[sn]=e}destroy(){this[sn].destroy()}};function vt(n){return g_(n)}function $a(n){return{toString:n}.toString()}var wf="__parameters__";function gB(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function yB(n,e,t){return $a(()=>{let r=gB(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,d){let f=c.hasOwnProperty(wf)?c[wf]:Object.defineProperty(c,wf,{value:[]})[wf];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var xn=DA(yB("Optional"),8);function Vx(n){let e=ln.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function _B(n){return typeof n=="function"}function Ux(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Rf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Lr=(()=>{let n=()=>Bx;return n.ngInherit=!0,n})();function Bx(n){return n.type.prototype.ngOnChanges&&(n.setInput=EB),vB}function vB(){let n=$x(this),e=n?.current;if(e){let t=n.previous;if(t===rs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function EB(n,e,t,r,i){let s=this.declaredInputs[r],o=$x(n)||bB(n,{previous:rs,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Rf(u&&u.currentValue,t,c===rs),Ux(n,e,i,t)}var jx="__ngSimpleChanges__";function $x(n){return n[jx]||null}function bB(n,e){return n[jx]=e}var fx=[];var Je=function(n,e=null,t){for(let r=0;r<fx.length;r++){let i=fx[r];i(n,e,t)}};function IB(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Bx(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Hx(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Tf(n,e,t){zx(n,e,3,t)}function Df(n,e,t,r){(n[ye]&3)===t&&zx(n,e,t,r)}function zv(n,e){let t=n[ye];(t&3)===e&&(t&=16383,t+=1,n[ye]=t)}function zx(n,e,t,r){let i=r!==void 0?n[Zs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Zs]+=65536),(a<s||s==-1)&&(wB(n,t,e,c),n[Zs]=(n[Zs]&4294901760)+c+2),c++}function px(n,e){Je(4,n,e);let t=we(null);try{e.call(n)}finally{we(t),Je(5,n,e)}}function wB(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ye]>>14<n[Zs]>>16&&(n[ye]&3)===e&&(n[ye]+=16384,px(a,s)):px(a,s)}var Va=-1,ro=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function SB(n){return(n.flags&8)!==0}function CB(n){return(n.flags&16)!==0}function TB(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];AB(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function DB(n){return n===3||n===4||n===6}function AB(n){return n.charCodeAt(0)===64}function Kl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?mx(n,t,i,null,e[++r]):mx(n,t,i,null,null))}}return n}function mx(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function Gx(n){return n!==Va}function kf(n){return n&32767}function xB(n){return n>>16}function Pf(n,e){let t=xB(n),r=e;for(;t>0;)r=r[Js],t--;return r}var e0=!0;function Nf(n){let e=e0;return e0=n,e}var RB=256,qx=RB-1,Wx=5,kB=0,Mr={};function PB(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Qs)&&(r=t[Qs]),r==null&&(r=t[Qs]=kB++);let i=r&qx,s=1<<i;e.data[n+(i>>Wx)]|=s}function Mf(n,e){let t=Kx(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,Gv(r.data,n),Gv(e,null),Gv(r.blueprint,null));let i=A0(n,e),s=n.injectorIndex;if(Gx(i)){let o=kf(i),a=Pf(i,e),c=a[de].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Gv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Kx(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function A0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Xx(i),r===null)return Va;if(t++,i=i[Js],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Va}function t0(n,e,t){PB(n,e,t)}function Yx(n,e,t){if(t&8||n!==void 0)return n;af(e,"NodeInjector")}function Qx(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[is],s=an(void 0);try{return i?i.get(e,r,t&8):ov(e,r,t&8)}finally{an(s)}}return Yx(r,e,t)}function Jx(n,e,t,r=0,i){if(n!==null){if(e[ye]&2048&&!(r&2)){let o=FB(n,e,t,r,Mr);if(o!==Mr)return o}let s=Zx(n,e,t,r,Mr);if(s!==Mr)return s}return Qx(e,t,r,i)}function Zx(n,e,t,r,i){let s=MB(t);if(typeof s=="function"){if(!Mv(e,n,r))return r&1?Yx(i,t,r):Qx(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))af(t);else return o}finally{Ov()}}else if(typeof s=="number"){let o=null,a=Kx(n,e),c=Va,u=r&1?e[vn][un]:null;for((a===-1||r&4)&&(c=a===-1?A0(n,e):e[a+8],c===Va||!yx(r,!1)?a=-1:(o=e[de],a=kf(c),e=Pf(c,e)));a!==-1;){let d=e[de];if(gx(s,a,d.data)){let f=NB(a,e,t,o,r,u);if(f!==Mr)return f}c=e[a+8],c!==Va&&yx(r,e[de].data[a+8]===u)&&gx(s,a,e)?(o=d,a=kf(c),e=Pf(c,e)):a=-1}}return i}function NB(n,e,t,r,i,s){let o=e[de],a=o.data[n+8],c=r==null?as(a)&&e0:r!=o&&(a.type&3)!==0,u=i&1&&s===a,d=Af(a,o,t,c,u);return d!==null?Yl(e,o,d,a,i):Mr}function Af(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,u=n.directiveEnd,d=s>>20,f=r?a:a+d,m=i?a+d:u;for(let g=f;g<m;g++){let w=o[g];if(g<c&&t===w||g>=c&&w.type===t)return g}if(i){let g=o[c];if(g&&Pr(g)&&g.type===t)return c}return null}function Yl(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof ro){let a=s;if(a.resolving){let g=wA(o[t]);throw sv(g)}let c=Nf(a.canSeeViewProviders);a.resolving=!0;let u=o[t].type||o[t],d,f=a.injectImpl?an(a.injectImpl):null,m=Mv(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&IB(t,o[t],e)}finally{f!==null&&an(f),Nf(c),a.resolving=!1,Ov()}}return s}function MB(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Qs)?n[Qs]:void 0;return typeof e=="number"?e>=0?e&qx:OB:e}function gx(n,e,t){let r=1<<n;return!!(t[e+(n>>Wx)]&r)}function yx(n,e){return!(n&2)&&!(n&1&&e)}var no=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Jx(this._tNode,this._lView,e,Ws(r),t)}};function OB(){return new no(hn(),Te())}function oo(n){return $a(()=>{let e=n.prototype.constructor,t=e[xl]||n0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[xl]||n0(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function n0(n){return Z_(n)?()=>{let e=n0(Ht(n));return e&&e()}:Zi(n)}function FB(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ye]&2048&&!ka(o);){let a=Zx(s,o,t,r|2,Mr);if(a!==Mr)return a;let c=s.parent;if(!c){let u=o[yv];if(u){let d=u.get(t,Mr,r);if(d!==Mr)return d}c=Xx(o),o=o[Js]}s=c}return i}function Xx(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[un]:null}function LB(){return Ha(hn(),Te())}function Ha(n,e){return new Gt(Nr(n,e))}var Gt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=LB}return n})();function VB(n){return n instanceof Gt?n.nativeElement:n}function UB(){return this._results[Symbol.iterator]()}var Of=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new _e}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=xA(e);(this._changesDetected=!AA(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=UB};function eR(n){return(n.flags&128)===128}var x0=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(x0||{}),tR=new Map,BB=0;function jB(){return BB++}function $B(n){tR.set(n[Fl],n)}function r0(n){tR.delete(n[Fl])}var _x="__ngContext__";function Ua(n,e){kr(e)?(n[_x]=e[Fl],$B(e)):n[_x]=e}function nR(n){return iR(n[xa])}function rR(n){return iR(n[jn])}function iR(n){for(;n!==null&&!ar(n);)n=n[jn];return n}var i0;function R0(n){i0=n}function sR(){if(i0!==void 0)return i0;if(typeof document<"u")return document;throw new B(210,!1)}var Hf=new K("",{factory:()=>HB}),HB="ng";var zf=new K(""),hi=new K("",{providedIn:"platform",factory:()=>"unknown"}),Gf=new K(""),qf=new K("",{factory:()=>sR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oR=!1,aR=new K("",{factory:()=>oR});var k0=new K("");var zB=(n,e,t,r)=>{};function GB(n,e,t,r){zB(n,e,t,r)}function Wf(n){return(n.flags&32)===32}var qB=()=>null;function cR(n,e,t=!1){return qB(n,e,t)}function lR(n,e){let t=n.contentQueries;if(t!==null){let r=we(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];_f(s),a.contentQueries(2,e[o],o)}}}finally{we(r)}}}function s0(n,e,t){_f(0);let r=we(null);try{e(n,t)}finally{we(r)}}function P0(n,e,t){if(_v(e)){let r=we(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{we(r)}}}var ur=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(ur||{});var o0=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${J_})`}};function Kf(n){return n instanceof o0?n.changingThisBreaksApplicationSecurity:n}var WB=/^>|^->|<!--|-->|--!>|<!-$/g,KB=/(<|>)/g,YB="\u200B$1\u200B";function QB(n){return n.replace(WB,e=>e.replace(KB,YB))}function eu(n){return n.ownerDocument.defaultView}function uR(n){return n instanceof Function?n():n}function JB(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var dR="ng-template";function ZB(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&JB(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(N0(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function N0(n){return n.type===4&&n.value!==dR}function XB(n,e,t){let r=n.type===4&&!t?dR:n.value;return e===r}function ej(n,e,t){let r=4,i=n.attrs,s=i!==null?rj(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!cr(r)&&!cr(c))return!1;if(o&&cr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!XB(n,c,t)||c===""&&e.length===1){if(cr(r))return!1;o=!0}}else if(r&8){if(i===null||!ZB(n,i,c,t)){if(cr(r))return!1;o=!0}}else{let u=e[++a],d=tj(c,i,N0(n),t);if(d===-1){if(cr(r))return!1;o=!0;continue}if(u!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(cr(r))return!1;o=!0}}}}return cr(r)||o}function cr(n){return(n&1)===0}function tj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return ij(e,n)}function hR(n,e,t=!1){for(let r=0;r<e.length;r++)if(ej(n,e[r],t))return!0;return!1}function nj(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function rj(n){for(let e=0;e<n.length;e++){let t=n[e];if(DB(t))return e}return n.length}function ij(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function sj(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function vx(n,e){return n?":not("+e.trim()+")":e}function oj(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!cr(o)&&(e+=vx(s,i),i=""),r=o,s=s||!cr(r);t++}return i!==""&&(e+=vx(s,i)),e}function aj(n){return n.map(oj).join(",")}function cj(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!cr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var fn={};function lj(n,e){return n.createText(e)}function uj(n,e,t){n.setValue(e,t)}function dj(n,e){return n.createComment(QB(e))}function fR(n,e,t){return n.createElement(e,t)}function Ff(n,e,t,r,i){n.insertBefore(e,t,r,i)}function pR(n,e,t){n.appendChild(e,t)}function Ex(n,e,t,r,i){r!==null?Ff(n,e,t,r,i):pR(n,e,t)}function hj(n,e,t,r){n.removeChild(null,e,t,r)}function fj(n,e,t){n.setAttribute(e,"style",t)}function pj(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function mR(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&TB(n,e,r),i!==null&&pj(n,e,i),s!==null&&fj(n,e,s)}function M0(n,e,t,r,i,s,o,a,c,u,d){let f=wt+r,m=f+i,g=mj(f,m),w=typeof u=="function"?u():u;return g[de]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function mj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:fn);return t}function gj(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=M0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function O0(n,e,t,r,i,s,o,a,c,u,d){let f=e.blueprint.slice();return f[or]=i,f[ye]=r|4|128|8|64|1024,(u!==null||n&&n[ye]&2048)&&(f[ye]|=2048),Iv(f),f[Nt]=f[Js]=n,f[Jt]=t,f[ci]=o||n&&n[ci],f[at]=a||n&&n[at],f[is]=c||n&&n[is]||null,f[un]=s,f[Fl]=jB(),f[Da]=d,f[yv]=u,f[vn]=e.type==2?n[vn]:f,f}function yj(n,e,t){let r=Nr(e,n),i=gj(t),s=n[ci].rendererFactory,o=F0(n,O0(n,i,null,gR(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function gR(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function yR(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function F0(n,e){return n[xa]?n[gv][jn]=e:n[xa]=e,n[gv]=e,e}function E(n=1){_R(Mt(),Te(),li()+n,!1)}function _R(n,e,t,r){if(!r)if((e[ye]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Tf(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Df(e,s,0,t)}cs(t)}var Yf=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Yf||{});function a0(n,e,t,r){let i=we(null);try{let[s,o,a]=n.inputs[t],c=null;(o&Yf.SignalBased)!==0&&(c=e[s][sn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):Ux(e,c,s,r)}finally{we(i)}}var Or=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Or||{}),_j;function L0(n,e){return _j(n,e)}var Ba=new Set,Qf=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Qf||{}),ao=new K(""),bx=new Set;function co(n){bx.has(n)||(bx.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var V0=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),vR=[0,1,2,3],ER=(()=>{class n{ngZone=M(Ne);scheduler=M(es);errorHandler=M(Ar,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(ao,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Je(16),this.executing=!0;for(let r of vR)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Je(17)}register(t){let{view:r}=t;r!==void 0?((r[Xs]??=[]).push(t),Na(r),r[ye]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Qf.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Lf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Xs];e&&(this.view[Xs]=e.filter(t=>t!==this))}};function lo(n,e){let t=e?.injector??M(Ge);return co("NgAfterNextRender"),Ej(n,t,e,!0)}function vj(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Ej(n,e,t,r){let i=e.get(V0);i.impl??=e.get(ER);let s=e.get(ao,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(zn):null,a=e.get(If,null,{optional:!0}),c=new Lf(i.impl,vj(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var bj=new K("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function bR(n,e,t){let r=n.get(bj);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function Ij(n,e){for(let[t,r]of e)bR(n,r.animateFns)}function Ix(n,e,t,r){let i=n?.[Vl]?.enter;e!==null&&i&&i.has(t.index)&&Ij(r,i)}function La(n,e,t,r,i,s,o,a){if(i!=null){let c,u=!1;ar(i)?c=i:kr(i)&&(u=!0,i=i[or]);let d=$n(i);n===0&&r!==null?(Ix(a,r,s,t),o==null?pR(e,r,d):Ff(e,r,d,o||null,!0)):n===1&&r!==null?(Ix(a,r,s,t),Ff(e,r,d,o||null,!0)):n===2?wx(a,s,t,f=>{hj(e,d,u,f)}):n===3&&wx(a,s,t,()=>{e.destroyNode(d)}),c!=null&&Nj(e,n,t,c,s,r,o)}}function wj(n,e){IR(n,e),e[or]=null,e[un]=null}function Sj(n,e,t,r,i,s){r[or]=i,r[un]=e,Jf(n,r,t,1,i,s)}function IR(n,e){e[ci].changeDetectionScheduler?.notify(9),Jf(n,e,e[at],2,null,null)}function Cj(n){let e=n[xa];if(!e)return qv(n[de],n);for(;e;){let t=null;if(kr(e))t=e[xa];else{let r=e[dn];r&&(t=r)}if(!t){for(;e&&!e[jn]&&e!==n;)kr(e)&&qv(e[de],e),e=e[Nt];e===null&&(e=n),kr(e)&&qv(e[de],e),t=e&&e[jn]}e=t}}function U0(n,e){let t=n[eo],r=t.indexOf(e);t.splice(r,1)}function wR(n,e){if(to(e))return;let t=e[at];t.destroyNode&&Jf(n,e,t,3,null,null),Cj(e)}function qv(n,e){if(to(e))return;let t=we(null);try{e[ye]&=-129,e[ye]|=256,e[An]&&Il(e[An]),Aj(n,e),Dj(n,e),e[de].type===1&&e[at].destroy();let r=e[ss];if(r!==null&&ar(e[Nt])){r!==e[Nt]&&U0(r,e);let i=e[Rr];i!==null&&i.detachView(n)}r0(e)}finally{we(t)}}function wx(n,e,t,r){let i=n?.[Vl];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Ba.add(n),bR(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let u=o.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),Tj(n,r)}else n&&Ba.delete(n),r(!1)},i)}function Tj(n,e){let t=n[Vl]?.running;if(t){t.then(()=>{n[Vl].running=void 0,Ba.delete(n),e(!0)});return}e(!1)}function Dj(n,e){let t=n.cleanup,r=e[Aa];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Aa]=null);let i=e[oi];if(i!==null){e[oi]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Ll];if(s!==null){e[Ll]=null;for(let o of s)o.destroy()}}function Aj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ro)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Je(4,a,c);try{c.call(a)}finally{Je(5,a,c)}}else{Je(4,i,s);try{s.call(i)}finally{Je(5,i,s)}}}}}function SR(n,e,t){return xj(n,e.parent,t)}function xj(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[or];if(as(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ur.None||i===ur.Emulated)return null}return Nr(r,t)}function CR(n,e,t){return kj(n,e,t)}function Rj(n,e,t){return n.type&40?Nr(n,t):null}var kj=Rj,Sx;function B0(n,e,t,r){let i=SR(n,r,e),s=e[at],o=r.parent||e[un],a=CR(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Ex(s,i,t[c],a,!1);else Ex(s,i,t,a,!1);Sx!==void 0&&Sx(s,r,e,t,i)}function Gl(n,e){if(e!==null){let t=e.type;if(t&3)return Nr(e,n);if(t&4)return c0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Gl(n,r);{let i=n[e.index];return ar(i)?c0(-1,i):$n(i)}}else{if(t&128)return Gl(n,e.next);if(t&32)return L0(e,n)()||$n(n[e.index]);{let r=TR(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Xi(n[vn]);return Gl(i,r)}else return Gl(n,e.next)}}}return null}function TR(n,e){if(e!==null){let r=n[vn][un],i=e.projection;return r.projection[i]}return null}function c0(n,e){let t=dn+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return Gl(r,i)}return e[os]}function j0(n,e,t,r,i,s,o){for(;t!=null;){let a=r[is];if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(o&&e===0&&(c&&Ua($n(c),r),t.flags|=2),!Wf(t))if(u&8)j0(n,e,t.child,r,i,s,!1),La(e,n,a,i,c,t,s,r);else if(u&32){let d=L0(t,r),f;for(;f=d();)La(e,n,a,i,f,t,s,r);La(e,n,a,i,c,t,s,r)}else u&16?DR(n,e,r,t,i,s):La(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function Jf(n,e,t,r,i,s){j0(t,r,n.firstChild,e,i,s,!1)}function Pj(n,e,t){let r=e[at],i=SR(n,t,e),s=t.parent||e[un],o=CR(s,t,e);DR(r,0,e,t,i,o)}function DR(n,e,t,r,i,s){let o=t[vn],c=o[un].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];La(e,n,t[is],i,d,r,s,t)}else{let u=c,d=o[Nt];eR(r)&&(u.flags|=128),j0(n,e,u,d,i,s,!0)}}function Nj(n,e,t,r,i,s,o){let a=r[os],c=$n(r);a!==c&&La(e,n,t,s,a,i,o);for(let u=dn;u<r.length;u++){let d=r[u];Jf(d[de],d,n,e,s,a)}}function Mj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Or.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Or.Important),n.setStyle(t,r,i,s))}}function AR(n,e,t,r,i){let s=li(),o=r&2;try{cs(-1),o&&e.length>wt&&_R(n,e,wt,!1),Je(o?2:0,i,t),t(r,i)}finally{cs(s),Je(o?3:1,i,t)}}function Zf(n,e,t){jj(n,e,t),(t.flags&64)===64&&$j(n,e,t)}function Xf(n,e,t=Nr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function Oj(n,e,t,r){let s=r.get(aR,oR)||t===ur.ShadowDom||t===ur.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return Fj(o),o}function Fj(n){Lj(n)}var Lj=()=>null;function Vj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function xR(n,e,t,r,i,s){let o=e[de];if(H0(n,o,e,t,r)){as(n)&&Bj(e,n.index);return}n.type&3&&(t=Vj(t)),Uj(n,e,t,r,i,s)}function Uj(n,e,t,r,i,s){if(n.type&3){let o=Nr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function Bj(n,e){let t=Hn(e,n);t[ye]&16||(t[ye]|=64)}function jj(n,e,t){let r=t.directiveStart,i=t.directiveEnd;as(t)&&yj(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Mf(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Yl(e,n,o,t);if(Ua(c,e),s!==null&&zj(e,o-r,c,a,t,s),Pr(a)){let u=Hn(t.index,e);u[Jt]=Yl(e,n,o,t)}}}function $j(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=tx();try{cs(s);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];yf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Hj(c,u)}}finally{cs(-1),yf(o)}}function Hj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function $0(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];hR(e,s.selectors,!1)&&(r??=[],Pr(s)?r.unshift(s):r.push(s))}return r}function zj(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],u=o[a+1];a0(r,t,c,u)}}function RR(n,e,t,r,i){let s=wt+t,o=e[de],a=i(o,e,n,r,t);e[s]=a,Ma(n,!0);let c=n.type===2;return c?(mR(e[at],a,n),(GA()===0||Ra(n))&&Ua(a,e),qA()):Ua(a,e),bf()&&(!c||!Wf(n))&&B0(o,e,a,n),n}function kR(n){let e=n;return xv()?Rv():(e=e.parent,Ma(e,!1)),e}function Gj(n,e){let t=n[is];if(!t)return;let r;try{r=t.get(Gn,null)}catch{r=null}r?.(e)}function H0(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let u=o[c],d=o[c+1],f=e.data[u];a0(f,t[u],d,i),a=!0}if(s)for(let c of s){let u=t[c],d=e.data[c];a0(d,u,r,i),a=!0}return a}function qj(n,e){let t=Hn(e,n),r=t[de];Wj(r,t);let i=t[or];i!==null&&t[Da]===null&&(t[Da]=cR(i,t[is])),Je(18),z0(r,t,t[Jt]),Je(19,t[Jt])}function Wj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function z0(n,e,t){vf(e);try{let r=n.viewQuery;r!==null&&s0(1,r,t);let i=n.template;i!==null&&AR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Rr]?.finishViewCreation(n),n.staticContentQueries&&lR(n,e),n.staticViewQueries&&s0(2,n.viewQuery,t);let s=n.components;s!==null&&Kj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ye]&=-5,Ef()}}function Kj(n,e){for(let t=0;t<e.length;t++)qj(n,e[t])}function PR(n,e,t,r){let i=we(null);try{let s=e.tView,a=n[ye]&4096?4096:16,c=O0(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[ss]=u;let d=n[Rr];return d!==null&&(c[Rr]=d.createEmbeddedView(s)),z0(s,c,t),c}finally{we(i)}}function l0(n,e){return!e||e.firstChild===null||eR(n)}function Ql(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push($n(s)),ar(s)&&NR(s,r);let o=t.type;if(o&8)Ql(n,e,t.child,r);else if(o&32){let a=L0(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=TR(e,t);if(Array.isArray(a))r.push(...a);else{let c=Xi(e[vn]);Ql(c[de],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function NR(n,e){for(let t=dn;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&Ql(r[de],r,i,e)}n[os]!==n[or]&&e.push(n[os])}function MR(n){if(n[Xs]!==null){for(let e of n[Xs])e.impl.addSequence(e);n[Xs].length=0}}var OR=[];function Yj(n){return n[An]??Qj(n)}function Qj(n){let e=OR.pop()??Object.create(Zj);return e.lView=n,e}function Jj(n){n.lView[An]!==n&&(n.lView=null,OR.push(n))}var Zj=ee(F({},vl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Na(n.lView)},consumerOnSignalRead(){this.lView[An]=this}});function Xj(n){let e=n[An]??Object.create(e3);return e.lView=n,e}var e3=ee(F({},vl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Xi(n.lView);for(;e&&!FR(e[de]);)e=Xi(e);e&&wv(e)},consumerOnSignalRead(){this.lView[An]=this}});function FR(n){return n.type!==2}function LR(n){if(n[Ll]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Ll])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ye]&8192)}}var t3=100;function VR(n,e=0){let r=n[ci].rendererFactory,i=!1;i||r.begin?.();try{n3(n,e)}finally{i||r.end?.()}}function n3(n,e){let t=kv();try{Pv(!0),u0(n,e);let r=0;for(;Bl(n);){if(r===t3)throw new B(103,!1);r++,u0(n,1)}}finally{Pv(t)}}function r3(n,e,t,r){if(to(e))return;let i=e[ye],s=!1,o=!1;vf(e);let a=!0,c=null,u=null;s||(FR(n)?(u=Yj(e),c=bl(u)):yh()===null?(a=!1,u=Xj(e),c=bl(u)):e[An]&&(Il(e[An]),e[An]=null));try{Iv(e),ZA(n.bindingStartIndex),t!==null&&AR(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let g=n.preOrderCheckHooks;g!==null&&Tf(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Df(e,g,0,null),zv(e,0)}if(o||i3(e),LR(e),UR(e,0),n.contentQueries!==null&&lR(n,e),!s)if(d){let g=n.contentCheckHooks;g!==null&&Tf(e,g)}else{let g=n.contentHooks;g!==null&&Df(e,g,1),zv(e,1)}o3(n,e);let f=n.components;f!==null&&jR(e,f,0);let m=n.viewQuery;if(m!==null&&s0(2,m,r),!s)if(d){let g=n.viewCheckHooks;g!==null&&Tf(e,g)}else{let g=n.viewHooks;g!==null&&Df(e,g,2),zv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[df]){for(let g of e[df])g();e[df]=null}s||(MR(e),e[ye]&=-73)}catch(d){throw s||Na(e),d}finally{u!==null&&(_h(u,c),a&&Jj(u)),Ef()}}function UR(n,e){for(let t=nR(n);t!==null;t=rR(t))for(let r=dn;r<t.length;r++){let i=t[r];BR(i,e)}}function i3(n){for(let e=nR(n);e!==null;e=rR(e)){if(!(e[ye]&2))continue;let t=e[eo];for(let r=0;r<t.length;r++){let i=t[r];wv(i)}}}function s3(n,e,t){Je(18);let r=Hn(e,n);BR(r,t),Je(19,r[Jt])}function BR(n,e){ff(n)&&u0(n,e)}function u0(n,e){let r=n[de],i=n[ye],s=n[An],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&vh(s)),o||=!1,s&&(s.dirty=!1),n[ye]&=-9217,o)r3(r,n,r.template,n[Jt]);else if(i&8192){let a=we(null);try{LR(n),UR(n,1);let c=r.components;c!==null&&jR(n,c,1),MR(n)}finally{we(a)}}}function jR(n,e,t){for(let r=0;r<e.length;r++)s3(n,e[r],t)}function o3(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)cs(~i);else{let s=i,o=t[++r],a=t[++r];ex(o,s);let c=e[s];Je(24,c),a(2,c),Je(25,c)}}}finally{cs(-1)}}function G0(n,e){let t=kv()?64:1088;for(n[ci].changeDetectionScheduler?.notify(e);n;){n[ye]|=t;let r=Xi(n);if(ka(n)&&!r)return n;n=r}return null}function $R(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function HR(n,e,t,r=!0){let i=e[de];if(a3(i,e,n,t),r){let o=c0(t,n),a=e[at],c=a.parentNode(n[os]);c!==null&&Sj(i,n[un],a,e,c,o)}let s=e[Da];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function d0(n,e){if(n.length<=dn)return;let t=dn+e,r=n[t];if(r){let i=r[ss];i!==null&&i!==n&&U0(i,r),e>0&&(n[t-1][jn]=r[jn]);let s=Ml(n,dn+e);wj(r[de],r);let o=s[Rr];o!==null&&o.detachView(s[de]),r[Nt]=null,r[jn]=null,r[ye]&=-129}return r}function a3(n,e,t,r){let i=dn+r,s=t.length;r>0&&(t[i-1][jn]=e),r<s-dn?(e[jn]=t[i],av(t,dn+r,e)):(t.push(e),e[jn]=null),e[Nt]=t;let o=e[ss];o!==null&&t!==o&&zR(o,e);let a=e[Rr];a!==null&&a.insertView(n),pf(e),e[ye]|=128}function zR(n,e){let t=n[eo],r=e[Nt];if(kr(r))n[ye]|=2;else{let i=r[Nt][vn];e[vn]!==i&&(n[ye]|=2)}t===null?n[eo]=[e]:t.push(e)}var ls=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[de];return Ql(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Jt]}set context(e){this._lView[Jt]=e}get destroyed(){return to(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Nt];if(ar(e)){let t=e[Ul],r=t?t.indexOf(this):-1;r>-1&&(d0(e,r),Ml(t,r))}this._attachedToViewContainer=!1}wR(this._lView[de],this._lView)}onDestroy(e){Sv(this._lView,e)}markForCheck(){G0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ye]&=-129}reattach(){pf(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,VR(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ka(this._lView),t=this._lView[ss];t!==null&&!e&&U0(t,this._lView),IR(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;let t=ka(this._lView),r=this._lView[ss];r!==null&&!t&&zR(r,this._lView),pf(this._lView)}};var dr=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=c3;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=PR(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ls(s)}}return n})();function c3(){return q0(hn(),Te())}function q0(n,e){return n.type&4?new dr(e,n,Ha(n,e)):null}function tu(n,e,t,r,i){let s=n.data[e];if(s===null)s=l3(n,e,t,r,i),XA()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=QA();s.injectorIndex=o===null?-1:o.injectorIndex}return Ma(s,!0),s}function l3(n,e,t,r,i){let s=Av(),o=xv(),a=o?s:s&&s.parent,c=n.data[e]=d3(n,a,t,e,r,i);return u3(n,c,s,o),c}function u3(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function d3(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Dv()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var h3=()=>null;function h0(n,e){return h3(n,e)}var GR=class{},ep=class{},f0=class{resolveComponentFactory(e){throw new B(917,!1)}},nu=class{static NULL=new f0},En=class{},fi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>f3()}return n})();function f3(){let n=Te(),e=hn(),t=Hn(e.index,n);return(kr(t)?t:n)[at]}var qR=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var xf={},p0=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,xf,r);return i!==xf||t===xf?i:this.parentInjector.get(e,t,r)}};function Cx(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=sf(i,a);else if(s==2){let c=a,u=e[++o];r=sf(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function se(n,e=0){let t=Te();if(t===null)return te(n,e);let r=hn();return Jx(r,t,Ht(n),e)}function W0(){let n="invalid";throw new Error(n)}function WR(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,u=null;for(let d of o)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(o);break}g3(n,e,t,a,s,c,u)}s!==null&&r!==null&&p3(t,r,s)}function p3(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new B(-301,!1);r.push(e[i],s)}}function m3(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function g3(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let m=0;m<a;m++){let g=r[m];!c&&Pr(g)&&(c=!0,m3(n,t,m)),t0(Mf(t,e),n,g.type)}I3(t,n.data.length,a);for(let m=0;m<a;m++){let g=r[m];g.providersResolver&&g.providersResolver(g)}let u=!1,d=!1,f=yR(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let g=r[m];if(t.mergedAttrs=Kl(t.mergedAttrs,g.hostAttrs),_3(n,t,e,f,g),b3(f,g,i),o!==null&&o.has(g)){let[x,P]=o.get(g);t.directiveToIndex.set(g.type,[f,x+t.directiveStart,P+t.directiveStart])}else(s===null||!s.has(g))&&t.directiveToIndex.set(g.type,f);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let w=g.type.prototype;!u&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(w.ngOnChanges||w.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}y3(n,t,s)}function y3(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Tx(0,e,i,r),Tx(1,e,i,r),Ax(e,r,!1);else{let s=t.get(i);Dx(0,e,s,r),Dx(1,e,s,r),Ax(e,r,!0)}}}function Tx(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),KR(e,s)}}function Dx(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),KR(e,o)}}function KR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Ax(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||N0(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let u=s[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){o??=[],o.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function _3(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Zi(i.type,!0)),o=new ro(s,Pr(i),se,null);n.blueprint[r]=o,t[r]=o,v3(n,e,r,yR(n,t,i.hostVars,fn),i)}function v3(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;E3(o)!=a&&o.push(a),o.push(t,r,s)}}function E3(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function b3(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pr(e)&&(t[""]=n)}}function I3(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function K0(n,e,t,r,i,s,o,a){let c=e[de],u=c.consts,d=Pa(u,o),f=tu(c,n,t,r,d);return s&&WR(c,e,f,Pa(u,a),i),f.mergedAttrs=Kl(f.mergedAttrs,f.attrs),f.attrs!==null&&Cx(f,f.attrs,!1),f.mergedAttrs!==null&&Cx(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function Y0(n,e){Hx(n,e),_v(e)&&n.queries.elementEnd(e)}function Q0(n){return QR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function YR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function QR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function tp(n,e,t){return n[e]=t}function w3(n,e){return n[e]}function Fr(n,e,t){if(t===fn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function J0(n,e,t,r){let i=Fr(n,e,t);return Fr(n,e+1,r)||i}function S3(n,e,t,r,i){let s=J0(n,e,t,r);return Fr(n,e+2,i)||s}function Wv(n,e,t){return function r(i){let s=as(n)?Hn(n.index,e):e;G0(s,5);let o=e[Jt],a=xx(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=xx(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function xx(n,e,t,r){let i=we(null);try{return Je(6,e,t),t(r)!==!1}catch(s){return Gj(n,s),!1}finally{Je(7,e,t),we(i)}}function C3(n,e,t,r,i,s,o,a){let c=Ra(n),u=!1,d=null;if(!r&&c&&(d=D3(e,t,s,n.index)),d!==null){let f=d.__ngLastListenerFn__||d;f.__ngNextListenerFn__=o,d.__ngLastListenerFn__=o,u=!0}else{let f=Nr(n,t),m=r?r(f):f;GB(t,m,s,a);let g=i.listen(m,s,a);if(!T3(s)){let w=r?x=>r($n(x[n.index])):n.index;JR(w,e,t,s,a,g,!1)}}return u}function T3(n){return n.startsWith("animation")||n.startsWith("transition")}function D3(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Aa],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function JR(n,e,t,r,i,s,o){let a=e.firstCreatePass?Tv(e):null,c=Cv(t),u=c.length;c.push(i,s),a&&a.push(r,n,u,(u+1)*(o?-1:1))}function Rx(n,e,t,r,i,s){let o=e[t],a=e[de],u=a.data[t].outputs[r],f=o[u].subscribe(s);JR(n.index,a,e,i,s,f,!0)}var m0=Symbol("BINDING");var Vf=class extends nu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=xr(e);return new us(t,this.ngModule)}};function A3(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Yf.SignalBased)!==0};return i&&(s.transform=i),s})}function x3(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function R3(n,e,t){let r=e instanceof pt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new p0(t,r):t}function k3(n){let e=n.get(En,null);if(e===null)throw new B(407,!1);let t=n.get(qR,null),r=n.get(es,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function P3(n,e){let t=ZR(n);return fR(e,t,t==="svg"?VA:t==="math"?UA:null)}function ZR(n){return(n.selectors[0][0]||"div").toLowerCase()}var us=class extends ep{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=A3(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=x3(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=aj(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){Je(22);let a=we(null);try{let c=this.componentDef,u=N3(r,c,o,s),d=R3(c,i||this.ngModule,e),f=k3(d),m=f.rendererFactory.createRenderer(null,c),g=r?Oj(m,r,c.encapsulation,d):P3(c,m),w=o?.some(kx)||s?.some(U=>typeof U!="function"&&U.bindings.some(kx)),x=O0(null,u,null,512|gR(c),null,null,f,m,d,null,cR(g,d,!0));x[wt]=g,vf(x);let P=null;try{let U=K0(wt,x,2,"#host",()=>u.directiveRegistry,!0,0);mR(m,g,U),Ua(g,x),Zf(u,x,U),P0(u,U,x),Y0(u,U),t!==void 0&&O3(U,this.ngContentSelectors,t),P=Hn(U.index,x),x[Jt]=P[Jt],z0(u,x,null)}catch(U){throw P!==null&&r0(P),r0(x),U}finally{Je(23),Ef()}return new Uf(this.componentType,x,!!w)}finally{we(a)}}};function N3(n,e,t,r){let i=n?["ng-version","21.0.0"]:cj(e.selectors[0]),s=null,o=null,a=0;if(t)for(let d of t)a+=d[m0].requiredVars,d.create&&(d.targetIdx=0,(s??=[]).push(d)),d.update&&(d.targetIdx=0,(o??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let f=r[d];if(typeof f!="function")for(let m of f.bindings){a+=m[m0].requiredVars;let g=d+1;m.create&&(m.targetIdx=g,(s??=[]).push(m)),m.update&&(m.targetIdx=g,(o??=[]).push(m))}}let c=[e];if(r)for(let d of r){let f=typeof d=="function"?d:d.type,m=dv(f);c.push(m)}return M0(0,null,M3(s,o),1,a,c,null,null,null,[i],null)}function M3(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function kx(n){let e=n[m0].kind;return e==="input"||e==="twoWay"}var Uf=class extends GR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=hf(t[de],wt),this.location=Ha(this._tNode,t),this.instance=Hn(this._tNode.index,t)[Jt],this.hostView=this.changeDetectorRef=new ls(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=H0(r,i[de],i,e,t);this.previousInputValues.set(e,t);let o=Hn(r.index,i);G0(o,1)}get injector(){return new no(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function O3(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var qn=(()=>{class n{static __NG_ELEMENT_ID__=F3}return n})();function F3(){let n=hn();return e1(n,Te())}var L3=qn,XR=class extends L3{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ha(this._hostTNode,this._hostLView)}get injector(){return new no(this._hostTNode,this._hostLView)}get parentInjector(){let e=A0(this._hostTNode,this._hostLView);if(Gx(e)){let t=Pf(e,this._hostLView),r=kf(e),i=t[de].data[r+8];return new no(i,t)}else return new no(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Px(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-dn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=h0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,l0(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!_B(e),u;if(c)u=t;else{let P=t||{};u=P.index,r=P.injector,i=P.projectableNodes,s=P.environmentInjector||P.ngModuleRef,o=P.directives,a=P.bindings}let d=c?e:new us(xr(e)),f=r||this.parentInjector;if(!s&&d.ngModule==null){let U=(c?f:this.parentInjector).get(pt,null);U&&(s=U)}let m=xr(d.componentType??{}),g=h0(this._lContainer,m?.id??null),w=g?.firstChild??null,x=d.create(f,i,w,s,o,a);return this.insertImpl(x.hostView,u,l0(this._hostTNode,g)),x}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(jA(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Nt],u=new XR(c,c[un],c[Nt]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return HR(o,i,s,r),e.attachToViewContainerRef(),av(Kv(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Px(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=d0(this._lContainer,t);r&&(Ml(Kv(this._lContainer),t),wR(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=d0(this._lContainer,t);return r&&Ml(Kv(this._lContainer),t)!=null?new ls(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Px(n){return n[Ul]}function Kv(n){return n[Ul]||(n[Ul]=[])}function e1(n,e){let t,r=e[n.index];return ar(r)?t=r:(t=$R(r,e,null,n),e[n.index]=t,F0(e,t)),U3(t,e,n,r),new XR(t,n,e)}function V3(n,e){let t=n[at],r=t.createComment(""),i=Nr(e,n),s=t.parentNode(i);return Ff(t,s,r,t.nextSibling(i),!1),r}var U3=$3,B3=()=>!1;function j3(n,e,t){return B3(n,e,t)}function $3(n,e,t,r){if(n[os])return;let i;t.type&8?i=$n(r):i=V3(e,t),n[os]=i}var g0=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},y0=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Z0(e,t).matches!==null&&this.queries[t].setDirty()}},_0=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=Q3(e):this.predicate=e}},v0=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},E0=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,H3(t,s)),this.matchTNodeWithReadOption(e,t,Af(t,e,s,!1,!1))}else r===dr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Af(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Gt||i===qn||i===dr&&t.type&4)this.addMatch(t.index,-2);else{let s=Af(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function H3(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function z3(n,e){return n.type&11?Ha(n,e):n.type&4?q0(n,e):null}function G3(n,e,t,r){return t===-1?z3(e,n):t===-2?q3(n,e,r):Yl(n,n[de],t,e)}function q3(n,e,t){if(t===Gt)return Ha(e,n);if(t===dr)return q0(e,n);if(t===qn)return e1(e,n)}function t1(n,e,t,r){let i=e[Rr].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let d=s[u];a.push(G3(e,d,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function b0(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=t1(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let u=s[a+1],d=e[-c];for(let f=dn;f<d.length;f++){let m=d[f];m[ss]===m[Nt]&&b0(m[de],m,u,r)}if(d[eo]!==null){let f=d[eo];for(let m=0;m<f.length;m++){let g=f[m];b0(g[de],g,u,r)}}}}}return r}function W3(n,e){return n[Rr].queries[e].queryList}function K3(n,e,t){let r=new Of((t&4)===4);return zA(n,e,r,r.destroy),(e[Rr]??=new y0).queries.push(new g0(r))-1}function Y3(n,e,t){let r=Mt();return r.firstCreatePass&&(J3(r,new _0(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),K3(r,Te(),e)}function Q3(n){return n.split(",").map(e=>e.trim())}function J3(n,e,t){n.queries===null&&(n.queries=new v0),n.queries.track(new E0(e,t))}function Z0(n,e){return n.queries.getByIndex(e)}function Z3(n,e){let t=n[de],r=Z0(t,e);return r.crossesNgTemplate?b0(t,n,e,[]):t1(t,n,r,e)}var I0=new Map,X3=new Set;async function n1(n){let e=I0;I0=new Map;let t=new Map;function r(s){let o=t.get(s);if(o)return o;let a=n(s).then(c=>e4(s,c));return t.set(s,a),a}let i=Array.from(e).map(async([s,o])=>{if(o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");let a=[];o.templateUrl&&a.push(r(o.templateUrl).then(f=>{o.template=f}));let c=typeof o.styles=="string"?[o.styles]:o.styles??[];o.styles=c;let{styleUrl:u,styleUrls:d}=o;if(u&&(d=[u],o.styleUrl=void 0),d?.length){let f=Promise.all(d.map(m=>r(m))).then(m=>{c.push(...m),o.styleUrls=void 0});a.push(f)}await Promise.all(a),X3.delete(s)});await Promise.all(i)}function r1(){return I0.size===0}async function e4(n,e){if(typeof e=="string")return e;if(e.status!==void 0&&e.status!==200)throw new B(918,!1);return e.text()}var io=class{},np=class{};var Jl=class extends io{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Vf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=uv(e);this._bootstrapComponents=uR(s.bootstrap),this._r3Injector=Lv(e,t,[{provide:io,useValue:this},{provide:nu,useValue:this.componentFactoryResolver},...r],ai(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zl=class extends np{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Jl(this.moduleType,e,[])}};function i1(n,e,t){return new Jl(n,e,t,!1)}var Bf=class extends io{injector;componentFactoryResolver=new Vf(this);instance=null;constructor(e){super();let t=new Ys([...e.providers,{provide:io,useValue:this},{provide:nu,useValue:this.componentFactoryResolver}],e.parent||Ta(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function za(n,e,t=null){return new Bf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var t4=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=hv(!1,t.type),i=r.length>0?za([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(te(pt))})}return n})();function mt(n){return $a(()=>{let e=s1(n),t=ee(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===x0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(t4).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ur.Emulated,styles:n.styles||cn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&co("NgStandalone"),o1(t);let r=n.dependencies;return t.directiveDefs=Nx(r,n4),t.pipeDefs=Nx(r,PA),t.id=s4(t),t})}function n4(n){return xr(n)||dv(n)}function ct(n){return $a(()=>({type:n.type,bootstrap:n.bootstrap||cn,declarations:n.declarations||cn,imports:n.imports||cn,exports:n.exports||cn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function r4(n,e){if(n==null)return rs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=Yf.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function i4(n){if(n==null)return rs;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ot(n){return $a(()=>{let e=s1(n);return o1(e),e})}function rp(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function s1(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||rs,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||cn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:r4(n.inputs,e),outputs:i4(n.outputs),debugInfo:null}}function o1(n){n.features?.forEach(e=>e(n))}function Nx(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function s4(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function o4(n){return Object.getPrototypeOf(n.prototype).constructor}function ds(n){let e=o4(n.type),t=!0,r=[n];for(;e;){let i;if(Pr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Yv(n.inputs),o.declaredInputs=Yv(n.declaredInputs),o.outputs=Yv(n.outputs);let a=i.hostBindings;a&&d4(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&l4(n,c),u&&u4(n,u),a4(n,i),IA(n.outputs,i.outputs),Pr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===ds&&(t=!1)}}e=Object.getPrototypeOf(e)}c4(r)}function a4(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function c4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Kl(i.hostAttrs,t=Kl(t,i.hostAttrs))}}function Yv(n){return n===rs?{}:n===cn?[]:n}function l4(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function u4(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function d4(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function a1(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Kl(n.mergedAttrs,n.attrs);let d=n.tView=M0(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ma(n,!1);let c=p4(t,e,n,r);bf()&&B0(t,e,c,n),Ua(c,e);let u=$R(c,e,c,n);e[r+wt]=u,F0(e,u),j3(u,n,e)}function h4(n,e,t,r,i,s,o,a,c,u,d){let f=t+wt,m;return e.firstCreatePass?(m=tu(e,f,4,o||null,a||null),mf()&&WR(e,n,m,Pa(e.consts,u),$0),Hx(e,m)):m=e.data[f],a1(m,n,e,t,r,i,s,c),Ra(m)&&Zf(e,n,m),u!=null&&Xf(n,m,d),m}function f4(n,e,t,r,i,s,o,a,c,u,d){let f=t+wt,m;if(e.firstCreatePass){if(m=tu(e,f,4,o||null,a||null),u!=null){let g=Pa(e.consts,u);m.localNames=[];for(let w=0;w<g.length;w+=2)m.localNames.push(g[w],-1)}}else m=e.data[f];return a1(m,n,e,t,r,i,s,c),u!=null&&Xf(n,m,d),m}function $(n,e,t,r,i,s,o,a){let c=Te(),u=Mt(),d=Pa(u.consts,s);return h4(c,u,n,e,t,r,i,d,void 0,o,a),$}var p4=m4;function m4(n,e,t,r){return $l(!0),e[at].createComment("")}var X0=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function c1(n){return typeof n=="function"&&n[sn]!==void 0}function eE(n){return c1(n)&&typeof n.set=="function"}var ip=new K(""),sp=new K(""),ru=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,mv()&&(this._destroyRef=M(zn,{optional:!0})??void 0),tE||(u1(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(te(Ne),te(l1),te(sp))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),l1=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return tE?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function u1(n){tE=n}var tE;function pi(n){return!!n&&typeof n.then=="function"}function op(n){return!!n&&typeof n.subscribe=="function"}var nE=new K("");function ap(n){return sr([{provide:nE,multi:!0,useValue:n}])}var rE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(nE,{optional:!0})??[];injector=M(Ge);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=It(this.injector,i);if(pi(s))t.push(s);else if(op(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cp=new K("");function d1(){p_(()=>{let n="";throw new B(600,n)})}function h1(n){return n.isBoundToModule}var g4=10;function iE(n,e){return Array.isArray(e)?e.reduce(iE,n):F(F({},n),e)}var Wn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Gn);afterRenderManager=M(V0);zonelessEnabled=M(Hl);rootEffectScheduler=M(Hv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new _e;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(ui);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Me(t=>!t))}constructor(){M(ao,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(pt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ge.NULL){return this._injector.get(Ne).run(()=>{Je(10);let o=t instanceof ep;if(!this._injector.get(rE).done){let w="";throw new B(405,w)}let c;o?c=t:c=this._injector.get(nu).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=h1(c)?void 0:this._injector.get(io),d=r||c.selector,f=c.create(i,[],d,u),m=f.location.nativeElement,g=f.injector.get(ip,null);return g?.registerApplication(m),f.onDestroy(()=>{this.detachView(f.hostView),ql(this.components,f),g?.unregisterApplication(m)}),this._loadComponent(f),Je(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Je(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Qf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new B(101,!1);let t=we(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,we(t),this.afterTick.next(),Je(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(En,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<g4;)Je(14),this.synchronizeOnce(),Je(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Bl(i))continue;let s=r&&!this.zonelessEnabled?0:1;VR(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Bl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ql(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(cp,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ql(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ql(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Voe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function N(n,e,t){let r=Te(),i=jl();if(Fr(r,i,e)){let s=Mt(),o=Fv();xR(o,r,n,e,r[at],t)}return N}function w0(n,e,t,r,i){H0(e,n,t,i?"class":"style",r)}function y(n,e,t,r){let i=Te(),s=i[de],o=n+wt,a=s.firstCreatePass?K0(o,i,2,e,$0,mf(),t,r):s.data[o];if(RR(a,i,n,e,y4),Ra(a)){let c=i[de];Zf(c,i,a),P0(c,a,i)}return r!=null&&Xf(i,a),y}function v(){let n=Mt(),e=hn(),t=kR(e);return n.firstCreatePass&&Y0(n,t),KA(t)&&YA(),WA(),t.classesWithoutHost!=null&&SB(t)&&w0(n,t,Te(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&CB(t)&&w0(n,t,Te(),t.stylesWithoutHost,!1),v}function ie(n,e,t,r){return y(n,e,t,r),v(),ie}var y4=(n,e,t,r,i)=>($l(!0),fR(e[at],r,ax()));function lp(n,e,t){let r=Te(),i=r[de],s=n+wt,o=i.firstCreatePass?K0(s,r,8,"ng-container",$0,mf(),e,t):i.data[s];if(RR(o,r,n,"ng-container",_4),Ra(o)){let a=r[de];Zf(a,r,o),P0(a,o,r)}return t!=null&&Xf(r,o),lp}function up(){let n=Mt(),e=hn(),t=kR(e);return n.firstCreatePass&&Y0(n,t),up}var _4=(n,e,t,r,i)=>($l(!0),dj(e[at],""));function ve(){return Te()}var zl=void 0;function v4(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var E4=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",zl,zl,zl],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",v4],Wl={};function sE(n,e,t){typeof e!="string"&&(t=e,e=n[di.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Wl[e]=n,t&&(Wl[e][di.ExtraData]=t)}function dp(n){let e=b4(n),t=Mx(e);if(t)return t;let r=e.split("-")[0];if(t=Mx(r),t)return t;if(r==="en")return E4;throw new B(701,!1)}function Mx(n){return n in Wl||(Wl[n]=ln.ng&&ln.ng.common&&ln.ng.common.locales&&ln.ng.common.locales[n]),Wl[n]}var di=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(di||{});function b4(n){return n.toLowerCase().replace(/_/g,"-")}var iu="en-US";var I4=iu;function f1(n){typeof n=="string"&&(I4=n.toLowerCase().replace(/_/g,"-"))}function q(n,e,t){let r=Te(),i=Mt(),s=hn();return p1(i,r,r[at],s,n,e,t),q}function p1(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=Wv(r,e,s),C3(r,n,e,o,t,i,s,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let f=0;f<d.length;f+=2){let m=d[f],g=d[f+1];c??=Wv(r,e,s),Rx(r,e,m,g,i,c)}if(u&&u.length)for(let f of u)c??=Wv(r,e,s),Rx(r,e,f,i,i,c)}}function L(n=1){return ox(n)}function w4(n,e){let t=null,r=nj(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?hR(n,s,!0):sj(r,s))return i}return t}function hp(n){let e=Te()[vn][un];if(!e.projection){let t=n?n.length:1,r=e.projection=RA(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?w4(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function fp(n,e=0,t,r,i,s){let o=Te(),a=Mt(),c=r?n+1:null;c!==null&&f4(o,a,c,r,i,s,null,t);let u=tu(a,wt+n,16,null,t||null);u.projection===null&&(u.projection=e),Rv();let f=!o[Da]||Dv();o[vn][un].projection[u.projection]===null&&c!==null?S4(o,a,c):f&&!Wf(u)&&Pj(a,o,u)}function S4(n,e,t){let r=wt+t,i=e.data[r],s=n[r],o=h0(s,i.tView.ssrId),a=PR(n,i,void 0,{dehydratedView:o});HR(s,a,0,l0(i,o))}function Ga(n,e,t){Y3(n,e,t)}function uo(n){let e=Te(),t=Mt(),r=Nv();_f(r+1);let i=Z0(t,r);if(n.dirty&&BA(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=Z3(e,r);n.reset(s,VB),n.notifyOnChanges()}return!0}return!1}function ho(){return W3(Te(),Nv())}function Sf(n,e){return n<<17|e<<2}function so(n){return n>>17&32767}function C4(n){return(n&2)==2}function T4(n,e){return n&131071|e<<17}function S0(n){return n|2}function ja(n){return(n&131068)>>2}function Qv(n,e){return n&-131069|e<<2}function D4(n){return(n&1)===1}function C0(n){return n|1}function A4(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=so(o),c=ja(o);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Sa(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let m=so(n[a+1]);n[r+1]=Sf(m,a),m!==0&&(n[m+1]=Qv(n[m+1],r)),n[a+1]=T4(n[a+1],r)}else n[r+1]=Sf(a,0),a!==0&&(n[a+1]=Qv(n[a+1],r)),a=r;else n[r+1]=Sf(c,0),a===0?a=r:n[c+1]=Qv(n[c+1],r),c=r;u&&(n[r+1]=S0(n[r+1])),Ox(n,d,r,!0),Ox(n,d,r,!1),x4(e,d,n,r,s),o=Sf(a,c),s?e.classBindings=o:e.styleBindings=o}function x4(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Sa(s,e)>=0&&(t[r+1]=C0(t[r+1]))}function Ox(n,e,t,r){let i=n[t+1],s=e===null,o=r?so(i):ja(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],u=n[o+1];R4(c,e)&&(a=!0,n[o+1]=r?C0(u):S0(u)),o=r?so(u):ja(u)}a&&(n[t+1]=r?S0(i):C0(i))}function R4(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Sa(n,e)>=0:!1}var lr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function k4(n){return n.substring(lr.key,lr.keyEnd)}function P4(n){return N4(n),m1(n,g1(n,0,lr.textEnd))}function m1(n,e){let t=lr.textEnd;return t===e?-1:(e=lr.keyEnd=M4(n,lr.key=e,t),g1(n,e,t))}function N4(n){lr.key=0,lr.keyEnd=0,lr.value=0,lr.valueEnd=0,lr.textEnd=n.length}function g1(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function M4(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Et(n,e,t){return y1(n,e,t,!1),Et}function Re(n,e){return y1(n,e,null,!0),Re}function oE(n){F4($4,O4,n,!0)}function O4(n,e){for(let t=P4(e);t>=0;t=m1(e,t))lf(n,k4(e),!0)}function y1(n,e,t,r){let i=Te(),s=Mt(),o=gf(2);if(s.firstUpdatePass&&v1(s,n,o,r),e!==fn&&Fr(i,o,e)){let a=s.data[li()];E1(s,a,i,i[at],n,i[o+1]=z4(e,t),r,o)}}function F4(n,e,t,r){let i=Mt(),s=gf(2);i.firstUpdatePass&&v1(i,null,s,r);let o=Te();if(t!==fn&&Fr(o,s,t)){let a=i.data[li()];if(b1(a,r)&&!_1(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=sf(c,t||"")),w0(i,a,o,t,r)}else H4(i,a,o,o[at],o[s+1],o[s+1]=j4(n,e,t),r,s)}}function _1(n,e){return e>=n.expandoStartIndex}function v1(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[li()],o=_1(n,t);b1(s,r)&&e===null&&!o&&(e=!1),e=L4(i,s,e,r),A4(i,s,e,t,o,r)}}function L4(n,e,t,r){let i=nx(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Jv(null,n,e,t,r),t=Xl(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Jv(i,n,e,t,r),s===null){let c=V4(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Jv(null,n,e,c[1],r),c=Xl(c,e.attrs,r),U4(n,e,r,c))}else s=B4(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function V4(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ja(r)!==0)return n[so(r)]}function U4(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[so(i)]=r}function B4(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Xl(r,o,t)}return Xl(r,e.attrs,t)}function Jv(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Xl(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Xl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),lf(n,o,t?!0:e[++s]))}return n===void 0?null:n}function j4(n,e,t){if(t==null||t==="")return cn;let r=[],i=Kf(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function $4(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&lf(n,r,t)}function H4(n,e,t,r,i,s,o,a){i===fn&&(i=cn);let c=0,u=0,d=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;d!==null||f!==null;){let m=c<i.length?i[c+1]:void 0,g=u<s.length?s[u+1]:void 0,w=null,x;d===f?(c+=2,u+=2,m!==g&&(w=f,x=g)):f===null||d!==null&&d<f?(c+=2,w=d):(u+=2,w=f,x=g),w!==null&&E1(n,e,t,r,w,x,o,a),d=c<i.length?i[c]:null,f=u<s.length?s[u]:null}}function E1(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=D4(u)?Fx(c,e,t,i,ja(u),o):void 0;if(!jf(d)){jf(s)||C4(u)&&(s=Fx(c,null,t,i,a,o));let f=vv(li(),t);Mj(r,o,f,i,s)}}function Fx(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,m=t[i+1];m===fn&&(m=f?cn:void 0);let g=f?uf(m,r):d===r?m:void 0;if(u&&!jf(g)&&(g=uf(c,r)),jf(g)&&(a=g,o))return a;let w=n[i+1];i=o?so(w):ja(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=uf(c,r))}return a}function jf(n){return n!==void 0}function z4(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ai(Kf(n)))),n}function b1(n,e){return(n.flags&(e?8:16))!==0}function I(n,e=""){let t=Te(),r=Mt(),i=n+wt,s=r.firstCreatePass?tu(r,i,1,e,null):r.data[i],o=G4(r,t,s,e,n);t[i]=o,bf()&&B0(r,t,o,s),Ma(s,!1)}var G4=(n,e,t,r,i)=>($l(!0),lj(e[at],r));function q4(n,e,t,r=""){return Fr(n,jl(),t)?e+wa(t)+r:fn}function W4(n,e,t,r,i,s=""){let o=JA(),a=J0(n,o,t,i);return gf(2),a?e+wa(t)+r+wa(i)+s:fn}function ue(n){return ne("",n),ue}function ne(n,e,t){let r=Te(),i=q4(r,n,e,t);return i!==fn&&I1(r,li(),i),ne}function fo(n,e,t,r,i){let s=Te(),o=W4(s,n,e,t,r,i);return o!==fn&&I1(s,li(),o),fo}function I1(n,e,t){let r=vv(e,n);uj(n[at],r,t)}function pp(n,e,t){eE(e)&&(e=e());let r=Te(),i=jl();if(Fr(r,i,e)){let s=Mt(),o=Fv();xR(o,r,n,e,r[at],t)}return pp}function aE(n,e){let t=eE(n);return t&&n.set(e),t}function mp(n,e){let t=Te(),r=Mt(),i=hn();return p1(r,t,t[at],i,n,e),mp}function cE(n){return Fr(Te(),jl(),n)?wa(n):fn}function K4(n,e,t){let r=Mt();if(r.firstCreatePass){let i=Pr(n);T0(t,r.data,r.blueprint,i,!0),T0(e,r.data,r.blueprint,i,!1)}}function T0(n,e,t,r,i){if(n=Ht(n),Array.isArray(n))for(let s=0;s<n.length;s++)T0(n[s],e,t,r,i);else{let s=Mt(),o=Te(),a=hn(),c=Ks(n)?n:Ht(n.provide),u=pv(n),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Ks(n)||!n.multi){let g=new ro(u,i,se,null),w=Xv(c,e,i?d:d+m,f);w===-1?(t0(Mf(a,o),s,c),Zv(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),o.push(g)):(t[w]=g,o[w]=g)}else{let g=Xv(c,e,d+m,f),w=Xv(c,e,d,d+m),x=g>=0&&t[g],P=w>=0&&t[w];if(i&&!P||!i&&!x){t0(Mf(a,o),s,c);let U=J4(i?Q4:Y4,t.length,i,r,u,n);!i&&P&&(t[w].providerFactory=U),Zv(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(U),o.push(U)}else{let U=w1(t[i?w:g],u,!i&&r);Zv(s,n,g>-1?g:w,U)}!i&&r&&P&&t[w].componentProviders++}}}function Zv(n,e,t,r){let i=Ks(e),s=FA(e);if(i||s){let c=(s?Ht(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function w1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Xv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Y4(n,e,t,r,i){return D0(this.multi,[])}function Q4(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Yl(r,r[de],this.providerFactory.index,i);o=c.slice(0,a),D0(s,o);for(let u=a;u<c.length;u++)o.push(c[u])}else o=[],D0(s,o);return o}function D0(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function J4(n,e,t,r,i,s){let o=new ro(n,t,se,null);return o.multi=[],o.index=e,o.componentProviders=0,w1(o,i,r&&!t),o}function hs(n,e=[]){return t=>{t.providersResolver=(r,i)=>K4(r,i?i(n):n,e)}}function lE(n,e,t){let r=Oa()+n,i=Te();return i[r]===fn?tp(i,r,t?e.call(t):e()):w3(i,r)}function gp(n,e,t,r,i){return S1(Te(),Oa(),n,e,t,r,i)}function yp(n,e,t,r,i,s){return X4(Te(),Oa(),n,e,t,r,i,s)}function uE(n,e){let t=n[e];return t===fn?void 0:t}function Z4(n,e,t,r,i,s){let o=e+t;return Fr(n,o,i)?tp(n,o+1,s?r.call(s,i):r(i)):uE(n,o+1)}function S1(n,e,t,r,i,s,o){let a=e+t;return J0(n,a,i,s)?tp(n,a+2,o?r.call(o,i,s):r(i,s)):uE(n,a+2)}function X4(n,e,t,r,i,s,o,a){let c=e+t;return S3(n,c,i,s,o)?tp(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):uE(n,c+3)}function Ie(n,e){let t=Mt(),r,i=n+wt;t.firstCreatePass?(r=e$(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Zi(r.type,!0)),o,a=an(se);try{let c=Nf(!1),u=s();return Nf(c),bv(t,Te(),i,u),u}finally{an(a)}}function e$(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Rt(n,e,t){let r=n+wt,i=Te(),s=Ev(i,r);return C1(i,r)?Z4(i,Oa(),e,s.transform,t,s):s.transform(t)}function st(n,e,t,r){let i=n+wt,s=Te(),o=Ev(s,i);return C1(s,i)?S1(s,Oa(),e,o.transform,t,r,o):o.transform(t,r)}function C1(n,e){return n[de].data[e].pure}var Cf=null;function T1(n){Cf!==null&&(n.defaultEncapsulation!==Cf.defaultEncapsulation||n.preserveWhitespaces!==Cf.preserveWhitespaces)||(Cf=n)}var $f=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},dE=(()=>{class n{compileModuleSync(t){return new Zl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=uv(t),s=uR(i.declarations).reduce((o,a)=>{let c=xr(a);return c&&o.push(new us(c)),o},[]);return new $f(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),D1=new K("");var A1=(()=>{class n{applicationErrorHandler=M(Gn);appRef=M(Wn);taskService=M(ui);ngZone=M(Ne);zonelessEnabled=M(Hl);tracing=M(ao,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new We;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(kl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M($v,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Uv:Vv;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(kl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Uv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function x1(){return[{provide:es,useExisting:A1},{provide:Ne,useClass:Pl},{provide:Hl,useValue:!0}]}function t$(){return typeof $localize<"u"&&$localize.locale||iu}var po=new K("",{factory:()=>M(po,{optional:!0,skipSelf:!0})||t$()});function su(n,e){return Eh(n,e?.equal)}var V1=Symbol("InputSignalNode#UNSET"),p$=ee(F({},bh),{transformFn:void 0,applyValueToInputSignal(n,e){wl(n,e)}});function U1(n,e){let t=Object.create(p$);t.value=n,t.transformFn=e?.transform;function r(){if(El(t),t.value===V1){let i=null;throw new B(-950,i)}return t.value}return r[sn]=t,r}function R1(n,e){return U1(n,e)}function m$(n){return U1(V1,n)}var B1=(R1.required=m$,R1);function g$(n,e,t){let r=new Zl(t);return Promise.resolve(r)}function k1(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var _p=new K(""),y$=new K("");function ou(n){return!n.moduleRef}function _$(n){let e=ou(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ne);return t.run(()=>{ou(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Gn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),ou(n)){let s=()=>e.destroy(),o=n.platformInjector.get(_p);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(_p);o.add(s),n.moduleRef.onDestroy(()=>{ql(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return E$(r,t,()=>{let s=e.get(ui),o=s.add(),a=e.get(rE);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(po,iu);if(f1(c||iu),!e.get(y$,!0))return ou(n)?e.get(Wn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ou(n)){let d=e.get(Wn);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return j1?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var j1;function P1(){j1=v$}function v$(n,e){let t=n.injector.get(Wn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new B(-403,!1);e.push(n)}function E$(n,e,t){try{let r=t();return pi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var $1=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=[],s=[x1(),...i,...r?.applicationProviders??[],dx],o=i1(t.moduleType,this.injector,s);return P1(),_$({moduleRef:o,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=iE({},r);return P1(),g$(this.injector,i,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new B(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(_p,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(te(Ge))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),yE=null;function b$(n){if(vE())throw new B(400,!1);d1(),yE=n;let e=n.get($1);return S$(n),e}function _E(n,e,t=[]){let r=`Platform: ${e}`,i=new K(r);return(s=[])=>{let o=vE();if(!o){let a=[...t,...s,{provide:i,useValue:!0}];o=n?.(a)??b$(I$(a,r))}return w$(i)}}function I$(n=[],e){return Ge.create({name:e,providers:[{provide:Ol,useValue:"platform"},{provide:_p,useValue:new Set([()=>yE=null])},...n]})}function w$(n){let e=vE();if(!e)throw new B(-401,!1);return e}function vE(){return yE?.get($1)??null}function S$(n){let e=n.get(zf,null);It(n,()=>{e?.forEach(t=>t())})}function EE(){return!1}var kt=(()=>{class n{static __NG_ELEMENT_ID__=C$}return n})();function C$(n){return T$(hn(),Te(),(n&16)===16)}function T$(n,e,t){if(as(n)&&!t){let r=Hn(n.index,e);return new ls(r,r)}else if(n.type&175){let r=e[vn];return new ls(r,e)}return null}var hE=class{constructor(){}supports(e){return Q0(e)}create(e){return new fE(e)}},D$=(n,e)=>e,fE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||D$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<N1(r,i,s)?t:r,a=N1(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,d=c-i;if(u!=d){for(let m=0;m<u;m++){let g=m<s.length?s[m]:s[m]=0,w=g+m;d<=w&&w<u&&(s[m]=g+1)}let f=o.previousIndex;s[f]=d-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Q0(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,YR(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new pE(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new vp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},pE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},mE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},vp=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new mE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function N1(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function M1(){return new Ep([new hE])}var Ep=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:M1});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=M(n,{optional:!0,skipSelf:!0});return n.create(t,r||M1())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new B(901,!1)}}return n})();var H1=_E(null,"core",[]),z1=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(te(Wn))};static \u0275mod=ct({type:n});static \u0275inj=it({})}return n})();function mo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function bE(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function G1(n,e){let t=xr(n),r=e.elementInjector||Ta();return new us(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function q1(n){let e=xr(n);if(!e)return null;let t=new us(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Y1=null;function Rn(){return Y1}function IE(n){Y1??=n}var au=class{},cu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(Q1),providedIn:"platform"})}return n})(),wE=new K(""),Q1=(()=>{class n extends cu{_location;_history;_doc=M(Qe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rn().getBaseHref(this._doc)}onPopState(t){let r=Rn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Rn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function bp(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function W1(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function hr(n){return n&&n[0]!=="?"?`?${n}`:n}var mi=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(wp),providedIn:"root"})}return n})(),Ip=new K(""),wp=(()=>{class n extends mi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(Qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return bp(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+hr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+hr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+hr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(te(cu),te(Ip,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ps=(()=>{class n{_subject=new _e;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=R$(W1(K1(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+hr(r))}normalize(t){return n.stripTrailingSlash(x$(this._basePath,K1(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+hr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+hr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=hr;static joinWithSlash=bp;static stripTrailingSlash=W1;static \u0275fac=function(r){return new(r||n)(te(mi))};static \u0275prov=H({token:n,factory:()=>A$(),providedIn:"root"})}return n})();function A$(){return new ps(te(mi))}function x$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function K1(n){return n.replace(/\/index.html$/,"")}function R$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var xE=(()=>{class n extends mi{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=bp(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+hr(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+hr(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(te(cu),te(Ip,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var RE=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(RE||{});var Vr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function qa(n,e){let t=dp(n),r=t[di.NumberSymbols][e];if(typeof r>"u"){if(e===Vr.CurrencyDecimal)return t[di.NumberSymbols][Vr.Decimal];if(e===Vr.CurrencyGroup)return t[di.NumberSymbols][Vr.Group]}return r}function tk(n,e){return dp(n)[di.NumberFormats][e]}var k$=/^(\d+)?\.((\d+)(-(\d+))?)?$/,J1=22,Sp=".",lu="0",P$=";",N$=",",SE="#";function M$(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=qa(t,Vr.Infinity);else{let u=L$(n);o&&(u=F$(u));let d=e.minInt,f=e.minFrac,m=e.maxFrac;if(s){let W=s.match(k$);if(W===null)throw new B(2306,!1);let Z=W[1],le=W[3],qe=W[5];Z!=null&&(d=CE(Z)),le!=null&&(f=CE(le)),qe!=null?m=CE(qe):le!=null&&f>m&&(m=f)}V$(u,f,m);let g=u.digits,w=u.integerLen,x=u.exponent,P=[];for(c=g.every(W=>!W);w<d;w++)g.unshift(0);for(;w<0;w++)g.unshift(0);w>0?P=g.splice(w,g.length):(P=g,g=[0]);let U=[];for(g.length>=e.lgSize&&U.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)U.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&U.unshift(g.join("")),a=U.join(qa(t,r)),P.length&&(a+=qa(t,i)+P.join("")),x&&(a+=qa(t,Vr.Exponential)+"+"+x)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function nk(n,e,t){let r=tk(e,RE.Decimal),i=O$(r,qa(e,Vr.MinusSign));return M$(n,i,e,Vr.Group,Vr.Decimal,t)}function O$(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(P$),i=r[0],s=r[1],o=i.indexOf(Sp)!==-1?i.split(Sp):[i.substring(0,i.lastIndexOf(lu)+1),i.substring(i.lastIndexOf(lu)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(SE));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===lu?t.minFrac=t.maxFrac=d+1:f===SE?t.maxFrac=d+1:t.posSuf+=f}let u=a.split(N$);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){let d=i.length-t.posPre.length-t.posSuf.length,f=s.indexOf(SE);t.negPre=s.substring(0,f).replace(/'/g,""),t.negSuf=s.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function F$(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function L$(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(Sp))>-1&&(e=e.replace(Sp,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===lu;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===lu;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>J1&&(r=r.splice(0,J1-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function V$(n,e,t){if(e>t)throw new B(2307,!1);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let f=o;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let f=1;f<o;f++)r[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,u=e+n.integerLen,d=r.reduceRight(function(f,m,g,w){return m=m+f,w[g]=m<10?m:m-10,c&&(w[g]===0&&g>=u?w.pop():c=!1),m>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function CE(n){let e=parseInt(n);if(isNaN(e))throw new B(2305,!1);return e}var TE=/\s+/,Z1=[],gi=(()=>{class n{_ngEl;_renderer;initialClasses=Z1;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(TE):Z1}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(TE):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(TE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(se(Gt),se(fi))};static \u0275dir=Ot({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Cp=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Kn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Cp(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),X1(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);X1(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(se(qn),se(dr),se(Ep))};static \u0275dir=Ot({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function X1(n,e){n.context.$implicit=e.item}var kn=(()=>{class n{_viewContainer;_context=new Tp;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ek(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ek(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(se(qn),se(dr))};static \u0275dir=Ot({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Tp=class{$implicit=null;ngIf=null};function ek(n,e){if(n&&!n.createEmbeddedView)throw new B(2020,!1)}function rk(n,e){return new B(2100,!1)}var DE=class{createSubscription(e,t,r){return vt(()=>e.subscribe({next:t,error:r}))}dispose(e){vt(()=>e.unsubscribe())}},AE=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},U$=new AE,B$=new DE,kE=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=M(Gn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(pi(t))return U$;if(op(t))return B$;throw rk(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(se(kt,16))};static \u0275pipe=rp({name:"async",type:n,pure:!1})}return n})();var fr=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!j$(t))return null;i||=this._locale;try{let s=$$(t);return nk(s,i,r)}catch(s){throw rk(n,s.message)}}static \u0275fac=function(r){return new(r||n)(se(po,16))};static \u0275pipe=rp({name:"number",type:n,pure:!0})}return n})();function j$(n){return!(n==null||n===""||n!==n)}function $$(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new B(2309,!1);return n}var uu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=it({})}return n})();function PE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var du=class{};function ik(n,e,t){return sE(n,e,t)}var ME="browser";function sk(n){return n===ME}var ok=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new NE(M(Qe),window)})}return n})(),NE=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ee(F({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=H$(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(ts(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(ee(F({},t),{left:i-o[0],top:s-o[1]}))}};function H$(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var hu=class{_doc;constructor(e){this._doc=e}manager},Dp=(()=>{class n extends hu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(te(Qe))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Rp=new K(""),VE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Dp));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Dp);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(te(Rp),te(Ne))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),OE="ng-app-id";function ak(n){for(let e of n)e.remove()}function ck(n,e){let t=e.createElement("style");return t.textContent=n,t}function z$(n,e,t,r){let i=n.head?.querySelectorAll(`style[${OE}="${e}"],link[${OE}="${e}"]`);if(i)for(let s of i)s.removeAttribute(OE),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function LE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var UE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,z$(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,ck);r?.forEach(i=>this.addUsage(i,this.external,LE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(ak(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])ak(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,ck(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,LE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(te(Qe),te(Hf),te(qf,8),te(hi))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),FE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},BE=/%COMP%/g;var uk="%COMP%",G$=`_nghost-${uk}`,q$=`_ngcontent-${uk}`,W$=!0,K$=new K("",{factory:()=>W$});function Y$(n){return q$.replace(BE,n)}function Q$(n){return G$.replace(BE,n)}function dk(n,e){return e.map(t=>t.replace(BE,n))}var mu=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new fu(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof xp?i.applyToHost(t):i instanceof pu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case ur.Emulated:s=new xp(c,u,r,this.appId,d,o,a,f,m);break;case ur.ShadowDom:return new Ap(c,t,r,o,a,this.nonce,f,m,u);case ur.ExperimentalIsolatedShadowDom:return new Ap(c,t,r,o,a,this.nonce,f,m);default:s=new pu(c,u,r,d,o,a,f,m);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(te(VE),te(UE),te(Hf),te(K$),te(Qe),te(Ne),te(qf),te(ao,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),fu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(FE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(lk(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(lk(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=FE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=FE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Or.DashCase|Or.Important)?e.style.setProperty(t,r,i&Or.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Or.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Rn().getGlobalEventTarget(this.doc,e),!e))throw new B(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function lk(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ap=class extends fu{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,u){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=dk(r.id,d);for(let m of d){let g=document.createElement("style");o&&g.setAttribute("nonce",o),g.textContent=m,this.shadowRoot.appendChild(g)}let f=r.getExternalStyles?.();if(f)for(let m of f){let g=LE(m,i);o&&g.setAttribute("nonce",o),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},pu=class extends fu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,u){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?dk(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ba.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},xp=class extends pu{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,u){let d=i+"-"+r.id;super(e,t,r,s,o,a,c,u,d),this.contentAttr=Y$(d),this.hostAttr=Q$(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var kp=class n extends au{supportsDOMEvents=!0;static makeCurrent(){IE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=J$();return t==null?null:Z$(t)}resetBaseElement(){gu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return PE(document.cookie,e)}},gu=null;function J$(){return gu=gu||document.head.querySelector("base"),gu?gu.getAttribute("href"):null}function Z$(n){return new URL(n,document.baseURI).pathname}var Pp=class{addToWindow(e){ln.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new B(5103,!1);return s},ln.getAllAngularTestabilities=()=>e.getAllTestabilities(),ln.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=ln.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};ln.frameworkStabilizers||(ln.frameworkStabilizers=[]),ln.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Rn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},X$=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),hk=["alt","control","meta","shift"],e5={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},t5={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},fk=(()=>{class n extends hu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rn().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),hk.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=e5[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),hk.forEach(o=>{if(o!==i){let a=t5[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(te(Qe))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function n5(){kp.makeCurrent()}function r5(){return new Ar}function i5(){return R0(document),document}var s5=[{provide:hi,useValue:ME},{provide:zf,useValue:n5,multi:!0},{provide:Qe,useFactory:i5}],jE=_E(H1,"browser",s5);var o5=[{provide:sp,useClass:Pp},{provide:ip,useClass:ru},{provide:ru,useClass:ru}],a5=[{provide:Ol,useValue:"root"},{provide:Ar,useFactory:r5},{provide:Rp,useClass:Dp,multi:!0},{provide:Rp,useClass:fk,multi:!0},mu,UE,VE,{provide:En,useExisting:mu},{provide:du,useClass:X$},[]],yu=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=it({providers:[...a5,...o5],imports:[uu,z1]})}return n})();var pk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(te(Qe))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var he=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(he||{}),Yn="*";function yo(n,e){return{type:he.Trigger,name:n,definitions:e,options:{}}}function _o(n,e=null){return{type:he.Animate,styles:e,timings:n}}function gk(n,e=null){return{type:he.Sequence,steps:n,options:e}}function Zt(n){return{type:he.Style,styles:n,offset:null}}function Np(n,e,t){return{type:he.State,name:n,styles:e,options:t}}function $E(n){return{type:he.Keyframes,steps:n}}function vo(n,e,t=null){return{type:he.Transition,expr:n,animation:e,options:t}}function HE(n,e,t=null){return{type:he.Query,selector:n,animation:e,options:t}}function zE(n,e){return{type:he.Stagger,timings:n,animation:e}}var Ur=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},go=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Ka="!";function yk(n){return new B(3e3,!1)}function c5(){return new B(3100,!1)}function l5(){return new B(3101,!1)}function u5(n){return new B(3001,!1)}function d5(n){return new B(3003,!1)}function h5(n){return new B(3004,!1)}function vk(n,e){return new B(3005,!1)}function Ek(){return new B(3006,!1)}function bk(){return new B(3007,!1)}function Ik(n,e){return new B(3008,!1)}function wk(n){return new B(3002,!1)}function Sk(n,e,t,r,i){return new B(3010,!1)}function Ck(){return new B(3011,!1)}function Tk(){return new B(3012,!1)}function Dk(){return new B(3200,!1)}function Ak(){return new B(3202,!1)}function xk(){return new B(3013,!1)}function Rk(n){return new B(3014,!1)}function kk(n){return new B(3015,!1)}function Pk(n){return new B(3016,!1)}function Nk(n,e){return new B(3404,!1)}function f5(n){return new B(3502,!1)}function Mk(n){return new B(3503,!1)}function Ok(){return new B(3300,!1)}function Fk(n){return new B(3504,!1)}function Lk(n){return new B(3301,!1)}function Vk(n,e){return new B(3302,!1)}function Uk(n){return new B(3303,!1)}function Bk(n,e){return new B(3400,!1)}function jk(n){return new B(3401,!1)}function $k(n){return new B(3402,!1)}function Hk(n,e){return new B(3505,!1)}function yi(n){switch(n.length){case 0:return new Ur;case 1:return n[0];default:return new go(n)}}function KE(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),d=u==o,f=d&&a||new Map;c.forEach((m,g)=>{let w=g,x=m;if(g!=="offset")switch(w=n.normalizePropertyName(w,i),x){case Ka:x=t.get(g);break;case Yn:x=r.get(g);break;default:x=n.normalizeStyleValue(g,w,x,i);break}f.set(w,x)}),d||s.push(f),a=f,o=u}),i.length)throw f5(i);return s}function Mp(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&GE(t,"start",n)));break;case"done":n.onDone(()=>r(t&&GE(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&GE(t,"destroy",n)));break}}function GE(n,e,t){let r=t.totalTime,i=!!t.disabled,s=Op(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function Op(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function bn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function YE(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var p5=typeof document>"u"?null:document.documentElement;function Fp(n){let e=n.parentNode||n.host||null;return e===p5?null:e}function m5(n){return n.substring(1,6)=="ebkit"}var Eo=null,_k=!1;function zk(n){Eo||(Eo=g5()||{},_k=Eo.style?"WebkitAppearance"in Eo.style:!1);let e=!0;return Eo.style&&!m5(n)&&(e=n in Eo.style,!e&&_k&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Eo.style)),e}function g5(){return typeof document<"u"?document.body:null}function QE(n,e){for(;e;){if(e===n)return!0;e=Fp(e)}return!1}function JE(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var y5=1e3,ZE="{{",_5="}}",XE="ng-enter",Lp="ng-leave",_u="ng-trigger",vu=".ng-trigger",eb="ng-animating",Vp=".ng-animating";function Br(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:qE(parseFloat(e[1]),e[2])}function qE(n,e){switch(e){case"s":return n*y5;default:return n}}function Eu(n,e,t){return n.hasOwnProperty("duration")?n:E5(n,e,t)}var v5=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function E5(n,e,t){let r,i=0,s="";if(typeof n=="string"){let o=n.match(v5);if(o===null)return e.push(yk(n)),{duration:0,delay:0,easing:""};r=qE(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(i=qE(parseFloat(a),o[4]));let c=o[5];c&&(s=c)}else r=n;if(!t){let o=!1,a=e.length;r<0&&(e.push(c5()),o=!0),i<0&&(e.push(l5()),o=!0),o&&e.splice(a,0,yk(n))}return{duration:r,delay:i,easing:s}}function Gk(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function pr(n,e,t){e.forEach((r,i)=>{let s=Up(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function ms(n,e){e.forEach((t,r)=>{let i=Up(r);n.style[i]=""})}function Ya(n){return Array.isArray(n)?n.length==1?n[0]:gk(n):n}function qk(n,e,t){let r=e.params||{},i=tb(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(u5(s))})}var WE=new RegExp(`${ZE}\\s*(.+?)\\s*${_5}`,"g");function tb(n){let e=[];if(typeof n=="string"){let t;for(;t=WE.exec(n);)e.push(t[1]);WE.lastIndex=0}return e}function Qa(n,e,t){let r=`${n}`,i=r.replace(WE,(s,o)=>{let a=e[o];return a==null&&(t.push(d5(o)),a=""),a.toString()});return i==r?n:i}var b5=/-+([a-z0-9])/g;function Up(n){return n.replace(b5,(...e)=>e[1].toUpperCase())}function Wk(n,e){return n===0||e===0}function Kk(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Bp(n,a)))}}return e}function In(n,e,t){switch(e.type){case he.Trigger:return n.visitTrigger(e,t);case he.State:return n.visitState(e,t);case he.Transition:return n.visitTransition(e,t);case he.Sequence:return n.visitSequence(e,t);case he.Group:return n.visitGroup(e,t);case he.Animate:return n.visitAnimate(e,t);case he.Keyframes:return n.visitKeyframes(e,t);case he.Style:return n.visitStyle(e,t);case he.Reference:return n.visitReference(e,t);case he.AnimateChild:return n.visitAnimateChild(e,t);case he.AnimateRef:return n.visitAnimateRef(e,t);case he.Query:return n.visitQuery(e,t);case he.Stagger:return n.visitStagger(e,t);default:throw h5(e.type)}}function Bp(n,e){return window.getComputedStyle(n)[e]}var _b=(()=>{class n{validateStyleProperty(t){return zk(t)}containsElement(t,r){return QE(t,r)}getParentElement(t){return Fp(t)}query(t,r,i){return JE(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Ur(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Io=class{static NOOP=new _b},wo=class{};var I5=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Gp=class extends wo{normalizePropertyName(e,t){return Up(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(I5.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(vk(e,r))}return o+s}};var qp="*";function w5(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>S5(r,t,e)):t.push(n),t}function S5(n,e,t){if(n[0]==":"){let c=C5(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(kk(n)),e;let i=r[1],s=r[2],o=r[3];e.push(Yk(i,o));let a=i==qp&&o==qp;s[0]=="<"&&!a&&e.push(Yk(o,i))}function C5(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(Pk(n)),"* => *"}}var jp=new Set(["true","1"]),$p=new Set(["false","0"]);function Yk(n,e){let t=jp.has(n)||$p.has(n),r=jp.has(e)||$p.has(e);return(i,s)=>{let o=n==qp||n==i,a=e==qp||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?jp.has(n):$p.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?jp.has(e):$p.has(e)),o&&a}}var sP=":self",T5=new RegExp(`s*${sP}s*,?`,"g");function oP(n,e,t,r){return new ab(n).build(e,t,r)}var Qk="",ab=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new cb(t);return this._resetContextStyleTimingState(i),In(this,Ya(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=Qk,e.collectedStyles=new Map,e.collectedStyles.set(Qk,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(Ek()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==he.State){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,s.push(this.visitState(c,t))}),c.name=u}else if(a.type==he.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(bk())}),{type:he.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{tb(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&t.errors.push(Ik(e.name,[...s.values()]))}return{type:he.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=In(this,Ya(e.animation),t),i=w5(e.expr,t.errors);return{type:he.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:bo(e.options)}}visitSequence(e,t){return{type:he.Sequence,steps:e.steps.map(r=>In(this,r,t)),options:bo(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=In(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:he.Group,steps:s,options:bo(e.options)}}visitAnimate(e,t){let r=R5(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Zt({});if(s.type==he.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let u={};r.easing&&(u.easing=r.easing),o=Zt(u)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:he.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Yn?r.push(a):t.errors.push(wk(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(ZE)>=0){s=!0;break}}}),{type:he.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let u=t.collectedStyles.get(t.currentQuerySelector),d=u.get(c),f=!0;d&&(s!=i&&s>=d.startTime&&i<=d.endTime&&(t.errors.push(Sk(c,d.startTime,d.endTime,s,i)),f=!1),s=d.startTime),f&&u.set(c,{startTime:s,endTime:i}),t.options&&qk(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:he.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Ck()),r;let i=1,s=0,o=[],a=!1,c=!1,u=0,d=e.steps.map(U=>{let W=this._makeStyleAst(U,t),Z=W.offset!=null?W.offset:x5(W.styles),le=0;return Z!=null&&(s++,le=W.offset=Z),c=c||le<0||le>1,a=a||le<u,u=le,o.push(le),W});c&&t.errors.push(Tk()),a&&t.errors.push(Dk());let f=e.steps.length,m=0;s>0&&s<f?t.errors.push(Ak()):s==0&&(m=i/(f-1));let g=f-1,w=t.currentTime,x=t.currentAnimateTimings,P=x.duration;return d.forEach((U,W)=>{let Z=m>0?W==g?1:m*W:o[W],le=Z*P;t.currentTime=w+x.delay+le,x.duration=le,this._validateStyleAst(U,t),U.offset=Z,r.styles.push(U)}),r}visitReference(e,t){return{type:he.Reference,animation:In(this,Ya(e.animation),t),options:bo(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:he.AnimateChild,options:bo(e.options)}}visitAnimateRef(e,t){return{type:he.AnimateRef,animation:this.visitReference(e.animation,t),options:bo(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=D5(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,bn(t.collectedStyles,t.currentQuerySelector,new Map);let a=In(this,Ya(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:he.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:bo(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(xk());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Eu(e.timings,t.errors,!0);return{type:he.Stagger,animation:In(this,Ya(e.animation),t),timings:r,options:null}}};function D5(n){let e=!!n.split(/\s*,\s*/).find(t=>t==sP);return e&&(n=n.replace(T5,"")),n=n.replace(/@\*/g,vu).replace(/@\w+/g,t=>vu+"-"+t.slice(1)).replace(/:animating/g,Vp),[n,e]}function A5(n){return n?F({},n):null}var cb=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function x5(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function R5(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Eu(n,e).duration;return nb(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=nb(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Eu(t,e);return nb(i.duration,i.delay,i.easing)}function bo(n){return n?(n=F({},n),n.params&&(n.params=A5(n.params))):n={},n}function nb(n,e,t){return{duration:n,delay:e,easing:t}}function vb(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Iu=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},k5=1,P5=":enter",N5=new RegExp(P5,"g"),M5=":leave",O5=new RegExp(M5,"g");function aP(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return new lb().buildKeyframes(n,e,t,r,i,s,o,a,c,u)}var lb=class{buildKeyframes(e,t,r,i,s,o,a,c,u,d=[]){u=u||new Iu;let f=new ub(e,t,u,i,s,d,[]);f.options=c;let m=c.delay?Br(c.delay):0;f.currentTimeline.delayNextStep(m),f.currentTimeline.setStyles([o],null,f.errors,c),In(this,r,f);let g=f.timelines.filter(w=>w.containsAnimation());if(g.length&&a.size){let w;for(let x=g.length-1;x>=0;x--){let P=g[x];if(P.element===t){w=P;break}}w&&!w.allowOnlyTimelineStyles()&&w.setStyles([a],null,f.errors,c)}return g.length?g.map(w=>w.buildKeyframes()):[vb(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Br(Qa(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Br(r.duration):null,a=r.delay!=null?Br(r.delay):null;return o!==0&&e.forEach(c=>{let u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),In(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==he.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Wp);let o=Br(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>In(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Br(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),In(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Qa(r,t.params,t.errors):r;return Eu(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==he.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Br(i.delay):0;s&&(t.previousNode.type===he.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Wp);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,d)=>{t.currentQueryIndex=d;let f=t.createSubContext(e.options,u);s&&f.delayNextStep(s),u===t.element&&(c=f.currentTimeline),In(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let m=f.currentTimeline.currentTime;o=Math.max(o,m)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let d=t.currentTimeline;c&&d.delayNextStep(c);let f=d.currentTime;In(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},Wp={},ub=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Wp;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=c||new Kp(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Br(r.duration)),r.delay!=null&&(i.delay=Br(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Qa(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Wp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new db(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(N5,"."+this._enterClassName),e=e.replace(O5,"."+this._leaveClassName);let c=r!=1,u=this._driver.query(this.element,e,c);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&a.length==0&&o.push(Rk(t)),a}},Kp=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=k5,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Yn),this._currentKeyframe.set(t,Yn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=F5(e,this._globalTimelineStyles);for(let[a,c]of o){let u=Qa(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Yn),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let u=new Map([...this._backFill,...a]);u.forEach((d,f)=>{d===Ka?e.add(f):d===Yn&&t.add(f)}),r||u.set("offset",c/this.duration),i.push(u)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return vb(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},db=class extends Kp{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let u=new Map(e[0]);u.set("offset",Jk(a)),s.push(u);let d=e.length-1;for(let f=1;f<=d;f++){let m=new Map(e[f]),g=m.get("offset"),w=t+g*r;m.set("offset",Jk(w/o)),s.push(m)}r=o,t=0,i="",e=s}return vb(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function Jk(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function F5(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Yn)}else for(let[s,o]of i)t.set(s,o)}),t}function Zk(n,e,t,r,i,s,o,a,c,u,d,f,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:d,totalTime:f,errors:m}}var rb={},Yp=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return L5(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,d){let f=[],m=this.ast.options&&this.ast.options.params||rb,g=a&&a.params||rb,w=this.buildStyles(r,g,f),x=c&&c.params||rb,P=this.buildStyles(i,x,f),U=new Set,W=new Map,Z=new Map,le=i==="void",qe={params:cP(x,m),delay:this.ast.options?.delay},Ce=d?[]:aP(e,t,this.ast.animation,s,o,w,P,qe,u,f),T=0;return Ce.forEach(b=>{T=Math.max(b.duration+b.delay,T)}),f.length?Zk(t,this._triggerName,r,i,le,w,P,[],[],W,Z,T,f):(Ce.forEach(b=>{let S=b.element,D=bn(W,S,new Set);b.preStyleProps.forEach(k=>D.add(k));let A=bn(Z,S,new Set);b.postStyleProps.forEach(k=>A.add(k)),S!==t&&U.add(S)}),Zk(t,this._triggerName,r,i,le,w,P,Ce,[...U.values()],W,Z,T))}};function L5(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function cP(n,e){let t=F({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var hb=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=cP(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Qa(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function V5(n,e,t){return new fb(n,e,t)}var fb=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new hb(i.style,s,r))}),Xk(this.states,"true","1"),Xk(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Yp(e,i,this.states))}),this.fallbackTransition=U5(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function U5(n,e,t){let r=[(o,a)=>!0],i={type:he.Sequence,steps:[],options:null},s={type:he.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Yp(n,s,e)}function Xk(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var B5=new Iu,pb=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=oP(this._driver,t,r,i);if(r.length)throw Mk(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=KE(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=aP(this._driver,t,s,XE,Lp,new Map,new Map,r,B5,i),o.forEach(d=>{let f=bn(a,d.element,new Map);d.postStyleProps.forEach(m=>f.set(m,null))})):(i.push(Ok()),o=[]),i.length)throw Fk(i);a.forEach((d,f)=>{d.forEach((m,g)=>{d.set(g,this._driver.computeStyle(f,g,Yn))})});let c=o.map(d=>{let f=a.get(d.element);return this._buildPlayer(d,new Map,f)}),u=yi(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Lk(e);return t}listen(e,t,r,i){let s=Op(t,"","","");return Mp(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},eP="ng-animate-queued",j5=".ng-animate-queued",ib="ng-animate-disabled",$5=".ng-animate-disabled",H5="ng-star-inserted",z5=".ng-star-inserted",G5=[],lP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},q5={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},mr="__ng_removed",wu=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=K5(i),r){let s=e,{value:o}=s,a=_l(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},bu="void",sb=new wu(bu),mb=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Qn(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw Vk(r,t);if(r==null||r.length==0)throw Uk(t);if(!Y5(r))throw Bk(r,t);let s=bn(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=bn(this._engine.statesByElement,e,new Map);return a.has(t)||(Qn(e,_u),Qn(e,_u+"-"+t),a.set(t,sb)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw jk(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Su(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Qn(e,_u),Qn(e,_u+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),u=new wu(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=sb),!(u.value===bu)&&c.value===u.value){if(!Z5(c.params,u.params)){let x=[],P=s.matchStyles(c.value,c.params,x),U=s.matchStyles(u.value,u.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{ms(e,P),pr(e,U)})}return}let m=bn(this._engine.playersByElement,e,[]);m.forEach(x=>{x.namespaceId==this.id&&x.triggerName==t&&x.queued&&x.destroy()});let g=s.matchTransition(c.value,u.value,e,u.params),w=!1;if(!g){if(!i)return;g=s.fallbackTransition,w=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:c,toState:u,player:o,isFallbackTransition:w}),w||(Qn(e,eP),o.onStart(()=>{Ja(e,eP)})),o.onDone(()=>{let x=this.players.indexOf(o);x>=0&&this.players.splice(x,1);let P=this._engine.playersByElement.get(e);if(P){let U=P.indexOf(o);U>=0&&P.splice(U,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,vu,!0);r.forEach(i=>{if(i[mr])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){let d=this.trigger(e,u,bu,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&yi(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,u=r.get(o)||sb,d=new wu(bu),f=new Su(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[mr];(!s||s===lP)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Qn(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=Op(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Mp(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},gb=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new mb(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Hp(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Hp(t))return;let s=t[mr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Qn(e,ib)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ja(e,ib))}removeNode(e,t,r){if(Hp(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[mr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Hp(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,vu,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Vp,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return yi(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[mr];if(t&&t.setForRemoval){if(e[mr]=lP,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ib)&&this.markElementAsDisabled(e,!1),this.driver.query(e,$5,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Qn(i,H5)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?yi(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw $k(e)}_flushAnimations(e,t){let r=new Iu,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,d=new Set;this.disabledNodes.forEach(X=>{d.add(X);let re=this.driver.query(X,j5,!0);for(let oe=0;oe<re.length;oe++)d.add(re[oe])});let f=this.bodyNode,m=Array.from(this.statesByElement.keys()),g=rP(m,this.collectedEnterElements),w=new Map,x=0;g.forEach((X,re)=>{let oe=XE+x++;w.set(re,oe),X.forEach(xe=>Qn(xe,oe))});let P=[],U=new Set,W=new Set;for(let X=0;X<this.collectedLeaveElements.length;X++){let re=this.collectedLeaveElements[X],oe=re[mr];oe&&oe.setForRemoval&&(P.push(re),U.add(re),oe.hasAnimation?this.driver.query(re,z5,!0).forEach(xe=>U.add(xe)):W.add(re))}let Z=new Map,le=rP(m,Array.from(U));le.forEach((X,re)=>{let oe=Lp+x++;Z.set(re,oe),X.forEach(xe=>Qn(xe,oe))}),e.push(()=>{g.forEach((X,re)=>{let oe=w.get(re);X.forEach(xe=>Ja(xe,oe))}),le.forEach((X,re)=>{let oe=Z.get(re);X.forEach(xe=>Ja(xe,oe))}),P.forEach(X=>{this.processLeaveNode(X)})});let qe=[],Ce=[];for(let X=this._namespaceList.length-1;X>=0;X--)this._namespaceList[X].drainQueuedTransitions(t).forEach(oe=>{let xe=oe.player,_t=oe.element;if(qe.push(xe),this.collectedEnterElements.length){let ht=_t[mr];if(ht&&ht.setForMove){if(ht.previousTriggersValues&&ht.previousTriggersValues.has(oe.triggerName)){let ti=ht.previousTriggersValues.get(oe.triggerName),gn=this.statesByElement.get(oe.element);if(gn&&gn.has(oe.triggerName)){let ni=gn.get(oe.triggerName);ni.value=ti,gn.set(oe.triggerName,ni)}}xe.destroy();return}}let Bn=!f||!this.driver.containsElement(f,_t),dt=Z.get(_t),et=w.get(_t),tt=this._buildInstruction(oe,r,et,dt,Bn);if(tt.errors&&tt.errors.length){Ce.push(tt);return}if(Bn){xe.onStart(()=>ms(_t,tt.fromStyles)),xe.onDestroy(()=>pr(_t,tt.toStyles)),i.push(xe);return}if(oe.isFallbackTransition){xe.onStart(()=>ms(_t,tt.fromStyles)),xe.onDestroy(()=>pr(_t,tt.toStyles)),i.push(xe);return}let Ui=[];tt.timelines.forEach(ht=>{ht.stretchStartingKeyframe=!0,this.disabledNodes.has(ht.element)||Ui.push(ht)}),tt.timelines=Ui,r.append(_t,tt.timelines);let Ny={instruction:tt,player:xe,element:_t};o.push(Ny),tt.queriedElements.forEach(ht=>bn(a,ht,[]).push(xe)),tt.preStyleProps.forEach((ht,ti)=>{if(ht.size){let gn=c.get(ti);gn||c.set(ti,gn=new Set),ht.forEach((ni,Bi)=>gn.add(Bi))}}),tt.postStyleProps.forEach((ht,ti)=>{let gn=u.get(ti);gn||u.set(ti,gn=new Set),ht.forEach((ni,Bi)=>gn.add(Bi))})});if(Ce.length){let X=[];Ce.forEach(re=>{X.push(Hk(re.triggerName,re.errors))}),qe.forEach(re=>re.destroy()),this.reportError(X)}let T=new Map,b=new Map;o.forEach(X=>{let re=X.element;r.has(re)&&(b.set(re,re),this._beforeAnimationBuild(X.player.namespaceId,X.instruction,T))}),i.forEach(X=>{let re=X.element;this._getPreviousPlayers(re,!1,X.namespaceId,X.triggerName,null).forEach(xe=>{bn(T,re,[]).push(xe),xe.destroy()})});let S=P.filter(X=>iP(X,c,u)),D=new Map;nP(D,this.driver,W,u,Yn).forEach(X=>{iP(X,c,u)&&S.push(X)});let k=new Map;g.forEach((X,re)=>{nP(k,this.driver,new Set(X),c,Ka)}),S.forEach(X=>{let re=D.get(X),oe=k.get(X);D.set(X,new Map([...re?.entries()??[],...oe?.entries()??[]]))});let C=[],Un=[],Vi={};o.forEach(X=>{let{element:re,player:oe,instruction:xe}=X;if(r.has(re)){if(d.has(re)){oe.onDestroy(()=>pr(re,xe.toStyles)),oe.disabled=!0,oe.overrideTotalTime(xe.totalTime),i.push(oe);return}let _t=Vi;if(b.size>1){let dt=re,et=[];for(;dt=dt.parentNode;){let tt=b.get(dt);if(tt){_t=tt;break}et.push(dt)}et.forEach(tt=>b.set(tt,_t))}let Bn=this._buildAnimation(oe.namespaceId,xe,T,s,k,D);if(oe.setRealPlayer(Bn),_t===Vi)C.push(oe);else{let dt=this.playersByElement.get(_t);dt&&dt.length&&(oe.parentPlayer=yi(dt)),i.push(oe)}}else ms(re,xe.fromStyles),oe.onDestroy(()=>pr(re,xe.toStyles)),Un.push(oe),d.has(re)&&i.push(oe)}),Un.forEach(X=>{let re=s.get(X.element);if(re&&re.length){let oe=yi(re);X.setRealPlayer(oe)}}),i.forEach(X=>{X.parentPlayer?X.syncPlayerEvents(X.parentPlayer):X.destroy()});for(let X=0;X<P.length;X++){let re=P[X],oe=re[mr];if(Ja(re,Lp),oe&&oe.hasAnimation)continue;let xe=[];if(a.size){let Bn=a.get(re);Bn&&Bn.length&&xe.push(...Bn);let dt=this.driver.query(re,Vp,!0);for(let et=0;et<dt.length;et++){let tt=a.get(dt[et]);tt&&tt.length&&xe.push(...tt)}}let _t=xe.filter(Bn=>!Bn.destroyed);_t.length?Q5(this,re,_t):this.processLeaveNode(re)}return P.length=0,C.forEach(X=>{this.players.push(X),X.onDone(()=>{X.destroy();let re=this.players.indexOf(X);this.players.splice(re,1)}),X.play()}),C}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==bu;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let u=c.element,d=u!==s,f=bn(r,u,[]);this._getPreviousPlayers(u,d,o,a,t.toState).forEach(g=>{let w=g.getRealPlayer();w.beforeDestroy&&w.beforeDestroy(),g.destroy(),f.push(g)})}ms(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,u=[],d=new Set,f=new Set,m=t.timelines.map(w=>{let x=w.element;d.add(x);let P=x[mr];if(P&&P.removedBeforeQueried)return new Ur(w.duration,w.delay);let U=x!==c,W=J5((r.get(x)||G5).map(T=>T.getRealPlayer())).filter(T=>{let b=T;return b.element?b.element===x:!1}),Z=s.get(x),le=o.get(x),qe=KE(this._normalizer,w.keyframes,Z,le),Ce=this._buildPlayer(w,qe,W);if(w.subTimeline&&i&&f.add(x),U){let T=new Su(e,a,x);T.setRealPlayer(Ce),u.push(T)}return Ce});u.forEach(w=>{bn(this.playersByQueriedElement,w.element,[]).push(w),w.onDone(()=>W5(this.playersByQueriedElement,w.element,w))}),d.forEach(w=>Qn(w,eb));let g=yi(m);return g.onDestroy(()=>{d.forEach(w=>Ja(w,eb)),pr(c,t.toStyles)}),f.forEach(w=>{bn(i,w,[]).push(g)}),g}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Ur(e.duration,e.delay)}},Su=class{namespaceId;triggerName;element;_player=new Ur;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Mp(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){bn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function W5(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function K5(n){return n??null}function Hp(n){return n&&n.nodeType===1}function Y5(n){return n=="start"||n=="done"}function tP(n,e){let t=n.style.display;return n.style.display=e??"none",t}function nP(n,e,t,r,i){let s=[];t.forEach(c=>s.push(tP(c)));let o=[];r.forEach((c,u)=>{let d=new Map;c.forEach(f=>{let m=e.computeStyle(u,f,i);d.set(f,m),(!m||m.length==0)&&(u[mr]=q5,o.push(u))}),n.set(u,d)});let a=0;return t.forEach(c=>tP(c,s[a++])),o}function rP(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let u=a.parentNode;return t.has(u)?c=u:i.has(u)?c=r:c=o(u),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function Qn(n,e){n.classList?.add(e)}function Ja(n,e){n.classList?.remove(e)}function Q5(n,e,t){yi(t).onDone(()=>n.processLeaveNode(e))}function J5(n){let e=[];return uP(n,e),e}function uP(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof go?uP(r.players,e):e.push(r)}}function Z5(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function iP(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var Za=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new gb(e.body,t,r),this._timelineEngine=new pb(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],u=[],d=oP(this._driver,s,c,u);if(c.length)throw Nk(i,c);a=V5(i,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=YE(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=YE(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function X5(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ob(e[0]),e.length>1&&(r=ob(e[e.length-1]))):e instanceof Map&&(t=ob(e)),t||r?new eH(n,t,r):null}var eH=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&pr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pr(this._element,this._initialStyles),this._endStyles&&(pr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ms(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ms(this._element,this._endStyles),this._endStyles=null),pr(this._element,this._initialStyles),this._state=3)}}return n})();function ob(n){let e=null;return n.forEach((t,r)=>{tH(r)&&(e=e||new Map,e.set(r,t))}),e}function tH(n){return n==="display"||n==="position"}var Qp=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Bp(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Jp=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return QE(e,t)}getParentElement(e){return Fp(e)}query(e,t,r){return JE(e,t,r)}computeStyle(e,t,r){return Bp(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let u=new Map,d=o.filter(g=>g instanceof Qp);Wk(r,i)&&d.forEach(g=>{g.currentSnapshot.forEach((w,x)=>u.set(x,w))});let f=Gk(t).map(g=>new Map(g));f=Kk(e,f,u);let m=X5(e,f);return new Qp(e,f,c,m)}};var zp="@",dP="@.disabled",Zp=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==zp&&t==dP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},yb=class extends Zp{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==zp?t.charAt(1)=="."&&t==dP?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==zp){let s=nH(e),o=t.slice(1),a="";return o.charAt(0)!=zp&&([o,a]=rH(o)),this.engine.listen(this.namespaceId,s,o,a,c=>{let u=c._data||-1;this.factory.scheduleListenerCallback(u,r,c)})}return this.delegate.listen(e,t,r,i)}};function nH(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function rH(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var Xp=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,d=u.get(i);if(!d){let f=()=>u.delete(i);d=new Zp("",i,this.engine,f),u.set(i,d)}return d}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(s,o,e,u.name,u)};return t.data.animation.forEach(a),new yb(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var sH=(()=>{class n extends Za{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(te(Qe),te(Io),te(wo))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function oH(){return new Gp}function aH(){return new Xp(M(mu),M(Za),M(Ne))}var fP=[{provide:wo,useFactory:oH},{provide:Za,useClass:sH},{provide:En,useFactory:aH}],cH=[{provide:Io,useClass:_b},{provide:Gf,useValue:"NoopAnimations"},...fP],hP=[{provide:Io,useFactory:()=>new Jp},{provide:Gf,useFactory:()=>"BrowserAnimations"},...fP],pP=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?cH:hP}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=it({providers:hP,imports:[yu]})}return n})();function lH(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===0||t===1?1:i===0&&t!==0&&t%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var mP=["fr",[["AM","PM"]],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}",void 0,void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",lH];var gP=()=>{};var vP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},uH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},em={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,m=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),r.push(t[d],t[f],t[m],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):uH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new bb;let m=s<<2|a>>4;if(r.push(m),u!==64){let g=a<<4&240|u>>2;if(r.push(g),f!==64){let w=u<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},bb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dH=function(n){let e=vP(n);return em.encodeByteArray(e,!0)},Tu=function(n){return dH(n).replace(/\./g,"")},tm=function(n){try{return em.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hH=()=>wb().__FIREBASE_DEFAULTS__,fH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&tm(n[1]);return e&&JSON.parse(e)},nm=()=>{try{return gP()||hH()||fH()||pH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Sb=n=>{var e,t;return(t=(e=nm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},EP=n=>{let e=Sb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Cb=()=>{var n;return(n=nm())===null||n===void 0?void 0:n.config},Tb=n=>{var e;return(e=nm())===null||e===void 0?void 0:e[`_${n}`]};var So=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function gs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rm(n){return(await fetch(n,{credentials:"include"})).ok}function bP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Tu(JSON.stringify(t)),Tu(JSON.stringify(o)),""].join(".")}var Cu={};function mH(){let n={prod:[],emulator:[]};for(let e of Object.keys(Cu))Cu[e]?n.emulator.push(e):n.prod.push(e);return n}function gH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var yP=!1;function im(n,e){if(typeof window>"u"||typeof document>"u"||!gs(window.location.host)||Cu[n]===e||Cu[n]||yP)return;Cu[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",s=mH().prod.length>0;function o(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{yP=!0,o()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){let m=gH(r),g=t("text"),w=document.getElementById(g)||document.createElement("span"),x=t("learnmore"),P=document.getElementById(x)||document.createElement("a"),U=t("preprendIcon"),W=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;a(Z),d(P,x);let le=u();c(W,U),Z.append(W,w,P,le),document.body.appendChild(Z)}s?(w.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function yH(){var n;let e=(n=nm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function CP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TP(){let n=Ft();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function DP(){return!yH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Du(){try{return typeof indexedDB=="object"}catch{return!1}}function AP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var _H="FirebaseError",Pn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_H,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gr.prototype.create)}},gr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?vH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Pn(i,a,r)}};function vH(n,e){return n.replace(EH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var EH=/\{\$([^}]+)}/g;function xP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(_P(s)&&_P(o)){if(!jr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function _P(n){return n!==null&&typeof n=="object"}function Xa(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function RP(n,e){let t=new Ib(n,e);return t.subscribe.bind(t)}var Ib=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Eb),i.error===void 0&&(i.error=Eb),i.complete===void 0&&(i.complete=Eb);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function bH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Eb(){}var ame=14400*1e3;function bt(n){return n&&n._delegate?n._delegate:n}var pn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Co="[DEFAULT]";var Db=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new So;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wH(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function IH(n){return n===Co?void 0:n}function wH(n){return n.instantiationMode==="EAGER"}var sm=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Db(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var SH=[],ke=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ke||{}),CH={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},TH=ke.INFO,DH={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},AH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=DH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$r=class{constructor(e){this.name=e,this._logLevel=TH,this._logHandler=AH,this._userLogHandler=null,SH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}};var xH=(n,e)=>e.some(t=>n instanceof t),kP,PP;function RH(){return kP||(kP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kH(){return PP||(PP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var NP=new WeakMap,xb=new WeakMap,MP=new WeakMap,Ab=new WeakMap,kb=new WeakMap;function PH(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Hr(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&NP.set(t,n)}).catch(()=>{}),kb.set(e,n),e}function NH(n){if(xb.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});xb.set(n,e)}var Rb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function OP(n){Rb=n(Rb)}function MH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(om(this),e,...t);return MP.set(r,e.sort?e.sort():[e]),Hr(r)}:kH().includes(n)?function(...e){return n.apply(om(this),e),Hr(NP.get(this))}:function(...e){return Hr(n.apply(om(this),e))}}function OH(n){return typeof n=="function"?MH(n):(n instanceof IDBTransaction&&NH(n),xH(n,RH())?new Proxy(n,Rb):n)}function Hr(n){if(n instanceof IDBRequest)return PH(n);if(Ab.has(n))return Ab.get(n);let e=OH(n);return e!==n&&(Ab.set(n,e),kb.set(e,n)),e}var om=n=>kb.get(n);function am(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Hr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Hr(o.result),c.oldVersion,c.newVersion,Hr(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var FH=["get","getKey","getAll","getAllKeys","count"],LH=["put","add","delete","clear"],Pb=new Map;function FP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Pb.get(e))return Pb.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=LH.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||FH.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&c.done]))[0]};return Pb.set(e,s),s}OP(n=>ee(F({},n),{get:(e,t,r)=>FP(e,t)||n.get(e,t,r),has:(e,t)=>!!FP(e,t)||n.has(e,t)}));var Mb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function VH(n){let e=n.getComponent();return e?.type==="VERSION"}var Ob="@firebase/app",LP="0.13.2";var _i=new $r("@firebase/app"),UH="@firebase/app-compat",BH="@firebase/analytics-compat",jH="@firebase/analytics",$H="@firebase/app-check-compat",HH="@firebase/app-check",zH="@firebase/auth",GH="@firebase/auth-compat",qH="@firebase/database",WH="@firebase/data-connect",KH="@firebase/database-compat",YH="@firebase/functions",QH="@firebase/functions-compat",JH="@firebase/installations",ZH="@firebase/installations-compat",XH="@firebase/messaging",e6="@firebase/messaging-compat",t6="@firebase/performance",n6="@firebase/performance-compat",r6="@firebase/remote-config",i6="@firebase/remote-config-compat",s6="@firebase/storage",o6="@firebase/storage-compat",a6="@firebase/firestore",c6="@firebase/ai",l6="@firebase/firestore-compat",u6="firebase",d6="11.10.0";var Fb="[DEFAULT]",h6={[Ob]:"fire-core",[UH]:"fire-core-compat",[jH]:"fire-analytics",[BH]:"fire-analytics-compat",[HH]:"fire-app-check",[$H]:"fire-app-check-compat",[zH]:"fire-auth",[GH]:"fire-auth-compat",[qH]:"fire-rtdb",[WH]:"fire-data-connect",[KH]:"fire-rtdb-compat",[YH]:"fire-fn",[QH]:"fire-fn-compat",[JH]:"fire-iid",[ZH]:"fire-iid-compat",[XH]:"fire-fcm",[e6]:"fire-fcm-compat",[t6]:"fire-perf",[n6]:"fire-perf-compat",[r6]:"fire-rc",[i6]:"fire-rc-compat",[s6]:"fire-gcs",[o6]:"fire-gcs-compat",[a6]:"fire-fst",[l6]:"fire-fst-compat",[c6]:"fire-vertex","fire-js":"fire-js",[u6]:"fire-js-all"};var Au=new Map,f6=new Map,Lb=new Map;function VP(n,e){try{n.container.addComponent(e)}catch(t){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yr(n){let e=n.name;if(Lb.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;Lb.set(e,n);for(let t of Au.values())VP(t,n);for(let t of f6.values())VP(t,n);return!0}function ec(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nn(n){return n==null?!1:n.settings!==void 0}var p6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new gr("app","Firebase",p6);var Vb=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}};var _s=d6;function jb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Fb,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ys.create("bad-app-name",{appName:String(i)});if(t||(t=Cb()),!t)throw ys.create("no-options");let s=Au.get(i);if(s){if(jr(t,s.options)&&jr(r,s.config))return s;throw ys.create("duplicate-app",{appName:i})}let o=new sm(i);for(let c of Lb.values())o.addComponent(c);let a=new Vb(t,r,o);return Au.set(i,a),a}function To(n=Fb){let e=Au.get(n);if(!e&&n===Fb&&Cb())return jb();if(!e)throw ys.create("no-app",{appName:n});return e}function cm(){return Array.from(Au.values())}function gt(n,e,t){var r;let i=(r=h6[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(a.join(" "));return}yr(new pn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var m6="firebase-heartbeat-database",g6=1,xu="firebase-heartbeat-store",Nb=null;function $P(){return Nb||(Nb=am(m6,g6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ys.create("idb-open",{originalErrorMessage:n.message})})),Nb}async function y6(n){try{let t=(await $P()).transaction(xu),r=await t.objectStore(xu).get(HP(n));return await t.done,r}catch(e){if(e instanceof Pn)_i.warn(e.message);else{let t=ys.create("idb-get",{originalErrorMessage:e?.message});_i.warn(t.message)}}}async function UP(n,e){try{let r=(await $P()).transaction(xu,"readwrite");await r.objectStore(xu).put(e,HP(n)),await r.done}catch(t){if(t instanceof Pn)_i.warn(t.message);else{let r=ys.create("idb-set",{originalErrorMessage:t?.message});_i.warn(r.message)}}}function HP(n){return`${n.name}!${n.options.appId}`}var _6=1024,v6=30,Ub=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Bb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=BP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>v6){let o=b6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=BP(),{heartbeatsToSend:r,unsentEntries:i}=E6(this._heartbeatsCache.heartbeats),s=Tu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return _i.warn(t),""}}};function BP(){return new Date().toISOString().substring(0,10)}function E6(n,e=_6){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),jP(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),jP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Bb=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Du()?AP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await y6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return UP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return UP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function jP(n){return Tu(JSON.stringify({version:2,heartbeats:n})).length}function b6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function I6(n){yr(new pn("platform-logger",e=>new Mb(e),"PRIVATE")),yr(new pn("heartbeat",e=>new Ub(e),"PRIVATE")),gt(Ob,LP,n),gt(Ob,LP,"esm2017"),gt("fire-js","")}I6("");var w6="firebase",S6="11.10.0";gt(w6,S6,"app");function zP(n){n===void 0&&(n=M(Ge));let e=n.get(Fa);return t=>new me(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var vs=new Ji("ANGULARFIRE2_VERSION");function Ru(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var nc=(n,e)=>{let t=e?[e]:cm(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},tc=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(tc||{}),GP=EE()&&typeof Zone<"u"?tc.WARN:tc.SILENT;var lm=class{zone;delegate;constructor(e,t=D_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Es=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=M(Ne);this.outsideAngular=t.runOutsideAngular(()=>new lm(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new lm(typeof Zone>"u"?void 0:Zone.current,qi))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qP=!1;function C6(n,e){!qP&&(GP>tc.SILENT||EE())&&(qP=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),GP>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function T6(n){let e=M(Ne,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Do(n){let e=M(Ne,{optional:!0});return e?e.run(()=>n()):n()}var D6=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),It(t,()=>Do(()=>n.apply(void 0,r)))),ut=(n,e,t)=>(t||=e?tc.WARN:tc.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=M(Es),o=M(Fa),a=M(pt)}catch{return C6(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Do(()=>o.add())),i[u]=D6(i[u],r,a));let c=T6(()=>n.apply(this,i));return e?c instanceof me?c.pipe(Ki(s.outsideAngular),Wi(s.insideAngular),zP(a)):c instanceof Promise?Do(()=>{let u=o.add();return new Promise((d,f)=>{c.then(m=>It(a,()=>Do(()=>d(m))),m=>It(a,()=>Do(()=>f(m)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Do(()=>c):c instanceof me?c.pipe(Ki(s.outsideAngular),Wi(s.insideAngular)):Do(()=>c)});var vi=class{constructor(e){return e}},Ao=class{constructor(){return cm()}};function A6(n){return n&&n.length===1?n[0]:new vi(To())}var $b=new K("angularfire2._apps"),x6={provide:vi,useFactory:A6,deps:[[new xn,$b]]},R6={provide:Ao,deps:[[new xn,$b]]};function k6(n){return(e,t)=>{let r=t.get(hi);gt("angularfire",vs.full,"core"),gt("angularfire",vs.full,"app"),gt("angular",Q_.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new vi(i)}}function WP(n,...e){return sr([x6,R6,{provide:$b,useFactory:k6(n),multi:!0,deps:[Ne,Ge,Es,...e]}])}var KP=ut(jb,!0);var P6=new Map,N6={activated:!1,tokenObservers:[]},M6={initialized:!1,enabled:!1};function _r(n){return P6.get(n)||Object.assign({},N6)}function ZP(){return M6}var O6="https://content-firebaseappcheck.googleapis.com/v1";var F6="exchangeDebugToken",YP={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},age=1440*60*1e3;var Gb=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new So,this.pending.promise.catch(t=>{}),await L6(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new So,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function L6(n){return new Promise(e=>{setTimeout(e,n)})}var V6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},bs=new gr("appCheck","AppCheck",V6);function XP(n){if(!_r(n).activated)throw bs.create("use-before-activation",{appName:n.name})}async function eN({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(f){throw bs.create("fetch-network-error",{originalErrorMessage:f?.message})}if(o.status!==200)throw bs.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw bs.create("fetch-parse-error",{originalErrorMessage:f?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let u=Number(c[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+u,issuedAtTimeMillis:d}}function tN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${O6}/projects/${t}/apps/${r}:${F6}?key=${i}`,body:{debug_token:e}}}var U6="firebase-app-check-database",B6=1,qb="firebase-app-check-store";var um=null;function j6(){return um||(um=new Promise((n,e)=>{try{let t=indexedDB.open(U6,B6);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(bs.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(qb,{keyPath:"compositeKey"})}}}catch(t){e(bs.create("storage-open",{originalErrorMessage:t?.message}))}}),um)}function $6(n,e){return H6(z6(n),e)}async function H6(n,e){let r=(await j6()).transaction(qb,"readwrite"),s=r.objectStore(qb).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(bs.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function z6(n){return`${n.options.appId}-${n.name}`}var ku=new $r("@firebase/app-check");function Hb(n,e){return Du()?$6(n,e).catch(t=>{ku.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nN(){return ZP().enabled}async function rN(){let n=ZP();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var G6={error:"UNKNOWN_ERROR"};function q6(n){return em.encodeString(JSON.stringify(n),!1)}async function Wb(n,e=!1,t=!1){let r=n.app;XP(r);let i=_r(r),s=i.token,o;if(s&&!Pu(s)&&(i.token=void 0,s=void 0),!s){let u=await i.cachedTokenPromise;u&&(Pu(u)?s=u:await Hb(r,void 0))}if(!e&&s&&Pu(s))return{token:s.token};let a=!1;if(nN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=eN(tN(r,await rN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=await i.exchangeTokenPromise;return await Hb(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?ku.warn(u.message):t&&ku.error(u),zb(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await _r(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?ku.warn(u.message):t&&ku.error(u),o=u}let c;return s?o?Pu(s)?c={token:s.token,internalError:o}:c=zb(o):(c={token:s.token},i.token=s,await Hb(r,s)):c=zb(o),a&&Q6(r,c),c}async function W6(n){let e=n.app;XP(e);let{provider:t}=_r(e);if(nN()){let r=await rN(),{token:i}=await eN(tN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function K6(n,e,t,r){let{app:i}=n,s=_r(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Pu(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),QP(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>QP(n))}function iN(n,e){let t=_r(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function QP(n){let{app:e}=n,t=_r(e),r=t.tokenRefresher;r||(r=Y6(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Y6(n){let{app:e}=n;return new Gb(async()=>{let t=_r(e),r;if(t.token?r=await Wb(n,!0):r=await Wb(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=_r(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},YP.RETRIAL_MIN_WAIT,YP.RETRIAL_MAX_WAIT)}function Q6(n,e){let t=_r(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Pu(n){return n.expireTimeMillis-Date.now()>0}function zb(n){return{token:q6(G6),error:n}}var Kb=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=_r(this.app);for(let t of e)iN(this.app,t.next);return Promise.resolve()}};function J6(n,e){return new Kb(n,e)}function Z6(n){return{getToken:e=>Wb(n,e),getLimitedUseToken:()=>W6(n),addTokenListener:e=>K6(n,"INTERNAL",e),removeTokenListener:e=>iN(n.app,e)}}var X6="@firebase/app-check",ez="0.10.1";var tz="app-check",JP="app-check-internal";function nz(){yr(new pn(tz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return J6(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(JP).initialize()})),yr(new pn(JP,n=>{let e=n.getProvider("app-check").getImmediate();return Z6(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),gt(X6,ez)}nz();var rz="app-check";var rc=class{constructor(){return nc(rz)}};var iz=["localhost","0.0.0.0","127.0.0.1"],vge=typeof window<"u"&&iz.includes(window.location.hostname);var sN=()=>{};var oN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},sz=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},aN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,m=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),r.push(t[d],t[f],t[m],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new Qb;let m=s<<2|a>>4;if(r.push(m),u!==64){let g=a<<4&240|u>>2;if(r.push(g),f!==64){let w=u<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Qb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},oz=function(n){let e=oN(n);return aN.encodeByteArray(e,!0)},Zb=function(n){return oz(n).replace(/\./g,"")},dm=function(n){try{return aN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function az(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var cz=()=>az().__FIREBASE_DEFAULTS__,lz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&dm(n[1]);return e&&JSON.parse(e)},dz=()=>{try{return sN()||cz()||lz()||uz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var cN=n=>dz()?.[`_${n}`];function Xb(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function vr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vr())}function uN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fN(){try{return typeof indexedDB=="object"}catch{return!1}}function pN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var hz="FirebaseError",zr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=hz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ei.prototype.create)}},Ei=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?fz(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new zr(i,a,r)}};function fz(n,e){return n.replace(pz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var pz=/\{\$([^}]+)}/g;function eI(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mN(n,e){let t=new Jb(n,e);return t.subscribe.bind(t)}var Jb=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Yb),i.error===void 0&&(i.error=Yb),i.complete===void 0&&(i.complete=Yb);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function mz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Yb(){}var Sge=14400*1e3;function ic(n){return n&&n._delegate?n._delegate:n}var bi=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gz=[],Ze=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ze||{}),yz={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},_z=Ze.INFO,vz={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},Ez=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=vz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},sc=class{constructor(e){this.name=e,this._logLevel=_z,this._logHandler=Ez,this._userLogHandler=null,gz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}};var nI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Iz(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Iz(n){return n.getComponent()?.type==="VERSION"}var rI="@firebase/app",gN="0.14.6";var Ii=new sc("@firebase/app"),wz="@firebase/app-compat",Sz="@firebase/analytics-compat",Cz="@firebase/analytics",Tz="@firebase/app-check-compat",Dz="@firebase/app-check",Az="@firebase/auth",xz="@firebase/auth-compat",Rz="@firebase/database",kz="@firebase/data-connect",Pz="@firebase/database-compat",Nz="@firebase/functions",Mz="@firebase/functions-compat",Oz="@firebase/installations",Fz="@firebase/installations-compat",Lz="@firebase/messaging",Vz="@firebase/messaging-compat",Uz="@firebase/performance",Bz="@firebase/performance-compat",jz="@firebase/remote-config",$z="@firebase/remote-config-compat",Hz="@firebase/storage",zz="@firebase/storage-compat",Gz="@firebase/firestore",qz="@firebase/ai",Wz="@firebase/firestore-compat",Kz="firebase",Yz="12.6.0";var Qz={[rI]:"fire-core",[wz]:"fire-core-compat",[Cz]:"fire-analytics",[Sz]:"fire-analytics-compat",[Dz]:"fire-app-check",[Tz]:"fire-app-check-compat",[Az]:"fire-auth",[xz]:"fire-auth-compat",[Rz]:"fire-rtdb",[kz]:"fire-data-connect",[Pz]:"fire-rtdb-compat",[Nz]:"fire-fn",[Mz]:"fire-fn-compat",[Oz]:"fire-iid",[Fz]:"fire-iid-compat",[Lz]:"fire-fcm",[Vz]:"fire-fcm-compat",[Uz]:"fire-perf",[Bz]:"fire-perf-compat",[jz]:"fire-rc",[$z]:"fire-rc-compat",[Hz]:"fire-gcs",[zz]:"fire-gcs-compat",[Gz]:"fire-fst",[Wz]:"fire-fst-compat",[qz]:"fire-vertex","fire-js":"fire-js",[Kz]:"fire-js-all"};var Jz=new Map,Zz=new Map,yN=new Map;function _N(n,e){try{n.container.addComponent(e)}catch(t){Ii.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ac(n){let e=n.name;if(yN.has(e))return Ii.debug(`There were multiple attempts to register component ${e}.`),!1;yN.set(e,n);for(let t of Jz.values())_N(t,n);for(let t of Zz.values())_N(t,n);return!0}function xo(n){return n==null?!1:n.settings!==void 0}var Xz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oI=new Ei("app","Firebase",Xz);var hm=Yz;function oc(n,e,t){let r=Qz[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ii.warn(o.join(" "));return}ac(new bi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var eG="firebase-heartbeat-database",tG=1,Nu="firebase-heartbeat-store",tI=null;function IN(){return tI||(tI=am(eG,tG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nu)}catch(t){console.warn(t)}}}}).catch(n=>{throw oI.create("idb-open",{originalErrorMessage:n.message})})),tI}async function nG(n){try{let t=(await IN()).transaction(Nu),r=await t.objectStore(Nu).get(wN(n));return await t.done,r}catch(e){if(e instanceof zr)Ii.warn(e.message);else{let t=oI.create("idb-get",{originalErrorMessage:e?.message});Ii.warn(t.message)}}}async function vN(n,e){try{let r=(await IN()).transaction(Nu,"readwrite");await r.objectStore(Nu).put(e,wN(n)),await r.done}catch(t){if(t instanceof zr)Ii.warn(t.message);else{let r=oI.create("idb-set",{originalErrorMessage:t?.message});Ii.warn(r.message)}}}function wN(n){return`${n.name}!${n.options.appId}`}var rG=1024,iG=30,iI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new sI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=EN();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>iG){let i=oG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ii.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=EN(),{heartbeatsToSend:t,unsentEntries:r}=sG(this._heartbeatsCache.heartbeats),i=Zb(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ii.warn(e),""}}};function EN(){return new Date().toISOString().substring(0,10)}function sG(n,e=rG){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),bN(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),bN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var sI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fN()?pN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await nG(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return vN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return vN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function bN(n){return Zb(JSON.stringify({version:2,heartbeats:n})).length}function oG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function aG(n){ac(new bi("platform-logger",e=>new nI(e),"PRIVATE")),ac(new bi("heartbeat",e=>new iI(e),"PRIVATE")),oc(rI,gN,n),oc(rI,gN,"esm2020"),oc("fire-js","")}aG("");function kN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var PN=kN,NN=new Ei("auth","Firebase",kN());var gm=new sc("@firebase/auth");function cG(n,...e){gm.logLevel<=Ze.WARN&&gm.warn(`Auth (${hm}): ${n}`,...e)}function pm(n,...e){gm.logLevel<=Ze.ERROR&&gm.error(`Auth (${hm}): ${n}`,...e)}function SN(n,...e){throw _I(n,...e)}function yI(n,...e){return _I(n,...e)}function MN(n,e,t){let r=ee(F({},PN()),{[e]:t});return new Ei("auth","Firebase",r).create(e,{appName:n.name})}function mm(n){return MN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _I(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return NN.create(n,...e)}function Be(n,e,...t){if(!n)throw _I(e,...t)}function Mu(n){let e="INTERNAL ASSERTION FAILED: "+n;throw pm(e),new Error(e)}function ym(n,e){n||Mu(e)}function lG(){return CN()==="http:"||CN()==="https:"}function CN(){return typeof self<"u"&&self.location?.protocol||null}function uG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lG()||dN()||"connection"in navigator)?navigator.onLine:!0}function dG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Po=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ym(t>e,"Short delay should be less than long delay!"),this.isMobile=lN()||hN()}get(){return uG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hG(n,e){ym(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var _m=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var fG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var pG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mG=new Po(3e4,6e4);function ON(n,e){return n.tenantId&&!e.tenantId?ee(F({},e),{tenantId:n.tenantId}):e}async function wm(n,e,t,r,i={}){return FN(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=eI(F({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=F({method:e,headers:c},s);return uN()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Xb(n.emulatorConfig.host)&&(u.credentials="include"),_m.fetch()(await LN(n,n.config.apiHost,t,a),u)})}async function FN(n,e,t){n._canInitEmulator=!1;let r=F(F({},fG),e);try{let i=new lI(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw fm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fm(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw fm(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw fm(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw MN(n,d,u);SN(n,d)}}catch(i){if(i instanceof zr)throw i;SN(n,"network-request-failed",{message:String(i)})}}async function LN(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?hG(n.config,i):`${n.config.apiScheme}://${i}`;return pG.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var lI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(yI(this.auth,"network-request-failed")),mG.get())})}};function fm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=yI(n,e,r);return i.customData._tokenResponse=t,i}async function gG(n,e){return wm(n,"POST","/v1/accounts:delete",e)}async function vm(n,e){return wm(n,"POST","/v1/accounts:lookup",e)}function Ou(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VN(n,e=!1){let t=ic(n),r=await t.getIdToken(e),i=UN(r);Be(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ou(aI(i.auth_time)),issuedAtTime:Ou(aI(i.iat)),expirationTime:Ou(aI(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function aI(n){return Number(n)*1e3}function UN(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return pm("JWT malformed, contained fewer than 3 sections"),null;try{let i=dm(t);return i?JSON.parse(i):(pm("Failed to decode base64 JWT payload"),null)}catch(i){return pm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function TN(n){let e=UN(n);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function uI(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof zr&&yG(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function yG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var dI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Lu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ou(this.lastLoginAt),this.creationTime=Ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Em(n){let e=n.auth,t=await n.getIdToken(),r=await uI(n,vm(e,{idToken:t}));Be(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?jN(i.providerUserInfo):[],o=_G(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Lu(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function BN(n){let e=ic(n);await Em(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _G(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jN(n){return n.map(r=>{var i=r,{providerId:e}=i,t=_l(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function vG(n,e){let t=await FN(n,{},async()=>{let r=eI({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await LN(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Xb(n.emulatorConfig.host)&&(c.credentials="include"),_m.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function EG(n,e){return wm(n,"POST","/v2/accounts:revokeToken",ON(n,e))}var Fu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Be(e.length!==0,"internal-error");let t=TN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await vG(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Be(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Be(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Mu("not implemented")}};function Is(n,e){Be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ro=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=_l(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await uI(this,this.stsTokenManager.getToken(this.auth,e));return Be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VN(this,e)}reload(){return BN(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>F({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ee(F({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Em(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xo(this.auth.app))return Promise.reject(mm(this.auth));let e=await this.getIdToken();return await uI(this,gG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ee(F({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>F({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:g,providerData:w,stsTokenManager:x}=t;Be(f&&x,e,"internal-error");let P=Fu.fromJSON(this.name,x);Be(typeof f=="string",e,"internal-error"),Is(r,e.name),Is(i,e.name),Be(typeof m=="boolean",e,"internal-error"),Be(typeof g=="boolean",e,"internal-error"),Is(s,e.name),Is(o,e.name),Is(a,e.name),Is(c,e.name),Is(u,e.name),Is(d,e.name);let U=new n({uid:f,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:d});return w&&Array.isArray(w)&&(U.providerData=w.map(W=>F({},W))),c&&(U._redirectEventId=c),U}static async _fromIdTokenResponse(e,t,r=!1){let i=new Fu;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Em(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Be(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?jN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Fu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Lu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c}};var DN=new Map;function ko(n){ym(n instanceof Function,"Expected a class definition");let e=DN.get(n);return e?(ym(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,DN.set(n,e),e)}var bG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),hI=bG;function cI(n,e,t){return`firebase:${n}:${e}:${t}`}var bm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=cI(this.userKey,i.apiKey,s),this.fullPersistenceKey=cI("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await vm(this.auth,{idToken:e}).catch(()=>{});return t?Ro._fromGetAccountInfoResponse(this.auth,t,e):null}return Ro._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ko(hI),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),s=i[0]||ko(hI),o=cI(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(o);if(d){let f;if(typeof d=="string"){let m=await vm(e,{idToken:d}).catch(()=>{});if(!m)break;f=await Ro._fromGetAccountInfoResponse(e,m,d)}else f=Ro._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new n(s,e,r))}};function AN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CG(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IG(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DG(e))return"Blackberry";if(AG(e))return"Webos";if(wG(e))return"Safari";if((e.includes("chrome/")||SG(e))&&!e.includes("edge/"))return"Chrome";if(TG(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function IG(n=vr()){return/firefox\//i.test(n)}function wG(n=vr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SG(n=vr()){return/crios\//i.test(n)}function CG(n=vr()){return/iemobile/i.test(n)}function TG(n=vr()){return/android/i.test(n)}function DG(n=vr()){return/blackberry/i.test(n)}function AG(n=vr()){return/webos/i.test(n)}function $N(n,e=[]){let t;switch(n){case"Browser":t=AN(vr());break;case"Worker":t=`${AN(vr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hm}/${r}`}var fI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function xG(n,e={}){return wm(n,"GET","/v2/passwordPolicy",ON(n,e))}var RG=6,pI=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??RG,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var mI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Im(this),this.idTokenSubscription=new Im(this),this.beforeStateQueue=new fI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ko(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bm.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await vm(this,{idToken:e}),r=await Ro._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xo(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Em(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xo(this.app))return Promise.reject(mm(this));let t=e?ic(e):null;return t&&Be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xo(this.app)?Promise.reject(mm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xo(this.app)?Promise.reject(mm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ko(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await xG(this),t=new pI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ei("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await EG(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ko(e)||this._popupRedirectResolver;Be(t,this,"argument-error"),this.redirectPersistenceManager=await bm.create(this,[ko(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$N(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(xo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&cG(`Error while retrieving App Check token: ${e.error}`),e?.token}};function kG(n){return ic(n)}var Im=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=mN(t=>this.observer=t)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var PG={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NG(n){PG=n}function MG(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function OG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ko);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function vI(n,e,t,r){return ic(n).onIdTokenChanged(e,t,r)}var rye=MG("rcb"),iye=new Po(3e4,6e4);var sye=new Po(2e3,1e4);var oye=600*1e3;var aye=new Po(3e4,6e4);var cye=new Po(5e3,15e3);var lye=encodeURIComponent("fac");var xN="@firebase/auth",RN="1.11.1";var gI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function FG(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LG(n){ac(new bi("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$N(n)},u=new mI(r,i,s,c);return OG(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ac(new bi("auth-internal",e=>{let t=kG(e.getProvider("auth").getImmediate());return(r=>new gI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),oc(xN,RN,FG(n)),oc(xN,RN,"esm2020")}var VG=300,uye=cN("authIdTokenMaxAge")||VG;function UG(){return document.getElementsByTagName("head")?.[0]??document}NG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=yI("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",UG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LG("Browser");function HN(n){return new me(function(e){var t=vI(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function iM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sM=iM,oM=new gr("auth","Firebase",iM());var xm=new $r("@firebase/auth");function $G(n,...e){xm.logLevel<=ke.WARN&&xm.warn(`Auth (${_s}): ${n}`,...e)}function Cm(n,...e){xm.logLevel<=ke.ERROR&&xm.error(`Auth (${_s}): ${n}`,...e)}function qr(n,...e){throw LI(n,...e)}function Er(n,...e){return LI(n,...e)}function FI(n,e,t){let r=Object.assign(Object.assign({},sM()),{[e]:t});return new gr("auth","Firebase",r).create(e,{appName:n.name})}function No(n){return FI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HG(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&qr(n,"argument-error"),FI(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function LI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return oM.create(n,...e)}function fe(n,e,...t){if(!n)throw LI(e,...t)}function wi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Cm(e),new Error(e)}function Ci(n,e){n||wi(e)}function II(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function zG(){return zN()==="http:"||zN()==="https:"}function zN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function GG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zG()||SP()||"connection"in navigator)?navigator.onLine:!0}function qG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Mo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ci(t>e,"Short delay should be less than long delay!"),this.isMobile=IP()||CP()}get(){return GG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function VI(n,e){Ci(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Rm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var WG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var KG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YG=new Mo(3e4,6e4);function UI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function lc(n,e,t,r,i={}){return aM(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Xa(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=Object.assign({method:e,headers:c},s);return wP()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&gs(n.emulatorConfig.host)&&(u.credentials="include"),Rm.fetch()(await cM(n,n.config.apiHost,t,a),u)})}async function aM(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},WG),e);try{let i=new wI(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Sm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sm(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Sm(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Sm(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw FI(n,d,u);qr(n,d)}}catch(i){if(i instanceof Pn)throw i;qr(n,"network-request-failed",{message:String(i)})}}async function QG(n,e,t,r,i={}){let s=await lc(n,e,t,r,i);return"mfaPendingCredential"in s&&qr(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function cM(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?VI(n.config,i):`${n.config.apiScheme}://${i}`;return KG.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var wI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Er(this.auth,"network-request-failed")),YG.get())})}};function Sm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Er(n,e,r);return i.customData._tokenResponse=t,i}async function JG(n,e){return lc(n,"POST","/v1/accounts:delete",e)}async function km(n,e){return lc(n,"POST","/v1/accounts:lookup",e)}function Vu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BI(n,e=!1){let t=bt(n),r=await t.getIdToken(e),i=jI(r);fe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Vu(EI(i.auth_time)),issuedAtTime:Vu(EI(i.iat)),expirationTime:Vu(EI(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function EI(n){return Number(n)*1e3}function jI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Cm("JWT malformed, contained fewer than 3 sections"),null;try{let i=tm(t);return i?JSON.parse(i):(Cm("Failed to decode base64 JWT payload"),null)}catch(i){return Cm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GN(n){let e=jI(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Bu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Pn&&ZG(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function ZG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var SI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ju=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vu(this.lastLoginAt),this.creationTime=Vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Pm(n){var e;let t=n.auth,r=await n.getIdToken(),i=await Bu(n,km(t,{idToken:r}));fe(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?lM(s.providerUserInfo):[],a=XG(n.providerData,o),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ju(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,f)}async function $I(n){let e=bt(n);await Pm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lM(n){return n.map(e=>{var{providerId:t}=e,r=Oh(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function e8(n,e){let t=await aM(n,{},async()=>{let r=Xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await cM(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&gs(n.emulatorConfig.host)&&(c.credentials="include"),Rm.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function t8(n,e){return lc(n,"POST","/v2/accounts:revokeToken",UI(n,e))}var Uu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");let t=GN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await e8(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return wi("not implemented")}};function ws(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ss=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Oh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ju(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await Bu(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return BI(this,e)}reload(){return $I(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Pm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(No(this.auth));let e=await this.getIdToken();return await Bu(this,JG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,x=(a=t.tenantId)!==null&&a!==void 0?a:void 0,P=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,U=(u=t.createdAt)!==null&&u!==void 0?u:void 0,W=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:Z,emailVerified:le,isAnonymous:qe,providerData:Ce,stsTokenManager:T}=t;fe(Z&&T,e,"internal-error");let b=Uu.fromJSON(this.name,T);fe(typeof Z=="string",e,"internal-error"),ws(f,e.name),ws(m,e.name),fe(typeof le=="boolean",e,"internal-error"),fe(typeof qe=="boolean",e,"internal-error"),ws(g,e.name),ws(w,e.name),ws(x,e.name),ws(P,e.name),ws(U,e.name),ws(W,e.name);let S=new n({uid:Z,auth:e,email:m,emailVerified:le,displayName:f,isAnonymous:qe,photoURL:w,phoneNumber:g,tenantId:x,stsTokenManager:b,createdAt:U,lastLoginAt:W});return Ce&&Array.isArray(Ce)&&(S.providerData=Ce.map(D=>Object.assign({},D))),P&&(S._redirectEventId=P),S}static async _fromIdTokenResponse(e,t,r=!1){let i=new Uu;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Pm(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];fe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?lM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Uu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ju(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c}};var qN=new Map;function Si(n){Ci(n instanceof Function,"Expected a class definition");let e=qN.get(n);return e?(Ci(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qN.set(n,e),e)}var n8=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),CI=n8;function Tm(n,e,t){return`firebase:${n}:${e}:${t}`}var Nm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Tm(this.userKey,i.apiKey,s),this.fullPersistenceKey=Tm("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await km(this.auth,{idToken:e}).catch(()=>{});return t?Ss._fromGetAccountInfoResponse(this.auth,t,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Si(CI),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),s=i[0]||Si(CI),o=Tm(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(o);if(d){let f;if(typeof d=="string"){let m=await km(e,{idToken:d}).catch(()=>{});if(!m)break;f=await Ss._fromGetAccountInfoResponse(e,m,d)}else f=Ss._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new n(s,e,r))}};function WN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mM(e))return"Blackberry";if(gM(e))return"Webos";if(dM(e))return"Safari";if((e.includes("chrome/")||hM(e))&&!e.includes("edge/"))return"Chrome";if(pM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function uM(n=Ft()){return/firefox\//i.test(n)}function dM(n=Ft()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hM(n=Ft()){return/crios\//i.test(n)}function fM(n=Ft()){return/iemobile/i.test(n)}function pM(n=Ft()){return/android/i.test(n)}function mM(n=Ft()){return/blackberry/i.test(n)}function gM(n=Ft()){return/webos/i.test(n)}function HI(n=Ft()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function r8(n=Ft()){var e;return HI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function i8(){return TP()&&document.documentMode===10}function yM(n=Ft()){return HI(n)||pM(n)||gM(n)||mM(n)||/windows phone/i.test(n)||fM(n)}function _M(n,e=[]){let t;switch(n){case"Browser":t=WN(Ft());break;case"Worker":t=`${WN(Ft())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_s}/${r}`}var TI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function s8(n,e={}){return lc(n,"GET","/v2/passwordPolicy",UI(n,e))}var o8=6,DI=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:o8,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var AI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mm(this),this.idTokenSubscription=new Mm(this),this.beforeStateQueue=new TI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Si(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Nm.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await km(this,{idToken:e}),r=await Ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Nn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(No(this));let t=e?bt(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(No(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(No(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await s8(this),t=new DI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await t8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Si(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await Nm.create(this,[Si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_M(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&$G(`Error while retrieving App Check token: ${t.error}`),t?.token}};function $m(n){return bt(n)}var Mm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=RP(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var zI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a8(n){zI=n}function c8(n){return zI.loadJS(n)}function l8(){return zI.gapiScript}function vM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function GI(n,e){let t=ec(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(jr(s,e??{}))return i;qr(i,"already-initialized")}return t.initialize({options:e})}function u8(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Si);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function qI(n,e,t){let r=$m(n);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=EM(e),{host:o,port:a}=d8(e),c=a===null?"":`:${a}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(jr(u,r.config.emulator)&&jr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,gs(o)?(rm(`${s}//${o}${c}`),im("Auth",!0)):i||h8()}function EM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function d8(n){let e=EM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:KN(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:KN(o)}}}function KN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function h8(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var $u=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}};async function cc(n,e){return QG(n,"POST","/v1/accounts:signInWithIdp",UI(n,e))}var f8="http://localhost",Om=class n extends $u{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Oh(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return cc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,cc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,cc(e,t)}buildRequest(){let e={requestUri:f8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xa(t)}return e}};var Hu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Fm=class extends Hu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var WI=(()=>{class n extends Fm{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Om._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var zu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Ss._fromIdTokenResponse(e,r,i),o=YN(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=YN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function YN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var xI=class n extends Pn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function bM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xI._fromErrorAndOperation(n,s,e,r):s})}async function p8(n,e,t=!1){let r=await Bu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return zu._forOperation(n,"link",r)}async function m8(n,e,t=!1){let{auth:r}=n;if(Nn(r.app))return Promise.reject(No(r));let i="reauthenticate";try{let s=await Bu(n,bM(r,i,e,n),t);fe(s.idToken,r,"internal-error");let o=jI(s.idToken);fe(o,r,"internal-error");let{sub:a}=o;return fe(n.uid===a,r,"user-mismatch"),zu._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&qr(r,"user-mismatch"),s}}async function g8(n,e,t=!1){if(Nn(n.app))return Promise.reject(No(n));let r="signIn",i=await bM(n,r,e),s=await zu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function KI(n,e,t,r){return bt(n).onIdTokenChanged(e,t,r)}function YI(n,e,t){return bt(n).beforeAuthStateChanged(e,t)}function QI(n){return bt(n).signOut()}var Lm="__sak";var Vm=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lm,"1"),this.storage.removeItem(Lm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var y8=1e3,_8=10,v8=(()=>{class n extends Vm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);i8()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,_8):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},y8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),IM=v8;var E8=(()=>{class n extends Vm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),JI=E8;function b8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var I8=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async d=>d(r.origin,o)),u=await b8(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function ZI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var RI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=ZI("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Gr(){return window}function w8(n){Gr().location.href=n}function wM(){return typeof Gr().WorkerGlobalScope<"u"&&typeof Gr().importScripts=="function"}async function S8(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C8(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function T8(){return wM()?self:null}var SM="firebaseLocalStorageDb",D8=1,Um="firebaseLocalStorage",CM="fbase_key",Oo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Hm(n,e){return n.transaction([Um],e?"readwrite":"readonly").objectStore(Um)}function A8(){let n=indexedDB.deleteDatabase(SM);return new Oo(n).toPromise()}function kI(){let n=indexedDB.open(SM,D8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Um,{keyPath:CM})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Um)?e(r):(r.close(),await A8(),e(await kI()))})})}async function QN(n,e,t){let r=Hm(n,!0).put({[CM]:e,value:t});return new Oo(r).toPromise()}async function x8(n,e){let t=Hm(n,!1).get(e),r=await new Oo(t).toPromise();return r===void 0?null:r.value}function JN(n,e){let t=Hm(n,!0).delete(e);return new Oo(t).toPromise()}var R8=800,k8=3,P8=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kI(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>k8)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=I8._getInstance(T8()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await S8(),!this.activeServiceWorker)return;this.sender=new RI(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||C8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await kI();return await QN(t,Lm,"1"),await JN(t,Lm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>QN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>x8(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>JN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=Hm(s,!1).getAll();return new Oo(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),TM=P8;var tve=vM("rcb"),nve=new Mo(3e4,6e4);function DM(n,e){return e?Si(e):(fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Gu=class extends $u{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function N8(n){return g8(n.auth,new Gu(n),n.bypassAuthState)}function M8(n){let{auth:e,user:t}=n;return fe(t,e,"internal-error"),m8(t,new Gu(n),n.bypassAuthState)}async function O8(n){let{auth:e,user:t}=n;return fe(t,e,"internal-error"),p8(t,new Gu(n),n.bypassAuthState)}var Bm=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return N8;case"linkViaPopup":case"linkViaRedirect":return O8;case"reauthViaPopup":case"reauthViaRedirect":return M8;default:qr(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var F8=new Mo(2e3,1e4);async function XI(n,e,t){if(Nn(n.app))return Promise.reject(Er(n,"operation-not-supported-in-this-environment"));let r=$m(n);HG(n,e,Hu);let i=DM(r,t);return new L8(r,"signInViaPopup",e,i).executeNotNull()}var L8=(()=>{class n extends Bm{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return fe(t,this.auth,"internal-error"),t}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");let t=ZI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,F8.get())};t()}}n.currentPopupAction=null;return n})(),V8="pendingRedirect",Dm=new Map,PI=class extends Bm{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Dm.get(this.auth._key());if(!e){try{let r=await U8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Dm.set(this.auth._key(),e)}return this.bypassAuthState||Dm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function U8(n,e){let t=$8(e),r=j8(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function B8(n,e){Dm.set(n._key(),e)}function j8(n){return Si(n._redirectPersistence)}function $8(n){return Tm(V8,n.config.apiKey,n.name)}async function H8(n,e,t=!1){if(Nn(n.app))return Promise.reject(No(n));let r=$m(n),i=DM(r,e),o=await new PI(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var z8=600*1e3,NI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!AM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Er(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z8&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZN(e))}saveEventToCache(e){this.cachedEventUids.add(ZN(e)),this.lastProcessedEventTime=Date.now()}};function ZN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function G8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AM(n);default:return!1}}async function q8(n,e={}){return lc(n,"GET","/v1/projects",e)}var W8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K8=/^https?/;async function Y8(n){if(n.config.emulator)return;let{authorizedDomains:e}=await q8(n);for(let t of e)try{if(Q8(t))return}catch{}qr(n,"unauthorized-domain")}function Q8(n){let e=II(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!K8.test(t))return!1;if(W8.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var J8=new Mo(3e4,6e4);function XN(){let n=Gr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Z8(n){return new Promise((e,t)=>{var r,i,s;function o(){XN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XN(),t(Er(n,"network-request-failed"))},timeout:J8.get()})}if(!((i=(r=Gr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Gr().gapi)===null||s===void 0)&&s.load)o();else{let a=vM("iframefcb");return Gr()[a]=()=>{gapi.load?o():t(Er(n,"network-request-failed"))},c8(`${l8()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Am=null,e})}var Am=null;function X8(n){return Am=Am||Z8(n),Am}var eq=new Mo(5e3,15e3),tq="__/auth/iframe",nq="emulator/auth/iframe",rq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sq(n){let e=n.config;fe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?VI(e,nq):`https://${n.config.authDomain}/${tq}`,r={apiKey:e.apiKey,appName:n.name,v:_s},i=iq.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Xa(r).slice(1)}`}async function oq(n){let e=await X8(n),t=Gr().gapi;return fe(t,n,"internal-error"),e.open({where:document.body,url:sq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Er(n,"network-request-failed"),a=Gr().setTimeout(()=>{s(o)},eq.get());function c(){Gr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var aq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cq=500,lq=600,uq="_blank",dq="http://localhost",jm=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function hq(n,e,t,r=cq,i=lq){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},aq),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ft().toLowerCase();t&&(a=hM(u)?uq:t),uM(u)&&(e=e||dq,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[g,w])=>`${m}${g}=${w},`,"");if(r8(u)&&a!=="_self")return fq(e||"",a),new jm(null);let f=window.open(e||"",a,d);fe(f,n,"popup-blocked");try{f.focus()}catch{}return new jm(f)}function fq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var pq="__/auth/handler",mq="emulator/auth/handler",gq=encodeURIComponent("fac");async function eM(n,e,t,r,i,s){fe(n.config.authDomain,n,"auth-domain-config-required"),fe(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:_s,eventId:i};if(e instanceof Hu){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",xP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof Fm){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=await n._getAppCheckToken(),u=c?`#${gq}=${encodeURIComponent(c)}`:"";return`${yq(n)}?${Xa(a).slice(1)}${u}`}function yq({config:n}){return n.emulator?VI(n,mq):`https://${n.authDomain}/${pq}`}var bI="webStorageSupport",MI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JI,this._completeRedirectFn=H8,this._overrideRedirectResult=B8}async _openPopup(e,t,r,i){var s;Ci((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await eM(e,t,r,II(),i);return hq(e,o,ZI())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await eM(e,t,r,II(),i);return w8(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ci(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await oq(e),r=new NI(e);return t.register("authEvent",i=>(fe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bI,{type:bI},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[bI];o!==void 0&&t(!!o),qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Y8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yM()||dM()||HI()}},xM=MI;var tM="@firebase/auth",nM="1.10.8";var OI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function _q(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vq(n){yr(new pn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_M(n)},u=new AI(r,i,s,c);return u8(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),yr(new pn("auth-internal",e=>{let t=$m(e.getProvider("auth").getImmediate());return(r=>new OI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gt(tM,nM,_q(n)),gt(tM,nM,"esm2017")}var Eq=300,bq=Tb("authIdTokenMaxAge")||Eq,rM=null,Iq=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>bq)return;let i=t?.token;rM!==i&&(rM=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ew(n=To()){let e=ec(n,"auth");if(e.isInitialized())return e.getImmediate();let t=GI(n,{popupRedirectResolver:xM,persistence:[TM,IM,JI]}),r=Tb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Iq(s.toString());YI(t,o,()=>o(t.currentUser)),KI(t,a=>o(a))}}let i=Sb("auth");return i&&qI(t,`http://${i}`),t}function wq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}a8({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Er("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",wq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vq("Browser");var RM="auth",Fo=class{constructor(e){return e}},qu=class{constructor(){return nc(RM)}};var tw=new K("angularfire2.auth-instances");function p9(n,e){let t=Ru(RM,n,e);return t&&new Fo(t)}function m9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Fo(r)}}var g9={provide:qu,deps:[[new xn,tw]]},y9={provide:Fo,useFactory:p9,deps:[[new xn,tw],vi]};function kM(n,...e){return gt("angularfire",vs.full,"auth"),sr([y9,g9,{provide:tw,useFactory:m9(n),multi:!0,deps:[Ne,Ge,Es,Ao,[new xn,rc],...e]}])}var PM=ut(HN,!0);var NM=ut(ew,!0);var MM=ut(XI,!0,2);var OM=ut(QI,!0,2);var FM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},LM={};var Ti,nw;(function(){var n;function e(T,b){function S(){}S.prototype=b.prototype,T.D=b.prototype,T.prototype=new S,T.prototype.constructor=T,T.C=function(D,A,k){for(var C=Array(arguments.length-2),Un=2;Un<arguments.length;Un++)C[Un-2]=arguments[Un];return b.prototype[A].apply(D,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,b,S){S||(S=0);var D=Array(16);if(typeof b=="string")for(var A=0;16>A;++A)D[A]=b.charCodeAt(S++)|b.charCodeAt(S++)<<8|b.charCodeAt(S++)<<16|b.charCodeAt(S++)<<24;else for(A=0;16>A;++A)D[A]=b[S++]|b[S++]<<8|b[S++]<<16|b[S++]<<24;b=T.g[0],S=T.g[1],A=T.g[2];var k=T.g[3],C=b+(k^S&(A^k))+D[0]+3614090360&4294967295;b=S+(C<<7&4294967295|C>>>25),C=k+(A^b&(S^A))+D[1]+3905402710&4294967295,k=b+(C<<12&4294967295|C>>>20),C=A+(S^k&(b^S))+D[2]+606105819&4294967295,A=k+(C<<17&4294967295|C>>>15),C=S+(b^A&(k^b))+D[3]+3250441966&4294967295,S=A+(C<<22&4294967295|C>>>10),C=b+(k^S&(A^k))+D[4]+4118548399&4294967295,b=S+(C<<7&4294967295|C>>>25),C=k+(A^b&(S^A))+D[5]+1200080426&4294967295,k=b+(C<<12&4294967295|C>>>20),C=A+(S^k&(b^S))+D[6]+2821735955&4294967295,A=k+(C<<17&4294967295|C>>>15),C=S+(b^A&(k^b))+D[7]+4249261313&4294967295,S=A+(C<<22&4294967295|C>>>10),C=b+(k^S&(A^k))+D[8]+1770035416&4294967295,b=S+(C<<7&4294967295|C>>>25),C=k+(A^b&(S^A))+D[9]+2336552879&4294967295,k=b+(C<<12&4294967295|C>>>20),C=A+(S^k&(b^S))+D[10]+4294925233&4294967295,A=k+(C<<17&4294967295|C>>>15),C=S+(b^A&(k^b))+D[11]+2304563134&4294967295,S=A+(C<<22&4294967295|C>>>10),C=b+(k^S&(A^k))+D[12]+1804603682&4294967295,b=S+(C<<7&4294967295|C>>>25),C=k+(A^b&(S^A))+D[13]+4254626195&4294967295,k=b+(C<<12&4294967295|C>>>20),C=A+(S^k&(b^S))+D[14]+2792965006&4294967295,A=k+(C<<17&4294967295|C>>>15),C=S+(b^A&(k^b))+D[15]+1236535329&4294967295,S=A+(C<<22&4294967295|C>>>10),C=b+(A^k&(S^A))+D[1]+4129170786&4294967295,b=S+(C<<5&4294967295|C>>>27),C=k+(S^A&(b^S))+D[6]+3225465664&4294967295,k=b+(C<<9&4294967295|C>>>23),C=A+(b^S&(k^b))+D[11]+643717713&4294967295,A=k+(C<<14&4294967295|C>>>18),C=S+(k^b&(A^k))+D[0]+3921069994&4294967295,S=A+(C<<20&4294967295|C>>>12),C=b+(A^k&(S^A))+D[5]+3593408605&4294967295,b=S+(C<<5&4294967295|C>>>27),C=k+(S^A&(b^S))+D[10]+38016083&4294967295,k=b+(C<<9&4294967295|C>>>23),C=A+(b^S&(k^b))+D[15]+3634488961&4294967295,A=k+(C<<14&4294967295|C>>>18),C=S+(k^b&(A^k))+D[4]+3889429448&4294967295,S=A+(C<<20&4294967295|C>>>12),C=b+(A^k&(S^A))+D[9]+568446438&4294967295,b=S+(C<<5&4294967295|C>>>27),C=k+(S^A&(b^S))+D[14]+3275163606&4294967295,k=b+(C<<9&4294967295|C>>>23),C=A+(b^S&(k^b))+D[3]+4107603335&4294967295,A=k+(C<<14&4294967295|C>>>18),C=S+(k^b&(A^k))+D[8]+1163531501&4294967295,S=A+(C<<20&4294967295|C>>>12),C=b+(A^k&(S^A))+D[13]+2850285829&4294967295,b=S+(C<<5&4294967295|C>>>27),C=k+(S^A&(b^S))+D[2]+4243563512&4294967295,k=b+(C<<9&4294967295|C>>>23),C=A+(b^S&(k^b))+D[7]+1735328473&4294967295,A=k+(C<<14&4294967295|C>>>18),C=S+(k^b&(A^k))+D[12]+2368359562&4294967295,S=A+(C<<20&4294967295|C>>>12),C=b+(S^A^k)+D[5]+4294588738&4294967295,b=S+(C<<4&4294967295|C>>>28),C=k+(b^S^A)+D[8]+2272392833&4294967295,k=b+(C<<11&4294967295|C>>>21),C=A+(k^b^S)+D[11]+1839030562&4294967295,A=k+(C<<16&4294967295|C>>>16),C=S+(A^k^b)+D[14]+4259657740&4294967295,S=A+(C<<23&4294967295|C>>>9),C=b+(S^A^k)+D[1]+2763975236&4294967295,b=S+(C<<4&4294967295|C>>>28),C=k+(b^S^A)+D[4]+1272893353&4294967295,k=b+(C<<11&4294967295|C>>>21),C=A+(k^b^S)+D[7]+4139469664&4294967295,A=k+(C<<16&4294967295|C>>>16),C=S+(A^k^b)+D[10]+3200236656&4294967295,S=A+(C<<23&4294967295|C>>>9),C=b+(S^A^k)+D[13]+681279174&4294967295,b=S+(C<<4&4294967295|C>>>28),C=k+(b^S^A)+D[0]+3936430074&4294967295,k=b+(C<<11&4294967295|C>>>21),C=A+(k^b^S)+D[3]+3572445317&4294967295,A=k+(C<<16&4294967295|C>>>16),C=S+(A^k^b)+D[6]+76029189&4294967295,S=A+(C<<23&4294967295|C>>>9),C=b+(S^A^k)+D[9]+3654602809&4294967295,b=S+(C<<4&4294967295|C>>>28),C=k+(b^S^A)+D[12]+3873151461&4294967295,k=b+(C<<11&4294967295|C>>>21),C=A+(k^b^S)+D[15]+530742520&4294967295,A=k+(C<<16&4294967295|C>>>16),C=S+(A^k^b)+D[2]+3299628645&4294967295,S=A+(C<<23&4294967295|C>>>9),C=b+(A^(S|~k))+D[0]+4096336452&4294967295,b=S+(C<<6&4294967295|C>>>26),C=k+(S^(b|~A))+D[7]+1126891415&4294967295,k=b+(C<<10&4294967295|C>>>22),C=A+(b^(k|~S))+D[14]+2878612391&4294967295,A=k+(C<<15&4294967295|C>>>17),C=S+(k^(A|~b))+D[5]+4237533241&4294967295,S=A+(C<<21&4294967295|C>>>11),C=b+(A^(S|~k))+D[12]+1700485571&4294967295,b=S+(C<<6&4294967295|C>>>26),C=k+(S^(b|~A))+D[3]+2399980690&4294967295,k=b+(C<<10&4294967295|C>>>22),C=A+(b^(k|~S))+D[10]+4293915773&4294967295,A=k+(C<<15&4294967295|C>>>17),C=S+(k^(A|~b))+D[1]+2240044497&4294967295,S=A+(C<<21&4294967295|C>>>11),C=b+(A^(S|~k))+D[8]+1873313359&4294967295,b=S+(C<<6&4294967295|C>>>26),C=k+(S^(b|~A))+D[15]+4264355552&4294967295,k=b+(C<<10&4294967295|C>>>22),C=A+(b^(k|~S))+D[6]+2734768916&4294967295,A=k+(C<<15&4294967295|C>>>17),C=S+(k^(A|~b))+D[13]+1309151649&4294967295,S=A+(C<<21&4294967295|C>>>11),C=b+(A^(S|~k))+D[4]+4149444226&4294967295,b=S+(C<<6&4294967295|C>>>26),C=k+(S^(b|~A))+D[11]+3174756917&4294967295,k=b+(C<<10&4294967295|C>>>22),C=A+(b^(k|~S))+D[2]+718787259&4294967295,A=k+(C<<15&4294967295|C>>>17),C=S+(k^(A|~b))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var S=b-this.blockSize,D=this.B,A=this.h,k=0;k<b;){if(A==0)for(;k<=S;)i(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<b;)if(D[A++]=T.charCodeAt(k++),A==this.blockSize){i(this,D),A=0;break}}else for(;k<b;)if(D[A++]=T[k++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=b},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var S=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=S&255,S/=256;for(this.u(T),T=Array(16),b=S=0;4>b;++b)for(var D=0;32>D;D+=8)T[S++]=this.g[b]>>>D&255;return T};function s(T,b){var S=a;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=b(T)}function o(T,b){this.h=b;for(var S=[],D=!0,A=T.length-1;0<=A;A--){var k=T[A]|0;D&&k==b||(S[A]=k,D=!1)}this.g=S}var a={};function c(T){return-128<=T&&128>T?s(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return P(u(-T));for(var b=[],S=1,D=0;T>=S;D++)b[D]=T/S|0,S*=4294967296;return new o(b,0)}function d(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return P(d(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(b,8)),D=f,A=0;A<T.length;A+=8){var k=Math.min(8,T.length-A),C=parseInt(T.substring(A,A+k),b);8>k?(k=u(Math.pow(b,k)),D=D.j(k).add(u(C))):(D=D.j(S),D=D.add(u(C)))}return D}var f=c(0),m=c(1),g=c(16777216);n=o.prototype,n.m=function(){if(x(this))return-P(this).m();for(var T=0,b=1,S=0;S<this.g.length;S++){var D=this.i(S);T+=(0<=D?D:4294967296+D)*b,b*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(w(this))return"0";if(x(this))return"-"+P(this).toString(T);for(var b=u(Math.pow(T,6)),S=this,D="";;){var A=le(S,b).g;S=U(S,A.j(b));var k=((0<S.g.length?S.g[0]:S.h)>>>0).toString(T);if(S=A,w(S))return k+D;for(;6>k.length;)k="0"+k;D=k+D}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function w(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function x(T){return T.h==-1}n.l=function(T){return T=U(this,T),x(T)?-1:w(T)?0:1};function P(T){for(var b=T.g.length,S=[],D=0;D<b;D++)S[D]=~T.g[D];return new o(S,~T.h).add(m)}n.abs=function(){return x(this)?P(this):this},n.add=function(T){for(var b=Math.max(this.g.length,T.g.length),S=[],D=0,A=0;A<=b;A++){var k=D+(this.i(A)&65535)+(T.i(A)&65535),C=(k>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);D=C>>>16,k&=65535,C&=65535,S[A]=C<<16|k}return new o(S,S[S.length-1]&-2147483648?-1:0)};function U(T,b){return T.add(P(b))}n.j=function(T){if(w(this)||w(T))return f;if(x(this))return x(T)?P(this).j(P(T)):P(P(this).j(T));if(x(T))return P(this.j(P(T)));if(0>this.l(g)&&0>T.l(g))return u(this.m()*T.m());for(var b=this.g.length+T.g.length,S=[],D=0;D<2*b;D++)S[D]=0;for(D=0;D<this.g.length;D++)for(var A=0;A<T.g.length;A++){var k=this.i(D)>>>16,C=this.i(D)&65535,Un=T.i(A)>>>16,Vi=T.i(A)&65535;S[2*D+2*A]+=C*Vi,W(S,2*D+2*A),S[2*D+2*A+1]+=k*Vi,W(S,2*D+2*A+1),S[2*D+2*A+1]+=C*Un,W(S,2*D+2*A+1),S[2*D+2*A+2]+=k*Un,W(S,2*D+2*A+2)}for(D=0;D<b;D++)S[D]=S[2*D+1]<<16|S[2*D];for(D=b;D<2*b;D++)S[D]=0;return new o(S,0)};function W(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function Z(T,b){this.g=T,this.h=b}function le(T,b){if(w(b))throw Error("division by zero");if(w(T))return new Z(f,f);if(x(T))return b=le(P(T),b),new Z(P(b.g),P(b.h));if(x(b))return b=le(T,P(b)),new Z(P(b.g),b.h);if(30<T.g.length){if(x(T)||x(b))throw Error("slowDivide_ only works with positive integers.");for(var S=m,D=b;0>=D.l(T);)S=qe(S),D=qe(D);var A=Ce(S,1),k=Ce(D,1);for(D=Ce(D,2),S=Ce(S,2);!w(D);){var C=k.add(D);0>=C.l(T)&&(A=A.add(S),k=C),D=Ce(D,1),S=Ce(S,1)}return b=U(T,A.j(b)),new Z(A,b)}for(A=f;0<=T.l(b);){for(S=Math.max(1,Math.floor(T.m()/b.m())),D=Math.ceil(Math.log(S)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),k=u(S),C=k.j(b);x(C)||0<C.l(T);)S-=D,k=u(S),C=k.j(b);w(k)&&(k=m),A=A.add(k),T=U(T,C)}return new Z(A,T)}n.A=function(T){return le(this,T).h},n.and=function(T){for(var b=Math.max(this.g.length,T.g.length),S=[],D=0;D<b;D++)S[D]=this.i(D)&T.i(D);return new o(S,this.h&T.h)},n.or=function(T){for(var b=Math.max(this.g.length,T.g.length),S=[],D=0;D<b;D++)S[D]=this.i(D)|T.i(D);return new o(S,this.h|T.h)},n.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),S=[],D=0;D<b;D++)S[D]=this.i(D)^T.i(D);return new o(S,this.h^T.h)};function qe(T){for(var b=T.g.length+1,S=[],D=0;D<b;D++)S[D]=T.i(D)<<1|T.i(D-1)>>>31;return new o(S,T.h)}function Ce(T,b){var S=b>>5;b%=32;for(var D=T.g.length-S,A=[],k=0;k<D;k++)A[k]=0<b?T.i(k+S)>>>b|T.i(k+S+1)<<32-b:T.i(k+S);return new o(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nw=LM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Ti=LM.Integer=o}).apply(typeof FM<"u"?FM:typeof self<"u"?self:typeof window<"u"?window:{});var zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Di={};var rw,v9,uc,iw,Wu,Gm,sw,ow,aw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof zm=="object"&&zm];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var R=l[_];if(!(R in p))break e;p=p[R]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,_=!1,R={next:function(){if(!_&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return _=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,_),l.apply(h,R)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function g(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function w(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,R,O){for(var z=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)z[Ye-2]=arguments[Ye];return h.prototype[R].apply(_,z)}}function x(l){let h=l.length;if(0<h){let p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function P(l,h){for(let p=1;p<arguments.length;p++){let _=arguments[p];if(c(_)){let R=l.length||0,O=_.length||0;l.length=R+O;for(let z=0;z<O;z++)l[R+z]=_[z]}else l.push(_)}}class U{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function W(l){return/^[\s\xa0]*$/.test(l)}function Z(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function le(l){return le[" "](l),l}le[" "]=function(){};var qe=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function Ce(l,h,p){for(let _ in l)h.call(p,l[_],_,l)}function T(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function b(l){let h={};for(let p in l)h[p]=l[p];return h}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,h){let p,_;for(let R=1;R<arguments.length;R++){_=arguments[R];for(p in _)l[p]=_[p];for(let O=0;O<S.length;O++)p=S[O],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function A(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function k(l){a.setTimeout(()=>{throw l},0)}function C(){var l=xe;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Un{constructor(){this.h=this.g=null}add(h,p){let _=Vi.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var Vi=new U(()=>new X,l=>l.reset());class X{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let re,oe=!1,xe=new Un,_t=()=>{let l=a.Promise.resolve(void 0);re=()=>{l.then(Bn)}};var Bn=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(p){k(p)}var h=Vi;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}oe=!1};function dt(){this.s=this.s,this.C=this.C}dt.prototype.s=!1,dt.prototype.ma=function(){this.s||(this.s=!0,this.N())},dt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var tt=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l})();function Ui(l,h){if(et.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(qe){e:{try{le(h.nodeName);var R=!0;break e}catch{}R=!1}R||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ny[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ui.aa.h.call(this)}}w(Ui,et);var Ny={2:"touch",3:"pen",4:"mouse"};Ui.prototype.h=function(){Ui.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ht="closure_listenable_"+(1e6*Math.random()|0),ti=0;function gn(l,h,p,_,R){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=R,this.key=++ti,this.da=this.fa=!1}function ni(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Bi(l){this.src=l,this.g={},this.h=0}Bi.prototype.add=function(l,h,p,_,R){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var z=Oy(l,h,_,R);return-1<z?(h=l[z],p||(h.fa=!1)):(h=new gn(h,this.src,O,!!_,R),h.fa=p,l.push(h)),h};function My(l,h){var p=h.type;if(p in l.g){var _=l.g[p],R=Array.prototype.indexOf.call(_,h,void 0),O;(O=0<=R)&&Array.prototype.splice.call(_,R,1),O&&(ni(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Oy(l,h,p,_){for(var R=0;R<l.length;++R){var O=l[R];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==_)return R}return-1}var Fy="closure_lm_"+(1e6*Math.random()|0),Ly={};function OT(l,h,p,_,R){if(_&&_.once)return LT(l,h,p,_,R);if(Array.isArray(h)){for(var O=0;O<h.length;O++)OT(l,h[O],p,_,R);return null}return p=jy(p),l&&l[ht]?l.K(h,p,u(_)?!!_.capture:!!_,R):FT(l,h,p,!1,_,R)}function FT(l,h,p,_,R,O){if(!h)throw Error("Invalid event type");var z=u(R)?!!R.capture:!!R,Ye=Uy(l);if(Ye||(l[Fy]=Ye=new Bi(l)),p=Ye.add(h,p,_,z,O),p.proxy)return p;if(_=T2(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)tt||(R=z),R===void 0&&(R=!1),l.addEventListener(h.toString(),_,R);else if(l.attachEvent)l.attachEvent(UT(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function T2(){function l(p){return h.call(l.src,l.listener,p)}let h=D2;return l}function LT(l,h,p,_,R){if(Array.isArray(h)){for(var O=0;O<h.length;O++)LT(l,h[O],p,_,R);return null}return p=jy(p),l&&l[ht]?l.L(h,p,u(_)?!!_.capture:!!_,R):FT(l,h,p,!0,_,R)}function VT(l,h,p,_,R){if(Array.isArray(h))for(var O=0;O<h.length;O++)VT(l,h[O],p,_,R);else _=u(_)?!!_.capture:!!_,p=jy(p),l&&l[ht]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=Oy(O,p,_,R),-1<p&&(ni(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Uy(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Oy(h,p,_,R)),(p=-1<l?h[l]:null)&&Vy(p))}function Vy(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ht])My(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(UT(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=Uy(h))?(My(p,l),p.h==0&&(p.src=null,h[Fy]=null)):ni(l)}}}function UT(l){return l in Ly?Ly[l]:Ly[l]="on"+l}function D2(l,h){if(l.da)l=!0;else{h=new Ui(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&Vy(l),l=p.call(_,h)}return l}function Uy(l){return l=l[Fy],l instanceof Bi?l:null}var By="__closure_events_fn_"+(1e9*Math.random()>>>0);function jy(l){return typeof l=="function"?l:(l[By]||(l[By]=function(h){return l.handleEvent(h)}),l[By])}function qt(){dt.call(this),this.i=new Bi(this),this.M=this,this.F=null}w(qt,dt),qt.prototype[ht]=!0,qt.prototype.removeEventListener=function(l,h,p,_){VT(this,l,h,p,_)};function nn(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new et(h,l);else if(h instanceof et)h.target=h.target||l;else{var R=h;h=new et(_,l),D(h,R)}if(R=!0,p)for(var O=p.length-1;0<=O;O--){var z=h.g=p[O];R=Xd(z,_,!0,h)&&R}if(z=h.g=l,R=Xd(z,_,!0,h)&&R,R=Xd(z,_,!1,h)&&R,p)for(O=0;O<p.length;O++)z=h.g=p[O],R=Xd(z,_,!1,h)&&R}qt.prototype.N=function(){if(qt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)ni(p[_]);delete l.g[h],l.h--}}this.F=null},qt.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},qt.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function Xd(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var R=!0,O=0;O<h.length;++O){var z=h[O];if(z&&!z.da&&z.capture==p){var Ye=z.listener,Bt=z.ha||z.src;z.fa&&My(l.i,z),R=Ye.call(Bt,_)!==!1&&R}}return R&&!_.defaultPrevented}function BT(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function jT(l){l.g=BT(()=>{l.g=null,l.i&&(l.i=!1,jT(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class A2 extends dt{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:jT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function il(l){dt.call(this),this.h=l,this.g={}}w(il,dt);var $T=[];function HT(l){Ce(l.g,function(h,p){this.g.hasOwnProperty(p)&&Vy(h)},l),l.g={}}il.prototype.N=function(){il.aa.N.call(this),HT(this)},il.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $y=a.JSON.stringify,x2=a.JSON.parse,R2=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Hy(){}Hy.prototype.h=null;function zT(l){return l.h||(l.h=l.i())}function GT(){}var sl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zy(){et.call(this,"d")}w(zy,et);function Gy(){et.call(this,"c")}w(Gy,et);var Ls={},qT=null;function eh(){return qT=qT||new qt}Ls.La="serverreachability";function WT(l){et.call(this,Ls.La,l)}w(WT,et);function ol(l){let h=eh();nn(h,new WT(h))}Ls.STAT_EVENT="statevent";function KT(l,h){et.call(this,Ls.STAT_EVENT,l),this.stat=h}w(KT,et);function rn(l){let h=eh();nn(h,new KT(h,l))}Ls.Ma="timingevent";function YT(l,h){et.call(this,Ls.Ma,l),this.size=h}w(YT,et);function al(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function cl(){this.g=!0}cl.prototype.xa=function(){this.g=!1};function k2(l,h,p,_,R,O){l.info(function(){if(l.g)if(O)for(var z="",Ye=O.split("&"),Bt=0;Bt<Ye.length;Bt++){var Ve=Ye[Bt].split("=");if(1<Ve.length){var Wt=Ve[0];Ve=Ve[1];var Kt=Wt.split("_");z=2<=Kt.length&&Kt[1]=="type"?z+(Wt+"="+Ve+"&"):z+(Wt+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+_+") [attempt "+R+"]: "+h+`
`+p+`
`+z})}function P2(l,h,p,_,R,O,z){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+R+"]: "+h+`
`+p+`
`+O+" "+z})}function sa(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+M2(l,p)+(_?" "+_:"")})}function N2(l,h){l.info(function(){return"TIMEOUT: "+h})}cl.prototype.info=function(){};function M2(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var R=_[1];if(Array.isArray(R)&&!(1>R.length)){var O=R[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<R.length;z++)R[z]=""}}}}return $y(p)}catch{return h}}var th={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},QT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qy;function nh(){}w(nh,Hy),nh.prototype.g=function(){return new XMLHttpRequest},nh.prototype.i=function(){return{}},qy=new nh;function ji(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new il(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new JT}function JT(){this.i=null,this.g="",this.h=!1}var ZT={},Wy={};function Ky(l,h,p){l.L=1,l.v=oh(ri(h)),l.m=p,l.P=!0,XT(l,null)}function XT(l,h){l.F=Date.now(),rh(l),l.A=ri(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),fD(p.i,"t",_),l.C=0,p=l.j.J,l.h=new JT,l.g=kD(l.j,p?h:null,!l.m),0<l.O&&(l.M=new A2(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var R="readystatechange";Array.isArray(R)||(R&&($T[0]=R.toString()),R=$T);for(var O=0;O<R.length;O++){var z=OT(p,R[O],_||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?b(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),ol(),k2(l.i,l.u,l.A,l.l,l.R,l.m)}ji.prototype.ca=function(l){l=l.target;let h=this.M;h&&ii(l)==3?h.j():this.Y(l)},ji.prototype.Y=function(l){try{if(l==this.g)e:{let Kt=ii(this.g);var h=this.g.Ba();let ca=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||ED(this.g)))){this.J||Kt!=4||h==7||(h==8||0>=ca?ol(3):ol(2)),Yy(this);var p=this.g.Z();this.X=p;t:if(eD(this)){var _=ED(this.g);l="";var R=_.length,O=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vs(this),ll(this);var z="";break t}this.h.i=new a.TextDecoder}for(h=0;h<R;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(O&&h==R-1)});_.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=p==200,P2(this.i,this.u,this.A,this.l,this.R,Kt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,Bt=this.g;if((Ye=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Ye)){var Ve=Ye;break t}}Ve=null}if(p=Ve)sa(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qy(this,p);else{this.o=!1,this.s=3,rn(12),Vs(this),ll(this);break e}}if(this.P){p=!0;let nr;for(;!this.J&&this.C<z.length;)if(nr=O2(this,z),nr==Wy){Kt==4&&(this.s=4,rn(14),p=!1),sa(this.i,this.l,null,"[Incomplete Response]");break}else if(nr==ZT){this.s=4,rn(15),sa(this.i,this.l,z,"[Invalid Chunk]"),p=!1;break}else sa(this.i,this.l,nr,null),Qy(this,nr);if(eD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||z.length!=0||this.h.h||(this.s=1,rn(16),p=!1),this.o=this.o&&p,!p)sa(this.i,this.l,z,"[Invalid Chunked Response]"),Vs(this),ll(this);else if(0<z.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),n_(Wt),Wt.M=!0,rn(11))}}else sa(this.i,this.l,z,null),Qy(this,z);Kt==4&&Vs(this),this.o&&!this.J&&(Kt==4?DD(this.j,this):(this.o=!1,rh(this)))}else Z2(this.g),p==400&&0<z.indexOf("Unknown SID")?(this.s=3,rn(12)):(this.s=0,rn(13)),Vs(this),ll(this)}}}catch{}finally{}};function eD(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function O2(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?Wy:(p=Number(h.substring(p,_)),isNaN(p)?ZT:(_+=1,_+p>h.length?Wy:(h=h.slice(_,_+p),l.C=_+p,h)))}ji.prototype.cancel=function(){this.J=!0,Vs(this)};function rh(l){l.S=Date.now()+l.I,tD(l,l.I)}function tD(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=al(m(l.ba,l),h)}function Yy(l){l.B&&(a.clearTimeout(l.B),l.B=null)}ji.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(N2(this.i,this.A),this.L!=2&&(ol(),rn(17)),Vs(this),this.s=2,ll(this)):tD(this,this.S-l)};function ll(l){l.j.G==0||l.J||DD(l.j,l)}function Vs(l){Yy(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,HT(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Qy(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Jy(p.h,l))){if(!l.K&&Jy(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var R=_;if(R[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)dh(p),lh(p);else break e;t_(p),rn(18)}}else p.za=R[1],0<p.za-p.T&&37500>R[2]&&p.F&&p.v==0&&!p.C&&(p.C=al(m(p.Za,p),6e3));if(1>=iD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Bs(p,11)}else if((l.K||p.g==l)&&dh(p),!W(h))for(R=p.Da.g.parse(h),h=0;h<R.length;h++){let Ve=R[h];if(p.T=Ve[0],Ve=Ve[1],p.G==2)if(Ve[0]=="c"){p.K=Ve[1],p.ia=Ve[2];let Wt=Ve[3];Wt!=null&&(p.la=Wt,p.j.info("VER="+p.la));let Kt=Ve[4];Kt!=null&&(p.Aa=Kt,p.j.info("SVER="+p.Aa));let ca=Ve[5];ca!=null&&typeof ca=="number"&&0<ca&&(_=1.5*ca,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;let nr=l.g;if(nr){let fh=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fh){var O=_.h;O.g||fh.indexOf("spdy")==-1&&fh.indexOf("quic")==-1&&fh.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Zy(O,O.h),O.h=null))}if(_.D){let r_=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;r_&&(_.ya=r_,nt(_.I,_.D,r_))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var z=l;if(_.qa=RD(_,_.J?_.ia:null,_.W),z.K){sD(_.h,z);var Ye=z,Bt=_.L;Bt&&(Ye.I=Bt),Ye.B&&(Yy(Ye),rh(Ye)),_.g=z}else CD(_);0<p.i.length&&uh(p)}else Ve[0]!="stop"&&Ve[0]!="close"||Bs(p,7);else p.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Bs(p,7):e_(p):Ve[0]!="noop"&&p.l&&p.l.ta(Ve),p.v=0)}}ol(4)}catch{}}var F2=class{constructor(l,h){this.g=l,this.map=h}};function nD(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rD(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function iD(l){return l.h?1:l.g?l.g.size:0}function Jy(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Zy(l,h){l.g?l.g.add(h):l.h=h}function sD(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}nD.prototype.cancel=function(){if(this.i=oD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function oD(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return x(l.i)}function L2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function V2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let _ in l)h[p++]=_;return h}}}function aD(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=V2(l),_=L2(l),R=_.length,O=0;O<R;O++)h.call(void 0,_[O],p&&p[O],l)}var cD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function U2(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),R=null;if(0<=_){var O=l[p].substring(0,_);R=l[p].substring(_+1)}else O=l[p];h(O,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Us(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Us){this.h=l.h,ih(this,l.j),this.o=l.o,this.g=l.g,sh(this,l.s),this.l=l.l;var h=l.i,p=new hl;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),lD(this,p),this.m=l.m}else l&&(h=String(l).match(cD))?(this.h=!1,ih(this,h[1]||"",!0),this.o=ul(h[2]||""),this.g=ul(h[3]||"",!0),sh(this,h[4]),this.l=ul(h[5]||"",!0),lD(this,h[6]||"",!0),this.m=ul(h[7]||"")):(this.h=!1,this.i=new hl(null,this.h))}Us.prototype.toString=function(){var l=[],h=this.j;h&&l.push(dl(h,uD,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(dl(h,uD,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(dl(p,p.charAt(0)=="/"?$2:j2,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",dl(p,z2)),l.join("")};function ri(l){return new Us(l)}function ih(l,h,p){l.j=p?ul(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function sh(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function lD(l,h,p){h instanceof hl?(l.i=h,G2(l.i,l.h)):(p||(h=dl(h,H2)),l.i=new hl(h,l.h))}function nt(l,h,p){l.i.set(h,p)}function oh(l){return nt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ul(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function dl(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,B2),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function B2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var uD=/[#\/\?@]/g,j2=/[#\?:]/g,$2=/[#\?]/g,H2=/[#\?@]/g,z2=/#/g;function hl(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function $i(l){l.g||(l.g=new Map,l.h=0,l.i&&U2(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=hl.prototype,n.add=function(l,h){$i(this),this.i=null,l=oa(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function dD(l,h){$i(l),h=oa(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function hD(l,h){return $i(l),h=oa(l,h),l.g.has(h)}n.forEach=function(l,h){$i(this),this.g.forEach(function(p,_){p.forEach(function(R){l.call(h,R,_,this)},this)},this)},n.na=function(){$i(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){let R=l[_];for(let O=0;O<R.length;O++)p.push(h[_])}return p},n.V=function(l){$i(this);let h=[];if(typeof l=="string")hD(this,l)&&(h=h.concat(this.g.get(oa(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return $i(this),this.i=null,l=oa(this,l),hD(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function fD(l,h,p){dD(l,h),0<p.length&&(l.i=null,l.g.set(oa(l,h),x(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];let O=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var R=O;z[_]!==""&&(R+="="+encodeURIComponent(String(z[_]))),l.push(R)}}return this.i=l.join("&")};function oa(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function G2(l,h){h&&!l.j&&($i(l),l.i=null,l.g.forEach(function(p,_){var R=_.toLowerCase();_!=R&&(dD(this,_),fD(this,R,p))},l)),l.j=h}function q2(l,h){let p=new cl;if(a.Image){let _=new Image;_.onload=g(Hi,p,"TestLoadImage: loaded",!0,h,_),_.onerror=g(Hi,p,"TestLoadImage: error",!1,h,_),_.onabort=g(Hi,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=g(Hi,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function W2(l,h){let p=new cl,_=new AbortController,R=setTimeout(()=>{_.abort(),Hi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(O=>{clearTimeout(R),O.ok?Hi(p,"TestPingServer: ok",!0,h):Hi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),Hi(p,"TestPingServer: error",!1,h)})}function Hi(l,h,p,_,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),_(p)}catch{}}function K2(){this.g=new R2}function Y2(l,h,p){let _=p||"";try{aD(l,function(R,O){let z=R;u(R)&&(z=$y(R)),h.push(_+O+"="+encodeURIComponent(z))})}catch(R){throw h.push(_+"type="+encodeURIComponent("_badmap")),R}}function fl(l){this.l=l.Ub||null,this.j=l.eb||!1}w(fl,Hy),fl.prototype.g=function(){return new ah(this.l,this.j)},fl.prototype.i=(function(l){return function(){return l}})({});function ah(l,h){qt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(ah,qt),n=ah.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,ml(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pl(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ml(this)),this.g&&(this.readyState=3,ml(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pD(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function pD(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?pl(this):ml(this),this.readyState==3&&pD(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,pl(this))},n.Qa=function(l){this.g&&(this.response=l,pl(this))},n.ga=function(){this.g&&pl(this)};function pl(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ml(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function ml(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ah.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function mD(l){let h="";return Ce(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Xy(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=mD(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):nt(l,h,p))}function ft(l){qt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ft,qt);var Q2=/^https?$/i,J2=["POST","PUT"];n=ft.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qy.g(),this.v=this.o?zT(this.o):zT(qy),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){gD(this,O);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var R in _)p.set(R,_[R]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let O of _.keys())p.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),R=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(J2,h,void 0))||_||R||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,z]of p)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vD(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){gD(this,O)}};function gD(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,yD(l),ch(l)}function yD(l){l.A||(l.A=!0,nn(l,"complete"),nn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,nn(this,"complete"),nn(this,"abort"),ch(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ch(this,!0)),ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?_D(this):this.bb())},n.bb=function(){_D(this)};function _D(l){if(l.h&&typeof o<"u"&&(!l.v[1]||ii(l)!=4||l.Z()!=2)){if(l.u&&ii(l)==4)BT(l.Ea,0,l);else if(nn(l,"readystatechange"),ii(l)==4){l.h=!1;try{let z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=z===0){var R=String(l.D).match(cD)[1]||null;!R&&a.self&&a.self.location&&(R=a.self.location.protocol.slice(0,-1)),_=!Q2.test(R?R.toLowerCase():"")}p=_}if(p)nn(l,"complete"),nn(l,"success");else{l.m=6;try{var O=2<ii(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",yD(l)}}finally{ch(l)}}}}function ch(l,h){if(l.g){vD(l);let p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||nn(l,"ready");try{p.onreadystatechange=_}catch{}}}function vD(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function ii(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),x2(h)}};function ED(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Z2(l){let h={};l=(l.g&&2<=ii(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(W(l[_]))continue;var p=A(l[_]);let R=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=h[R]||[];h[R]=O,O.push(p)}T(h,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function bD(l){this.Aa=0,this.i=[],this.j=new cl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gl("baseRetryDelayMs",5e3,l),this.cb=gl("retryDelaySeedMs",1e4,l),this.Wa=gl("forwardChannelMaxRetries",2,l),this.wa=gl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new nD(l&&l.concurrentRequestLimit),this.Da=new K2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=bD.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,_){rn(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=RD(this,null,this.W),uh(this)};function e_(l){if(ID(l),l.G==3){var h=l.U++,p=ri(l.I);if(nt(p,"SID",l.K),nt(p,"RID",h),nt(p,"TYPE","terminate"),yl(l,p),h=new ji(l,l.j,h),h.L=2,h.v=oh(ri(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=kD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),rh(h)}xD(l)}function lh(l){l.g&&(n_(l),l.g.cancel(),l.g=null)}function ID(l){lh(l),l.u&&(a.clearTimeout(l.u),l.u=null),dh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function uh(l){if(!rD(l.h)&&!l.s){l.s=!0;var h=l.Ga;re||_t(),oe||(re(),oe=!0),xe.add(h,l),l.B=0}}function X2(l,h){return iD(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=al(m(l.Ga,l,h),AD(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let R=new ji(this,this.j,l),O=this.o;if(this.S&&(O?(O=b(O),D(O,this.S)):O=this.S),this.m!==null||this.O||(R.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=SD(this,R,h),p=ri(this.I),nt(p,"RID",l),nt(p,"CVER",22),this.D&&nt(p,"X-HTTP-Session-Id",this.D),yl(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(mD(O)))+"&"+h:this.m&&Xy(p,this.m,O)),Zy(this.h,R),this.Ua&&nt(p,"TYPE","init"),this.P?(nt(p,"$req",h),nt(p,"SID","null"),R.T=!0,Ky(R,p,null)):Ky(R,p,h),this.G=2}}else this.G==3&&(l?wD(this,l):this.i.length==0||rD(this.h)||wD(this))};function wD(l,h){var p;h?p=h.l:p=l.U++;let _=ri(l.I);nt(_,"SID",l.K),nt(_,"RID",p),nt(_,"AID",l.T),yl(l,_),l.m&&l.o&&Xy(_,l.m,l.o),p=new ji(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=SD(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Zy(l.h,p),Ky(p,_,h)}function yl(l,h){l.H&&Ce(l.H,function(p,_){nt(h,_,p)}),l.l&&aD({},function(p,_){nt(h,_,p)})}function SD(l,h,p){p=Math.min(l.i.length,p);var _=l.l?m(l.l.Na,l.l,l):null;e:{var R=l.i;let O=-1;for(;;){let z=["count="+p];O==-1?0<p?(O=R[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let Ye=!0;for(let Bt=0;Bt<p;Bt++){let Ve=R[Bt].g,Wt=R[Bt].map;if(Ve-=O,0>Ve)O=Math.max(0,R[Bt].g-100),Ye=!1;else try{Y2(Wt,z,"req"+Ve+"_")}catch{_&&_(Wt)}}if(Ye){_=z.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function CD(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;re||_t(),oe||(re(),oe=!0),xe.add(h,l),l.v=0}}function t_(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=al(m(l.Fa,l),AD(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,TD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=al(m(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rn(10),lh(this),TD(this))};function n_(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function TD(l){l.g=new ji(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=ri(l.qa);nt(h,"RID","rpc"),nt(h,"SID",l.K),nt(h,"AID",l.T),nt(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&nt(h,"TO",l.ja),nt(h,"TYPE","xmlhttp"),yl(l,h),l.m&&l.o&&Xy(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=oh(ri(h)),p.m=null,p.P=!0,XT(p,l)}n.Za=function(){this.C!=null&&(this.C=null,lh(this),t_(this),rn(19))};function dh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function DD(l,h){var p=null;if(l.g==h){dh(l),n_(l),l.g=null;var _=2}else if(Jy(l.h,h))p=h.D,sD(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var R=l.B;_=eh(),nn(_,new YT(_,p)),uh(l)}else CD(l);else if(R=h.s,R==3||R==0&&0<h.X||!(_==1&&X2(l,h)||_==2&&t_(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),R){case 1:Bs(l,5);break;case 4:Bs(l,10);break;case 3:Bs(l,6);break;default:Bs(l,2)}}}function AD(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Bs(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),_=l.Xa;let R=!_;_=new Us(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ih(_,"https"),oh(_),R?q2(_.toString(),p):W2(_.toString(),p)}else rn(2);l.G=0,l.l&&l.l.sa(h),xD(l),ID(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function xD(l){if(l.G=0,l.ka=[],l.l){let h=oD(l.h);(h.length!=0||l.i.length!=0)&&(P(l.ka,h),P(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function RD(l,h,p){var _=p instanceof Us?ri(p):new Us(p);if(_.g!="")h&&(_.g=h+"."+_.g),sh(_,_.s);else{var R=a.location;_=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;var O=new Us(null);_&&ih(O,_),h&&(O.g=h),R&&sh(O,R),p&&(O.l=p),_=O}return p=l.D,h=l.ya,p&&h&&nt(_,p,h),nt(_,"VER",l.la),yl(l,_),_}function kD(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new ft(new fl({eb:p})):new ft(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function PD(){}n=PD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function hh(){}hh.prototype.g=function(l,h){return new Dn(l,h)};function Dn(l,h){qt.call(this),this.g=new bD(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!W(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!W(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new aa(this)}w(Dn,qt),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){e_(this.g)},Dn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=$y(l),l=p);h.i.push(new F2(h.Ya++,l)),h.G==3&&uh(h)},Dn.prototype.N=function(){this.g.l=null,delete this.j,e_(this.g),delete this.g,Dn.aa.N.call(this)};function ND(l){zy.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}w(ND,zy);function MD(){Gy.call(this),this.status=1}w(MD,Gy);function aa(l){this.g=l}w(aa,PD),aa.prototype.ua=function(){nn(this.g,"a")},aa.prototype.ta=function(l){nn(this.g,new ND(l))},aa.prototype.sa=function(l){nn(this.g,new MD)},aa.prototype.ra=function(){nn(this.g,"b")},hh.prototype.createWebChannel=hh.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,aw=Di.createWebChannelTransport=function(){return new hh},ow=Di.getStatEventTarget=function(){return eh()},sw=Di.Event=Ls,Gm=Di.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},th.NO_ERROR=0,th.TIMEOUT=8,th.HTTP_ERROR=6,Wu=Di.ErrorCode=th,QT.COMPLETE="complete",iw=Di.EventType=QT,GT.EventType=sl,sl.OPEN="a",sl.CLOSE="b",sl.ERROR="c",sl.MESSAGE="d",qt.prototype.listen=qt.prototype.K,uc=Di.WebChannel=GT,v9=Di.FetchXmlHttpFactory=fl,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,rw=Di.XhrIo=ft}).apply(typeof zm<"u"?zm:typeof self<"u"?self:typeof window<"u"?window:{});var VM="@firebase/firestore",UM="4.8.0";var Lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");var Nc="11.10.0";var Bo=new $r("@firebase/firestore");function dc(){return Bo.logLevel}function J(n,...e){if(Bo.logLevel<=ke.DEBUG){let t=e.map(QS);Bo.debug(`Firestore (${Nc}): ${n}`,...t)}}function xi(n,...e){if(Bo.logLevel<=ke.ERROR){let t=e.map(QS);Bo.error(`Firestore (${Nc}): ${n}`,...t)}}function Rs(n,...e){if(Bo.logLevel<=ke.WARN){let t=e.map(QS);Bo.warn(`Firestore (${Nc}): ${n}`,...t)}}function QS(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ae(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,kO(n,r,t)}function kO(n,e,t){let r=`FIRESTORE (${Nc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xi(r),new Error(r)}function Fe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||kO(e,i,r)}function ge(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends Pn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Zm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lt.UNAUTHENTICATED))}shutdown(){}},hw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fw=class{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Xn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string",31837,{l:r}),new Zm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}},pw=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},mw=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new pw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Xm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},gw=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Fe(this.o===void 0,3512);let r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xm(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Xm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function E9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function PO(){return new TextEncoder}var td=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=E9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ae(n,e){return n<e?-1:n>e?1:0}function yw(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ae(r,i);{let s=PO(),o=b9(s.encode(BM(n,t)),s.encode(BM(e,t)));return o!==0?o:Ae(r,i)}}t+=r>65535?2:1}return Ae(n.length,e.length)}function BM(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function b9(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ae(n[t],e[t]);return Ae(n.length,e.length)}function _c(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var jM="__name__",eg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ae(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ae(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ae(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):yw(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ti.fromString(e.substring(4,e.length-2))}},Xe=class n extends eg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},I9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mn=class n extends eg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return I9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jM}static keyField(){return new n([jM])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new G(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ce=class n{constructor(e){this.path=e}static fromPath(e){return new n(Xe.fromString(e))}static fromName(e){return new n(Xe.fromString(e).popFirst(5))}static empty(){return new n(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Xe(e.slice()))}};function NO(n,e,t){if(!t)throw new G(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function w9(n,e,t,r){if(e===!0&&r===!0)throw new G(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $M(n){if(!ce.isDocumentKey(n))throw new G(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function HM(n){if(ce.isDocumentKey(n))throw new G(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function MO(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ng(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ae(12329,{type:typeof n})}function On(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ng(n);throw new G(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function S9(n,e){if(e<=0)throw new G(V.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Dt(n,e){let t={typeString:n};return e&&(t.value=e),t}function gd(n,e){if(!MO(n))throw new G(V.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new G(V.INVALID_ARGUMENT,t);return!0}var zM=-62135596800,GM=1e6,At=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*GM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zM)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GM}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gd(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-zM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};At._jsonSchemaVersion="firestore/timestamp/1.0",At._jsonSchema={type:Dt("string",At._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};var pe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new At(0,0))}static max(){return new n(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var nd=-1,_w=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};_w.UNKNOWN_ID=-1;function C9(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new At(t+1,0):new At(t,r));return new jo(i,ce.empty(),e)}function T9(n){return new jo(n.readTime,n.key,nd)}var jo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(pe.min(),ce.empty(),nd)}static max(){return new n(pe.max(),ce.empty(),nd)}};function D9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ae(n.largestBatchId,e.largestBatchId))}var A9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Mc(n){if(n.code!==V.FAILED_PRECONDITION||n.message!==A9)throw n;J("LocalStore","Unexpectedly lost primary lease")}var j=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function x9(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Oc(n){return n.name==="IndexedDbTransactionError"}var JS=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),ZS=-1;function yd(n){return n==null}function rd(n){return n===0&&1/n==-1/0}function R9(n){return typeof n=="number"&&Number.isInteger(n)&&!rd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var OO="";function k9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qM(e)),e=P9(n.get(t),e);return qM(e)}function P9(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case OO:t+="";break;default:t+=s}}return t}function qM(n){return n+OO+""}var N9="remoteDocuments",FO="owner";var LO="mutationQueues";var VO="mutations";var UO="documentMutations",M9="remoteDocumentsV14";var BO="remoteDocumentGlobal";var jO="targets";var $O="targetDocuments";var HO="targetGlobal",zO="collectionParents";var GO="clientMetadata";var qO="bundles";var WO="namedQueries";var O9="indexConfiguration";var F9="indexState";var L9="indexEntries";var KO="documentOverlays";var V9="globals";var U9=[LO,VO,UO,N9,jO,FO,HO,$O,GO,BO,zO,qO,WO],i0e=[...U9,KO],B9=[LO,VO,UO,M9,jO,FO,HO,$O,GO,BO,zO,qO,WO,KO],j9=B9,$9=[...j9,O9,F9,L9];var s0e=[...$9,V9];function WM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Os(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var yt=class n{constructor(e,t){this.comparator=e,this.root=t||Wr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mc(this.root,e,this.comparator,!1)}getReverseIterator(){return new mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mc(this.root,e,this.comparator,!0)}},mc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}};Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1;Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Wr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Vt=class n{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tg(this.data.getIterator())}getIteratorFrom(e){return new tg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},tg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Zn=class n{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Vt(Mn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _c(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ng=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var en=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ng("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};en.EMPTY_BYTE_STRING=new en("");var H9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(n){if(Fe(!!n,39018),typeof n=="string"){let e=0,t=H9.exec(n);if(Fe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(n.seconds),nanos:lt(n.nanos)}}function lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ki(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}var QO="server_timestamp",JO="__type__",ZO="__previous_value__",XO="__local_write_time__";function XS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[JO])===null||t===void 0?void 0:t.stringValue)===QO}function Mg(n){let e=n.mapValue.fields[ZO];return XS(e)?Mg(e):e}function id(n){let e=Ri(n.mapValue.fields[XO].timestampValue);return new At(e.seconds,e.nanos)}var Ew=class{constructor(e,t,r,i,s,o,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},rg="(default)",ig=class n{constructor(e,t){this.projectId=e,this.database=t||rg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===rg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var eC="__type__",eF="__max__",qm={mapValue:{fields:{__type__:{stringValue:eF}}}},tC="__vector__",vc="value";function ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?XS(n)?4:nF(n)?9007199254740991:tF(n)?10:11:ae(28295,{value:n})}function Yr(n,e){if(n===e)return!0;let t=ks(n);if(t!==ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return id(n).isEqual(id(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ri(i.timestampValue),a=Ri(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return ki(i.bytesValue).isEqual(ki(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return lt(i.geoPointValue.latitude)===lt(s.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return lt(i.integerValue)===lt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=lt(i.doubleValue),a=lt(s.doubleValue);return o===a?rd(o)===rd(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return _c(n.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(WM(o)!==WM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Yr(o[c],a[c])))return!1;return!0})(n,e);default:return ae(52216,{left:n})}}function sd(n,e){return(n.values||[]).find(t=>Yr(t,e))!==void 0}function Ec(n,e){if(n===e)return 0;let t=ks(n),r=ks(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=lt(s.integerValue||s.doubleValue),c=lt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return KM(n.timestampValue,e.timestampValue);case 4:return KM(id(n),id(e));case 5:return yw(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=ki(s),c=ki(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=Ae(a[u],c[u]);if(d!==0)return d}return Ae(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ae(lt(s.latitude),lt(o.latitude));return a!==0?a:Ae(lt(s.longitude),lt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return YM(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,u,d;let f=s.fields||{},m=o.fields||{},g=(a=f[vc])===null||a===void 0?void 0:a.arrayValue,w=(c=m[vc])===null||c===void 0?void 0:c.arrayValue,x=Ae(((u=g?.values)===null||u===void 0?void 0:u.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:YM(g,w)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===qm.mapValue&&o===qm.mapValue)return 0;if(s===qm.mapValue)return 1;if(o===qm.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=yw(c[f],d[f]);if(m!==0)return m;let g=Ec(a[c[f]],u[d[f]]);if(g!==0)return g}return Ae(c.length,d.length)})(n.mapValue,e.mapValue);default:throw ae(23264,{le:t})}}function KM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ae(n,e);let t=Ri(n),r=Ri(e),i=Ae(t.seconds,r.seconds);return i!==0?i:Ae(t.nanos,r.nanos)}function YM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Ec(t[i],r[i]);if(s)return s}return Ae(t.length,r.length)}function bc(n){return bw(n)}function bw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Ri(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ki(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=bw(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${bw(t.fields[o])}`;return i+"}"})(n.mapValue):ae(61005,{value:n})}function Ym(n){switch(ks(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Mg(n);return e?16+Ym(e):16;case 5:return 2*n.stringValue.length;case 6:return ki(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Ym(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Os(r.fields,(s,o)=>{i+=s.length+Ym(o)}),i})(n.mapValue);default:throw ae(13486,{value:n})}}function QM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Iw(n){return!!n&&"integerValue"in n}function nC(n){return!!n&&"arrayValue"in n}function JM(n){return!!n&&"nullValue"in n}function ZM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qm(n){return!!n&&"mapValue"in n}function tF(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[eC])===null||t===void 0?void 0:t.stringValue)===tC}function Qu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Os(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===eF}var a0e={mapValue:{fields:{[eC]:{stringValue:tC},[vc]:{arrayValue:{}}}}};var wn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(t)}setAll(e){let t=Mn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Qu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Qm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Os(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Qu(this.value))}};function rF(n){let e=[];return Os(n.fields,(t,r)=>{let i=new Mn([t]);if(Qm(r)){let s=rF(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Zn(e)}var Ln=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,pe.min(),pe.min(),pe.min(),wn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,pe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,pe.min(),pe.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,pe.min(),pe.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ic=class{constructor(e,t){this.position=e,this.inclusive=t}};function XM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),t.key):r=Ec(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function eO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yr(n.position[t],e.position[t]))return!1;return!0}var $o=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function z9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var sg=class{},Tt=class n extends sg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Sw(e,t,r):t==="array-contains"?new Dw(e,r):t==="in"?new Aw(e,r):t==="not-in"?new xw(e,r):t==="array-contains-any"?new Rw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Cw(e,r):new Tw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ec(t,this.value)):t!==null&&ks(this.value)===ks(t)&&this.matchesComparison(Ec(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},br=class n extends sg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return iF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function iF(n){return n.op==="and"}function sF(n){return G9(n)&&iF(n)}function G9(n){for(let e of n.filters)if(e instanceof br)return!1;return!0}function ww(n){if(n instanceof Tt)return n.field.canonicalString()+n.op.toString()+bc(n.value);if(sF(n))return n.filters.map(e=>ww(e)).join(",");{let e=n.filters.map(t=>ww(t)).join(",");return`${n.op}(${e})`}}function oF(n,e){return n instanceof Tt?(function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&Yr(r.value,i.value)})(n,e):n instanceof br?(function(r,i){return i instanceof br&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&oF(o,i.filters[a]),!0):!1})(n,e):void ae(19439)}function aF(n){return n instanceof Tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${bc(t.value)}`})(n):n instanceof br?(function(t){return t.op.toString()+" {"+t.getFilters().map(aF).join(" ,")+"}"})(n):"Filter"}var Sw=class extends Tt{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){let t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}},Cw=class extends Tt{constructor(e,t){super(e,"in",t),this.keys=cF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Tw=class extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=cF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function cF(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ce.fromName(r.referenceValue))}var Dw=class extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nC(t)&&sd(t.arrayValue,this.value)}},Aw=class extends Tt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&sd(this.value.arrayValue,t)}},xw=class extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!sd(this.value.arrayValue,t)}},Rw=class extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sd(this.value.arrayValue,r))}};var kw=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function tO(n,e=null,t=[],r=[],i=null,s=null,o=null){return new kw(n,e,t,r,i,s,o)}function rC(n){let e=ge(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ww(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),yd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>bc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>bc(r)).join(",")),e.Pe=t}return e.Pe}function iC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!z9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eO(n.startAt,e.startAt)&&eO(n.endAt,e.endAt)}function Pw(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ps=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function q9(n,e,t,r,i,s,o,a){return new Ps(n,e,t,r,i,s,o,a)}function Og(n){return new Ps(n)}function nO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lF(n){return n.collectionGroup!==null}function Ju(n){let e=ge(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Vt(Mn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new $o(s,r))}),t.has(Mn.keyField().canonicalString())||e.Te.push(new $o(Mn.keyField(),r))}return e.Te}function Kr(n){let e=ge(n);return e.Ie||(e.Ie=W9(e,Ju(n))),e.Ie}function W9(n,e){if(n.limitType==="F")return tO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new $o(i.field,s)});let t=n.endAt?new Ic(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ic(n.startAt.position,n.startAt.inclusive):null;return tO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Nw(n,e){let t=n.filters.concat([e]);return new Ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function og(n,e,t){return new Ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fg(n,e){return iC(Kr(n),Kr(e))&&n.limitType===e.limitType}function uF(n){return`${rC(Kr(n))}|lt:${n.limitType}`}function hc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>aF(i)).join(", ")}]`),yd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>bc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>bc(i)).join(",")),`Target(${r})`})(Kr(n))}; limitType=${n.limitType})`}function Lg(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Ju(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let u=XM(o,a,c);return o.inclusive?u<=0:u<0})(r.startAt,Ju(r),i)||r.endAt&&!(function(o,a,c){let u=XM(o,a,c);return o.inclusive?u>=0:u>0})(r.endAt,Ju(r),i))})(n,e)}function K9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dF(n){return(e,t)=>{let r=!1;for(let i of Ju(n)){let s=Y9(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Y9(n,e,t){let r=n.field.isKeyField()?ce.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Ec(c,u):ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ae(19790,{direction:n.dir})}}var Pi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return YO(this.inner)}size(){return this.innerSize}};var Q9=new yt(ce.comparator);function Ni(){return Q9}var hF=new yt(ce.comparator);function Ku(...n){let e=hF;for(let t of n)e=e.insert(t.key,t);return e}function fF(n){let e=hF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Lo(){return Zu()}function pF(){return Zu()}function Zu(){return new Pi(n=>n.toString(),(n,e)=>n.isEqual(e))}var J9=new yt(ce.comparator),Z9=new Vt(ce.comparator);function Pe(...n){let e=Z9;for(let t of n)e=e.add(t);return e}var X9=new Vt(Ae);function eW(){return X9}function sC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rd(e)?"-0":e}}function mF(n){return{integerValue:""+n}}function tW(n,e){return R9(e)?mF(e):sC(n,e)}var wc=class{constructor(){this._=void 0}};function nW(n,e,t){return n instanceof Sc?(function(i,s){let o={fields:{[JO]:{stringValue:QO},[XO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&XS(s)&&(s=Mg(s)),s&&(o.fields[ZO]=s),{mapValue:o}})(t,e):n instanceof Ho?yF(n,e):n instanceof zo?_F(n,e):(function(i,s){let o=gF(i,s),a=rO(o)+rO(i.Ee);return Iw(o)&&Iw(i.Ee)?mF(a):sC(i.serializer,a)})(n,e)}function rW(n,e,t){return n instanceof Ho?yF(n,e):n instanceof zo?_F(n,e):t}function gF(n,e){return n instanceof Cc?(function(r){return Iw(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Sc=class extends wc{},Ho=class extends wc{constructor(e){super(),this.elements=e}};function yF(n,e){let t=vF(e);for(let r of n.elements)t.some(i=>Yr(i,r))||t.push(r);return{arrayValue:{values:t}}}var zo=class extends wc{constructor(e){super(),this.elements=e}};function _F(n,e){let t=vF(e);for(let r of n.elements)t=t.filter(i=>!Yr(i,r));return{arrayValue:{values:t}}}var Cc=class extends wc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function rO(n){return lt(n.integerValue||n.doubleValue)}function vF(n){return nC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function iW(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ho&&i instanceof Ho||r instanceof zo&&i instanceof zo?_c(r.elements,i.elements,Yr):r instanceof Cc&&i instanceof Cc?Yr(r.Ee,i.Ee):r instanceof Sc&&i instanceof Sc})(n.transform,e.transform)}var Mw=class{constructor(e,t){this.version=e,this.transformResults=t}},Sn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Jm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Tc=class{};function EF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Dc(n.key,Sn.none()):new Go(n.key,n.data,Sn.none());{let t=n.data,r=wn.empty(),i=new Vt(Mn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Qr(n.key,r,new Zn(i.toArray()),Sn.none())}}function sW(n,e,t){n instanceof Go?(function(i,s,o){let a=i.value.clone(),c=sO(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Qr?(function(i,s,o){if(!Jm(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=sO(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(bF(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Xu(n,e,t,r){return n instanceof Go?(function(s,o,a,c){if(!Jm(s.precondition,o))return a;let u=s.value.clone(),d=oO(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Qr?(function(s,o,a,c){if(!Jm(s.precondition,o))return a;let u=oO(s.fieldTransforms,c,o),d=o.data;return d.setAll(bF(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(s,o,a){return Jm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function oW(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=gF(r.transform,i||null);s!=null&&(t===null&&(t=wn.empty()),t.set(r.field,s))}return t||null}function iO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_c(r,i,(s,o)=>iW(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Go=class extends Tc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Qr=class extends Tc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function bF(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function sO(n,e,t){let r=new Map;Fe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,rW(o,a,t[i]))}return r}function oO(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,nW(s,o,e))}return r}var Dc=class extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ag=class extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ow=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&sW(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Xu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=pF();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=EF(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pe())}isEqual(e){return this.batchId===e.batchId&&_c(this.mutations,e.mutations,(t,r)=>iO(t,r))&&_c(this.baseMutations,e.baseMutations,(t,r)=>iO(t,r))}},Fw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Fe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return J9})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Lw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Vw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var St,Oe;function IF(n){switch(n){case V.OK:return ae(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return ae(15467,{code:n})}}function wF(n){if(n===void 0)return xi("GRPC error has no .code"),V.UNKNOWN;switch(n){case St.OK:return V.OK;case St.CANCELLED:return V.CANCELLED;case St.UNKNOWN:return V.UNKNOWN;case St.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case St.INTERNAL:return V.INTERNAL;case St.UNAVAILABLE:return V.UNAVAILABLE;case St.UNAUTHENTICATED:return V.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case St.NOT_FOUND:return V.NOT_FOUND;case St.ALREADY_EXISTS:return V.ALREADY_EXISTS;case St.PERMISSION_DENIED:return V.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case St.ABORTED:return V.ABORTED;case St.OUT_OF_RANGE:return V.OUT_OF_RANGE;case St.UNIMPLEMENTED:return V.UNIMPLEMENTED;case St.DATA_LOSS:return V.DATA_LOSS;default:return ae(39323,{code:n})}}(Oe=St||(St={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";var aO=null;var aW=new Ti([4294967295,4294967295],0);function cO(n){let e=PO().encode(n),t=new nw;return t.update(e),new Uint8Array(t.digest())}function lO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ti([t,r],0),new Ti([i,s],0)]}var Uw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vo(`Invalid padding: ${t}`);if(r<0)throw new Vo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Vo(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ti.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Ti.fromNumber(r)));return i.compare(aW)===1&&(i=new Ti([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=cO(e),[r,i]=lO(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=cO(e),[r,i]=lO(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Vo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var cg=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,od.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(pe.min(),i,new yt(Ae),Ni(),Pe())}},od=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Pe(),Pe(),Pe())}};var gc=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},lg=class{constructor(e,t){this.targetId=e,this.De=t}},ug=class{constructor(e,t,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},dg=class{constructor(){this.ve=0,this.Ce=uO(),this.Fe=en.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pe(),t=Pe(),r=Pe();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ae(38017,{changeType:s})}}),new od(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=uO()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Bw=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ni(),this.je=Wm(),this.Je=Wm(),this.He=new yt(Ae)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(Pw(s))if(r===0){let o=new ce(s.path);this.Xe(t,o,Ln.newNoDocument(o,pe.min()))}else Fe(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}aO?.ct((function(d,f,m,g,w){var x,P,U,W,Z,le;let qe={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},Ce=f.unchangedNames;return Ce&&(qe.bloomFilter={applied:w===0,hashCount:(x=Ce?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(W=(U=(P=Ce?.bits)===null||P===void 0?void 0:P.bitmap)===null||U===void 0?void 0:U.length)!==null&&W!==void 0?W:0,padding:(le=(Z=Ce?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&le!==void 0?le:0,mightContain:T=>{var b;return(b=g?.mightContain(T))!==null&&b!==void 0&&b}}),qe})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ki(r).toUint8Array()}catch(c){if(c instanceof ng)return Rs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Uw(o,i,s)}catch(c){return Rs(c instanceof Vo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&Pw(a.target)){let c=new ce(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,Ln.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=Pe();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new cg(e,t,this.He,this.ze,r);return this.ze=Ni(),this.je=Wm(),this.Je=Wm(),this.He=new yt(Ae),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new dg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Vt(Ae),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Vt(Ae),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new dg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Wm(){return new yt(ce.comparator)}function uO(){return new yt(ce.comparator)}var cW={asc:"ASCENDING",desc:"DESCENDING"},lW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uW={and:"AND",or:"OR"},jw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function $w(n,e){return n.useProto3Json||yd(e)?e:{value:e}}function hg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dW(n,e){return hg(n,e.toTimestamp())}function Fn(n){return Fe(!!n,49232),pe.fromTimestamp((function(t){let r=Ri(t);return new At(r.seconds,r.nanos)})(n))}function oC(n,e){return Hw(n,e).canonicalString()}function Hw(n,e){let t=(function(i){return new Xe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function CF(n){let e=Xe.fromString(n);return Fe(kF(e),10190,{key:e.toString()}),e}function fg(n,e){return oC(n.databaseId,e.path)}function ed(n,e){let t=CF(e);if(t.get(1)!==n.databaseId.projectId)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ce(DF(t))}function TF(n,e){return oC(n.databaseId,e)}function hW(n){let e=CF(n);return e.length===4?Xe.emptyPath():DF(e)}function zw(n){return new Xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DF(n){return Fe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dO(n,e,t){return{name:fg(n,e),fields:t.value.mapValue.fields}}function fW(n,e){return"found"in e?(function(r,i){Fe(!!i.found,43571),i.found.name,i.found.updateTime;let s=ed(r,i.found.name),o=Fn(i.found.updateTime),a=i.found.createTime?Fn(i.found.createTime):pe.min(),c=new wn({mapValue:{fields:i.found.fields}});return Ln.newFoundDocument(s,o,a,c)})(n,e):"missing"in e?(function(r,i){Fe(!!i.missing,3894),Fe(!!i.readTime,22933);let s=ed(r,i.missing),o=Fn(i.readTime);return Ln.newNoDocument(s,o)})(n,e):ae(7234,{result:e})}function pW(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,d){return u.useProto3Json?(Fe(d===void 0||typeof d=="string",58123),en.fromBase64String(d||"")):(Fe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),en.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){let d=u.code===void 0?V.UNKNOWN:wF(u.code);return new G(d,u.message||"")})(o);t=new ug(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ed(n,r.document.name),s=Fn(r.document.updateTime),o=r.document.createTime?Fn(r.document.createTime):pe.min(),a=new wn({mapValue:{fields:r.document.fields}}),c=Ln.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new gc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ed(n,r.document),s=r.readTime?Fn(r.readTime):pe.min(),o=Ln.newNoDocument(i,s),a=r.removedTargetIds||[];t=new gc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ed(n,r.document),s=r.removedTargetIds||[];t=new gc([],s,i,null)}else{if(!("filter"in e))return ae(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Vw(i,s),a=r.targetId;t=new lg(a,o)}}return t}function AF(n,e){let t;if(e instanceof Go)t={update:dO(n,e.key,e.value)};else if(e instanceof Dc)t={delete:fg(n,e.key)};else if(e instanceof Qr)t={update:dO(n,e.key,e.data),updateMask:wW(e.fieldMask)};else{if(!(e instanceof ag))return ae(16599,{Rt:e.type});t={verify:fg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Sc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ho)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cc)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ae(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:dW(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae(27497)})(n,e.precondition)),t}function mW(n,e){return n&&n.length>0?(Fe(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Fn(i.updateTime):Fn(s);return o.isEqual(pe.min())&&(o=Fn(s)),new Mw(o,i.transformResults||[])})(t,e))):[]}function gW(n,e){return{documents:[TF(n,e.path)]}}function yW(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=TF(n,i);let s=(function(u){if(u.length!==0)return RF(br.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(u){if(u.length!==0)return u.map(d=>(function(m){return{field:fc(m.field),direction:EW(m.dir)}})(d))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=$w(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function _W(n){let e=hW(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Fe(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=(function(f){let m=xF(f);return m instanceof br&&sF(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map(m=>(function(w){return new $o(pc(w.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let m;return m=typeof f=="object"?f.value:f,yd(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(f){let m=!!f.before,g=f.values||[];return new Ic(g,m)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){let m=!f.before,g=f.values||[];return new Ic(g,m)})(t.endAt)),q9(e,i,o,s,a,"F",c,u)}function vW(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=pc(t.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=pc(t.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=pc(t.unaryFilter.field);return Tt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=pc(t.unaryFilter.field);return Tt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Tt.create(pc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return br.create(t.compositeFilter.filters.map(r=>xF(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae(1026)}})(t.compositeFilter.op))})(n):ae(30097,{filter:n})}function EW(n){return cW[n]}function bW(n){return lW[n]}function IW(n){return uW[n]}function fc(n){return{fieldPath:n.canonicalString()}}function pc(n){return Mn.fromServerFormat(n.fieldPath)}function RF(n){return n instanceof Tt?(function(t){if(t.op==="=="){if(ZM(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NAN"}};if(JM(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ZM(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NOT_NAN"}};if(JM(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fc(t.field),op:bW(t.op),value:t.value}}})(n):n instanceof br?(function(t){let r=t.getFilters().map(i=>RF(i));return r.length===1?r[0]:{compositeFilter:{op:IW(t.op),filters:r}}})(n):ae(54877,{filter:n})}function wW(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ad=class n{constructor(e,t,r,i,s=pe.min(),o=pe.min(),a=en.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Gw=class{constructor(e){this.gt=e}};function SW(n){let e=_W({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?og(e,e.limit,"L"):e}var pg=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(lt(e.integerValue));else if("doubleValue"in e){let r=lt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),rd(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Ri(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ki(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?nF(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):tF(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ae(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=vc,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(lt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ce.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};pg.Ut=new pg;var qw=class{constructor(){this.Dn=new Ww}addToCollectionParentIndex(e,t){return this.Dn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(jo.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(jo.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}},Ww=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Vt(Xe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vt(Xe.comparator)).toArray()}};var c0e=new Uint8Array(0);var hO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PF=41943040,Jn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(PF,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);var cd=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var fO="LruGarbageCollector",CW=1048576;function pO([n,e],[t,r]){let i=Ae(n,t);return i===0?Ae(e,r):i}var Kw=class{constructor(e){this.Tr=e,this.buffer=new Vt(pO),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();pO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Yw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){J(fO,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Oc(t)?J(fO,"Ignoring IndexedDB error during garbage collection: ",t):await Mc(t)}await this.Rr(3e5)})}},Qw=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(JS.ue);let r=new Kw(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(hO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hO):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),dc()<=ke.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function TW(n,e){return new Qw(n,e)}var Jw=class{constructor(){this.changes=new Pi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Zw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Xw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Xu(r.mutation,i,Zn.empty(),At.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pe()){let i=Lo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ku();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Lo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ni(),o=Zu(),a=(function(){return Zu()})();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Qr)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Xu(d.mutation,u,d.mutation.getFieldMask(),At.now())):o.set(u.key,Zn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new Zw(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Zu(),i=new yt((o,a)=>o-a),s=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||Zn.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||Pe()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=pF();d.forEach(m=>{if(!s.has(m)){let g=EF(t.get(m),r.get(m));g!==null&&f.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):j.resolve(Lo()),a=nd,c=s;return o.next(u=>j.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Pe())).next(d=>({batchId:a,changes:fF(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next(r=>{let i=Ku();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Ku();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,c=>{let u=(function(f,m){return new Ps(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ln.newInvalidDocument(d)))});let a=Ku();return o.forEach((c,u)=>{let d=s.get(c);d!==void 0&&Xu(d.mutation,u,Zn.empty(),At.now()),Lg(t,u)&&(a=a.insert(c,u))}),a})}};var eS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return j.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Fn(i.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:SW(i.bundledQuery),readTime:Fn(i.readTime)}})(t)),j.resolve()}};var tS=class{constructor(){this.overlays=new yt(ce.comparator),this.kr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Lo();return j.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),j.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){let i=Lo(),s=t.length+1,o=new ce(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new yt((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Lo(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Lo(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return j.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Lw(t,r));let s=this.kr.get(t);s===void 0&&(s=Pe(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var nS=class{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}};var ld=class{constructor(){this.qr=new Vt(Ct.Qr),this.$r=new Vt(Ct.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ct(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ct(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new ce(new Xe([])),r=new Ct(t,e),i=new Ct(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new ce(new Xe([])),r=new Ct(t,e),i=new Ct(t,e+1),s=Pe();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ct(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ct=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ce.comparator(e.key,t.key)||Ae(e.Hr,t.Hr)}static Ur(e,t){return Ae(e.Hr,t.Hr)||ce.comparator(e.key,t.key)}};var rS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Vt(Ct.Qr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ow(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,t){return j.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?ZS:this.er-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ct(t,0),i=new Ct(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vt(Ae);return t.forEach(i=>{let s=new Ct(i,0),o=new Ct(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),j.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ce.isDocumentKey(s)||(s=s.child(""));let o=new Ct(new ce(s),0),a=new Vt(Ae);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},o),j.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Fe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return j.forEach(t.mutations,i=>{let s=new Ct(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ct(t,0),i=this.Yr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var iS=class{constructor(e){this.ni=e,this.docs=(function(){return new yt(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=Ni();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ln.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ni(),o=t.path,a=new ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||D9(T9(d),r)<=0||(i.has(d.key)||Lg(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ae(9500)}ri(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sS(this)}getSize(e){return j.resolve(this.size)}},sS=class extends Jw{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var oS=class{constructor(e){this.persistence=e,this.ii=new Pi(t=>rC(t),iC),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.si=0,this.oi=new ld,this.targetCount=0,this._i=cd.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),j.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new cd(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.hr(t),j.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),j.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.oi.containsKey(t))}};var mg=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new JS(0),this.ci=!1,this.ci=!0,this.li=new nS,this.referenceDelegate=e(this),this.hi=new oS(this),this.indexManager=new qw,this.remoteDocumentCache=(function(i){return new iS(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Gw(t),this.Ti=new eS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new rS(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){J("MemoryPersistence","Starting transaction:",e);let i=new aS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return j.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},aS=class extends vw{constructor(e){super(),this.currentSequenceNumber=e}},cS=class n{constructor(e){this.persistence=e,this.Ai=new ld,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ae(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.mi,r=>{let i=ce.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,pe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return j.or([()=>j.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},gg=class n{constructor(e,t){this.persistence=e,this.gi=new Pi(r=>k9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=TW(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return j.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?j.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,pe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),j.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ym(e.data.value)),t}Sr(e,t,r){return j.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var lS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Pe(),i=Pe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var uS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dS=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return DP()?8:x9(Ft())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new uS;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(dc()<=ke.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",hc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(dc()<=ke.DEBUG&&J("QueryEngine","Query:",hc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(dc()<=ke.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",hc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(t))):j.resolve())}ps(e,t){if(nO(t))return j.resolve(null);let r=Kr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=og(t,null,"F"),r=Kr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Pe(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,o,c.readTime)?this.ps(e,og(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return nO(t)||i.isEqual(pe.min())?j.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?j.resolve(null):(dc()<=ke.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hc(t)),this.vs(e,o,t,C9(i,nd)).next(a=>a))})}bs(e,t){let r=new Vt(dF(e));return t.forEach((i,s)=>{Lg(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return dc()<=ke.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",hc(t)),this.gs.getDocumentsMatchingQuery(e,t,jo.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var aC="LocalStore",DW=3e8,hS=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new yt(Ae),this.Ms=new Pi(s=>rC(s),iC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function AW(n,e,t,r){return new hS(n,e,t,r)}async function NF(n,e){let t=ge(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Pe();for(let u of i){o.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of s){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function xW(n,e){let t=ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,d){let f=u.batch,m=f.keys(),g=j.resolve();return m.forEach(w=>{g=g.next(()=>d.getEntry(c,w)).next(x=>{let P=u.docVersions.get(w);Fe(P!==null,48541),x.version.compareTo(P)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,f))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function MF(n){let e=ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function RW(n,e){let t=ge(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(t.hi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.hi.addMatchingKeys(s,d.addedDocuments,f)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(en.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(f,g),(function(x,P,U){return x.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=DW?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(m,g,d)&&a.push(t.hi.updateTargetData(s,g))});let c=Ni(),u=Pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(kW(s,o,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(pe.min())){let d=t.hi.getLastRemoteSnapshotVersion(s).next(f=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.Fs=i,s))}function kW(n,e,t){let r=Pe(),i=Pe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ni();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(pe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):J(aC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function PW(n,e){let t=ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ZS),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function NW(n,e){let t=ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new ad(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function fS(n,e,t){let r=ge(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Oc(o))throw o;J(aC,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function mO(n,e,t){let r=ge(n),i=pe.min(),s=Pe();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,u,d){let f=ge(c),m=f.Ms.get(d);return m!==void 0?j.resolve(f.Fs.get(m)):f.hi.getTargetData(u,d)})(r,o,Kr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:pe.min(),t?s:Pe())).next(a=>(MW(r,K9(e),a),{documents:a,qs:s})))}function MW(n,e,t){let r=n.xs.get(e)||pe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var yg=class{constructor(){this.activeTargetIds=eW()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var pS=class{constructor(){this.Fo=new yg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new yg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mS=class{xo(e){}shutdown(){}};var gO="ConnectivityMonitor",_g=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){J(gO,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){J(gO,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Km=null;function gS(){return Km===null?Km=(function(){return 268435456+Math.round(2147483648*Math.random())})():Km++,"0x"+Km.toString(16)}var cw="RestConnection",OW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},yS=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===rg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=gS(),a=this.Go(e,t.toUriEncodedString());J(cw,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:u}=new URL(a),d=gs(u);return this.jo(e,a,c,r,d).then(f=>(J(cw,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Rs(cw,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=OW[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var _S=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Xt="WebChannelConnection",vS=class extends yS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=gS();return new Promise((a,c)=>{let u=new rw;u.setWithCredentials(!0),u.listenOnce(iw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Wu.NO_ERROR:let f=u.getResponseJson();J(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Wu.TIMEOUT:J(Xt,`RPC '${e}' ${o} timed out`),c(new G(V.DEADLINE_EXCEEDED,"Request time out"));break;case Wu.HTTP_ERROR:let m=u.getStatus();if(J(Xt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let w=g?.error;if(w&&w.status&&w.message){let x=(function(U){let W=U.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(W)>=0?W:V.UNKNOWN})(w.status);c(new G(x,w.message))}else c(new G(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new G(V.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{J(Xt,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);J(Xt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",d,r,15)})}P_(e,t,r){let i=gS(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aw(),a=ow(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");J(Xt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c);this.T_(f);let m=!1,g=!1,w=new _S({Ho:P=>{g?J(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(m||(J(Xt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),J(Xt,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},Yo:()=>f.close()}),x=(P,U,W)=>{P.listen(U,Z=>{try{W(Z)}catch(le){setTimeout(()=>{throw le},0)}})};return x(f,uc.EventType.OPEN,()=>{g||(J(Xt,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),x(f,uc.EventType.CLOSE,()=>{g||(g=!0,J(Xt,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(f))}),x(f,uc.EventType.ERROR,P=>{g||(g=!0,Rs(Xt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),w.__(new G(V.UNAVAILABLE,"The operation could not be completed")))}),x(f,uc.EventType.MESSAGE,P=>{var U;if(!g){let W=P.data[0];Fe(!!W,16349);let Z=W,le=Z?.error||((U=Z[0])===null||U===void 0?void 0:U.error);if(le){J(Xt,`RPC '${e}' stream ${i} received error:`,le);let qe=le.status,Ce=(function(S){let D=St[S];if(D!==void 0)return wF(D)})(qe),T=le.message;Ce===void 0&&(Ce=V.INTERNAL,T="Unknown error status: "+qe+" with message "+le.message),g=!0,w.__(new G(Ce,T)),f.close()}else J(Xt,`RPC '${e}' stream ${i} received:`,W),w.a_(W)}}),x(a,sw.STAT_EVENT,P=>{P.stat===Gm.PROXY?J(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Gm.NOPROXY&&J(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function lw(){return typeof document<"u"?document:null}function Vg(n){return new jw(n,!0)}var ud=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var yO="PersistentStream",vg=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ud(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(xi(t.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new G(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return J(yO,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(J(yO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ES=class extends vg{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=pW(this.serializer,e),r=(function(s){if(!("targetChange"in s))return pe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?Fn(o.readTime):pe.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=zw(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=Pw(c)?{documents:gW(s,c)}:{query:yW(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SF(s,o.resumeToken);let u=$w(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(pe.min())>0){a.readTime=hg(s,o.snapshotVersion.toTimestamp());let u=$w(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=vW(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=zw(this.serializer),t.removeTarget=e,this.k_(t)}},bS=class extends vg{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=mW(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=zw(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>AF(this.serializer,r))};this.k_(t)}};var IS=class{},wS=class extends IS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Hw(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(V.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,Hw(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(V.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},SS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xi(t),this._a=!1):J("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var qo="RemoteStore",CS=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Wo(this)&&(J(qo,"Restarting streams for network reachability change."),await(async function(c){let u=ge(c);u.Ia.add(4),await _d(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Ug(u)})(this))})}),this.Aa=new SS(r,i)}};async function Ug(n){if(Wo(n))for(let e of n.da)await e(!0)}async function _d(n){for(let e of n.da)await e(!1)}function OF(n,e){let t=ge(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),dC(t)?uC(t):Fc(t).x_()&&lC(t,e))}function cC(n,e){let t=ge(n),r=Fc(t);t.Ta.delete(e),r.x_()&&FF(t,e),t.Ta.size===0&&(r.x_()?r.B_():Wo(t)&&t.Aa.set("Unknown"))}function lC(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fc(n).H_(e)}function FF(n,e){n.Ra.$e(e),Fc(n).Y_(e)}function uC(n){n.Ra=new Bw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Fc(n).start(),n.Aa.aa()}function dC(n){return Wo(n)&&!Fc(n).M_()&&n.Ta.size>0}function Wo(n){return ge(n).Ia.size===0}function LF(n){n.Ra=void 0}async function FW(n){n.Aa.set("Online")}async function LW(n){n.Ta.forEach((e,t)=>{lC(n,e)})}async function VW(n,e){LF(n),dC(n)?(n.Aa.la(e),uC(n)):n.Aa.set("Unknown")}async function UW(n,e,t){if(n.Aa.set("Online"),e instanceof ug&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){J(qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Eg(n,r)}else if(e instanceof gc?n.Ra.Ye(e):e instanceof lg?n.Ra.it(e):n.Ra.et(e),!t.isEqual(pe.min()))try{let r=await MF(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.Ta.get(u);d&&s.Ta.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let d=s.Ta.get(c);if(!d)return;s.Ta.set(c,d.withResumeToken(en.EMPTY_BYTE_STRING,d.snapshotVersion)),FF(s,c);let f=new ad(d.target,c,u,d.sequenceNumber);lC(s,f)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){J(qo,"Failed to raise snapshot:",r),await Eg(n,r)}}async function Eg(n,e,t){if(!Oc(e))throw e;n.Ia.add(1),await _d(n),n.Aa.set("Offline"),t||(t=()=>MF(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{J(qo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Ug(n)})}function VF(n,e){return e().catch(t=>Eg(n,t,e))}async function Bg(n){let e=ge(n),t=Ns(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ZS;for(;BW(e);)try{let i=await PW(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,jW(e,i)}catch(i){await Eg(e,i)}UF(e)&&BF(e)}function BW(n){return Wo(n)&&n.Pa.length<10}function jW(n,e){n.Pa.push(e);let t=Ns(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function UF(n){return Wo(n)&&!Ns(n).M_()&&n.Pa.length>0}function BF(n){Ns(n).start()}async function $W(n){Ns(n).na()}async function HW(n){let e=Ns(n);for(let t of n.Pa)e.X_(t.mutations)}async function zW(n,e,t){let r=n.Pa.shift(),i=Fw.from(r,e,t);await VF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Bg(n)}async function GW(n,e){e&&Ns(n).Z_&&await(async function(r,i){if((function(o){return IF(o)&&o!==V.ABORTED})(i.code)){let s=r.Pa.shift();Ns(r).N_(),await VF(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Bg(r)}})(n,e),UF(n)&&BF(n)}async function _O(n,e){let t=ge(n);t.asyncQueue.verifyOperationInProgress(),J(qo,"RemoteStore received new credentials");let r=Wo(t);t.Ia.add(3),await _d(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Ug(t)}async function qW(n,e){let t=ge(n);e?(t.Ia.delete(2),await Ug(t)):e||(t.Ia.add(2),await _d(t),t.Aa.set("Unknown"))}function Fc(n){return n.Va||(n.Va=(function(t,r,i){let s=ge(t);return s.ia(),new ES(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:FW.bind(null,n),e_:LW.bind(null,n),n_:VW.bind(null,n),J_:UW.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),dC(n)?uC(n):n.Aa.set("Unknown")):(await n.Va.stop(),LF(n))})),n.Va}function Ns(n){return n.ma||(n.ma=(function(t,r,i){let s=ge(t);return s.ia(),new bS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:$W.bind(null,n),n_:GW.bind(null,n),ea:HW.bind(null,n),ta:zW.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Bg(n)):(await n.ma.stop(),n.Pa.length>0&&(J(qo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var TS=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function hC(n,e){if(xi("AsyncQueue",`${e}: ${n}`),Oc(n))return new G(V.UNAVAILABLE,`${e}: ${n}`);throw n}var bg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=Ku(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ig=class{constructor(){this.fa=new yt(ce.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ae(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ac=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,bg.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var DS=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},AS=class{constructor(){this.queries=vO(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ge(t),s=i.queries;i.queries=vO(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new G(V.ABORTED,"Firestore shutting down"))}};function vO(){return new Pi(n=>uF(n),Fg)}async function fC(n,e){let t=ge(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new DS,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=hC(o,`Initialization of query '${hc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&mC(t)}async function pC(n,e){let t=ge(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function WW(n,e){let t=ge(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&mC(t)}function KW(n,e,t){let r=ge(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function mC(n){n.Da.forEach(e=>{e.next()})}var xS,EO;(EO=xS||(xS={})).Fa="default",EO.Cache="cache";var dd=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ac(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==xS.Cache}};var wg=class{constructor(e){this.key=e}},Sg=class{constructor(e){this.key=e}},RS=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pe(),this.mutatedKeys=Pe(),this.Xa=dF(e),this.eu=new bg(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Ig,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),g=Lg(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),P=!1;m&&g?m.data.isEqual(g.data)?w!==x&&(r.track({type:3,doc:g}),P=!0):this.iu(m,g)||(r.track({type:2,doc:g}),P=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),P=!0):m&&!g&&(r.track({type:1,doc:m}),P=!0,(c||u)&&(a=!0)),P&&(g?(o=o.add(g),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((d,f)=>(function(g,w){let x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{At:P})}};return x(g)-x(w)})(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new Ac(this.query,e.eu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ig,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Pe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Sg(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new wg(r))}),t}uu(e){this.Ha=e.qs,this.Za=Pe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ac.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},gC="SyncEngine",kS=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},PS=class{constructor(e){this.key=e,this.lu=!1}},NS=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Pi(a=>uF(a),Fg),this.Tu=new Map,this.Iu=new Set,this.du=new yt(ce.comparator),this.Eu=new Map,this.Au=new ld,this.Ru={},this.Vu=new Map,this.mu=cd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function YW(n,e,t=!0){let r=qF(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await jF(r,e,t,!0),i}async function QW(n,e){let t=qF(n);await jF(t,e,!0,!1)}async function jF(n,e,t,r){let i=await NW(n.localStore,Kr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await JW(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&OF(n.remoteStore,i),a}async function JW(n,e,t,r,i){n.gu=(f,m,g)=>(async function(x,P,U,W){let Z=P.view.nu(U);Z.Ds&&(Z=await mO(x.localStore,P.query,!1).then(({documents:T})=>P.view.nu(T,Z)));let le=W&&W.targetChanges.get(P.targetId),qe=W&&W.targetMismatches.get(P.targetId)!=null,Ce=P.view.applyChanges(Z,x.isPrimaryClient,le,qe);return IO(x,P.targetId,Ce._u),Ce.snapshot})(n,f,m,g);let s=await mO(n.localStore,e,!0),o=new RS(e,s.qs),a=o.nu(s.documents),c=od.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);IO(n,t,u._u);let d=new kS(e,t,o);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function ZW(n,e,t){let r=ge(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Fg(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await fS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&cC(r.remoteStore,i.targetId),MS(r,i.targetId)}).catch(Mc)):(MS(r,i.targetId),await fS(r.localStore,i.targetId,!0))}async function XW(n,e){let t=ge(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cC(t.remoteStore,r.targetId))}async function e7(n,e,t){let r=a7(n);try{let i=await(function(o,a){let c=ge(o),u=At.now(),d=a.reduce((g,w)=>g.add(w.key),Pe()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Ni(),x=Pe();return c.Os.getEntries(g,d).next(P=>{w=P,w.forEach((U,W)=>{W.isValidDocument()||(x=x.add(U))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,w)).next(P=>{f=P;let U=[];for(let W of a){let Z=oW(W,f.get(W.key).overlayedDocument);Z!=null&&U.push(new Qr(W.key,Z,rF(Z.value.mapValue),Sn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,U,a)}).next(P=>{m=P;let U=P.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(g,P.batchId,U)})}).then(()=>({batchId:m.batchId,changes:fF(f)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new yt(Ae)),u=u.insert(a,c),o.Ru[o.currentUser.toKey()]=u})(r,i.batchId,t),await vd(r,i.changes),await Bg(r.remoteStore)}catch(i){let s=hC(i,"Failed to persist write");t.reject(s)}}async function $F(n,e){let t=ge(n);try{let r=await RW(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(Fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Fe(o.lu,14607):i.removedDocuments.size>0&&(Fe(o.lu,42227),o.lu=!1))}),await vd(t,r,e)}catch(r){await Mc(r)}}function bO(n,e,t){let r=ge(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=ge(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let m of f.wa)m.va(a)&&(u=!0)}),u&&mC(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function t7(n,e,t){let r=ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new yt(ce.comparator);o=o.insert(s,Ln.newNoDocument(s,pe.min()));let a=Pe().add(s),c=new cg(pe.min(),new Map,new yt(Ae),o,a);await $F(r,c),r.du=r.du.remove(s),r.Eu.delete(e),yC(r)}else await fS(r.localStore,e,!1).then(()=>MS(r,e,t)).catch(Mc)}async function n7(n,e){let t=ge(n),r=e.batch.batchId;try{let i=await xW(t.localStore,e);zF(t,r,null),HF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vd(t,i)}catch(i){await Mc(i)}}async function r7(n,e,t){let r=ge(n);try{let i=await(function(o,a){let c=ge(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Fe(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})})(r.localStore,e);zF(r,e,t),HF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vd(r,i)}catch(i){await Mc(i)}}function HF(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function zF(n,e,t){let r=ge(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function MS(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||GF(n,r)})}function GF(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(cC(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),yC(n))}function IO(n,e,t){for(let r of t)r instanceof wg?(n.Au.addReference(r.key,e),i7(n,r)):r instanceof Sg?(J(gC,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||GF(n,r.key)):ae(19791,{yu:r})}function i7(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(J(gC,"New document in limbo: "+t),n.Iu.add(r),yC(n))}function yC(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new ce(Xe.fromString(e)),r=n.mu.next();n.Eu.set(r,new PS(t)),n.du=n.du.insert(t,r),OF(n.remoteStore,new ad(Kr(Og(t.path)),r,"TargetPurposeLimboResolution",JS.ue))}}async function vd(n,e,t){let r=ge(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=lS.Es(c.targetId,u);s.push(f)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,u){let d=ge(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>j.forEach(u,m=>j.forEach(m.Is,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>j.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Oc(f))throw f;J(aC,"Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let g=d.Fs.get(m),w=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(w);d.Fs=d.Fs.insert(m,x)}}})(r.localStore,s))}async function s7(n,e){let t=ge(n);if(!t.currentUser.isEqual(e)){J(gC,"User change. New user:",e.toKey());let r=await NF(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new G(V.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vd(t,r.Bs)}}function o7(n,e){let t=ge(n),r=t.Eu.get(e);if(r&&r.lu)return Pe().add(r.key);{let i=Pe(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function qF(n){let e=ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$F.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t7.bind(null,e),e.hu.J_=WW.bind(null,e.eventManager),e.hu.pu=KW.bind(null,e.eventManager),e}function a7(n){let e=ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r7.bind(null,e),e}var WF=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Vg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return AW(this.persistence,new dS,t.initialUser,this.serializer)}Du(t){return new mg(cS.Vi,this.serializer)}bu(t){return new pS}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),OS=class extends WF{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Fe(this.persistence.referenceDelegate instanceof gg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Yw(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new mg(r=>gg.Vi(r,t),this.serializer)}};var c7=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=s7.bind(null,this.syncEngine),await qW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new AS})()}createDatastore(t){let r=Vg(t.databaseInfo.databaseId),i=(function(o){return new vS(o)})(t.databaseInfo);return(function(o,a,c,u){return new wS(o,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new CS(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>bO(this.syncEngine,r,0),(function(){return _g.C()?new _g:new mS})())}createSyncEngine(t,r){return(function(s,o,a,c,u,d,f){let m=new NS(s,o,a,c,u,d);return f&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=ge(s);J(qo,"RemoteStore shutting down."),o.Ia.add(5),await _d(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var hd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var FS=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await(async function(i,s){let o=ge(i),a={documents:s.map(f=>fg(o.serializer,f))},c=await o.Jo("BatchGetDocuments",o.serializer.databaseId,Xe.emptyPath(),a,s.length),u=new Map;c.forEach(f=>{let m=fW(o.serializer,f);u.set(m.key.toString(),m)});let d=[];return s.forEach(f=>{let m=u.get(f.toString());Fe(!!m,55234,{key:f}),d.push(m)}),d})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=ce.fromPath(r);this.mutations.push(new ag(i,this.precondition(i)))}),await(async function(r,i){let s=ge(r),o={writes:i.map(a=>AF(s.serializer,a))};await s.Wo("Commit",s.serializer.databaseId,Xe.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ae(50498,{Wu:e.constructor.name});t=pe.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new G(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pe.min())?Sn.exists(!1):Sn.updateTime(t):Sn.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pe.min()))throw new G(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sn.updateTime(t)}return Sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var LS=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Gu=r.maxAttempts,this.F_=new ud(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{let e=new FS(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{let t=this.updateFunction(e);return!yd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!IF(t)}return!1}};var Ms="FirestoreClient",VS=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=td.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{J(Ms,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(Ms,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=hC(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function uw(n,e){n.asyncQueue.verifyOperationInProgress(),J(Ms,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await NF(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Rs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{J("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Rs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function wO(n,e){n.asyncQueue.verifyOperationInProgress();let t=await l7(n);J(Ms,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>_O(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>_O(e.remoteStore,i)),n._onlineComponents=e}async function l7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){J(Ms,"Using user provided OfflineComponentProvider");try{await uw(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Rs("Error using user provided cache. Falling back to memory cache: "+t),await uw(n,new WF)}}else J(Ms,"Using default OfflineComponentProvider"),await uw(n,new OS(void 0));return n._offlineComponents}async function _C(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(J(Ms,"Using user provided OnlineComponentProvider"),await wO(n,n._uninitializedComponentsProvider._online)):(J(Ms,"Using default OnlineComponentProvider"),await wO(n,new c7))),n._onlineComponents}function u7(n){return _C(n).then(e=>e.syncEngine)}function d7(n){return _C(n).then(e=>e.datastore)}async function Cg(n){let e=await _C(n),t=e.eventManager;return t.onListen=YW.bind(null,e.syncEngine),t.onUnlisten=ZW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XW.bind(null,e.syncEngine),t}function h7(n,e,t={}){let r=new Xn;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let d=new hd({next:m=>{d.Ou(),o.enqueueAndForget(()=>pC(s,f));let g=m.docs.has(a);!g&&m.fromCache?u.reject(new G(V.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new G(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new dd(Og(a.path),d,{includeMetadataChanges:!0,ka:!0});return fC(s,f)})(await Cg(n),n.asyncQueue,e,t,r)),r.promise}function f7(n,e,t={}){let r=new Xn;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let d=new hd({next:m=>{d.Ou(),o.enqueueAndForget(()=>pC(s,f)),m.fromCache&&c.source==="server"?u.reject(new G(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new dd(a,d,{includeMetadataChanges:!0,ka:!0});return fC(s,f)})(await Cg(n),n.asyncQueue,e,t,r)),r.promise}function KF(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var SO=new Map;var YF="firestore.googleapis.com",CO=!0,Tg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YF,this.ssl=CO}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:CO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CW)throw new G(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},xc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dw;switch(r.type){case"firstParty":return new mw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=SO.get(t);r&&(J("ComponentProvider","Removing Datastore"),SO.delete(t),r.terminate())})(this),Promise.resolve()}};function QF(n,e,t,r={}){var i;n=On(n,xc);let s=gs(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(rm(`https://${c}`),im("Firestore",!0)),o.host!==YF&&o.host!==c&&Rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!jr(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=Lt.MOCK_USER;else{d=bP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new G(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Lt(m)}n._authCredentials=new hw(new Zm(d,f))}}var Mi=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Pt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(gd(t,n._jsonSchema))return new n(e,r||null,new ce(Xe.fromString(t.referencePath)))}};Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Dt("string",Pt._jsonSchemaVersion),referencePath:Dt("string")};var Ts=class n extends Mi{constructor(e,t,r){super(e,t,Og(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new ce(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function JF(n,e,...t){if(n=bt(n),NO("collection","path",e),n instanceof xc){let r=Xe.fromString(e,...t);return HM(r),new Ts(n,null,r)}{if(!(n instanceof Pt||n instanceof Ts))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Xe.fromString(e,...t));return HM(r),new Ts(n.firestore,null,r)}}function vC(n,e,...t){if(n=bt(n),arguments.length===1&&(e=td.newId()),NO("doc","path",e),n instanceof xc){let r=Xe.fromString(e,...t);return $M(r),new Pt(n,null,new ce(r))}{if(!(n instanceof Pt||n instanceof Ts))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Xe.fromString(e,...t));return $M(r),new Pt(n.firestore,n instanceof Ts?n.converter:null,new ce(r))}}var TO="AsyncQueue",Dg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ud(this,"async_queue_retry"),this.oc=()=>{let r=lw();r&&J(TO,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=lw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=lw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Xn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Oc(e))throw e;J(TO,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,xi("INTERNAL UNHANDLED ERROR: ",DO(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=TS.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&ae(47125,{hc:DO(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function DO(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function AO(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Ir=class extends xc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Dg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Dg(e),this._firestoreClient=void 0,await e}}};function ZF(n,e){let t=typeof n=="object"?n:To(),r=typeof n=="string"?n:e||rg,i=ec(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=EP("firestore");s&&QF(i,...s)}return i}function Ed(n){if(n._terminated)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||p7(n),n._firestoreClient}function p7(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,u,d){return new Ew(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,KF(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new VS(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Ai=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(en.fromBase64String(e))}catch(t){throw new G(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gd(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ai._jsonSchemaVersion="firestore/bytes/1.0",Ai._jsonSchema={type:Dt("string",Ai._jsonSchemaVersion),bytes:Dt("string")};var Rc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fd=class{constructor(e){this._methodName=e}};var Ds=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(gd(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ds._jsonSchemaVersion="firestore/geoPoint/1.0",Ds._jsonSchema={type:Dt("string",Ds._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};var As=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gd(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new G(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};As._jsonSchemaVersion="firestore/vectorValue/1.0",As._jsonSchema={type:Dt("string",As._jsonSchemaVersion),vectorValues:Dt("object")};var m7=/^__.*__$/,US=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Go(e,this.data,t,this.fieldTransforms)}},Ag=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function XF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ec:n})}}var BS=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(XF(this.Ec)&&m7.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},jS=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Vg(e)}Dc(e,t,r,i=!1){return new BS({Ec:e,methodName:t,bc:r,path:Mn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function jg(n){let e=n._freezeSettings(),t=Vg(n._databaseId);return new jS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function EC(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);bC("Data must be an object, but it was:",o,r);let a=eL(r,o),c,u;if(s.merge)c=new Zn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let m=$S(e,f,t);if(!o.contains(m))throw new G(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);nL(d,m)||d.push(m)}c=new Zn(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new US(new wn(a),c,u)}var xg=class n extends fd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function g7(n,e,t,r){let i=n.Dc(1,e,t);bC("Data must be an object, but it was:",i,r);let s=[],o=wn.empty();Os(r,(c,u)=>{let d=IC(e,c,t);u=bt(u);let f=i.gc(d);if(u instanceof xg)s.push(d);else{let m=bd(u,f);m!=null&&(s.push(d),o.set(d,m))}});let a=new Zn(s);return new Ag(o,a,i.fieldTransforms)}function y7(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[$S(e,r,t)],c=[i];if(s.length%2!=0)throw new G(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push($S(e,s[m])),c.push(s[m+1]);let u=[],d=wn.empty();for(let m=a.length-1;m>=0;--m)if(!nL(u,a[m])){let g=a[m],w=c[m];w=bt(w);let x=o.gc(g);if(w instanceof xg)u.push(g);else{let P=bd(w,x);P!=null&&(u.push(g),d.set(g,P))}}let f=new Zn(u);return new Ag(d,f,o.fieldTransforms)}function _7(n,e,t,r=!1){return bd(t,n.Dc(r?4:3,e))}function bd(n,e){if(tL(n=bt(n)))return bC("Unsupported field value:",e,n),eL(n,e);if(n instanceof fd)return(function(r,i){if(!XF(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=bd(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tW(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=At.fromDate(r);return{timestampValue:hg(i.serializer,s)}}if(r instanceof At){let s=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hg(i.serializer,s)}}if(r instanceof Ds)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ai)return{bytesValue:SF(i.serializer,r._byteString)};if(r instanceof Pt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:oC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof As)return(function(o,a){return{mapValue:{fields:{[eC]:{stringValue:tC},[vc]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return sC(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Ng(r)}`)})(n,e)}function eL(n,e){let t={};return YO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(n,(r,i)=>{let s=bd(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function tL(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof At||n instanceof Ds||n instanceof Ai||n instanceof Pt||n instanceof fd||n instanceof As)}function bC(n,e,t){if(!tL(t)||!MO(t)){let r=Ng(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function $S(n,e,t){if((e=bt(e))instanceof Rc)return e._internalPath;if(typeof e=="string")return IC(n,e);throw Rg("Field path arguments must be of type string or ",n,!1,void 0,t)}var v7=new RegExp("[~\\*/\\[\\]]");function IC(n,e,t){if(e.search(v7)>=0)throw Rg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rc(...e.split("."))._internalPath}catch{throw Rg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rg(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new G(V.INVALID_ARGUMENT,a+n+c)}function nL(n,e){return n.some(t=>t.isEqual(e))}var kc=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new HS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($g("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},HS=class extends kc{data(){return super.data()}};function $g(n,e){return typeof e=="string"?IC(n,e):e instanceof Rc?e._internalPath:e._delegate._internalPath}function rL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pd=class{},md=class extends pd{};function iL(n,e,...t){let r=[];e instanceof pd&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof zS).length,a=s.filter(c=>c instanceof kg).length;if(o>1||o>0&&a>0)throw new G(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var kg=class n extends md{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return cL(e._query,t),new Mi(e.firestore,e.converter,Nw(e._query,t))}_parse(e){let t=jg(e.firestore);return(function(s,o,a,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){RO(f,d);let w=[];for(let x of f)w.push(xO(c,s,x));m={arrayValue:{values:w}}}else m=xO(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||RO(f,d),m=_7(a,o,f,d==="in"||d==="not-in");return Tt.create(u,d,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function sL(n,e,t){let r=e,i=$g("where",n);return kg._create(i,r,t)}var zS=class n extends pd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:br.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)cL(o,c),o=Nw(o,c)})(e._query,t),new Mi(e.firestore,e.converter,Nw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var GS=class n extends md{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $o(s,o)})(e._query,this._field,this._direction);return new Mi(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new Ps(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function oL(n,e="asc"){let t=e,r=$g("orderBy",n);return GS._create(r,t)}var qS=class n extends md{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Mi(e.firestore,e.converter,og(e._query,this._limit,this._limitType))}};function aL(n){return S9("limit",n),qS._create("limit",n,"F")}function xO(n,e,t){if(typeof(t=bt(t))=="string"){if(t==="")throw new G(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lF(e)&&t.indexOf("/")!==-1)throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Xe.fromString(t));if(!ce.isDocumentKey(r))throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return QM(n,new ce(r))}if(t instanceof Pt)return QM(n,t._key);throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ng(t)}.`)}function RO(n,e){if(!Array.isArray(n)||n.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cL(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Pg=class{convertValue(e,t="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Os(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[vc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>lt(o.doubleValue));return new As(s)}convertGeoPoint(e){return new Ds(lt(e.latitude),lt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Mg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(id(e));default:return null}}convertTimestamp(e){let t=Ri(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Xe.fromString(e);Fe(kF(r),9688,{name:e});let i=new ig(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(t)||xi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function wC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var WS=class extends Pg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ai(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}};var Cs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xs=class n extends kc{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field($g("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",xs._jsonSchema={type:Dt("string",xs._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};var yc=class extends xs{data(e={}){return super.data(e)}},Uo=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yc(this._firestore,this._userDataWriter,r.key,r,new Cs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new yc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new yc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:E7(a.type),doc:c,oldIndex:u,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=td.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function E7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:n})}}function lL(n){n=On(n,Pt);let e=On(n.firestore,Ir);return h7(Ed(e),n._key).then(t=>mL(e,n,t))}Uo._jsonSchemaVersion="firestore/querySnapshot/1.0",Uo._jsonSchema={type:Dt("string",Uo._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};var Pc=class extends Pg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ai(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}};function uL(n){n=On(n,Mi);let e=On(n.firestore,Ir),t=Ed(e),r=new Pc(e);return rL(n._query),f7(t,n._query).then(i=>new Uo(e,r,n,i))}function dL(n,e,t){n=On(n,Pt);let r=On(n.firestore,Ir),i=wC(n.converter,e,t);return SC(r,[EC(jg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Sn.none())])}function hL(n){return SC(On(n.firestore,Ir),[new Dc(n._key,Sn.none())])}function fL(n,e){let t=On(n.firestore,Ir),r=vC(n),i=wC(n.converter,e);return SC(t,[EC(jg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}function pL(n,...e){var t,r,i;n=bt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||AO(e[o])||(s=e[o++]);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(AO(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof Pt)u=On(n.firestore,Ir),d=Og(n._key.path),c={next:f=>{e[o]&&e[o](mL(u,n,f))},error:e[o+1],complete:e[o+2]};else{let f=On(n,Mi);u=On(f.firestore,Ir),d=f._query;let m=new Pc(u);c={next:g=>{e[o]&&e[o](new Uo(u,m,f,g))},error:e[o+1],complete:e[o+2]},rL(n._query)}return(function(m,g,w,x){let P=new hd(x),U=new dd(g,P,w);return m.asyncQueue.enqueueAndForget(async()=>fC(await Cg(m),U)),()=>{P.Ou(),m.asyncQueue.enqueueAndForget(async()=>pC(await Cg(m),U))}})(Ed(u),d,a,c)}function SC(n,e){return(function(r,i){let s=new Xn;return r.asyncQueue.enqueueAndForget(async()=>e7(await u7(r),i,s)),s.promise})(Ed(n),e)}function mL(n,e,t){let r=t.docs.get(e._key),i=new Pc(n);return new xs(n,i,e._key,r,new Cs(t.hasPendingWrites,t.fromCache),e.converter)}var b7={maxAttempts:5};function Yu(n,e){if((n=bt(n)).firestore!==e)throw new G(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var KS=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jg(e)}get(e){let t=Yu(e,this._firestore),r=new WS(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return ae(24041);let s=i[0];if(s.isFoundDocument())return new kc(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new kc(this._firestore,r,t._key,null,t.converter);throw ae(18433,{doc:s})})}set(e,t,r){let i=Yu(e,this._firestore),s=wC(i.converter,t,r),o=EC(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){let s=Yu(e,this._firestore),o;return o=typeof(t=bt(t))=="string"||t instanceof Rc?y7(this._dataReader,"Transaction.update",s._key,t,r,i):g7(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){let t=Yu(e,this._firestore);return this._transaction.delete(t._key),this}};var YS=class extends KS{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Yu(e,this._firestore),r=new Pc(this._firestore);return super.get(e).then(i=>new xs(this._firestore,r,t._key,i._document,new Cs(!1,!1),t.converter))}};function gL(n,e,t){n=On(n,Ir);let r=Object.assign(Object.assign({},b7),t);return(function(s){if(s.maxAttempts<1)throw new G(V.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(s,o,a){let c=new Xn;return s.asyncQueue.enqueueAndForget(async()=>{let u=await d7(s);new LS(s.asyncQueue,u,a,o,c).zu()}),c.promise})(Ed(n),i=>e(new YS(n,i)),r)}(function(e,t=!0){(function(i){Nc=i})(_s),yr(new pn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ir(new fw(r.getProvider("auth-internal")),new gw(o,r.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ig(u.options.projectId,d)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),gt(VM,UM,e),gt(VM,UM,"esm2017")})();var Ko=class{constructor(e){return e}},yL="firestore",CC=class{constructor(){return nc(yL)}};var TC=new K("angularfire2.firestore-instances");function I7(n,e){let t=Ru(yL,n,e);return t&&new Ko(t)}function w7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ko(r)}}var S7={provide:CC,deps:[[new xn,TC]]},C7={provide:Ko,useFactory:I7,deps:[[new xn,TC],vi]};function _L(n,...e){return gt("angularfire",vs.full,"fst"),sr([C7,S7,{provide:TC,useFactory:w7(n),multi:!0,deps:[Ne,Ge,Es,Ao,[new xn,qu],[new xn,rc],...e]}])}var Id=ut(fL,!0,2);var wr=ut(JF,!0,2);var DC=ut(hL,!0,2);var Lc=ut(vC,!0,2);var vL=ut(lL,!0);var wd=ut(uL,!0);var EL=ut(ZF,!0);var Vc=ut(aL,!0,2);var AC=ut(pL,!0);var Uc=ut(oL,!0,2),Yo=ut(iL,!0,2);var bL=ut(gL,!0),IL=ut(dL,!0,2);var wL=ut(sL,!0,2);var SL={production:!1,firebase:{apiKey:"AIzaSyBQ18QYhul1hn4RaOsgCsWUW_YaxrwEoqQ",authDomain:"jeub2-online.firebaseapp.com",projectId:"jeub2-online",storageBucket:"jeub2-online.firebasestorage.app",messagingSenderId:"702638381652",appId:"1:702638381652:web:fd034689545996dd8d2bc1",measurementId:"G-M3MPPHV9VB"}};var be="primary",Od=Symbol("RouteTitle"),NC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Gc(n){return new NC(n)}function D7(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Kg(n){return new Promise((e,t)=>{n.pipe(si()).subscribe({next:r=>e(r),error:r=>t(r)})})}function A7(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Jr(n[t],e[t]))return!1;return!0}function Jr(n,e){let t=n?MC(n):void 0,r=e?MC(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!NL(n[i],e[i]))return!1;return!0}function MC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function NL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function ML(n){return n.length>0?n[n.length-1]:null}function ta(n){return Tl(n)?n:pi(n)?je(Promise.resolve(n)):Se(n)}function OL(n){return Tl(n)?Kg(n):Promise.resolve(n)}var x7={exact:LL,subset:VL},FL={exact:R7,subset:k7,ignored:()=>!0};function CL(n,e,t){return x7[t.paths](n.root,e.root,t.matrixParams)&&FL[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function R7(n,e){return Jr(n,e)}function LL(n,e,t){if(!Zo(n.segments,e.segments)||!Gg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!LL(n.children[r],e.children[r],t))return!1;return!0}function k7(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>NL(n[t],e[t]))}function VL(n,e,t){return UL(n,e,e.segments,t)}function UL(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Zo(i,t)||e.hasChildren()||!Gg(i,t,r))}else if(n.segments.length===t.length){if(!Zo(n.segments,t)||!Gg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!VL(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Zo(n.segments,i)||!Gg(n.segments,i,r)||!n.children[be]?!1:UL(n.children[be],e,s,r)}}function Gg(n,e,t){return e.every((r,i)=>FL[t](n[i].parameters,r.parameters))}var Zr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Gc(this.queryParams),this._queryParamMap}toString(){return M7.serialize(this)}},ze=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qg(this)}},Jo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Gc(this.parameters),this._parameterMap}toString(){return jL(this)}};function P7(n,e){return Zo(n,e)&&n.every((t,r)=>Jr(t.parameters,e[r].parameters))}function Zo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function N7(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===be&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==be&&(t=t.concat(e(i,r)))}),t}var Yc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new Fs,providedIn:"root"})}return n})(),Fs=class{parse(e){let t=new FC(e);return new Zr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Sd(e.root,!0)}`,r=L7(e.queryParams),i=typeof e.fragment=="string"?`#${O7(e.fragment)}`:"";return`${t}${r}${i}`}},M7=new Fs;function qg(n){return n.segments.map(e=>jL(e)).join("/")}function Sd(n,e){if(!n.hasChildren())return qg(n);if(e){let t=n.children[be]?Sd(n.children[be],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==be&&r.push(`${i}:${Sd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=N7(n,(r,i)=>i===be?[Sd(n.children[be],!1)]:[`${i}:${Sd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[be]!=null?`${qg(n)}/${t[0]}`:`${qg(n)}/(${t.join("//")})`}}function BL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hg(n){return BL(n).replace(/%3B/gi,";")}function O7(n){return encodeURI(n)}function OC(n){return BL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wg(n){return decodeURIComponent(n)}function TL(n){return Wg(n.replace(/\+/g,"%20"))}function jL(n){return`${OC(n.path)}${F7(n.parameters)}`}function F7(n){return Object.entries(n).map(([e,t])=>`;${OC(e)}=${OC(t)}`).join("")}function L7(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Hg(t)}=${Hg(i)}`).join("&"):`${Hg(t)}=${Hg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var V7=/^[^\/()?;#]+/;function xC(n){let e=n.match(V7);return e?e[0]:""}var U7=/^[^\/()?;=#]+/;function B7(n){let e=n.match(U7);return e?e[0]:""}var j7=/^[^=?&#]+/;function $7(n){let e=n.match(j7);return e?e[0]:""}var H7=/^[^&#]+/;function z7(n){let e=n.match(H7);return e?e[0]:""}var FC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[be]=new ze(e,t)),r}parseSegment(){let e=xC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new Jo(Wg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=B7(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=xC(this.remaining);i&&(r=i,this.capture(r))}e[Wg(t)]=Wg(r)}parseQueryParam(e){let t=$7(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=z7(this.remaining);o&&(r=o,this.capture(r))}let i=TL(t),s=TL(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=be);let o=this.parseChildren();t[s??be]=Object.keys(o).length===1&&o[be]?o[be]:new ze([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function $L(n){return n.segments.length>0?new ze([],{[be]:n}):n}function HL(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=HL(i);if(r===be&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ze(n.segments,e);return G7(t)}function G7(n){if(n.numberOfChildren===1&&n.children[be]){let e=n.children[be];return new ze(n.segments.concat(e.segments),e.children)}return n}function qc(n){return n instanceof Zr}function q7(n,e,t=null,r=null,i=new Fs){let s=zL(n);return GL(s,e,t,r,i)}function zL(n){let e;function t(s){let o={};for(let c of s.children){let u=t(c);o[c.outlet]=u}let a=new ze(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=$L(r);return e??i}function GL(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return RC(s,s,s,t,r,i);let o=W7(e);if(o.toRoot())return RC(s,s,new ze([],{}),t,r,i);let a=K7(o,s,n),c=a.processChildren?Td(a.segmentGroup,a.index,o.commands):WL(a.segmentGroup,a.index,o.commands);return RC(s,a.segmentGroup,c,t,r,i)}function Yg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ad(n){return typeof n=="object"&&n!=null&&n.outlets}function DL(n,e,t){n||="\u0275";let r=new Zr;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function RC(n,e,t,r,i,s){let o={};for(let[u,d]of Object.entries(r??{}))o[u]=Array.isArray(d)?d.map(f=>DL(u,f,s)):DL(u,d,s);let a;n===e?a=t:a=qL(n,e,t);let c=$L(HL(a));return new Zr(c,o,i)}function qL(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=qL(s,e,t)}),new ze(n.segments,r)}var Qg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Yg(r[0]))throw new B(4003,!1);let i=r.find(Ad);if(i&&i!==ML(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function W7(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Qg(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Qg(t,e,r)}var jc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function K7(n,e,t){if(n.isAbsolute)return new jc(e,!0,0);if(!t)return new jc(e,!1,NaN);if(t.parent===null)return new jc(t,!0,0);let r=Yg(n.commands[0])?0:1,i=t.segments.length-1+r;return Y7(t,i,n.numberOfDoubleDots)}function Y7(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new jc(r,!1,i-s)}function Q7(n){return Ad(n[0])?n[0].outlets:{[be]:n}}function WL(n,e,t){if(n??=new ze([],{}),n.segments.length===0&&n.hasChildren())return Td(n,e,t);let r=J7(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ze(n.segments.slice(0,r.pathIndex),{});return s.children[be]=new ze(n.segments.slice(r.pathIndex),n.children),Td(s,0,i)}else return r.match&&i.length===0?new ze(n.segments,{}):r.match&&!n.hasChildren()?LC(n,e,t):r.match?Td(n,0,i):LC(n,e,t)}function Td(n,e,t){if(t.length===0)return new ze(n.segments,{});{let r=Q7(t),i={};if(Object.keys(r).some(s=>s!==be)&&n.children[be]&&n.numberOfChildren===1&&n.children[be].segments.length===0){let s=Td(n.children[be],e,t);return new ze(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=WL(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ze(n.segments,i)}}function J7(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Ad(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!xL(c,u,o))return s;r+=2}else{if(!xL(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function LC(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Ad(s)){let c=Z7(s.outlets);return new ze(r,c)}if(i===0&&Yg(t[0])){let c=n.segments[e];r.push(new Jo(c.path,AL(t[0]))),i++;continue}let o=Ad(s)?s.outlets[be]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Yg(a)?(r.push(new Jo(o,AL(a))),i+=2):(r.push(new Jo(o,{})),i++)}return new ze(r,{})}function Z7(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=LC(new ze([],{}),0,r))}),e}function AL(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function xL(n,e,t){return n==t.path&&Jr(e,t.parameters)}var $c="imperative",Ut=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ut||{}),er=class{id;url;constructor(e,t){this.id=e,this.url=t}},Xo=class extends er{type=Ut.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xr=class extends er{urlAfterRedirects;type=Ut.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Cn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Cn||{}),xd=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(xd||{}),Oi=class extends er{reason;code;type=Ut.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fi=class extends er{reason;code;type=Ut.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Rd=class extends er{error;target;type=Ut.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Jg=class extends er{urlAfterRedirects;state;type=Ut.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},VC=class extends er{urlAfterRedirects;state;type=Ut.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},UC=class extends er{urlAfterRedirects;state;shouldActivate;type=Ut.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},BC=class extends er{urlAfterRedirects;state;type=Ut.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jC=class extends er{urlAfterRedirects;state;type=Ut.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$C=class{route;type=Ut.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},HC=class{route;type=Ut.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zC=class{snapshot;type=Ut.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},GC=class{snapshot;type=Ut.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qC=class{snapshot;type=Ut.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},WC=class{snapshot;type=Ut.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kd=class{routerEvent;position;anchor;type=Ut.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Pd=class{},Wc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function X7(n){return!(n instanceof Pd)&&!(n instanceof Wc)}function eK(n,e){return n.providers&&!n._injector&&(n._injector=za(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Sr(n){return n.outlet||be}function tK(n,e){let t=n.filter(r=>Sr(r)===e);return t.push(...n.filter(r=>Sr(r)!==e)),t}function Qc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var KC=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Qc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Jc(this.rootInjector)}},Jc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new KC(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(te(pt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zg=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=YC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=YC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=QC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return QC(e,this._root).map(t=>t.value)}};function YC(n,e){if(n===e.value)return e;for(let t of e.children){let r=YC(n,t);if(r)return r}return null}function QC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=QC(n,t);if(r.length)return r.unshift(e),r}return[]}var Vn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Bc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Xg=class extends Zg{snapshot;constructor(e,t){super(e),this.snapshot=t,rT(this,e)}toString(){return this.snapshot.toString()}};function KL(n){let e=nK(n),t=new rt([new Jo("",{})]),r=new rt({}),i=new rt({}),s=new rt({}),o=new rt(""),a=new ea(t,r,s,o,i,be,n,e.root);return a.snapshot=e.root,new Xg(new Vn(a,[]),e)}function nK(n){let e={},t={},r={},s=new Hc([],e,r,"",t,be,n,null,{});return new ty("",new Vn(s,[]))}var ea=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Me(u=>u[Od]))??Se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Me(e=>Gc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Me(e=>Gc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ey(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&QL(i)&&(r.resolve[Od]=i.title),r}var Hc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Od]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Gc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Gc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ty=class extends Zg{url;constructor(e,t){super(t),this.url=e,rT(this,t)}toString(){return YL(this._root)}};function rT(n,e){e.value._routerState=n,e.children.forEach(t=>rT(n,t))}function YL(n){let e=n.children.length>0?` { ${n.children.map(YL).join(", ")} } `:"";return`${n.value}${e}`}function kC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Jr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Jr(e.params,t.params)||n.paramsSubject.next(t.params),A7(e.url,t.url)||n.urlSubject.next(t.url),Jr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function JC(n,e){let t=Jr(n.params,e.params)&&P7(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||JC(n.parent,e.parent))}function QL(n){return typeof n.title=="string"||n.title===null}var rK=new K(""),JL=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=be;activateEvents=new Ke;deactivateEvents=new Ke;attachEvents=new Ke;detachEvents=new Ke;routerOutletData=B1();parentContexts=M(Jc);location=M(qn);changeDetector=M(kt);inputBinder=M(Fd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ZC(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ot({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Lr]})}return n})(),ZC=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===ea?this.route:e===Jc?this.childContexts:e===rK?this.outletData:this.parent.get(e,t)}},Fd=new K(""),iT=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Yh([r.queryParams,r.params,r.data]).pipe(_n(([s,o,a],c)=>(a=F(F(F({},s),o),a),c===0?Se(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=q1(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),ZL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=mt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ie(0,"router-outlet")},dependencies:[JL],encapsulation:2})}return n})();function sT(n){let e=n.children&&n.children.map(sT),t=e?ee(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==be&&(t.component=ZL),t}function iK(n,e,t){let r=Nd(n,e._root,t?t._root:void 0);return new Xg(r,e)}function Nd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=sK(n,e,t);return new Vn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Nd(n,a)),o}}let r=oK(e.value),i=e.children.map(s=>Nd(n,s));return new Vn(r,i)}}function sK(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Nd(n,r,i);return Nd(n,r)})}function oK(n){return new ea(new rt(n.url),new rt(n.params),new rt(n.queryParams),new rt(n.fragment),new rt(n.data),n.outlet,n.component,n)}var Md=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},XL="ngNavigationCancelingError";function ny(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=qc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=eV(!1,Cn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function eV(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[XL]=!0,t.cancellationCode=e,t}function aK(n){return tV(n)&&qc(n.url)}function tV(n){return!!n&&n[XL]}var cK=(n,e,t,r)=>Me(i=>(new XC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),XC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),kC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Bc(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Bc(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Bc(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Bc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new WC(s.value.snapshot))}),e.children.length&&this.forwardEvent(new GC(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(kC(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),kC(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},ry=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function lK(n,e,t){let r=n._root,i=e?e._root:null;return Cd(r,i,t,[r.value])}function uK(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Zc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!X_(n)?n:e.get(n):r}function Cd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Bc(e);return n.children.forEach(o=>{dK(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Dd(a,t.getContext(o),i)),i}function dK(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=hK(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ry(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Cd(n,e,a?a.children:null,r,i):Cd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zc(a.outlet.component,o))}else o&&Dd(e,a,i),i.canActivateChecks.push(new ry(r)),s.component?Cd(n,null,a?a.children:null,r,i):Cd(n,null,t,r,i);return i}function hK(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Zo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zo(n.url,e.url)||!Jr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!JC(n,e)||!Jr(n.queryParams,e.queryParams);case"paramsChange":default:return!JC(n,e)}}function Dd(n,e,t){let r=Bc(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Dd(o,e.children.getContext(s),t):Dd(o,null,t):Dd(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new zc(e.outlet.component,i)):t.canDeactivateChecks.push(new zc(null,i)):t.canDeactivateChecks.push(new zc(null,i))}function Ld(n){return typeof n=="function"}function fK(n){return typeof n=="boolean"}function pK(n){return n&&Ld(n.canLoad)}function mK(n){return n&&Ld(n.canActivate)}function gK(n){return n&&Ld(n.canActivateChild)}function yK(n){return n&&Ld(n.canDeactivate)}function _K(n){return n&&Ld(n.canMatch)}function nV(n){return n instanceof Gs||n?.name==="EmptyError"}var zg=Symbol("INITIAL_VALUE");function Kc(){return _n(n=>Yh(n.map(e=>e.pipe(xt(1),Ea(zg)))).pipe(Me(e=>{for(let t of e)if(t!==!0){if(t===zg)return zg;if(t===!1||vK(t))return t}return!0}),on(e=>e!==zg),xt(1)))}function vK(n){return qc(n)||n instanceof Md}function rV(n){return n.aborted?Se(void 0).pipe(xt(1)):new me(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function iV(n){return Tr(rV(n))}function EK(n,e){return jt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Se(ee(F({},t),{guardsResult:!0})):bK(o,r,i,n).pipe(jt(a=>a&&fK(a)?IK(r,s,n,e):Se(a)),Me(a=>ee(F({},t),{guardsResult:a})))})}function bK(n,e,t,r){return je(n).pipe(jt(i=>DK(i.component,i.route,t,e,r)),si(i=>i!==!0,!0))}function IK(n,e,t,r){return je(e).pipe(va(i=>ya(SK(i.route.parent,r),wK(i.route,r),TK(n,i.path,t),CK(n,i.route,t))),si(i=>i!==!0,!0))}function wK(n,e){return n!==null&&e&&e(new qC(n)),Se(!0)}function SK(n,e){return n!==null&&e&&e(new zC(n)),Se(!0)}function CK(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Se(!0);let i=r.map(s=>Dl(()=>{let o=Qc(e)??t,a=Zc(s,o),c=mK(a)?a.canActivate(e,n):It(o,()=>a(e,n));return ta(c).pipe(si())}));return Se(i).pipe(Kc())}function TK(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>uK(o)).filter(o=>o!==null).map(o=>Dl(()=>{let a=o.guards.map(c=>{let u=Qc(o.node)??t,d=Zc(c,u),f=gK(d)?d.canActivateChild(r,n):It(u,()=>d(r,n));return ta(f).pipe(si())});return Se(a).pipe(Kc())}));return Se(s).pipe(Kc())}function DK(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Se(!0);let o=s.map(a=>{let c=Qc(e)??i,u=Zc(a,c),d=yK(u)?u.canDeactivate(n,e,t,r):It(c,()=>u(n,e,t,r));return ta(d).pipe(si())});return Se(o).pipe(Kc())}function AK(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return Se(!0);let o=s.map(a=>{let c=Zc(a,n),u=pK(c)?c.canLoad(e,t):It(n,()=>c(e,t)),d=ta(u);return i?d.pipe(iV(i)):d});return Se(o).pipe(Kc(),sV(r))}function sV(n){return I_($t(e=>{if(typeof e!="boolean")throw ny(n,e)}),Me(e=>e===!0))}function xK(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return Se(!0);let o=s.map(a=>{let c=Zc(a,n),u=_K(c)?c.canMatch(e,t):It(n,()=>c(e,t)),d=ta(u);return i?d.pipe(iV(i)):d});return Se(o).pipe(Kc(),sV(r))}var Qo=class oV extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,oV.prototype)}},eT=class aV extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,aV.prototype)}};function RK(n){throw new B(4e3,!1)}function kK(n){throw eV(!1,Cn.GuardRejected)}var PK=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[be])throw RK(`${e.redirectTo}`);i=i.children[be]}}async applyRedirectCommands(e,t,r,i,s){let o=await NK(t,i,s);if(o instanceof Zr)throw new eT(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new eT(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Zr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ze(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function NK(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:u,data:d,title:f}=e;return Kg(ta(It(t,()=>r({params:u,data:d,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:f}))))}var tT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function MK(n,e,t,r,i,s){let o=cV(n,e,t);return o.matched?(r=eK(e,r),xK(r,e,t,i,s).pipe(Me(a=>a===!0?o:F({},tT)))):Se(o)}function cV(n,e,t){if(e.path==="**")return OK(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},tT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||D7)(t,n,e);if(!i)return F({},tT);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function OK(n){return{matched:!0,parameters:n.length>0?ML(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function RL(n,e,t,r){return t.length>0&&VK(n,t,r)?{segmentGroup:new ze(e,LK(r,new ze(t,n.children))),slicedSegments:[]}:t.length===0&&UK(n,t,r)?{segmentGroup:new ze(n.segments,FK(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ze(n.segments,n.children),slicedSegments:t}}function FK(n,e,t,r){let i={};for(let s of t)if(iy(n,e,s)&&!r[Sr(s)]){let o=new ze([],{});i[Sr(s)]=o}return F(F({},r),i)}function LK(n,e){let t={};t[be]=e;for(let r of n)if(r.path===""&&Sr(r)!==be){let i=new ze([],{});t[Sr(r)]=i}return t}function VK(n,e,t){return t.some(r=>iy(n,e,r)&&Sr(r)!==be)}function UK(n,e,t){return t.some(r=>iy(n,e,r))}function iy(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function BK(n,e,t){return e.length===0&&!n.children[t]}var jK=class{};async function $K(n,e,t,r,i,s,o="emptyOnly",a){return new zK(n,e,t,r,i,o,s,a).recognize()}var HK=31,zK=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new PK(this.urlSerializer,this.urlTree)}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}async recognize(){let e=RL(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Vn(r,t),s=new ty("",i),o=q7(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Hc([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),be,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,be,t),rootSnapshot:t}}catch(r){if(r instanceof eT)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qo?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof Vn?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let u=r.children[c],d=tK(t,c),f=await this.processSegmentGroup(e,d,u,c,i);o.push(...f)}let a=lV(o);return GK(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(u){if(u instanceof Qo||nV(u))continue;throw u}if(BK(r,i,s))return new jK;throw new Qo(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(Sr(r)!==o&&(o===be||!iy(i,s,r)))throw new Qo(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new Qo(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:m}=cV(t,i,s);if(!c)throw new Qo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>HK&&(this.allowRedirects=!1));let g=new Hc(s,u,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,kL(i),Sr(i),i.component??i._loadedComponent??null,i,PL(i)),w=ey(g,a,this.paramsInheritanceStrategy);if(g.params=Object.freeze(w.params),g.data=Object.freeze(w.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let x=await this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,g,e),P=await this.applyRedirects.lineralizeSegments(i,x);return this.processSegment(e,r,t,P.concat(m),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Kg(MK(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new Qo(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:m}=a,g=new Hc(f,d,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,kL(r),Sr(r),r.component??r._loadedComponent??null,r,PL(r)),w=ey(g,o,this.paramsInheritanceStrategy);g.params=Object.freeze(w.params),g.data=Object.freeze(w.data);let{segmentGroup:x,slicedSegments:P}=RL(t,f,m,c);if(P.length===0&&x.hasChildren()){let Z=await this.processChildren(u,c,x,g);return new Vn(g,Z)}if(c.length===0&&P.length===0)return new Vn(g,[]);let U=Sr(r)===s,W=await this.processSegment(u,c,x,P,U?be:s,!0,g);return new Vn(g,W instanceof Vn?[W]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Kg(AK(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw kK(t)}return{routes:[],injector:e}}};function GK(n){n.sort((e,t)=>e.value.outlet===be?-1:t.value.outlet===be?1:e.value.outlet.localeCompare(t.value.outlet))}function qK(n){let e=n.value.routeConfig;return e&&e.path===""}function lV(n){let e=[],t=new Set;for(let r of n){if(!qK(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=lV(r.children);e.push(new Vn(r.value,i))}return e.filter(r=>!t.has(r))}function kL(n){return n.data||{}}function PL(n){return n.resolve||{}}var WK=new K("",{factory:()=>$K});function KK(n,e,t,r,i,s,o){let a=n.get(WK);return jt(c=>Se(c).pipe(_n(u=>a(n,e,t,r,u.extractedUrl,i,s,o)),Me(({state:u,tree:d})=>ee(F({},c),{targetSnapshot:u,urlAfterRedirects:d}))))}function YK(n,e){return jt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Se(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of uV(c))o.add(u);let a=0;return je(o).pipe(va(c=>s.has(c)?QK(c,r,n,e):(c.data=ey(c,c.parent,n).resolve,Se(void 0))),$t(()=>a++),Zh(1),jt(c=>a===o.size?Se(t):Qt))})}function uV(n){let e=n.children.map(t=>uV(t)).flat();return[n,...e]}function QK(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!QL(i)&&(s[Od]=i.title),Dl(()=>(n.data=ey(n,n.parent,t).resolve,JK(s,n,e,r).pipe(Me(o=>(n._resolvedData=o,n.data=F(F({},n.data),o),null)))))}function JK(n,e,t,r){let i=MC(n);if(i.length===0)return Se({});let s={};return je(i).pipe(jt(o=>ZK(n[o],e,t,r).pipe(si(),$t(a=>{if(a instanceof Md)throw ny(new Fs,a);s[o]=a}))),Zh(1),Me(()=>s),_a(o=>nV(o)?Qt:x_(o)))}function ZK(n,e,t,r){let i=Qc(e)??r,s=Zc(n,i),o=s.resolve?s.resolve(e,t):It(i,()=>s(e,t));return ta(o)}function PC(n){return _n(e=>{let t=n(e);return t?je(t).pipe(Me(()=>e)):Se(e)})}var dV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===be);return r}getResolvedTitleForRoute(t){return t.data[Od]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(XK),providedIn:"root"})}return n})(),XK=(()=>{class n extends dV{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(te(pk))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xc=new K("",{factory:()=>({})}),Vd=new K(""),sy=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(dE);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await OL(It(t,()=>r.loadComponent())),o=await fV(hV(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await eY(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function eY(n,e,t,r){let i=await OL(It(t,()=>n.loadChildren())),s=await fV(hV(i)),o;s instanceof np||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,u=!1;return Array.isArray(o)?(c=o,u=!0):(a=o.create(t).injector,c=a.get(Vd,[],{optional:!0,self:!0}).flat()),{routes:c.map(sT),injector:a}}function tY(n){return n&&typeof n=="object"&&"default"in n}function hV(n){return tY(n)?n.default:n}async function fV(n){return n}var oT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(nY),providedIn:"root"})}return n})(),nY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aT=new K(""),cT=new K("");function pV(n,e,t){let r=n.get(cT),i=n.get(Qe);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),rY(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&It(n,()=>c({transition:a,from:e,to:t})),o}function rY(n){return new Promise(e=>{lo({read:()=>setTimeout(e)},{injector:n})})}var iY=()=>{},lT=new K(""),oy=(()=>{class n{currentNavigation=zt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=zt(null);events=new _e;transitionAbortWithErrorSubject=new _e;configLoader=M(sy);environmentInjector=M(pt);destroyRef=M(zn);urlSerializer=M(Yc);rootContexts=M(Jc);location=M(ps);inputBindingEnabled=M(Fd,{optional:!0})!==null;titleStrategy=M(dV);options=M(Xc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(oT);createViewTransition=M(aT,{optional:!0});navigationErrorHandler=M(lT,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Se(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new $C(i)),r=i=>this.events.next(new HC(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;vt(()=>{this.transitions?.next(ee(F({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new rt(null),this.transitions.pipe(on(r=>r!==null),_n(r=>{let i=!1,s=new AbortController;return Se(r).pipe(_n(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Cn.SupersededByNewNavigation),Qt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?ee(F({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new Fi(o.id,this.urlSerializer.serialize(o.rawUrl),"",xd.IgnoredSameUrlNavigation)),o.resolve(!1),Qt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Se(o).pipe(_n(d=>(this.events.next(new Xo(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Qt:Promise.resolve(d))),KK(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),$t(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=d.urlAfterRedirects,m));let f=new Jg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:f,source:m,restoredState:g,extras:w}=o,x=new Xo(d,this.urlSerializer.serialize(f),m,g);this.events.next(x);let P=KL(this.rootComponentType).snapshot;return this.currentTransition=r=ee(F({},o),{targetSnapshot:P,urlAfterRedirects:f,extras:ee(F({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(U=>(U.finalUrl=f,U)),Se(r)}else return this.events.next(new Fi(o.id,this.urlSerializer.serialize(o.extractedUrl),"",xd.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Qt}),$t(o=>{let a=new VC(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Me(o=>(this.currentTransition=r=ee(F({},o),{guards:lK(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),EK(this.environmentInjector,o=>this.events.next(o)),$t(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw ny(this.urlSerializer,o.guardsResult);let a=new UC(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),on(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Cn.GuardRejected),!1)),PC(o=>{if(o.guards.canActivateChecks.length!==0)return Se(o).pipe($t(a=>{let c=new BC(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),_n(a=>{let c=!1;return Se(a).pipe(YK(this.paramsInheritanceStrategy,this.environmentInjector),$t({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Cn.NoDataFromResolver)}}))}),$t(a=>{let c=new jC(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),PC(o=>{let a=u=>{let d=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let f=Qc(u)??this.environmentInjector;d.push(this.configLoader.loadComponent(f,u.routeConfig).then(m=>{u.component=m}))}for(let f of u.children)d.push(...a(f));return d},c=a(o.targetSnapshot.root);return c.length===0?Se(o):je(Promise.all(c).then(()=>o))}),PC(()=>this.afterPreactivation()),_n(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?je(c).pipe(Me(()=>r)):Se(r)}),Me(o=>{let a=iK(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ee(F({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),$t(()=>{this.events.next(new Pd)}),cK(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),xt(1),Tr(rV(s.signal).pipe(on(()=>!i&&!r.targetRouterState),$t(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Cn.Aborted)}))),$t({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=iY,a)),this.lastSuccessfulNavigation.set(vt(this.currentNavigation)),this.events.next(new Xr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Tr(this.transitionAbortWithErrorSubject.pipe($t(o=>{throw o}))),N_(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Cn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),_a(o=>{if(this.destroyed)return r.resolve(!1),Qt;if(i=!0,tV(o))this.events.next(new Oi(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),aK(o)?this.events.next(new Wc(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Rd(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=It(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Md){let{message:u,cancellationCode:d}=ny(this.urlSerializer,c);this.events.next(new Oi(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new Wc(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Qt}))}))}cancelNavigationTransition(t,r,i){let s=new Oi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=vt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sY(n){return n!==$c}var oY=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(aY),providedIn:"root"})}return n})(),nT=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},aY=(()=>{class n extends nT{static \u0275fac=(()=>{let t;return function(i){return(t||(t=oo(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uT=(()=>{class n{urlSerializer=M(Yc);options=M(Xc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(ps);urlHandlingStrategy=M(oT);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Zr?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=KL(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>M(mV),providedIn:"root"})}return n})(),mV=(()=>{class n extends uT{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Xo?this.updateStateMemento():t instanceof Fi?this.commitTransition(r):t instanceof Jg?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Pd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Oi&&t.code!==Cn.SupersededByNewNavigation&&t.code!==Cn.Redirect?this.restoreHistory(r):t instanceof Rd?this.restoreHistory(r,!0):t instanceof Xr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=F(F({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=F(F({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=oo(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dT(n,e){n.events.pipe(on(t=>t instanceof Xr||t instanceof Oi||t instanceof Rd||t instanceof Fi),Me(t=>t instanceof Xr||t instanceof Fi?0:(t instanceof Oi?t.code===Cn.Redirect||t.code===Cn.SupersededByNewNavigation:!1)?2:1),on(t=>t!==2),xt(1)).subscribe(()=>{e()})}var cY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},na=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(X0);stateManager=M(uT);options=M(Xc,{optional:!0})||{};pendingTasks=M(ui);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(oy);urlSerializer=M(Yc);location=M(ps);urlHandlingStrategy=M(oT);injector=M(pt);_events=new _e;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(oY);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(Vd,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Fd,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new We;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=vt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Oi&&r.code!==Cn.Redirect&&r.code!==Cn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Xr)this.navigated=!0;else if(r instanceof Wc){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||sY(i.source)},o);this.scheduleNavigation(a,$c,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}X7(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$c,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=F({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(Gn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return vt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=zL(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return GL(f,t,d,u??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=qc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,$c,null,r)}navigate(t,r={skipLocationChange:!1}){return uY(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ts(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},cY):r===!1?i=F({},lY):i=r,qc(t))return CL(this.currentUrlTree,t,i);let s=this.parseUrl(t);return CL(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((f,m)=>{a=f,c=m});let d=this.pendingTasks.add();return dT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uY(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new B(4008,!1)}var Ud=class{};var gV=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(on(t=>t instanceof Xr),va(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=za(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return je(i).pipe(Yi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=je(this.loader.loadChildren(t,r)):i=Se(null);let s=i.pipe(jt(o=>o===null?Se(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(t,r);return je([s,o]).pipe(Yi())}else return s})}static \u0275fac=function(r){return new(r||n)(te(na),te(pt),te(Ud),te(sy))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yV=new K(""),dY=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=$c;restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Fi&&t.code===xd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof kd))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new kd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){W0()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function hY(){return M(na).routerState.root}function Bd(n,e){return{\u0275kind:n,\u0275providers:e}}function fY(){let n=M(Ge);return e=>{let t=n.get(Wn);if(e!==t.components[0])return;let r=n.get(na),i=n.get(_V);n.get(fT)===1&&r.initialNavigation(),n.get(bV,null,{optional:!0})?.setUpPreloading(),n.get(yV,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var _V=new K("",{factory:()=>new _e}),fT=new K("",{factory:()=>1});function vV(){let n=[{provide:k0,useValue:!0},{provide:fT,useValue:0},ap(()=>{let e=M(Ge);return e.get(wE,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(na),s=e.get(_V);dT(i,()=>{r(!0)}),e.get(oy).afterPreactivation=()=>(r(!0),s.closed?Se(void 0):s),i.initialNavigation()}))})];return Bd(2,n)}function EV(){let n=[ap(()=>{M(na).setUpLocationChangeListener()}),{provide:fT,useValue:2}];return Bd(3,n)}var bV=new K("");function IV(n){return Bd(0,[{provide:bV,useExisting:gV},{provide:Ud,useExisting:n}])}function wV(){return Bd(8,[iT,{provide:Fd,useExisting:iT}])}function SV(n){co("NgRouterViewTransitions");let e=[{provide:aT,useValue:pV},{provide:cT,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return Bd(9,e)}var CV=[ps,{provide:Yc,useClass:Fs},na,Jc,{provide:ea,useFactory:hY},sy,[]],ay=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[CV,[],{provide:Vd,multi:!0,useValue:t},[],r?.errorHandler?{provide:lT,useValue:r.errorHandler}:[],{provide:Xc,useValue:r||{}},r?.useHash?mY():gY(),pY(),r?.preloadingStrategy?IV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?yY(r):[],r?.bindToComponentInputs?wV().\u0275providers:[],r?.enableViewTransitions?SV().\u0275providers:[],_Y()]}}static forChild(t){return{ngModule:n,providers:[{provide:Vd,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=it({})}return n})();function pY(){return{provide:yV,useFactory:()=>{let n=M(ok),e=M(Ne),t=M(Xc),r=M(oy),i=M(Yc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new dY(i,r,n,e,t)}}}function mY(){return{provide:mi,useClass:xE}}function gY(){return{provide:mi,useClass:wp}}function yY(n){return[n.initialNavigation==="disabled"?EV().\u0275providers:[],n.initialNavigation==="enabledBlocking"?vV().\u0275providers:[]]}var hT=new K("");function _Y(){return[{provide:hT,useFactory:fY},{provide:cp,multi:!0,useExisting:hT}]}var EY=[],cy=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ct({type:n});static \u0275inj=it({imports:[ay.forRoot(EY),ay]})};var ly=(s=>(s.CLOTHING_STORE="CLOTHING_STORE",s.FREELANCE_DEV="FREELANCE_DEV",s.WEB_AGENCY="WEB_AGENCY",s.FOODTRUCK="FOODTRUCK",s.FACTORY="FACTORY",s))(ly||{});var uy=(i=>(i.CHAIR="CHAIR",i.SCREEN="SCREEN",i.COFFEE="COFFEE",i.PC="PC",i))(uy||{}),jd=(u=>(u.BUN="BUN",u.STEAK="STEAK",u.CHEESE="CHEESE",u.SALAD="SALAD",u.TOMATO="TOMATO",u.SAUCE="SAUCE",u.ONION="ONION",u.PICKLE="PICKLE",u.BACON="BACON",u))(jd||{});var $d=[{id:"DEFAULT",name:"VS Code Dark",cost:0,bgClass:"bg-[#1e1e1e]",textClass:"text-slate-200",accentClass:"text-blue-400",cursorClass:"bg-blue-500",borderClass:"border-slate-700",successClass:"text-green-400"},{id:"MATRIX",name:"The Matrix",cost:2500,bgClass:"bg-black",textClass:"text-green-700 font-mono",accentClass:"text-green-400",cursorClass:"bg-green-500",borderClass:"border-green-800",successClass:"text-green-400 neon-glow"},{id:"DRACULA",name:"Dracula",cost:5e3,bgClass:"bg-[#282a36]",textClass:"text-[#f8f8f2]",accentClass:"text-[#bd93f9]",cursorClass:"bg-[#bd93f9]",borderClass:"border-[#6272a4]",successClass:"text-[#ff79c6] drop-shadow-md"},{id:"SOLARIZED",name:"Solarized Light",cost:1e4,bgClass:"bg-[#fdf6e3]",textClass:"text-[#657b83]",accentClass:"text-[#b58900]",cursorClass:"bg-[#d33682]",borderClass:"border-[#93a1a1]",successClass:"text-[#d33682] font-bold"}];var ei=class n{constructor(e,t){this.auth=e;this.firestore=t;this.authInstance=e,this.user$=PM(this.auth),this.user$.subscribe(r=>{this.currentUserId=r?.uid||null,r&&(console.log("\u2705 Connect\xE9:",r.uid),this.listenToInvites(r.uid))}),this.listenToPublicEvents()}user$;currentUserId=null;authInstance;publicEvents$=new rt(["Bienvenue sur JEUB2 Online \u2022 En attente de gagnants..."]);invites$=new rt([]);listenToInvites(e){let t=Yo(wr(this.firestore,"invites"),wL("toId","==",e));AC(t,r=>{let i=r.docs.map(s=>F({id:s.id},s.data()));this.invites$.next(i)})}async sendInvite(e,t,r,i,s){this.currentUserId&&await Id(wr(this.firestore,"invites"),{fromId:this.currentUserId,fromName:s,toId:e,gameType:r,amount:i,timestamp:Date.now()})}async acceptInvite(e){return e.id&&await DC(Lc(this.firestore,"invites",e.id)),!0}async declineInvite(e){e.id&&await DC(Lc(this.firestore,"invites",e.id))}async getOnlinePlayers(){try{let e=Yo(wr(this.firestore,"players"),Uc("lastUpdated","desc"),Vc(20));return(await wd(e)).docs.map(r=>F({id:r.id},r.data())).filter(r=>r.username!=="Anonyme"&&r.username&&r.id!==this.currentUserId).map(r=>({id:r.id,username:r.username,title:r.user?.title||"Joueur",money:r.money,avatarId:r.user?.avatarId||"\u{1F464}"}))}catch{return[]}}listenToPublicEvents(){let e=Yo(wr(this.firestore,"public_events"),Uc("timestamp","desc"),Vc(10));AC(e,t=>{let r=t.docs.map(i=>i.data()).map(i=>i.text);r.length>0&&this.publicEvents$.next(r)})}async logPublicEvent(e,t="INFO"){try{await Id(wr(this.firestore,"public_events"),{text:e,type:t,timestamp:Date.now()})}catch{}}async loginGoogle(){let e=new WI;return e.setCustomParameters({prompt:"select_account"}),await MM(this.auth,e)}async logout(){return await OM(this.auth)}async saveProgress(e){if(!this.currentUserId)return;let t=Lc(this.firestore,"players",this.currentUserId);try{await IL(t,{username:e.user?.username||"Anonyme",money:e.money,user:e.user,companies:e.companies,employees:e.employees||[],foodtruckUpgrades:e.foodtruckUpgrades,freelanceUpgrades:e.freelanceUpgrades,foodtruckMastery:e.foodtruckMastery,dailyStats:e.dailyStats,achievements:e.achievements,gems:e.gems||0,day:e.day,timeOfDay:e.timeOfDay,hasCompletedIntro:e.hasCompletedIntro,leaderboardStats:{money:e.money,username:e.user?.username||"Anonyme",creationDate:e.user?.creationDate||Date.now(),stats:e.stats||{}},lastUpdated:Date.now()},{merge:!0})}catch{}}async loadProgress(){if(!this.currentUserId)return null;try{let e=await vL(Lc(this.firestore,"players",this.currentUserId));return e.exists()?e.data():null}catch{return null}}getLeaderboard(){let e=Yo(wr(this.firestore,"players"),Uc("leaderboardStats.money","desc"),Vc(50));return je(wd(e)).pipe(Me(t=>t.docs.map(r=>F({id:r.id},r.data().leaderboardStats))))}getHoldings(){let e=Yo(wr(this.firestore,"holdings"),Uc("totalValuation","desc"),Vc(20));return je(wd(e)).pipe(Me(t=>t.docs.map(r=>F({id:r.id},r.data()))))}async createHolding(e,t){if(!this.currentUserId)return;let r={id:"",name:e,leaderName:t,totalValuation:0,membersCount:1,icon:"\u{1F3E2}"};return(await Id(wr(this.firestore,"holdings"),r)).id}getMarketItems(){let e=Yo(wr(this.firestore,"market"),Uc("timestamp","desc"),Vc(50));return je(wd(e)).pipe(Me(t=>t.docs.map(r=>F({id:r.id},r.data()))))}async sellItem(e){await Id(wr(this.firestore,"market"),e)}async buyItem(e){if(!e.id)return"ERROR";let t=Lc(this.firestore,"market",e.id);try{return await bL(this.firestore,async r=>{if(!(await r.get(t)).exists())throw"SOLD";r.delete(t)}),"SUCCESS"}catch{return"SOLD"}}static \u0275fac=function(t){return new(t||n)(te(Fo),te(Ko))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var pT={DEV_JUNIOR:{role:"DEV_JUNIOR",name:"Stagiaire",baseCost:2e3,costFactor:1.5,baseDailySalary:100,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.2,description:"Code lentement"},DEV_SENIOR:{role:"DEV_SENIOR",name:"Lead Dev",baseCost:1e4,costFactor:1.6,baseDailySalary:800,salaryFactor:1.3,baseEfficiency:4,efficiencyFactor:1.4,description:"Code tr\xE8s vite + Bonus"},COOK:{role:"COOK",name:"Cuisinier",baseCost:500,costFactor:1.55,baseDailySalary:50,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.1,description:"Cuisine"},SERVER:{role:"SERVER",name:"Serveur",baseCost:300,costFactor:1.6,baseDailySalary:40,salaryFactor:1.15,baseEfficiency:5,efficiencyFactor:1.05,description:"Service"},CASHIER:{role:"CASHIER",name:"Caissier",baseCost:200,costFactor:1.4,baseDailySalary:30,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Caisse"},STOCK_MANAGER:{role:"STOCK_MANAGER",name:"Stock",baseCost:500,costFactor:1.4,baseDailySalary:60,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Stock"},WORKER:{role:"WORKER",name:"Ouvrier",baseCost:2e3,costFactor:1.4,baseDailySalary:200,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Prod"},LINE_MANAGER:{role:"LINE_MANAGER",name:"Chef",baseCost:1e4,costFactor:1.5,baseDailySalary:1e3,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.2,description:"Supervision"}},tn=class n{constructor(e){this.firebaseService=e;this.loadLocalState(),Qi(this.TICK_RATE_MS).subscribe(()=>this.gameLoop()),Qi(3e4).subscribe(()=>this.saveToCloud()),this.firebaseService.user$.subscribe(t=>{t?this.loadCloudDataForUser(t):this.isLoading$.next(!1)})}SAVE_KEY="JEUB2_SAVE_V3_ONLINE";TICK_RATE_MS=1e3;HOURS_PER_TICK=1/60;dayEnded$=new _e;isLoading$=new rt(!0);defaultState={user:{username:"Entrepreneur",title:"D\xE9butant",creationDate:Date.now(),avatarId:"\u{1F468}\u200D\u{1F4BC}"},money:2e3,gems:0,totalMoneyEarned:0,hasCompletedIntro:!1,tutoFlags:{foodtruckIntroSeen:!1},day:1,timeOfDay:6,companies:[this.createCompany("1","CLOTHING_STORE","Casino Royal",!0,0),this.createCompany("2","FREELANCE_DEV","Agence Web",!1,1e3),this.createCompany("2","FREELANCE_DEV","Agence Web",!1,1e3),this.createCompany("3","FOODTRUCK","Burger Truck",!1,5e3),this.createCompany("4","FACTORY","Usine Tesla",!1,2e4)],employees:[],foodtruckMastery:this.initFoodtruckMastery(),foodtruckUpgrades:{grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:["BUN","STEAK"],maxServiceReached:1,hasKeyboard:!1},freelanceUpgrades:{chairLevel:0,screenLevel:0,coffeeLevel:0,pcLevel:0,bossBeaten:0,contractsCompleted:0,ownedThemes:["DEFAULT"],activeThemeId:"DEFAULT"},dailyStats:{revenue:0,expenses:0,customersServed:0,day:1},quests:[],achievements:[],activeEvents:[],lastSavedAt:Date.now(),lastOnlineAt:Date.now(),stats:{foodtruckIncome:0,freelanceIncome:0,factoryIncome:0,totalPlayTimeMinutes:0}};state$=new rt(this.defaultState);gameState$=this.state$.asObservable();async loadCloudDataForUser(e){this.isLoading$.next(!0);let t=await this.firebaseService.loadProgress();if(t){console.log("\u2601\uFE0F Sauvegarde charg\xE9e pour",t.user?.username);let r=F(F({},this.defaultState),t);this.state$.next(r),this.saveLocalState()}else console.log("\u{1F195} Aucun compte trouv\xE9, attente cr\xE9ation.");this.isLoading$.next(!1)}async checkIfUserHasSave(e){return!!await this.firebaseService.loadProgress()}async initializeNewUser(e,t){let r=JSON.parse(JSON.stringify(this.defaultState));r.user={username:t,title:"D\xE9butant",creationDate:Date.now(),avatarId:"\u{1F468}\u200D\u{1F4BC}"},r.lastSavedAt=Date.now(),this.state$.next(r),this.saveLocalState(),await this.firebaseService.saveProgress(r)}createCompany(e,t,r,i,s){return{id:e,type:t,name:r,unlocked:i,unlockCost:s,level:1,baseRevenuePerAction:10,revenuePerSecond:0,costPerSecond:0,netProfitPerSecond:0,employees:[]}}updateUsername(e){let t=this.state$.getValue(),r=ee(F({},t.user),{username:e});this.updateState({user:r}),this.saveToCloud()}addMoney(e){let t=this.state$.getValue(),r=F({},t.dailyStats||{day:t.day,revenue:0,expenses:0,customersServed:0});e>0&&(r.revenue+=e),this.updateState({money:t.money+e,totalMoneyEarned:e>0?t.totalMoneyEarned+e:t.totalMoneyEarned,dailyStats:r})}spendMoney(e){let t=this.state$.getValue();return t.money>=e?(this.updateState({money:t.money-e}),!0):!1}gameLoop(){let e=this.state$.getValue();if(!e.hasCompletedIntro)return;let t=e.timeOfDay+this.HOURS_PER_TICK,r=e.day,i=F({},e.dailyStats);if(t>=24){t=0;let s=0;e.companies.forEach(o=>{o.employees.forEach(a=>{s+=a.dailySalary})}),s>0&&(this.addMoney(-s),i.expenses+=s),this.dayEnded$.next(ee(F({},i),{day:e.day})),r++,i={day:r,revenue:0,expenses:0,customersServed:0}}this.updateState({day:r,timeOfDay:t,dailyStats:i})}completeIntro(){let t=this.state$.getValue().companies.map(r=>r.id==="3"?ee(F({},r),{unlocked:!0}):r);this.updateState({hasCompletedIntro:!0,money:1e4,companies:t}),this.saveToCloud()}initFoodtruckMastery(){let e={};return Object.values(jd).forEach(t=>e[t]={level:1,xp:0,xpMax:5}),e}updateState(e){this.state$.next(F(F({},this.state$.getValue()),e))}saveLocalState(){localStorage.setItem(this.SAVE_KEY,JSON.stringify(this.state$.getValue()))}loadLocalState(){let e=localStorage.getItem(this.SAVE_KEY);if(e)try{this.state$.next(F(F({},this.defaultState),JSON.parse(e))),this.isLoading$.next(!1)}catch{}}async saveToCloud(){let e=this.state$.getValue(),t=this.firebaseService.authInstance.currentUser;!t||t.isAnonymous&&!e.hasCompletedIntro||await this.firebaseService.saveProgress(e)}getNextHireCost(e,t){let r=this.state$.getValue().companies.find(i=>i.id===e);return r?Math.floor(pT[t].baseCost*Math.pow(1.5,r.employees.filter(i=>i.role===t).length)):0}hireEmployee(e,t){let r=this.getNextHireCost(e,t);if(this.spendMoney(r)){let i=this.state$.getValue(),s={id:Math.random().toString(36).substr(2,9),role:t,hiredAt:Date.now(),dailySalary:pT[t].baseDailySalary,efficiency:1,isPaused:!1};this.updateState({companies:i.companies.map(o=>o.id===e?ee(F({},o),{employees:[...o.employees,s]}):o)}),this.saveLocalState()}}buySetupUpgrade(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=F({},r.freelanceUpgrades);switch(e){case"CHAIR":i.chairLevel=1;break;case"SCREEN":i.screenLevel=1;break;case"COFFEE":i.coffeeLevel=1;break;case"PC":i.pcLevel=1;break}this.updateState({freelanceUpgrades:i}),this.saveLocalState()}}buyFreelanceTheme(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({freelanceUpgrades:ee(F({},r.freelanceUpgrades),{ownedThemes:[...r.freelanceUpgrades.ownedThemes,e]})}),this.saveLocalState()}}setFreelanceTheme(e){let t=this.state$.getValue();this.updateState({freelanceUpgrades:ee(F({},t.freelanceUpgrades),{activeThemeId:e})}),this.saveLocalState()}buyFoodtruckUpgrade(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=F({},r.foodtruckUpgrades);e==="grill"?i.grillLevel++:e==="marketing"?i.marketingLevel++:i.serviceLevel++,this.updateState({foodtruckUpgrades:i}),this.saveLocalState()}}unlockIngredient(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({foodtruckUpgrades:ee(F({},r.foodtruckUpgrades),{unlockedIngredients:[...r.foodtruckUpgrades.unlockedIngredients,e]})}),this.saveLocalState()}}unlockKeyboard(e){if(this.spendMoney(e)){let t=this.state$.getValue();this.updateState({foodtruckUpgrades:ee(F({},t.foodtruckUpgrades),{hasKeyboard:!0})}),this.saveLocalState()}}buyPrestigeItem(e){let t=this.state$.getValue(),r="PRESTIGE_"+e.id;if(t.achievements.some(i=>i.id===r))return!1;if(this.spendMoney(e.cost)){let i=[...t.achievements,{id:r,name:e.name,icon:e.icon}];return this.updateState({achievements:i}),this.saveToCloud(),!0}return!1}getEmployeeConfig(e){return pT[e]}getTotalEmployeePower(e,t){return this.state$.getValue().companies.find(r=>r.type===e)?.employees.filter(r=>r.role===t).length||0}incrementContractsCompleted(){let e=this.state$.getValue();this.updateState({freelanceUpgrades:ee(F({},e.freelanceUpgrades),{contractsCompleted:(e.freelanceUpgrades.contractsCompleted||0)+1})})}incrementBossBeaten(){let e=this.state$.getValue();this.updateState({freelanceUpgrades:ee(F({},e.freelanceUpgrades),{bossBeaten:e.freelanceUpgrades.bossBeaten+1})})}toggleEmployeePause(e,t){let r=this.state$.getValue();this.updateState({companies:r.companies.map(i=>i.id===e?ee(F({},i),{employees:i.employees.map(s=>s.id===t?ee(F({},s),{isPaused:!s.isPaused}):s)}):i)})}unlockCompany(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({companies:r.companies.map(i=>i.id===e?ee(F({},i),{unlocked:!0}):i)}),this.saveLocalState()}}updateMaxServiceReached(e){let t=this.state$.getValue();e>t.foodtruckUpgrades.maxServiceReached&&this.updateState({foodtruckUpgrades:ee(F({},t.foodtruckUpgrades),{maxServiceReached:e})})}unlockIngredientByService(e){let t=this.state$.getValue();t.foodtruckUpgrades.unlockedIngredients.includes(e)||this.updateState({foodtruckUpgrades:ee(F({},t.foodtruckUpgrades),{unlockedIngredients:[...t.foodtruckUpgrades.unlockedIngredients,e]})})}upgradeEmployeeSetup(e,t,r){if(this.spendMoney(r)){let i=this.state$.getValue();this.updateState({companies:i.companies.map(s=>s.id===e?ee(F({},s),{employees:s.employees.map(o=>o.id===t?ee(F({},o),{efficiency:o.efficiency+1}):o)}):s)})}}updateIngredientMastery(e){this.updateState({foodtruckMastery:e})}incrementCustomersServed(){let e=this.state$.getValue(),t=F({},e.dailyStats);t.customersServed++,this.updateState({dailyStats:t})}setTimeOfDay(e){this.updateState({timeOfDay:e})}logoutAndClear(){localStorage.removeItem(this.SAVE_KEY),this.firebaseService.logout().then(()=>window.location.reload())}hardResetGame(){confirm("Tout effacer ?")&&(localStorage.removeItem(this.SAVE_KEY),window.location.reload())}connectOnline(){}static \u0275fac=function(t){return new(t||n)(te(ei))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var Tn=class n{audioCtx;isMuted=!1;noiseBuffer;constructor(){let e=window.AudioContext||window.webkitAudioContext;this.audioCtx=new e,this.noiseBuffer=this.createNoiseBuffer(1)}resume(){this.audioCtx.state==="suspended"&&this.audioCtx.resume()}playTone(e,t,r,i,s=0,o=0){if(this.isMuted)return;this.resume();let a=this.audioCtx.currentTime,c=this.audioCtx.createOscillator(),u=this.audioCtx.createGain();if(c.type=t,c.frequency.setValueAtTime(e,a),c.detune.value=s,u.gain.setValueAtTime(i,a),u.gain.exponentialRampToValueAtTime(.001,a+r),o>0){let d=this.audioCtx.createBiquadFilter();d.type="lowpass",d.frequency.setValueAtTime(o,a),c.connect(d).connect(u).connect(this.audioCtx.destination)}else c.connect(u).connect(this.audioCtx.destination);c.start(a),c.stop(a+r)}playNoise(e,t,r,i){if(this.isMuted)return;this.resume();let s=this.audioCtx.currentTime,o=this.audioCtx.createBufferSource();o.buffer=this.noiseBuffer;let a=this.audioCtx.createBiquadFilter();a.type=t,a.frequency.setValueAtTime(r,s);let c=this.audioCtx.createGain();c.gain.setValueAtTime(i,s),c.gain.exponentialRampToValueAtTime(.001,s+e),o.connect(a).connect(c).connect(this.audioCtx.destination),o.start(s),o.stop(s+e)}playCash(){this.playTone(1200,"square",.1,.1),setTimeout(()=>this.playTone(1600,"square",.1,.1),80)}playSuccess(){[523,659,783,1046].forEach((e,t)=>{setTimeout(()=>this.playTone(e,"sine",.2,.1),t*100)})}playError(){this.playTone(150,"sawtooth",.3,.2)}playPop(){this.playTone(600,"sine",.1,.1)}playSoftPop(){this.playTone(400,"sine",.1,.05)}startRainAmbience(){}stopRainAmbience(){}playTrashInBin(){this.playNoise(.2,"lowpass",200,.5)}playPaperSound(){this.playNoise(.1,"highpass",1e3,.3)}playLeafSound(){this.playNoise(.15,"bandpass",500,.2)}playCanSound(){this.playNoise(.1,"highpass",2e3,.4)}playScratchSound(){this.playNoise(.1,"bandpass",800,.3)}playSteakSound(){this.playNoise(.3,"lowpass",400,.4)}playSaladSound(){this.playNoise(.1,"highpass",1500,.3)}getVariation(){return Math.random()*50-25}playKeystroke(){this.playRandomKey()}playRandomKey(){this.playTone(300,"triangle",.05,.1,this.getVariation())}playSpace(){this.playTone(150,"square",.1,.15,this.getVariation())}createNoiseBuffer(e){let t=this.audioCtx.sampleRate*e,r=this.audioCtx.createBuffer(1,t,this.audioCtx.sampleRate),i=r.getChannelData(0);for(let s=0;s<t;s++)i[s]=Math.random()*2-1;return r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var mT;function bY(){if(mT==null){let n=typeof document<"u"?document.head:null;mT=!!(n&&(n.createShadowRoot||n.attachShadow))}return mT}function hy(n){if(bY()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Hd(n){return n.composedPath?n.composedPath()[0]:n.target}function TV(n){return n.buttons===0||n.detail===0}function DV(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function AV(n,e=0){return IY(n)?Number(n):arguments.length===2?e:0}function IY(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Li(n){return n instanceof Gt?n.nativeElement:n}var fy=new WeakMap,xV=(()=>{class n{_appRef;_injector=M(Ge);_environmentInjector=M(pt);load(t){let r=this._appRef=this._appRef||this._injector.get(Wn),i=fy.get(r);i||(i={loaders:new Set,refs:[]},fy.set(r,i),r.onDestroy(()=>{fy.get(r)?.refs.forEach(s=>s.destroy()),fy.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(G1(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gT;try{gT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{gT=!1}var RV=(()=>{class n{_platformId=M(hi);isBrowser=this._platformId?sk(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||gT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wY=new K("cdk-dir-doc",{providedIn:"root",factory:()=>M(Qe)}),SY=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function CY(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?SY.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var kV=(()=>{class n{get value(){return this.valueSignal()}valueSignal=zt("ltr");change=new Ke;constructor(){let t=M(wY,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(CY(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var TY=20,PV=(()=>{class n{_platform=M(RV);_listeners;_viewportSize;_change=new _e;_document=M(Qe);constructor(){let t=M(Ne),r=M(En).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect(),o=-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:o,left:a}}change(t=TY){return t>0?this._change.pipe(k_(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var NV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=it({})}return n})();function vT(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?FV(n,e):(r==="input"||r==="select"||r==="textarea")&&OV(n,e),MV("canvas",n,e,FV),MV("input, textarea, select",n,e,OV),e}function MV(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}var DY=0;function OV(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${DY++}`)}function FV(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function TT(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function ET(n,e,t){let{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function AY(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,s=e.top+e.height>n.bottom;return t||r||i||s}function qd(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function LV(n,e,t,r){let{top:i,right:s,bottom:o,left:a,width:c,height:u}=n,d=c*e,f=u*e;return r>i-f&&r<o+f&&t>a-d&&t<s+d}var py=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:TT(t)})})}handleScroll(e){let t=Hd(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,s,o;if(t===this._document){let u=this.getViewportScrollPosition();s=u.top,o=u.left}else s=t.scrollTop,o=t.scrollLeft;let a=i.top-s,c=i.left-o;return this.positions.forEach((u,d)=>{u.clientRect&&t!==d&&t.contains(d)&&qd(u.clientRect,a,c)}),i.top=s,i.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function KV(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function DT(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function tl(n,e){let t=e?"":"none";DT(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function VV(n,e,t){DT(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function my(n,e){return e&&e!="none"?n+" "+e:n}function UV(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Wd(e.left,e.top)}function Wd(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function BV(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function xY(n){let e=getComputedStyle(n),t=yT(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),s=yT(e,"transition-duration"),o=yT(e,"transition-delay");return BV(s[i])+BV(o[i])}function yT(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var RY=new Set(["position"]),bT=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,s,o,a,c,u,d){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=u,this._renderer=d}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),jV(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return xY(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let s=e.matchSize?this._initialDomRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=KV(o,this._document),this._previewEmbeddedView=o,e.matchSize?UV(i,s):i.style.transform=Wd(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=vT(this._rootElement),UV(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return DT(i.style,{"pointer-events":"none",margin:jV(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},RY),tl(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}};function jV(n){return"showPopover"in n}var kY={passive:!0},$V={passive:!1},PY={passive:!1,capture:!0},NY=800,HV="cdk-drag-placeholder",zV=new Set(["position"]),IT=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=zt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new _e;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=We.EMPTY;_pointerUpSubscription=We.EMPTY;_scrollSubscription=We.EMPTY;_resizeSubscription=We.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>tl(t,e)))}_disabled=!1;beforeStarted=new _e;started=new _e;released=new _e;ended=new _e;entered=new _e;exited=new _e;dropped=new _e;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,s,o,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new py(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Li(r)),this._handles.forEach(r=>tl(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=Li(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,$V),r.listen(t,"touchstart",this._pointerDown,kY),r.listen(t,"dragstart",this._nativeDragStart,$V)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Li(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&AY(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let s=this._activeTransform.x,o=this._activeTransform.y,a=s+r,c=o+i;this._rootElement.style.transform=Wd(a,c),this._activeTransform={x:a,y:c},this._passiveTransform={x:a,y:c}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),tl(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),tl(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),s=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+s>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),c=this._dropContainer;if(!a){this._endDragSequence(e);return}(!c||!c.isDragging()&&!c.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=r.x-i.x+this._passiveTransform.x,s.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){zd(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",MY,PY)}),r){let i=this._rootElement,s=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");s.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new bT(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,t)),VV(i,!1,zV),this._document.body.appendChild(s.replaceChild(o,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=zd(t),s=!i&&t.button!==0,o=this._rootElement,a=Hd(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+NY>Date.now(),u=i?DV(t):TV(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||s||c||u)return;if(this._handles.length){let m=o.style;this._rootElementTapHighlight=m.webkitTapHighlightColor||"",m.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(m=>this._updateOnScroll(m)),this._boundaryElement&&(this._boundaryRect=TT(this._boundaryElement));let d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){VV(this._rootElement,!0,zV),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{let o=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(o+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(s,this._dropContainer,a),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&Hd(a)===this._preview.element&&a.propertyName==="transform")&&(o(),r(),clearTimeout(s))},s=setTimeout(i,t*1.5),o=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=KV(this._placeholderRef,this._document)):r=vT(this._rootElement),r.style.pointerEvents="none",r.classList.add(HV),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=zd(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,u=o.pageY-s.top-a.top;return{x:s.left-e.left+c,y:s.top-e.top+u}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=zd(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:u}=this._getPreviewRect(),d=a.top+o,f=a.bottom-(u-o),m=a.left+s,g=a.right-(c-s);r=GV(r,m,g),i=GV(i,d,f)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,tl(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=Wd(e*r,t*r),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=my(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=Wd(e,t);this._preview.setTransform(my(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:zd(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=Hd(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&qd(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=hy(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Li(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,r){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let i=this._anchor??=vT(this._placeholder);i.classList.remove(HV),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):Li(t.element).appendChild(i)}}};function GV(n,e,t){return Math.max(e,Math.min(t,n))}function zd(n){return n.type[0]==="t"}function MY(n){n.preventDefault()}function YV(n,e,t){let r=qV(e,n.length-1),i=qV(t,n.length-1);if(r===i)return;let s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}function qV(n,e){return Math.max(0,Math.min(e,n))}var gy=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(P=>P.drag===e),u=s[o],d=s[c].clientRect,f=u.clientRect,m=c>o?1:-1,g=this._getItemOffsetPx(d,f,m),w=this._getSiblingOffsetPx(c,s,m),x=s.slice();return YV(s,c,o),s.forEach((P,U)=>{if(x[U]===P)return;let W=P.drag===e,Z=W?g:w,le=W?e.getPlaceholderElement():P.drag.getRootElement();P.offset+=Z;let qe=Math.round(P.offset*(1/P.drag.scale));a?(le.style.transform=my(`translate3d(${qe}px, 0, 0)`,P.initialTransform),qd(P.clientRect,0,Z)):(le.style.transform=my(`translate3d(0, ${qe}px, 0)`,P.initialTransform),qd(P.clientRect,Z,0))}),this._previousSwap.overlaps=ET(f,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:o}}enter(e,t,r,i){let s=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement(),u=o[s];if(u===e&&(u=o[s+1]),!u&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=o[0]),a>-1&&o.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){let d=u.getRootElement();d.parentElement.insertBefore(c,d),o.splice(s,0,e)}else this._element.appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{qd(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:TT(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=i?t.left-e.left:t.top-e.top;return r===-1&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=t[e].clientRect,o=t[e+r*-1],a=s[i?"width":"height"]*r;if(o){let c=i?"left":"top",u=i?"right":"bottom";r===-1?a-=o.clientRect[c]-s[u]:a+=s[c]-o.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}else{let o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(i){let u=s?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return s?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,e)?-1:o}},wT=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let s=this._getItemIndexFromPointerPosition(e,t,r),o=this._previousSwap;if(s===-1||this._activeItems[s]===e)return null;let a=this._activeItems[s];if(o.drag===a&&o.overlaps&&o.deltaX===i.x&&o.deltaY===i.y)return null;let c=this.getItemIndex(e),u=e.getPlaceholderElement(),d=a.getRootElement();s>c?d.after(u):d.before(u),YV(this._activeItems,c,s);let f=this._getRootNode().elementFromPoint(t,r);return o.deltaX=i.x,o.deltaY=i.y,o.drag=a,o.overlaps=d===f||d.contains(f),{previousIndex:c,currentIndex:s}}enter(e,t,r,i){let s=this._activeItems.indexOf(e);s>-1&&this._activeItems.splice(s,1);let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;o===-1&&(o=this._getClosestItemIndexToPointer(e,t,r));let a=this._activeItems[o];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(o,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,s]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==s&&(s===null?e.appendChild(i):s.parentNode===e&&e.insertBefore(i,s))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),s=i?this._activeItems.findIndex(o=>{let a=o.getRootElement();return i===a||a.contains(i)}):-1;return s===-1||!this._sortPredicate(s,e)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=hy(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){let a=this._activeItems[o];if(a!==e){let{x:c,y:u}=a.getRootElement().getBoundingClientRect(),d=Math.hypot(t-c,r-u);d<i&&(i=d,s=o)}}return s}},WV=.05,QV=.05,tr=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(tr||{}),mn=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(mn||{}),ST=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new _e;entered=new _e;exited=new _e;dropped=new _e;sorted=new _e;receivingStarted=new _e;receivingStopped=new _e;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=We.EMPTY;_verticalScrollDirection=tr.NONE;_horizontalScrollDirection=mn.NONE;_scrollNode;_stopScrollTimers=new _e;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s;let o=this.element=Li(e);this._document=r,this.withOrientation("vertical").withElementContainer(o),t.registerDropContainer(this),this._parentPositions=new py(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof gy&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new wT(this._document,this._dragDropRegistry);else{let t=new gy(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=Li(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!LV(this._domRect,WV,t,r))return;let s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=tr.NONE,s=mn.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||LV(o.clientRect,WV,e,t)&&([i,s]=OY(a,o.clientRect,this._direction,e,t),(i||s)&&(r=a))}),!i&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};i=JV(c,t),s=ZV(c,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Qi(0,Ph).pipe(Tr(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===tr.UP?e.scrollBy(0,-t):this._verticalScrollDirection===tr.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===mn.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===mn.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&ET(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!ET(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=hy(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function JV(n,e){let{top:t,bottom:r,height:i}=n,s=i*QV;return e>=t-s&&e<=t+s?tr.UP:e>=r-s&&e<=r+s?tr.DOWN:tr.NONE}function ZV(n,e){let{left:t,right:r,width:i}=n,s=i*QV;return e>=t-s&&e<=t+s?mn.LEFT:e>=r-s&&e<=r+s?mn.RIGHT:mn.NONE}function OY(n,e,t,r,i){let s=JV(e,i),o=ZV(e,r),a=tr.NONE,c=mn.NONE;if(s){let u=n.scrollTop;s===tr.UP?u>0&&(a=tr.UP):n.scrollHeight-u>n.clientHeight&&(a=tr.DOWN)}if(o){let u=n.scrollLeft;t==="rtl"?o===mn.RIGHT?u<0&&(c=mn.RIGHT):n.scrollWidth+u>n.clientWidth&&(c=mn.LEFT):o===mn.LEFT?u>0&&(c=mn.LEFT):n.scrollWidth-u>n.clientWidth&&(c=mn.RIGHT)}return[a,c]}var Gd={capture:!0},_T={passive:!1,capture:!0},FY=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=mt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),XV=(()=>{class n{_ngZone=M(Ne);_document=M(Qe);_styleLoader=M(xV);_renderer=M(En).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new _e;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=zt([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new _e;pointerUp=new _e;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,_T)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(FY),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),s=a=>this.pointerUp.next(a),o=[["scroll",a=>this._scroll.next(a),Gd],["selectstart",this._preventDefaultWhileDragging,_T]];i?o.push(["touchend",s,Gd],["touchcancel",s,Gd]):o.push(["mouseup",s,Gd]),i||o.push(["mousemove",a=>this.pointerMove.next(a),_T]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=o.map(([a,c,u])=>this._renderer.listen(this._document,a,c,u))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new me(i=>this._ngZone.runOutsideAngular(()=>{let s=this._renderer.listen(t,"scroll",o=>{this._activeDragInstances().length&&i.next(o)},Gd);return()=>{s()}}))),Jh(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LY={dragStartThreshold:5,pointerDirectionChangeThreshold:5},e2=(()=>{class n{_document=M(Qe);_ngZone=M(Ne);_viewportRuler=M(PV);_dragDropRegistry=M(XV);_renderer=M(En).createRenderer(null,null);constructor(){}createDrag(t,r=LY){return new IT(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new ST(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CT=new K("CDK_DRAG_PARENT");var VY=new K("CdkDragHandle");var UY=new K("CDK_DRAG_CONFIG"),BY=new K("CdkDropList"),t2=(()=>{class n{element=M(Gt);dropContainer=M(BY,{optional:!0,skipSelf:!0});_ngZone=M(Ne);_viewContainerRef=M(qn);_dir=M(kV,{optional:!0});_changeDetectorRef=M(kt);_selfHandle=M(VY,{optional:!0,self:!0});_parentDrag=M(CT,{optional:!0,skipSelf:!0});_dragDropRegistry=M(XV);_destroyed=new _e;_handles=new rt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new Ke;released=new Ke;ended=new Ke;entered=new Ke;exited=new Ke;dropped=new Ke;moved=new me(t=>{let r=this._dragRef.moved.pipe(Me(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=M(Ge);constructor(){let t=this.dropContainer,r=M(UY,{optional:!0}),i=M(e2);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(Tr(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){lo(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):Li(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:AV(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(xt(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:u,previewContainer:d}=t;this.disabled=c??!1,this.dragStartDelay=i||0,this.lockAxis=r||null,s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.pipe($t(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),_n(t=>Jh(...t.map(r=>r._stateChanges.pipe(Ea(r))))),Tr(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ot({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&Re("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",mo],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",bE]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[hs([{provide:CT,useExisting:n}]),Lr]})}return n})();var jY=new K("CdkDragPlaceholder"),n2=(()=>{class n{templateRef=M(dr);_drag=M(CT,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ot({type:n,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[hs([{provide:jY,useExisting:n}])]})}return n})();var r2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=it({providers:[e2],imports:[NV]})}return n})();var HY=["binRef"];function zY(n,e){if(n&1&&(y(0,"header",10)(1,"div",11)(2,"div",12),I(3,"P"),v(),y(4,"h1",13),I(5,"JEUB2 "),y(6,"span",14),I(7,"Prologue"),v()()(),y(8,"div",15)(9,"span",16),I(10),Ie(11,"number"),v()()()),n&2){let t=L();E(10),ne("",st(11,1,t.currentMoney,"1.0-0")," \u20AC")}}function GY(n,e){if(n&1&&ie(0,"div",17),n&2){let t=e.$implicit;Et("left",t.x,"px")("top",t.y,"px")("background-color",t.color)("opacity",t.life)("transform","scale("+t.life+")")}}function qY(n,e){if(n&1){let t=ve();y(0,"div",28)(1,"button",29),q("click",function(){Y(t);let i=L(2);return Q(i.startPark())}),I(2," Commencer \xE0 chercher... \u{1F5D1}\uFE0F "),v()()}}function WY(n,e){if(n&1&&(y(0,"div",18),ie(1,"div",19)(2,"div",20),y(3,"div",21)(4,"div",22),I(5,"\u{1F976}"),v()(),y(6,"div",23)(7,"div",24),I(8,"Moi (Gal\xE9rien)"),v(),y(9,"div",25),I(10),y(11,"span",26),I(12,"|"),v()(),$(13,qY,3,0,"div",27),v()()),n&2){let t=L();E(10),ue(t.displayedDialogue),E(3),N("ngIf",t.isTextFinished)}}function KY(n,e){n&1&&ie(0,"div")}function YY(n,e){if(n&1){let t=ve();y(0,"div",39),q("cdkDragStarted",function(){let i=Y(t).$implicit,s=L(2);return Q(s.onDragStart(i))})("cdkDragEnded",function(i){let s=Y(t).$implicit,o=L(2);return Q(o.onDragEnded(i,s))}),ie(1,"div",40),y(2,"div",41),I(3),v(),$(4,KY,1,0,"div",42),v()}if(n&2){let t=e.$implicit,r=L(2);Et("left",t.x,"%")("top",t.y,"%")("transform","rotate("+t.rotation+"deg) scale("+t.scale+")"),Re("floating-anim",!r.isDragging),E(3),ue(r.getIcon(t.type))}}function QY(n,e){if(n&1){let t=ve();y(0,"div",43)(1,"button",44),q("click",function(){Y(t);let i=L(2);return Q(i.goToShop())}),I(2,"Aller au Tabac \u27A1\uFE0F"),v()()}}function JY(n,e){if(n&1&&(y(0,"div",30),ie(1,"div",19)(2,"div",20),y(3,"div",31,0)(5,"div",32)(6,"div",33)(7,"span",34),I(8,"\u{1F5D1}\uFE0F"),v()()(),y(9,"span",35),I(10,"Jette ici !"),v()(),y(11,"div",36),$(12,YY,5,9,"div",37),v(),$(13,QY,3,0,"div",38),v()),n&2){let t=L();E(3),Re("bin-active",t.isHoveringBin)("bin-eating",t.isEating),E(9),N("ngForOf",t.trashItems)("ngForTrackBy",t.trackByItemId),E(),N("ngIf",t.currentMoney>=100)}}function ZY(n,e){if(n&1){let t=ve();y(0,"div",28)(1,"button",29),q("click",function(){Y(t);let i=L(2);return Q(i.buyTicket())}),y(2,"span",48),I(3,"\u{1F3AB}"),v(),I(4," Acheter un ticket (100\u20AC) "),v()()}}function XY(n,e){if(n&1&&(y(0,"div",45)(1,"div",46)(2,"div",47),I(3,"LE BALTO"),v()(),y(4,"div",21)(5,"div",22),I(6,"\u{1F9D4}\u{1F3FB}\u200D\u2642\uFE0F"),v()(),y(7,"div",23)(8,"div",24),I(9,"G\xE9rard (Patron)"),v(),y(10,"div",25),I(11),y(12,"span",26),I(13,"|"),v()(),$(14,ZY,5,0,"div",27),v()()),n&2){let t=L();E(11),ue(t.displayedDialogue),E(3),N("ngIf",t.isTextFinished)}}function eQ(n,e){n&1&&(y(0,"span",65),I(1,"$"),v())}function tQ(n,e){if(n&1){let t=ve();y(0,"div",63),q("mouseenter",function(){let i=Y(t).$implicit,s=L(2);return Q(s.scratch(i))}),$(1,eQ,2,0,"span",64),v()}if(n&2){let t=e.$implicit,r=L(2);Re("scratched",r.scratched[t]),E(),N("ngIf",!r.scratched[t])}}function nQ(n,e){if(n&1){let t=ve();y(0,"button",66),q("click",function(){Y(t);let i=L(2);return Q(i.goToOutro())}),I(1," ENCAISSER LE GAIN \u{1F4B8} "),v()}}function rQ(n,e){if(n&1&&(y(0,"div",49)(1,"div",50)(2,"div",51)(3,"div",52),I(4,"\u{1F48E} DIAMOND CASH \u{1F48E}"),v(),y(5,"div",53),I(6,"Grattez pour gagner"),v()(),y(7,"div",54)(8,"div",55)(9,"div",56)(10,"div",57),I(11,"10 000 \u20AC"),v(),y(12,"div",58),I(13,"\u{1F389} JACKPOT \u{1F389}"),v()(),y(14,"div",59),$(15,tQ,2,3,"div",60),v()()(),y(16,"div",61),$(17,nQ,2,0,"button",62),v()()()),n&2){let t=L();E(15),N("ngForOf",t.scratchGrid),E(2),N("ngIf",t.isRevealed)}}function iQ(n,e){if(n&1){let t=ve();y(0,"div",28)(1,"button",70),q("click",function(){Y(t);let i=L(2);return Q(i.finishIntro())}),I(2," \u{1F354} ACHETER LE FOODTRUCK "),v()()}}function sQ(n,e){if(n&1&&(y(0,"div",67)(1,"div",21)(2,"div",22),I(3,"\u{1F911}"),v()(),y(4,"div",68)(5,"div",24),I(6,"Moi (Nouveau Riche)"),v(),y(7,"div",69),I(8),y(9,"span",26),I(10,"|"),v()(),$(11,iQ,3,0,"div",27),v()()),n&2){let t=L();E(8),ue(t.displayedDialogue),E(3),N("ngIf",t.isTextFinished)}}var yy=class n{constructor(e,t,r){this.gameState=e;this.sound=t;this.cdr=r}binRef;phase="INTRO_DIALOGUE";currentMoney=0;particles=[];trashItems=[];isHoveringBin=!1;isEating=!1;isDragging=!1;currentDialogueText="";displayedDialogue="";isTextFinished=!1;typeWriterInterval;introText="Il pleut encore... J'en ai marre de cette vie de gal\xE8re. J'ai froid, j'ai faim. Si seulement je pouvais trouver 100 balles pour tenter ma chance au loto...";shopText="Alors mon petit... Une sale journ\xE9e hein ? T'es tout tremp\xE9. T'as enfin r\xE9uni les 100 balles ? Allez, prends ce ticket, c'est ta chance.";outroText="C'est... C'est pas possible... 10.000 EUROS ?! J'AI GAGN\xC9 ! Adieu la rue ! Je sais ce que je vais faire... Je vais racheter ce vieux Foodtruck abandonn\xE9 au coin de la rue. C'est le d\xE9but de mon empire !";scratchGrid=Array.from({length:60},(e,t)=>t);scratched=new Array(60).fill(!1);isRevealed=!1;ngOnInit(){this.sound.startRainAmbience(),this.startDialogue(this.introText)}ngOnDestroy(){this.sound.stopRainAmbience(),this.typeWriterInterval&&clearInterval(this.typeWriterInterval)}startDialogue(e){this.currentDialogueText=e,this.displayedDialogue="",this.isTextFinished=!1;let t=0;this.typeWriterInterval&&clearInterval(this.typeWriterInterval),this.typeWriterInterval=setInterval(()=>{t<this.currentDialogueText.length?(this.displayedDialogue+=this.currentDialogueText.charAt(t),t%3===0&&this.sound.playKeystroke(),t++,this.cdr.detectChanges()):(clearInterval(this.typeWriterInterval),this.isTextFinished=!0,this.cdr.detectChanges())},30)}startPark(){this.phase="PARK",this.spawnTrashWave()}goToShop(){this.phase="SHOP",this.sound.stopRainAmbience(),setTimeout(()=>this.startDialogue(this.shopText),800)}buyTicket(){this.currentMoney=0,this.phase="SCRATCH",this.sound.playPop()}goToOutro(){this.phase="OUTRO_DIALOGUE",this.sound.playSuccess(),setTimeout(()=>this.startDialogue(this.outroText),800)}finishIntro(){this.gameState.completeIntro()}trackByItemId(e,t){return t.id}spawnTrashWave(){this.trashItems=[];for(let e=0;e<40;e++)this.trashItems.push({id:Math.random(),x:Math.random()*80+10,y:Math.random()*70+10,type:Math.random()>.6?"can":Math.random()>.3?"paper":"leaf",rotation:Math.random()*360,scale:1,delay:Math.random()*2})}onDragStart(e){this.isDragging=!0,e.type==="can"?this.sound.playCanSound():e.type==="paper"?this.sound.playPaperSound():this.sound.playLeafSound()}onDragEnded(e,t){this.isDragging=!1,this.isHoveringBin=!1;let r=e.dropPoint,i=this.binRef.nativeElement.getBoundingClientRect();r.x>=i.left-50&&r.x<=i.right+50&&r.y>=i.top-50&&r.y<=i.bottom+50?this.cleanTrash(t):e.source.reset()}cleanTrash(e){this.trashItems=this.trashItems.filter(r=>r.id!==e.id),this.sound.playTrashInBin(),this.isEating=!0,setTimeout(()=>this.isEating=!1,200);let t=this.binRef.nativeElement.getBoundingClientRect();this.spawnParticles(t.left+t.width/2,t.top+t.height/2,"#22c55e"),this.currentMoney+=10,this.trashItems.length===0&&this.currentMoney<100&&setTimeout(()=>this.spawnTrashWave(),500)}getIcon(e){return e==="can"?"\u{1F96B}":e==="paper"?"\u{1F961}":"\u{1F342}"}scratch(e){this.scratched[e]||(this.scratched[e]=!0,Math.random()>.5&&this.sound.playScratchSound(),this.scratched.filter(t=>t).length>36&&!this.isRevealed&&(this.isRevealed=!0,this.sound.playSuccess(),this.spawnConfetti()))}spawnParticles(e,t,r){for(let i=0;i<8;i++)this.particles.push({id:Math.random(),x:e,y:t,color:r,speedX:(Math.random()-.5)*15,speedY:(Math.random()-1)*15,life:1});this.animateParticles()}spawnConfetti(){for(let e=0;e<50;e++)this.particles.push({id:Math.random(),x:window.innerWidth/2,y:window.innerHeight/2,color:["#f00","#0f0","#00f","#ff0"][Math.floor(Math.random()*4)],speedX:(Math.random()-.5)*25,speedY:(Math.random()-.5)*25,life:1});this.animateParticles()}animateParticles(){this.particles.length!==0&&(this.particles.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,e.life-=.03}),this.particles=this.particles.filter(e=>e.life>0),this.particles.length>0&&requestAnimationFrame(()=>this.animateParticles()))}static \u0275fac=function(t){return new(t||n)(se(tn),se(Tn),se(kt))};static \u0275cmp=mt({type:n,selectors:[["app-intro-game"]],viewQuery:function(t,r){if(t&1&&Ga(HY,5),t&2){let i;uo(i=ho())&&(r.binRef=i.first)}},standalone:!1,decls:9,vars:7,consts:[["binRef",""],[1,"intro-container"],["class","intro-header",4,"ngIf"],[1,"fx-layer"],["class","particle",3,"left","top","background-color","opacity","transform",4,"ngFor","ngForOf"],["class","scene dialogue-scene fadeIn",4,"ngIf"],["class","scene park-scene fadeIn",4,"ngIf"],["class","scene shop-scene fadeIn",4,"ngIf"],["class","scene scratch-scene fadeIn",4,"ngIf"],["class","scene dialogue-scene fadeIn outro-bg",4,"ngIf"],[1,"intro-header"],[1,"flex","items-center","gap-3"],[1,"logo-box"],[1,"text-xl","font-bold","tracking-tight","text-white"],[1,"text-xs","font-normal","text-slate-400","ml-2"],[1,"money-badge"],[1,"text-green-400","font-bold","text-xl","mr-2"],[1,"particle"],[1,"scene","dialogue-scene","fadeIn"],[1,"rain-layer","layer-1"],[1,"rain-layer","layer-2"],[1,"character-container","slide-up"],[1,"character-emoji"],[1,"dialogue-box-container"],[1,"speaker-name"],[1,"dialogue-text"],[1,"cursor"],["class","dialogue-actions",4,"ngIf"],[1,"dialogue-actions"],[1,"action-btn",3,"click"],[1,"scene","park-scene","fadeIn"],[1,"bin-container"],[1,"bin-body"],[1,"bin-base"],[1,"bin-emoji"],[1,"bin-label"],[1,"trash-zone"],["class","trash-item","cdkDrag","",3,"floating-anim","left","top","transform","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["class","next-step-container",4,"ngIf"],["cdkDrag","",1,"trash-item",3,"cdkDragStarted","cdkDragEnded"],[1,"trash-shadow"],[1,"trash-content"],[4,"cdkDragPlaceholder"],[1,"next-step-container"],[1,"next-btn","pulse-glow",3,"click"],[1,"scene","shop-scene","fadeIn"],[1,"shop-bg"],[1,"neon-sign"],[1,"icon"],[1,"scene","scratch-scene","fadeIn"],[1,"ticket","zoom-in"],[1,"ticket-top"],[1,"ticket-logo"],[1,"ticket-sub"],[1,"scratch-zone-border"],[1,"scratch-zone"],[1,"winner-content"],[1,"win-amount"],[1,"win-emoji"],[1,"scratch-cover"],["class","scratch-pixel",3,"scratched","mouseenter",4,"ngFor","ngForOf"],[1,"ticket-footer"],["class","claim-btn pulse",3,"click",4,"ngIf"],[1,"scratch-pixel",3,"mouseenter"],["class","pattern",4,"ngIf"],[1,"pattern"],[1,"claim-btn","pulse",3,"click"],[1,"scene","dialogue-scene","fadeIn","outro-bg"],[1,"dialogue-box-container","light-theme"],[1,"dialogue-text","text-black"],[1,"action-btn","gold-btn",3,"click"]],template:function(t,r){t&1&&(y(0,"div",1),$(1,zY,12,4,"header",2),y(2,"div",3),$(3,GY,1,10,"div",4),v(),$(4,WY,14,2,"div",5)(5,JY,14,7,"div",6)(6,XY,15,2,"div",7)(7,rQ,18,2,"div",8)(8,sQ,12,2,"div",9),v()),t&2&&(E(),N("ngIf",r.phase==="PARK"||r.phase==="SCRATCH"),E(2),N("ngForOf",r.particles),E(),N("ngIf",r.phase==="INTRO_DIALOGUE"),E(),N("ngIf",r.phase==="PARK"),E(),N("ngIf",r.phase==="SHOP"),E(),N("ngIf",r.phase==="SCRATCH"),E(),N("ngIf",r.phase==="OUTRO_DIALOGUE"))},dependencies:[Kn,kn,t2,n2,fr],styles:[`.intro-container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;background:#0f172a;display:flex;flex-direction:column;font-family:Segoe UI,sans-serif;-webkit-user-select:none;user-select:none;position:absolute;top:0;left:0}.intro-header[_ngcontent-%COMP%]{background:#0f172ae6;border-bottom:1px solid #1e293b;height:64px;display:flex;justify-content:space-between;align-items:center;padding:0 24px;z-index:50}.logo-box[_ngcontent-%COMP%]{width:32px;height:32px;background:#2563eb;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}.money-badge[_ngcontent-%COMP%]{background:#020617;padding:8px 20px;border-radius:99px;border:1px solid rgba(22,163,74,.3)}.scene[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;height:100%;overflow:hidden}.dialogue-scene[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;background:#0f172a}.character-container[_ngcontent-%COMP%]{position:relative;z-index:10;margin-bottom:-10px}.character-emoji[_ngcontent-%COMP%]{font-size:12rem;filter:drop-shadow(0 0 30px rgba(0,0,0,.5))}.dialogue-box-container[_ngcontent-%COMP%]{width:90%;max-width:800px;margin-bottom:40px;z-index:20;background:#0f172af2;border:2px solid #475569;border-radius:8px;padding:24px;box-shadow:0 20px 50px #0009;position:relative;min-height:160px;display:flex;flex-direction:column}.outro-bg[_ngcontent-%COMP%]{background:radial-gradient(circle at center,#fef3c7,#fff7ed)}.light-theme[_ngcontent-%COMP%]{background:#fffffff2;border-color:#fbbf24;box-shadow:0 20px 50px #d9770633}.light-theme[_ngcontent-%COMP%]   .dialogue-text[_ngcontent-%COMP%]{color:#1e293b;font-weight:700}.speaker-name[_ngcontent-%COMP%]{position:absolute;top:-16px;left:24px;background:#d97706;color:#fff;padding:4px 16px;font-weight:700;font-size:.9rem;border-radius:4px;text-transform:uppercase}.dialogue-text[_ngcontent-%COMP%]{font-family:monospace;font-size:1.2rem;color:#e2e8f0;line-height:1.6;margin-top:10px;flex:1}.cursor[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite;color:#d97706;font-weight:700}.dialogue-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;animation:_ngcontent-%COMP%_fadeIn .5s}.action-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#16a34a,#15803d);color:#fff;border:1px solid #4ade80;padding:12px 24px;border-radius:6px;font-weight:700;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;gap:10px}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #22c55e66}.gold-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#f59e0b,#d97706);border-color:#fbbf24;color:#78350f}.park-scene[_ngcontent-%COMP%]{background:radial-gradient(circle at 50% 20%,#334155,#1e293b,#020617)}.rain-layer[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="40"><line x1="0" y1="0" x2="2" y2="10" stroke="rgba(148, 163, 184, 0.3)" stroke-width="1"/></svg>');z-index:5}.layer-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rain .8s linear infinite;opacity:.6;background-size:20px 40px}.layer-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rain 1.5s linear infinite;opacity:.3;background-size:40px 80px;transform:scale(1.5)}@keyframes _ngcontent-%COMP%_rain{0%{background-position:0 0}to{background-position:20px 100vh}}.trash-zone[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:30}.trash-item[_ngcontent-%COMP%]{position:absolute;width:60px;height:60px;display:flex;align-items:center;justify-content:center;cursor:grab;touch-action:none;transition:transform .1s}.trash-content[_ngcontent-%COMP%]{font-size:3.5rem;filter:drop-shadow(0 4px 6px rgba(0,0,0,.4));position:relative;z-index:2}.trash-shadow[_ngcontent-%COMP%]{position:absolute;bottom:5px;left:15%;width:70%;height:10px;background:#000;opacity:.3;filter:blur(4px);border-radius:50%;z-index:1;transition:all .2s}.trash-item[_ngcontent-%COMP%]:active   .trash-shadow[_ngcontent-%COMP%]{transform:scale(.5);opacity:.1;bottom:-20px}.floating-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.bin-container[_ngcontent-%COMP%]{position:absolute;bottom:40px;right:40px;width:140px;height:160px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;z-index:25;transition:transform .2s}.bin-body[_ngcontent-%COMP%]{font-size:6rem;filter:drop-shadow(0 10px 20px rgba(0,0,0,.5))}.bin-active[_ngcontent-%COMP%]{transform:scale(1.1)}.bin-eating[_ngcontent-%COMP%]   .bin-body[_ngcontent-%COMP%]{transform:scaleY(.8) scaleX(1.2)}.bin-label[_ngcontent-%COMP%]{font-weight:700;color:#cbd5e1;background:#0009;padding:4px 12px;border-radius:12px}.next-step-container[_ngcontent-%COMP%]{position:absolute;bottom:100px;width:100%;display:flex;justify-content:center;z-index:200}.next-btn[_ngcontent-%COMP%]{padding:15px 40px;background:linear-gradient(45deg,#f59e0b,#d97706);color:#fff;font-weight:900;font-size:1.3rem;border:none;border-radius:50px;cursor:pointer;box-shadow:0 10px 20px #d9770666;text-transform:uppercase}.pulse-glow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseGlow 2s infinite}@keyframes _ngcontent-%COMP%_pulseGlow{0%{box-shadow:0 0 #f59e0bb3}70%{box-shadow:0 0 0 20px #f59e0b00}to{box-shadow:0 0 #f59e0b00}}.shop-scene[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#2a0a0a,#1a0505);display:flex;flex-direction:column;align-items:center;justify-content:flex-end}.shop-bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.neon-sign[_ngcontent-%COMP%]{position:absolute;top:15%;left:50%;transform:translate(-50%);font-family:monospace;font-weight:900;font-size:4rem;color:#ff4d4d;text-shadow:0 0 20px #ff0000;border:4px solid #ff4d4d;padding:10px 30px;border-radius:20px;box-shadow:0 0 30px #f006;animation:_ngcontent-%COMP%_flicker 3s infinite}@keyframes _ngcontent-%COMP%_flicker{0%,to{opacity:1}50%{opacity:.8}52%{opacity:.2}54%{opacity:.8}}.scratch-scene[_ngcontent-%COMP%]{background:#0f172a;display:flex;justify-content:center;align-items:center}.ticket[_ngcontent-%COMP%]{width:360px;background:#f8fafc;border-radius:12px;overflow:hidden;box-shadow:0 25px 50px -12px #00000080;border:1px solid #94a3b8}.ticket-top[_ngcontent-%COMP%]{background:#1e1b4b;padding:20px;text-align:center;border-bottom:4px solid #fbbf24}.ticket-logo[_ngcontent-%COMP%]{font-family:Impact,sans-serif;font-size:2rem;color:#fbbf24;letter-spacing:1px}.ticket-sub[_ngcontent-%COMP%]{color:#94a3b8;font-size:.8rem;text-transform:uppercase;margin-top:5px}.scratch-zone-border[_ngcontent-%COMP%]{padding:20px;background:#e2e8f0}.scratch-zone[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;border:2px dashed #94a3b8;background:#fff;border-radius:8px;overflow:hidden}.winner-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(circle,#fef3c7,#fffbeb)}.win-amount[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:900;color:#16a34a}.win-emoji[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:10px;animation:pulse 1s infinite}.scratch-cover[_ngcontent-%COMP%]{position:absolute;inset:0;display:grid;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(6,1fr)}.scratch-pixel[_ngcontent-%COMP%]{background:#94a3b8;border:1px solid #64748b;display:flex;justify-content:center;align-items:center;cursor:crosshair}.scratch-pixel[_ngcontent-%COMP%]:nth-child(odd){background:#cbd5e1}.scratch-pixel.scratched[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.ticket-footer[_ngcontent-%COMP%]{padding:15px;text-align:center;background:#f1f5f9}.claim-btn[_ngcontent-%COMP%]{width:100%;background:#16a34a;color:#fff;font-weight:700;padding:12px;border:none;border-radius:6px;font-size:1.2rem;cursor:pointer}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .8s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.fadeIn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:0}}.particle[_ngcontent-%COMP%]{position:absolute;width:8px;height:8px;border-radius:50%;pointer-events:none;z-index:200}`]})};var aQ=["*"];function cQ(n,e){n&1&&(y(0,"div",43),I(1,"\u{1F525} RUSH (20h-02h) -1s \u{1F525}"),v())}function lQ(n,e){n&1&&(y(0,"div",44),I(1,"\u{1F451} Client VIP \u{1F451}"),v())}function uQ(n,e){n&1&&(y(0,"div",45),I(1,"Service Midi"),v())}function dQ(n,e){if(n&1&&(y(0,"span",46),I(1),v()),n&2){let t=L();E(),ne("\u{1F468}\u200D\u{1F373} ",t.cookCount," Auto")}}function hQ(n,e){if(n&1&&(y(0,"span",47),I(1),v()),n&2){let t=L();E(),ne("\u26A1 +",t.serverBonus,"% Vit.")}}function fQ(n,e){if(n&1&&(y(0,"div",48),I(1),v()),n&2){let t=e.$implicit,r=e.index,i=L();Et("animation-delay",r*50+"ms"),E(),ne(" ",i.getIcon(t)," ")}}function pQ(n,e){n&1&&(y(0,"div",49)(1,"span"),I(2,"\u2705 PR\xCAT"),v(),y(3,"span",50),I(4,"Envoie !"),v()())}function mQ(n,e){if(n&1&&ie(0,"div",51),n&2){let t=e.$implicit;Et("left",t.x,"px")("top",t.y,"px")("background-color",t.color)("transform","rotate("+t.rotation+"deg)")}}function gQ(n,e){if(n&1&&(y(0,"div",52),I(1),v()),n&2){let t=e.$implicit,r=e.index,i=L();Et("z-index",r),E(),ne(" ",i.getIcon(t)," ")}}function yQ(n,e){if(n&1&&(y(0,"div",53),I(1),v()),n&2){let t=e.$implicit;Et("left",t.x,"px")("top",t.y,"px"),N("ngClass",t.type),E(),ne(" ",t.text," ")}}function _Q(n,e){if(n&1&&(y(0,"div",60),I(1),v()),n&2){let t=L().index;E(),ne(" ",t+1," ")}}function vQ(n,e){if(n&1){let t=ve();y(0,"button",54),q("click",function(i){let s=Y(t).$implicit,o=L();return Q(o.addIngredient(s,i))}),$(1,_Q,2,1,"div",55),y(2,"span",56),I(3),v(),y(4,"span",57),I(5),v(),y(6,"div",58),ie(7,"div",59),v()()}if(n&2){let t=e.$implicit,r=L();E(),N("ngIf",r.upgrades.hasKeyboard),E(2),ue(r.getIcon(t)),E(2),ue(r.getShortName(t)),E(2),Et("width",r.mastery[t].xp/r.mastery[t].xpMax*100,"%")}}function EQ(n,e){n&1&&(y(0,"span",61),I(1,"ESPACE"),v())}var _y=class n{constructor(e,t,r){this.gameState=e;this.cdr=t;this.soundService=r;this.allIngredientsList.forEach(i=>this.mastery[i]={level:1,xp:0,xpMax:5})}CONFIG={TIME:{startSeconds:10,lessPerLevel:1,minSeconds:2},ECONOMY:{baseReward:35,percentPerLevel:20,ingredientLevelBonus:10},VIP:{chance:.1,rewardMult:5,timeDivisor:2},PROGRESSION:{unlockCheeseLevel:3,unlockSaladLevel:6,unlockTomatoLevel:9},FX:{confettiEvery:5,feverThreshold:5,confettiColors:["#ef4444","#3b82f6","#22c55e","#eab308","#a855f7","#ffffff"]},AUTO:{cookSpeedBase:5e3,serverSlowPct:10},UNLOCK_COSTS:{CHEESE:1e3,ONION:500,SALAD:2e3,BACON:3500,PICKLE:0,TOMATO:0,SAUCE:0}};currentMoney=0;isVip=!1;triggerShake=!1;comboMultiplier=1;currentOrder=[];currentStack=[];allIngredientsList=Object.values(jd);currentAvailableIngredients=[];mastery={};upgrades={grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:[],maxServiceReached:1,hasKeyboard:!1};cookCount=0;serverCount=0;serverBonus=0;autoCookInterval;displayTimeLeft=0;totalTimeForLevel=0;isRunning=!1;rafId;endTime=0;floatingTexts=[];particles=[];counter=0;timeOfDay=6;currentDay=1;get isFeverMode(){return this.timeOfDay>=20||this.timeOfDay<2}get remainingOrder(){return this.currentOrder.slice(this.currentStack.length)}handleKeyboardEvent(e){if(!this.upgrades.hasKeyboard)return;let t=e.key,r=parseInt(t);!isNaN(r)&&r>0&&r<=this.currentAvailableIngredients.length&&this.addIngredient(this.currentAvailableIngredients[r-1]),(t===" "||t==="Enter")&&(e.preventDefault(),this.validateBurger())}ngOnInit(){this.gameState.gameState$.subscribe(e=>{this.currentMoney=e.money,this.timeOfDay=e.timeOfDay,this.currentDay=e.day,e.foodtruckMastery&&(this.mastery=JSON.parse(JSON.stringify(e.foodtruckMastery))),e.foodtruckUpgrades&&(this.upgrades=F({},e.foodtruckUpgrades));let t=e.companies.find(r=>r.type==="FOODTRUCK");if(t){let r=this.gameState.getTotalEmployeePower(t.type,"COOK"),i=this.gameState.getTotalEmployeePower(t.type,"SERVER");this.cookCount=Math.floor(r),this.serverBonus=Math.min(75,i)}this.cdr.markForCheck()}),this.resetGame(1)}ngOnDestroy(){this.stopChrono(),this.stopAutoCook()}startAutoCook(){if(this.stopAutoCook(),this.cookCount>0){let e=Math.max(500,this.CONFIG.AUTO.cookSpeedBase/this.cookCount);this.autoCookInterval=setInterval(()=>{this.isRunning&&(this.performAutoAction(),this.cdr.markForCheck())},e)}}stopAutoCook(){this.autoCookInterval&&clearInterval(this.autoCookInterval)}performAutoAction(){this.currentStack.length<this.currentOrder.length?this.addIngredient(this.currentOrder[this.currentStack.length],void 0,!0):this.validateBurger()}addIngredient(e,t,r=!1){this.isRunning||(this.startChrono(),this.startAutoCook()),r||(["STEAK","BACON"].includes(e)?this.soundService.playSteakSound():["SALAD","ONION"].includes(e)?this.soundService.playSaladSound():this.soundService.playSoftPop()),this.currentStack.push(e),r&&this.spawnText("\u{1F916}",100+Math.random()*150,200,"auto");let i=this.currentStack.length-1;this.currentOrder[i]!==e&&(this.spawnText("RAT\xC9 !",t?.clientX||200,t?.clientY||200,"error"),this.failLevel()),this.cdr.markForCheck()}validateBurger(e){if(this.currentStack.length!==this.currentOrder.length){this.failLevel();return}this.stopChrono(),this.stopAutoCook(),this.soundService.playSuccess(),this.gameState.incrementCustomersServed(),this.gainXpForIngredients(e);let t=this.getCurrentReward();this.gameState.addMoney(t),this.spawnText(`+${Math.floor(t)}\u20AC`,200,150,this.isVip?"vip":"success"),this.gameState.updateMaxServiceReached(this.comboMultiplier),this.comboMultiplier>=6&&this.gameState.unlockIngredientByService("PICKLE"),this.comboMultiplier>=10&&this.gameState.unlockIngredientByService("TOMATO"),this.comboMultiplier>=15&&this.gameState.unlockIngredientByService("SAUCE"),(this.isVip||this.comboMultiplier%this.CONFIG.FX.confettiEvery===0)&&this.spawnConfetti(),this.resetGame(this.comboMultiplier+1)}failLevel(){this.stopChrono(),this.stopAutoCook(),this.soundService.playError(),this.triggerShake=!0,setTimeout(()=>{this.triggerShake=!1,this.cdr.markForCheck()},400),this.resetGame(1)}resetGame(e,t=!1){this.comboMultiplier=e,this.currentStack=[],this.isRunning=!1,t?this.isVip=!0:this.isVip=Math.random()<this.CONFIG.VIP.chance+this.upgrades.marketingLevel*.02;let r=this.CONFIG.TIME.startSeconds-(this.comboMultiplier-1)*this.CONFIG.TIME.lessPerLevel;r+=this.upgrades.grillLevel*.5,this.isFeverMode&&!this.isVip&&(r-=1),r<this.CONFIG.TIME.minSeconds&&(r=this.CONFIG.TIME.minSeconds),this.serverBonus>0&&(r=r*(1+this.serverBonus/100)),this.isVip&&(r=r/this.CONFIG.VIP.timeDivisor),this.totalTimeForLevel=r*1e3,this.displayTimeLeft=this.totalTimeForLevel,this.generateSmartOrder(),this.cdr.detectChanges()}generateSmartOrder(){let e=["STEAK"];(this.isUnlocked("CHEESE")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockCheeseLevel)&&e.push("CHEESE"),(this.isUnlocked("SALAD")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockSaladLevel)&&e.push("SALAD"),(this.isUnlocked("TOMATO")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockTomatoLevel)&&e.push("TOMATO"),this.allIngredientsList.forEach(i=>{this.isUnlocked(i)&&!e.includes(i)&&i!=="BUN"&&e.push(i)}),this.currentAvailableIngredients=["BUN",...e];let t=Math.min(6,1+Math.floor(this.comboMultiplier/3)),r=[];for(let i=0;i<t;i++)r.push(e[Math.floor(Math.random()*e.length)]);this.currentOrder=["BUN",...r,"BUN"]}getCurrentReward(){let e=1+this.CONFIG.ECONOMY.percentPerLevel/100,t=this.CONFIG.ECONOMY.baseReward*Math.pow(e,this.comboMultiplier-1);t+=this.upgrades.serviceLevel*5;let r=0;this.currentOrder.forEach(o=>{this.mastery[o]&&(r+=this.mastery[o].level)});let s=1+((this.currentOrder.length>0?r/this.currentOrder.length:1)-1)*(this.CONFIG.ECONOMY.ingredientLevelBonus/100);return t=t*s,this.isVip&&(t=t*this.CONFIG.VIP.rewardMult),t}gainXpForIngredients(e){[...new Set(this.currentStack)].forEach(r=>{this.mastery[r]||(this.mastery[r]={level:1,xp:0,xpMax:5});let i=this.mastery[r];i.xp++,i.xp>=i.xpMax&&(i.level++,i.xp=0,i.xpMax=Math.floor(i.xpMax*1.5),e&&this.spawnText(`${this.getIcon(r)} UP!`,e.clientX,e.clientY-50,"levelup"))}),this.gameState.updateIngredientMastery(this.mastery)}startChrono(){this.isRunning=!0,this.endTime=Date.now()+this.totalTimeForLevel;let e=()=>{if(!this.isRunning)return;let t=this.endTime-Date.now();t<=0?(this.displayTimeLeft=0,this.spawnText("TEMPS \xC9COUL\xC9 !",200,200,"error"),this.failLevel(),this.cdr.detectChanges()):(this.displayTimeLeft=t,this.cdr.detectChanges(),this.rafId=requestAnimationFrame(e))};this.rafId=requestAnimationFrame(e)}stopChrono(){this.isRunning=!1,this.rafId&&cancelAnimationFrame(this.rafId)}getBarPercentage(){return this.displayTimeLeft/this.totalTimeForLevel*100}isTimeRunningOut(){return this.getBarPercentage()<30}getActionBtnClass(){return this.isFeverMode&&!this.isVip?"bg-red-600 hover:bg-red-500 border-red-800 text-white shadow-[0_4px_20px_rgba(239,68,68,0.4)] animate-pulse":this.isVip?"bg-gradient-to-r from-amber-600 to-amber-500 border-amber-700 text-amber-50 shadow-[0_4px_20px_rgba(245,158,11,0.4)]":"bg-blue-600 hover:bg-blue-500 border-blue-700 text-white"}getButtonLabel(){return this.isFeverMode&&!this.isVip?"\u{1F525} FEVER !":this.isVip?"\u{1F451} SERVIR LE ROI DU BURGER":"\u{1F6CE}\uFE0F ENVOYER"}formatGameTime(e){let t=Math.floor(e),r=Math.floor((e-t)*60);return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}spawnConfetti(){for(let e=0;e<30;e++)this.particles.push({id:this.counter++,x:Math.random()*300+50,y:200,color:this.CONFIG.FX.confettiColors[Math.floor(Math.random()*this.CONFIG.FX.confettiColors.length)],rotation:Math.random()*360,speedX:(Math.random()-.5)*10,speedY:(Math.random()-1)*15-5});this.animateParticles()}animateParticles(){this.particles.length!==0&&(this.particles.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,e.speedY+=.5,e.rotation+=5}),this.particles=this.particles.filter(e=>e.y<600),this.particles.length>0&&requestAnimationFrame(()=>{this.animateParticles(),this.cdr.detectChanges()}))}spawnText(e,t,r,i){let s=this.counter++;this.floatingTexts.push({id:s,text:e,x:t||200,y:r||100,type:i}),setTimeout(()=>{this.floatingTexts=this.floatingTexts.filter(o=>o.id!==s),this.cdr.detectChanges()},1e3)}isUnlocked(e){return this.upgrades.unlockedIngredients.includes(e)}getShortName(e){return{BUN:"Pain",STEAK:"Viande",CHEESE:"Fromage",SALAD:"Salade",TOMATO:"Tomate",SAUCE:"Sauce",ONION:"Oignon",PICKLE:"Cornich.",BACON:"Bacon"}[e]||e}getIcon(e){return{BUN:"\u{1F35E}",STEAK:"\u{1F969}",CHEESE:"\u{1F9C0}",SALAD:"\u{1F96C}",TOMATO:"\u{1F345}",SAUCE:"\u{1F963}",ONION:"\u{1F9C5}",PICKLE:"\u{1F952}",BACON:"\u{1F953}"}[e]||"\u2753"}static \u0275fac=function(t){return new(t||n)(se(tn),se(kt),se(Tn))};static \u0275cmp=mt({type:n,selectors:[["app-foodtruck-game"]],hostBindings:function(t,r){t&1&&q("keydown",function(s){return r.handleKeyboardEvent(s)},eu)},standalone:!1,ngContentSelectors:aQ,decls:60,vars:43,consts:[[1,"h-full","bg-slate-900","p-6","flex","flex-col","gap-6","font-sans","select-none","overflow-hidden","relative","transition-colors","duration-500"],[1,"grid","grid-cols-12","gap-6","h-24","shrink-0","z-10"],[1,"col-span-3","card-panel","flex","flex-col","justify-center","px-6","relative","overflow-hidden","group"],[1,"text-slate-500","text-[10px]","font-bold","uppercase","tracking-widest","mb-1","label-text"],[1,"text-2xl","font-black","text-white","tracking-tight","value-text","group-hover:scale-105","transition-transform","origin-left"],[1,"absolute","right-2","bottom-[-10px]","text-6xl","opacity-10","rotate-12","emoji-bg"],[1,"col-span-6","card-panel","flex","items-center","justify-between","px-2","relative"],[1,"flex","flex-col","items-center","justify-center","w-24","h-full","border-r","border-white/10"],[1,"text-3xl","font-black","text-white","value-text"],[1,"text-[9px]","text-slate-500","uppercase","font-bold","label-text"],[1,"flex-1","flex","flex-col","items-center","justify-center"],["class","text-red-500 font-black text-lg animate-pulse tracking-widest uppercase glow-text",4,"ngIf"],["class","text-amber-400 font-black text-lg animate-pulse tracking-widest uppercase glow-text",4,"ngIf"],["class","text-slate-400 font-bold text-xs uppercase tracking-wide",4,"ngIf"],[1,"flex","gap-2","mt-1","opacity-80"],["class","badge-pill bg-blue-500/20 text-blue-300 border-blue-500/30",4,"ngIf"],["class","badge-pill bg-green-500/20 text-green-300 border-green-500/30",4,"ngIf"],[1,"col-span-3","card-panel","flex","flex-col","justify-center","items-end","px-6","relative","overflow-hidden"],[1,"text-3xl","font-mono","font-bold","text-white","z-10","value-text"],[1,"absolute","bottom-0","left-0","h-1.5","w-full","bg-black/20"],[1,"h-full","transition-all","duration-200"],[1,"flex-1","grid","grid-cols-12","gap-6","min-h-0","z-0"],[1,"col-span-3","card-panel","flex","flex-col","items-center","py-4","overflow-hidden"],[1,"text-[10px]","font-bold","text-slate-500","uppercase","tracking-widest","mb-2","label-text","shrink-0"],[1,"mb-3","flex","flex-col","items-center","bg-slate-950/30","w-full","py-2","border-y","border-white/5","shrink-0"],[1,"text-2xl","font-black","text-green-400","tracking-tight"],[1,"text-[8px]","text-slate-500","uppercase","font-bold"],[1,"flex-1","min-h-0","w-full","overflow-y-auto","custom-scroll","px-2","flex","flex-col","items-center","gap-2","pb-2"],["class","w-14 h-14 shrink-0 rounded-xl flex items-center justify-center text-3xl shadow-inner border border-white/5 bg-black/20 animate-in",3,"animation-delay",4,"ngFor","ngForOf"],["class","mt-4 text-green-400 font-bold text-xs animate-pulse flex flex-col items-center",4,"ngIf"],[1,"col-span-9","card-panel","relative","overflow-hidden","flex","items-end","justify-center","pb-10","group","bg-grid-pattern"],[1,"absolute","inset-0","pointer-events-none"],["class","absolute w-2 h-2 rounded-full",3,"left","top","background-color","transform",4,"ngFor","ngForOf"],[1,"relative","z-10","flex","flex-col-reverse","items-center","transition-transform","duration-200"],["class","text-8xl -mb-14 drop-shadow-2xl animate-pop hover:scale-105 transition-transform cursor-pointer select-none",3,"zIndex",4,"ngFor","ngForOf"],[1,"w-72","h-6","bg-slate-700/50","rounded-[100%]","mt-8","shadow-xl","blur-sm","z-[-1]","plate-shadow"],["class","absolute pointer-events-none font-bold text-3xl z-50 animate-float",3,"left","top","ngClass",4,"ngFor","ngForOf"],[1,"shrink-0","card-panel","p-4","z-20","shadow-2xl","border-t","border-white/10","transition-all","duration-300"],[1,"flex","gap-4","items-stretch"],[1,"flex-1","flex","flex-wrap","gap-2","justify-center","content-center"],["class",`relative group bg-slate-800 border-b-4 border-slate-950 rounded-xl 
                              active:border-b-0 active:translate-y-1 transition-all 
                              flex flex-col items-center justify-center overflow-hidden hover:bg-slate-700 ing-key
                              w-20 h-20 lg:w-24 lg:h-24`,3,"click",4,"ngFor","ngForOf"],[1,"w-32","lg:w-48","rounded-xl","font-black","text-lg","lg:text-xl","uppercase","tracking-widest","shadow-lg","border-b-4","active:border-b-0","active:translate-y-1","transition-all","flex","flex-col","items-center","justify-center","text-center","leading-none","action-key","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none","shrink-0","self-stretch","min-h-[5rem]",3,"click","disabled","ngClass"],["class","text-[10px] opacity-60 font-normal mt-1 border border-white/30 px-2 rounded",4,"ngIf"],[1,"text-red-500","font-black","text-lg","animate-pulse","tracking-widest","uppercase","glow-text"],[1,"text-amber-400","font-black","text-lg","animate-pulse","tracking-widest","uppercase","glow-text"],[1,"text-slate-400","font-bold","text-xs","uppercase","tracking-wide"],[1,"badge-pill","bg-blue-500/20","text-blue-300","border-blue-500/30"],[1,"badge-pill","bg-green-500/20","text-green-300","border-green-500/30"],[1,"w-14","h-14","shrink-0","rounded-xl","flex","items-center","justify-center","text-3xl","shadow-inner","border","border-white/5","bg-black/20","animate-in"],[1,"mt-4","text-green-400","font-bold","text-xs","animate-pulse","flex","flex-col","items-center"],[1,"text-[9px]","opacity-70"],[1,"absolute","w-2","h-2","rounded-full"],[1,"text-8xl","-mb-14","drop-shadow-2xl","animate-pop","hover:scale-105","transition-transform","cursor-pointer","select-none"],[1,"absolute","pointer-events-none","font-bold","text-3xl","z-50","animate-float",3,"ngClass"],[1,"relative","group","bg-slate-800","border-b-4","border-slate-950","rounded-xl","active:border-b-0","active:translate-y-1","transition-all","flex","flex-col","items-center","justify-center","overflow-hidden","hover:bg-slate-700","ing-key","w-20","h-20","lg:w-24","lg:h-24",3,"click"],["class","absolute top-1 left-1 bg-white/20 text-white/70 text-[10px] px-1.5 rounded font-mono border border-white/10",4,"ngIf"],[1,"text-3xl","lg:text-4xl","mb-1","group-hover:scale-110","transition-transform","duration-200"],[1,"text-[8px]","lg:text-[9px]","font-bold","text-slate-500","uppercase","tracking-wide","group-hover:text-slate-300","label-text","truncate","w-full","text-center","px-1"],[1,"absolute","bottom-0","left-0","w-full","h-1","bg-black/40"],[1,"h-full","bg-blue-500","transition-all","duration-300"],[1,"absolute","top-1","left-1","bg-white/20","text-white/70","text-[10px]","px-1.5","rounded","font-mono","border","border-white/10"],[1,"text-[10px]","opacity-60","font-normal","mt-1","border","border-white/30","px-2","rounded"]],template:function(t,r){t&1&&(hp(),y(0,"div",0),fp(1),y(2,"div",1)(3,"div",2)(4,"div",3),I(5,"Caisse"),v(),y(6,"div",4),I(7),Ie(8,"number"),v(),y(9,"div",5),I(10,"\u{1F4B0}"),v()(),y(11,"div",6)(12,"div",7)(13,"span",8),I(14),v(),y(15,"span",9),I(16),v()(),y(17,"div",10),$(18,cQ,2,0,"div",11)(19,lQ,2,0,"div",12)(20,uQ,2,0,"div",13),y(21,"div",14),$(22,dQ,2,1,"span",15)(23,hQ,2,1,"span",16),v()()(),y(24,"div",17)(25,"div",3),I(26,"Temps Restant"),v(),y(27,"div",18),I(28),Ie(29,"number"),v(),y(30,"div",19),ie(31,"div",20),v()()(),y(32,"div",21)(33,"div",22)(34,"div",23),I(35,"\xC0 Pr\xE9parer"),v(),y(36,"div",24)(37,"span",25),I(38),Ie(39,"number"),v(),y(40,"span",26),I(41,"Valeur Commande"),v()(),y(42,"div",27),$(43,fQ,2,3,"div",28)(44,pQ,5,0,"div",29),v()(),y(45,"div",30)(46,"div",31),$(47,mQ,1,8,"div",32),v(),y(48,"div",33),$(49,gQ,2,3,"div",34),ie(50,"div",35),v(),$(51,yQ,2,6,"div",36),v()(),y(52,"div",37)(53,"div",38)(54,"div",39),$(55,vQ,8,5,"button",40),v(),y(56,"button",41),q("click",function(s){return r.validateBurger(s)}),y(57,"span"),I(58),v(),$(59,EQ,2,0,"span",42),v()()()()),t&2&&(Re("vip-theme",r.isVip)("fever-theme",r.isFeverMode&&!r.isVip),E(7),ne(" ",st(8,34,r.currentMoney,"1.0-0")," \u20AC "),E(7),ue(r.formatGameTime(r.timeOfDay)),E(2),ne("Jour ",r.currentDay),E(2),N("ngIf",r.isFeverMode),E(),N("ngIf",r.isVip&&!r.isFeverMode),E(),N("ngIf",!r.isFeverMode&&!r.isVip),E(2),N("ngIf",r.cookCount>0),E(),N("ngIf",r.serverBonus>0),E(5),ne("",st(29,37,r.displayTimeLeft/1e3,"1.1-1"),"s"),E(3),Et("width",r.getBarPercentage(),"%"),Re("bg-blue-500",!r.isTimeRunningOut()&&!r.isVip&&!r.isFeverMode)("bg-red-500",r.isTimeRunningOut()||r.isFeverMode)("bg-amber-400",r.isVip),E(7),ne("",st(39,40,r.getCurrentReward(),"1.0-0")," \u20AC"),E(5),N("ngForOf",r.remainingOrder),E(),N("ngIf",r.remainingOrder.length===0),E(3),N("ngForOf",r.particles),E(),Et("transform","scale("+(1-r.currentStack.length*.02)+")"),E(),N("ngForOf",r.currentStack),E(2),N("ngForOf",r.floatingTexts),E(4),N("ngForOf",r.currentAvailableIngredients),E(),N("disabled",r.currentStack.length===0)("ngClass",r.getActionBtnClass()),E(2),ue(r.getButtonLabel()),E(),N("ngIf",r.upgrades.hasKeyboard))},dependencies:[gi,Kn,kn,fr],styles:[".card-panel[_ngcontent-%COMP%]{background-color:#1e293b;border:1px solid #334155;border-radius:1rem;box-shadow:0 4px 6px -1px #0000001a}.badge-pill[_ngcontent-%COMP%]{padding:2px 8px;border-radius:99px;font-size:10px;font-weight:700;border:1px solid;display:inline-block}.vip-theme[_ngcontent-%COMP%]   .card-panel[_ngcontent-%COMP%]{background-color:#2a2010;border-color:#78350f}.vip-theme[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#d97706}.vip-theme[_ngcontent-%COMP%]   .value-text[_ngcontent-%COMP%]{color:#fcd34d;text-shadow:0 0 10px rgba(251,191,36,.5)}.vip-theme[_ngcontent-%COMP%]   .ing-key[_ngcontent-%COMP%]{background-color:#451a03;border-color:#78350f}.vip-theme[_ngcontent-%COMP%]   .plate-shadow[_ngcontent-%COMP%]{background-color:#b45309;opacity:.5}.vip-theme[_ngcontent-%COMP%]   .glow-text[_ngcontent-%COMP%]{text-shadow:0 0 15px #fbbf24}.fever-theme[_ngcontent-%COMP%]   .card-panel[_ngcontent-%COMP%]{background-color:#2a1010;border-color:#7f1d1d}.fever-theme[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#f87171}.fever-theme[_ngcontent-%COMP%]   .value-text[_ngcontent-%COMP%]{color:#fecaca;text-shadow:0 0 10px rgba(239,68,68,.5)}.fever-theme[_ngcontent-%COMP%]   .glow-text[_ngcontent-%COMP%]{text-shadow:0 0 15px #ef4444}.bg-grid-pattern[_ngcontent-%COMP%]{background-image:radial-gradient(#334155 1px,transparent 1px);background-size:20px 20px;background-position:center}.vip-theme[_ngcontent-%COMP%]   .bg-grid-pattern[_ngcontent-%COMP%]{background-image:radial-gradient(#92400e 1px,transparent 1px)}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.4,0,.2,1) backwards}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-pop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop .15s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}.animate-float[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_floatUp .8s forwards ease-out}@keyframes _ngcontent-%COMP%_floatUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-40px)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade .2s ease-out}@keyframes _ngcontent-%COMP%_fade{0%{opacity:0}to{opacity:1}}.success[_ngcontent-%COMP%]{color:#4ade80;text-shadow:0 2px 0 #000}.error[_ngcontent-%COMP%]{color:#ef4444;text-shadow:0 2px 0 #000}.vip[_ngcontent-%COMP%]{color:#fbbf24;text-shadow:0 0 10px #b45309;font-size:2.5rem}.auto[_ngcontent-%COMP%]{color:#60a5fa;text-shadow:0 2px 0 #1e3a8a}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:2px}"],changeDetection:0})};var vy=class n{constructor(e){this.gameState=e}progress=0;maxProgress=15;itemValue=150;get progressPercent(){return Math.floor(this.progress/this.maxProgress*100)}work(){this.progress++,this.progress>=this.maxProgress&&this.finishItem()}finishItem(){this.gameState.addMoney(this.itemValue),this.progress=0}static \u0275fac=function(t){return new(t||n)(se(tn))};static \u0275cmp=mt({type:n,selectors:[["app-factory-game"]],standalone:!1,decls:13,vars:4,consts:[[1,"p-8","bg-slate-800","rounded-xl","border","border-slate-700","text-white","flex","flex-col","items-center","shadow-xl"],[1,"text-2xl","font-bold","mb-8","text-blue-400"],[1,"relative","w-56","h-56","mb-8","cursor-pointer","transition-transform","active:scale-95",3,"click"],[1,"absolute","inset-0","rounded-full","border-8","border-slate-700","bg-slate-900"],[1,"absolute","inset-0","rounded-full","bg-blue-600","opacity-50","transition-all","duration-75"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","z-10","select-none"],[1,"text-4xl","font-black"],[1,"text-xs","text-slate-400","uppercase","mt-1"],[1,"w-full","max-w-xs","py-4","bg-orange-600","hover:bg-orange-500","text-white","rounded-lg","font-bold","text-xl","uppercase","tracking-wider","shadow-lg","border-b-4","border-orange-800","active:border-0","active:translate-y-1","transition-all",3,"click"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"h3",1),I(2,"\u{1F3ED} Ligne d'Assemblage"),v(),y(3,"div",2),q("click",function(){return r.work()}),ie(4,"div",3)(5,"div",4),y(6,"div",5)(7,"span",6),I(8),v(),y(9,"span",7),I(10,"Assemblage"),v()()(),y(11,"button",8),q("click",function(){return r.work()}),I(12),v()()),t&2&&(E(5),Et("clip-path","inset("+(100-r.progressPercent)+"% 0 0 0)"),E(3),ne("",r.progressPercent,"%"),E(4),ne(" PRODUIRE (+",r.itemValue,"\u20AC) "))},encapsulation:2})};var wQ=()=>["PLAYING","STAND","BUST","BLACKJACK","WIN","LOSE","PUSH"];function SQ(n,e){if(n&1&&(y(0,"span",42),ie(1,"span",43),I(2),v()),n&2){let t=e.$implicit;E(2),ne(" ",t," ")}}function CQ(n,e){n&1&&ie(0,"div",44)}function TQ(n,e){if(n&1&&(y(0,"span",45),I(1),v()),n&2){let t=e.$implicit;N("title",t.name),E(),ue(t.icon)}}function DQ(n,e){if(n&1){let t=ve();y(0,"button",46),q("click",function(){Y(t);let i=L();return Q(i.buyCasino())}),I(1," \u{1F3F0} RACHETER LE CASINO (1M\u20AC) "),v()}}function AQ(n,e){if(n&1&&(y(0,"div",50)(1,"div",51),I(2),ie(3,"br"),y(4,"span",52),I(5),v()(),y(6,"div",53),I(7),v(),y(8,"div",54),I(9),ie(10,"br"),y(11,"span",52),I(12),v()()()),n&2){let t=L().$implicit;Re("text-red-600",t.isRed)("text-slate-900",!t.isRed),E(2),ue(t.value),E(3),ue(t.suit),E(2),ue(t.suit),E(2),ue(t.value),E(3),ue(t.suit)}}function xQ(n,e){if(n&1&&(y(0,"div",55)(1,"div",56)(2,"div",57),ie(3,"div",58)(4,"div",59),v(),y(5,"div",60)(6,"div",51),I(7),ie(8,"br"),y(9,"span",52),I(10),v()(),y(11,"div",61),I(12),v(),y(13,"div",54),I(14),ie(15,"br"),y(16,"span",52),I(17),v()()()()()),n&2){let t=L().$implicit,r=L();E(),Re("flipped",r.cardRevealed),E(4),Re("text-red-600",t.isRed)("text-slate-900",!t.isRed),E(2),ue(t.value),E(3),ue(t.suit),E(2),ue(t.suit),E(2),ue(t.value),E(3),ue(t.suit)}}function RQ(n,e){if(n&1&&(y(0,"div",47),$(1,AQ,13,9,"div",48)(2,xQ,18,11,"div",49),v()),n&2){let t=e.$implicit;N("@cardDeal",void 0),E(),N("ngIf",!t.isFaceDown),E(),N("ngIf",t.isFaceDown)}}function kQ(n,e){if(n&1){let t=ve();y(0,"button",67),q("click",function(i){Y(t);let s=L().index,o=L();return i.stopPropagation(),Q(o.occupySeat(s))}),y(1,"span",68),I(2,"\u2795"),v(),y(3,"span",69),I(4,"REJOINDRE"),v()()}}function PQ(n,e){if(n&1&&(y(0,"span",80),I(1),v()),n&2){let t=L(2).$implicit;E(),ue(t.avatar)}}function NQ(n,e){n&1&&(y(0,"span",81),I(1,"\u{1F916}"),v())}function MQ(n,e){if(n&1){let t=ve();y(0,"button",82),q("click",function(i){Y(t);let s=L(2).index,o=L();return i.stopPropagation(),Q(o.clearBet(s))}),I(1,"Effacer"),v()}}function OQ(n,e){n&1&&(y(0,"div",83),I(1,"Cliquer pour miser"),v())}function FQ(n,e){if(n&1&&(y(0,"div",70)(1,"div",71),$(2,PQ,2,1,"span",72)(3,NQ,2,0,"span",73),I(4),v(),y(5,"div",74),ie(6,"div",75),y(7,"div",76),I(8),Ie(9,"number"),v(),y(10,"div",77),$(11,MQ,2,0,"button",78),v()(),$(12,OQ,2,0,"div",79),v()),n&2){let t=L().$implicit;E(2),N("ngIf",t.avatar),E(),N("ngIf",t.isBot),E(),ne(" ",t.name," "),E(4),ne(" ",st(9,6,t.bet,"1.0-0")," "),E(3),N("ngIf",t.bet>0),E(),N("ngIf",!t.isBot)}}function LQ(n,e){if(n&1&&(y(0,"div",91)(1,"div",92),I(2),v()()),n&2){let t=L(2).$implicit;N("@handEntry",void 0),E(),Re("text-green-400",t.status==="WIN")("text-red-500",t.status==="LOSE")("text-amber-400",t.status==="BLACKJACK"),E(),ne(" ",t.resultMessage," ")}}function VQ(n,e){if(n&1&&(y(0,"div",93)(1,"div",94)(2,"div",95),I(3),ie(4,"br"),I(5),v(),y(6,"div",96),I(7),v(),y(8,"div",97),I(9),ie(10,"br"),I(11),v()()()),n&2){let t=e.$implicit;N("@cardDeal",void 0),E(),Re("text-red-600",t.isRed)("text-slate-900",!t.isRed),E(2),ue(t.value),E(2),ue(t.suit),E(2),ue(t.suit),E(2),ue(t.value),E(2),ue(t.suit)}}function UQ(n,e){if(n&1&&(y(0,"div",84),$(1,LQ,3,8,"div",85),y(2,"div",86),$(3,VQ,12,10,"div",87),v(),y(4,"div",88)(5,"span",89),I(6),v(),y(7,"span",90),I(8),v()()()),n&2){let t=L().$implicit,r=L();E(),N("ngIf",t.resultMessage&&r.winAmount===0),E(2),N("ngForOf",t.hand),E(3),ue(t.name),E(2),ne(" ",t.score," ")}}function BQ(n,e){n&1&&ie(0,"div",98)}function jQ(n,e){if(n&1){let t=ve();y(0,"div",62),q("click",function(i){let s=Y(t).index,o=L();return Q(o.addToBet(i,s))}),$(1,kQ,5,0,"button",63)(2,FQ,13,9,"div",64)(3,UQ,9,4,"div",65)(4,BQ,1,0,"div",66),v()}if(n&2){let t=e.$implicit,r=e.index,i=L();Re("opacity-50",i.activeSeatIndex!==null&&i.activeSeatIndex!==r&&t.status!=="EMPTY")("scale-105",i.activeSeatIndex===r),E(),N("ngIf",t.status==="EMPTY"),E(),N("ngIf",t.status==="BETTING"),E(),N("ngIf",lE(8,wQ).includes(t.status)),E(),N("ngIf",i.activeSeatIndex===r)}}function $Q(n,e){n&1&&(y(0,"div",107),I(1," Aucun joueur trouv\xE9... \u{1F634}"),ie(2,"br"),y(3,"span",81),I(4,"Attendez qu'ils se connectent !"),v()())}function HQ(n,e){if(n&1){let t=ve();y(0,"div",108),q("click",function(){let i=Y(t).$implicit,s=L(2);return Q(s.challengePlayer(i))}),y(1,"div",109)(2,"div",110),I(3),v(),y(4,"div")(5,"div",111),I(6),v(),y(7,"div",112),I(8),Ie(9,"number"),v()()(),y(10,"button",113),I(11,"INVITER"),v()()}if(n&2){let t=e.$implicit;E(3),ue(t.avatarId),E(3),ue(t.username),E(2),fo("",t.title," \u2022 ",st(9,4,t.money,"1.0-0"),"\u20AC")}}function zQ(n,e){if(n&1){let t=ve();y(0,"div",99),q("click",function(){Y(t);let i=L();return Q(i.closeLobby())}),y(1,"div",100),q("click",function(i){return Y(t),Q(i.stopPropagation())}),y(2,"div",101)(3,"h3",102),I(4,"\u2694\uFE0F JOUEURS EN LIGNE"),v(),y(5,"button",103),q("click",function(){Y(t);let i=L();return Q(i.closeLobby())}),I(6,"\u2715"),v()(),y(7,"div",104),$(8,$Q,5,0,"div",105)(9,HQ,12,7,"div",106),v()()()}if(n&2){let t=L();E(8),N("ngIf",t.onlinePlayers.length===0),E(),N("ngForOf",t.onlinePlayers)}}function GQ(n,e){if(n&1){let t=ve();y(0,"div",114)(1,"div",115)(2,"div",116)(3,"div",117),I(4,"R\xE9sultat de la manche"),v(),y(5,"div",118),I(6," VICTOIRE "),v()(),ie(7,"div",119),y(8,"div",120)(9,"div",121),I(10,"Gains Totaux"),v(),y(11,"div",122),I(12),Ie(13,"number"),v()(),y(14,"button",123),q("click",function(){Y(t);let i=L();return Q(i.resetRound())}),I(15," Continuer "),v()()()}if(n&2){let t=L();E(),N("@modalPop",void 0),E(11),ne(" +",st(13,2,t.winAmount,"1.0-0")," \u20AC ")}}function qQ(n,e){if(n&1&&(y(0,"div",124)(1,"div",125)(2,"div",126),I(3),Ie(4,"number"),v()()()),n&2){let t=e.$implicit,r=L();Et("left",t.startX,"px")("top",t.startY,"px"),Re("flying-target",t.targetX>0),E(),N("ngClass",r.getChipStyle(t.value)),E(2),ue(st(4,8,t.value,"1.0-0"))}}function WQ(n,e){if(n&1){let t=ve();y(0,"button",133),q("click",function(){let i=Y(t).$implicit,s=L(2);return Q(s.selectChip(i))}),ie(1,"div",134),y(2,"div",135)(3,"span",136),I(4),Ie(5,"number"),v()()()}if(n&2){let t=e.$implicit,r=L(2);Re("ring-4",r.selectedChip===t)("ring-white",r.selectedChip===t),N("disabled",r.currentMoney<t)("ngClass",r.getChipShadow(t)),E(),N("ngClass",r.getChipBg(t)),E(),N("ngClass",r.getChipBg(t)),E(2),ue(st(5,9,t,"1.0-0"))}}function KQ(n,e){if(n&1){let t=ve();y(0,"div",127)(1,"div",128),$(2,WQ,6,12,"button",129),v(),y(3,"div",130)(4,"button",131),q("click",function(){Y(t);let i=L();return Q(i.allIn())}),I(5,"\u{1F525} TAPIS"),v(),y(6,"button",132),q("click",function(){Y(t);let i=L();return Q(i.startRound())}),I(7,"DISTRIBUER"),v()()()}if(n&2){let t=L();N("@chipsIn",void 0),E(2),N("ngForOf",t.chips),E(4),N("disabled",!t.canStartRound())}}function YQ(n,e){if(n&1){let t=ve();y(0,"button",143),q("click",function(){Y(t);let i=L(2);return Q(i.double())}),y(1,"div",139),I(2,"\u{1F4B0}"),v(),y(3,"div",140),I(4,"Doubler"),v()()}}function QQ(n,e){if(n&1){let t=ve();y(0,"div",137)(1,"button",138),q("click",function(){Y(t);let i=L();return Q(i.hit())}),y(2,"div",139),I(3,"\u{1F447}"),v(),y(4,"div",140),I(5,"Carte"),v()(),y(6,"button",141),q("click",function(){Y(t);let i=L();return Q(i.stand())}),y(7,"div",139),I(8,"\u270B"),v(),y(9,"div",140),I(10,"Rester"),v()(),$(11,YQ,5,0,"button",142),v()}if(n&2){let t=L();E(11),N("ngIf",t.canDouble)}}function JQ(n,e){if(n&1){let t=ve();y(0,"div",144)(1,"button",145),q("click",function(){Y(t);let i=L();return Q(i.resetRound())}),I(2,"NOUVELLE MANCHE \u{1F3B2}"),v()()}}function ZQ(n,e){if(n&1&&(y(0,"div",152)(1,"span"),I(2),v(),y(3,"span"),I(4),v()()),n&2){let t=e.$implicit;E(2),ue(t.result),E(),Re("text-green-600",t.amount>0)("text-red-600",t.amount<0),E(),fo("",t.amount>0?"+":"","",t.amount)}}function XQ(n,e){if(n&1){let t=ve();y(0,"div",146)(1,"div",147)(2,"span"),I(3,"SESSION LOG"),v(),y(4,"span",148),q("click",function(){Y(t);let i=L();return Q(i.toggleStats())}),I(5,"\u2715"),v()(),y(6,"div",149),$(7,ZQ,5,7,"div",150),v(),y(8,"div",151)(9,"span"),I(10,"TOTAL"),v(),y(11,"span"),I(12),v()()()}if(n&2){let t=L();E(7),N("ngForOf",t.sessionLogs),E(4),Re("text-green-600",t.sessionWinnings>=0)("text-red-600",t.sessionWinnings<0),E(),ne("",t.sessionWinnings," \u20AC")}}var Ey=class n{constructor(e,t,r,i){this.gameState=e;this.sound=t;this.cdr=r;this.firebase=i}globalStatus="BETTING";currentMoney=0;myUsername="Moi";seats=[{id:0,hand:[],bet:0,score:0,status:"EMPTY",isBot:!0,name:"Si\xE8ge 1"},{id:1,hand:[],bet:0,score:0,status:"BETTING",isBot:!1,name:"Vous"},{id:2,hand:[],bet:0,score:0,status:"EMPTY",isBot:!1,name:"Si\xE8ge 3"}];activeSeatIndex=null;dealerHand=[];cardRevealed=!1;deck=[];chips=[100,1e3,1e4,1e5,1e6];selectedChip=100;flyingChips=[];isSpotlightMode=!1;isDuelMode=!1;isLobbyOpen=!1;onlinePlayers=[];isOwner=!1;dealerHandTransform="translate(0,0)";showStats=!1;sessionLogs=[];sessionWinnings=0;tickerMessages=["Bienvenue au Casino Royal \u2022 Installez-vous !"];tickerSub;badges=[];ngOnInit(){this.gameState.gameState$.subscribe(e=>{this.currentMoney=e.money,e.user&&(this.myUsername=e.user.username),this.updateBadges(),this.cdr.markForCheck()}),this.createDeck(),this.seats[0].status="EMPTY",this.tickerSub=this.firebase.publicEvents$.subscribe(e=>{e&&e.length>0&&(this.tickerMessages=e,this.cdr.markForCheck())})}ngOnDestroy(){this.tickerSub&&this.tickerSub.unsubscribe()}createDeck(){let e=["\u2660","\u2665","\u2666","\u2663"],t=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];this.deck=[];for(let r=0;r<4;r++)for(let i of e)for(let s of t){let o=parseInt(s);isNaN(o)&&(o=s==="A"?11:10),this.deck.push({suit:i,value:s,numValue:o,isRed:i==="\u2665"||i==="\u2666",id:r+i+s+Math.random(),isFaceDown:!1})}this.deck.sort(()=>Math.random()-.5)}drawCard(e=!1){this.deck.length<20&&this.createDeck();let t=this.deck.pop();return t.isFaceDown=e,this.animateDealerHand(),t}animateDealerHand(){this.dealerHandTransform="translate(-50px, 50px)",setTimeout(()=>{this.dealerHandTransform="translate(0,0)",this.cdr.markForCheck()},150)}async openDuelLobby(){this.globalStatus==="BETTING"&&(this.isLobbyOpen=!0,this.onlinePlayers=await this.firebase.getOnlinePlayers(),this.cdr.markForCheck())}closeLobby(){this.isLobbyOpen=!1}challengePlayer(e){this.firebase.sendInvite(e.id,e.username,"BLACKJACK",1e4,this.myUsername),this.seats[0].status="BETTING",this.seats[0].isBot=!0,this.seats[0].name=e.username,this.seats[0].avatar=e.avatarId,this.seats[0].bet=Math.min(e.money,5e3),this.isDuelMode=!0,this.closeLobby(),this.sound.playSuccess(),alert(`Invitation envoy\xE9e \xE0 ${e.username} ! (Il sera jou\xE9 par l'IA en attendant)`)}toggleDuelMode(){this.globalStatus==="BETTING"&&(this.isDuelMode?(this.isDuelMode=!1,this.seats[0].status="EMPTY",this.seats[0].bet=0,this.seats[0].isBot=!1):this.openDuelLobby())}occupySeat(e){this.seats[e].status="BETTING",this.seats[e].name=`Moi (${e+1})`,this.seats[e].isBot=!1}selectChip(e){this.selectedChip=e}addToBet(e,t){if(this.currentMoney<this.selectedChip){this.sound.playError();return}if(this.seats[t].status!=="BETTING"||this.seats[t].isBot)return;let r=Date.now();this.flyingChips.push({id:r,value:this.selectedChip,startX:e.clientX,startY:e.clientY,targetX:0,targetY:0}),this.gameState.addMoney(-this.selectedChip),this.seats[t].bet+=this.selectedChip,this.sound.playNoise(.05,"lowpass",400,.4),setTimeout(()=>this.flyingChips=this.flyingChips.filter(i=>i.id!==r),400)}clearBet(e){this.seats[e].bet>0&&!this.seats[e].isBot?(this.gameState.addMoney(this.seats[e].bet),this.seats[e].bet=0,this.sound.playSoftPop()):e!==1&&(this.seats[e].status="EMPTY")}allIn(){if(this.currentMoney<=0)return;let e=this.seats[1];if(e.status==="BETTING"){let t=this.currentMoney;this.gameState.addMoney(-t),e.bet+=t,this.sound.playCash()}}canStartRound(){return this.seats.some(e=>e.status==="BETTING"&&e.bet>0)}startRound(){this.globalStatus="PLAYING",this.dealerHand=[],this.cardRevealed=!1,this.isSpotlightMode=!1,this.winAmount=0,this.seats.forEach(r=>{r.status==="BETTING"&&r.bet>0?(r.status="PLAYING",r.hand=[],r.score=0,r.resultMessage=""):r.status==="BETTING"&&(r.status="EMPTY")});let e=0,t=setInterval(()=>{e++,e===1&&this.seats.forEach(r=>{r.status==="PLAYING"&&r.hand.push(this.drawCard())}),e===2&&this.dealerHand.push(this.drawCard()),e===3&&this.seats.forEach(r=>{r.status==="PLAYING"&&r.hand.push(this.drawCard())}),e===4&&this.dealerHand.push(this.drawCard(!0)),this.updateScores(),this.sound.playNoise(.02,"highpass",1200,.2),this.cdr.markForCheck(),e===4&&(clearInterval(t),setTimeout(()=>this.checkBlackjacks(),500))},400)}updateScores(){this.seats.forEach(e=>e.score=this.calculateScore(e.hand))}get dealerScore(){return this.globalStatus==="PLAYING"&&this.dealerHand.length>=2&&!this.cardRevealed?this.calculateScore([this.dealerHand[0]]):this.calculateScore(this.dealerHand)}get dealerScoreDisplay(){return this.dealerScore}get winAmount(){return this.seats.reduce((e,t)=>e+(t.resultAmount||0),0)}set winAmount(e){}checkBlackjacks(){let e=!0;this.seats.forEach(t=>{t.status==="PLAYING"&&t.score===21&&(t.status="BLACKJACK",this.sound.playSuccess()),t.status==="PLAYING"&&(e=!1)}),e?this.startDealerTurn():this.nextTurn()}nextTurn(){let e=this.seats.findIndex((t,r)=>t.status==="PLAYING"&&(this.activeSeatIndex===null||r>this.activeSeatIndex));e!==-1?(this.activeSeatIndex=e,this.seats[e].isBot&&setTimeout(()=>this.playBotTurn(e),500)):(this.activeSeatIndex=null,this.startDealerTurn()),this.cdr.markForCheck()}get canDouble(){if(this.activeSeatIndex===null)return!1;let e=this.seats[this.activeSeatIndex];return e.hand.length===2&&this.currentMoney>=e.bet}hit(){if(this.activeSeatIndex===null)return;let e=this.seats[this.activeSeatIndex];e.hand.push(this.drawCard()),this.updateScores(),this.sound.playNoise(.02,"highpass",1500,.15),e.score>21&&(e.status="BUST",e.resultMessage="SAUT\xC9 !",this.sound.playError(),setTimeout(()=>this.nextTurn(),800))}stand(){this.activeSeatIndex!==null&&(this.seats[this.activeSeatIndex].status="STAND",this.nextTurn())}double(){if(this.activeSeatIndex===null)return;let e=this.seats[this.activeSeatIndex];this.gameState.addMoney(-e.bet),e.bet*=2,e.hand.push(this.drawCard()),this.updateScores(),this.sound.playCash(),e.score>21?(e.status="BUST",e.resultMessage="SAUT\xC9 !"):e.status="STAND",setTimeout(()=>this.nextTurn(),1e3)}async playBotTurn(e){let t=this.seats[e];for(;t.score<17;)await new Promise(r=>setTimeout(r,1e3)),t.hand.push(this.drawCard()),this.updateScores(),this.cdr.markForCheck();t.score>21?t.status="BUST":t.status="STAND",await new Promise(r=>setTimeout(r,500)),this.nextTurn()}async startDealerTurn(){for(this.globalStatus="DEALER_TURN",this.isSpotlightMode=!0,this.activeSeatIndex=null,this.cardRevealed=!0,this.sound.playNoise(.1,"lowpass",600,.3),await new Promise(e=>setTimeout(e,600)),this.dealerHand[1].isFaceDown=!1,this.cdr.markForCheck();this.dealerScore<17;)await new Promise(e=>setTimeout(e,1e3)),this.dealerHand.push(this.drawCard()),this.sound.playNoise(.02,"highpass",1200,.2),this.cdr.markForCheck();await new Promise(e=>setTimeout(e,500)),this.resolveRound()}resolveRound(){this.globalStatus="RESULT";let e=this.dealerScore,t=e>21,r=e===21&&this.dealerHand.length===2;this.seats.forEach(i=>{if(i.status==="EMPTY"||i.status==="BETTING")return;let s=0;i.resultAmount=0,i.status==="BUST"?this.logSession(`Si\xE8ge ${i.id} Bust`,-i.bet):i.status==="BLACKJACK"?r?(i.status="PUSH",i.resultMessage="EGALIT\xC9",s=i.bet,this.logSession(`Si\xE8ge ${i.id} Push`,0)):(i.status="WIN",i.resultMessage="BLACKJACK !!",s=i.bet*2.5,this.sound.playCash()):r?(i.status="LOSE",i.resultMessage="PERDU"):t||i.score>e?(i.status="WIN",i.resultMessage="GAGN\xC9",s=i.bet*2):i.score===e?(i.status="PUSH",i.resultMessage="EGALIT\xC9",s=i.bet,this.logSession(`Si\xE8ge ${i.id} Push`,0)):(i.status="LOSE",i.resultMessage="PERDU"),s>0?(this.gameState.addMoney(s),i.resultAmount=s,s>i.bet&&(this.logSession(`Si\xE8ge ${i.id} Gain`,s-i.bet),s>5e4&&this.gameState.gameState$.subscribe(o=>{this.firebase.logPublicEvent(`\u{1F525} ${o.user?.username} a rafl\xE9 ${s}\u20AC au Casino !`,"JACKPOT")}).unsubscribe())):s===0&&i.status!=="PUSH"&&this.logSession(`Si\xE8ge ${i.id} Perte`,-i.bet)}),this.cdr.markForCheck()}resetRound(){this.globalStatus="BETTING",this.isSpotlightMode=!1,this.activeSeatIndex=null,this.dealerHand=[],this.seats.forEach(e=>{e.status!=="EMPTY"&&(e.status="BETTING",e.hand=[],e.score=0,e.resultMessage="",e.resultAmount=0,e.bet=0)})}calculateScore(e){let t=0,r=0;for(let i of e)i.isFaceDown||(t+=i.numValue,i.value==="A"&&r++);for(;t>21&&r>0;)t-=10,r--;return t}getChipBg(e){return e===100?"bg-slate-400 text-slate-900":e===1e3?"bg-emerald-600 text-white":e===1e4?"bg-blue-600 text-white":e===1e5?"bg-purple-600 text-white":"bg-black text-amber-400 border-amber-400"}getChipShadow(e){return e===100?"shadow-[0_4px_0_#94a3b8]":e===1e3?"shadow-[0_4px_0_#065f46]":e===1e4?"shadow-[0_4px_0_#1e3a8a]":e===1e5?"shadow-[0_4px_0_#581c87]":"shadow-[0_4px_0_#78350f]"}getChipStyle(e){return this.getChipBg(e)+" border-2 border-white/20"}logSession(e,t){this.sessionLogs.unshift({result:e,amount:t}),this.sessionWinnings+=t}toggleStats(){this.showStats=!this.showStats}updateBadges(){this.badges=[],this.sessionWinnings>1e4&&this.badges.push({name:"High Roller",icon:"\u{1F433}"}),this.sessionWinnings>5e4&&this.badges.push({name:"Shark",icon:"\u{1F988}"}),this.sessionWinnings>1e6&&this.badges.push({name:"Legend",icon:"\u{1F451}"})}buyCasino(){this.isOwner=!0,this.sound.playSuccess(),this.firebase.logPublicEvent("\u{1F451} LE CASINO VIENT D'\xCATRE RACHET\xC9 ! Respect au nouveau Boss ! \u{1F451}","JACKPOT"),alert("F\xC9LICITATIONS ! Vous \xEAtes maintenant le propri\xE9taire du Casino Royal !")}static \u0275fac=function(t){return new(t||n)(se(tn),se(Tn),se(kt),se(ei))};static \u0275cmp=mt({type:n,selectors:[["app-blackjack-game"]],standalone:!1,decls:51,vars:37,consts:[[1,"h-full","flex","flex-col","font-sans","select-none","relative","overflow-hidden","text-slate-200","shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]","transition-colors","duration-1000"],[1,"absolute","top-0","left-0","w-full","bg-black/60","backdrop-blur-sm","border-b","border-white/5","h-8","flex","items-center","overflow-hidden","z-30"],[1,"whitespace-nowrap","animate-marquee","flex","gap-8"],["class","text-xs font-mono font-bold text-green-400 flex items-center gap-2",4,"ngFor","ngForOf"],[1,"absolute","-top-10","-right-10","w-40","h-60","bg-slate-900","border","border-slate-700","rounded-xl","rotate-12","shadow-2xl","z-0","deck-stack"],[1,"absolute","inset-0","bg-red-900/20","rounded-xl"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","text-slate-700","font-black","opacity-20","text-4xl","rotate-90"],[1,"absolute","inset-0","pointer-events-none","transition-opacity","duration-1000"],[1,"absolute","top-0","left-1/2","-translate-x-1/2","w-[600px]","h-[600px]","bg-amber-500/10","blur-[100px]","rounded-full","mix-blend-screen"],[1,"absolute","top-[-50px]","right-[20%]","w-32","h-32","z-50","pointer-events-none","transition-transform","duration-300"],[1,"w-full","h-full","bg-white","rounded-full","opacity-10","blur-xl"],[1,"text-6xl","absolute","top-0","left-0","drop-shadow-2xl"],[1,"flex","justify-between","items-start","z-30","mt-10","mb-4","px-6","relative"],[1,"flex","flex-col","bg-slate-950/80","backdrop-blur-md","p-4","rounded-2xl","border","border-white/10","shadow-xl","transition-all","hover:border-white/20","group","relative","overflow-hidden"],["class","absolute inset-0 bg-amber-500/10 pointer-events-none animate-pulse",4,"ngIf"],[1,"flex","items-center","gap-2","mb-1"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-[0.2em]"],[1,"flex","gap-1"],["class","text-xs",3,"title",4,"ngFor","ngForOf"],[1,"text-4xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-emerald-400","to-teal-300","font-mono","filter","drop-shadow"],["class","mt-2 text-[10px] bg-gradient-to-r from-amber-600 to-amber-500 text-white font-black px-3 py-1.5 rounded hover:scale-105 transition-transform shadow-lg animate-bounce border border-amber-400/50",3,"click",4,"ngIf"],[1,"flex","gap-4"],[1,"px-4","py-2","rounded-xl","border","text-xs","font-bold","transition-all","shadow-lg","backdrop-blur-md",3,"click"],[1,"w-10","h-10","rounded-full","bg-slate-800","border","border-slate-600","flex","items-center","justify-center","hover:bg-slate-700","text-xl","shadow-lg",3,"click"],[1,"flex-1","flex","flex-col","relative","z-10","min-h-0","transition-all","duration-700"],[1,"flex","flex-col","items-center","h-48","relative","justify-end","mt-4"],[1,"flex","items-center","gap-3","mb-4","z-10","transition-opacity","duration-300"],[1,"text-xs","font-black","uppercase","tracking-widest","text-slate-500","drop-shadow-md"],[1,"bg-slate-900","text-slate-200","text-xs","font-bold","px-3","py-1","rounded-full","border","border-slate-700","shadow-lg","min-w-[2rem]","text-center"],[1,"flex","justify-center","-space-x-14","perspective-1000"],["class","card-wrapper w-[90px] h-[126px]",4,"ngFor","ngForOf"],[1,"flex-1"],[1,"grid","grid-cols-3","gap-4","px-4","h-56","items-end","mb-8","relative"],["class","relative flex flex-col items-center justify-end h-full transition-all duration-300 rounded-xl hover:bg-white/5 cursor-pointer border border-transparent hover:border-white/10",3,"opacity-50","scale-105","click",4,"ngFor","ngForOf"],["class","absolute inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-black/80 animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 z-50 flex items-center justify-center pointer-events-none",4,"ngIf"],[1,"mt-auto","relative","h-40","flex","items-center","justify-center","z-40","bg-gradient-to-t","from-black/90","via-black/80","to-transparent"],["class","fixed pointer-events-none z-[100] transition-all duration-500 ease-in-out",3,"left","top","flying-target",4,"ngFor","ngForOf"],["class","flex flex-col items-center gap-3 w-full px-4",4,"ngIf"],["class","flex gap-6 animate-fade-in-up pb-4",4,"ngIf"],["class","pb-4",4,"ngIf"],["class","absolute right-4 bottom-32 bg-yellow-50 text-slate-900 p-4 rounded-sm shadow-2xl rotate-2 w-48 font-mono text-xs border border-slate-300 z-50 animate-fade-up",4,"ngIf"],[1,"text-xs","font-mono","font-bold","text-green-400","flex","items-center","gap-2"],[1,"w-2","h-2","bg-red-500","rounded-full","animate-pulse"],[1,"absolute","inset-0","bg-amber-500/10","pointer-events-none","animate-pulse"],[1,"text-xs",3,"title"],[1,"mt-2","text-[10px]","bg-gradient-to-r","from-amber-600","to-amber-500","text-white","font-black","px-3","py-1.5","rounded","hover:scale-105","transition-transform","shadow-lg","animate-bounce","border","border-amber-400/50",3,"click"],[1,"card-wrapper","w-[90px]","h-[126px]"],["class","card-inner w-full h-full relative rounded-xl shadow-2xl bg-slate-100 border border-slate-300 overflow-hidden transform transition-transform hover:-translate-y-4 hover:rotate-1",3,"text-red-600","text-slate-900",4,"ngIf"],["class","flip-container w-full h-full relative",4,"ngIf"],[1,"card-inner","w-full","h-full","relative","rounded-xl","shadow-2xl","bg-slate-100","border","border-slate-300","overflow-hidden","transform","transition-transform","hover:-translate-y-4","hover:rotate-1"],[1,"absolute","top-2","left-2","text-lg","font-black","leading-none"],[1,"text-xl"],[1,"absolute","inset-0","flex","items-center","justify-center","text-6xl","opacity-90"],[1,"absolute","bottom-2","right-2","text-lg","font-black","leading-none","rotate-180"],[1,"flip-container","w-full","h-full","relative"],[1,"flipper","w-full","h-full","relative","transition-transform","duration-700","transform-style-3d"],[1,"front","w-full","h-full","absolute","top-0","left-0","backface-hidden","rounded-xl","border-2","border-white/80","bg-gradient-to-br","from-red-700","to-red-900","shadow-2xl","flex","items-center","justify-center","overflow-hidden"],[1,"absolute","inset-0","pattern-grid","opacity-30"],[1,"w-12","h-12","rounded-full","border-2","border-white/20"],[1,"back","w-full","h-full","absolute","top-0","left-0","backface-hidden","rounded-xl","bg-slate-100","border","border-slate-300","shadow-2xl","flex","items-center","justify-center","rotate-y-180"],[1,"text-6xl"],[1,"relative","flex","flex-col","items-center","justify-end","h-full","transition-all","duration-300","rounded-xl","hover:bg-white/5","cursor-pointer","border","border-transparent","hover:border-white/10",3,"click"],["class","w-20 h-20 rounded-full border-2 border-dashed border-slate-600 flex items-center justify-center text-slate-500 hover:border-slate-400 hover:text-slate-300 transition-colors mb-8 group flex-col gap-1",3,"click",4,"ngIf"],["class","flex flex-col items-center mb-8 animate-fade-in w-full",4,"ngIf"],["class","flex flex-col items-center w-full",4,"ngIf"],["class","absolute -bottom-2 w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-b-[15px] border-b-yellow-400 animate-bounce",4,"ngIf"],[1,"w-20","h-20","rounded-full","border-2","border-dashed","border-slate-600","flex","items-center","justify-center","text-slate-500","hover:border-slate-400","hover:text-slate-300","transition-colors","mb-8","group","flex-col","gap-1",3,"click"],[1,"text-2xl","group-hover:scale-110","transition-transform"],[1,"text-[9px]","font-bold"],[1,"flex","flex-col","items-center","mb-8","animate-fade-in","w-full"],[1,"text-[10px]","font-bold","uppercase","text-slate-500","mb-1","flex","items-center","gap-1"],["class","text-sm",4,"ngIf"],["class","text-xs",4,"ngIf"],[1,"relative","group"],[1,"w-16","h-16","rounded-full","border-4","border-dashed","border-amber-500/30","bg-amber-900/20","flex","items-center","justify-center","animate-pulse-slow","group-hover:border-green-500/50","transition-colors"],[1,"absolute","inset-0","flex","items-center","justify-center","font-black","text-amber-400","text-sm","lg:text-lg","drop-shadow-md"],[1,"absolute","-top-8","left-1/2","-translate-x-1/2","flex","gap-1","opacity-0","group-hover:opacity-100","transition-opacity"],["class","bg-red-600/80 hover:bg-red-500 text-white text-[10px] px-2 py-1 rounded shadow",3,"click",4,"ngIf"],["class","text-[9px] text-slate-600 mt-1 uppercase tracking-wider",4,"ngIf"],[1,"text-sm"],[1,"text-xs"],[1,"bg-red-600/80","hover:bg-red-500","text-white","text-[10px]","px-2","py-1","rounded","shadow",3,"click"],[1,"text-[9px]","text-slate-600","mt-1","uppercase","tracking-wider"],[1,"flex","flex-col","items-center","w-full"],["class","absolute -top-10 z-50 flex flex-col items-center pointer-events-none",4,"ngIf"],[1,"flex","justify-center","-space-x-10","mb-2","z-20","perspective-1000","min-h-[100px]"],["class","card-wrapper w-[70px] h-[98px]",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-2","z-10"],[1,"text-[10px]","font-bold","uppercase","text-slate-500"],[1,"bg-blue-600","text-white","text-[10px]","font-bold","px-2","py-0.5","rounded","shadow","border","border-blue-400"],[1,"absolute","-top-10","z-50","flex","flex-col","items-center","pointer-events-none"],[1,"text-2xl","font-black","text-white","stroke-text","shadow-xl"],[1,"card-wrapper","w-[70px]","h-[98px]"],[1,"card-inner","w-full","h-full","relative","rounded-lg","shadow-md","bg-slate-100","border","border-slate-300","overflow-hidden"],[1,"absolute","top-1","left-1","text-xs","font-black","leading-none"],[1,"absolute","inset-0","flex","items-center","justify-center","text-4xl","opacity-90"],[1,"absolute","bottom-1","right-1","text-xs","font-black","leading-none","rotate-180"],[1,"absolute","-bottom-2","w-0","h-0","border-l-[10px]","border-l-transparent","border-r-[10px]","border-r-transparent","border-b-[15px]","border-b-yellow-400","animate-bounce"],[1,"absolute","inset-0","z-50","flex","items-center","justify-center","backdrop-blur-md","bg-black/80","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-md","rounded-2xl","shadow-2xl","overflow-hidden",3,"click"],[1,"p-4","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-950"],[1,"font-black","text-white","text-lg"],[1,"text-slate-400","hover:text-white",3,"click"],[1,"max-h-96","overflow-y-auto","p-4","custom-scroll"],["class","text-center text-slate-500 py-8",4,"ngIf"],["class","flex items-center justify-between p-3 rounded-xl bg-slate-800 hover:bg-purple-900/30 border border-slate-700 hover:border-purple-500 cursor-pointer transition-all mb-2 group",3,"click",4,"ngFor","ngForOf"],[1,"text-center","text-slate-500","py-8"],[1,"flex","items-center","justify-between","p-3","rounded-xl","bg-slate-800","hover:bg-purple-900/30","border","border-slate-700","hover:border-purple-500","cursor-pointer","transition-all","mb-2","group",3,"click"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-slate-700","flex","items-center","justify-center","text-xl","shadow-inner"],[1,"font-bold","text-white","group-hover:text-purple-300"],[1,"text-[10px]","text-slate-400"],[1,"bg-purple-600","text-white","text-xs","font-bold","px-3","py-1.5","rounded","hover:bg-purple-500","shadow-lg"],[1,"absolute","inset-0","z-50","flex","items-center","justify-center","pointer-events-none"],[1,"bg-black/80","backdrop-blur-xl","border","border-amber-500/30","p-10","rounded-3xl","shadow-2xl","flex","flex-col","items-center","gap-4","pointer-events-auto","max-w-lg","w-full","mx-4"],[1,"text-center"],[1,"text-amber-400","text-sm","font-bold","uppercase","tracking-[0.5em]","mb-2"],[1,"text-7xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-b","from-yellow-300","via-amber-500","to-amber-700","filter","drop-shadow-[0_5px_5px_rgba(0,0,0,0.5)]"],[1,"w-full","h-px","bg-gradient-to-r","from-transparent","via-amber-500/50","to-transparent","my-2"],[1,"flex","flex-col","items-center","gap-1"],[1,"text-slate-400","text-xs","uppercase","tracking-widest"],[1,"text-5xl","font-mono","font-black","text-green-400","text-shadow-glow"],[1,"mt-6","w-full","py-4","bg-white","text-black","font-black","text-xl","rounded-xl","hover:scale-105","transition-transform","shadow-xl","active:scale-95","uppercase","tracking-wider",3,"click"],[1,"fixed","pointer-events-none","z-[100]","transition-all","duration-500","ease-in-out"],[1,"w-12","h-12","rounded-full","shadow-2xl","animate-spin-slow",3,"ngClass"],[1,"w-full","h-full","rounded-full","border-2","border-dashed","border-white/30","flex","items-center","justify-center","font-black","text-[10px]"],[1,"flex","flex-col","items-center","gap-3","w-full","px-4"],[1,"flex","gap-3","justify-center","w-full","overflow-x-auto","pb-2","scrollbar-hide"],["class","chip-btn group relative w-14 h-14 lg:w-16 lg:h-16 shrink-0 rounded-full transition-transform active:scale-90 hover:-translate-y-2 duration-200 disabled:opacity-30 disabled:cursor-not-allowed",3,"ring-4","ring-white","disabled","ngClass","click",4,"ngFor","ngForOf"],[1,"flex","gap-4","w-full","justify-center"],[1,"px-6","py-2","bg-red-900/50","border","border-red-500/50","hover:bg-red-800","text-red-200","font-bold","uppercase","text-xs","rounded-lg","transition-colors",3,"click"],[1,"px-12","py-3","bg-gradient-to-r","from-green-600","to-emerald-500","text-white","font-black","uppercase","text-sm","rounded-xl","shadow-lg","hover:brightness-110","disabled:opacity-30","disabled:cursor-not-allowed","transition-all","active:scale-95","border-b-4","border-green-800","active:border-b-0","active:translate-y-1",3,"click","disabled"],[1,"chip-btn","group","relative","w-14","h-14","lg:w-16","lg:h-16","shrink-0","rounded-full","transition-transform","active:scale-90","hover:-translate-y-2","duration-200","disabled:opacity-30","disabled:cursor-not-allowed",3,"click","disabled","ngClass"],[1,"absolute","inset-0","rounded-full","translate-y-1","brightness-75",3,"ngClass"],[1,"absolute","inset-0","rounded-full","flex","items-center","justify-center","border-[3px]","border-dashed","border-white/40","shadow-inner",3,"ngClass"],[1,"font-black","text-[10px]","lg:text-xs","drop-shadow-md","z-10"],[1,"flex","gap-6","animate-fade-in-up","pb-4"],[1,"action-btn","bg-slate-800","hover:bg-slate-700","text-white","border-slate-600",3,"click"],[1,"text-2xl","mb-1"],[1,"text-[10px]","font-black","uppercase","tracking-wider"],[1,"action-btn","bg-emerald-600","hover:bg-emerald-500","text-white","border-emerald-400","shadow-[0_0_20px_rgba(16,185,129,0.4)]",3,"click"],["class","action-btn bg-amber-500 hover:bg-amber-400 text-amber-950 border-amber-300",3,"click",4,"ngIf"],[1,"action-btn","bg-amber-500","hover:bg-amber-400","text-amber-950","border-amber-300",3,"click"],[1,"pb-4"],[1,"px-10","py-3","bg-white","text-slate-900","font-black","text-lg","rounded-xl","hover:scale-105","transition-transform","shadow-xl","active:scale-95",3,"click"],[1,"absolute","right-4","bottom-32","bg-yellow-50","text-slate-900","p-4","rounded-sm","shadow-2xl","rotate-2","w-48","font-mono","text-xs","border","border-slate-300","z-50","animate-fade-up"],[1,"font-bold","border-b","border-slate-400","pb-1","mb-2","flex","justify-between"],[1,"cursor-pointer",3,"click"],[1,"space-y-1","max-h-32","overflow-y-auto"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"border-t","border-slate-400","pt-1","mt-2","font-bold","flex","justify-between"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2),$(3,SQ,3,1,"span",3),v()(),y(4,"div",4),ie(5,"div",5),y(6,"div",6),I(7,"JEUB2"),v()(),y(8,"div",7),ie(9,"div",8),v(),y(10,"div",9),ie(11,"div",10),y(12,"div",11),I(13,"\u{1F9E4}"),v()(),y(14,"div",12)(15,"div",13),$(16,CQ,1,0,"div",14),y(17,"div",15)(18,"span",16),I(19),v(),y(20,"div",17),$(21,TQ,2,2,"span",18),v()(),y(22,"span",19),I(23),Ie(24,"number"),v(),$(25,DQ,2,0,"button",20),v(),y(26,"div",21)(27,"button",22),q("click",function(){return r.openDuelLobby()}),I(28),v(),y(29,"button",23),q("click",function(){return r.toggleStats()}),I(30," \u{1F4DD} "),v()()(),y(31,"div",24)(32,"div",25)(33,"div",26)(34,"span",27),I(35,"Croupier"),v(),y(36,"span",28),I(37),v()(),y(38,"div",29),$(39,RQ,3,3,"div",30),v()(),ie(40,"div",31),y(41,"div",32),$(42,jQ,5,9,"div",33),v()(),$(43,zQ,10,2,"div",34)(44,GQ,16,5,"div",35),y(45,"div",36),$(46,qQ,5,11,"div",37)(47,KQ,8,3,"div",38)(48,QQ,12,1,"div",39)(49,JQ,3,0,"div",40),v(),$(50,XQ,13,6,"div",41),v()),t&2&&(Re("bg-[#0f172a]",!r.isSpotlightMode)("bg-[#05080f]",r.isSpotlightMode),E(3),N("ngForOf",r.tickerMessages),E(5),Re("opacity-0",!r.isSpotlightMode)("opacity-100",r.isSpotlightMode),E(2),Et("transform",r.dealerHandTransform),E(6),N("ngIf",r.isOwner),E(3),ue(r.isOwner?"\u{1F451} PROPRI\xC9TAIRE":"Votre Solde"),E(2),N("ngForOf",r.badges),E(2),ne("",st(24,34,r.currentMoney,"1.0-0")," \u20AC"),E(2),N("ngIf",r.sessionWinnings>1e6&&!r.isOwner),E(2),oE(r.isDuelMode?"bg-purple-600/80 border-purple-400 text-white shadow-purple-500/20":"bg-slate-900/50 border-slate-600 text-slate-400 hover:bg-slate-800"),E(),ne(" ",r.isDuelMode?"\u2694\uFE0F DUEL (ONLINE)":"\u{1F464} SOLO"," "),E(3),Re("blur-sm",r.globalStatus==="RESULT"&&r.winAmount>0),E(2),Re("opacity-0",r.dealerHand.length===0),E(3),N("@scorePop",r.dealerScore),E(),ne(" ",r.dealerScoreDisplay," "),E(2),N("ngForOf",r.dealerHand),E(3),N("ngForOf",r.seats),E(),N("ngIf",r.isLobbyOpen),E(),N("ngIf",r.globalStatus==="RESULT"&&r.winAmount>0),E(2),N("ngForOf",r.flyingChips),E(),N("ngIf",r.globalStatus==="BETTING"),E(),N("ngIf",r.globalStatus==="PLAYING"&&r.activeSeatIndex!==null&&!r.seats[r.activeSeatIndex].isBot),E(),N("ngIf",r.globalStatus==="RESULT"&&r.winAmount===0),E(),N("ngIf",r.showStats))},dependencies:[gi,Kn,kn,fr],styles:[".table-mat[_ngcontent-%COMP%]{background:radial-gradient(circle at 50% 30%,#1e293b,#020617)}.pattern-grid[_ngcontent-%COMP%]{background-image:radial-gradient(#fff 1px,transparent 1px);background-size:10px 10px}.perspective-1000[_ngcontent-%COMP%]{perspective:1000px}.transform-style-3d[_ngcontent-%COMP%]{transform-style:preserve-3d}.backface-hidden[_ngcontent-%COMP%]{backface-visibility:hidden}.rotate-y-180[_ngcontent-%COMP%], .flipper.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.action-btn[_ngcontent-%COMP%]{display:flex;height:6rem;width:6rem;flex-direction:column;align-items:center;justify-content:center;border-radius:1rem;border-bottom-width:4px;--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.action-btn[_ngcontent-%COMP%]:active{--tw-translate-y: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-bottom-width:0px}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.stroke-text[_ngcontent-%COMP%]{-webkit-text-stroke:1px rgba(0,0,0,.5)}.animate-marquee[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_marquee 20s linear infinite}@keyframes _ngcontent-%COMP%_marquee{0%{transform:translate(100%)}to{transform:translate(-100%)}}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.text-shadow-glow[_ngcontent-%COMP%]{text-shadow:0 0 20px rgba(74,222,128,.5)}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.animate-fade-in-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"],data:{animation:[yo("chipsIn",[vo(":enter",[HE(".chip-btn",[Zt({opacity:0,transform:"translateY(50px) scale(0.5)"}),zE(50,[_o("400ms cubic-bezier(0.23, 1, 0.32, 1)",Zt({opacity:1,transform:"translateY(0) scale(1)"}))])])])]),yo("cardDeal",[vo(":enter",[Zt({opacity:0,transform:"translate(200px, -200px) rotate(45deg) scale(0.5)"}),_o("500ms cubic-bezier(0.175, 0.885, 0.32, 1.1)",Zt({opacity:1,transform:"translate(0, 0) rotate(0) scale(1)"}))])]),yo("cardFlip",[Np("face-down",Zt({transform:"rotateY(0)"})),Np("face-up",Zt({transform:"rotateY(180deg)"})),vo("face-down => face-up",[_o("600ms cubic-bezier(0.455, 0.03, 0.515, 0.955)")])]),yo("scorePop",[vo(":increment",[_o("200ms ease-in-out",$E([Zt({transform:"scale(1)",offset:0}),Zt({transform:"scale(1.5)",offset:.5}),Zt({transform:"scale(1)",offset:1})]))])]),yo("modalPop",[vo(":enter",[Zt({opacity:0,transform:"scale(0.8) translateY(20px)"}),_o("0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)",Zt({opacity:1,transform:"scale(1) translateY(0)"}))])])]},changeDetection:0})};var nJ=["hiddenInput"],i2=(n,e)=>[n,e],s2=(n,e,t)=>[n,e,t];function rJ(n,e){if(n&1){let t=ve();y(0,"button",22),q("click",function(i){Y(t);let s=L(2);return i.stopPropagation(),Q(s.drinkCoffee())}),I(1," \u2615 PAUSE "),v()}}function iJ(n,e){n&1&&(y(0,"div",23),I(1,"GEL\xC9"),v())}function sJ(n,e){if(n&1&&(y(0,"div",8)(1,"div",18)(2,"span",19),I(3),Ie(4,"number"),v()(),$(5,rJ,2,0,"button",20)(6,iJ,2,0,"div",21),v()),n&2){let t=L();E(),N("ngClass",gp(8,i2,t.activeTheme.borderClass,t.activeTheme.bgClass)),E(),N("ngClass",t.activeTheme.accentClass),E(),ne("",st(4,5,t.currentWpm,"1.0-0")," WPM"),E(2),N("ngIf",t.coffeeLevel>0&&!t.isCoffeeActive&&t.coffeeAvailable),E(),N("ngIf",t.isCoffeeActive)}}function oJ(n,e){n&1&&(y(0,"span",24),ie(1,"span",25)(2,"span",26),v())}function aJ(n,e){if(n&1&&(y(0,"div",27),I(1),v()),n&2){let t=e.$implicit,r=L();N("ngClass",yp(2,s2,r.activeTheme.borderClass,r.activeTheme.accentClass,r.activeTheme.bgClass)),E(),ne(" ",t," ")}}function cJ(n,e){if(n&1){let t=ve();y(0,"div",34),q("click",function(i){let s=Y(t).$implicit,o=L(2);return i.stopPropagation(),Q(o.startMission(s))}),y(1,"div",35)(2,"span",36),I(3),v(),y(4,"span",37),I(5),v()(),y(6,"h3",38),I(7),v(),y(8,"div",39)(9,"div",40)(10,"span",41),I(11,"Gain"),v(),y(12,"span",42),I(13),Ie(14,"number"),v()(),y(15,"div",43)(16,"span",41),I(17,"Temps"),v(),y(18,"span",44),I(19),v()()()()}if(n&2){let t=e.$implicit,r=L(2);N("ngClass",yp(12,s2,r.activeTheme.borderClass,r.activeTheme.bgClass,r.getMissionClass(t.difficulty))),E(3),ue(r.getIcon(t.difficulty)),E(),N("ngClass",r.getDifficultyClass(t.difficulty)),E(),ue(t.difficulty),E(2),ue(t.title),E(),N("ngClass",r.activeTheme.borderClass),E(4),N("ngClass",r.activeTheme.accentClass),E(),ne("",st(14,9,r.calculateReward(t),"1.0-0")," \u20AC"),E(6),ne("",t.timeLimit,"s")}}function lJ(n,e){if(n&1&&(y(0,"div",28)(1,"div",29)(2,"h2",30),I(3,"\u{1F4DC} Vos Contrats"),v(),y(4,"p",31),I(5,"Vos employ\xE9s g\xE8rent leurs propres projets en autonomie."),v(),y(6,"div",32),$(7,cJ,20,16,"div",33),v()()()),n&2){let t=L();E(7),N("ngForOf",t.availableMissions)}}function uJ(n,e){if(n&1&&ie(0,"span",62),n&2){let t=L(4);N("ngClass",t.activeTheme.cursorClass)}}function dJ(n,e){if(n&1&&(y(0,"span"),$(1,uJ,1,1,"span",60),y(2,"span",61),I(3),v()()),n&2){let t=e.$implicit,r=L(3);E(),N("ngIf",t.index===r.userInput.length),E(),N("ngClass",r.getCharClass(t.index,t.value)),E(),ue(t.index<r.userInput.length?r.userInput[t.index]:t.value)}}function hJ(n,e){if(n&1&&(y(0,"span",58),$(1,dJ,4,3,"span",59),v()),n&2){let t=e.$implicit;Re("whitespace-nowrap",!t.isSpace),E(),N("ngForOf",t.chars)}}function fJ(n,e){n&1&&(y(0,"div",63),I(1,"CORRIGEZ !"),v())}function pJ(n,e){if(n&1){let t=ve();y(0,"div",45),ie(1,"div",46),y(2,"div",47,0)(4,"div",48)(5,"div",49),I(6),v(),y(7,"div",50),I(8,"COMBO"),v()(),y(9,"div",51)(10,"div",52),$(11,hJ,2,3,"span",53),v(),$(12,fJ,2,0,"div",54),v(),y(13,"div",55)(14,"div",56),I(15),Ie(16,"number"),v()(),y(17,"input",57,1),q("input",function(i){Y(t);let s=L();return Q(s.onInput(i))})("blur",function(){Y(t);let i=L();return Q(i.focusInput())}),v()()()}if(n&2){let t=L();E(),N("ngClass",t.activeTheme.bgClass),E(3),Re("opacity-0",t.currentCombo<2),E(),Re("from-amber-400",t.currentCombo>=50),E(),ne("x",t.currentCombo),E(3),Re("shake-anim",t.hasError),E(2),N("ngForOf",t.currentDisplayTokens),E(),N("ngIf",t.isFinishedButWrong),E(2),Re("text-red-500",t.timeLeft<=5),E(),ne("",st(16,13,t.timeLeft,"1.1-1"),"s")}}function mJ(n,e){if(n&1&&(y(0,"div",84),I(1),v()),n&2){let t=L(2);E(),ne("",t.TEAM_BUILDING_COST,"\u20AC \u2022 30s \u2022 Boost x2.5")}}function gJ(n,e){n&1&&(y(0,"div",85)(1,"div",86),I(2,"\u{1F47B}"),v(),y(3,"div"),I(4,"Aucun employ\xE9."),v()())}function yJ(n,e){n&1&&(y(0,"div",100),I(1,"En mission..."),v())}function _J(n,e){n&1&&(y(0,"div",101),I(1,"Libre"),v())}function vJ(n,e){n&1&&(y(0,"div",102),I(1,"PAUSE"),v())}function EJ(n,e){n&1&&(y(0,"div",103),I(1,"ACTIF"),v())}function bJ(n,e){if(n&1&&(y(0,"div",104),ie(1,"div",105),v()),n&2){let t=e.ngIf,r=L(3);E(),Et("width",t.targetText&&t.targetText.length>0?t.typedText.length/t.targetText.length*100:0,"%"),N("ngClass",r.isTeamBuildingActive?"bg-orange-500":"bg-blue-500")}}function IJ(n,e){if(n&1){let t=ve();y(0,"div",87)(1,"div",88)(2,"div",89)(3,"span",36),I(4),v(),y(5,"div")(6,"div",90),I(7),v(),$(8,yJ,2,0,"div",91)(9,_J,2,0,"div",92),v()(),$(10,vJ,2,0,"div",93)(11,EJ,2,0,"div",94),v(),$(12,bJ,2,3,"div",95),y(13,"div",96)(14,"button",97),q("click",function(){let i=Y(t).$implicit,s=L(2);return Q(s.watchEmployee(i))}),I(15,"\u{1F441}\uFE0F VOIR \xC9CRAN"),v(),y(16,"button",98),q("click",function(){let i=Y(t).$implicit,s=L(2);return Q(s.trainEmployee(i))}),y(17,"span"),I(18,"FORMATION"),v(),y(19,"span"),I(20),v()(),y(21,"button",99),q("click",function(){let i=Y(t).$implicit,s=L(2);return Q(s.togglePause(i))}),I(22),v()()()}if(n&2){let t,r,i=e.$implicit,s=e.index,o=L(2);Re("opacity-50",i.isPaused),E(4),ue(i.role==="DEV_JUNIOR"?"\u{1F468}\u200D\u{1F4BB}":"\u{1F9D9}\u200D\u2642\uFE0F"),E(3),ne("Dev #",s+1),E(),N("ngIf",(t=o.getWorkerState(i.id))==null?null:t.currentMission),E(),N("ngIf",!((r=o.getWorkerState(i.id))!=null&&r.currentMission)),E(),N("ngIf",i.isPaused),E(),N("ngIf",!i.isPaused),E(),N("ngIf",o.getWorkerState(i.id)),E(4),N("disabled",o.currentMoney<o.getTrainCost(i)),E(4),ne("",o.getTrainCost(i),"\u20AC"),E(2),ue(i.isPaused?"REPRENDRE":"METTRE EN PAUSE")}}function wJ(n,e){if(n&1){let t=ve();y(0,"div",64),q("click",function(i){return Y(t),Q(i.stopPropagation())}),y(1,"div",65)(2,"div",66)(3,"h3",67),I(4,"\u{1F465} GESTION \xC9QUIPE"),v(),y(5,"button",68),q("click",function(){Y(t);let i=L();return Q(i.toggleStaff())}),I(6,"\u2715"),v()(),y(7,"div",69)(8,"div",70)(9,"button",71),q("click",function(){Y(t);let i=L();return Q(i.startTeamBuilding())}),y(10,"span",36),I(11,"\u{1F355}"),v(),y(12,"div",72)(13,"div"),I(14),v(),$(15,mJ,2,1,"div",73),v()(),y(16,"div",74)(17,"div",75),I(18,"Stagiaire"),v(),y(19,"div",76),I(20,"Petits contrats."),v(),y(21,"button",77),q("click",function(){Y(t);let i=L();return Q(i.hire(0))}),I(22),v()(),y(23,"div",78)(24,"div",75),I(25,"Senior"),v(),y(26,"div",76),I(27,"Gros contrats."),v(),y(28,"button",79),q("click",function(){Y(t);let i=L();return Q(i.hire(1))}),I(29),v()()(),y(30,"div",80),$(31,gJ,5,0,"div",81),y(32,"div",82),$(33,IJ,23,12,"div",83),v()()()()()}if(n&2){let t=L();E(9),N("disabled",t.currentMoney<t.TEAM_BUILDING_COST||t.isTeamBuildingActive)("ngClass",t.isTeamBuildingActive?"bg-green-600 text-white animate-pulse":"bg-gradient-to-r from-orange-600 to-red-600 text-white hover:brightness-110"),E(5),ue(t.isTeamBuildingActive?"PARTY EN COURS !":"PIZZA PARTY"),E(),N("ngIf",!t.isTeamBuildingActive),E(6),N("disabled",!t.canHire(0)),E(),ne("",t.getHireCost(0)," \u20AC"),E(6),N("disabled",!t.canHire(1)),E(),ne("",t.getHireCost(1)," \u20AC"),E(2),N("ngIf",t.employees.length===0),E(2),N("ngForOf",t.employees)}}function SJ(n,e){if(n&1&&(y(0,"div",118)(1,"span"),I(2,"Bonus \xC9cran"),v(),y(3,"span"),I(4),Ie(5,"number"),v()()),n&2){let t=L(3);E(4),ne("+",st(5,1,t.getScreenBonus((t.activeMission==null?null:t.activeMission.reward)||0),"1.0-0")," \u20AC")}}function CJ(n,e){if(n&1&&(y(0,"div",112)(1,"div",96)(2,"div",113)(3,"span"),I(4,"Base"),v(),y(5,"span"),I(6),v()(),y(7,"div",114)(8,"span"),I(9,"Combo"),v(),y(10,"span"),I(11),v()(),$(12,SJ,6,4,"div",115),ie(13,"div",116),y(14,"div",117)(15,"span"),I(16,"TOTAL"),v(),y(17,"span"),I(18),Ie(19,"number"),v()()()()),n&2){let t=L(2);E(6),ne("",t.activeMission==null?null:t.activeMission.reward," \u20AC"),E(5),ne("+",t.maxComboReached," \u20AC"),E(),N("ngIf",t.screenLevel>0),E(6),ne("+",st(19,4,t.lastReward,"1.0-0")," \u20AC")}}function TJ(n,e){if(n&1){let t=ve();y(0,"div",106),q("click",function(i){return Y(t),Q(i.stopPropagation())}),y(1,"div",107)(2,"div",108),I(3),v(),y(4,"h3",109),I(5),v(),$(6,CJ,20,7,"div",110),y(7,"button",111),q("click",function(){Y(t);let i=L();return Q(i.closeResult())}),I(8,"Continuer \u27A1\uFE0F"),v()()()}if(n&2){let t=L();E(3),ue(t.missionResult==="SUCCESS"?"\u{1F3C6}":"\u{1F480}"),E(),Re("text-green-400",t.missionResult==="SUCCESS")("text-red-400",t.missionResult==="FAIL"),E(),ue(t.missionResult==="SUCCESS"?"CONTRAT REMPLI":"\xC9CHEC"),E(),N("ngIf",t.missionResult==="SUCCESS")}}var by=class n{constructor(e,t,r){this.gameStateService=e;this.soundService=t;this.cdr=r}hiddenInput;availableMissions=[];activeMission=null;currentLineIndex=0;currentTargetLine="";currentDisplayTokens=[];userInput="";timeLeft=0;timerInterval;missionResult=null;lastReward=0;hasError=!1;currentCombo=0;maxComboReached=0;startTime=0;endTime=0;totalCharsTyped=0;isShopOpen=!1;isStaffOpen=!1;chairLevel=0;screenLevel=0;coffeeLevel=0;pcLevel=0;isCoffeeActive=!1;coffeeAvailable=!0;currentMoney=0;contractsCompleted=0;employees=[];workerStates={};workerInterval;notifications=[];watchedEmployee=null;activeTheme=$d[0];isTeamBuildingActive=!1;teamBuildingEndTime=0;TEAM_BUILDING_COST=2e3;TEAM_BUILDING_DURATION=3e4;WORDS_EASY=["chat","chien","ami","pain","eau","mer","ciel","mur","sac","bus","lit","bol","the","sel","coq","or","loi","nez","vis","rue","pin","pot","jeu","gaz","main","pied","joie","papa","cafe"];WORDS_HARD=["voiture","maison","enfant","ecole","manger","dormir","prendre","parler","soleil","jardin","fleur","oiseau","pomme","table","chaise","livre","crayon","porte","fenetre","arbres","nuage","pluie","neige","route","ville","famille","musique","bonheur","sourire","liberte","courage","vitesse"];WORDS_HACKER=["mainframe","firewall","bypass","encrypt","socket","buffer","overflow","inject","root","sudo","access","denied","proxy","daemon","kernel","panic","matrix","cyber","secure","token"];get isFinishedButWrong(){return this.userInput.length===this.currentTargetLine.length&&this.userInput!==this.currentTargetLine}get currentWpm(){if(!this.startTime)return 0;let t=((this.endTime||Date.now())-this.startTime)/6e4;return t<.001?0:Math.floor(this.totalCharsTyped/5/t)}ngOnInit(){this.gameStateService.gameState$.subscribe(e=>{if(this.currentMoney=e.money,e.freelanceUpgrades){this.chairLevel=e.freelanceUpgrades.chairLevel,this.screenLevel=e.freelanceUpgrades.screenLevel,this.coffeeLevel=e.freelanceUpgrades.coffeeLevel,this.pcLevel=e.freelanceUpgrades.pcLevel,this.contractsCompleted=e.freelanceUpgrades.contractsCompleted||0;let r=e.freelanceUpgrades.activeThemeId,i=$d.find(s=>s.id===r);i&&(this.activeTheme=i)}let t=e.companies.find(r=>r.id==="2");t&&(this.employees=t.employees,this.employees.forEach(r=>{this.workerStates[r.id]||(this.workerStates[r.id]={currentMission:null,targetText:"",typedText:"",progress:0,status:"IDLE",cooldown:0})})),this.cdr.markForCheck()}),this.generateMissions(),this.startWorkerSimulation()}ngOnDestroy(){this.stopTimer(),this.stopWatching(),this.workerInterval&&clearInterval(this.workerInterval)}focusInput(){!this.isShopOpen&&!this.isStaffOpen&&!this.watchedEmployee&&!this.missionResult&&this.activeMission&&setTimeout(()=>{this.hiddenInput&&this.hiddenInput.nativeElement.focus()},0)}toggleShop(){this.isShopOpen=!this.isShopOpen,this.isStaffOpen=!1,this.isShopOpen||this.focusInput(),this.cdr.markForCheck()}toggleStaff(){this.isStaffOpen=!this.isStaffOpen,this.isShopOpen=!1,this.cdr.markForCheck()}startTeamBuilding(){this.currentMoney>=this.TEAM_BUILDING_COST&&!this.isTeamBuildingActive&&(this.gameStateService.addMoney(-this.TEAM_BUILDING_COST),this.isTeamBuildingActive=!0,this.teamBuildingEndTime=Date.now()+this.TEAM_BUILDING_DURATION,this.soundService.playSuccess(),this.showNotification("\u{1F355} PIZZA PARTY ACTIV\xC9E ! (+150% Vitesse)"),setTimeout(()=>{this.isTeamBuildingActive=!1,this.showNotification("Fin de la Pizza Party..."),this.cdr.markForCheck()},this.TEAM_BUILDING_DURATION))}getCost(e){return{CHAIR:2e3,SCREEN:5e3,COFFEE:1500,PC:2e4}[e]||0}canBuy(e){return this.currentMoney>=this.getCost(e)}buyItem(e){this.gameStateService.buySetupUpgrade(e,this.getCost(e))}getHireCost(e){let t=e===0?"DEV_JUNIOR":"DEV_SENIOR";return this.gameStateService.getNextHireCost("2",t)}canHire(e){return this.currentMoney>=this.getHireCost(e)}hire(e){let t=e===0?"DEV_JUNIOR":"DEV_SENIOR";this.gameStateService.hireEmployee("2",t)}getTrainCost(e){return Math.floor(500*Math.pow(1.5,e.efficiency))}trainEmployee(e){this.gameStateService.upgradeEmployeeSetup("2",e.id,this.getTrainCost(e))}togglePause(e){this.gameStateService.toggleEmployeePause("2",e.id)}drinkCoffee(){this.isCoffeeActive||!this.coffeeAvailable||(this.isCoffeeActive=!0,this.coffeeAvailable=!1,this.soundService.playPop(),setTimeout(()=>{this.isCoffeeActive=!1,this.cdr.markForCheck()},5e3))}startWorkerSimulation(){this.workerInterval&&clearInterval(this.workerInterval),this.workerInterval=setInterval(()=>{this.employees.forEach(e=>{if(e.isPaused)return;let t=this.workerStates[e.id];if(t){if(t.status==="IDLE")if(t.cooldown>0)t.cooldown-=this.isTeamBuildingActive?.3:.1;else{let r=e.role==="DEV_JUNIOR"?Math.random()>.7?"MEDIUM":"EASY":"HARD",i=this.createMission(0,r);t.currentMission=i,t.targetText=i.lines[0],t.typedText="",t.status="WORKING"}else if(t.status==="WORKING"&&t.targetText){let r=e.role==="DEV_SENIOR"?.3:.1;if(r+=e.efficiency*.05,this.isTeamBuildingActive&&(r*=2.5),Math.random()<r&&(t.typedText+=t.targetText[t.typedText.length],t.typedText.length>=t.targetText.length)){let i=Math.floor(t.currentMission.reward*.2);this.gameStateService.addMoney(i),this.showNotification(`+${i}\u20AC (${e.role==="DEV_JUNIOR"?"Jr":"Sr"})`),t.status="IDLE",t.currentMission=null,t.cooldown=3}}}}),this.cdr.markForCheck()},100)}getWorkerState(e){return this.workerStates[e]}showNotification(e){this.notifications.push(e),setTimeout(()=>{this.notifications.shift(),this.cdr.markForCheck()},2e3)}watchEmployee(e){this.watchedEmployee=e,this.isStaffOpen=!1,this.cdr.markForCheck()}stopWatching(){this.watchedEmployee=null,this.isStaffOpen=!0,this.cdr.markForCheck()}generateMissions(){this.availableMissions=[];let e=.05+this.pcLevel*.02,t=this.pcLevel>0?.1:0;for(let r=0;r<3;r++){let i=Math.random();if(i<e)this.availableMissions.push(this.createMission(r,"BOSS"));else if(i<e+t)this.availableMissions.push(this.createMission(r,"HACKER"));else{let s=Math.random()>.6?"HARD":Math.random()>.3?"MEDIUM":"EASY";this.availableMissions.push(this.createMission(r,s))}}}createMission(e,t){let r=30,i=100,s=2,o=5;return t==="BOSS"?(r=45,i=5e3,s=5,o=10):t==="HACKER"?(r=20,i=2e3,s=4,o=6):t==="EASY"?(r=20,i=150,s=2,o=4):t==="MEDIUM"?(r=35,i=400,s=3,o=6):(r=50,i=1e3,s=4,o=8),{id:e,title:t==="BOSS"?"URGENCE":t==="HACKER"?"HACKING":"Mission",description:t==="HACKER"?"Piratage...":"Tapez vite.",difficulty:t,reward:i,timeLimit:r,lines:this.generateRandomLines(s,o,t)}}generateRandomLines(e,t,r){let i=[],s=r==="HACKER"?this.WORDS_HACKER:r==="HARD"||r==="BOSS"?this.WORDS_HARD:this.WORDS_EASY;for(let o=0;o<e;o++){let a=[];for(let c=0;c<t;c++)a.push(s[Math.floor(Math.random()*s.length)]);i.push(a.join(" "))}return i}prepareDisplayTokens(e){let t=[],r=0;return e.split(/(\s+)/).forEach(s=>{if(s.length===0)return;let o=[];for(let a=0;a<s.length;a++)o.push({value:s[a],index:r}),r++;t.push({isSpace:/^\s+$/.test(s),chars:o})}),t}startMission(e){this.activeMission=e,this.currentLineIndex=0,this.loadLine(e.lines[0]),this.userInput="",this.timeLeft=e.timeLimit,this.missionResult=null,this.currentCombo=0,this.maxComboReached=0,this.totalCharsTyped=0,this.startTime=Date.now(),this.endTime=0,this.isCoffeeActive=!1,this.coffeeAvailable=!0,this.startTimer(),this.soundService.playPop(),setTimeout(()=>this.focusInput(),100),this.cdr.markForCheck()}loadLine(e){this.currentTargetLine=e,this.currentDisplayTokens=this.prepareDisplayTokens(e),this.userInput="",this.hiddenInput&&(this.hiddenInput.nativeElement.value="")}startTimer(){this.stopTimer();let e=Date.now();this.timerInterval=setInterval(()=>{if(this.isCoffeeActive){e=Date.now();return}let t=Date.now(),r=(t-e)/1e3;e=t;let i=1-this.chairLevel*.2;this.timeLeft-=r*i,this.timeLeft<=0&&(this.timeLeft=0,this.endMission(!1)),this.cdr.markForCheck()},100)}stopTimer(){this.timerInterval&&clearInterval(this.timerInterval)}handleKeyboard(e){!this.activeMission||this.missionResult||this.isShopOpen||this.isStaffOpen||this.watchedEmployee||this.focusInput()}onInput(e){if(!this.activeMission||this.missionResult)return;let t=e.target.value;t.length>this.currentTargetLine.length?(this.userInput=t.slice(0,this.currentTargetLine.length),e.target.value=this.userInput):this.userInput=t,this.userInput.length>this.totalCharsTyped&&(this.userInput[this.userInput.length-1]===" "?this.soundService.playSpace():this.soundService.playRandomKey(),this.checkInput()),this.totalCharsTyped=this.userInput.length,this.cdr.markForCheck()}checkInput(){let e=this.userInput.length-1;e<0||(this.userInput[e]===this.currentTargetLine[e]?(this.currentCombo++,this.currentCombo>this.maxComboReached&&(this.maxComboReached=this.currentCombo)):(this.currentCombo=0,this.triggerError()),this.userInput===this.currentTargetLine&&(this.soundService.playSuccess(),setTimeout(()=>this.nextLine(),150)))}triggerError(){this.hasError=!0,this.soundService.playError(),setTimeout(()=>{this.hasError=!1,this.cdr.markForCheck()},300)}nextLine(){this.currentLineIndex++,this.activeMission&&this.currentLineIndex>=this.activeMission.lines.length?this.endMission(!0):this.activeMission&&(this.loadLine(this.activeMission.lines[this.currentLineIndex]),this.cdr.markForCheck())}calculateReward(e){let t=e.reward*(this.screenLevel*.5);return e.reward+t}getScreenBonus(e){return e*(this.screenLevel*.5)}endMission(e){if(this.stopTimer(),this.endTime=Date.now(),this.missionResult=e?"SUCCESS":"FAIL",e&&this.activeMission){let t=this.calculateReward(this.activeMission),r=this.maxComboReached;this.lastReward=t+r,this.gameStateService.addMoney(this.lastReward),this.gameStateService.incrementContractsCompleted(),this.activeMission.difficulty==="BOSS"&&this.gameStateService.incrementBossBeaten(),this.soundService.playSuccess()}else this.soundService.playError();this.cdr.markForCheck()}closeResult(){this.missionResult=null,this.activeMission=null,this.generateMissions(),this.cdr.markForCheck()}getCharClass(e,t){if(e>=this.userInput.length)return this.activeTheme.textClass+" opacity-40";let r=this.userInput[e];return r===t?this.activeTheme.successClass:r===" "?"bg-red-500/50 text-white":"text-red-500 font-bold"}getIcon(e){return e==="BOSS"?"\u{1F479}":e==="HACKER"?"\u{1F4BB}":e==="EASY"?"\u{1F7E2}":e==="MEDIUM"?"\u{1F7E0}":"\u{1F534}"}getDifficultyClass(e){return e==="HACKER"?"border-green-500 text-green-500 bg-green-900/20":e==="BOSS"?"border-red-500 text-red-500 bg-red-900/20 animate-pulse":"border-slate-500 text-slate-500"}getMissionClass(e){return e==="HACKER"?"border-green-500 bg-green-900/10":e==="BOSS"?"border-red-500 bg-red-900/10":"border-slate-700 bg-slate-800"}static \u0275fac=function(t){return new(t||n)(se(tn),se(Tn),se(kt))};static \u0275cmp=mt({type:n,selectors:[["app-freelance-dev-game"]],viewQuery:function(t,r){if(t&1&&Ga(nJ,5),t&2){let i;uo(i=ho())&&(r.hiddenInput=i.first)}},hostBindings:function(t,r){t&1&&q("keydown",function(s){return r.handleKeyboard(s)},eu)},standalone:!1,decls:22,vars:17,consts:[["gameZone",""],["hiddenInput",""],[1,"h-full","font-sans","flex","flex-col","relative","overflow-hidden","select-none","transition-colors","duration-500",3,"click","ngClass"],[1,"p-4","border-b","flex","justify-between","items-center","shadow-md","z-10","relative",3,"ngClass"],[1,"flex","items-center","gap-4"],[1,"w-3","h-3","rounded-full","bg-red-500","animate-pulse"],[1,"text-sm","font-bold","opacity-50","hidden","sm:block"],["class","flex items-center gap-3",4,"ngIf"],[1,"flex","items-center","gap-3"],[1,"px-3","py-1","bg-blue-600","hover:bg-blue-500","text-white","text-xs","font-bold","rounded","shadow","flex","items-center","gap-2","transition-all","relative",3,"click"],["class","absolute -top-1 -right-1 flex h-2 w-2",4,"ngIf"],[1,"font-bold","font-mono","text-lg",3,"ngClass"],[1,"absolute","top-20","right-4","z-20","pointer-events-none","flex","flex-col","gap-2","items-end"],["class","backdrop-blur px-3 py-1 rounded border text-xs shadow-lg animate-fade-out-up",3,"ngClass",4,"ngFor","ngForOf"],["class","flex-1 p-8 overflow-y-auto custom-scroll",4,"ngIf"],["class","flex-1 flex flex-col relative transition-colors duration-500",4,"ngIf"],["class","absolute inset-0 bg-slate-950/95 z-50 flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-slate-900/90 z-50 flex items-center justify-center backdrop-blur-md animate-fade-in",3,"click",4,"ngIf"],[1,"px-3","py-1","rounded-full","border","text-xs","font-bold","flex","gap-2",3,"ngClass"],[3,"ngClass"],["class","bg-amber-700 hover:bg-amber-600 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 transition-all animate-bounce",3,"click",4,"ngIf"],["class","text-amber-400 text-xs font-black animate-pulse",4,"ngIf"],[1,"bg-amber-700","hover:bg-amber-600","text-white","px-3","py-1","rounded-full","text-xs","font-bold","flex","items-center","gap-1","transition-all","animate-bounce",3,"click"],[1,"text-amber-400","text-xs","font-black","animate-pulse"],[1,"absolute","-top-1","-right-1","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-green-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-green-500"],[1,"backdrop-blur","px-3","py-1","rounded","border","text-xs","shadow-lg","animate-fade-out-up",3,"ngClass"],[1,"flex-1","p-8","overflow-y-auto","custom-scroll"],[1,"max-w-4xl","mx-auto"],[1,"text-3xl","font-black","mb-2","tracking-tight","flex","items-center","gap-3"],[1,"opacity-60","mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","group relative border rounded-xl p-5 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-xl",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"group","relative","border","rounded-xl","p-5","cursor-pointer","transition-all","hover:-translate-y-1","hover:shadow-xl",3,"click","ngClass"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-2xl"],[1,"px-2","py-1","rounded","text-[10px]","font-bold","uppercase","tracking-wider","border",3,"ngClass"],[1,"font-bold","text-lg","mb-1","transition-colors","group-hover:opacity-80"],[1,"mt-4","pt-4","border-t","flex","justify-between","items-center",3,"ngClass"],[1,"flex","flex-col"],[1,"text-[10px]","opacity-60","uppercase"],[1,"font-bold",3,"ngClass"],[1,"flex","flex-col","items-end"],[1,"font-bold"],[1,"flex-1","flex","flex-col","relative","transition-colors","duration-500"],[1,"absolute","inset-0","opacity-10","pointer-events-none",3,"ngClass"],[1,"flex-1","p-8","flex","flex-col","justify-center","items-center","relative","overflow-hidden"],[1,"absolute","top-10","right-10","flex","flex-col","items-end","transition-all","duration-200","z-30"],[1,"text-6xl","font-black","italic","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-b","from-white","to-slate-400"],[1,"text-xs","font-bold","opacity-50","uppercase","tracking-widest"],[1,"relative","z-20","w-full","max-w-5xl","text-center","leading-relaxed","select-none","cursor-text","transition-transform","duration-100"],[1,"text-4xl","font-sans","font-medium","tracking-normal","opacity-80"],["class","inline-block",3,"whitespace-nowrap",4,"ngFor","ngForOf"],["class","mt-8 text-red-500 font-bold text-xl animate-bounce",4,"ngIf"],[1,"absolute","bottom-8","flex","flex-col","items-center","z-30"],[1,"text-5xl","font-mono","font-black","transition-colors","duration-300","drop-shadow-lg"],["type","text","autofocus","","autocomplete","off","spellcheck","false",1,"absolute","opacity-0","top-0","left-0","h-full","w-full","cursor-text",3,"input","blur"],[1,"inline-block"],[4,"ngFor","ngForOf"],["class","inline-block w-[3px] h-8 align-middle animate-pulse -mb-1 mr-[1px] rounded-full shadow-[0_0_15px_rgba(59,130,246,1)]",3,"ngClass",4,"ngIf"],[1,"transition-all","duration-150","border-b-2","border-transparent","inline-block","min-w-[12px]","whitespace-pre","text-center",3,"ngClass"],[1,"inline-block","w-[3px]","h-8","align-middle","animate-pulse","-mb-1","mr-[1px]","rounded-full","shadow-[0_0_15px_rgba(59,130,246,1)]",3,"ngClass"],[1,"mt-8","text-red-500","font-bold","text-xl","animate-bounce"],[1,"absolute","inset-0","bg-slate-950/95","z-50","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-4xl","h-[85%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-900"],[1,"font-black","text-white","text-2xl"],[1,"w-8","h-8","rounded-full","bg-slate-800","hover:bg-slate-700","text-slate-400","flex","items-center","justify-center","transition-colors",3,"click"],[1,"flex-1","flex","overflow-hidden"],[1,"w-1/3","bg-slate-950","p-4","border-r","border-slate-800","flex","flex-col","gap-4"],[1,"w-full","py-4","rounded-xl","font-black","text-sm","uppercase","tracking-wider","shadow-lg","flex","flex-col","items-center","justify-center","gap-2","transition-all","transform","active:scale-95","border","border-white/10",3,"click","disabled","ngClass"],[1,"text-center","leading-tight"],["class","text-[10px] opacity-80 font-normal mt-1",4,"ngIf"],[1,"bg-slate-900","p-3","rounded","border","border-slate-800","hover:border-blue-500","transition-colors","mt-2"],[1,"font-bold","text-white"],[1,"text-xs","text-slate-400","mb-2"],[1,"w-full","py-2","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-800","text-white","text-xs","font-bold","rounded",3,"click","disabled"],[1,"bg-slate-900","p-3","rounded","border","border-slate-800","hover:border-purple-500","transition-colors"],[1,"w-full","py-2","bg-purple-600","hover:bg-purple-500","disabled:bg-slate-800","text-white","text-xs","font-bold","rounded",3,"click","disabled"],[1,"flex-1","p-6","bg-slate-900","overflow-y-auto","custom-scroll"],["class","h-full flex flex-col items-center justify-center text-slate-600",4,"ngIf"],[1,"grid","grid-cols-2","gap-4"],["class","bg-slate-800 p-3 rounded-lg border border-slate-700 relative",3,"opacity-50",4,"ngFor","ngForOf"],[1,"text-[10px]","opacity-80","font-normal","mt-1"],[1,"h-full","flex","flex-col","items-center","justify-center","text-slate-600"],[1,"text-4xl","mb-2"],[1,"bg-slate-800","p-3","rounded-lg","border","border-slate-700","relative"],[1,"flex","justify-between","items-start","mb-2"],[1,"flex","items-center","gap-2"],[1,"font-bold","text-white","text-sm"],["class","text-[10px] text-slate-400",4,"ngIf"],["class","text-[10px] text-slate-600",4,"ngIf"],["class","text-[10px] bg-red-900 text-red-300 px-2 py-0.5 rounded",4,"ngIf"],["class","text-[10px] bg-green-900 text-green-300 px-2 py-0.5 rounded",4,"ngIf"],["class","h-1 w-full bg-black rounded-full mb-2 overflow-hidden",4,"ngIf"],[1,"flex","flex-col","gap-2"],[1,"w-full","py-1.5","bg-slate-700","hover:bg-slate-600","text-white","text-[10px]","font-bold","rounded","border","border-slate-600","flex","items-center","justify-center","gap-2",3,"click"],[1,"w-full","py-1.5","bg-green-700","hover:bg-green-600","disabled:bg-slate-700","text-white","text-[10px]","font-bold","rounded","flex","justify-between","px-2",3,"click","disabled"],[1,"w-full","py-1.5","bg-slate-700","hover:bg-slate-600","text-white","text-[10px]","font-bold","rounded",3,"click"],[1,"text-[10px]","text-slate-400"],[1,"text-[10px]","text-slate-600"],[1,"text-[10px]","bg-red-900","text-red-300","px-2","py-0.5","rounded"],[1,"text-[10px]","bg-green-900","text-green-300","px-2","py-0.5","rounded"],[1,"h-1","w-full","bg-black","rounded-full","mb-2","overflow-hidden"],[1,"h-full","transition-all","duration-300",3,"ngClass"],[1,"absolute","inset-0","bg-slate-900/90","z-50","flex","items-center","justify-center","backdrop-blur-md","animate-fade-in",3,"click"],[1,"bg-slate-800","p-8","rounded-2xl","border-2","shadow-2xl","max-w-sm","w-full","text-center"],[1,"text-6xl","mb-4"],[1,"text-2xl","font-black","uppercase","mb-6"],["class","bg-green-900/20 p-4 rounded-xl mb-6 border border-green-500/30 w-full",4,"ngIf"],[1,"w-full","py-4","rounded-xl","font-bold","uppercase","tracking-wider","transition-all","shadow-lg","active:scale-95","bg-slate-700","hover:bg-slate-600","text-white",3,"click"],[1,"bg-green-900/20","p-4","rounded-xl","mb-6","border","border-green-500/30","w-full"],[1,"flex","justify-between","items-center","text-sm","text-green-200/70"],[1,"flex","justify-between","items-center","text-sm","text-amber-400","font-bold"],["class","flex justify-between items-center text-sm text-purple-400 font-bold",4,"ngIf"],[1,"h-px","bg-green-500/30","my-1"],[1,"flex","justify-between","items-center","text-2xl","font-black","text-green-400"],[1,"flex","justify-between","items-center","text-sm","text-purple-400","font-bold"]],template:function(t,r){t&1&&(y(0,"div",2),q("click",function(){return r.focusInput()}),y(1,"div",3)(2,"div",4),ie(3,"div",5),y(4,"span",6),I(5,"FreelanceOS v28"),v(),$(6,sJ,7,11,"div",7),v(),y(7,"div",8)(8,"button",9),q("click",function(s){return s.stopPropagation(),r.toggleStaff()}),y(9,"span"),I(10,"\u{1F465}"),v(),I(11," \xC9QUIPE "),$(12,oJ,3,0,"span",10),v(),y(13,"div",11),I(14),Ie(15,"number"),v()()(),y(16,"div",12),$(17,aJ,2,6,"div",13),v(),$(18,lJ,8,1,"div",14)(19,pJ,19,16,"div",15)(20,wJ,34,10,"div",16)(21,TJ,9,7,"div",17),v()),t&2&&(N("ngClass",gp(14,i2,r.activeTheme.bgClass,r.activeTheme.textClass)),E(),N("ngClass",r.activeTheme.borderClass),E(5),N("ngIf",r.activeMission),E(6),N("ngIf",r.employees.length>0),E(),N("ngClass",r.activeTheme.accentClass),E(),ne(" ",st(15,11,r.currentMoney,"1.0-0")," \u20AC "),E(3),N("ngForOf",r.notifications),E(),N("ngIf",!r.activeMission),E(),N("ngIf",r.activeMission),E(),N("ngIf",r.isStaffOpen),E(),N("ngIf",r.missionResult))},dependencies:[gi,Kn,kn,fr],styles:[".custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:3px}.shake-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .2s cubic-bezier(.36,.07,.19,.97) both}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-2px,0,0)}20%,80%{transform:translate3d(4px,0,0)}40%,60%{transform:translate3d(6px,0,0)}}.neon-glow[_ngcontent-%COMP%]{color:#4ade80;text-shadow:0 0 5px #4ade80,0 0 10px #4ade80;font-weight:900;transform:scale(1.1)}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.animate-fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp 2s ease-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}"],changeDetection:0})};var f2=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(se(fi),se(Gt))};static \u0275dir=Ot({type:n})}return n})(),AJ=(()=>{class n extends f2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=oo(n)))(i||n)}})();static \u0275dir=Ot({type:n,features:[ds]})}return n})(),p2=new K("");var xJ={provide:p2,useExisting:ns(()=>Ty),multi:!0};function RJ(){let n=Rn()?Rn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var kJ=new K(""),Ty=(()=>{class n extends f2{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!RJ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(se(fi),se(Gt),se(kJ,8))};static \u0275dir=Ot({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&q("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[hs([xJ]),ds]})}return n})();var PJ=new K(""),NJ=new K("");function m2(n){return n!=null}function g2(n){return pi(n)?je(n):n}function y2(n){let e={};return n.forEach(t=>{e=t!=null?F(F({},e),t):e}),Object.keys(e).length===0?null:e}function _2(n,e){return e.map(t=>t(n))}function MJ(n){return!n.validate}function v2(n){return n.map(e=>MJ(e)?e:t=>e.validate(t))}function OJ(n){if(!n)return null;let e=n.filter(m2);return e.length==0?null:function(t){return y2(_2(t,e))}}function E2(n){return n!=null?OJ(v2(n)):null}function FJ(n){if(!n)return null;let e=n.filter(m2);return e.length==0?null:function(t){let r=_2(t,e).map(g2);return R_(r).pipe(Me(y2))}}function b2(n){return n!=null?FJ(v2(n)):null}function o2(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function LJ(n){return n._rawValidators}function VJ(n){return n._rawAsyncValidators}function AT(n){return n?Array.isArray(n)?n:[n]:[]}function wy(n,e){return Array.isArray(n)?n.includes(e):n===e}function a2(n,e){let t=AT(e);return AT(n).forEach(i=>{wy(t,i)||t.push(i)}),t}function c2(n,e){return AT(e).filter(t=>!wy(n,t))}var Sy=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=E2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=b2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},xT=class extends Sy{name;get formDirective(){return null}get path(){return null}},Zd=class extends Sy{_parent=null;name=null;valueAccessor=null},RT=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var I2=(()=>{class n extends RT{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(se(Zd,2))};static \u0275dir=Ot({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Re("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ds]})}return n})();var Kd="VALID",Iy="INVALID",nl="PENDING",Yd="DISABLED",ia=class{},Cy=class extends ia{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Qd=class extends ia{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Jd=class extends ia{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},rl=class extends ia{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var kT=class extends ia{source;constructor(e){super(),this.source=e}};function UJ(n){return(Dy(n)?n.validators:n)||null}function BJ(n){return Array.isArray(n)?E2(n):n||null}function jJ(n,e){return(Dy(e)?e.asyncValidators:n)||null}function $J(n){return Array.isArray(n)?b2(n):n||null}function Dy(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var PT=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return vt(this.statusReactive)}set status(e){vt(()=>this.statusReactive.set(e))}_status=su(()=>this.statusReactive());statusReactive=zt(void 0);get valid(){return this.status===Kd}get invalid(){return this.status===Iy}get pending(){return this.status==nl}get disabled(){return this.status===Yd}get enabled(){return this.status!==Yd}errors;get pristine(){return vt(this.pristineReactive)}set pristine(e){vt(()=>this.pristineReactive.set(e))}_pristine=su(()=>this.pristineReactive());pristineReactive=zt(!0);get dirty(){return!this.pristine}get touched(){return vt(this.touchedReactive)}set touched(e){vt(()=>this.touchedReactive.set(e))}_touched=su(()=>this.touchedReactive());touchedReactive=zt(!1);get untouched(){return!this.touched}_events=new _e;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(a2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(a2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(c2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(c2(e,this._rawAsyncValidators))}hasValidator(e){return wy(this._rawValidators,e)}hasAsyncValidator(e){return wy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ee(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Jd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Jd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ee(F({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Qd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Qd(!0,r))}markAsPending(e={}){this.status=nl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ee(F({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Yd,this.errors=null,this._forEachChild(i=>{i.disable(ee(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cy(this.value,r)),this._events.next(new rl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Kd,this._forEachChild(r=>{r.enable(ee(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ee(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kd||this.status===nl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cy(this.value,t)),this._events.next(new rl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ee(F({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yd:Kd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=nl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=g2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new rl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ke,this.statusChanges=new Ke}_calculateStatus(){return this._allControlsDisabled()?Yd:this.errors?Iy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nl)?nl:this._anyControlsHaveStatus(Iy)?Iy:Kd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Qd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Jd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Dy(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=BJ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=$J(this._rawAsyncValidators)}};var w2=new K("",{factory:()=>NT}),NT="always";function HJ(n,e){return[...e.path,n]}function zJ(n,e,t=NT){qJ(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),WJ(n,e),YJ(n,e),KJ(n,e),GJ(n,e)}function l2(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function GJ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function qJ(n,e){let t=LJ(n);e.validator!==null?n.setValidators(o2(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=VJ(n);e.asyncValidator!==null?n.setAsyncValidators(o2(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();l2(e._rawValidators,i),l2(e._rawAsyncValidators,i)}function WJ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&S2(n,e)})}function KJ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&S2(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function S2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YJ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function QJ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function JJ(n){return Object.getPrototypeOf(n.constructor)===AJ}function ZJ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ty?t=s:JJ(s)?r=s:i=s}),i||r||t||null}function u2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function d2(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var XJ=class extends PT{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(UJ(t),jJ(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(d2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new kT(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){u2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){u2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){d2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var eZ={provide:Zd,useExisting:ns(()=>MT)},h2=Promise.resolve(),MT=(()=>{class n extends Zd{_changeDetectorRef;callSetDisabledState;control=new XJ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ke;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ZJ(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),QJ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){zJ(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){h2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&mo(r);h2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?HJ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(se(xT,9),se(PJ,10),se(NJ,10),se(p2,10),se(kt,8),se(w2,8))};static \u0275dir=Ot({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[hs([eZ]),ds,Lr]})}return n})();var tZ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=it({})}return n})();var C2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:w2,useValue:t.callSetDisabledState??NT}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ct({type:n});static \u0275inj=it({imports:[tZ]})}return n})();function rZ(n,e){if(n&1&&(y(0,"p",18),I(1),v()),n&2){let t=L(2);E(),ne(" \u274C ",t.errorMessage," ")}}function iZ(n,e){n&1&&(y(0,"p",19),I(1," Reprenez votre partie l\xE0 o\xF9 vous l'avez laiss\xE9e. "),v())}function sZ(n,e){if(n&1){let t=ve();y(0,"div",7)(1,"div",8)(2,"h1",9),I(3," JEUB2 "),v(),y(4,"div",10),I(5," ONLINE EDITION "),v(),y(6,"div",11),I(7,"Devenez le CEO ultime"),v()(),y(8,"div",12)(9,"button",13),q("click",function(){Y(t);let i=L();return Q(i.login())}),y(10,"span",14),I(11,"G"),v(),y(12,"span"),I(13,"SE CONNECTER AVEC GOOGLE"),v(),ie(14,"div",15),v(),$(15,rZ,2,1,"p",16)(16,iZ,2,0,"p",17),v()()}if(n&2){let t=L();E(15),N("ngIf",t.errorMessage),E(),N("ngIf",!t.errorMessage)}}function oZ(n,e){if(n&1){let t=ve();y(0,"div",20)(1,"div",21),I(2,"\u{1F44B}"),v(),y(3,"h2",22),I(4,"Nouveau CEO d\xE9tect\xE9 !"),v(),y(5,"p",23),I(6,"Aucune sauvegarde trouv\xE9e. Choisissez votre pseudo :"),v(),y(7,"input",24),mp("ngModelChange",function(i){Y(t);let s=L();return aE(s.chosenUsername,i)||(s.chosenUsername=i),Q(i)}),q("keyup.enter",function(){Y(t);let i=L();return Q(i.confirmName())}),v(),y(8,"button",25),q("click",function(){Y(t);let i=L();return Q(i.confirmName())}),I(9," COMMENCER L'AVENTURE \u{1F680} "),v()()}if(n&2){let t=L();E(7),pp("ngModel",t.chosenUsername),E(),N("disabled",!t.chosenUsername)}}var Ay=class n{constructor(e,t,r){this.firebase=e;this.gameState=t;this.sound=r}isChoosingName=!1;chosenUsername="";pendingUser=null;errorMessage="";async login(){this.sound.playSoftPop(),this.errorMessage="";try{await this.firebase.loginGoogle();let e=this.firebase.authInstance.currentUser;e&&(await this.gameState.checkIfUserHasSave(e)?(console.log("\u{1F4BE} Sauvegarde trouv\xE9e ! Chargement..."),await this.gameState.loadCloudDataForUser(e)):(console.log("\u{1F195} Nouvelle partie d\xE9tect\xE9e."),this.pendingUser=e,this.chosenUsername=e.displayName||"",this.isChoosingName=!0))}catch(e){console.error("Erreur Login",e),e.code==="auth/popup-closed-by-user"?this.errorMessage="Connexion annul\xE9e.":this.errorMessage="Erreur connexion : "+e.message,this.sound.playError()}}async confirmName(){this.chosenUsername.trim()&&(this.sound.playSuccess(),this.pendingUser&&await this.gameState.initializeNewUser(this.pendingUser,this.chosenUsername))}static \u0275fac=function(t){return new(t||n)(se(ei),se(tn),se(Tn))};static \u0275cmp=mt({type:n,selectors:[["app-title-screen"]],standalone:!1,decls:8,vars:2,consts:[[1,"h-screen","w-screen","bg-slate-950","flex","flex-col","items-center","justify-center","relative","overflow-hidden","font-sans","select-none"],[1,"absolute","inset-0","opacity-20","pointer-events-none"],[1,"absolute","top-0","left-0","w-full","h-full","bg-[radial-gradient(circle_at_50%_50%,_#3b82f6_0%,_transparent_50%)]","animate-pulse"],[1,"grid-bg","absolute","inset-0"],["class","z-10 flex flex-col items-center gap-8 animate-fade-in-up",4,"ngIf"],["class","z-20 bg-slate-900 border border-slate-700 p-8 rounded-2xl shadow-2xl flex flex-col items-center gap-6 animate-fade-in max-w-md w-full mx-4",4,"ngIf"],[1,"absolute","bottom-4","text-slate-700","text-xs","font-mono"],[1,"z-10","flex","flex-col","items-center","gap-8","animate-fade-in-up"],[1,"relative","group","cursor-default"],[1,"text-8xl","md:text-9xl","font-black","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-b","from-white","to-slate-400","drop-shadow-2xl"],[1,"absolute","-top-4","-right-8","bg-blue-600","text-white","text-xs","font-bold","px-2","py-1","rounded","rotate-12","shadow-lg"],[1,"text-center","text-slate-500","font-mono","text-sm","tracking-[0.5em]","mt-2","uppercase"],[1,"flex","flex-col","items-center","gap-4","mt-8"],[1,"group","relative","px-8","py-4","bg-white","text-slate-900","font-black","text-xl","rounded-full","shadow-[0_0_40px_rgba(255,255,255,0.3)]","hover:shadow-[0_0_60px_rgba(255,255,255,0.5)]","hover:scale-105","transition-all","duration-300","flex","items-center","gap-3",3,"click"],[1,"text-2xl"],[1,"absolute","inset-0","rounded-full","border-2","border-white","opacity-0","group-hover:opacity-100","group-hover:scale-110","transition-all","duration-500"],["class","text-red-400 font-bold text-xs mt-4 max-w-xs text-center bg-red-900/20 p-2 rounded border border-red-500/30",4,"ngIf"],["class","text-slate-600 text-xs mt-4 max-w-xs text-center",4,"ngIf"],[1,"text-red-400","font-bold","text-xs","mt-4","max-w-xs","text-center","bg-red-900/20","p-2","rounded","border","border-red-500/30"],[1,"text-slate-600","text-xs","mt-4","max-w-xs","text-center"],[1,"z-20","bg-slate-900","border","border-slate-700","p-8","rounded-2xl","shadow-2xl","flex","flex-col","items-center","gap-6","animate-fade-in","max-w-md","w-full","mx-4"],[1,"text-4xl"],[1,"text-2xl","font-black","text-white","text-center"],[1,"text-slate-400","text-center","text-sm"],["type","text","placeholder","Votre Pseudo...",1,"w-full","bg-slate-800","border","border-slate-600","rounded-lg","px-4","py-3","text-white","font-bold","text-center","focus:border-blue-500","focus:outline-none","transition-colors",3,"ngModelChange","keyup.enter","ngModel"],[1,"w-full","py-3","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-bold","rounded-lg","transition-all",3,"click","disabled"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1),ie(2,"div",2)(3,"div",3),v(),$(4,sZ,17,2,"div",4)(5,oZ,10,2,"div",5),y(6,"div",6),I(7,"v1.1.0 \u2022 Save Cloud Sync"),v()()),t&2&&(E(4),N("ngIf",!r.isChoosingName),E(),N("ngIf",r.isChoosingName))},dependencies:[kn,Ty,I2,MT],styles:[".grid-bg[_ngcontent-%COMP%]{background-image:linear-gradient(rgba(255,255,255,.05) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.05) 1px,transparent 1px);background-size:50px 50px}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};function cZ(n,e){n&1&&ie(0,"app-title-screen")}function lZ(n,e){n&1&&(y(0,"div",2)(1,"div",3),I(2,"\u{1F680}"),v(),y(3,"div",4),I(4,"CHARGEMENT DE L'EMPIRE..."),v()())}function uZ(n,e){if(n&1){let t=ve();y(0,"div",9)(1,"div",10),I(2,"\u2694\uFE0F"),v(),y(3,"div",11)(4,"div",12),I(5),v(),y(6,"div",13),I(7),v()(),y(8,"div",14)(9,"button",15),q("click",function(){let i=Y(t).$implicit,s=L(3);return Q(s.firebaseService.acceptInvite(i))}),I(10,"ACCEPTER"),v(),y(11,"button",16),q("click",function(){let i=Y(t).$implicit,s=L(3);return Q(s.firebaseService.declineInvite(i))}),I(12,"\u2715"),v()()()}if(n&2){let t=e.$implicit;E(5),ne("D\xC9FI DE ",t.fromName),E(2),fo("",t.gameType," \u2022 ",t.amount," \u20AC")}}function dZ(n,e){if(n&1&&(y(0,"div",7),$(1,uZ,13,3,"div",8),v()),n&2){let t=e.ngIf;E(),N("ngForOf",t)}}function hZ(n,e){n&1&&ie(0,"app-intro-game")}function fZ(n,e){if(n&1&&(y(0,"div",53),I(1),v()),n&2){let t=e.$implicit;N("title",cE(t.name)),E(),ne(" ",t.icon," ")}}function pZ(n,e){if(n&1&&(y(0,"div",49)(1,"div",50),I(2,"Mes Biens"),v(),y(3,"div",51),$(4,fZ,2,3,"div",52),v()()),n&2){let t=L().ngIf,r=L(3);E(4),N("ngForOf",r.getMyPrestigeItems(t))}}function mZ(n,e){if(n&1&&(y(0,"div"),$(1,pZ,5,1,"div",48),v()),n&2){let t=e.ngIf,r=L(3);E(),N("ngIf",r.getMyPrestigeItems(t).length>0)}}function gZ(n,e){n&1&&ie(0,"div",63)}function yZ(n,e){if(n&1){let t=ve();y(0,"button",57),q("click",function(){Y(t);let i=L().$implicit,s=L(3);return Q(s.selectCompany(i))}),y(1,"div",58)(2,"div")(3,"div",59)(4,"span",60),I(5),v(),I(6),v(),y(7,"div",61),I(8),v()()(),$(9,gZ,1,0,"div",62),v()}if(n&2){let t=L().$implicit,r=L(3);N("ngClass",(r.selectedCompany==null?null:r.selectedCompany.id)===t.id?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-900/20":"bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-300 hover:border-slate-600"),E(5),ue(t.type===r.JobType.FOODTRUCK?"\u{1F354}":t.type===r.JobType.FACTORY?"\u{1F3ED}":t.type===r.JobType.FREELANCE_DEV?"\u{1F4BB}":"\u{1F3B0}"),E(),ne(" ",t.name," "),E(2),ne("Niveau ",t.level),E(),N("ngIf",(r.selectedCompany==null?null:r.selectedCompany.id)===t.id)}}function _Z(n,e){if(n&1){let t=ve();y(0,"div",64)(1,"div",65)(2,"div",66)(3,"span",67),I(4),v(),I(5),v(),y(6,"span"),I(7,"\u{1F512}"),v()(),y(8,"button",68),Ie(9,"async"),q("click",function(){Y(t);let i=L().$implicit,s=L(3);return Q(s.buyCompany(i))}),y(10,"span"),I(11,"ACHETER"),v(),y(12,"span",69),I(13),Ie(14,"number"),v()()()}if(n&2){let t,r=L().$implicit,i=L(3);E(4),ue(r.type===i.JobType.FREELANCE_DEV?"\u{1F4BB}":r.type===i.JobType.FACTORY?"\u{1F3ED}":"\u{1F3B0}"),E(),ne(" ",r.name," "),E(3),N("disabled",(((t=Rt(9,4,i.gameState$))==null?null:t.money)||0)<i.getUnlockCost(r.type)),E(5),ne("",st(14,6,i.getUnlockCost(r.type),"1.0-0")," \u20AC")}}function vZ(n,e){if(n&1&&(y(0,"div",54),$(1,yZ,10,5,"button",55)(2,_Z,15,9,"div",56),v()),n&2){let t=e.$implicit;E(),N("ngIf",t.unlocked),E(),N("ngIf",!t.unlocked)}}function EZ(n,e){n&1&&(y(0,"div",70)(1,"div",71),I(2,"\u{1F448}"),v(),y(3,"h2",72),I(4,"S\xE9lectionnez une activit\xE9"),v(),y(5,"p",73),I(6,"G\xE9rez votre empire depuis le menu de gauche."),v()())}function bZ(n,e){n&1&&ie(0,"app-freelance-dev-game",74)}function IZ(n,e){n&1&&ie(0,"app-foodtruck-game",74)}function wZ(n,e){n&1&&ie(0,"app-factory-game",74)}function SZ(n,e){n&1&&ie(0,"app-blackjack-game",74)}function CZ(n,e){if(n&1){let t=ve();y(0,"div",75),q("click",function(){Y(t);let i=L(3);return Q(i.toggleGlobalShop())}),y(1,"div",76),q("click",function(i){return Y(t),Q(i.stopPropagation())}),y(2,"div",77)(3,"h2",78),I(4,"BOUTIQUE GLOBALE"),v(),y(5,"div",79),I(6),Ie(7,"async"),Ie(8,"number"),v()(),y(9,"div",80)(10,"button",81),q("click",function(){Y(t);let i=L(3);return Q(i.toggleGlobalShop())}),I(11,"Fermer"),v()()()()}if(n&2){let t,r=L(3);E(6),ne("",st(8,3,(t=Rt(7,1,r.gameState$))==null?null:t.money,"1.0-0")," \u20AC")}}function TZ(n,e){if(n&1){let t=ve();y(0,"div",82),q("click",function(){Y(t);let i=L(3);return Q(i.toggleAdmin())}),y(1,"div",83),q("click",function(i){return Y(t),Q(i.stopPropagation())}),y(2,"h2",84)(3,"span"),I(4,"\u{1F575}\uFE0F\u200D\u2642\uFE0F"),v(),I(5," ZONE DE TRICHE"),v(),y(6,"div",85)(7,"div",86)(8,"button",87),q("click",function(){Y(t);let i=L(3);return Q(i.adminAddMoney(1e3))}),I(9,"+1k \u20AC"),v(),y(10,"button",87),q("click",function(){Y(t);let i=L(3);return Q(i.adminAddMoney(1e5))}),I(11,"+100k \u20AC"),v()(),y(12,"div",88)(13,"button",89),q("click",function(){Y(t);let i=L(3);return Q(i.resetData())}),I(14,"\u26A0\uFE0F EFFACER MA SAUVEGARDE"),v()()()()()}}function DZ(n,e){if(n&1){let t=ve();y(0,"div",90),q("click",function(){Y(t);let i=L(3);return Q(i.toggleOnlineTab())}),v()}}function AZ(n,e){if(n&1){let t=ve();y(0,"div",91)(1,"div",92)(2,"h2",93),I(3),v(),y(4,"button",94),q("click",function(){Y(t);let i=L(3);return Q(i.closeReport())}),I(5,"JOUR SUIVANT \u27A1\uFE0F"),v()()()}if(n&2){let t=L(3);E(3),ne("FIN DE LA JOURN\xC9E ",t.dailyReport.day)}}function xZ(n,e){if(n&1){let t=ve();y(0,"div",17)(1,"div",18)(2,"div",19)(3,"h1",20)(4,"span",21),I(5,"\u{1F680}"),v(),I(6," JEUB2 "),y(7,"span",22),I(8,"v1.1"),v()(),y(9,"div",23)(10,"div",24)(11,"span",25),I(12,"Argent"),v(),y(13,"span",26),I(14),Ie(15,"async"),Ie(16,"number"),v()(),y(17,"div",27)(18,"span",25),I(19),Ie(20,"async"),v(),y(21,"span",28),I(22),Ie(23,"async"),v()()()(),y(24,"div",29)(25,"button",30),q("click",function(){Y(t);let i=L(2);return Q(i.toggleGlobalShop())}),y(26,"span",31),I(27,"\u{1F6D2}"),v(),I(28," BOUTIQUE "),v()(),$(29,mZ,2,1,"div",0),Ie(30,"async"),y(31,"div",32)(32,"div",33),I(33,"Mes Entreprises"),v(),$(34,vZ,3,2,"div",34),Ie(35,"async"),v(),y(36,"div",35)(37,"div",36),ie(38,"span",37),I(39),Ie(40,"async"),Ie(41,"async"),v(),y(42,"button",38),q("click",function(){Y(t);let i=L(2);return Q(i.toggleOnlineTab())}),y(43,"span"),I(44,"\u{1F30D}"),v(),I(45," Online / Classement "),v(),y(46,"div",14)(47,"button",39),q("click",function(){Y(t);let i=L(2);return Q(i.logout())}),y(48,"span"),I(49,"\u{1F6AA}"),v()(),y(50,"button",40),q("click",function(){Y(t);let i=L(2);return Q(i.toggleAdmin())}),y(51,"span"),I(52,"\u{1F575}\uFE0F\u200D\u2642\uFE0F"),v()()()()(),y(53,"div",41),$(54,EZ,7,0,"div",42)(55,bZ,1,0,"app-freelance-dev-game",43)(56,IZ,1,0,"app-foodtruck-game",43)(57,wZ,1,0,"app-factory-game",43)(58,SZ,1,0,"app-blackjack-game",43),v(),$(59,CZ,12,6,"div",44)(60,TZ,15,0,"div",45)(61,DZ,1,0,"div",46)(62,AZ,6,1,"div",47),v()}if(n&2){let t,r,i,s,o,a=L(2);E(14),ne("",st(16,17,(t=Rt(15,15,a.gameState$))==null?null:t.money,"1.0-0")," \u20AC"),E(5),ne("Jour ",(r=Rt(20,20,a.gameState$))==null?null:r.day),E(3),ue(a.formatTime(((i=Rt(23,22,a.gameState$))==null?null:i.timeOfDay)||6)),E(7),N("ngIf",Rt(30,24,a.gameState$)),E(5),N("ngForOf",(s=Rt(35,26,a.gameState$))==null?null:s.companies),E(5),ne(" ",((o=Rt(40,28,a.firebaseService.user$))==null?null:o.email)||((o=Rt(41,30,a.gameState$))==null||o.user==null?null:o.user.username)||"Anonyme"," "),E(15),N("ngIf",!a.selectedCompany),E(),N("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FREELANCE_DEV),E(),N("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FOODTRUCK),E(),N("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FACTORY),E(),N("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.CLOTHING_STORE),E(),N("ngIf",a.isGlobalShopOpen),E(),N("ngIf",a.isAdminOpen),E(),N("ngIf",a.isOnlineTabOpen),E(),N("ngIf",a.dailyReport)}}function RZ(n,e){if(n&1&&(lp(0),$(1,dZ,2,1,"div",5),Ie(2,"async"),$(3,hZ,1,0,"app-intro-game",0),Ie(4,"async"),$(5,xZ,63,32,"div",6),Ie(6,"async"),up()),n&2){let t,r,i=L();E(),N("ngIf",Rt(2,3,i.firebaseService.invites$)),E(2),N("ngIf",!((t=Rt(4,5,i.gameState$))!=null&&t.hasCompletedIntro)),E(2),N("ngIf",(r=Rt(6,7,i.gameState$))==null?null:r.hasCompletedIntro)}}var xy=class n{constructor(e,t,r){this.gameStateService=e;this.soundService=t;this.firebaseService=r;this.gameState$=this.gameStateService.gameState$}gameState$;selectedCompany=null;dailyReport=null;isGlobalShopOpen=!1;isAdminOpen=!1;isOnlineTabOpen=!1;activeTab="LEADERBOARD";selectedPlayer=null;tickerMessages=["Bienvenue sur le march\xE9 mondial !","Le Bitcoin est en chute libre...","Qui sera le prochain CEO de l'ann\xE9e ?"];tickerIndex=0;newUsername="";newHoldingName="";JobType=ly;SetupItem=uy;availableThemes=$d;leaderboard=[];marketItems=[];holdings=[];prestigeItems=[{id:"WATCH",name:"Rolex en Or",icon:"\u231A",cost:5e3,desc:"Le temps c'est de l'argent."},{id:"CAR",name:"Tesla Model S",icon:"\u{1F697}",cost:45e3,desc:"Z\xE9ro \xE9mission, 100% style."},{id:"APARTMENT",name:"Penthouse",icon:"\u{1F3E2}",cost:25e4,desc:"Vue sur tout ton empire."},{id:"ISLAND",name:"\xCEle Priv\xE9e",icon:"\u{1F3DD}\uFE0F",cost:5e6,desc:"La retraite anticip\xE9e."}];ngOnInit(){this.gameState$.pipe(Me(e=>e.companies.find(t=>t.unlocked)),on(e=>!!e),xt(1)).subscribe(e=>{!this.selectedCompany&&e&&(this.selectedCompany=e)}),this.gameState$.subscribe(e=>{e.user&&!this.newUsername&&(this.newUsername=e.user.username)}),this.gameStateService.dayEnded$.subscribe(e=>{this.dailyReport=e,this.soundService.playSuccess()}),Qi(5e3).subscribe(()=>{this.tickerIndex=(this.tickerIndex+1)%this.tickerMessages.length})}getRankClass(e){return e===0?"bg-yellow-500/20 border-yellow-500/50 text-yellow-100 shadow-[0_0_15px_rgba(234,179,8,0.3)]":e===1?"bg-slate-300/10 border-slate-300/50 text-slate-200":e===2?"bg-amber-700/10 border-amber-700/50 text-amber-200":"bg-slate-800/50 border-slate-700 text-slate-400 hover:bg-slate-700 transition-colors"}viewPlayerDetails(e){this.selectedPlayer=e,this.soundService.playSoftPop()}closePlayerDetails(){this.selectedPlayer=null}createHolding(){this.newHoldingName&&this.firebaseService.createHolding(this.newHoldingName,this.newUsername).then(()=>{this.refreshOnlineData(),this.newHoldingName=""})}logout(){confirm("Se d\xE9connecter ?")&&this.gameStateService.logoutAndClear()}updateUsername(){this.newUsername?.trim()&&(this.gameStateService.updateUsername(this.newUsername.trim()),this.soundService.playSuccess())}toggleGlobalShop(){this.isGlobalShopOpen=!this.isGlobalShopOpen,this.isGlobalShopOpen&&this.soundService.playSoftPop()}isThemeOwned(e,t){return e.freelanceUpgrades.ownedThemes.includes(t)}isActiveTheme(e,t){return e.freelanceUpgrades.activeThemeId===t}buyOrEquipTheme(e){this.gameState$.pipe(xt(1)).subscribe(t=>{this.isThemeOwned(t,e.id)?(this.gameStateService.setFreelanceTheme(e.id),this.soundService.playSoftPop()):t.money>=e.cost?(this.gameStateService.buyFreelanceTheme(e.id,e.cost),this.soundService.playSuccess()):this.soundService.playError()})}toggleAdmin(){this.isAdminOpen=!this.isAdminOpen}adminAddMoney(e){this.gameStateService.addMoney(e),this.soundService.playCash()}adminSetTime(e){let t=parseFloat(e.target.value);!isNaN(t)&&t>=0&&t<=24&&this.gameStateService.setTimeOfDay(t)}toggleOnlineTab(){this.isOnlineTabOpen=!this.isOnlineTabOpen,this.isOnlineTabOpen&&this.refreshOnlineData()}async connect(){await this.gameStateService.connectOnline(),this.refreshOnlineData()}refreshOnlineData(){this.firebaseService.getLeaderboard().subscribe(e=>{this.leaderboard=e,this.leaderboard.length>0&&this.tickerMessages.push(`\u{1F451} ${this.leaderboard[0].username} domine le classement !`)}),this.firebaseService.getMarketItems().subscribe(e=>this.marketItems=e),this.firebaseService.getHoldings().subscribe(e=>this.holdings=e)}sellEmployee(){this.gameState$.pipe(xt(1)).subscribe(e=>{let t={sellerId:this.firebaseService.currentUserId||"anon",sellerName:e.user?.username||"Anonyme",type:"Dev Senior",price:5e3,timestamp:Date.now(),rarity:"RARE"};this.firebaseService.sellItem(t),this.soundService.playCash(),setTimeout(()=>this.refreshOnlineData(),1e3)})}buyItem(e){this.gameState$.pipe(xt(1)).subscribe(async t=>{if(t.money>=e.price){let r=await this.firebaseService.buyItem(e);r==="SUCCESS"?(this.gameStateService.addMoney(-e.price),e.type==="Dev Senior"&&this.gameStateService.hireEmployee("2","DEV_SENIOR"),this.soundService.playSuccess(),this.refreshOnlineData()):r==="SNIPER_PROTECTION"?(alert("\u{1F6D1} Protection Sniper ! Attendez quelques secondes apr\xE8s la mise en vente."),this.soundService.playError()):(alert("Trop tard ! Objet d\xE9j\xE0 vendu."),this.soundService.playError(),this.refreshOnlineData())}else this.soundService.playError()})}buySetup(e){let t=this.getSetupCost(e);this.gameState$.pipe(xt(1)).subscribe(r=>{r.money>=t?(this.gameStateService.buySetupUpgrade(e,t),this.soundService.playSuccess()):this.soundService.playError()})}getSetupCost(e){return{CHAIR:2e3,SCREEN:5e3,COFFEE:1500,PC:2e4}[e]||0}getSetupLevel(e,t){if(!e.freelanceUpgrades)return 0;switch(t){case"CHAIR":return e.freelanceUpgrades.chairLevel;case"SCREEN":return e.freelanceUpgrades.screenLevel;case"COFFEE":return e.freelanceUpgrades.coffeeLevel;case"PC":return e.freelanceUpgrades.pcLevel;default:return 0}}getFoodtruckLevel(e,t){return e.foodtruckUpgrades&&e.foodtruckUpgrades[t+"Level"]||1}getFoodtruckCost(e,t){let r=this.getFoodtruckLevel(e,t);return Math.floor(150*Math.pow(1.6,r))}buyFoodtruck(e){this.gameState$.pipe(xt(1)).subscribe(t=>{let r=this.getFoodtruckCost(t,e);t.money>=r?(this.gameStateService.buyFoodtruckUpgrade(e,r),this.soundService.playSuccess()):this.soundService.playError()})}buyKeyboard(){this.gameState$.pipe(xt(1)).subscribe(e=>{e.money>=5e3&&!e.foodtruckUpgrades.hasKeyboard?(this.gameStateService.unlockKeyboard(5e3),this.soundService.playSuccess()):this.soundService.playError()})}hasPrestigeItem(e,t){return e.achievements.some(r=>r.id==="PRESTIGE_"+t)}buyPrestige(e){this.gameStateService.buyPrestigeItem(e)?this.soundService.playSuccess():this.soundService.playError()}getMyPrestigeItems(e){return e.achievements.filter(t=>t.id.startsWith("PRESTIGE_"))}getUnlockCost(e){switch(e){case"FREELANCE_DEV":return 10;case"FACTORY":return 50;case"CLOTHING_STORE":return 25;default:return 0}}buyCompany(e){let t=this.getUnlockCost(e.type);t>0&&(this.gameStateService.unlockCompany(e.id,t),this.soundService.playSuccess())}closeReport(){this.dailyReport=null}selectCompany(e){e.unlocked&&(this.gameState$.subscribe(t=>{let r=t.companies.find(i=>i.id===e.id);r&&this.selectedCompany?.id===r.id&&(this.selectedCompany=r)}),this.selectedCompany=e,this.soundService.playSoftPop())}formatTime(e){let t=Math.floor(e),r=Math.floor((e-t)*60);return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}resetData(){this.gameStateService.hardResetGame()}static \u0275fac=function(t){return new(t||n)(se(tn),se(Tn),se(ei))};static \u0275cmp=mt({type:n,selectors:[["app-game-shell"]],standalone:!1,decls:8,vars:13,consts:[[4,"ngIf"],["class","fixed inset-0 bg-slate-950 flex flex-col items-center justify-center z-[9999]",4,"ngIf"],[1,"fixed","inset-0","bg-slate-950","flex","flex-col","items-center","justify-center","z-[9999]"],[1,"text-4xl","animate-bounce","mb-4"],[1,"text-white","font-bold","text-xl","tracking-widest","animate-pulse"],["class","fixed top-4 left-1/2 -translate-x-1/2 z-[1000] flex flex-col gap-2 pointer-events-auto",4,"ngIf"],["class","flex h-screen bg-slate-950 text-slate-200 font-sans overflow-hidden selection:bg-blue-500 selection:text-white",4,"ngIf"],[1,"fixed","top-4","left-1/2","-translate-x-1/2","z-[1000]","flex","flex-col","gap-2","pointer-events-auto"],["class","bg-slate-900 border border-purple-500 p-4 rounded-xl shadow-2xl shadow-purple-500/20 flex items-center gap-4 animate-fade-in-down min-w-[300px]",4,"ngFor","ngForOf"],[1,"bg-slate-900","border","border-purple-500","p-4","rounded-xl","shadow-2xl","shadow-purple-500/20","flex","items-center","gap-4","animate-fade-in-down","min-w-[300px]"],[1,"text-3xl","animate-bounce"],[1,"flex-1"],[1,"font-bold","text-white","text-sm"],[1,"text-xs","text-purple-300"],[1,"flex","gap-2"],[1,"bg-green-600","hover:bg-green-500","text-white","p-2","rounded-lg","text-xs","font-bold","transition-colors",3,"click"],[1,"bg-red-600/20","hover:bg-red-600","text-red-400","hover:text-white","p-2","rounded-lg","text-xs","font-bold","transition-colors",3,"click"],[1,"flex","h-screen","bg-slate-950","text-slate-200","font-sans","overflow-hidden","selection:bg-blue-500","selection:text-white"],[1,"w-64","bg-slate-900","border-r","border-slate-800","flex","flex-col","shrink-0","z-20","shadow-xl"],[1,"p-4","border-b","border-slate-800","flex","flex-col","gap-1","bg-slate-950/50"],[1,"font-black","text-xl","tracking-tighter","text-white","flex","items-center","gap-2"],[1,"text-2xl"],[1,"text-xs","font-normal","text-slate-500","border","border-slate-700","rounded","px-1"],[1,"flex","justify-between","items-end","mt-2"],[1,"flex","flex-col"],[1,"text-[10px]","uppercase","font-bold","text-slate-500","tracking-widest"],[1,"text-green-400","font-mono","font-bold","text-lg"],[1,"flex","flex-col","items-end"],[1,"text-blue-400","font-mono","font-bold","text-sm"],[1,"p-3","pb-0"],[1,"w-full","py-3","bg-gradient-to-r","from-purple-600","to-indigo-600","hover:from-purple-500","hover:to-indigo-500","text-white","font-black","uppercase","tracking-widest","rounded-xl","shadow-lg","border","border-white/10","flex","items-center","justify-center","gap-2","transition-all","hover:scale-[1.02]","active:scale-95",3,"click"],[1,"text-xl"],[1,"flex-1","overflow-y-auto","p-3","space-y-2","custom-scroll"],[1,"text-[10px]","font-bold","text-slate-600","uppercase","tracking-widest","px-2","mb-1","mt-2"],["class","mb-2",4,"ngFor","ngForOf"],[1,"p-4","border-t","border-slate-800","bg-slate-950/30","flex","flex-col","gap-2"],[1,"text-[10px]","text-slate-500","text-center","flex","items-center","justify-center","gap-2"],[1,"w-2","h-2","bg-green-500","rounded-full","animate-pulse"],[1,"w-full","py-2","px-3","rounded-lg","border","border-blue-500","text-blue-400","hover:bg-blue-900/30","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","py-2","px-3","rounded-lg","border","border-red-900/50","text-red-500","hover:bg-red-950/30","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","py-2","px-3","rounded-lg","border","border-slate-700","text-slate-400","hover:bg-slate-800","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","relative","bg-slate-950","overflow-hidden","flex","flex-col"],["class","h-full flex flex-col items-center justify-center text-slate-600",4,"ngIf"],["class","w-full h-full block",4,"ngIf"],["class","absolute inset-0 bg-slate-950/90 z-[100] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-red-950/90 z-[200] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-slate-950/95 z-[150] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-slate-900/95 z-[100] flex items-center justify-center backdrop-blur-md animate-fade-in",4,"ngIf"],["class","px-3 pt-4 pb-0",4,"ngIf"],[1,"px-3","pt-4","pb-0"],[1,"text-[10px]","font-bold","text-amber-500","uppercase","tracking-widest","px-2","mb-2"],[1,"flex","flex-wrap","gap-2","px-2"],["class","w-10 h-10 bg-slate-800 rounded-lg border border-amber-900/30 flex items-center justify-center text-xl shadow-lg",3,"title",4,"ngFor","ngForOf"],[1,"w-10","h-10","bg-slate-800","rounded-lg","border","border-amber-900/30","flex","items-center","justify-center","text-xl","shadow-lg",3,"title"],[1,"mb-2"],["class","w-full text-left p-3 rounded-xl transition-all duration-200 border relative group overflow-hidden",3,"ngClass","click",4,"ngIf"],["class","w-full p-3 rounded-xl border border-slate-800 bg-slate-900/50 relative overflow-hidden flex flex-col gap-2 opacity-80 hover:opacity-100 transition-opacity",4,"ngIf"],[1,"w-full","text-left","p-3","rounded-xl","transition-all","duration-200","border","relative","group","overflow-hidden",3,"click","ngClass"],[1,"relative","z-10","flex","justify-between","items-start"],[1,"font-bold","text-sm","flex","items-center","gap-2"],[1,"text-lg"],[1,"text-xs","opacity-70","mt-1"],["class","absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none",4,"ngIf"],[1,"absolute","inset-0","bg-gradient-to-br","from-white/10","to-transparent","pointer-events-none"],[1,"w-full","p-3","rounded-xl","border","border-slate-800","bg-slate-900/50","relative","overflow-hidden","flex","flex-col","gap-2","opacity-80","hover:opacity-100","transition-opacity"],[1,"flex","justify-between","items-center","opacity-60"],[1,"font-bold","text-sm","flex","items-center","gap-2","text-slate-400"],[1,"text-lg","grayscale"],[1,"w-full","py-2","bg-green-600","hover:bg-green-500","disabled:bg-slate-800","disabled:text-slate-600","text-white","font-bold","rounded-lg","transition-all","text-xs","flex","justify-center","items-center","gap-2","shadow-lg",3,"click","disabled"],[1,"bg-black/20","px-1.5","rounded","text-green-100"],[1,"h-full","flex","flex-col","items-center","justify-center","text-slate-600"],[1,"text-6xl","mb-6","animate-bounce"],[1,"text-2xl","font-bold","text-slate-500"],[1,"text-slate-600","text-sm","mt-2"],[1,"w-full","h-full","block"],[1,"absolute","inset-0","bg-slate-950/90","z-[100]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-5xl","h-[90%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden",3,"click"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-950"],[1,"text-2xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-purple-400","to-indigo-400"],[1,"font-mono","text-green-400","font-bold","text-xl"],[1,"p-4","border-t","border-slate-800","bg-slate-950","flex","justify-end"],[1,"px-6","py-2","bg-slate-700","hover:bg-slate-600","text-white","font-bold","rounded-lg",3,"click"],[1,"absolute","inset-0","bg-red-950/90","z-[200]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-red-500","p-8","rounded-xl","w-96","shadow-2xl",3,"click"],[1,"text-2xl","font-black","text-red-500","mb-6","flex","items-center","gap-2"],[1,"space-y-4"],[1,"grid","grid-cols-2","gap-2"],[1,"w-full","py-3","bg-red-900/20","border","border-red-500/50","hover:bg-red-800","hover:text-white","text-red-300","font-bold","rounded","transition-all",3,"click"],[1,"pt-4","border-t","border-slate-800"],[1,"w-full","py-4","bg-black","border-2","border-red-600","text-red-500","hover:bg-red-600","hover:text-white","font-black","rounded-lg","mt-2","transition-all","uppercase","tracking-widest",3,"click"],[1,"absolute","inset-0","bg-slate-950/95","z-[150]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"absolute","inset-0","bg-slate-900/95","z-[100]","flex","items-center","justify-center","backdrop-blur-md","animate-fade-in"],[1,"bg-slate-800","p-8","rounded-2xl","border","border-slate-600","shadow-2xl","max-w-md","w-full","text-center"],[1,"text-3xl","font-black","text-white","mb-2"],[1,"w-full","py-4","bg-blue-600","hover:bg-blue-500","text-white","font-black","rounded-xl","text-lg","shadow-lg","hover:shadow-blue-500/20","transition-all","mt-8",3,"click"]],template:function(t,r){t&1&&($(0,cZ,1,0,"app-title-screen",0),Ie(1,"async"),$(2,lZ,5,0,"div",1),Ie(3,"async"),Ie(4,"async"),$(5,RZ,7,9,"ng-container",0),Ie(6,"async"),Ie(7,"async")),t&2&&(N("ngIf",!Rt(1,3,r.firebaseService.user$)),E(2),N("ngIf",Rt(3,5,r.gameStateService.isLoading$)&&Rt(4,7,r.firebaseService.user$)),E(3),N("ngIf",Rt(6,9,r.firebaseService.user$)&&!Rt(7,11,r.gameStateService.isLoading$)))},dependencies:[gi,Kn,kn,yy,_y,vy,Ey,by,Ay,kE,fr],encapsulation:2})};var Ry=class n{title="JEUB2";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=mt({type:n,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(t,r){t&1&&ie(0,"app-game-shell")},dependencies:[xy],encapsulation:2})};var ky=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ct({type:n});static \u0275inj=it({imports:[uu,r2,C2]})};ik(mP);var Py=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ct({type:n,bootstrap:[Ry]});static \u0275inj=it({providers:[{provide:po,useValue:"fr-FR"},WP(()=>KP(SL.firebase)),kM(()=>NM()),_L(()=>EL())],imports:[yu,pP,cy,ky]})};jE().bootstrapModule(Py).catch(n=>console.error(n));
