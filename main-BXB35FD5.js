var XU=Object.defineProperty,eB=Object.defineProperties;var tB=Object.getOwnPropertyDescriptors;var Gh=Object.getOwnPropertySymbols;var vx=Object.prototype.hasOwnProperty,yx=Object.prototype.propertyIsEnumerable;var _x=(n,e,t)=>e in n?XU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})vx.call(e,t)&&_x(n,t,e[t]);if(Gh)for(var t of Gh(e))yx.call(e,t)&&_x(n,t,e[t]);return n},ee=(n,e)=>eB(n,tB(e));var $l=(n,e)=>{var t={};for(var r in n)vx.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Gh)for(var r of Gh(n))e.indexOf(r)<0&&yx.call(n,r)&&(t[r]=n[r]);return t};var rn=null,qh=!1,Wv=1,nB=null,mn=Symbol("SIGNAL");function Ce(n){let e=rn;return rn=n,e}function Kh(){return rn}var Hl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zl(n){if(qh)throw new Error("");if(rn===null)return;rn.consumerOnSignalRead(n);let e=rn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=rn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:rn.producers,t!==void 0&&t.producer===n)){rn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===rn&&(!r||iB(i,rn)))return;let s=Ma(rn),o={producer:n,consumer:rn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};rn.producersTail=o,e!==void 0?e.nextProducer=o:rn.producers=o,s&&Ix(n,o)}function bx(){Wv++}function Kv(n){if(!(Ma(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Wv)){if(!n.producerMustRecompute(n)&&!Qh(n)){qv(n);return}n.producerRecomputeValue(n),qv(n)}}function Yv(n){if(n.consumers===void 0)return;let e=qh;qh=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||rB(r)}}finally{qh=e}}function Qv(){return rn?.consumerAllowSignalWrites!==!1}function rB(n){n.dirty=!0,Yv(n),n.consumerMarkedDirty?.(n)}function qv(n){n.dirty=!1,n.lastCleanEpoch=Wv}function Gl(n){return n&&Ex(n),Ce(n)}function Ex(n){n.producersTail=void 0,n.recomputing=!0}function Yh(n,e){Ce(e),n&&wx(n)}function wx(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ma(n))do t=Jv(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Qh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Kv(t),r!==t.version))return!0}return!1}function ql(n){if(Ma(n)){let e=n.producers;for(;e!==void 0;)e=Jv(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Ix(n,e){let t=n.consumersTail,r=Ma(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Ix(i.producer,i)}function Jv(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ma(e)){let s=e.producers;for(;s!==void 0;)s=Jv(s)}return t}function Ma(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Zv(n){nB?.(n)}function iB(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Xv(n,e){return Object.is(n,e)}function Jh(n,e){let t=Object.create(sB);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Kv(t),zl(t),t.value===Wh)throw t.error;return t.value};return r[mn]=t,Zv(t),r}var zv=Symbol("UNSET"),Gv=Symbol("COMPUTING"),Wh=Symbol("ERRORED"),sB=ee(O({},Hl),{value:zv,dirty:!0,error:null,equal:Xv,kind:"computed",producerMustRecompute(n){return n.value===zv||n.value===Gv},producerRecomputeValue(n){if(n.value===Gv)throw new Error("");let e=n.value;n.value=Gv;let t=Gl(n),r,i=!1;try{r=n.computation(),Ce(null),i=e!==zv&&e!==Wh&&r!==Wh&&n.equal(e,r)}catch(s){r=Wh,n.error=s}finally{Yh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function oB(){throw new Error}var Sx=oB;function Cx(n){Sx(n)}function ey(n){Sx=n}var aB=null;function ty(n,e){let t=Object.create(Zh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Tx(t);return r[mn]=t,Zv(t),[r,o=>Wl(t,o),o=>Dx(t,o)]}function Tx(n){return zl(n),n.value}function Wl(n,e){Qv()||Cx(n),n.equal(n.value,e)||(n.value=e,cB(n))}function Dx(n,e){Qv()||Cx(n),Wl(n,e(n.value))}var Zh=ee(O({},Hl),{equal:Xv,value:void 0,kind:"signal"});function cB(n){n.version++,bx(),Yv(n),aB?.(n)}function ny(n){let e=Ce(null);try{return n()}finally{Ce(e)}}function Ee(n){return typeof n=="function"}function Oa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Xh=Oa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ee(r))try{r()}catch(s){e=s instanceof Xh?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{xx(s)}catch(o){e=e??[],o instanceof Xh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Xh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)xx(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fo(t,e)}remove(e){let{_finalizers:t}=this;t&&fo(t,e),e instanceof n&&e._removeParent(this)}};Je.EMPTY=(()=>{let n=new Je;return n.closed=!0,n})();var ry=Je.EMPTY;function ef(n){return n instanceof Je||n&&"closed"in n&&Ee(n.remove)&&Ee(n.add)&&Ee(n.unsubscribe)}function xx(n){Ee(n)?n():n.unsubscribe()}var Cr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Fa={setTimeout(n,e,...t){let{delegate:r}=Fa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Fa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function tf(n){Fa.setTimeout(()=>{let{onUnhandledError:e}=Cr;if(e)e(n);else throw n})}function Kl(){}var Ax=iy("C",void 0,void 0);function Rx(n){return iy("E",void 0,n)}function kx(n){return iy("N",n,void 0)}function iy(n,e,t){return{kind:n,value:e,error:t}}var po=null;function La(n){if(Cr.useDeprecatedSynchronousErrorHandling){let e=!po;if(e&&(po={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=po;if(po=null,t)throw r}}else n()}function Px(n){Cr.useDeprecatedSynchronousErrorHandling&&po&&(po.errorThrown=!0,po.error=n)}var mo=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ef(e)&&e.add(this)):this.destination=dB}static create(e,t,r){return new Va(e,t,r)}next(e){this.isStopped?oy(kx(e),this):this._next(e)}error(e){this.isStopped?oy(Rx(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?oy(Ax,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lB=Function.prototype.bind;function sy(n,e){return lB.call(n,e)}var ay=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){nf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){nf(r)}else nf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){nf(t)}}},Va=class extends mo{constructor(e,t,r){super();let i;if(Ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Cr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&sy(e.next,s),error:e.error&&sy(e.error,s),complete:e.complete&&sy(e.complete,s)}):i=e}this.destination=new ay(i)}};function nf(n){Cr.useDeprecatedSynchronousErrorHandling?Px(n):tf(n)}function uB(n){throw n}function oy(n,e){let{onStoppedNotification:t}=Cr;t&&Fa.setTimeout(()=>t(n,e))}var dB={closed:!0,next:Kl,error:uB,complete:Kl};var Ua=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tr(n){return n}function cy(...n){return ly(n)}function ly(n){return n.length===0?Tr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var _e=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=fB(t)?t:new Va(t,r,i);return La(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Nx(r),new r((i,s)=>{let o=new Va({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ua](){return this}pipe(...t){return ly(t)(this)}toPromise(t){return t=Nx(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Nx(n){var e;return(e=n??Cr.Promise)!==null&&e!==void 0?e:Promise}function hB(n){return n&&Ee(n.next)&&Ee(n.error)&&Ee(n.complete)}function fB(n){return n&&n instanceof mo||hB(n)&&ef(n)}function pB(n){return Ee(n?.lift)}function Be(n){return e=>{if(pB(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ve(n,e,t,r,i){return new uy(n,e,t,r,i)}var uy=class extends mo{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Ba={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=Ba;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(s=>{t=void 0,n(s)});return new Je(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=Ba;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=Ba;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var Mx=Oa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var be=(()=>{class n extends _e{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new rf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Mx}next(t){La(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){La(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){La(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ry:(this.currentObservers=null,s.push(t),new Je(()=>{this.currentObservers=null,fo(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new _e;return t.source=this,t}}return n.create=(e,t)=>new rf(e,t),n})(),rf=class extends be{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ry}};var rt=class extends be{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var dy={now(){return(dy.delegate||Date).now()},delegate:void 0};var sf=class extends Je{constructor(e,t){super()}schedule(e,t=0){return this}};var Yl={setInterval(n,e,...t){let{delegate:r}=Yl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Yl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var hs=class extends sf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Yl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Yl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ja=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ja.now=dy.now;var fs=class extends ja{constructor(e,t=ja.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ps=new fs(hs),hy=ps;var of=class extends hs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var af=class extends fs{};var fy=new af(of);var cf=class extends hs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Ba.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:s}=e;t!=null&&t===e._scheduled&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==t&&(Ba.cancelAnimationFrame(t),e._scheduled=void 0)}};var lf=class extends fs{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var uf=new lf(cf);var sn=new _e(n=>n.complete());function df(n){return n&&Ee(n.schedule)}function py(n){return n[n.length-1]}function hf(n){return Ee(py(n))?n.pop():void 0}function qr(n){return df(py(n))?n.pop():void 0}function Ox(n,e){return typeof py(n)=="number"?n.pop():e}function ff(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Lx(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function Fx(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function go(n){return this instanceof go?(this.v=n,this):new go(n)}function Vx(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(b){return function(I){return Promise.resolve(I).then(b,f)}}function a(b,I){r[b]&&(i[b]=function(k){return new Promise(function(N,j){s.push([b,k,N,j])>1||c(b,k)})},I&&(i[b]=I(i[b])))}function c(b,I){try{u(r[b](I))}catch(k){_(s[0][3],k)}}function u(b){b.value instanceof go?Promise.resolve(b.value.v).then(d,f):_(s[0][2],b)}function d(b){c("next",b)}function f(b){c("throw",b)}function _(b,I){b(I),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Ux(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Fx=="function"?Fx(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var pf=n=>n&&typeof n.length=="number"&&typeof n!="function";function mf(n){return Ee(n?.then)}function gf(n){return Ee(n[Ua])}function _f(n){return Symbol.asyncIterator&&Ee(n?.[Symbol.asyncIterator])}function vf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yf=mB();function bf(n){return Ee(n?.[yf])}function Ef(n){return Vx(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield go(t.read());if(i)return yield go(void 0);yield yield go(r)}}finally{t.releaseLock()}})}function wf(n){return Ee(n?.getReader)}function ft(n){if(n instanceof _e)return n;if(n!=null){if(gf(n))return gB(n);if(pf(n))return _B(n);if(mf(n))return vB(n);if(_f(n))return Bx(n);if(bf(n))return yB(n);if(wf(n))return bB(n)}throw vf(n)}function gB(n){return new _e(e=>{let t=n[Ua]();if(Ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _B(n){return new _e(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function vB(n){return new _e(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,tf)})}function yB(n){return new _e(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Bx(n){return new _e(e=>{EB(n,e).catch(t=>e.error(t))})}function bB(n){return Bx(Ef(n))}function EB(n,e){var t,r,i,s;return Lx(this,void 0,void 0,function*(){try{for(t=Ux(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function xn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function ms(n,e=0){return Be((t,r)=>{t.subscribe(Ve(r,i=>xn(r,n,()=>r.next(i),e),()=>xn(r,n,()=>r.complete(),e),i=>xn(r,n,()=>r.error(i),e)))})}function gs(n,e=0){return Be((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function jx(n,e){return ft(n).pipe(gs(e),ms(e))}function $x(n,e){return ft(n).pipe(gs(e),ms(e))}function Hx(n,e){return new _e(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function zx(n,e){return new _e(t=>{let r;return xn(t,e,()=>{r=n[yf](),xn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Ee(r?.return)&&r.return()})}function If(n,e){if(!n)throw new Error("Iterable cannot be null");return new _e(t=>{xn(t,e,()=>{let r=n[Symbol.asyncIterator]();xn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Gx(n,e){return If(Ef(n),e)}function qx(n,e){if(n!=null){if(gf(n))return jx(n,e);if(pf(n))return Hx(n,e);if(mf(n))return $x(n,e);if(_f(n))return If(n,e);if(bf(n))return zx(n,e);if(wf(n))return Gx(n,e)}throw vf(n)}function ze(n,e){return e?qx(n,e):ft(n)}function Te(...n){let e=qr(n);return ze(n,e)}function my(n,e){let t=Ee(n)?n:()=>n,r=i=>i.error(t());return new _e(e?i=>e.schedule(r,0,i):r)}function Ql(n){return!!n&&(n instanceof _e||Ee(n.lift)&&Ee(n.subscribe))}var _o=Oa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Wx(n){return n instanceof Date&&!isNaN(n)}function Oe(n,e){return Be((t,r)=>{let i=0;t.subscribe(Ve(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:wB}=Array;function IB(n,e){return wB(e)?n(...e):n(e)}function Sf(n){return Oe(e=>IB(n,e))}var{isArray:SB}=Array,{getPrototypeOf:CB,prototype:TB,keys:DB}=Object;function Cf(n){if(n.length===1){let e=n[0];if(SB(e))return{args:e,keys:null};if(xB(e)){let t=DB(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function xB(n){return n&&typeof n=="object"&&CB(n)===TB}function Tf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Df(...n){let e=qr(n),t=hf(n),{args:r,keys:i}=Cf(n);if(r.length===0)return ze([],e);let s=new _e(AB(r,e,i?o=>Tf(i,o):Tr));return t?s.pipe(Sf(t)):s}function AB(n,e,t=Tr){return r=>{Kx(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Kx(e,()=>{let u=ze(n[c],e),d=!1;u.subscribe(Ve(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Kx(n,e,t){n?xn(t,n,e):e()}function Yx(n,e,t,r,i,s,o,a){let c=[],u=0,d=0,f=!1,_=()=>{f&&!c.length&&!u&&e.complete()},b=k=>u<r?I(k):c.push(k),I=k=>{s&&e.next(k),u++;let N=!1;ft(t(k,d++)).subscribe(Ve(e,j=>{i?.(j),s?b(j):e.next(j)},()=>{N=!0},void 0,()=>{if(N)try{for(u--;c.length&&u<r;){let j=c.shift();o?xn(e,o,()=>I(j)):I(j)}_()}catch(j){e.error(j)}}))};return n.subscribe(Ve(e,b,()=>{f=!0,_()})),()=>{a?.()}}function Kt(n,e,t=1/0){return Ee(e)?Kt((r,i)=>Oe((s,o)=>e(r,s,i,o))(ft(n(r,i))),t):(typeof e=="number"&&(t=e),Be((r,i)=>Yx(r,i,n,t)))}function _s(n=1/0){return Kt(Tr,n)}function Qx(){return _s(1)}function $a(...n){return Qx()(ze(n,qr(n)))}function Jl(n){return new _e(e=>{ft(n()).subscribe(e)})}function Zl(...n){let e=hf(n),{args:t,keys:r}=Cf(n),i=new _e(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let d=0;d<o;d++){let f=!1;ft(t[d]).subscribe(Ve(s,_=>{f||(f=!0,u--),a[d]=_},()=>c--,void 0,()=>{(!c||!f)&&(u||s.next(r?Tf(r,a):a),s.complete())}))}});return e?i.pipe(Sf(e)):i}function xf(n=0,e,t=hy){let r=-1;return e!=null&&(df(e)?t=e:r=e),new _e(i=>{let s=Wx(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function vs(n=0,e=ps){return n<0&&(n=0),xf(n,n,e)}function Af(...n){let e=qr(n),t=Ox(n,1/0),r=n;return r.length?r.length===1?ft(r[0]):_s(t)(ze(r,e)):sn}function gn(n,e){return Be((t,r)=>{let i=0;t.subscribe(Ve(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Jx(n){return Be((e,t)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let u=i;i=null,t.next(u)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(Ve(t,u=>{r=!0,i=u,s||ft(n(u)).subscribe(s=Ve(t,a,c))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}function gy(n,e=ps){return Jx(()=>xf(n,e))}function Ha(n){return Be((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ve(t,void 0,void 0,o=>{s=ft(n(o,Ha(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function za(n,e){return Ee(e)?Kt(n,e,1):Kt(n,1)}function _y(n){return Be((e,t)=>{let r=!1;e.subscribe(Ve(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function it(n){return n<=0?()=>sn:Be((e,t)=>{let r=0;e.subscribe(Ve(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zx(n=RB){return Be((e,t)=>{let r=!1;e.subscribe(Ve(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function RB(){return new _o}function vy(n){return Be((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ti(n,e){let t=arguments.length>=2;return r=>r.pipe(n?gn((i,s)=>n(i,s,r)):Tr,it(1),t?_y(e):Zx(()=>new _o))}function Rf(n){return n<=0?()=>sn:Be((e,t)=>{let r=[];e.subscribe(Ve(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ga(...n){let e=qr(n);return Be((t,r)=>{(e?$a(n,t,e):$a(n,t)).subscribe(r)})}function An(n,e){return Be((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ve(r,c=>{i?.unsubscribe();let u=0,d=s++;ft(n(c,d)).subscribe(i=Ve(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Wr(n){return Be((e,t)=>{ft(n).subscribe(Ve(t,()=>t.complete(),Kl)),!t.closed&&e.subscribe(t)})}function Yt(n,e,t){let r=Ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?Be((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ve(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Tr}var yy;function kf(){return yy}function Kr(n){let e=yy;return yy=n,e}var Xx=Symbol("NotFound");function qa(n){return n===Xx||n?.name==="\u0275NotFound"}var ys=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Oy=new ys("21.0.0");var Fy="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",B=class extends Error{code;constructor(e,t){super(Is(e,t)),this.code=e}};function NB(n){return`NG0${Math.abs(n)}`}function Is(n,e){return`${NB(n)}${e?": "+e:""}`}var yn=globalThis;function Ge(n){for(let e in n)if(n[e]===Ge)return e;throw Error("")}function i1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function xi(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(xi).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Ff(n,e){return n?e?`${n} ${e}`:n:e||""}var MB=Ge({__forward_ref__:Ge});function Ss(n){return n.__forward_ref__=Ss,n.toString=function(){return xi(this())},n}function Qt(n){return Ly(n)?n():n}function Ly(n){return typeof n=="function"&&n.hasOwnProperty(MB)&&n.__forward_ref__===Ss}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ht(n){return{providers:n.providers||[],imports:n.imports||[]}}function iu(n){return OB(n,Lf)}function Vy(n){return iu(n)!==null}function OB(n,e){return n.hasOwnProperty(e)&&n[e]||null}function FB(n){let e=n?.[Lf]??null;return e||null}function Ey(n){return n&&n.hasOwnProperty(Nf)?n[Nf]:null}var Lf=Ge({\u0275prov:Ge}),Nf=Ge({\u0275inj:Ge}),Q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Uy(n){return n&&!!n.\u0275providers}var By=Ge({\u0275cmp:Ge}),jy=Ge({\u0275dir:Ge}),$y=Ge({\u0275pipe:Ge}),Hy=Ge({\u0275mod:Ge}),eu=Ge({\u0275fac:Ge}),wo=Ge({__NG_ELEMENT_ID__:Ge}),e1=Ge({__NG_ENV_ID__:Ge});function su(n){return typeof n=="string"?n:n==null?"":String(n)}function s1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():su(n)}var o1=Ge({ngErrorCode:Ge}),LB=Ge({ngErrorMessage:Ge}),VB=Ge({ngTokenPath:Ge});function zy(n,e){return a1("",-200,e)}function Vf(n,e){throw new B(-201,!1)}function a1(n,e,t){let r=new B(e,n);return r[o1]=e,r[LB]=n,t&&(r[VB]=t),r}function UB(n){return n[o1]}var wy;function c1(){return wy}function _n(n){let e=wy;return wy=n,e}function Gy(n,e,t){let r=iu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Vf(n,"Injector")}var BB={},vo=BB,Iy="__NG_DI_FLAG__",Sy=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=yo(t)||0;try{return this.injector.get(e,r&8?null:vo,r)}catch(i){if(qa(i))return i;throw i}}};function jB(n,e=0){let t=kf();if(t===void 0)throw new B(-203,!1);if(t===null)return Gy(n,void 0,e);{let r=$B(e),i=t.retrieve(n,r);if(qa(i)){if(r.optional)return null;throw i}return i}}function se(n,e=0){return(c1()||jB)(Qt(n),e)}function F(n,e){return se(n,yo(e))}function yo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function $B(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Cy(n){let e=[];for(let t=0;t<n.length;t++){let r=Qt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=HB(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(se(i,s))}else e.push(se(r))}return e}function l1(n,e){return n[Iy]=e,n.prototype[Iy]=e,n}function HB(n){return n[Iy]}function bs(n,e){let t=n.hasOwnProperty(eu);return t?n[eu]:null}function u1(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function d1(n){return n.flat(Number.POSITIVE_INFINITY)}function Uf(n,e){n.forEach(t=>Array.isArray(t)?Uf(t,e):e(t))}function qy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ou(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function h1(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function f1(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function Bf(n,e,t){let r=Ka(n,e);return r>=0?n[r|1]=t:(r=~r,f1(n,r,e,t)),r}function jf(n,e){let t=Ka(n,e);if(t>=0)return n[t|1]}function Ka(n,e){return zB(n,e,1)}function zB(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Cs={},vn=[],Ya=new Q(""),Wy=new Q("",-1),Ky=new Q(""),tu=class{get(e,t=vo){if(t===vo){let i=a1("",-201);throw i.name="\u0275NotFound",i}return t}};function Yy(n){return n[Hy]||null}function Qr(n){return n[By]||null}function Qy(n){return n[jy]||null}function p1(n){return n[$y]||null}function Dr(n){return{\u0275providers:n}}function m1(...n){return{\u0275providers:Jy(!0,n),\u0275fromNgModule:!0}}function Jy(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Uf(e,o=>{let a=o;Mf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&g1(i,s),t}function g1(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Zy(i,s=>{e(s,r)})}}function Mf(n,e,t,r){if(n=Qt(n),!n)return!1;let i=null,s=Ey(n),o=!s&&Qr(n);if(!s&&!o){let c=n.ngModule;if(s=Ey(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Mf(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{Uf(s.imports,d=>{Mf(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&g1(u,e)}if(!a){let u=bs(i)||(()=>new i);e({provide:i,useFactory:u,deps:vn},i),e({provide:Ky,useValue:i,multi:!0},i),e({provide:Ya,useValue:()=>se(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=n;Zy(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Zy(n,e){for(let t of n)Uy(t)&&(t=t.\u0275providers),Array.isArray(t)?Zy(t,e):e(t)}var GB=Ge({provide:String,useValue:Ge});function _1(n){return n!==null&&typeof n=="object"&&GB in n}function qB(n){return!!(n&&n.useExisting)}function WB(n){return!!(n&&n.useFactory)}function bo(n){return typeof n=="function"}function v1(n){return!!n.useClass}var au=new Q(""),Pf={},t1={},by;function Qa(){return by===void 0&&(by=new tu),by}var wt=class{},Eo=class extends wt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Dy(e,o=>this.processProvider(o)),this.records.set(Wy,Wa(void 0,this)),i.has("environment")&&this.records.set(wt,Wa(void 0,this));let s=this.records.get(au);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ky,vn,{self:!0}))}retrieve(e,t){let r=yo(t)||0;try{return this.get(e,vo,r)}catch(i){if(qa(i))return i;throw i}}destroy(){Xl(this),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return Xl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Xl(this);let t=Kr(this),r=_n(void 0),i;try{return e()}finally{Kr(t),_n(r)}}get(e,t=vo,r){if(Xl(this),e.hasOwnProperty(e1))return e[e1](this);let i=yo(r),s,o=Kr(this),a=_n(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=ZB(e)&&iu(e);d&&this.injectableDefInScope(d)?u=Wa(Ty(e),Pf):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Qa():this.parent;return t=i&8&&t===vo?null:t,c.get(e,t)}catch(c){let u=UB(c);throw u===-200||u===-201?new B(u,null):c}finally{_n(a),Kr(o)}}resolveInjectorInitializers(){let e=Ce(null),t=Kr(this),r=_n(void 0),i;try{let s=this.get(Ya,vn,{self:!0});for(let o of s)o()}finally{Kr(t),_n(r),Ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(xi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Qt(e);let t=bo(e)?e:Qt(e&&e.provide),r=YB(e);if(!bo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Wa(void 0,Pf,!0),i.factory=()=>Cy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ce(null);try{if(t.value===t1)throw zy(xi(e));return t.value===Pf&&(t.value=t1,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&JB(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ce(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Qt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ty(n){let e=iu(n),t=e!==null?e.factory:bs(n);if(t!==null)return t;if(n instanceof Q)throw new B(204,!1);if(n instanceof Function)return KB(n);throw new B(204,!1)}function KB(n){if(n.length>0)throw new B(204,!1);let t=FB(n);return t!==null?()=>t.factory(n):()=>new n}function YB(n){if(_1(n))return Wa(void 0,n.useValue);{let e=Xy(n);return Wa(e,Pf)}}function Xy(n,e,t){let r;if(bo(n)){let i=Qt(n);return bs(i)||Ty(i)}else if(_1(n))r=()=>Qt(n.useValue);else if(WB(n))r=()=>n.useFactory(...Cy(n.deps||[]));else if(qB(n))r=(i,s)=>se(Qt(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Qt(n&&(n.useClass||n.provide));if(QB(n))r=()=>new i(...Cy(n.deps));else return bs(i)||Ty(i)}return r}function Xl(n){if(n.destroyed)throw new B(205,!1)}function Wa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function QB(n){return!!n.deps}function JB(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ZB(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Dy(n,e){for(let t of n)Array.isArray(t)?Dy(t,e):t&&Uy(t)?Dy(t.\u0275providers,e):e(t)}function Rt(n,e){let t;n instanceof Eo?(Xl(n),t=n):t=new Sy(n);let r,i=Kr(t),s=_n(void 0);try{return e()}finally{Kr(i),_n(s)}}function e0(){return c1()!==void 0||kf()!=null}var xr=0,pe=1,ye=2,Bt=3,ar=4,bn=5,Ja=6,Za=7,on=8,Ts=9,Ai=10,pt=11,Xa=12,t0=13,Io=14,Rn=15,Ds=16,So=17,Jr=18,cu=19,n0=20,Di=21,$f=22,lu=23,zn=24,Co=25,uu=26,Dt=27,y1=1;var xs=7,du=8,To=9,En=10;function Zr(n){return Array.isArray(n)&&typeof n[y1]=="object"}function Ar(n){return Array.isArray(n)&&n[y1]===!0}function r0(n){return(n.flags&4)!==0}function As(n){return n.componentOffset>-1}function ec(n){return(n.flags&1)===1}function Xr(n){return!!n.template}function tc(n){return(n[ye]&512)!==0}function Do(n){return(n[ye]&256)===256}var i0="svg",b1="math";function cr(n){for(;Array.isArray(n);)n=n[xr];return n}function s0(n,e){return cr(e[n])}function ei(n,e){return cr(e[n.index])}function Hf(n,e){return n.data[e]}function zf(n,e){return n[e]}function o0(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function lr(n,e){let t=e[n];return Zr(t)?t:t[xr]}function E1(n){return(n[ye]&4)===4}function Gf(n){return(n[ye]&128)===128}function w1(n){return Ar(n[Bt])}function nc(n,e){return e==null?null:n[e]}function a0(n){n[So]=0}function c0(n){n[ye]&1024||(n[ye]|=1024,Gf(n)&&rc(n))}function I1(n,e){for(;n>0;)e=e[Io],n--;return e}function hu(n){return!!(n[ye]&9216||n[zn]?.dirty)}function qf(n){n[Ai].changeDetectionScheduler?.notify(8),n[ye]&64&&(n[ye]|=1024),hu(n)&&rc(n)}function rc(n){n[Ai].changeDetectionScheduler?.notify(0);let e=Es(n);for(;e!==null&&!(e[ye]&8192||(e[ye]|=8192,!Gf(e)));)e=Es(e)}function l0(n,e){if(Do(n))throw new B(911,!1);n[Di]===null&&(n[Di]=[]),n[Di].push(e)}function S1(n,e){if(n[Di]===null)return;let t=n[Di].indexOf(e);t!==-1&&n[Di].splice(t,1)}function Es(n){let e=n[Bt];return Ar(e)?e[Bt]:e}function u0(n){return n[Za]??=[]}function d0(n){return n.cleanup??=[]}function C1(n,e,t,r){let i=u0(e);i.push(t),n.firstCreatePass&&d0(n).push(r,i.length-1)}var Se={lFrame:B1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var xy=!1;function T1(){return Se.lFrame.elementDepthCount}function D1(){Se.lFrame.elementDepthCount++}function x1(){Se.lFrame.elementDepthCount--}function Wf(){return Se.bindingsEnabled}function h0(){return Se.skipHydrationRootTNode!==null}function A1(n){return Se.skipHydrationRootTNode===n}function R1(){Se.skipHydrationRootTNode=null}function xe(){return Se.lFrame.lView}function jt(){return Se.lFrame.tView}function z(n){return Se.lFrame.contextLView=n,n[on]}function G(n){return Se.lFrame.contextLView=null,n}function wn(){let n=f0();for(;n!==null&&n.type===64;)n=n.parent;return n}function f0(){return Se.lFrame.currentTNode}function k1(){let n=Se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ic(n,e){let t=Se.lFrame;t.currentTNode=n,t.isParent=e}function p0(){return Se.lFrame.isParent}function m0(){Se.lFrame.isParent=!1}function P1(){return Se.lFrame.contextLView}function g0(){return xy}function _0(n){let e=xy;return xy=n,e}function xo(){let n=Se.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function N1(){return Se.lFrame.bindingIndex}function M1(n){return Se.lFrame.bindingIndex=n}function Kf(){return Se.lFrame.bindingIndex++}function Yf(n){let e=Se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function O1(){return Se.lFrame.inI18n}function F1(n,e){let t=Se.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qf(e)}function L1(){return Se.lFrame.currentDirectiveIndex}function Qf(n){Se.lFrame.currentDirectiveIndex=n}function V1(n){let e=Se.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function v0(){return Se.lFrame.currentQueryIndex}function Jf(n){Se.lFrame.currentQueryIndex=n}function XB(n){let e=n[pe];return e.type===2?e.declTNode:e.type===1?n[bn]:null}function y0(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=XB(s),i===null||(s=s[Io],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Se.lFrame=U1();return r.currentTNode=e,r.lView=n,!0}function Zf(n){let e=U1(),t=n[pe];Se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function U1(){let n=Se.lFrame,e=n===null?null:n.child;return e===null?B1(n):e}function B1(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function j1(){let n=Se.lFrame;return Se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var b0=j1;function Xf(){let n=j1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $1(n){return(Se.lFrame.contextLView=I1(n,Se.lFrame.contextLView))[on]}function Ri(){return Se.lFrame.selectedIndex}function Rs(n){Se.lFrame.selectedIndex=n}function E0(){let n=Se.lFrame;return Hf(n.tView,n.selectedIndex)}function ur(){Se.lFrame.currentNamespace=i0}function sc(){ej()}function ej(){Se.lFrame.currentNamespace=null}function H1(){return Se.lFrame.currentNamespace}var z1=!0;function ep(){return z1}function fu(n){z1=n}function Ay(n,e=null,t=null,r){let i=w0(n,e,t,r);return i.resolveInjectorInitializers(),i}function w0(n,e=null,t=null,r,i=new Set){let s=[t||vn,m1(n)];return r=r||(typeof n=="object"?void 0:xi(n)),new Eo(s,e||Qa(),r||null,i)}var We=class n{static THROW_IF_NOT_FOUND=vo;static NULL=new tu;static create(e,t){if(Array.isArray(e))return Ay({name:""},t,e,"");{let r=e.name??"";return Ay({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>se(Wy)});static __NG_ELEMENT_ID__=-1},et=new Q(""),dr=(()=>{class n{static __NG_ELEMENT_ID__=tj;static __NG_ENV_ID__=t=>t}return n})(),Ry=class extends dr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Do(this._lView)}onDestroy(e){let t=this._lView;return l0(t,e),()=>S1(t,e)}};function tj(){return new Ry(xe())}var G1=!1,ki=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new rt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new _e(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),ky=class extends be{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,e0()&&(this.destroyRef=F(dr,{optional:!0})??void 0,this.pendingTasks=F(ki,{optional:!0})??void 0)}emit(e){let t=Ce(null);try{super.next(e)}finally{Ce(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},je=ky;function Of(...n){}function I0(n){let e,t;function r(){n=Of;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function S0(n){return queueMicrotask(()=>n()),()=>{n=Of}}var C0="isAngularZone",nu=C0+"_ID",nj=0,Me=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new je(!1);onMicrotaskEmpty=new je(!1);onStable=new je(!1);onError=new je(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=G1}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,sj(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(C0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new B(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,rj,Of,Of);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},rj={};function T0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ij(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){I0(()=>{n.callbackScheduled=!1,Py(n),n.isCheckStableRunning=!0,T0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Py(n)}function sj(n){let e=()=>{ij(n)},t=nj++;n._inner=n._inner.fork({name:"angular",properties:{[C0]:!0,[nu]:t,[nu+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(oj(c))return r.invokeTask(s,o,a,c);try{return n1(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),r1(n)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return n1(n),r.invoke(s,o,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!aj(c)&&e(),r1(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Py(n),T0(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Py(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function n1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function r1(n){n._nesting--,T0(n)}var ru=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new je;onMicrotaskEmpty=new je;onStable=new je;onError=new je;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function oj(n){return q1(n,"__ignore_ng_zone__")}function aj(n){return q1(n,"__scheduler_tick__")}function q1(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Yr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},hr=new Q("",{factory:()=>{let n=F(Me),e=F(wt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Yr),t.handleError(r))})}}}),W1={provide:Ya,useValue:()=>{let n=F(Yr,{optional:!0})},multi:!0};function Jt(n,e){let[t,r,i]=ty(n,e?.equal),s=t,o=s[mn];return s.set=r,s.update=i,s.asReadonly=K1.bind(s),s}function K1(){let n=this[mn];if(n.readonlyFn===void 0){let e=()=>this();e[mn]=n,n.readonlyFn=e}return n.readonlyFn}var tp=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=cj}return n})();function cj(){return new tp(xe(),wn())}var ws=class{},pu=new Q("",{factory:()=>!0});var D0=new Q(""),oc=(()=>{class n{internalPendingTasks=F(ki);scheduler=F(ws);errorHandler=F(hr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),x0=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new Ny})}return n})(),Ny=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},My=class{[mn];constructor(e){this[mn]=e}destroy(){this[mn].destroy()}};function xt(n){return ny(n)}function hc(n){return{toString:n}.toString()}var np="__parameters__";function pj(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function mj(n,e,t){return hc(()=>{let r=pj(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,d){let f=c.hasOwnProperty(np)?c[np]:Object.defineProperty(c,np,{value:[]})[np];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Gn=l1(mj("Optional"),8);function bA(n){let e=yn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function gj(n){return typeof n=="function"}function EA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var lp=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Mr=(()=>{let n=()=>wA;return n.ngInherit=!0,n})();function wA(n){return n.type.prototype.ngOnChanges&&(n.setInput=vj),_j}function _j(){let n=SA(this),e=n?.current;if(e){let t=n.previous;if(t===Cs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function vj(n,e,t,r,i){let s=this.declaredInputs[r],o=SA(n)||yj(n,{previous:Cs,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new lp(u&&u.currentValue,t,c===Cs),EA(n,e,i,t)}var IA="__ngSimpleChanges__";function SA(n){return n[IA]||null}function yj(n,e){return n[IA]=e}var Y1=[];var tt=function(n,e=null,t){for(let r=0;r<Y1.length;r++){let i=Y1[r];i(n,e,t)}};function bj(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=wA(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function CA(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function sp(n,e,t){TA(n,e,3,t)}function op(n,e,t,r){(n[ye]&3)===t&&TA(n,e,t,r)}function A0(n,e){let t=n[ye];(t&3)===e&&(t&=16383,t+=1,n[ye]=t)}function TA(n,e,t,r){let i=r!==void 0?n[So]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[So]+=65536),(a<s||s==-1)&&(Ej(n,t,e,c),n[So]=(n[So]&4294901760)+c+2),c++}function Q1(n,e){tt(4,n,e);let t=Ce(null);try{e.call(n)}finally{Ce(t),tt(5,n,e)}}function Ej(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ye]>>14<n[So]>>16&&(n[ye]&3)===e&&(n[ye]+=16384,Q1(a,s)):Q1(a,s)}var cc=-1,Ro=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function wj(n){return(n.flags&8)!==0}function Ij(n){return(n.flags&16)!==0}function Sj(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];Tj(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Cj(n){return n===3||n===4||n===6}function Tj(n){return n.charCodeAt(0)===64}function yu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?J1(n,t,i,null,e[++r]):J1(n,t,i,null,null))}}return n}function J1(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function DA(n){return n!==cc}function up(n){return n&32767}function Dj(n){return n>>16}function dp(n,e){let t=Dj(n),r=e;for(;t>0;)r=r[Io],t--;return r}var U0=!0;function hp(n){let e=U0;return U0=n,e}var xj=256,xA=xj-1,AA=5,Aj=0,ti={};function Rj(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(wo)&&(r=t[wo]),r==null&&(r=t[wo]=Aj++);let i=r&xA,s=1<<i;e.data[n+(i>>AA)]|=s}function fp(n,e){let t=RA(n,e);if(t!==-1)return t;let r=e[pe];r.firstCreatePass&&(n.injectorIndex=e.length,R0(r.data,n),R0(e,null),R0(r.blueprint,null));let i=fb(n,e),s=n.injectorIndex;if(DA(i)){let o=up(i),a=dp(i,e),c=a[pe].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function R0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function RA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function fb(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=OA(i),r===null)return cc;if(t++,i=i[Io],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return cc}function B0(n,e,t){Rj(n,e,t)}function kA(n,e,t){if(t&8||n!==void 0)return n;Vf(e,"NodeInjector")}function PA(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ts],s=_n(void 0);try{return i?i.get(e,r,t&8):Gy(e,r,t&8)}finally{_n(s)}}return kA(r,e,t)}function NA(n,e,t,r=0,i){if(n!==null){if(e[ye]&2048&&!(r&2)){let o=Mj(n,e,t,r,ti);if(o!==ti)return o}let s=MA(n,e,t,r,ti);if(s!==ti)return s}return PA(e,t,r,i)}function MA(n,e,t,r,i){let s=Pj(t);if(typeof s=="function"){if(!y0(e,n,r))return r&1?kA(i,t,r):PA(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Vf(t);else return o}finally{b0()}}else if(typeof s=="number"){let o=null,a=RA(n,e),c=cc,u=r&1?e[Rn][bn]:null;for((a===-1||r&4)&&(c=a===-1?fb(n,e):e[a+8],c===cc||!X1(r,!1)?a=-1:(o=e[pe],a=up(c),e=dp(c,e)));a!==-1;){let d=e[pe];if(Z1(s,a,d.data)){let f=kj(a,e,t,o,r,u);if(f!==ti)return f}c=e[a+8],c!==cc&&X1(r,e[pe].data[a+8]===u)&&Z1(s,a,e)?(o=d,a=up(c),e=dp(c,e)):a=-1}}return i}function kj(n,e,t,r,i,s){let o=e[pe],a=o.data[n+8],c=r==null?As(a)&&U0:r!=o&&(a.type&3)!==0,u=i&1&&s===a,d=ap(a,o,t,c,u);return d!==null?bu(e,o,d,a,i):ti}function ap(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,u=n.directiveEnd,d=s>>20,f=r?a:a+d,_=i?a+d:u;for(let b=f;b<_;b++){let I=o[b];if(b<c&&t===I||b>=c&&I.type===t)return b}if(i){let b=o[c];if(b&&Xr(b)&&b.type===t)return c}return null}function bu(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Ro){let a=s;if(a.resolving){let b=s1(o[t]);throw zy(b)}let c=hp(a.canSeeViewProviders);a.resolving=!0;let u=o[t].type||o[t],d,f=a.injectImpl?_n(a.injectImpl):null,_=y0(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&bj(t,o[t],e)}finally{f!==null&&_n(f),hp(c),a.resolving=!1,b0()}}return s}function Pj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(wo)?n[wo]:void 0;return typeof e=="number"?e>=0?e&xA:Nj:e}function Z1(n,e,t){let r=1<<n;return!!(t[e+(n>>AA)]&r)}function X1(n,e){return!(n&2)&&!(n&1&&e)}var Ao=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return NA(this._tNode,this._lView,e,yo(r),t)}};function Nj(){return new Ao(wn(),xe())}function No(n){return hc(()=>{let e=n.prototype.constructor,t=e[eu]||j0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[eu]||j0(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function j0(n){return Ly(n)?()=>{let e=j0(Qt(n));return e&&e()}:bs(n)}function Mj(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ye]&2048&&!tc(o);){let a=MA(s,o,t,r|2,ti);if(a!==ti)return a;let c=s.parent;if(!c){let u=o[n0];if(u){let d=u.get(t,ti,r);if(d!==ti)return d}c=OA(o),o=o[Io]}s=c}return i}function OA(n){let e=n[pe],t=e.type;return t===2?e.declTNode:t===1?n[bn]:null}function Oj(){return fc(wn(),xe())}function fc(n,e){return new Zt(ei(n,e))}var Zt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Oj}return n})();function Fj(n){return n instanceof Zt?n.nativeElement:n}function Lj(){return this._results[Symbol.iterator]()}var pp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new be}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=d1(e);(this._changesDetected=!u1(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Lj};function FA(n){return(n.flags&128)===128}var pb=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(pb||{}),LA=new Map,Vj=0;function Uj(){return Vj++}function Bj(n){LA.set(n[cu],n)}function $0(n){LA.delete(n[cu])}var eA="__ngContext__";function lc(n,e){Zr(e)?(n[eA]=e[cu],Bj(e)):n[eA]=e}function VA(n){return BA(n[Xa])}function UA(n){return BA(n[ar])}function BA(n){for(;n!==null&&!Ar(n);)n=n[ar];return n}var H0;function mb(n){H0=n}function jA(){if(H0!==void 0)return H0;if(typeof document<"u")return document;throw new B(210,!1)}var wp=new Q("",{factory:()=>jj}),jj="ng";var Ip=new Q(""),Ni=new Q("",{providedIn:"platform",factory:()=>"unknown"}),Sp=new Q(""),Cp=new Q("",{factory:()=>jA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var $A=!1,HA=new Q("",{factory:()=>$A});var gb=new Q("");var $j=(n,e,t,r)=>{};function Hj(n,e,t,r){$j(n,e,t,r)}function Tp(n){return(n.flags&32)===32}var zj=()=>null;function zA(n,e,t=!1){return zj(n,e,t)}function GA(n,e){let t=n.contentQueries;if(t!==null){let r=Ce(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Jf(s),a.contentQueries(2,e[o],o)}}}finally{Ce(r)}}}function z0(n,e,t){Jf(0);let r=Ce(null);try{e(n,t)}finally{Ce(r)}}function _b(n,e,t){if(r0(e)){let r=Ce(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Ce(r)}}}var Pr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Pr||{});var G0=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fy})`}};function Dp(n){return n instanceof G0?n.changingThisBreaksApplicationSecurity:n}var Gj=/^>|^->|<!--|-->|--!>|<!-$/g,qj=/(<|>)/g,Wj="\u200B$1\u200B";function Kj(n){return n.replace(Gj,e=>e.replace(qj,Wj))}function Cu(n){return n.ownerDocument.defaultView}function qA(n){return n instanceof Function?n():n}function Yj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var WA="ng-template";function Qj(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Yj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(vb(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function vb(n){return n.type===4&&n.value!==WA}function Jj(n,e,t){let r=n.type===4&&!t?WA:n.value;return e===r}function Zj(n,e,t){let r=4,i=n.attrs,s=i!==null?t3(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Rr(r)&&!Rr(c))return!1;if(o&&Rr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Jj(n,c,t)||c===""&&e.length===1){if(Rr(r))return!1;o=!0}}else if(r&8){if(i===null||!Qj(n,i,c,t)){if(Rr(r))return!1;o=!0}}else{let u=e[++a],d=Xj(c,i,vb(n),t);if(d===-1){if(Rr(r))return!1;o=!0;continue}if(u!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(Rr(r))return!1;o=!0}}}}return Rr(r)||o}function Rr(n){return(n&1)===0}function Xj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return n3(e,n)}function KA(n,e,t=!1){for(let r=0;r<e.length;r++)if(Zj(n,e[r],t))return!0;return!1}function e3(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function t3(n){for(let e=0;e<n.length;e++){let t=n[e];if(Cj(t))return e}return n.length}function n3(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function r3(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function tA(n,e){return n?":not("+e.trim()+")":e}function i3(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Rr(o)&&(e+=tA(s,i),i=""),r=o,s=s||!Rr(r);t++}return i!==""&&(e+=tA(s,i)),e}function s3(n){return n.map(i3).join(",")}function o3(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Rr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Pn={};function a3(n,e){return n.createText(e)}function c3(n,e,t){n.setValue(e,t)}function l3(n,e){return n.createComment(Kj(e))}function YA(n,e,t){return n.createElement(e,t)}function mp(n,e,t,r,i){n.insertBefore(e,t,r,i)}function QA(n,e,t){n.appendChild(e,t)}function nA(n,e,t,r,i){r!==null?mp(n,e,t,r,i):QA(n,e,t)}function u3(n,e,t,r){n.removeChild(null,e,t,r)}function d3(n,e,t){n.setAttribute(e,"style",t)}function h3(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function JA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Sj(n,e,r),i!==null&&h3(n,e,i),s!==null&&d3(n,e,s)}function yb(n,e,t,r,i,s,o,a,c,u,d){let f=Dt+r,_=f+i,b=f3(f,_),I=typeof u=="function"?u():u;return b[pe]={type:n,blueprint:b,template:t,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function f3(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Pn);return t}function p3(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=yb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function bb(n,e,t,r,i,s,o,a,c,u,d){let f=e.blueprint.slice();return f[xr]=i,f[ye]=r|4|128|8|64|1024,(u!==null||n&&n[ye]&2048)&&(f[ye]|=2048),a0(f),f[Bt]=f[Io]=n,f[on]=t,f[Ai]=o||n&&n[Ai],f[pt]=a||n&&n[pt],f[Ts]=c||n&&n[Ts]||null,f[bn]=s,f[cu]=Uj(),f[Ja]=d,f[n0]=u,f[Rn]=e.type==2?n[Rn]:f,f}function m3(n,e,t){let r=ei(e,n),i=p3(t),s=n[Ai].rendererFactory,o=Eb(n,bb(n,i,null,ZA(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function ZA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function XA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Eb(n,e){return n[Xa]?n[t0][ar]=e:n[Xa]=e,n[t0]=e,e}function y(n=1){eR(jt(),xe(),Ri()+n,!1)}function eR(n,e,t,r){if(!r)if((e[ye]&3)===3){let s=n.preOrderCheckHooks;s!==null&&sp(e,s,t)}else{let s=n.preOrderHooks;s!==null&&op(e,s,0,t)}Rs(t)}var xp=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(xp||{});function q0(n,e,t,r){let i=Ce(null);try{let[s,o,a]=n.inputs[t],c=null;(o&xp.SignalBased)!==0&&(c=e[s][mn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):EA(e,c,s,r)}finally{Ce(i)}}var ni=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ni||{}),g3;function wb(n,e){return g3(n,e)}var uc=new Set,Ap=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ap||{}),Mo=new Q(""),rA=new Set;function Oo(n){rA.has(n)||(rA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ib=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),tR=[0,1,2,3],nR=(()=>{class n{ngZone=F(Me);scheduler=F(ws);errorHandler=F(Yr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F(Mo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&tt(16),this.executing=!0;for(let r of tR)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&tt(17)}register(t){let{view:r}=t;r!==void 0?((r[Co]??=[]).push(t),rc(r),r[ye]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ap.AFTER_NEXT_RENDER,t):t()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),gp=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Co];e&&(this.view[Co]=e.filter(t=>t!==this))}};function Fo(n,e){let t=e?.injector??F(We);return Oo("NgAfterNextRender"),v3(n,t,e,!0)}function _3(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function v3(n,e,t,r){let i=e.get(Ib);i.impl??=e.get(nR);let s=e.get(Mo,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(dr):null,a=e.get(tp,null,{optional:!0}),c=new gp(i.impl,_3(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var y3=new Q("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function rR(n,e,t){let r=n.get(y3);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function b3(n,e){for(let[t,r]of e)rR(n,r.animateFns)}function iA(n,e,t,r){let i=n?.[uu]?.enter;e!==null&&i&&i.has(t.index)&&b3(r,i)}function ac(n,e,t,r,i,s,o,a){if(i!=null){let c,u=!1;Ar(i)?c=i:Zr(i)&&(u=!0,i=i[xr]);let d=cr(i);n===0&&r!==null?(iA(a,r,s,t),o==null?QA(e,r,d):mp(e,r,d,o||null,!0)):n===1&&r!==null?(iA(a,r,s,t),mp(e,r,d,o||null,!0)):n===2?sA(a,s,t,f=>{u3(e,d,u,f)}):n===3&&sA(a,s,t,()=>{e.destroyNode(d)}),c!=null&&k3(e,n,t,c,s,r,o)}}function E3(n,e){iR(n,e),e[xr]=null,e[bn]=null}function w3(n,e,t,r,i,s){r[xr]=i,r[bn]=e,Rp(n,r,t,1,i,s)}function iR(n,e){e[Ai].changeDetectionScheduler?.notify(9),Rp(n,e,e[pt],2,null,null)}function I3(n){let e=n[Xa];if(!e)return k0(n[pe],n);for(;e;){let t=null;if(Zr(e))t=e[Xa];else{let r=e[En];r&&(t=r)}if(!t){for(;e&&!e[ar]&&e!==n;)Zr(e)&&k0(e[pe],e),e=e[Bt];e===null&&(e=n),Zr(e)&&k0(e[pe],e),t=e&&e[ar]}e=t}}function Sb(n,e){let t=n[To],r=t.indexOf(e);t.splice(r,1)}function sR(n,e){if(Do(e))return;let t=e[pt];t.destroyNode&&Rp(n,e,t,3,null,null),I3(e)}function k0(n,e){if(Do(e))return;let t=Ce(null);try{e[ye]&=-129,e[ye]|=256,e[zn]&&ql(e[zn]),T3(n,e),C3(n,e),e[pe].type===1&&e[pt].destroy();let r=e[Ds];if(r!==null&&Ar(e[Bt])){r!==e[Bt]&&Sb(r,e);let i=e[Jr];i!==null&&i.detachView(n)}$0(e)}finally{Ce(t)}}function sA(n,e,t,r){let i=n?.[uu];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&uc.add(n),rR(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let u=o.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),S3(n,r)}else n&&uc.delete(n),r(!1)},i)}function S3(n,e){let t=n[uu]?.running;if(t){t.then(()=>{n[uu].running=void 0,uc.delete(n),e(!0)});return}e(!1)}function C3(n,e){let t=n.cleanup,r=e[Za];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Za]=null);let i=e[Di];if(i!==null){e[Di]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[lu];if(s!==null){e[lu]=null;for(let o of s)o.destroy()}}function T3(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ro)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];tt(4,a,c);try{c.call(a)}finally{tt(5,a,c)}}else{tt(4,i,s);try{s.call(i)}finally{tt(5,i,s)}}}}}function oR(n,e,t){return D3(n,e.parent,t)}function D3(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[xr];if(As(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Pr.None||i===Pr.Emulated)return null}return ei(r,t)}function aR(n,e,t){return A3(n,e,t)}function x3(n,e,t){return n.type&40?ei(n,t):null}var A3=x3,oA;function Cb(n,e,t,r){let i=oR(n,r,e),s=e[pt],o=r.parent||e[bn],a=aR(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)nA(s,i,t[c],a,!1);else nA(s,i,t,a,!1);oA!==void 0&&oA(s,r,e,t,i)}function gu(n,e){if(e!==null){let t=e.type;if(t&3)return ei(e,n);if(t&4)return W0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return gu(n,r);{let i=n[e.index];return Ar(i)?W0(-1,i):cr(i)}}else{if(t&128)return gu(n,e.next);if(t&32)return wb(e,n)()||cr(n[e.index]);{let r=cR(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Es(n[Rn]);return gu(i,r)}else return gu(n,e.next)}}}return null}function cR(n,e){if(e!==null){let r=n[Rn][bn],i=e.projection;return r.projection[i]}return null}function W0(n,e){let t=En+n+1;if(t<e.length){let r=e[t],i=r[pe].firstChild;if(i!==null)return gu(r,i)}return e[xs]}function Tb(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Ts];if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(o&&e===0&&(c&&lc(cr(c),r),t.flags|=2),!Tp(t))if(u&8)Tb(n,e,t.child,r,i,s,!1),ac(e,n,a,i,c,t,s,r);else if(u&32){let d=wb(t,r),f;for(;f=d();)ac(e,n,a,i,f,t,s,r);ac(e,n,a,i,c,t,s,r)}else u&16?lR(n,e,r,t,i,s):ac(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function Rp(n,e,t,r,i,s){Tb(t,r,n.firstChild,e,i,s,!1)}function R3(n,e,t){let r=e[pt],i=oR(n,t,e),s=t.parent||e[bn],o=aR(s,t,e);lR(r,0,e,t,i,o)}function lR(n,e,t,r,i,s){let o=t[Rn],c=o[bn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];ac(e,n,t[Ts],i,d,r,s,t)}else{let u=c,d=o[Bt];FA(r)&&(u.flags|=128),Tb(n,e,u,d,i,s,!0)}}function k3(n,e,t,r,i,s,o){let a=r[xs],c=cr(r);a!==c&&ac(e,n,t,s,a,i,o);for(let u=En;u<r.length;u++){let d=r[u];Rp(d[pe],d,n,e,s,a)}}function P3(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:ni.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ni.Important),n.setStyle(t,r,i,s))}}function uR(n,e,t,r,i){let s=Ri(),o=r&2;try{Rs(-1),o&&e.length>Dt&&eR(n,e,Dt,!1),tt(o?2:0,i,t),t(r,i)}finally{Rs(s),tt(o?3:1,i,t)}}function kp(n,e,t){U3(n,e,t),(t.flags&64)===64&&B3(n,e,t)}function Pp(n,e,t=ei){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function N3(n,e,t,r){let s=r.get(HA,$A)||t===Pr.ShadowDom||t===Pr.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return M3(o),o}function M3(n){O3(n)}var O3=()=>null;function F3(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function dR(n,e,t,r,i,s){let o=e[pe];if(xb(n,o,e,t,r)){As(n)&&V3(e,n.index);return}n.type&3&&(t=F3(t)),L3(n,e,t,r,i,s)}function L3(n,e,t,r,i,s){if(n.type&3){let o=ei(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function V3(n,e){let t=lr(e,n);t[ye]&16||(t[ye]|=64)}function U3(n,e,t){let r=t.directiveStart,i=t.directiveEnd;As(t)&&m3(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||fp(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=bu(e,n,o,t);if(lc(c,e),s!==null&&$3(e,o-r,c,a,t,s),Xr(a)){let u=lr(t.index,e);u[on]=bu(e,n,o,t)}}}function B3(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=L1();try{Rs(s);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Qf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&j3(c,u)}}finally{Rs(-1),Qf(o)}}function j3(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Db(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];KA(e,s.selectors,!1)&&(r??=[],Xr(s)?r.unshift(s):r.push(s))}return r}function $3(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],u=o[a+1];q0(r,t,c,u)}}function hR(n,e,t,r,i){let s=Dt+t,o=e[pe],a=i(o,e,n,r,t);e[s]=a,ic(n,!0);let c=n.type===2;return c?(JA(e[pt],a,n),(T1()===0||ec(n))&&lc(a,e),D1()):lc(a,e),ep()&&(!c||!Tp(n))&&Cb(o,e,a,n),n}function fR(n){let e=n;return p0()?m0():(e=e.parent,ic(e,!1)),e}function H3(n,e){let t=n[Ts];if(!t)return;let r;try{r=t.get(hr,null)}catch{r=null}r?.(e)}function xb(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let u=o[c],d=o[c+1],f=e.data[u];q0(f,t[u],d,i),a=!0}if(s)for(let c of s){let u=t[c],d=e.data[c];q0(d,u,r,i),a=!0}return a}function z3(n,e){let t=lr(e,n),r=t[pe];G3(r,t);let i=t[xr];i!==null&&t[Ja]===null&&(t[Ja]=zA(i,t[Ts])),tt(18),Ab(r,t,t[on]),tt(19,t[on])}function G3(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ab(n,e,t){Zf(e);try{let r=n.viewQuery;r!==null&&z0(1,r,t);let i=n.template;i!==null&&uR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Jr]?.finishViewCreation(n),n.staticContentQueries&&GA(n,e),n.staticViewQueries&&z0(2,n.viewQuery,t);let s=n.components;s!==null&&q3(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ye]&=-5,Xf()}}function q3(n,e){for(let t=0;t<e.length;t++)z3(n,e[t])}function pR(n,e,t,r){let i=Ce(null);try{let s=e.tView,a=n[ye]&4096?4096:16,c=bb(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Ds]=u;let d=n[Jr];return d!==null&&(c[Jr]=d.createEmbeddedView(s)),Ab(s,c,t),c}finally{Ce(i)}}function K0(n,e){return!e||e.firstChild===null||FA(n)}function Eu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(cr(s)),Ar(s)&&mR(s,r);let o=t.type;if(o&8)Eu(n,e,t.child,r);else if(o&32){let a=wb(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=cR(e,t);if(Array.isArray(a))r.push(...a);else{let c=Es(e[Rn]);Eu(c[pe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function mR(n,e){for(let t=En;t<n.length;t++){let r=n[t],i=r[pe].firstChild;i!==null&&Eu(r[pe],r,i,e)}n[xs]!==n[xr]&&e.push(n[xs])}function gR(n){if(n[Co]!==null){for(let e of n[Co])e.impl.addSequence(e);n[Co].length=0}}var _R=[];function W3(n){return n[zn]??K3(n)}function K3(n){let e=_R.pop()??Object.create(Q3);return e.lView=n,e}function Y3(n){n.lView[zn]!==n&&(n.lView=null,_R.push(n))}var Q3=ee(O({},Hl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{rc(n.lView)},consumerOnSignalRead(){this.lView[zn]=this}});function J3(n){let e=n[zn]??Object.create(Z3);return e.lView=n,e}var Z3=ee(O({},Hl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Es(n.lView);for(;e&&!vR(e[pe]);)e=Es(e);e&&c0(e)},consumerOnSignalRead(){this.lView[zn]=this}});function vR(n){return n.type!==2}function yR(n){if(n[lu]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[lu])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ye]&8192)}}var X3=100;function bR(n,e=0){let r=n[Ai].rendererFactory,i=!1;i||r.begin?.();try{e4(n,e)}finally{i||r.end?.()}}function e4(n,e){let t=g0();try{_0(!0),Y0(n,e);let r=0;for(;hu(n);){if(r===X3)throw new B(103,!1);r++,Y0(n,1)}}finally{_0(t)}}function t4(n,e,t,r){if(Do(e))return;let i=e[ye],s=!1,o=!1;Zf(e);let a=!0,c=null,u=null;s||(vR(n)?(u=W3(e),c=Gl(u)):Kh()===null?(a=!1,u=J3(e),c=Gl(u)):e[zn]&&(ql(e[zn]),e[zn]=null));try{a0(e),M1(n.bindingStartIndex),t!==null&&uR(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let b=n.preOrderCheckHooks;b!==null&&sp(e,b,null)}else{let b=n.preOrderHooks;b!==null&&op(e,b,0,null),A0(e,0)}if(o||n4(e),yR(e),ER(e,0),n.contentQueries!==null&&GA(n,e),!s)if(d){let b=n.contentCheckHooks;b!==null&&sp(e,b)}else{let b=n.contentHooks;b!==null&&op(e,b,1),A0(e,1)}i4(n,e);let f=n.components;f!==null&&IR(e,f,0);let _=n.viewQuery;if(_!==null&&z0(2,_,r),!s)if(d){let b=n.viewCheckHooks;b!==null&&sp(e,b)}else{let b=n.viewHooks;b!==null&&op(e,b,2),A0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[$f]){for(let b of e[$f])b();e[$f]=null}s||(gR(e),e[ye]&=-73)}catch(d){throw s||rc(e),d}finally{u!==null&&(Yh(u,c),a&&Y3(u)),Xf()}}function ER(n,e){for(let t=VA(n);t!==null;t=UA(t))for(let r=En;r<t.length;r++){let i=t[r];wR(i,e)}}function n4(n){for(let e=VA(n);e!==null;e=UA(e)){if(!(e[ye]&2))continue;let t=e[To];for(let r=0;r<t.length;r++){let i=t[r];c0(i)}}}function r4(n,e,t){tt(18);let r=lr(e,n);wR(r,t),tt(19,r[on])}function wR(n,e){Gf(n)&&Y0(n,e)}function Y0(n,e){let r=n[pe],i=n[ye],s=n[zn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Qh(s)),o||=!1,s&&(s.dirty=!1),n[ye]&=-9217,o)t4(r,n,r.template,n[on]);else if(i&8192){let a=Ce(null);try{yR(n),ER(n,1);let c=r.components;c!==null&&IR(n,c,1),gR(n)}finally{Ce(a)}}}function IR(n,e,t){for(let r=0;r<e.length;r++)r4(n,e[r],t)}function i4(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Rs(~i);else{let s=i,o=t[++r],a=t[++r];F1(o,s);let c=e[s];tt(24,c),a(2,c),tt(25,c)}}}finally{Rs(-1)}}function Rb(n,e){let t=g0()?64:1088;for(n[Ai].changeDetectionScheduler?.notify(e);n;){n[ye]|=t;let r=Es(n);if(tc(n)&&!r)return n;n=r}return null}function SR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function CR(n,e,t,r=!0){let i=e[pe];if(s4(i,e,n,t),r){let o=W0(t,n),a=e[pt],c=a.parentNode(n[xs]);c!==null&&w3(i,n[bn],a,e,c,o)}let s=e[Ja];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Q0(n,e){if(n.length<=En)return;let t=En+e,r=n[t];if(r){let i=r[Ds];i!==null&&i!==n&&Sb(i,r),e>0&&(n[t-1][ar]=r[ar]);let s=ou(n,En+e);E3(r[pe],r);let o=s[Jr];o!==null&&o.detachView(s[pe]),r[Bt]=null,r[ar]=null,r[ye]&=-129}return r}function s4(n,e,t,r){let i=En+r,s=t.length;r>0&&(t[i-1][ar]=e),r<s-En?(e[ar]=t[i],qy(t,En+r,e)):(t.push(e),e[ar]=null),e[Bt]=t;let o=e[Ds];o!==null&&t!==o&&TR(o,e);let a=e[Jr];a!==null&&a.insertView(n),qf(e),e[ye]|=128}function TR(n,e){let t=n[To],r=e[Bt];if(Zr(r))n[ye]|=2;else{let i=r[Bt][Rn];e[Rn]!==i&&(n[ye]|=2)}t===null?n[To]=[e]:t.push(e)}var ks=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[pe];return Eu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[on]}set context(e){this._lView[on]=e}get destroyed(){return Do(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Bt];if(Ar(e)){let t=e[du],r=t?t.indexOf(this):-1;r>-1&&(Q0(e,r),ou(t,r))}this._attachedToViewContainer=!1}sR(this._lView[pe],this._lView)}onDestroy(e){l0(this._lView,e)}markForCheck(){Rb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ye]&=-129}reattach(){qf(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,bR(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=tc(this._lView),t=this._lView[Ds];t!==null&&!e&&Sb(t,this._lView),iR(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;let t=tc(this._lView),r=this._lView[Ds];r!==null&&!t&&TR(r,this._lView),qf(this._lView)}};var Nr=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=o4;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=pR(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ks(s)}}return n})();function o4(){return Np(wn(),xe())}function Np(n,e){return n.type&4?new Nr(e,n,fc(n,e)):null}function Tu(n,e,t,r,i){let s=n.data[e];if(s===null)s=a4(n,e,t,r,i),O1()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=k1();s.injectorIndex=o===null?-1:o.injectorIndex}return ic(s,!0),s}function a4(n,e,t,r,i){let s=f0(),o=p0(),a=o?s:s&&s.parent,c=n.data[e]=l4(n,a,t,e,r,i);return c4(n,c,s,o),c}function c4(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function l4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return h0()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var u4=()=>null;function J0(n,e){return u4(n,e)}var DR=class{},Mp=class{},Z0=class{resolveComponentFactory(e){throw new B(917,!1)}},Du=class{static NULL=new Z0},kn=class{},Mi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>d4()}return n})();function d4(){let n=xe(),e=wn(),t=lr(e.index,n);return(Zr(t)?t:n)[pt]}var xR=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var cp={},X0=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,cp,r);return i!==cp||t===cp?i:this.parentInjector.get(e,t,r)}};function aA(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Ff(i,a);else if(s==2){let c=a,u=e[++o];r=Ff(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ie(n,e=0){let t=xe();if(t===null)return se(n,e);let r=wn();return NA(r,t,Qt(n),e)}function kb(){let n="invalid";throw new Error(n)}function AR(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,u=null;for(let d of o)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(o);break}p4(n,e,t,a,s,c,u)}s!==null&&r!==null&&h4(t,r,s)}function h4(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new B(-301,!1);r.push(e[i],s)}}function f4(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function p4(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let _=0;_<a;_++){let b=r[_];!c&&Xr(b)&&(c=!0,f4(n,t,_)),B0(fp(t,e),n,b.type)}b4(t,n.data.length,a);for(let _=0;_<a;_++){let b=r[_];b.providersResolver&&b.providersResolver(b)}let u=!1,d=!1,f=XA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let _=0;_<a;_++){let b=r[_];if(t.mergedAttrs=yu(t.mergedAttrs,b.hostAttrs),g4(n,t,e,f,b),y4(f,b,i),o!==null&&o.has(b)){let[k,N]=o.get(b);t.directiveToIndex.set(b.type,[f,k+t.directiveStart,N+t.directiveStart])}else(s===null||!s.has(b))&&t.directiveToIndex.set(b.type,f);b.contentQueries!==null&&(t.flags|=4),(b.hostBindings!==null||b.hostAttrs!==null||b.hostVars!==0)&&(t.flags|=64);let I=b.type.prototype;!u&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}m4(n,t,s)}function m4(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))cA(0,e,i,r),cA(1,e,i,r),uA(e,r,!1);else{let s=t.get(i);lA(0,e,s,r),lA(1,e,s,r),uA(e,r,!0)}}}function cA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),RR(e,s)}}function lA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),RR(e,o)}}function RR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function uA(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||vb(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let u=s[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){o??=[],o.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function g4(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=bs(i.type,!0)),o=new Ro(s,Xr(i),ie,null);n.blueprint[r]=o,t[r]=o,_4(n,e,r,XA(n,t,i.hostVars,Pn),i)}function _4(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;v4(o)!=a&&o.push(a),o.push(t,r,s)}}function v4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function y4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Xr(e)&&(t[""]=n)}}function b4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Pb(n,e,t,r,i,s,o,a){let c=e[pe],u=c.consts,d=nc(u,o),f=Tu(c,n,t,r,d);return s&&AR(c,e,f,nc(u,a),i),f.mergedAttrs=yu(f.mergedAttrs,f.attrs),f.attrs!==null&&aA(f,f.attrs,!1),f.mergedAttrs!==null&&aA(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function Nb(n,e){CA(n,e),r0(e)&&n.queries.elementEnd(e)}function Mb(n){return PR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function kR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function PR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Op(n,e,t){return n[e]=t}function E4(n,e){return n[e]}function Pi(n,e,t){if(t===Pn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Ob(n,e,t,r){let i=Pi(n,e,t);return Pi(n,e+1,r)||i}function w4(n,e,t,r,i){let s=Ob(n,e,t,r);return Pi(n,e+2,i)||s}function P0(n,e,t){return function r(i){let s=As(n)?lr(n.index,e):e;Rb(s,5);let o=e[on],a=dA(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=dA(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function dA(n,e,t,r){let i=Ce(null);try{return tt(6,e,t),t(r)!==!1}catch(s){return H3(n,s),!1}finally{tt(7,e,t),Ce(i)}}function I4(n,e,t,r,i,s,o,a){let c=ec(n),u=!1,d=null;if(!r&&c&&(d=C4(e,t,s,n.index)),d!==null){let f=d.__ngLastListenerFn__||d;f.__ngNextListenerFn__=o,d.__ngLastListenerFn__=o,u=!0}else{let f=ei(n,t),_=r?r(f):f;Hj(t,_,s,a);let b=i.listen(_,s,a);if(!S4(s)){let I=r?k=>r(cr(k[n.index])):n.index;NR(I,e,t,s,a,b,!1)}}return u}function S4(n){return n.startsWith("animation")||n.startsWith("transition")}function C4(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Za],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function NR(n,e,t,r,i,s,o){let a=e.firstCreatePass?d0(e):null,c=u0(t),u=c.length;c.push(i,s),a&&a.push(r,n,u,(u+1)*(o?-1:1))}function hA(n,e,t,r,i,s){let o=e[t],a=e[pe],u=a.data[t].outputs[r],f=o[u].subscribe(s);NR(n.index,a,e,i,s,f,!0)}var eb=Symbol("BINDING");var _p=class extends Du{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Qr(e);return new Ps(t,this.ngModule)}};function T4(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&xp.SignalBased)!==0};return i&&(s.transform=i),s})}function D4(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function x4(n,e,t){let r=e instanceof wt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new X0(t,r):t}function A4(n){let e=n.get(kn,null);if(e===null)throw new B(407,!1);let t=n.get(xR,null),r=n.get(ws,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function R4(n,e){let t=MR(n);return YA(e,t,t==="svg"?i0:t==="math"?b1:null)}function MR(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ps=class extends Mp{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=T4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=D4(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=s3(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){tt(22);let a=Ce(null);try{let c=this.componentDef,u=k4(r,c,o,s),d=x4(c,i||this.ngModule,e),f=A4(d),_=f.rendererFactory.createRenderer(null,c),b=r?N3(_,r,c.encapsulation,d):R4(c,_),I=o?.some(fA)||s?.some(j=>typeof j!="function"&&j.bindings.some(fA)),k=bb(null,u,null,512|ZA(c),null,null,f,_,d,null,zA(b,d,!0));k[Dt]=b,Zf(k);let N=null;try{let j=Pb(Dt,k,2,"#host",()=>u.directiveRegistry,!0,0);JA(_,b,j),lc(b,k),kp(u,k,j),_b(u,j,k),Nb(u,j),t!==void 0&&N4(j,this.ngContentSelectors,t),N=lr(j.index,k),k[on]=N[on],Ab(u,k,null)}catch(j){throw N!==null&&$0(N),$0(k),j}finally{tt(23),Xf()}return new vp(this.componentType,k,!!I)}finally{Ce(a)}}};function k4(n,e,t,r){let i=n?["ng-version","21.0.0"]:o3(e.selectors[0]),s=null,o=null,a=0;if(t)for(let d of t)a+=d[eb].requiredVars,d.create&&(d.targetIdx=0,(s??=[]).push(d)),d.update&&(d.targetIdx=0,(o??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let f=r[d];if(typeof f!="function")for(let _ of f.bindings){a+=_[eb].requiredVars;let b=d+1;_.create&&(_.targetIdx=b,(s??=[]).push(_)),_.update&&(_.targetIdx=b,(o??=[]).push(_))}}let c=[e];if(r)for(let d of r){let f=typeof d=="function"?d:d.type,_=Qy(f);c.push(_)}return yb(0,null,P4(s,o),1,a,c,null,null,null,[i],null)}function P4(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function fA(n){let e=n[eb].kind;return e==="input"||e==="twoWay"}var vp=class extends DR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Hf(t[pe],Dt),this.location=fc(this._tNode,t),this.instance=lr(this._tNode.index,t)[on],this.hostView=this.changeDetectorRef=new ks(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=xb(r,i[pe],i,e,t);this.previousInputValues.set(e,t);let o=lr(r.index,i);Rb(o,1)}get injector(){return new Ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function N4(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var qn=(()=>{class n{static __NG_ELEMENT_ID__=M4}return n})();function M4(){let n=wn();return FR(n,xe())}var O4=qn,OR=class extends O4{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return fc(this._hostTNode,this._hostLView)}get injector(){return new Ao(this._hostTNode,this._hostLView)}get parentInjector(){let e=fb(this._hostTNode,this._hostLView);if(DA(e)){let t=dp(e,this._hostLView),r=up(e),i=t[pe].data[r+8];return new Ao(i,t)}else return new Ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=pA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-En}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=J0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,K0(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!gj(e),u;if(c)u=t;else{let N=t||{};u=N.index,r=N.injector,i=N.projectableNodes,s=N.environmentInjector||N.ngModuleRef,o=N.directives,a=N.bindings}let d=c?e:new Ps(Qr(e)),f=r||this.parentInjector;if(!s&&d.ngModule==null){let j=(c?f:this.parentInjector).get(wt,null);j&&(s=j)}let _=Qr(d.componentType??{}),b=J0(this._lContainer,_?.id??null),I=b?.firstChild??null,k=d.create(f,i,I,s,o,a);return this.insertImpl(k.hostView,u,K0(this._hostTNode,b)),k}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(w1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Bt],u=new OR(c,c[bn],c[Bt]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return CR(o,i,s,r),e.attachToViewContainerRef(),qy(N0(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=pA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Q0(this._lContainer,t);r&&(ou(N0(this._lContainer),t),sR(r[pe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Q0(this._lContainer,t);return r&&ou(N0(this._lContainer),t)!=null?new ks(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function pA(n){return n[du]}function N0(n){return n[du]||(n[du]=[])}function FR(n,e){let t,r=e[n.index];return Ar(r)?t=r:(t=SR(r,e,null,n),e[n.index]=t,Eb(e,t)),L4(t,e,n,r),new OR(t,n,e)}function F4(n,e){let t=n[pt],r=t.createComment(""),i=ei(e,n),s=t.parentNode(i);return mp(t,s,r,t.nextSibling(i),!1),r}var L4=B4,V4=()=>!1;function U4(n,e,t){return V4(n,e,t)}function B4(n,e,t,r){if(n[xs])return;let i;t.type&8?i=cr(r):i=F4(e,t),n[xs]=i}var tb=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},nb=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Fb(e,t).matches!==null&&this.queries[t].setDirty()}},rb=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=K4(e):this.predicate=e}},ib=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},sb=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,j4(t,s)),this.matchTNodeWithReadOption(e,t,ap(t,e,s,!1,!1))}else r===Nr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ap(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Zt||i===qn||i===Nr&&t.type&4)this.addMatch(t.index,-2);else{let s=ap(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function j4(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function $4(n,e){return n.type&11?fc(n,e):n.type&4?Np(n,e):null}function H4(n,e,t,r){return t===-1?$4(e,n):t===-2?z4(n,e,r):bu(n,n[pe],t,e)}function z4(n,e,t){if(t===Zt)return fc(e,n);if(t===Nr)return Np(e,n);if(t===qn)return FR(e,n)}function LR(n,e,t,r){let i=e[Jr].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let d=s[u];a.push(H4(e,d,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function ob(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=LR(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let u=s[a+1],d=e[-c];for(let f=En;f<d.length;f++){let _=d[f];_[Ds]===_[Bt]&&ob(_[pe],_,u,r)}if(d[To]!==null){let f=d[To];for(let _=0;_<f.length;_++){let b=f[_];ob(b[pe],b,u,r)}}}}}return r}function G4(n,e){return n[Jr].queries[e].queryList}function q4(n,e,t){let r=new pp((t&4)===4);return C1(n,e,r,r.destroy),(e[Jr]??=new nb).queries.push(new tb(r))-1}function W4(n,e,t){let r=jt();return r.firstCreatePass&&(Y4(r,new rb(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),q4(r,xe(),e)}function K4(n){return n.split(",").map(e=>e.trim())}function Y4(n,e,t){n.queries===null&&(n.queries=new ib),n.queries.track(new sb(e,t))}function Fb(n,e){return n.queries.getByIndex(e)}function Q4(n,e){let t=n[pe],r=Fb(t,e);return r.crossesNgTemplate?ob(t,n,e,[]):LR(t,n,r,e)}var ab=new Map,J4=new Set;async function VR(n){let e=ab;ab=new Map;let t=new Map;function r(s){let o=t.get(s);if(o)return o;let a=n(s).then(c=>Z4(s,c));return t.set(s,a),a}let i=Array.from(e).map(async([s,o])=>{if(o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");let a=[];o.templateUrl&&a.push(r(o.templateUrl).then(f=>{o.template=f}));let c=typeof o.styles=="string"?[o.styles]:o.styles??[];o.styles=c;let{styleUrl:u,styleUrls:d}=o;if(u&&(d=[u],o.styleUrl=void 0),d?.length){let f=Promise.all(d.map(_=>r(_))).then(_=>{c.push(..._),o.styleUrls=void 0});a.push(f)}await Promise.all(a),J4.delete(s)});await Promise.all(i)}function UR(){return ab.size===0}async function Z4(n,e){if(typeof e=="string")return e;if(e.status!==void 0&&e.status!==200)throw new B(918,!1);return e.text()}var ko=class{},Fp=class{};var wu=class extends ko{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new _p(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=Yy(e);this._bootstrapComponents=qA(s.bootstrap),this._r3Injector=w0(e,t,[{provide:ko,useValue:this},{provide:Du,useValue:this.componentFactoryResolver},...r],xi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Iu=class extends Fp{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new wu(this.moduleType,e,[])}};function BR(n,e,t){return new wu(n,e,t,!1)}var yp=class extends ko{injector;componentFactoryResolver=new _p(this);instance=null;constructor(e){super();let t=new Eo([...e.providers,{provide:ko,useValue:this},{provide:Du,useValue:this.componentFactoryResolver}],e.parent||Qa(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function pc(n,e,t=null){return new yp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var X4=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Jy(!1,t.type),i=r.length>0?pc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(se(wt))})}return n})();function st(n){return hc(()=>{let e=jR(n),t=ee(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===pb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(X4).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pr.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Oo("NgStandalone"),$R(t);let r=n.dependencies;return t.directiveDefs=mA(r,e5),t.pipeDefs=mA(r,p1),t.id=r5(t),t})}function e5(n){return Qr(n)||Qy(n)}function gt(n){return hc(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function t5(n,e){if(n==null)return Cs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=xp.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function n5(n){if(n==null)return Cs;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ut(n){return hc(()=>{let e=jR(n);return $R(e),e})}function xu(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function jR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Cs,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:t5(n.inputs,e),outputs:n5(n.outputs),debugInfo:null}}function $R(n){n.features?.forEach(e=>e(n))}function mA(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function r5(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function i5(n){return Object.getPrototypeOf(n.prototype).constructor}function Ns(n){let e=i5(n.type),t=!0,r=[n];for(;e;){let i;if(Xr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=M0(n.inputs),o.declaredInputs=M0(n.declaredInputs),o.outputs=M0(n.outputs);let a=i.hostBindings;a&&l5(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&a5(n,c),u&&c5(n,u),s5(n,i),i1(n.outputs,i.outputs),Xr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Ns&&(t=!1)}}e=Object.getPrototypeOf(e)}o5(r)}function s5(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function o5(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yu(i.hostAttrs,t=yu(t,i.hostAttrs))}}function M0(n){return n===Cs?{}:n===vn?[]:n}function a5(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function c5(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function l5(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function HR(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=yu(n.mergedAttrs,n.attrs);let d=n.tView=yb(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ic(n,!1);let c=h5(t,e,n,r);ep()&&Cb(t,e,c,n),lc(c,e);let u=SR(c,e,c,n);e[r+Dt]=u,Eb(e,u),U4(u,n,e)}function u5(n,e,t,r,i,s,o,a,c,u,d){let f=t+Dt,_;return e.firstCreatePass?(_=Tu(e,f,4,o||null,a||null),Wf()&&AR(e,n,_,nc(e.consts,u),Db),CA(e,_)):_=e.data[f],HR(_,n,e,t,r,i,s,c),ec(_)&&kp(e,n,_),u!=null&&Pp(n,_,d),_}function d5(n,e,t,r,i,s,o,a,c,u,d){let f=t+Dt,_;if(e.firstCreatePass){if(_=Tu(e,f,4,o||null,a||null),u!=null){let b=nc(e.consts,u);_.localNames=[];for(let I=0;I<b.length;I+=2)_.localNames.push(b[I],-1)}}else _=e.data[f];return HR(_,n,e,t,r,i,s,c),u!=null&&Pp(n,_,d),_}function U(n,e,t,r,i,s,o,a){let c=xe(),u=jt(),d=nc(u.consts,s);return u5(c,u,n,e,t,r,i,d,void 0,o,a),U}var h5=f5;function f5(n,e,t,r){return fu(!0),e[pt].createComment("")}var Lb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function zR(n){return typeof n=="function"&&n[mn]!==void 0}function Vb(n){return zR(n)&&typeof n.set=="function"}var Lp=new Q(""),Vp=new Q(""),Au=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,e0()&&(this._destroyRef=F(dr,{optional:!0})??void 0),Ub||(qR(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(se(Me),se(GR),se(Vp))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),GR=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Ub?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function qR(n){Ub=n}var Ub;function Oi(n){return!!n&&typeof n.then=="function"}function Up(n){return!!n&&typeof n.subscribe=="function"}var Bb=new Q("");function Bp(n){return Dr([{provide:Bb,multi:!0,useValue:n}])}var jb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=F(Bb,{optional:!0})??[];injector=F(We);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Rt(this.injector,i);if(Oi(s))t.push(s);else if(Up(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jp=new Q("");function WR(){ey(()=>{let n="";throw new B(600,n)})}function KR(n){return n.isBoundToModule}var p5=10;function $b(n,e){return Array.isArray(e)?e.reduce($b,n):O(O({},n),e)}var fr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(hr);afterRenderManager=F(Ib);zonelessEnabled=F(pu);rootEffectScheduler=F(x0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new be;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=F(ki);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Oe(t=>!t))}constructor(){F(Mo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=F(wt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=We.NULL){return this._injector.get(Me).run(()=>{tt(10);let o=t instanceof Mp;if(!this._injector.get(jb).done){let I="";throw new B(405,I)}let c;o?c=t:c=this._injector.get(Du).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=KR(c)?void 0:this._injector.get(ko),d=r||c.selector,f=c.create(i,[],d,u),_=f.location.nativeElement,b=f.injector.get(Lp,null);return b?.registerApplication(_),f.onDestroy(()=>{this.detachView(f.hostView),_u(this.components,f),b?.unregisterApplication(_)}),this._loadComponent(f),tt(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){tt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ap.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new B(101,!1);let t=Ce(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ce(t),this.afterTick.next(),tt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(kn,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<p5;)tt(14),this.synchronizeOnce(),tt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!hu(i))continue;let s=r&&!this.zonelessEnabled?0:1;bR(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>hu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;_u(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(jp,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>_u(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _u(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var qce=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function S(n,e,t){let r=xe(),i=Kf();if(Pi(r,i,e)){let s=jt(),o=E0();dR(o,r,n,e,r[pt],t)}return S}function cb(n,e,t,r,i){xb(e,n,t,i?"class":"style",r)}function p(n,e,t,r){let i=xe(),s=i[pe],o=n+Dt,a=s.firstCreatePass?Pb(o,i,2,e,Db,Wf(),t,r):s.data[o];if(hR(a,i,n,e,m5),ec(a)){let c=i[pe];kp(c,i,a),_b(c,a,i)}return r!=null&&Pp(i,a),p}function g(){let n=jt(),e=wn(),t=fR(e);return n.firstCreatePass&&Nb(n,t),A1(t)&&R1(),x1(),t.classesWithoutHost!=null&&wj(t)&&cb(n,t,xe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Ij(t)&&cb(n,t,xe(),t.stylesWithoutHost,!1),g}function te(n,e,t,r){return p(n,e,t,r),g(),te}var m5=(n,e,t,r,i)=>(fu(!0),YA(e[pt],r,H1()));function Wn(n,e,t){let r=xe(),i=r[pe],s=n+Dt,o=i.firstCreatePass?Pb(s,r,8,"ng-container",Db,Wf(),e,t):i.data[s];if(hR(o,r,n,"ng-container",g5),ec(o)){let a=r[pe];kp(a,r,o),_b(a,o,r)}return t!=null&&Pp(r,o),Wn}function Kn(){let n=jt(),e=wn(),t=fR(e);return n.firstCreatePass&&Nb(n,t),Kn}function Nn(n,e,t){return Wn(n,e,t),Kn(),Nn}var g5=(n,e,t,r,i)=>(fu(!0),l3(e[pt],""));function oe(){return xe()}var mu=void 0;function _5(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var v5=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",mu,mu,mu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",_5],vu={};function Hb(n,e,t){typeof e!="string"&&(t=e,e=n[mt.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),vu[e]=n,t&&(vu[e][mt.ExtraData]=t)}function Mn(n){let e=y5(n),t=gA(e);if(t)return t;let r=e.split("-")[0];if(t=gA(r),t)return t;if(r==="en")return v5;throw new B(701,!1)}function gA(n){return n in vu||(vu[n]=yn.ng&&yn.ng.common&&yn.ng.common.locales&&yn.ng.common.locales[n]),vu[n]}var mt=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(mt||{});function y5(n){return n.toLowerCase().replace(/_/g,"-")}var Ru="en-US";var b5=Ru;function YR(n){typeof n=="string"&&(b5=n.toLowerCase().replace(/_/g,"-"))}function $(n,e,t){let r=xe(),i=jt(),s=wn();return QR(i,r,r[pt],s,n,e,t),$}function QR(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=P0(r,e,s),I4(r,n,e,o,t,i,s,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let f=0;f<d.length;f+=2){let _=d[f],b=d[f+1];c??=P0(r,e,s),hA(r,e,_,b,i,c)}if(u&&u.length)for(let f of u)c??=P0(r,e,s),hA(r,e,f,i,i,c)}}function A(n=1){return $1(n)}function E5(n,e){let t=null,r=e3(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?KA(n,s,!0):r3(r,s))return i}return t}function $p(n){let e=xe()[Rn][bn];if(!e.projection){let t=n?n.length:1,r=e.projection=h1(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?E5(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function Hp(n,e=0,t,r,i,s){let o=xe(),a=jt(),c=r?n+1:null;c!==null&&d5(o,a,c,r,i,s,null,t);let u=Tu(a,Dt+n,16,null,t||null);u.projection===null&&(u.projection=e),m0();let f=!o[Ja]||h0();o[Rn][bn].projection[u.projection]===null&&c!==null?w5(o,a,c):f&&!Tp(u)&&R3(a,o,u)}function w5(n,e,t){let r=Dt+t,i=e.data[r],s=n[r],o=J0(s,i.tView.ssrId),a=pR(n,i,void 0,{dehydratedView:o});CR(s,a,0,K0(i,o))}function mc(n,e,t){W4(n,e,t)}function Lo(n){let e=xe(),t=jt(),r=v0();Jf(r+1);let i=Fb(t,r);if(n.dirty&&E1(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=Q4(e,r);n.reset(s,Fj),n.notifyOnChanges()}return!0}return!1}function Vo(){return G4(xe(),v0())}function Yn(n){let e=P1();return zf(e,Dt+n)}function rp(n,e){return n<<17|e<<2}function Po(n){return n>>17&32767}function I5(n){return(n&2)==2}function S5(n,e){return n&131071|e<<17}function lb(n){return n|2}function dc(n){return(n&131068)>>2}function O0(n,e){return n&-131069|e<<2}function C5(n){return(n&1)===1}function ub(n){return n|1}function T5(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Po(o),c=dc(o);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Ka(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let _=Po(n[a+1]);n[r+1]=rp(_,a),_!==0&&(n[_+1]=O0(n[_+1],r)),n[a+1]=S5(n[a+1],r)}else n[r+1]=rp(a,0),a!==0&&(n[a+1]=O0(n[a+1],r)),a=r;else n[r+1]=rp(c,0),a===0?a=r:n[c+1]=O0(n[c+1],r),c=r;u&&(n[r+1]=lb(n[r+1])),_A(n,d,r,!0),_A(n,d,r,!1),D5(e,d,n,r,s),o=rp(a,c),s?e.classBindings=o:e.styleBindings=o}function D5(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ka(s,e)>=0&&(t[r+1]=ub(t[r+1]))}function _A(n,e,t,r){let i=n[t+1],s=e===null,o=r?Po(i):dc(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],u=n[o+1];x5(c,e)&&(a=!0,n[o+1]=r?ub(u):lb(u)),o=r?Po(u):dc(u)}a&&(n[t+1]=r?lb(i):ub(i))}function x5(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ka(n,e)>=0:!1}var kr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function A5(n){return n.substring(kr.key,kr.keyEnd)}function R5(n){return k5(n),JR(n,ZR(n,0,kr.textEnd))}function JR(n,e){let t=kr.textEnd;return t===e?-1:(e=kr.keyEnd=P5(n,kr.key=e,t),ZR(n,e,t))}function k5(n){kr.key=0,kr.keyEnd=0,kr.value=0,kr.valueEnd=0,kr.textEnd=n.length}function ZR(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function P5(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Ke(n,e,t){return XR(n,e,t,!1),Ke}function fe(n,e){return XR(n,e,null,!0),fe}function gc(n){M5(B5,N5,n,!0)}function N5(n,e){for(let t=R5(e);t>=0;t=JR(e,t))Bf(n,A5(e),!0)}function XR(n,e,t,r){let i=xe(),s=jt(),o=Yf(2);if(s.firstUpdatePass&&tk(s,n,o,r),e!==Pn&&Pi(i,o,e)){let a=s.data[Ri()];nk(s,a,i,i[pt],n,i[o+1]=$5(e,t),r,o)}}function M5(n,e,t,r){let i=jt(),s=Yf(2);i.firstUpdatePass&&tk(i,null,s,r);let o=xe();if(t!==Pn&&Pi(o,s,t)){let a=i.data[Ri()];if(rk(a,r)&&!ek(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Ff(c,t||"")),cb(i,a,o,t,r)}else j5(i,a,o,o[pt],o[s+1],o[s+1]=U5(n,e,t),r,s)}}function ek(n,e){return e>=n.expandoStartIndex}function tk(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ri()],o=ek(n,t);rk(s,r)&&e===null&&!o&&(e=!1),e=O5(i,s,e,r),T5(i,s,e,t,o,r)}}function O5(n,e,t,r){let i=V1(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=F0(null,n,e,t,r),t=Su(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=F0(i,n,e,t,r),s===null){let c=F5(n,e,r);c!==void 0&&Array.isArray(c)&&(c=F0(null,n,e,c[1],r),c=Su(c,e.attrs,r),L5(n,e,r,c))}else s=V5(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function F5(n,e,t){let r=t?e.classBindings:e.styleBindings;if(dc(r)!==0)return n[Po(r)]}function L5(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Po(i)]=r}function V5(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Su(r,o,t)}return Su(r,e.attrs,t)}function F0(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Su(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Su(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Bf(n,o,t?!0:e[++s]))}return n===void 0?null:n}function U5(n,e,t){if(t==null||t==="")return vn;let r=[],i=Dp(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function B5(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Bf(n,r,t)}function j5(n,e,t,r,i,s,o,a){i===Pn&&(i=vn);let c=0,u=0,d=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;d!==null||f!==null;){let _=c<i.length?i[c+1]:void 0,b=u<s.length?s[u+1]:void 0,I=null,k;d===f?(c+=2,u+=2,_!==b&&(I=f,k=b)):f===null||d!==null&&d<f?(c+=2,I=d):(u+=2,I=f,k=b),I!==null&&nk(n,e,t,r,I,k,o,a),d=c<i.length?i[c]:null,f=u<s.length?s[u]:null}}function nk(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=C5(u)?vA(c,e,t,i,dc(u),o):void 0;if(!bp(d)){bp(s)||I5(u)&&(s=vA(c,null,t,i,a,o));let f=s0(Ri(),t);P3(r,o,f,i,s)}}function vA(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,_=t[i+1];_===Pn&&(_=f?vn:void 0);let b=f?jf(_,r):d===r?_:void 0;if(u&&!bp(b)&&(b=jf(c,r)),bp(b)&&(a=b,o))return a;let I=n[i+1];i=o?Po(I):dc(I)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=jf(c,r))}return a}function bp(n){return n!==void 0}function $5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=xi(Dp(n)))),n}function rk(n,e){return(n.flags&(e?8:16))!==0}function v(n,e=""){let t=xe(),r=jt(),i=n+Dt,s=r.firstCreatePass?Tu(r,i,1,e,null):r.data[i],o=H5(r,t,s,e,n);t[i]=o,ep()&&Cb(r,t,o,s),ic(s,!1)}var H5=(n,e,t,r,i)=>(fu(!0),a3(e[pt],r));function z5(n,e,t,r=""){return Pi(n,Kf(),t)?e+su(t)+r:Pn}function G5(n,e,t,r,i,s=""){let o=N1(),a=Ob(n,o,t,i);return Yf(2),a?e+su(t)+r+su(i)+s:Pn}function Z(n){return J("",n),Z}function J(n,e,t){let r=xe(),i=z5(r,n,e,t);return i!==Pn&&ik(r,Ri(),i),J}function Ms(n,e,t,r,i){let s=xe(),o=G5(s,n,e,t,r,i);return o!==Pn&&ik(s,Ri(),o),Ms}function ik(n,e,t){let r=s0(e,n);c3(n[pt],r,t)}function Uo(n,e,t){Vb(e)&&(e=e());let r=xe(),i=Kf();if(Pi(r,i,e)){let s=jt(),o=E0();dR(o,r,n,e,r[pt],t)}return Uo}function _c(n,e){let t=Vb(n);return t&&n.set(e),t}function Bo(n,e){let t=xe(),r=jt(),i=wn();return QR(r,t,t[pt],i,n,e),Bo}function q5(n,e,t){let r=jt();if(r.firstCreatePass){let i=Xr(n);db(t,r.data,r.blueprint,i,!0),db(e,r.data,r.blueprint,i,!1)}}function db(n,e,t,r,i){if(n=Qt(n),Array.isArray(n))for(let s=0;s<n.length;s++)db(n[s],e,t,r,i);else{let s=jt(),o=xe(),a=wn(),c=bo(n)?n:Qt(n.provide),u=Xy(n),d=a.providerIndexes&1048575,f=a.directiveStart,_=a.providerIndexes>>20;if(bo(n)||!n.multi){let b=new Ro(u,i,ie,null),I=V0(c,e,i?d:d+_,f);I===-1?(B0(fp(a,o),s,c),L0(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(b),o.push(b)):(t[I]=b,o[I]=b)}else{let b=V0(c,e,d+_,f),I=V0(c,e,d,d+_),k=b>=0&&t[b],N=I>=0&&t[I];if(i&&!N||!i&&!k){B0(fp(a,o),s,c);let j=Y5(i?K5:W5,t.length,i,r,u,n);!i&&N&&(t[I].providerFactory=j),L0(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),o.push(j)}else{let j=sk(t[i?I:b],u,!i&&r);L0(s,n,b>-1?b:I,j)}!i&&r&&N&&t[I].componentProviders++}}}function L0(n,e,t,r){let i=bo(e),s=v1(e);if(i||s){let c=(s?Qt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function sk(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function V0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function W5(n,e,t,r,i){return hb(this.multi,[])}function K5(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=bu(r,r[pe],this.providerFactory.index,i);o=c.slice(0,a),hb(s,o);for(let u=a;u<c.length;u++)o.push(c[u])}else o=[],hb(s,o);return o}function hb(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Y5(n,e,t,r,i,s){let o=new Ro(n,t,ie,null);return o.multi=[],o.index=e,o.componentProviders=0,sk(o,i,r&&!t),o}function Os(n,e=[]){return t=>{t.providersResolver=(r,i)=>q5(r,i?i(n):n,e)}}function kt(n,e,t){let r=xo()+n,i=xe();return i[r]===Pn?Op(i,r,t?e.call(t):e()):E4(i,r)}function Qn(n,e,t,r){return ok(xe(),xo(),n,e,t,r)}function zp(n,e,t,r,i){return ak(xe(),xo(),n,e,t,r,i)}function Gp(n,e,t,r,i,s){return Q5(xe(),xo(),n,e,t,r,i,s)}function zb(n,e){let t=n[e];return t===Pn?void 0:t}function ok(n,e,t,r,i,s){let o=e+t;return Pi(n,o,i)?Op(n,o+1,s?r.call(s,i):r(i)):zb(n,o+1)}function ak(n,e,t,r,i,s,o){let a=e+t;return Ob(n,a,i,s)?Op(n,a+2,o?r.call(o,i,s):r(i,s)):zb(n,a+2)}function Q5(n,e,t,r,i,s,o,a){let c=e+t;return w4(n,c,i,s,o)?Op(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):zb(n,c+3)}function ce(n,e){let t=jt(),r,i=n+Dt;t.firstCreatePass?(r=J5(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=bs(r.type,!0)),o,a=_n(ie);try{let c=hp(!1),u=s();return hp(c),o0(t,xe(),i,u),u}finally{_n(a)}}function J5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function ot(n,e,t){let r=n+Dt,i=xe(),s=zf(i,r);return ck(i,r)?ok(i,xo(),e,s.transform,t,s):s.transform(t)}function Pe(n,e,t,r){let i=n+Dt,s=xe(),o=zf(s,i);return ck(s,i)?ak(s,xo(),e,o.transform,t,r,o):o.transform(t,r)}function ck(n,e){return n[pe].data[e].pure}function Fi(n,e){return Np(n,e)}var ip=null;function lk(n){ip!==null&&(n.defaultEncapsulation!==ip.defaultEncapsulation||n.preserveWhitespaces!==ip.preserveWhitespaces)||(ip=n)}var Ep=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Gb=(()=>{class n{compileModuleSync(t){return new Iu(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Yy(t),s=qA(i.declarations).reduce((o,a)=>{let c=Qr(a);return c&&o.push(new Ps(c)),o},[]);return new Ep(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uk=new Q("");var dk=(()=>{class n{applicationErrorHandler=F(hr);appRef=F(fr);taskService=F(ki);ngZone=F(Me);zonelessEnabled=F(pu);tracing=F(Mo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(D0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?S0:I0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,S0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hk(){return[{provide:ws,useExisting:dk},{provide:Me,useClass:ru},{provide:pu,useValue:!0}]}function Z5(){return typeof $localize<"u"&&$localize.locale||Ru}var Fs=new Q("",{factory:()=>F(Fs,{optional:!0,skipSelf:!0})||Z5()});function ku(n,e){return Jh(n,e?.equal)}var Ek=Symbol("InputSignalNode#UNSET"),d$=ee(O({},Zh),{transformFn:void 0,applyValueToInputSignal(n,e){Wl(n,e)}});function wk(n,e){let t=Object.create(d$);t.value=n,t.transformFn=e?.transform;function r(){if(zl(t),t.value===Ek){let i=null;throw new B(-950,i)}return t.value}return r[mn]=t,r}function fk(n,e){return wk(n,e)}function h$(n){return wk(Ek,n)}var Ik=(fk.required=h$,fk);function f$(n,e,t){let r=new Iu(t);return Promise.resolve(r)}function pk(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var qp=new Q(""),p$=new Q("");function Pu(n){return!n.moduleRef}function m$(n){let e=Pu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Me);return t.run(()=>{Pu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(hr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Pu(n)){let s=()=>e.destroy(),o=n.platformInjector.get(qp);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(qp);o.add(s),n.moduleRef.onDestroy(()=>{_u(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return _$(r,t,()=>{let s=e.get(ki),o=s.add(),a=e.get(jb);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Fs,Ru);if(YR(c||Ru),!e.get(p$,!0))return Pu(n)?e.get(fr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Pu(n)){let d=e.get(fr);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return Sk?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var Sk;function mk(){Sk=g$}function g$(n,e){let t=n.injector.get(fr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new B(-403,!1);e.push(n)}function _$(n,e,t){try{let r=t();return Oi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Ck=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=[],s=[hk(),...i,...r?.applicationProviders??[],W1],o=BR(t.moduleType,this.injector,s);return mk(),m$({moduleRef:o,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=$b({},r);return mk(),f$(this.injector,i,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new B(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(qp,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(se(We))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Jb=null;function v$(n){if(Xb())throw new B(400,!1);WR(),Jb=n;let e=n.get(Ck);return E$(n),e}function Zb(n,e,t=[]){let r=`Platform: ${e}`,i=new Q(r);return(s=[])=>{let o=Xb();if(!o){let a=[...t,...s,{provide:i,useValue:!0}];o=n?.(a)??v$(y$(a,r))}return b$(i)}}function y$(n=[],e){return We.create({name:e,providers:[{provide:au,useValue:"platform"},{provide:qp,useValue:new Set([()=>Jb=null])},...n]})}function b$(n){let e=Xb();if(!e)throw new B(-401,!1);return e}function Xb(){return Jb?.get(Ck)??null}function E$(n){let e=n.get(Ip,null);Rt(n,()=>{e?.forEach(t=>t())})}function eE(){return!1}var At=(()=>{class n{static __NG_ELEMENT_ID__=w$}return n})();function w$(n){return I$(wn(),xe(),(n&16)===16)}function I$(n,e,t){if(As(n)&&!t){let r=lr(n.index,e);return new ks(r,r)}else if(n.type&175){let r=e[Rn];return new ks(r,e)}return null}var qb=class{constructor(){}supports(e){return Mb(e)}create(e){return new Wb(e)}},S$=(n,e)=>e,Wb=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||S$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<gk(r,i,s)?t:r,a=gk(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,d=c-i;if(u!=d){for(let _=0;_<u;_++){let b=_<s.length?s[_]:s[_]=0,I=b+_;d<=I&&I<u&&(s[_]=b+1)}let f=o.previousIndex;s[f]=d-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Mb(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,kR(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Kb(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Wp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Wp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Kb=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Yb=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Wp=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Yb,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function gk(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function _k(){return new Kp([new qb])}var Kp=(()=>{class n{factories;static \u0275prov=q({token:n,providedIn:"root",factory:_k});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=F(n,{optional:!0,skipSelf:!0});return n.create(t,r||_k())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new B(901,!1)}}return n})();var Tk=Zb(null,"core",[]),Dk=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(se(fr))};static \u0275mod=gt({type:n});static \u0275inj=ht({})}return n})();function jo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function tE(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function xk(n,e){let t=Qr(n),r=e.elementInjector||Qa();return new Ps(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function Ak(n){let e=Qr(n);if(!e)return null;let t=new Ps(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Pk=null;function Jn(){return Pk}function nE(n){Pk??=n}var Nu=class{},Mu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(Nk),providedIn:"platform"})}return n})(),rE=new Q(""),Nk=(()=>{class n extends Mu{_location;_history;_doc=F(et);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jn().getBaseHref(this._doc)}onPopState(t){let r=Jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Yp(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Rk(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Or(n){return n&&n[0]!=="?"?`?${n}`:n}var Li=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(Jp),providedIn:"root"})}return n})(),Qp=new Q(""),Jp=(()=>{class n extends Li{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Yp(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Or(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Or(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Or(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(se(Mu),se(Qp,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ls=(()=>{class n{_subject=new be;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=D$(Rk(kk(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Or(r))}normalize(t){return n.stripTrailingSlash(T$(this._basePath,kk(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Or(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Or(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Or;static joinWithSlash=Yp;static stripTrailingSlash=Rk;static \u0275fac=function(r){return new(r||n)(se(Li))};static \u0275prov=q({token:n,factory:()=>C$(),providedIn:"root"})}return n})();function C$(){return new Ls(se(Li))}function T$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function kk(n){return n.replace(/\/index.html$/,"")}function D$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var hE=(()=>{class n extends Li{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Yp(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Or(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Or(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(se(Mu),se(Qp,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();var fE=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(fE||{});var an=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(an||{}),Ze=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ze||{}),On=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(On||{}),Fn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Uk(n){return Mn(n)[mt.LocaleId]}function Bk(n,e,t){let r=Mn(n),i=[r[mt.DayPeriodsFormat],r[mt.DayPeriodsStandalone]],s=pr(i,e);return pr(s,t)}function jk(n,e,t){let r=Mn(n),i=[r[mt.DaysFormat],r[mt.DaysStandalone]],s=pr(i,e);return pr(s,t)}function $k(n,e,t){let r=Mn(n),i=[r[mt.MonthsFormat],r[mt.MonthsStandalone]],s=pr(i,e);return pr(s,t)}function Hk(n,e){let r=Mn(n)[mt.Eras];return pr(r,e)}function Ou(n,e){let t=Mn(n);return pr(t[mt.DateFormat],e)}function Fu(n,e){let t=Mn(n);return pr(t[mt.TimeFormat],e)}function Lu(n,e){let r=Mn(n)[mt.DateTimeFormat];return pr(r,e)}function ii(n,e){let t=Mn(n),r=t[mt.NumberSymbols][e];if(typeof r>"u"){if(e===Fn.CurrencyDecimal)return t[mt.NumberSymbols][Fn.Decimal];if(e===Fn.CurrencyGroup)return t[mt.NumberSymbols][Fn.Group]}return r}function zk(n,e){return Mn(n)[mt.NumberFormats][e]}function Gk(n){if(!n[mt.ExtraData])throw new B(2303,!1)}function qk(n){let e=Mn(n);return Gk(e),(e[mt.ExtraData][2]||[]).map(r=>typeof r=="string"?iE(r):[iE(r[0]),iE(r[1])])}function Wk(n,e,t){let r=Mn(n);Gk(r);let i=[r[mt.ExtraData][0],r[mt.ExtraData][1]],s=pr(i,e)||[];return pr(s,t)||[]}function pr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new B(2304,!1)}function iE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var x$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zp={},A$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Kk(n,e,t,r){let i=V$(n);e=Vi(t,e)||e;let o=[],a;for(;e;)if(a=A$.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=Qk(r,c),i=L$(i,r));let u="";return o.forEach(d=>{let f=O$(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function rm(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Vi(n,e){let t=Uk(n);if(Zp[t]??={},Zp[t][e])return Zp[t][e];let r="";switch(e){case"shortDate":r=Ou(n,On.Short);break;case"mediumDate":r=Ou(n,On.Medium);break;case"longDate":r=Ou(n,On.Long);break;case"fullDate":r=Ou(n,On.Full);break;case"shortTime":r=Fu(n,On.Short);break;case"mediumTime":r=Fu(n,On.Medium);break;case"longTime":r=Fu(n,On.Long);break;case"fullTime":r=Fu(n,On.Full);break;case"short":let i=Vi(n,"shortTime"),s=Vi(n,"shortDate");r=Xp(Lu(n,On.Short),[i,s]);break;case"medium":let o=Vi(n,"mediumTime"),a=Vi(n,"mediumDate");r=Xp(Lu(n,On.Medium),[o,a]);break;case"long":let c=Vi(n,"longTime"),u=Vi(n,"longDate");r=Xp(Lu(n,On.Long),[c,u]);break;case"full":let d=Vi(n,"fullTime"),f=Vi(n,"fullDate");r=Xp(Lu(n,On.Full),[d,f]);break}return r&&(Zp[t][e]=r),r}function Xp(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Fr(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function R$(n,e){return Fr(n,3).substring(0,e)}function Pt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=k$(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return R$(a,e);let c=ii(o,Fn.MinusSign);return Fr(a,e,c,r,i)}}function k$(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new B(2301,!1)}}function at(n,e,t=an.Format,r=!1){return function(i,s){return P$(i,s,n,e,t,r)}}function P$(n,e,t,r,i,s){switch(t){case 2:return $k(e,i,r)[n.getMonth()];case 1:return jk(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let u=qk(e),d=Wk(e,i,r),f=u.findIndex(_=>{if(Array.isArray(_)){let[b,I]=_,k=o>=b.hours&&a>=b.minutes,N=o<I.hours||o===I.hours&&a<I.minutes;if(b.hours<I.hours){if(k&&N)return!0}else if(k||N)return!0}else if(_.hours===o&&_.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return Bk(e,i,r)[o<12?0:1];case 3:return Hk(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new B(2302,!1)}}function em(n){return function(e,t,r){let i=-1*r,s=ii(t,Fn.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Fr(o,2,s)+Fr(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Fr(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Fr(o,2,s)+":"+Fr(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Fr(o,2,s)+":"+Fr(Math.abs(i%60),2,s);default:throw new B(2310,!1)}}}var N$=0,nm=4;function M$(n){let e=rm(n,N$,1).getDay();return rm(n,0,1+(e<=nm?nm:nm+7)-e)}function Yk(n){let e=n.getDay(),t=e===0?-3:nm-e;return rm(n.getFullYear(),n.getMonth(),n.getDate()+t)}function sE(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=Yk(t),o=M$(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Fr(i,n,ii(r,Fn.MinusSign))}}function tm(n,e=!1){return function(t,r){let s=Yk(t).getFullYear();return Fr(s,n,ii(r,Fn.MinusSign),e)}}var oE={};function O$(n){if(oE[n])return oE[n];let e;switch(n){case"G":case"GG":case"GGG":e=at(3,Ze.Abbreviated);break;case"GGGG":e=at(3,Ze.Wide);break;case"GGGGG":e=at(3,Ze.Narrow);break;case"y":e=Pt(0,1,0,!1,!0);break;case"yy":e=Pt(0,2,0,!0,!0);break;case"yyy":e=Pt(0,3,0,!1,!0);break;case"yyyy":e=Pt(0,4,0,!1,!0);break;case"Y":e=tm(1);break;case"YY":e=tm(2,!0);break;case"YYY":e=tm(3);break;case"YYYY":e=tm(4);break;case"M":case"L":e=Pt(1,1,1);break;case"MM":case"LL":e=Pt(1,2,1);break;case"MMM":e=at(2,Ze.Abbreviated);break;case"MMMM":e=at(2,Ze.Wide);break;case"MMMMM":e=at(2,Ze.Narrow);break;case"LLL":e=at(2,Ze.Abbreviated,an.Standalone);break;case"LLLL":e=at(2,Ze.Wide,an.Standalone);break;case"LLLLL":e=at(2,Ze.Narrow,an.Standalone);break;case"w":e=sE(1);break;case"ww":e=sE(2);break;case"W":e=sE(1,!0);break;case"d":e=Pt(2,1);break;case"dd":e=Pt(2,2);break;case"c":case"cc":e=Pt(7,1);break;case"ccc":e=at(1,Ze.Abbreviated,an.Standalone);break;case"cccc":e=at(1,Ze.Wide,an.Standalone);break;case"ccccc":e=at(1,Ze.Narrow,an.Standalone);break;case"cccccc":e=at(1,Ze.Short,an.Standalone);break;case"E":case"EE":case"EEE":e=at(1,Ze.Abbreviated);break;case"EEEE":e=at(1,Ze.Wide);break;case"EEEEE":e=at(1,Ze.Narrow);break;case"EEEEEE":e=at(1,Ze.Short);break;case"a":case"aa":case"aaa":e=at(0,Ze.Abbreviated);break;case"aaaa":e=at(0,Ze.Wide);break;case"aaaaa":e=at(0,Ze.Narrow);break;case"b":case"bb":case"bbb":e=at(0,Ze.Abbreviated,an.Standalone,!0);break;case"bbbb":e=at(0,Ze.Wide,an.Standalone,!0);break;case"bbbbb":e=at(0,Ze.Narrow,an.Standalone,!0);break;case"B":case"BB":case"BBB":e=at(0,Ze.Abbreviated,an.Format,!0);break;case"BBBB":e=at(0,Ze.Wide,an.Format,!0);break;case"BBBBB":e=at(0,Ze.Narrow,an.Format,!0);break;case"h":e=Pt(3,1,-12);break;case"hh":e=Pt(3,2,-12);break;case"H":e=Pt(3,1);break;case"HH":e=Pt(3,2);break;case"m":e=Pt(4,1);break;case"mm":e=Pt(4,2);break;case"s":e=Pt(5,1);break;case"ss":e=Pt(5,2);break;case"S":e=Pt(6,1);break;case"SS":e=Pt(6,2);break;case"SSS":e=Pt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=em(0);break;case"ZZZZZ":e=em(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=em(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=em(2);break;default:return null}return oE[n]=e,e}function Qk(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function F$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function L$(n,e,t){let i=n.getTimezoneOffset(),s=Qk(e,i);return F$(n,-1*(s-i))}function V$(n){if(Mk(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return rm(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(x$))return U$(r)}let e=new Date(n);if(!Mk(e))throw new B(2311,!1);return e}function U$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,u),e}function Mk(n){return n instanceof Date&&!isNaN(n.valueOf())}var B$=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Ok=22,im=".",Vu="0",j$=";",$$=",",aE="#";function H$(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=ii(t,Fn.Infinity);else{let u=q$(n);o&&(u=G$(u));let d=e.minInt,f=e.minFrac,_=e.maxFrac;if(s){let Y=s.match(B$);if(Y===null)throw new B(2306,!1);let ne=Y[1],he=Y[3],Qe=Y[5];ne!=null&&(d=cE(ne)),he!=null&&(f=cE(he)),Qe!=null?_=cE(Qe):he!=null&&f>_&&(_=f)}W$(u,f,_);let b=u.digits,I=u.integerLen,k=u.exponent,N=[];for(c=b.every(Y=>!Y);I<d;I++)b.unshift(0);for(;I<0;I++)b.unshift(0);I>0?N=b.splice(I,b.length):(N=b,b=[0]);let j=[];for(b.length>=e.lgSize&&j.unshift(b.splice(-e.lgSize,b.length).join(""));b.length>e.gSize;)j.unshift(b.splice(-e.gSize,b.length).join(""));b.length&&j.unshift(b.join("")),a=j.join(ii(t,r)),N.length&&(a+=ii(t,i)+N.join("")),k&&(a+=ii(t,Fn.Exponential)+"+"+k)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function Jk(n,e,t){let r=zk(e,fE.Decimal),i=z$(r,ii(e,Fn.MinusSign));return H$(n,i,e,Fn.Group,Fn.Decimal,t)}function z$(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(j$),i=r[0],s=r[1],o=i.indexOf(im)!==-1?i.split(im):[i.substring(0,i.lastIndexOf(Vu)+1),i.substring(i.lastIndexOf(Vu)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(aE));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===Vu?t.minFrac=t.maxFrac=d+1:f===aE?t.maxFrac=d+1:t.posSuf+=f}let u=a.split($$);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){let d=i.length-t.posPre.length-t.posSuf.length,f=s.indexOf(aE);t.negPre=s.substring(0,f).replace(/'/g,""),t.negSuf=s.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function G$(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function q$(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(im))>-1&&(e=e.replace(im,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Vu;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Vu;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>Ok&&(r=r.splice(0,Ok-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function W$(n,e,t){if(e>t)throw new B(2307,!1);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let f=o;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let f=1;f<o;f++)r[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,u=e+n.integerLen,d=r.reduceRight(function(f,_,b,I){return _=_+f,I[b]=_<10?_:_-10,c&&(I[b]===0&&b>=u?I.pop():c=!1),_>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function cE(n){let e=parseInt(n);if(isNaN(e))throw new B(2305,!1);return e}var lE=/\s+/,Fk=[],$o=(()=>{class n{_ngEl;_renderer;initialClasses=Fk;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(lE):Fk}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(lE):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(lE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(ie(Zt),ie(Mi))};static \u0275dir=Ut({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var sm=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ln=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new sm(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),Lk(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Lk(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ie(qn),ie(Nr),ie(Kp))};static \u0275dir=Ut({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Lk(n,e){n.context.$implicit=e.item}var Xt=(()=>{class n{_viewContainer;_context=new om;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Vk(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Vk(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ie(qn),ie(Nr))};static \u0275dir=Ut({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),om=class{$implicit=null;ngIf=null};function Vk(n,e){if(n&&!n.createEmbeddedView)throw new B(2020,!1)}var Uu=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,i):!1,get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static \u0275fac=function(r){return new(r||n)(ie(qn))};static \u0275dir=Ut({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Mr]})}return n})();function pE(n,e){return new B(2100,!1)}var uE=class{createSubscription(e,t,r){return xt(()=>e.subscribe({next:t,error:r}))}dispose(e){xt(()=>e.unsubscribe())}},dE=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},K$=new dE,Y$=new uE,mE=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=F(hr);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Oi(t))return K$;if(Up(t))return Y$;throw pE(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(ie(At,16))};static \u0275pipe=xu({name:"async",type:n,pure:!1})}return n})();var Q$="mediumDate",Zk=new Q(""),Xk=new Q(""),gE=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??Q$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Kk(t,o,s||this.locale,a)}catch(o){throw pE(n,o.message)}}static \u0275fac=function(r){return new(r||n)(ie(Fs,16),ie(Zk,24),ie(Xk,24))};static \u0275pipe=xu({name:"date",type:n,pure:!0})}return n})();var Zn=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!J$(t))return null;i||=this._locale;try{let s=Z$(t);return Jk(s,i,r)}catch(s){throw pE(n,s.message)}}static \u0275fac=function(r){return new(r||n)(ie(Fs,16))};static \u0275pipe=xu({name:"number",type:n,pure:!0})}return n})();function J$(n){return!(n==null||n===""||n!==n)}function Z$(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new B(2309,!1);return n}var Bu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=gt({type:n});static \u0275inj=ht({})}return n})();function _E(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var ju=class{};function eP(n,e,t){return Hb(n,e,t)}var yE="browser";function tP(n){return n===yE}var nP=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new vE(F(et),window)})}return n})(),vE=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ee(O({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=X$(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Is(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(ee(O({},t),{left:i-o[0],top:s-o[1]}))}};function X$(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var $u=class{_doc;constructor(e){this._doc=e}manager},am=(()=>{class n extends $u{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(se(et))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),um=new Q(""),IE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof am));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof am);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(se(um),se(Me))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),bE="ng-app-id";function rP(n){for(let e of n)e.remove()}function iP(n,e){let t=e.createElement("style");return t.textContent=n,t}function eH(n,e,t,r){let i=n.head?.querySelectorAll(`style[${bE}="${e}"],link[${bE}="${e}"]`);if(i)for(let s of i)s.removeAttribute(bE),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function wE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var SE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,eH(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,iP);r?.forEach(i=>this.addUsage(i,this.external,wE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(rP(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])rP(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,iP(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,wE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(se(et),se(wp),se(Cp,8),se(Ni))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),EE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},CE=/%COMP%/g;var oP="%COMP%",tH=`_nghost-${oP}`,nH=`_ngcontent-${oP}`,rH=!0,iH=new Q("",{factory:()=>rH});function sH(n){return nH.replace(CE,n)}function oH(n){return tH.replace(CE,n)}function aP(n,e){return e.map(t=>t.replace(CE,n))}var Gu=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Hu(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof lm?i.applyToHost(t):i instanceof zu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case Pr.Emulated:s=new lm(c,u,r,this.appId,d,o,a,f,_);break;case Pr.ShadowDom:return new cm(c,t,r,o,a,this.nonce,f,_,u);case Pr.ExperimentalIsolatedShadowDom:return new cm(c,t,r,o,a,this.nonce,f,_);default:s=new zu(c,u,r,d,o,a,f,_);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(se(IE),se(SE),se(wp),se(iH),se(et),se(Me),se(Cp),se(Mo,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Hu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(EE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(sP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(sP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=EE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=EE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ni.DashCase|ni.Important)?e.style.setProperty(t,r,i&ni.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ni.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Jn().getGlobalEventTarget(this.doc,e),!e))throw new B(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function sP(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var cm=class extends Hu{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,u){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=aP(r.id,d);for(let _ of d){let b=document.createElement("style");o&&b.setAttribute("nonce",o),b.textContent=_,this.shadowRoot.appendChild(b)}let f=r.getExternalStyles?.();if(f)for(let _ of f){let b=wE(_,i);o&&b.setAttribute("nonce",o),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},zu=class extends Hu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,u){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?aP(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&uc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},lm=class extends zu{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,u){let d=i+"-"+r.id;super(e,t,r,s,o,a,c,u,d),this.contentAttr=sH(d),this.hostAttr=oH(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var dm=class n extends Nu{supportsDOMEvents=!0;static makeCurrent(){nE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=aH();return t==null?null:cH(t)}resetBaseElement(){qu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _E(document.cookie,e)}},qu=null;function aH(){return qu=qu||document.head.querySelector("base"),qu?qu.getAttribute("href"):null}function cH(n){return new URL(n,document.baseURI).pathname}var hm=class{addToWindow(e){yn.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new B(5103,!1);return s},yn.getAllAngularTestabilities=()=>e.getAllTestabilities(),yn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=yn.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};yn.frameworkStabilizers||(yn.frameworkStabilizers=[]),yn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Jn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},lH=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),cP=["alt","control","meta","shift"],uH={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dH={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},lP=(()=>{class n extends $u{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jn().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),cP.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=uH[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),cP.forEach(o=>{if(o!==i){let a=dH[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(se(et))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function hH(){dm.makeCurrent()}function fH(){return new Yr}function pH(){return mb(document),document}var mH=[{provide:Ni,useValue:yE},{provide:Ip,useValue:hH,multi:!0},{provide:et,useFactory:pH}],TE=Zb(Tk,"browser",mH);var gH=[{provide:Vp,useClass:hm},{provide:Lp,useClass:Au},{provide:Au,useClass:Au}],_H=[{provide:au,useValue:"root"},{provide:Yr,useFactory:fH},{provide:um,useClass:am,multi:!0},{provide:um,useClass:lP,multi:!0},Gu,SE,IE,{provide:kn,useExisting:Gu},{provide:ju,useClass:lH},[]],Wu=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=gt({type:n});static \u0275inj=ht({providers:[..._H,...gH],imports:[Bu,Dk]})}return n})();var uP=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(se(et))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var we=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(we||{}),mr="*";function Vn(n,e){return{type:we.Trigger,name:n,definitions:e,options:{}}}function cn(n,e=null){return{type:we.Animate,styles:e,timings:n}}function hP(n,e=null){return{type:we.Sequence,steps:n,options:e}}function Ye(n){return{type:we.Style,styles:n,offset:null}}function ln(n,e,t=null){return{type:we.Transition,expr:n,animation:e,options:t}}var si=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Ho=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},vc="!";function fP(n){return new B(3e3,!1)}function vH(){return new B(3100,!1)}function yH(){return new B(3101,!1)}function bH(n){return new B(3001,!1)}function EH(n){return new B(3003,!1)}function wH(n){return new B(3004,!1)}function mP(n,e){return new B(3005,!1)}function gP(){return new B(3006,!1)}function _P(){return new B(3007,!1)}function vP(n,e){return new B(3008,!1)}function yP(n){return new B(3002,!1)}function bP(n,e,t,r,i){return new B(3010,!1)}function EP(){return new B(3011,!1)}function wP(){return new B(3012,!1)}function IP(){return new B(3200,!1)}function SP(){return new B(3202,!1)}function CP(){return new B(3013,!1)}function TP(n){return new B(3014,!1)}function DP(n){return new B(3015,!1)}function xP(n){return new B(3016,!1)}function AP(n,e){return new B(3404,!1)}function IH(n){return new B(3502,!1)}function RP(n){return new B(3503,!1)}function kP(){return new B(3300,!1)}function PP(n){return new B(3504,!1)}function NP(n){return new B(3301,!1)}function MP(n,e){return new B(3302,!1)}function OP(n){return new B(3303,!1)}function FP(n,e){return new B(3400,!1)}function LP(n){return new B(3401,!1)}function VP(n){return new B(3402,!1)}function UP(n,e){return new B(3505,!1)}function Ui(n){switch(n.length){case 0:return new si;case 1:return n[0];default:return new Ho(n)}}function RE(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),d=u==o,f=d&&a||new Map;c.forEach((_,b)=>{let I=b,k=_;if(b!=="offset")switch(I=n.normalizePropertyName(I,i),k){case vc:k=t.get(b);break;case mr:k=r.get(b);break;default:k=n.normalizeStyleValue(b,I,k,i);break}f.set(I,k)}),d||s.push(f),a=f,o=u}),i.length)throw IH(i);return s}function fm(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&DE(t,"start",n)));break;case"done":n.onDone(()=>r(t&&DE(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&DE(t,"destroy",n)));break}}function DE(n,e,t){let r=t.totalTime,i=!!t.disabled,s=pm(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function pm(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Un(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function kE(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var SH=typeof document>"u"?null:document.documentElement;function mm(n){let e=n.parentNode||n.host||null;return e===SH?null:e}function CH(n){return n.substring(1,6)=="ebkit"}var zo=null,pP=!1;function BP(n){zo||(zo=TH()||{},pP=zo.style?"WebkitAppearance"in zo.style:!1);let e=!0;return zo.style&&!CH(n)&&(e=n in zo.style,!e&&pP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in zo.style)),e}function TH(){return typeof document<"u"?document.body:null}function PE(n,e){for(;e;){if(e===n)return!0;e=mm(e)}return!1}function NE(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var DH=1e3,ME="{{",xH="}}",OE="ng-enter",gm="ng-leave",Ku="ng-trigger",Yu=".ng-trigger",FE="ng-animating",_m=".ng-animating";function oi(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:xE(parseFloat(e[1]),e[2])}function xE(n,e){switch(e){case"s":return n*DH;default:return n}}function Qu(n,e,t){return n.hasOwnProperty("duration")?n:RH(n,e,t)}var AH=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function RH(n,e,t){let r,i=0,s="";if(typeof n=="string"){let o=n.match(AH);if(o===null)return e.push(fP(n)),{duration:0,delay:0,easing:""};r=xE(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(i=xE(parseFloat(a),o[4]));let c=o[5];c&&(s=c)}else r=n;if(!t){let o=!1,a=e.length;r<0&&(e.push(vH()),o=!0),i<0&&(e.push(yH()),o=!0),o&&e.splice(a,0,fP(n))}return{duration:r,delay:i,easing:s}}function jP(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Lr(n,e,t){e.forEach((r,i)=>{let s=vm(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Us(n,e){e.forEach((t,r)=>{let i=vm(r);n.style[i]=""})}function yc(n){return Array.isArray(n)?n.length==1?n[0]:hP(n):n}function $P(n,e,t){let r=e.params||{},i=LE(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(bH(s))})}var AE=new RegExp(`${ME}\\s*(.+?)\\s*${xH}`,"g");function LE(n){let e=[];if(typeof n=="string"){let t;for(;t=AE.exec(n);)e.push(t[1]);AE.lastIndex=0}return e}function bc(n,e,t){let r=`${n}`,i=r.replace(AE,(s,o)=>{let a=e[o];return a==null&&(t.push(EH(o)),a=""),a.toString()});return i==r?n:i}var kH=/-+([a-z0-9])/g;function vm(n){return n.replace(kH,(...e)=>e[1].toUpperCase())}function HP(n,e){return n===0||e===0}function zP(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,ym(n,a)))}}return e}function Bn(n,e,t){switch(e.type){case we.Trigger:return n.visitTrigger(e,t);case we.State:return n.visitState(e,t);case we.Transition:return n.visitTransition(e,t);case we.Sequence:return n.visitSequence(e,t);case we.Group:return n.visitGroup(e,t);case we.Animate:return n.visitAnimate(e,t);case we.Keyframes:return n.visitKeyframes(e,t);case we.Style:return n.visitStyle(e,t);case we.Reference:return n.visitReference(e,t);case we.AnimateChild:return n.visitAnimateChild(e,t);case we.AnimateRef:return n.visitAnimateRef(e,t);case we.Query:return n.visitQuery(e,t);case we.Stagger:return n.visitStagger(e,t);default:throw wH(e.type)}}function ym(n,e){return window.getComputedStyle(n)[e]}var ew=(()=>{class n{validateStyleProperty(t){return BP(t)}containsElement(t,r){return PE(t,r)}getParentElement(t){return mm(t)}query(t,r,i){return NE(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new si(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),qo=class{static NOOP=new ew},Wo=class{};var PH=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Sm=class extends Wo{normalizePropertyName(e,t){return vm(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(PH.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(mP(e,r))}return o+s}};var Cm="*";function NH(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>MH(r,t,e)):t.push(n),t}function MH(n,e,t){if(n[0]==":"){let c=OH(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(DP(n)),e;let i=r[1],s=r[2],o=r[3];e.push(GP(i,o));let a=i==Cm&&o==Cm;s[0]=="<"&&!a&&e.push(GP(o,i))}function OH(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(xP(n)),"* => *"}}var bm=new Set(["true","1"]),Em=new Set(["false","0"]);function GP(n,e){let t=bm.has(n)||Em.has(n),r=bm.has(e)||Em.has(e);return(i,s)=>{let o=n==Cm||n==i,a=e==Cm||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?bm.has(n):Em.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?bm.has(e):Em.has(e)),o&&a}}var tN=":self",FH=new RegExp(`s*${tN}s*,?`,"g");function nN(n,e,t,r){return new HE(n).build(e,t,r)}var qP="",HE=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new zE(t);return this._resetContextStyleTimingState(i),Bn(this,yc(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=qP,e.collectedStyles=new Map,e.collectedStyles.set(qP,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(gP()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==we.State){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,s.push(this.visitState(c,t))}),c.name=u}else if(a.type==we.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(_P())}),{type:we.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{LE(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&t.errors.push(vP(e.name,[...s.values()]))}return{type:we.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Bn(this,yc(e.animation),t),i=NH(e.expr,t.errors);return{type:we.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Go(e.options)}}visitSequence(e,t){return{type:we.Sequence,steps:e.steps.map(r=>Bn(this,r,t)),options:Go(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=Bn(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:we.Group,steps:s,options:Go(e.options)}}visitAnimate(e,t){let r=BH(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ye({});if(s.type==we.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let u={};r.easing&&(u.easing=r.easing),o=Ye(u)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:we.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===mr?r.push(a):t.errors.push(yP(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(ME)>=0){s=!0;break}}}),{type:we.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let u=t.collectedStyles.get(t.currentQuerySelector),d=u.get(c),f=!0;d&&(s!=i&&s>=d.startTime&&i<=d.endTime&&(t.errors.push(bP(c,d.startTime,d.endTime,s,i)),f=!1),s=d.startTime),f&&u.set(c,{startTime:s,endTime:i}),t.options&&$P(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:we.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(EP()),r;let i=1,s=0,o=[],a=!1,c=!1,u=0,d=e.steps.map(j=>{let Y=this._makeStyleAst(j,t),ne=Y.offset!=null?Y.offset:UH(Y.styles),he=0;return ne!=null&&(s++,he=Y.offset=ne),c=c||he<0||he>1,a=a||he<u,u=he,o.push(he),Y});c&&t.errors.push(wP()),a&&t.errors.push(IP());let f=e.steps.length,_=0;s>0&&s<f?t.errors.push(SP()):s==0&&(_=i/(f-1));let b=f-1,I=t.currentTime,k=t.currentAnimateTimings,N=k.duration;return d.forEach((j,Y)=>{let ne=_>0?Y==b?1:_*Y:o[Y],he=ne*N;t.currentTime=I+k.delay+he,k.duration=he,this._validateStyleAst(j,t),j.offset=ne,r.styles.push(j)}),r}visitReference(e,t){return{type:we.Reference,animation:Bn(this,yc(e.animation),t),options:Go(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:we.AnimateChild,options:Go(e.options)}}visitAnimateRef(e,t){return{type:we.AnimateRef,animation:this.visitReference(e.animation,t),options:Go(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=LH(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Un(t.collectedStyles,t.currentQuerySelector,new Map);let a=Bn(this,yc(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:we.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Go(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(CP());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Qu(e.timings,t.errors,!0);return{type:we.Stagger,animation:Bn(this,yc(e.animation),t),timings:r,options:null}}};function LH(n){let e=!!n.split(/\s*,\s*/).find(t=>t==tN);return e&&(n=n.replace(FH,"")),n=n.replace(/@\*/g,Yu).replace(/@\w+/g,t=>Yu+"-"+t.slice(1)).replace(/:animating/g,_m),[n,e]}function VH(n){return n?O({},n):null}var zE=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function UH(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function BH(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Qu(n,e).duration;return VE(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=VE(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Qu(t,e);return VE(i.duration,i.delay,i.easing)}function Go(n){return n?(n=O({},n),n.params&&(n.params=VH(n.params))):n={},n}function VE(n,e,t){return{duration:n,delay:e,easing:t}}function tw(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Zu=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},jH=1,$H=":enter",HH=new RegExp($H,"g"),zH=":leave",GH=new RegExp(zH,"g");function rN(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return new GE().buildKeyframes(n,e,t,r,i,s,o,a,c,u)}var GE=class{buildKeyframes(e,t,r,i,s,o,a,c,u,d=[]){u=u||new Zu;let f=new qE(e,t,u,i,s,d,[]);f.options=c;let _=c.delay?oi(c.delay):0;f.currentTimeline.delayNextStep(_),f.currentTimeline.setStyles([o],null,f.errors,c),Bn(this,r,f);let b=f.timelines.filter(I=>I.containsAnimation());if(b.length&&a.size){let I;for(let k=b.length-1;k>=0;k--){let N=b[k];if(N.element===t){I=N;break}}I&&!I.allowOnlyTimelineStyles()&&I.setStyles([a],null,f.errors,c)}return b.length?b.map(I=>I.buildKeyframes()):[tw(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:oi(bc(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?oi(r.duration):null,a=r.delay!=null?oi(r.delay):null;return o!==0&&e.forEach(c=>{let u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Bn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==we.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Tm);let o=oi(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Bn(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?oi(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),Bn(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?bc(r,t.params,t.errors):r;return Qu(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==we.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?oi(i.delay):0;s&&(t.previousNode.type===we.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Tm);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,d)=>{t.currentQueryIndex=d;let f=t.createSubContext(e.options,u);s&&f.delayNextStep(s),u===t.element&&(c=f.currentTimeline),Bn(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let _=f.currentTimeline.currentTime;o=Math.max(o,_)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let d=t.currentTimeline;c&&d.delayNextStep(c);let f=d.currentTime;Bn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},Tm={},qE=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Tm;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=c||new Dm(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=oi(r.duration)),r.delay!=null&&(i.delay=oi(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=bc(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Tm,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new WE(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(HH,"."+this._enterClassName),e=e.replace(GH,"."+this._leaveClassName);let c=r!=1,u=this._driver.query(this.element,e,c);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&a.length==0&&o.push(TP(t)),a}},Dm=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=jH,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||mr),this._currentKeyframe.set(t,mr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=qH(e,this._globalTimelineStyles);for(let[a,c]of o){let u=bc(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??mr),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let u=new Map([...this._backFill,...a]);u.forEach((d,f)=>{d===vc?e.add(f):d===mr&&t.add(f)}),r||u.set("offset",c/this.duration),i.push(u)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return tw(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},WE=class extends Dm{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let u=new Map(e[0]);u.set("offset",WP(a)),s.push(u);let d=e.length-1;for(let f=1;f<=d;f++){let _=new Map(e[f]),b=_.get("offset"),I=t+b*r;_.set("offset",WP(I/o)),s.push(_)}r=o,t=0,i="",e=s}return tw(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function WP(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function qH(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,mr)}else for(let[s,o]of i)t.set(s,o)}),t}function KP(n,e,t,r,i,s,o,a,c,u,d,f,_){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:d,totalTime:f,errors:_}}var UE={},xm=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return WH(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,d){let f=[],_=this.ast.options&&this.ast.options.params||UE,b=a&&a.params||UE,I=this.buildStyles(r,b,f),k=c&&c.params||UE,N=this.buildStyles(i,k,f),j=new Set,Y=new Map,ne=new Map,he=i==="void",Qe={params:iN(k,_),delay:this.ast.options?.delay},De=d?[]:rN(e,t,this.ast.animation,s,o,I,N,Qe,u,f),D=0;return De.forEach(w=>{D=Math.max(w.duration+w.delay,D)}),f.length?KP(t,this._triggerName,r,i,he,I,N,[],[],Y,ne,D,f):(De.forEach(w=>{let C=w.element,x=Un(Y,C,new Set);w.preStyleProps.forEach(M=>x.add(M));let R=Un(ne,C,new Set);w.postStyleProps.forEach(M=>R.add(M)),C!==t&&j.add(C)}),KP(t,this._triggerName,r,i,he,I,N,De,[...j.values()],Y,ne,D))}};function WH(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function iN(n,e){let t=O({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var KE=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=iN(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=bc(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function KH(n,e,t){return new YE(n,e,t)}var YE=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new KE(i.style,s,r))}),YP(this.states,"true","1"),YP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new xm(e,i,this.states))}),this.fallbackTransition=YH(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function YH(n,e,t){let r=[(o,a)=>!0],i={type:we.Sequence,steps:[],options:null},s={type:we.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new xm(n,s,e)}function YP(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var QH=new Zu,QE=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=nN(this._driver,t,r,i);if(r.length)throw RP(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=RE(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=rN(this._driver,t,s,OE,gm,new Map,new Map,r,QH,i),o.forEach(d=>{let f=Un(a,d.element,new Map);d.postStyleProps.forEach(_=>f.set(_,null))})):(i.push(kP()),o=[]),i.length)throw PP(i);a.forEach((d,f)=>{d.forEach((_,b)=>{d.set(b,this._driver.computeStyle(f,b,mr))})});let c=o.map(d=>{let f=a.get(d.element);return this._buildPlayer(d,new Map,f)}),u=Ui(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw NP(e);return t}listen(e,t,r,i){let s=pm(t,"","","");return fm(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},QP="ng-animate-queued",JH=".ng-animate-queued",BE="ng-animate-disabled",ZH=".ng-animate-disabled",XH="ng-star-inserted",e6=".ng-star-inserted",t6=[],sN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},n6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Vr="__ng_removed",Xu=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=i6(i),r){let s=e,{value:o}=s,a=$l(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Ju="void",jE=new Xu(Ju),JE=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,gr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw MP(r,t);if(r==null||r.length==0)throw OP(t);if(!s6(r))throw FP(r,t);let s=Un(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=Un(this._engine.statesByElement,e,new Map);return a.has(t)||(gr(e,Ku),gr(e,Ku+"-"+t),a.set(t,jE)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw LP(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new ed(this.id,t,e),a=this._engine.statesByElement.get(e);a||(gr(e,Ku),gr(e,Ku+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),u=new Xu(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=jE),!(u.value===Ju)&&c.value===u.value){if(!c6(c.params,u.params)){let k=[],N=s.matchStyles(c.value,c.params,k),j=s.matchStyles(u.value,u.params,k);k.length?this._engine.reportError(k):this._engine.afterFlush(()=>{Us(e,N),Lr(e,j)})}return}let _=Un(this._engine.playersByElement,e,[]);_.forEach(k=>{k.namespaceId==this.id&&k.triggerName==t&&k.queued&&k.destroy()});let b=s.matchTransition(c.value,u.value,e,u.params),I=!1;if(!b){if(!i)return;b=s.fallbackTransition,I=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:b,fromState:c,toState:u,player:o,isFallbackTransition:I}),I||(gr(e,QP),o.onStart(()=>{Ec(e,QP)})),o.onDone(()=>{let k=this.players.indexOf(o);k>=0&&this.players.splice(k,1);let N=this._engine.playersByElement.get(e);if(N){let j=N.indexOf(o);j>=0&&N.splice(j,1)}}),this.players.push(o),_.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Yu,!0);r.forEach(i=>{if(i[Vr])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){let d=this.trigger(e,u,Ju,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Ui(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,u=r.get(o)||jE,d=new Xu(Ju),f=new ed(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Vr];(!s||s===sN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){gr(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=pm(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,fm(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},ZE=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new JE(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(wm(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!wm(t))return;let s=t[Vr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),gr(e,BE)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ec(e,BE))}removeNode(e,t,r){if(wm(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Vr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return wm(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Yu,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,_m,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ui(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Vr];if(t&&t.setForRemoval){if(e[Vr]=sN,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(BE)&&this.markElementAsDisabled(e,!1),this.driver.query(e,ZH,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];gr(i,XH)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ui(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw VP(e)}_flushAnimations(e,t){let r=new Zu,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,d=new Set;this.disabledNodes.forEach(re=>{d.add(re);let ae=this.driver.query(re,JH,!0);for(let le=0;le<ae.length;le++)d.add(ae[le])});let f=this.bodyNode,_=Array.from(this.statesByElement.keys()),b=XP(_,this.collectedEnterElements),I=new Map,k=0;b.forEach((re,ae)=>{let le=OE+k++;I.set(ae,le),re.forEach(Re=>gr(Re,le))});let N=[],j=new Set,Y=new Set;for(let re=0;re<this.collectedLeaveElements.length;re++){let ae=this.collectedLeaveElements[re],le=ae[Vr];le&&le.setForRemoval&&(N.push(ae),j.add(ae),le.hasAnimation?this.driver.query(ae,e6,!0).forEach(Re=>j.add(Re)):Y.add(ae))}let ne=new Map,he=XP(_,Array.from(j));he.forEach((re,ae)=>{let le=gm+k++;ne.set(ae,le),re.forEach(Re=>gr(Re,le))}),e.push(()=>{b.forEach((re,ae)=>{let le=I.get(ae);re.forEach(Re=>Ec(Re,le))}),he.forEach((re,ae)=>{let le=ne.get(ae);re.forEach(Re=>Ec(Re,le))}),N.forEach(re=>{this.processLeaveNode(re)})});let Qe=[],De=[];for(let re=this._namespaceList.length-1;re>=0;re--)this._namespaceList[re].drainQueuedTransitions(t).forEach(le=>{let Re=le.player,Tt=le.element;if(Qe.push(Re),this.collectedEnterElements.length){let bt=Tt[Vr];if(bt&&bt.setForMove){if(bt.previousTriggersValues&&bt.previousTriggersValues.has(le.triggerName)){let wi=bt.previousTriggersValues.get(le.triggerName),Dn=this.statesByElement.get(le.element);if(Dn&&Dn.has(le.triggerName)){let Ii=Dn.get(le.triggerName);Ii.value=wi,Dn.set(le.triggerName,Ii)}}Re.destroy();return}}let or=!f||!this.driver.containsElement(f,Tt),yt=ne.get(Tt),lt=I.get(Tt),ut=this._buildInstruction(le,r,lt,yt,or);if(ut.errors&&ut.errors.length){De.push(ut);return}if(or){Re.onStart(()=>Us(Tt,ut.fromStyles)),Re.onDestroy(()=>Lr(Tt,ut.toStyles)),i.push(Re);return}if(le.isFallbackTransition){Re.onStart(()=>Us(Tt,ut.fromStyles)),Re.onDestroy(()=>Lr(Tt,ut.toStyles)),i.push(Re);return}let as=[];ut.timelines.forEach(bt=>{bt.stretchStartingKeyframe=!0,this.disabledNodes.has(bt.element)||as.push(bt)}),ut.timelines=as,r.append(Tt,ut.timelines);let yv={instruction:ut,player:Re,element:Tt};o.push(yv),ut.queriedElements.forEach(bt=>Un(a,bt,[]).push(Re)),ut.preStyleProps.forEach((bt,wi)=>{if(bt.size){let Dn=c.get(wi);Dn||c.set(wi,Dn=new Set),bt.forEach((Ii,cs)=>Dn.add(cs))}}),ut.postStyleProps.forEach((bt,wi)=>{let Dn=u.get(wi);Dn||u.set(wi,Dn=new Set),bt.forEach((Ii,cs)=>Dn.add(cs))})});if(De.length){let re=[];De.forEach(ae=>{re.push(UP(ae.triggerName,ae.errors))}),Qe.forEach(ae=>ae.destroy()),this.reportError(re)}let D=new Map,w=new Map;o.forEach(re=>{let ae=re.element;r.has(ae)&&(w.set(ae,ae),this._beforeAnimationBuild(re.player.namespaceId,re.instruction,D))}),i.forEach(re=>{let ae=re.element;this._getPreviousPlayers(ae,!1,re.namespaceId,re.triggerName,null).forEach(Re=>{Un(D,ae,[]).push(Re),Re.destroy()})});let C=N.filter(re=>eN(re,c,u)),x=new Map;ZP(x,this.driver,Y,u,mr).forEach(re=>{eN(re,c,u)&&C.push(re)});let M=new Map;b.forEach((re,ae)=>{ZP(M,this.driver,new Set(re),c,vc)}),C.forEach(re=>{let ae=x.get(re),le=M.get(re);x.set(re,new Map([...ae?.entries()??[],...le?.entries()??[]]))});let T=[],sr=[],os={};o.forEach(re=>{let{element:ae,player:le,instruction:Re}=re;if(r.has(ae)){if(d.has(ae)){le.onDestroy(()=>Lr(ae,Re.toStyles)),le.disabled=!0,le.overrideTotalTime(Re.totalTime),i.push(le);return}let Tt=os;if(w.size>1){let yt=ae,lt=[];for(;yt=yt.parentNode;){let ut=w.get(yt);if(ut){Tt=ut;break}lt.push(yt)}lt.forEach(ut=>w.set(ut,Tt))}let or=this._buildAnimation(le.namespaceId,Re,D,s,M,x);if(le.setRealPlayer(or),Tt===os)T.push(le);else{let yt=this.playersByElement.get(Tt);yt&&yt.length&&(le.parentPlayer=Ui(yt)),i.push(le)}}else Us(ae,Re.fromStyles),le.onDestroy(()=>Lr(ae,Re.toStyles)),sr.push(le),d.has(ae)&&i.push(le)}),sr.forEach(re=>{let ae=s.get(re.element);if(ae&&ae.length){let le=Ui(ae);re.setRealPlayer(le)}}),i.forEach(re=>{re.parentPlayer?re.syncPlayerEvents(re.parentPlayer):re.destroy()});for(let re=0;re<N.length;re++){let ae=N[re],le=ae[Vr];if(Ec(ae,gm),le&&le.hasAnimation)continue;let Re=[];if(a.size){let or=a.get(ae);or&&or.length&&Re.push(...or);let yt=this.driver.query(ae,_m,!0);for(let lt=0;lt<yt.length;lt++){let ut=a.get(yt[lt]);ut&&ut.length&&Re.push(...ut)}}let Tt=Re.filter(or=>!or.destroyed);Tt.length?o6(this,ae,Tt):this.processLeaveNode(ae)}return N.length=0,T.forEach(re=>{this.players.push(re),re.onDone(()=>{re.destroy();let ae=this.players.indexOf(re);this.players.splice(ae,1)}),re.play()}),T}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Ju;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let u=c.element,d=u!==s,f=Un(r,u,[]);this._getPreviousPlayers(u,d,o,a,t.toState).forEach(b=>{let I=b.getRealPlayer();I.beforeDestroy&&I.beforeDestroy(),b.destroy(),f.push(b)})}Us(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,u=[],d=new Set,f=new Set,_=t.timelines.map(I=>{let k=I.element;d.add(k);let N=k[Vr];if(N&&N.removedBeforeQueried)return new si(I.duration,I.delay);let j=k!==c,Y=a6((r.get(k)||t6).map(D=>D.getRealPlayer())).filter(D=>{let w=D;return w.element?w.element===k:!1}),ne=s.get(k),he=o.get(k),Qe=RE(this._normalizer,I.keyframes,ne,he),De=this._buildPlayer(I,Qe,Y);if(I.subTimeline&&i&&f.add(k),j){let D=new ed(e,a,k);D.setRealPlayer(De),u.push(D)}return De});u.forEach(I=>{Un(this.playersByQueriedElement,I.element,[]).push(I),I.onDone(()=>r6(this.playersByQueriedElement,I.element,I))}),d.forEach(I=>gr(I,FE));let b=Ui(_);return b.onDestroy(()=>{d.forEach(I=>Ec(I,FE)),Lr(c,t.toStyles)}),f.forEach(I=>{Un(i,I,[]).push(b)}),b}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new si(e.duration,e.delay)}},ed=class{namespaceId;triggerName;element;_player=new si;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>fm(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Un(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function r6(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function i6(n){return n??null}function wm(n){return n&&n.nodeType===1}function s6(n){return n=="start"||n=="done"}function JP(n,e){let t=n.style.display;return n.style.display=e??"none",t}function ZP(n,e,t,r,i){let s=[];t.forEach(c=>s.push(JP(c)));let o=[];r.forEach((c,u)=>{let d=new Map;c.forEach(f=>{let _=e.computeStyle(u,f,i);d.set(f,_),(!_||_.length==0)&&(u[Vr]=n6,o.push(u))}),n.set(u,d)});let a=0;return t.forEach(c=>JP(c,s[a++])),o}function XP(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let u=a.parentNode;return t.has(u)?c=u:i.has(u)?c=r:c=o(u),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function gr(n,e){n.classList?.add(e)}function Ec(n,e){n.classList?.remove(e)}function o6(n,e,t){Ui(t).onDone(()=>n.processLeaveNode(e))}function a6(n){let e=[];return oN(n,e),e}function oN(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Ho?oN(r.players,e):e.push(r)}}function c6(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function eN(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var wc=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new ZE(e.body,t,r),this._timelineEngine=new QE(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],u=[],d=nN(this._driver,s,c,u);if(c.length)throw AP(i,c);a=KH(i,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=kE(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=kE(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function l6(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=$E(e[0]),e.length>1&&(r=$E(e[e.length-1]))):e instanceof Map&&(t=$E(e)),t||r?new u6(n,t,r):null}var u6=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Lr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Lr(this._element,this._initialStyles),this._endStyles&&(Lr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Us(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Us(this._element,this._endStyles),this._endStyles=null),Lr(this._element,this._initialStyles),this._state=3)}}return n})();function $E(n){let e=null;return n.forEach((t,r)=>{d6(r)&&(e=e||new Map,e.set(r,t))}),e}function d6(n){return n==="display"||n==="position"}var Am=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:ym(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Rm=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return PE(e,t)}getParentElement(e){return mm(e)}query(e,t,r){return NE(e,t,r)}computeStyle(e,t,r){return ym(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let u=new Map,d=o.filter(b=>b instanceof Am);HP(r,i)&&d.forEach(b=>{b.currentSnapshot.forEach((I,k)=>u.set(k,I))});let f=jP(t).map(b=>new Map(b));f=zP(e,f,u);let _=l6(e,f);return new Am(e,f,c,_)}};var Im="@",aN="@.disabled",km=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Im&&t==aN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},XE=class extends km{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Im?t.charAt(1)=="."&&t==aN?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==Im){let s=h6(e),o=t.slice(1),a="";return o.charAt(0)!=Im&&([o,a]=f6(o)),this.engine.listen(this.namespaceId,s,o,a,c=>{let u=c._data||-1;this.factory.scheduleListenerCallback(u,r,c)})}return this.delegate.listen(e,t,r,i)}};function h6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function f6(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var Pm=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,d=u.get(i);if(!d){let f=()=>u.delete(i);d=new km("",i,this.engine,f),u.set(i,d)}return d}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(s,o,e,u.name,u)};return t.data.animation.forEach(a),new XE(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var m6=(()=>{class n extends wc{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(se(et),se(qo),se(Wo))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function g6(){return new Sm}function _6(){return new Pm(F(Gu),F(wc),F(Me))}var lN=[{provide:Wo,useFactory:g6},{provide:wc,useClass:m6},{provide:kn,useFactory:_6}],v6=[{provide:qo,useClass:ew},{provide:Sp,useValue:"NoopAnimations"},...lN],cN=[{provide:qo,useFactory:()=>new Rm},{provide:Sp,useFactory:()=>"BrowserAnimations"},...lN],uN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?v6:cN}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=gt({type:n});static \u0275inj=ht({providers:cN,imports:[Wu]})}return n})();function y6(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===0||t===1?1:i===0&&t!==0&&t%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var dN=["fr",[["AM","PM"]],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}",void 0,void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",y6];var hN=()=>{};var mN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},b6=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Nm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,_=(a&15)<<2|u>>6,b=u&63;c||(b=64,o||(_=64)),r.push(t[d],t[f],t[_],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):b6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new rw;let _=s<<2|a>>4;if(r.push(_),u!==64){let b=a<<4&240|u>>2;if(r.push(b),f!==64){let I=u<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},rw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},E6=function(n){let e=mN(n);return Nm.encodeByteArray(e,!0)},nd=function(n){return E6(n).replace(/\./g,"")},Mm=function(n){try{return Nm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var w6=()=>sw().__FIREBASE_DEFAULTS__,I6=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},S6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Mm(n[1]);return e&&JSON.parse(e)},Om=()=>{try{return hN()||w6()||I6()||S6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ow=n=>{var e,t;return(t=(e=Om())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},gN=n=>{let e=ow(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},aw=()=>{var n;return(n=Om())===null||n===void 0?void 0:n.config},cw=n=>{var e;return(e=Om())===null||e===void 0?void 0:e[`_${n}`]};var Ko=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Bs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fm(n){return(await fetch(n,{credentials:"include"})).ok}function _N(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[nd(JSON.stringify(t)),nd(JSON.stringify(o)),""].join(".")}var td={};function C6(){let n={prod:[],emulator:[]};for(let e of Object.keys(td))td[e]?n.emulator.push(e):n.prod.push(e);return n}function T6(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var fN=!1;function Lm(n,e){if(typeof window>"u"||typeof document>"u"||!Bs(window.location.host)||td[n]===e||td[n]||fN)return;td[n]=e;function t(_){return`__firebase__banner__${_}`}let r="__firebase__banner",s=C6().prod.length>0;function o(){let _=document.getElementById(r);_&&_.remove()}function a(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function u(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{fN=!0,o()},_}function d(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function f(){let _=T6(r),b=t("text"),I=document.getElementById(b)||document.createElement("span"),k=t("learnmore"),N=document.getElementById(k)||document.createElement("a"),j=t("preprendIcon"),Y=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let ne=_.element;a(ne),d(N,k);let he=u();c(Y,j),ne.append(Y,I,N,he),document.body.appendChild(ne)}s?(I.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function D6(){var n;let e=(n=Om())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function EN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wN(){let n=$t();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function IN(){return!D6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rd(){try{return typeof indexedDB=="object"}catch{return!1}}function SN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var x6="FirebaseError",Xn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=x6,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ur.prototype.create)}},Ur=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?A6(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Xn(i,a,r)}};function A6(n,e){return n.replace(R6,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var R6=/\{\$([^}]+)}/g;function CN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ai(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(pN(s)&&pN(o)){if(!ai(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function pN(n){return n!==null&&typeof n=="object"}function Ic(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function TN(n,e){let t=new iw(n,e);return t.subscribe.bind(t)}var iw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");k6(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=nw),i.error===void 0&&(i.error=nw),i.complete===void 0&&(i.complete=nw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function k6(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nw(){}var Kge=14400*1e3;function It(n){return n&&n._delegate?n._delegate:n}var In=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Yo="[DEFAULT]";var lw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ko;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N6(e))try{this.getOrInitializeService({instanceIdentifier:Yo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yo){return this.instances.has(e)}getOptions(e=Yo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:P6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yo){return this.component?this.component.multipleInstances?e:Yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function P6(n){return n===Yo?void 0:n}function N6(n){return n.instantiationMode==="EAGER"}var Vm=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new lw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var M6=[],ke=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ke||{}),O6={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},F6=ke.INFO,L6={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},V6=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=L6[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ci=class{constructor(e){this.name=e,this._logLevel=F6,this._logHandler=V6,this._userLogHandler=null,M6.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}};var U6=(n,e)=>e.some(t=>n instanceof t),DN,xN;function B6(){return DN||(DN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j6(){return xN||(xN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var AN=new WeakMap,dw=new WeakMap,RN=new WeakMap,uw=new WeakMap,fw=new WeakMap;function $6(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(li(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&AN.set(t,n)}).catch(()=>{}),fw.set(e,n),e}function H6(n){if(dw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});dw.set(n,e)}var hw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||RN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return li(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kN(n){hw=n(hw)}function z6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Um(this),e,...t);return RN.set(r,e.sort?e.sort():[e]),li(r)}:j6().includes(n)?function(...e){return n.apply(Um(this),e),li(AN.get(this))}:function(...e){return li(n.apply(Um(this),e))}}function G6(n){return typeof n=="function"?z6(n):(n instanceof IDBTransaction&&H6(n),U6(n,B6())?new Proxy(n,hw):n)}function li(n){if(n instanceof IDBRequest)return $6(n);if(uw.has(n))return uw.get(n);let e=G6(n);return e!==n&&(uw.set(n,e),fw.set(e,n)),e}var Um=n=>fw.get(n);function Bm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=li(o);return r&&o.addEventListener("upgradeneeded",c=>{r(li(o.result),c.oldVersion,c.newVersion,li(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var q6=["get","getKey","getAll","getAllKeys","count"],W6=["put","add","delete","clear"],pw=new Map;function PN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pw.get(e))return pw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=W6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||q6.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&c.done]))[0]};return pw.set(e,s),s}kN(n=>ee(O({},n),{get:(e,t,r)=>PN(e,t)||n.get(e,t,r),has:(e,t)=>!!PN(e,t)||n.has(e,t)}));var gw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(K6(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function K6(n){let e=n.getComponent();return e?.type==="VERSION"}var _w="@firebase/app",NN="0.13.2";var Bi=new ci("@firebase/app"),Y6="@firebase/app-compat",Q6="@firebase/analytics-compat",J6="@firebase/analytics",Z6="@firebase/app-check-compat",X6="@firebase/app-check",e8="@firebase/auth",t8="@firebase/auth-compat",n8="@firebase/database",r8="@firebase/data-connect",i8="@firebase/database-compat",s8="@firebase/functions",o8="@firebase/functions-compat",a8="@firebase/installations",c8="@firebase/installations-compat",l8="@firebase/messaging",u8="@firebase/messaging-compat",d8="@firebase/performance",h8="@firebase/performance-compat",f8="@firebase/remote-config",p8="@firebase/remote-config-compat",m8="@firebase/storage",g8="@firebase/storage-compat",_8="@firebase/firestore",v8="@firebase/ai",y8="@firebase/firestore-compat",b8="firebase",E8="11.10.0";var vw="[DEFAULT]",w8={[_w]:"fire-core",[Y6]:"fire-core-compat",[J6]:"fire-analytics",[Q6]:"fire-analytics-compat",[X6]:"fire-app-check",[Z6]:"fire-app-check-compat",[e8]:"fire-auth",[t8]:"fire-auth-compat",[n8]:"fire-rtdb",[r8]:"fire-data-connect",[i8]:"fire-rtdb-compat",[s8]:"fire-fn",[o8]:"fire-fn-compat",[a8]:"fire-iid",[c8]:"fire-iid-compat",[l8]:"fire-fcm",[u8]:"fire-fcm-compat",[d8]:"fire-perf",[h8]:"fire-perf-compat",[f8]:"fire-rc",[p8]:"fire-rc-compat",[m8]:"fire-gcs",[g8]:"fire-gcs-compat",[_8]:"fire-fst",[y8]:"fire-fst-compat",[v8]:"fire-vertex","fire-js":"fire-js",[b8]:"fire-js-all"};var id=new Map,I8=new Map,yw=new Map;function MN(n,e){try{n.container.addComponent(e)}catch(t){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Br(n){let e=n.name;if(yw.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;yw.set(e,n);for(let t of id.values())MN(t,n);for(let t of I8.values())MN(t,n);return!0}function Sc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function er(n){return n==null?!1:n.settings!==void 0}var S8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},js=new Ur("app","Firebase",S8);var bw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new In("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}};var $s=E8;function Iw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:vw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw js.create("bad-app-name",{appName:String(i)});if(t||(t=aw()),!t)throw js.create("no-options");let s=id.get(i);if(s){if(ai(t,s.options)&&ai(r,s.config))return s;throw js.create("duplicate-app",{appName:i})}let o=new Vm(i);for(let c of yw.values())o.addComponent(c);let a=new bw(t,r,o);return id.set(i,a),a}function Qo(n=vw){let e=id.get(n);if(!e&&n===vw&&aw())return Iw();if(!e)throw js.create("no-app",{appName:n});return e}function jm(){return Array.from(id.values())}function St(n,e,t){var r;let i=(r=w8[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(a.join(" "));return}Br(new In(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var C8="firebase-heartbeat-database",T8=1,sd="firebase-heartbeat-store",mw=null;function VN(){return mw||(mw=Bm(C8,T8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sd)}catch(t){console.warn(t)}}}}).catch(n=>{throw js.create("idb-open",{originalErrorMessage:n.message})})),mw}async function D8(n){try{let t=(await VN()).transaction(sd),r=await t.objectStore(sd).get(UN(n));return await t.done,r}catch(e){if(e instanceof Xn)Bi.warn(e.message);else{let t=js.create("idb-get",{originalErrorMessage:e?.message});Bi.warn(t.message)}}}async function ON(n,e){try{let r=(await VN()).transaction(sd,"readwrite");await r.objectStore(sd).put(e,UN(n)),await r.done}catch(t){if(t instanceof Xn)Bi.warn(t.message);else{let r=js.create("idb-set",{originalErrorMessage:t?.message});Bi.warn(r.message)}}}function UN(n){return`${n.name}!${n.options.appId}`}var x8=1024,A8=30,Ew=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ww(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=FN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>A8){let o=k8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=FN(),{heartbeatsToSend:r,unsentEntries:i}=R8(this._heartbeatsCache.heartbeats),s=nd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Bi.warn(t),""}}};function FN(){return new Date().toISOString().substring(0,10)}function R8(n,e=x8){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),LN(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),LN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ww=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rd()?SN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await D8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return ON(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return ON(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function LN(n){return nd(JSON.stringify({version:2,heartbeats:n})).length}function k8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function P8(n){Br(new In("platform-logger",e=>new gw(e),"PRIVATE")),Br(new In("heartbeat",e=>new Ew(e),"PRIVATE")),St(_w,NN,n),St(_w,NN,"esm2017"),St("fire-js","")}P8("");var N8="firebase",M8="11.10.0";St(N8,M8,"app");function BN(n){n===void 0&&(n=F(We));let e=n.get(oc);return t=>new _e(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var Hs=new ys("ANGULARFIRE2_VERSION");function od(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Tc=(n,e)=>{let t=e?[e]:jm(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Cc=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Cc||{}),jN=eE()&&typeof Zone<"u"?Cc.WARN:Cc.SILENT;var $m=class{zone;delegate;constructor(e,t=fy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},zs=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=F(Me);this.outsideAngular=t.runOutsideAngular(()=>new $m(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new $m(typeof Zone>"u"?void 0:Zone.current,ps))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$N=!1;function O8(n,e){!$N&&(jN>Cc.SILENT||eE())&&($N=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),jN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function F8(n){let e=F(Me,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Jo(n){let e=F(Me,{optional:!0});return e?e.run(()=>n()):n()}var L8=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Rt(t,()=>Jo(()=>n.apply(void 0,r)))),_t=(n,e,t)=>(t||=e?Cc.WARN:Cc.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=F(zs),o=F(oc),a=F(wt)}catch{return O8(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Jo(()=>o.add())),i[u]=L8(i[u],r,a));let c=F8(()=>n.apply(this,i));return e?c instanceof _e?c.pipe(gs(s.outsideAngular),ms(s.insideAngular),BN(a)):c instanceof Promise?Jo(()=>{let u=o.add();return new Promise((d,f)=>{c.then(_=>Rt(a,()=>Jo(()=>d(_))),_=>Rt(a,()=>Jo(()=>f(_)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Jo(()=>c):c instanceof _e?c.pipe(gs(s.outsideAngular),ms(s.insideAngular)):Jo(()=>c)});var ji=class{constructor(e){return e}},Zo=class{constructor(){return jm()}};function V8(n){return n&&n.length===1?n[0]:new ji(Qo())}var Sw=new Q("angularfire2._apps"),U8={provide:ji,useFactory:V8,deps:[[new Gn,Sw]]},B8={provide:Zo,deps:[[new Gn,Sw]]};function j8(n){return(e,t)=>{let r=t.get(Ni);St("angularfire",Hs.full,"core"),St("angularfire",Hs.full,"app"),St("angular",Oy.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ji(i)}}function HN(n,...e){return Dr([U8,B8,{provide:Sw,useFactory:j8(n),multi:!0,deps:[Me,We,zs,...e]}])}var zN=_t(Iw,!0);var $8=new Map,H8={activated:!1,tokenObservers:[]},z8={initialized:!1,enabled:!1};function jr(n){return $8.get(n)||Object.assign({},H8)}function KN(){return z8}var G8="https://content-firebaseappcheck.googleapis.com/v1";var q8="exchangeDebugToken",GN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},K_e=1440*60*1e3;var Dw=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ko,this.pending.promise.catch(t=>{}),await W8(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ko,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function W8(n){return new Promise(e=>{setTimeout(e,n)})}var K8={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Gs=new Ur("appCheck","AppCheck",K8);function YN(n){if(!jr(n).activated)throw Gs.create("use-before-activation",{appName:n.name})}async function QN({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(f){throw Gs.create("fetch-network-error",{originalErrorMessage:f?.message})}if(o.status!==200)throw Gs.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Gs.create("fetch-parse-error",{originalErrorMessage:f?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let u=Number(c[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+u,issuedAtTimeMillis:d}}function JN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${G8}/projects/${t}/apps/${r}:${q8}?key=${i}`,body:{debug_token:e}}}var Y8="firebase-app-check-database",Q8=1,xw="firebase-app-check-store";var Hm=null;function J8(){return Hm||(Hm=new Promise((n,e)=>{try{let t=indexedDB.open(Y8,Q8);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Gs.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(xw,{keyPath:"compositeKey"})}}}catch(t){e(Gs.create("storage-open",{originalErrorMessage:t?.message}))}}),Hm)}function Z8(n,e){return X8(ez(n),e)}async function X8(n,e){let r=(await J8()).transaction(xw,"readwrite"),s=r.objectStore(xw).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(Gs.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function ez(n){return`${n.options.appId}-${n.name}`}var ad=new ci("@firebase/app-check");function Cw(n,e){return rd()?Z8(n,e).catch(t=>{ad.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ZN(){return KN().enabled}async function XN(){let n=KN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var tz={error:"UNKNOWN_ERROR"};function nz(n){return Nm.encodeString(JSON.stringify(n),!1)}async function Aw(n,e=!1,t=!1){let r=n.app;YN(r);let i=jr(r),s=i.token,o;if(s&&!cd(s)&&(i.token=void 0,s=void 0),!s){let u=await i.cachedTokenPromise;u&&(cd(u)?s=u:await Cw(r,void 0))}if(!e&&s&&cd(s))return{token:s.token};let a=!1;if(ZN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=QN(JN(r,await XN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=await i.exchangeTokenPromise;return await Cw(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?ad.warn(u.message):t&&ad.error(u),Tw(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await jr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?ad.warn(u.message):t&&ad.error(u),o=u}let c;return s?o?cd(s)?c={token:s.token,internalError:o}:c=Tw(o):(c={token:s.token},i.token=s,await Cw(r,s)):c=Tw(o),a&&oz(r,c),c}async function rz(n){let e=n.app;YN(e);let{provider:t}=jr(e);if(ZN()){let r=await XN(),{token:i}=await QN(JN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function iz(n,e,t,r){let{app:i}=n,s=jr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&cd(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),qN(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>qN(n))}function eM(n,e){let t=jr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function qN(n){let{app:e}=n,t=jr(e),r=t.tokenRefresher;r||(r=sz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function sz(n){let{app:e}=n;return new Dw(async()=>{let t=jr(e),r;if(t.token?r=await Aw(n,!0):r=await Aw(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=jr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},GN.RETRIAL_MIN_WAIT,GN.RETRIAL_MAX_WAIT)}function oz(n,e){let t=jr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function cd(n){return n.expireTimeMillis-Date.now()>0}function Tw(n){return{token:nz(tz),error:n}}var Rw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=jr(this.app);for(let t of e)eM(this.app,t.next);return Promise.resolve()}};function az(n,e){return new Rw(n,e)}function cz(n){return{getToken:e=>Aw(n,e),getLimitedUseToken:()=>rz(n),addTokenListener:e=>iz(n,"INTERNAL",e),removeTokenListener:e=>eM(n.app,e)}}var lz="@firebase/app-check",uz="0.10.1";var dz="app-check",WN="app-check-internal";function hz(){Br(new In(dz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return az(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(WN).initialize()})),Br(new In(WN,n=>{let e=n.getProvider("app-check").getImmediate();return cz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),St(lz,uz)}hz();var fz="app-check";var Dc=class{constructor(){return Tc(fz)}};var pz=["localhost","0.0.0.0","127.0.0.1"],ove=typeof window<"u"&&pz.includes(window.location.hostname);var tM=()=>{};var nM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},mz=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},rM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,_=(a&15)<<2|u>>6,b=u&63;c||(b=64,o||(_=64)),r.push(t[d],t[f],t[_],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):mz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new Pw;let _=s<<2|a>>4;if(r.push(_),u!==64){let b=a<<4&240|u>>2;if(r.push(b),f!==64){let I=u<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Pw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},gz=function(n){let e=nM(n);return rM.encodeByteArray(e,!0)},Mw=function(n){return gz(n).replace(/\./g,"")},zm=function(n){try{return rM.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _z(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var vz=()=>_z().__FIREBASE_DEFAULTS__,yz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&zm(n[1]);return e&&JSON.parse(e)},Ez=()=>{try{return tM()||vz()||yz()||bz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var iM=n=>Ez()?.[`_${n}`];function Ow(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function $r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($r())}function oM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function cM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lM(){try{return typeof indexedDB=="object"}catch{return!1}}function uM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var wz="FirebaseError",ui=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$i.prototype.create)}},$i=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Iz(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ui(i,a,r)}};function Iz(n,e){return n.replace(Sz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Sz=/\{\$([^}]+)}/g;function Fw(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dM(n,e){let t=new Nw(n,e);return t.subscribe.bind(t)}var Nw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Cz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=kw),i.error===void 0&&(i.error=kw),i.complete===void 0&&(i.complete=kw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Cz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function kw(){}var dve=14400*1e3;function xc(n){return n&&n._delegate?n._delegate:n}var Hi=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Tz=[],nt=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(nt||{}),Dz={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},xz=nt.INFO,Az={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},Rz=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Az[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ac=class{constructor(e){this.name=e,this._logLevel=xz,this._logHandler=Rz,this._userLogHandler=null,Tz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}};var Vw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Pz(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Pz(n){return n.getComponent()?.type==="VERSION"}var Uw="@firebase/app",hM="0.14.6";var zi=new Ac("@firebase/app"),Nz="@firebase/app-compat",Mz="@firebase/analytics-compat",Oz="@firebase/analytics",Fz="@firebase/app-check-compat",Lz="@firebase/app-check",Vz="@firebase/auth",Uz="@firebase/auth-compat",Bz="@firebase/database",jz="@firebase/data-connect",$z="@firebase/database-compat",Hz="@firebase/functions",zz="@firebase/functions-compat",Gz="@firebase/installations",qz="@firebase/installations-compat",Wz="@firebase/messaging",Kz="@firebase/messaging-compat",Yz="@firebase/performance",Qz="@firebase/performance-compat",Jz="@firebase/remote-config",Zz="@firebase/remote-config-compat",Xz="@firebase/storage",eG="@firebase/storage-compat",tG="@firebase/firestore",nG="@firebase/ai",rG="@firebase/firestore-compat",iG="firebase",sG="12.6.0";var oG={[Uw]:"fire-core",[Nz]:"fire-core-compat",[Oz]:"fire-analytics",[Mz]:"fire-analytics-compat",[Lz]:"fire-app-check",[Fz]:"fire-app-check-compat",[Vz]:"fire-auth",[Uz]:"fire-auth-compat",[Bz]:"fire-rtdb",[jz]:"fire-data-connect",[$z]:"fire-rtdb-compat",[Hz]:"fire-fn",[zz]:"fire-fn-compat",[Gz]:"fire-iid",[qz]:"fire-iid-compat",[Wz]:"fire-fcm",[Kz]:"fire-fcm-compat",[Yz]:"fire-perf",[Qz]:"fire-perf-compat",[Jz]:"fire-rc",[Zz]:"fire-rc-compat",[Xz]:"fire-gcs",[eG]:"fire-gcs-compat",[tG]:"fire-fst",[rG]:"fire-fst-compat",[nG]:"fire-vertex","fire-js":"fire-js",[iG]:"fire-js-all"};var aG=new Map,cG=new Map,fM=new Map;function pM(n,e){try{n.container.addComponent(e)}catch(t){zi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function kc(n){let e=n.name;if(fM.has(e))return zi.debug(`There were multiple attempts to register component ${e}.`),!1;fM.set(e,n);for(let t of aG.values())pM(t,n);for(let t of cG.values())pM(t,n);return!0}function Xo(n){return n==null?!1:n.settings!==void 0}var lG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$w=new $i("app","Firebase",lG);var Gm=sG;function Rc(n,e,t){let r=oG[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zi.warn(o.join(" "));return}kc(new Hi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var uG="firebase-heartbeat-database",dG=1,ld="firebase-heartbeat-store",Lw=null;function vM(){return Lw||(Lw=Bm(uG,dG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ld)}catch(t){console.warn(t)}}}}).catch(n=>{throw $w.create("idb-open",{originalErrorMessage:n.message})})),Lw}async function hG(n){try{let t=(await vM()).transaction(ld),r=await t.objectStore(ld).get(yM(n));return await t.done,r}catch(e){if(e instanceof ui)zi.warn(e.message);else{let t=$w.create("idb-get",{originalErrorMessage:e?.message});zi.warn(t.message)}}}async function mM(n,e){try{let r=(await vM()).transaction(ld,"readwrite");await r.objectStore(ld).put(e,yM(n)),await r.done}catch(t){if(t instanceof ui)zi.warn(t.message);else{let r=$w.create("idb-set",{originalErrorMessage:t?.message});zi.warn(r.message)}}}function yM(n){return`${n.name}!${n.options.appId}`}var fG=1024,pG=30,Bw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new jw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=gM();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>pG){let i=gG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=gM(),{heartbeatsToSend:t,unsentEntries:r}=mG(this._heartbeatsCache.heartbeats),i=Mw(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return zi.warn(e),""}}};function gM(){return new Date().toISOString().substring(0,10)}function mG(n,e=fG){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_M(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),_M(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var jw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lM()?uM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await hG(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return mM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return mM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function _M(n){return Mw(JSON.stringify({version:2,heartbeats:n})).length}function gG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function _G(n){kc(new Hi("platform-logger",e=>new Vw(e),"PRIVATE")),kc(new Hi("heartbeat",e=>new Bw(e),"PRIVATE")),Rc(Uw,hM,n),Rc(Uw,hM,"esm2020"),Rc("fire-js","")}_G("");function DM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var xM=DM,AM=new $i("auth","Firebase",DM());var Ym=new Ac("@firebase/auth");function vG(n,...e){Ym.logLevel<=nt.WARN&&Ym.warn(`Auth (${Gm}): ${n}`,...e)}function Wm(n,...e){Ym.logLevel<=nt.ERROR&&Ym.error(`Auth (${Gm}): ${n}`,...e)}function bM(n,...e){throw eI(n,...e)}function Xw(n,...e){return eI(n,...e)}function RM(n,e,t){let r=ee(O({},xM()),{[e]:t});return new $i("auth","Firebase",r).create(e,{appName:n.name})}function Km(n){return RM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return AM.create(n,...e)}function He(n,e,...t){if(!n)throw eI(e,...t)}function ud(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Wm(e),new Error(e)}function Qm(n,e){n||ud(e)}function yG(){return EM()==="http:"||EM()==="https:"}function EM(){return typeof self<"u"&&self.location?.protocol||null}function bG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yG()||aM()||"connection"in navigator)?navigator.onLine:!0}function EG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var na=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qm(t>e,"Short delay should be less than long delay!"),this.isMobile=sM()||cM()}get(){return bG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function wG(n,e){Qm(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Jm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ud("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ud("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ud("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var IG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var SG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CG=new na(3e4,6e4);function kM(n,e){return n.tenantId&&!e.tenantId?ee(O({},e),{tenantId:n.tenantId}):e}async function ng(n,e,t,r,i={}){return PM(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Fw(O({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=O({method:e,headers:c},s);return oM()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Ow(n.emulatorConfig.host)&&(u.credentials="include"),Jm.fetch()(await NM(n,n.config.apiHost,t,a),u)})}async function PM(n,e,t){n._canInitEmulator=!1;let r=O(O({},IG),e);try{let i=new Gw(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw qm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qm(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qm(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw qm(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw RM(n,d,u);bM(n,d)}}catch(i){if(i instanceof ui)throw i;bM(n,"network-request-failed",{message:String(i)})}}async function NM(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?wG(n.config,i):`${n.config.apiScheme}://${i}`;return SG.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var Gw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xw(this.auth,"network-request-failed")),CG.get())})}};function qm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Xw(n,e,r);return i.customData._tokenResponse=t,i}async function TG(n,e){return ng(n,"POST","/v1/accounts:delete",e)}async function Zm(n,e){return ng(n,"POST","/v1/accounts:lookup",e)}function dd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MM(n,e=!1){let t=xc(n),r=await t.getIdToken(e),i=OM(r);He(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:dd(Hw(i.auth_time)),issuedAtTime:dd(Hw(i.iat)),expirationTime:dd(Hw(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Hw(n){return Number(n)*1e3}function OM(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Wm("JWT malformed, contained fewer than 3 sections"),null;try{let i=zm(t);return i?JSON.parse(i):(Wm("Failed to decode base64 JWT payload"),null)}catch(i){return Wm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function wM(n){let e=OM(n);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function qw(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ui&&DG(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function DG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ww=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var fd=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dd(this.lastLoginAt),this.creationTime=dd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Xm(n){let e=n.auth,t=await n.getIdToken(),r=await qw(n,Zm(e,{idToken:t}));He(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?LM(i.providerUserInfo):[],o=xG(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new fd(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function FM(n){let e=xc(n);await Xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function LM(n){return n.map(r=>{var i=r,{providerId:e}=i,t=$l(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function AG(n,e){let t=await PM(n,{},async()=>{let r=Fw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await NM(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ow(n.emulatorConfig.host)&&(c.credentials="include"),Jm.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RG(n,e){return ng(n,"POST","/v2/accounts:revokeToken",kM(n,e))}var hd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){He(e.length!==0,"internal-error");let t=wM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await AG(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(He(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(He(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ud("not implemented")}};function qs(n,e){He(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ea=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=$l(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ww(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new fd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await qw(this,this.stsTokenManager.getToken(this.auth,e));return He(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return MM(this,e)}reload(){return FM(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>O({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ee(O({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xo(this.auth.app))return Promise.reject(Km(this.auth));let e=await this.getIdToken();return await qw(this,TG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ee(O({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>O({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:f,emailVerified:_,isAnonymous:b,providerData:I,stsTokenManager:k}=t;He(f&&k,e,"internal-error");let N=hd.fromJSON(this.name,k);He(typeof f=="string",e,"internal-error"),qs(r,e.name),qs(i,e.name),He(typeof _=="boolean",e,"internal-error"),He(typeof b=="boolean",e,"internal-error"),qs(s,e.name),qs(o,e.name),qs(a,e.name),qs(c,e.name),qs(u,e.name),qs(d,e.name);let j=new n({uid:f,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:N,createdAt:u,lastLoginAt:d});return I&&Array.isArray(I)&&(j.providerData=I.map(Y=>O({},Y))),c&&(j._redirectEventId=c),j}static async _fromIdTokenResponse(e,t,r=!1){let i=new hd;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xm(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];He(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?LM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new hd;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new fd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c}};var IM=new Map;function ta(n){Qm(n instanceof Function,"Expected a class definition");let e=IM.get(n);return e?(Qm(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,IM.set(n,e),e)}var kG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Kw=kG;function zw(n,e,t){return`firebase:${n}:${e}:${t}`}var eg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=zw(this.userKey,i.apiKey,s),this.fullPersistenceKey=zw("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Zm(this.auth,{idToken:e}).catch(()=>{});return t?ea._fromGetAccountInfoResponse(this.auth,t,e):null}return ea._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ta(Kw),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),s=i[0]||ta(Kw),o=zw(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(o);if(d){let f;if(typeof d=="string"){let _=await Zm(e,{idToken:d}).catch(()=>{});if(!_)break;f=await ea._fromGetAccountInfoResponse(e,_,d)}else f=ea._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new n(s,e,r))}};function SM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OG(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PG(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LG(e))return"Blackberry";if(VG(e))return"Webos";if(NG(e))return"Safari";if((e.includes("chrome/")||MG(e))&&!e.includes("edge/"))return"Chrome";if(FG(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function PG(n=$r()){return/firefox\//i.test(n)}function NG(n=$r()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MG(n=$r()){return/crios\//i.test(n)}function OG(n=$r()){return/iemobile/i.test(n)}function FG(n=$r()){return/android/i.test(n)}function LG(n=$r()){return/blackberry/i.test(n)}function VG(n=$r()){return/webos/i.test(n)}function VM(n,e=[]){let t;switch(n){case"Browser":t=SM($r());break;case"Worker":t=`${SM($r())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Gm}/${r}`}var Yw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function UG(n,e={}){return ng(n,"GET","/v2/passwordPolicy",kM(n,e))}var BG=6,Qw=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??BG,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Jw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tg(this),this.idTokenSubscription=new tg(this),this.beforeStateQueue=new Yw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ta(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await eg.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Zm(this,{idToken:e}),r=await ea._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Xo(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xo(this.app))return Promise.reject(Km(this));let t=e?xc(e):null;return t&&He(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xo(this.app)?Promise.reject(Km(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xo(this.app)?Promise.reject(Km(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await UG(this),t=new Qw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $i("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await RG(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ta(e)||this._popupRedirectResolver;He(t,this,"argument-error"),this.redirectPersistenceManager=await eg.create(this,[ta(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Xo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&vG(`Error while retrieving App Check token: ${e.error}`),e?.token}};function jG(n){return xc(n)}var tg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=dM(t=>this.observer=t)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $G={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HG(n){$G=n}function zG(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function GG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ta);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function tI(n,e,t,r){return xc(n).onIdTokenChanged(e,t,r)}var zve=zG("rcb"),Gve=new na(3e4,6e4);var qve=new na(2e3,1e4);var Wve=600*1e3;var Kve=new na(3e4,6e4);var Yve=new na(5e3,15e3);var Qve=encodeURIComponent("fac");var CM="@firebase/auth",TM="1.11.1";var Zw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function qG(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WG(n){kc(new Hi("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;He(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VM(n)},u=new Jw(r,i,s,c);return GG(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),kc(new Hi("auth-internal",e=>{let t=jG(e.getProvider("auth").getImmediate());return(r=>new Zw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rc(CM,TM,qG(n)),Rc(CM,TM,"esm2020")}var KG=300,Jve=iM("authIdTokenMaxAge")||KG;function YG(){return document.getElementsByTagName("head")?.[0]??document}HG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Xw("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",YG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WG("Browser");function UM(n){return new _e(function(e){var t=tI(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function eO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var tO=eO,nO=new Ur("auth","Firebase",eO());var cg=new ci("@firebase/auth");function ZG(n,...e){cg.logLevel<=ke.WARN&&cg.warn(`Auth (${$s}): ${n}`,...e)}function ig(n,...e){cg.logLevel<=ke.ERROR&&cg.error(`Auth (${$s}): ${n}`,...e)}function hi(n,...e){throw yI(n,...e)}function Hr(n,...e){return yI(n,...e)}function vI(n,e,t){let r=Object.assign(Object.assign({},tO()),{[e]:t});return new Ur("auth","Firebase",r).create(e,{appName:n.name})}function ra(n){return vI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XG(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&hi(n,"argument-error"),vI(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return nO.create(n,...e)}function me(n,e,...t){if(!n)throw yI(e,...t)}function Gi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ig(e),new Error(e)}function Wi(n,e){n||Gi(e)}function iI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function e9(){return BM()==="http:"||BM()==="https:"}function BM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function t9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e9()||bN()||"connection"in navigator)?navigator.onLine:!0}function n9(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ia=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wi(t>e,"Short delay should be less than long delay!"),this.isMobile=vN()||EN()}get(){return t9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function bI(n,e){Wi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var lg=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var r9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var i9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s9=new ia(3e4,6e4);function EI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Nc(n,e,t,r,i={}){return rO(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Ic(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=Object.assign({method:e,headers:c},s);return yN()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Bs(n.emulatorConfig.host)&&(u.credentials="include"),lg.fetch()(await iO(n,n.config.apiHost,t,a),u)})}async function rO(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},r9),e);try{let i=new sI(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw rg(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw rg(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw rg(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw rg(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw vI(n,d,u);hi(n,d)}}catch(i){if(i instanceof Xn)throw i;hi(n,"network-request-failed",{message:String(i)})}}async function o9(n,e,t,r,i={}){let s=await Nc(n,e,t,r,i);return"mfaPendingCredential"in s&&hi(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function iO(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?bI(n.config,i):`${n.config.apiScheme}://${i}`;return i9.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var sI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Hr(this.auth,"network-request-failed")),s9.get())})}};function rg(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Hr(n,e,r);return i.customData._tokenResponse=t,i}async function a9(n,e){return Nc(n,"POST","/v1/accounts:delete",e)}async function ug(n,e){return Nc(n,"POST","/v1/accounts:lookup",e)}function pd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wI(n,e=!1){let t=It(n),r=await t.getIdToken(e),i=II(r);me(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:pd(nI(i.auth_time)),issuedAtTime:pd(nI(i.iat)),expirationTime:pd(nI(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function nI(n){return Number(n)*1e3}function II(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ig("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mm(t);return i?JSON.parse(i):(ig("Failed to decode base64 JWT payload"),null)}catch(i){return ig("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jM(n){let e=II(n);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function gd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Xn&&c9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function c9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var oI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var _d=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pd(this.lastLoginAt),this.creationTime=pd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function dg(n){var e;let t=n.auth,r=await n.getIdToken(),i=await gd(n,ug(t,{idToken:r}));me(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?sO(s.providerUserInfo):[],a=l9(n.providerData,o),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _d(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,f)}async function SI(n){let e=It(n);await dg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function l9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sO(n){return n.map(e=>{var{providerId:t}=e,r=ff(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function u9(n,e){let t=await rO(n,{},async()=>{let r=Ic({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await iO(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Bs(n.emulatorConfig.host)&&(c.credentials="include"),lg.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function d9(n,e){return Nc(n,"POST","/v2/accounts:revokeToken",EI(n,e))}var md=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){me(e.length!==0,"internal-error");let t=jM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await u9(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Gi("not implemented")}};function Ws(n,e){me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ks=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _d(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await gd(this,this.stsTokenManager.getToken(this.auth,e));return me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wI(this,e)}reload(){return SI(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await dg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(ra(this.auth));let e=await this.getIdToken();return await gd(this,a9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,b=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,I=(o=t.photoURL)!==null&&o!==void 0?o:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,j=(u=t.createdAt)!==null&&u!==void 0?u:void 0,Y=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:ne,emailVerified:he,isAnonymous:Qe,providerData:De,stsTokenManager:D}=t;me(ne&&D,e,"internal-error");let w=md.fromJSON(this.name,D);me(typeof ne=="string",e,"internal-error"),Ws(f,e.name),Ws(_,e.name),me(typeof he=="boolean",e,"internal-error"),me(typeof Qe=="boolean",e,"internal-error"),Ws(b,e.name),Ws(I,e.name),Ws(k,e.name),Ws(N,e.name),Ws(j,e.name),Ws(Y,e.name);let C=new n({uid:ne,auth:e,email:_,emailVerified:he,displayName:f,isAnonymous:Qe,photoURL:I,phoneNumber:b,tenantId:k,stsTokenManager:w,createdAt:j,lastLoginAt:Y});return De&&Array.isArray(De)&&(C.providerData=De.map(x=>Object.assign({},x))),N&&(C._redirectEventId=N),C}static async _fromIdTokenResponse(e,t,r=!1){let i=new md;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await dg(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];me(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?sO(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new md;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _d(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c}};var $M=new Map;function qi(n){Wi(n instanceof Function,"Expected a class definition");let e=$M.get(n);return e?(Wi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$M.set(n,e),e)}var h9=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),aI=h9;function sg(n,e,t){return`firebase:${n}:${e}:${t}`}var hg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=sg(this.userKey,i.apiKey,s),this.fullPersistenceKey=sg("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await ug(this.auth,{idToken:e}).catch(()=>{});return t?Ks._fromGetAccountInfoResponse(this.auth,t,e):null}return Ks._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(qi(aI),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),s=i[0]||qi(aI),o=sg(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(o);if(d){let f;if(typeof d=="string"){let _=await ug(e,{idToken:d}).catch(()=>{});if(!_)break;f=await Ks._fromGetAccountInfoResponse(e,_,d)}else f=Ks._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new n(s,e,r))}};function HM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dO(e))return"Blackberry";if(hO(e))return"Webos";if(aO(e))return"Safari";if((e.includes("chrome/")||cO(e))&&!e.includes("edge/"))return"Chrome";if(uO(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function oO(n=$t()){return/firefox\//i.test(n)}function aO(n=$t()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cO(n=$t()){return/crios\//i.test(n)}function lO(n=$t()){return/iemobile/i.test(n)}function uO(n=$t()){return/android/i.test(n)}function dO(n=$t()){return/blackberry/i.test(n)}function hO(n=$t()){return/webos/i.test(n)}function CI(n=$t()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function f9(n=$t()){var e;return CI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p9(){return wN()&&document.documentMode===10}function fO(n=$t()){return CI(n)||uO(n)||hO(n)||dO(n)||/windows phone/i.test(n)||lO(n)}function pO(n,e=[]){let t;switch(n){case"Browser":t=HM($t());break;case"Worker":t=`${HM($t())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$s}/${r}`}var cI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function m9(n,e={}){return Nc(n,"GET","/v2/passwordPolicy",EI(n,e))}var g9=6,lI=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:g9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var uI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fg(this),this.idTokenSubscription=new fg(this),this.beforeStateQueue=new cI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qi(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await hg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await ug(this,{idToken:e}),r=await Ks._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(er(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=n9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(ra(this));let t=e?It(e):null;return t&&me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await m9(this),t=new lI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ur("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await d9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&qi(e)||this._popupRedirectResolver;me(t,this,"argument-error"),this.redirectPersistenceManager=await hg.create(this,[qi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&ZG(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Eg(n){return It(n)}var fg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=TN(t=>this.observer=t)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var TI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _9(n){TI=n}function v9(n){return TI.loadJS(n)}function y9(){return TI.gapiScript}function mO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function DI(n,e){let t=Sc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ai(s,e??{}))return i;hi(i,"already-initialized")}return t.initialize({options:e})}function b9(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(qi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function xI(n,e,t){let r=Eg(n);me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=gO(e),{host:o,port:a}=E9(e),c=a===null?"":`:${a}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),me(ai(u,r.config.emulator)&&ai(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Bs(o)?(Fm(`${s}//${o}${c}`),Lm("Auth",!0)):i||w9()}function gO(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function E9(n){let e=gO(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:zM(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:zM(o)}}}function zM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function w9(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var vd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gi("not implemented")}_getIdTokenResponse(e){return Gi("not implemented")}_linkToIdToken(e,t){return Gi("not implemented")}_getReauthenticationResolver(e){return Gi("not implemented")}};async function Pc(n,e){return o9(n,"POST","/v1/accounts:signInWithIdp",EI(n,e))}var I9="http://localhost",pg=class n extends vd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=ff(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Pc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Pc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Pc(e,t)}buildRequest(){let e={requestUri:I9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ic(t)}return e}};var yd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var mg=class extends yd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var AI=(()=>{class n extends mg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return pg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var bd=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Ks._fromIdTokenResponse(e,r,i),o=GM(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=GM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function GM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var dI=class n extends Xn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function _O(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?dI._fromErrorAndOperation(n,s,e,r):s})}async function S9(n,e,t=!1){let r=await gd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bd._forOperation(n,"link",r)}async function C9(n,e,t=!1){let{auth:r}=n;if(er(r.app))return Promise.reject(ra(r));let i="reauthenticate";try{let s=await gd(n,_O(r,i,e,n),t);me(s.idToken,r,"internal-error");let o=II(s.idToken);me(o,r,"internal-error");let{sub:a}=o;return me(n.uid===a,r,"user-mismatch"),bd._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&hi(r,"user-mismatch"),s}}async function T9(n,e,t=!1){if(er(n.app))return Promise.reject(ra(n));let r="signIn",i=await _O(n,r,e),s=await bd._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function RI(n,e,t,r){return It(n).onIdTokenChanged(e,t,r)}function kI(n,e,t){return It(n).beforeAuthStateChanged(e,t)}function PI(n){return It(n).signOut()}var gg="__sak";var _g=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gg,"1"),this.storage.removeItem(gg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var D9=1e3,x9=10,A9=(()=>{class n extends _g{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);p9()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,x9):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},D9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),vO=A9;var R9=(()=>{class n extends _g{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),NI=R9;function k9(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var P9=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async d=>d(r.origin,o)),u=await k9(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function MI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var hI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=MI("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let _=f;if(_.data.eventId===u)switch(_.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(_.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function di(){return window}function N9(n){di().location.href=n}function yO(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function M9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O9(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function F9(){return yO()?self:null}var bO="firebaseLocalStorageDb",L9=1,vg="firebaseLocalStorage",EO="fbase_key",sa=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function wg(n,e){return n.transaction([vg],e?"readwrite":"readonly").objectStore(vg)}function V9(){let n=indexedDB.deleteDatabase(bO);return new sa(n).toPromise()}function fI(){let n=indexedDB.open(bO,L9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(vg,{keyPath:EO})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(vg)?e(r):(r.close(),await V9(),e(await fI()))})})}async function qM(n,e,t){let r=wg(n,!0).put({[EO]:e,value:t});return new sa(r).toPromise()}async function U9(n,e){let t=wg(n,!1).get(e),r=await new sa(t).toPromise();return r===void 0?null:r.value}function WM(n,e){let t=wg(n,!0).delete(e);return new sa(t).toPromise()}var B9=800,j9=3,$9=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fI(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>j9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=P9._getInstance(F9()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await M9(),!this.activeServiceWorker)return;this.sender=new hI(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||O9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await fI();return await qM(t,gg,"1"),await WM(t,gg),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>qM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>U9(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>WM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=wg(s,!1).getAll();return new sa(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),wO=$9;var $0e=mO("rcb"),H0e=new ia(3e4,6e4);function IO(n,e){return e?qi(e):(me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ed=class extends vd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function H9(n){return T9(n.auth,new Ed(n),n.bypassAuthState)}function z9(n){let{auth:e,user:t}=n;return me(t,e,"internal-error"),C9(t,new Ed(n),n.bypassAuthState)}async function G9(n){let{auth:e,user:t}=n;return me(t,e,"internal-error"),S9(t,new Ed(n),n.bypassAuthState)}var yg=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H9;case"linkViaPopup":case"linkViaRedirect":return G9;case"reauthViaPopup":case"reauthViaRedirect":return z9;default:hi(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var q9=new ia(2e3,1e4);async function OI(n,e,t){if(er(n.app))return Promise.reject(Hr(n,"operation-not-supported-in-this-environment"));let r=Eg(n);XG(n,e,yd);let i=IO(r,t);return new W9(r,"signInViaPopup",e,i).executeNotNull()}var W9=(()=>{class n extends yg{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return me(t,this.auth,"internal-error"),t}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");let t=MI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,q9.get())};t()}}n.currentPopupAction=null;return n})(),K9="pendingRedirect",og=new Map,pI=class extends yg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=og.get(this.auth._key());if(!e){try{let r=await Y9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}og.set(this.auth._key(),e)}return this.bypassAuthState||og.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Y9(n,e){let t=Z9(e),r=J9(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function Q9(n,e){og.set(n._key(),e)}function J9(n){return qi(n._redirectPersistence)}function Z9(n){return sg(K9,n.config.apiKey,n.name)}async function X9(n,e,t=!1){if(er(n.app))return Promise.reject(ra(n));let r=Eg(n),i=IO(r,e),o=await new pI(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var eq=600*1e3,mI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!SO(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Hr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eq&&this.cachedEventUids.clear(),this.cachedEventUids.has(KM(e))}saveEventToCache(e){this.cachedEventUids.add(KM(e)),this.lastProcessedEventTime=Date.now()}};function KM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function SO({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function tq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SO(n);default:return!1}}async function nq(n,e={}){return Nc(n,"GET","/v1/projects",e)}var rq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iq=/^https?/;async function sq(n){if(n.config.emulator)return;let{authorizedDomains:e}=await nq(n);for(let t of e)try{if(oq(t))return}catch{}hi(n,"unauthorized-domain")}function oq(n){let e=iI(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!iq.test(t))return!1;if(rq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var aq=new ia(3e4,6e4);function YM(){let n=di().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cq(n){return new Promise((e,t)=>{var r,i,s;function o(){YM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YM(),t(Hr(n,"network-request-failed"))},timeout:aq.get()})}if(!((i=(r=di().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=di().gapi)===null||s===void 0)&&s.load)o();else{let a=mO("iframefcb");return di()[a]=()=>{gapi.load?o():t(Hr(n,"network-request-failed"))},v9(`${y9()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw ag=null,e})}var ag=null;function lq(n){return ag=ag||cq(n),ag}var uq=new ia(5e3,15e3),dq="__/auth/iframe",hq="emulator/auth/iframe",fq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mq(n){let e=n.config;me(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?bI(e,hq):`https://${n.config.authDomain}/${dq}`,r={apiKey:e.apiKey,appName:n.name,v:$s},i=pq.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ic(r).slice(1)}`}async function gq(n){let e=await lq(n),t=di().gapi;return me(t,n,"internal-error"),e.open({where:document.body,url:mq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Hr(n,"network-request-failed"),a=di().setTimeout(()=>{s(o)},uq.get());function c(){di().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var _q={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vq=500,yq=600,bq="_blank",Eq="http://localhost",bg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function wq(n,e,t,r=vq,i=yq){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},_q),{width:r.toString(),height:i.toString(),top:s,left:o}),u=$t().toLowerCase();t&&(a=cO(u)?bq:t),oO(u)&&(e=e||Eq,c.scrollbars="yes");let d=Object.entries(c).reduce((_,[b,I])=>`${_}${b}=${I},`,"");if(f9(u)&&a!=="_self")return Iq(e||"",a),new bg(null);let f=window.open(e||"",a,d);me(f,n,"popup-blocked");try{f.focus()}catch{}return new bg(f)}function Iq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Sq="__/auth/handler",Cq="emulator/auth/handler",Tq=encodeURIComponent("fac");async function QM(n,e,t,r,i,s){me(n.config.authDomain,n,"auth-domain-config-required"),me(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:$s,eventId:i};if(e instanceof yd){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",CN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof mg){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=await n._getAppCheckToken(),u=c?`#${Tq}=${encodeURIComponent(c)}`:"";return`${Dq(n)}?${Ic(a).slice(1)}${u}`}function Dq({config:n}){return n.emulator?bI(n,Cq):`https://${n.authDomain}/${Sq}`}var rI="webStorageSupport",gI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NI,this._completeRedirectFn=X9,this._overrideRedirectResult=Q9}async _openPopup(e,t,r,i){var s;Wi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await QM(e,t,r,iI(),i);return wq(e,o,MI())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await QM(e,t,r,iI(),i);return N9(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Wi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await gq(e),r=new mI(e);return t.register("authEvent",i=>(me(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rI,{type:rI},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[rI];o!==void 0&&t(!!o),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fO()||aO()||CI()}},CO=gI;var JM="@firebase/auth",ZM="1.10.8";var _I=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function xq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Aq(n){Br(new In("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pO(n)},u=new uI(r,i,s,c);return b9(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Br(new In("auth-internal",e=>{let t=Eg(e.getProvider("auth").getImmediate());return(r=>new _I(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),St(JM,ZM,xq(n)),St(JM,ZM,"esm2017")}var Rq=300,kq=cw("authIdTokenMaxAge")||Rq,XM=null,Pq=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>kq)return;let i=t?.token;XM!==i&&(XM=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function FI(n=Qo()){let e=Sc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=DI(n,{popupRedirectResolver:CO,persistence:[wO,vO,NI]}),r=cw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Pq(s.toString());kI(t,o,()=>o(t.currentUser)),RI(t,a=>o(a))}}let i=ow("auth");return i&&xI(t,`http://${i}`),t}function Nq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}_9({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Hr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Nq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Aq("Browser");var TO="auth",oa=class{constructor(e){return e}},wd=class{constructor(){return Tc(TO)}};var LI=new Q("angularfire2.auth-instances");function SW(n,e){let t=od(TO,n,e);return t&&new oa(t)}function CW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new oa(r)}}var TW={provide:wd,deps:[[new Gn,LI]]},DW={provide:oa,useFactory:SW,deps:[[new Gn,LI],ji]};function DO(n,...e){return St("angularfire",Hs.full,"auth"),Dr([DW,TW,{provide:LI,useFactory:CW(n),multi:!0,deps:[Me,We,zs,Zo,[new Gn,Dc],...e]}])}var xO=_t(UM,!0);var AO=_t(FI,!0);var RO=_t(OI,!0,2);var kO=_t(PI,!0,2);var PO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},NO={};var Ki,VI;(function(){var n;function e(D,w){function C(){}C.prototype=w.prototype,D.D=w.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(x,R,M){for(var T=Array(arguments.length-2),sr=2;sr<arguments.length;sr++)T[sr-2]=arguments[sr];return w.prototype[R].apply(x,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,w,C){C||(C=0);var x=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)x[R]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(R=0;16>R;++R)x[R]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=D.g[0],C=D.g[1],R=D.g[2];var M=D.g[3],T=w+(M^C&(R^M))+x[0]+3614090360&4294967295;w=C+(T<<7&4294967295|T>>>25),T=M+(R^w&(C^R))+x[1]+3905402710&4294967295,M=w+(T<<12&4294967295|T>>>20),T=R+(C^M&(w^C))+x[2]+606105819&4294967295,R=M+(T<<17&4294967295|T>>>15),T=C+(w^R&(M^w))+x[3]+3250441966&4294967295,C=R+(T<<22&4294967295|T>>>10),T=w+(M^C&(R^M))+x[4]+4118548399&4294967295,w=C+(T<<7&4294967295|T>>>25),T=M+(R^w&(C^R))+x[5]+1200080426&4294967295,M=w+(T<<12&4294967295|T>>>20),T=R+(C^M&(w^C))+x[6]+2821735955&4294967295,R=M+(T<<17&4294967295|T>>>15),T=C+(w^R&(M^w))+x[7]+4249261313&4294967295,C=R+(T<<22&4294967295|T>>>10),T=w+(M^C&(R^M))+x[8]+1770035416&4294967295,w=C+(T<<7&4294967295|T>>>25),T=M+(R^w&(C^R))+x[9]+2336552879&4294967295,M=w+(T<<12&4294967295|T>>>20),T=R+(C^M&(w^C))+x[10]+4294925233&4294967295,R=M+(T<<17&4294967295|T>>>15),T=C+(w^R&(M^w))+x[11]+2304563134&4294967295,C=R+(T<<22&4294967295|T>>>10),T=w+(M^C&(R^M))+x[12]+1804603682&4294967295,w=C+(T<<7&4294967295|T>>>25),T=M+(R^w&(C^R))+x[13]+4254626195&4294967295,M=w+(T<<12&4294967295|T>>>20),T=R+(C^M&(w^C))+x[14]+2792965006&4294967295,R=M+(T<<17&4294967295|T>>>15),T=C+(w^R&(M^w))+x[15]+1236535329&4294967295,C=R+(T<<22&4294967295|T>>>10),T=w+(R^M&(C^R))+x[1]+4129170786&4294967295,w=C+(T<<5&4294967295|T>>>27),T=M+(C^R&(w^C))+x[6]+3225465664&4294967295,M=w+(T<<9&4294967295|T>>>23),T=R+(w^C&(M^w))+x[11]+643717713&4294967295,R=M+(T<<14&4294967295|T>>>18),T=C+(M^w&(R^M))+x[0]+3921069994&4294967295,C=R+(T<<20&4294967295|T>>>12),T=w+(R^M&(C^R))+x[5]+3593408605&4294967295,w=C+(T<<5&4294967295|T>>>27),T=M+(C^R&(w^C))+x[10]+38016083&4294967295,M=w+(T<<9&4294967295|T>>>23),T=R+(w^C&(M^w))+x[15]+3634488961&4294967295,R=M+(T<<14&4294967295|T>>>18),T=C+(M^w&(R^M))+x[4]+3889429448&4294967295,C=R+(T<<20&4294967295|T>>>12),T=w+(R^M&(C^R))+x[9]+568446438&4294967295,w=C+(T<<5&4294967295|T>>>27),T=M+(C^R&(w^C))+x[14]+3275163606&4294967295,M=w+(T<<9&4294967295|T>>>23),T=R+(w^C&(M^w))+x[3]+4107603335&4294967295,R=M+(T<<14&4294967295|T>>>18),T=C+(M^w&(R^M))+x[8]+1163531501&4294967295,C=R+(T<<20&4294967295|T>>>12),T=w+(R^M&(C^R))+x[13]+2850285829&4294967295,w=C+(T<<5&4294967295|T>>>27),T=M+(C^R&(w^C))+x[2]+4243563512&4294967295,M=w+(T<<9&4294967295|T>>>23),T=R+(w^C&(M^w))+x[7]+1735328473&4294967295,R=M+(T<<14&4294967295|T>>>18),T=C+(M^w&(R^M))+x[12]+2368359562&4294967295,C=R+(T<<20&4294967295|T>>>12),T=w+(C^R^M)+x[5]+4294588738&4294967295,w=C+(T<<4&4294967295|T>>>28),T=M+(w^C^R)+x[8]+2272392833&4294967295,M=w+(T<<11&4294967295|T>>>21),T=R+(M^w^C)+x[11]+1839030562&4294967295,R=M+(T<<16&4294967295|T>>>16),T=C+(R^M^w)+x[14]+4259657740&4294967295,C=R+(T<<23&4294967295|T>>>9),T=w+(C^R^M)+x[1]+2763975236&4294967295,w=C+(T<<4&4294967295|T>>>28),T=M+(w^C^R)+x[4]+1272893353&4294967295,M=w+(T<<11&4294967295|T>>>21),T=R+(M^w^C)+x[7]+4139469664&4294967295,R=M+(T<<16&4294967295|T>>>16),T=C+(R^M^w)+x[10]+3200236656&4294967295,C=R+(T<<23&4294967295|T>>>9),T=w+(C^R^M)+x[13]+681279174&4294967295,w=C+(T<<4&4294967295|T>>>28),T=M+(w^C^R)+x[0]+3936430074&4294967295,M=w+(T<<11&4294967295|T>>>21),T=R+(M^w^C)+x[3]+3572445317&4294967295,R=M+(T<<16&4294967295|T>>>16),T=C+(R^M^w)+x[6]+76029189&4294967295,C=R+(T<<23&4294967295|T>>>9),T=w+(C^R^M)+x[9]+3654602809&4294967295,w=C+(T<<4&4294967295|T>>>28),T=M+(w^C^R)+x[12]+3873151461&4294967295,M=w+(T<<11&4294967295|T>>>21),T=R+(M^w^C)+x[15]+530742520&4294967295,R=M+(T<<16&4294967295|T>>>16),T=C+(R^M^w)+x[2]+3299628645&4294967295,C=R+(T<<23&4294967295|T>>>9),T=w+(R^(C|~M))+x[0]+4096336452&4294967295,w=C+(T<<6&4294967295|T>>>26),T=M+(C^(w|~R))+x[7]+1126891415&4294967295,M=w+(T<<10&4294967295|T>>>22),T=R+(w^(M|~C))+x[14]+2878612391&4294967295,R=M+(T<<15&4294967295|T>>>17),T=C+(M^(R|~w))+x[5]+4237533241&4294967295,C=R+(T<<21&4294967295|T>>>11),T=w+(R^(C|~M))+x[12]+1700485571&4294967295,w=C+(T<<6&4294967295|T>>>26),T=M+(C^(w|~R))+x[3]+2399980690&4294967295,M=w+(T<<10&4294967295|T>>>22),T=R+(w^(M|~C))+x[10]+4293915773&4294967295,R=M+(T<<15&4294967295|T>>>17),T=C+(M^(R|~w))+x[1]+2240044497&4294967295,C=R+(T<<21&4294967295|T>>>11),T=w+(R^(C|~M))+x[8]+1873313359&4294967295,w=C+(T<<6&4294967295|T>>>26),T=M+(C^(w|~R))+x[15]+4264355552&4294967295,M=w+(T<<10&4294967295|T>>>22),T=R+(w^(M|~C))+x[6]+2734768916&4294967295,R=M+(T<<15&4294967295|T>>>17),T=C+(M^(R|~w))+x[13]+1309151649&4294967295,C=R+(T<<21&4294967295|T>>>11),T=w+(R^(C|~M))+x[4]+4149444226&4294967295,w=C+(T<<6&4294967295|T>>>26),T=M+(C^(w|~R))+x[11]+3174756917&4294967295,M=w+(T<<10&4294967295|T>>>22),T=R+(w^(M|~C))+x[2]+718787259&4294967295,R=M+(T<<15&4294967295|T>>>17),T=C+(M^(R|~w))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,D.g[2]=D.g[2]+R&4294967295,D.g[3]=D.g[3]+M&4294967295}r.prototype.u=function(D,w){w===void 0&&(w=D.length);for(var C=w-this.blockSize,x=this.B,R=this.h,M=0;M<w;){if(R==0)for(;M<=C;)i(this,D,M),M+=this.blockSize;if(typeof D=="string"){for(;M<w;)if(x[R++]=D.charCodeAt(M++),R==this.blockSize){i(this,x),R=0;break}}else for(;M<w;)if(x[R++]=D[M++],R==this.blockSize){i(this,x),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;var C=8*this.o;for(w=D.length-8;w<D.length;++w)D[w]=C&255,C/=256;for(this.u(D),D=Array(16),w=C=0;4>w;++w)for(var x=0;32>x;x+=8)D[C++]=this.g[w]>>>x&255;return D};function s(D,w){var C=a;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=w(D)}function o(D,w){this.h=w;for(var C=[],x=!0,R=D.length-1;0<=R;R--){var M=D[R]|0;x&&M==w||(C[R]=M,x=!1)}this.g=C}var a={};function c(D){return-128<=D&&128>D?s(D,function(w){return new o([w|0],0>w?-1:0)}):new o([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return f;if(0>D)return N(u(-D));for(var w=[],C=1,x=0;D>=C;x++)w[x]=D/C|0,C*=4294967296;return new o(w,0)}function d(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return N(d(D.substring(1),w));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(w,8)),x=f,R=0;R<D.length;R+=8){var M=Math.min(8,D.length-R),T=parseInt(D.substring(R,R+M),w);8>M?(M=u(Math.pow(w,M)),x=x.j(M).add(u(T))):(x=x.j(C),x=x.add(u(T)))}return x}var f=c(0),_=c(1),b=c(16777216);n=o.prototype,n.m=function(){if(k(this))return-N(this).m();for(var D=0,w=1,C=0;C<this.g.length;C++){var x=this.i(C);D+=(0<=x?x:4294967296+x)*w,w*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(k(this))return"-"+N(this).toString(D);for(var w=u(Math.pow(D,6)),C=this,x="";;){var R=he(C,w).g;C=j(C,R.j(w));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=R,I(C))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function k(D){return D.h==-1}n.l=function(D){return D=j(this,D),k(D)?-1:I(D)?0:1};function N(D){for(var w=D.g.length,C=[],x=0;x<w;x++)C[x]=~D.g[x];return new o(C,~D.h).add(_)}n.abs=function(){return k(this)?N(this):this},n.add=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],x=0,R=0;R<=w;R++){var M=x+(this.i(R)&65535)+(D.i(R)&65535),T=(M>>>16)+(this.i(R)>>>16)+(D.i(R)>>>16);x=T>>>16,M&=65535,T&=65535,C[R]=T<<16|M}return new o(C,C[C.length-1]&-2147483648?-1:0)};function j(D,w){return D.add(N(w))}n.j=function(D){if(I(this)||I(D))return f;if(k(this))return k(D)?N(this).j(N(D)):N(N(this).j(D));if(k(D))return N(this.j(N(D)));if(0>this.l(b)&&0>D.l(b))return u(this.m()*D.m());for(var w=this.g.length+D.g.length,C=[],x=0;x<2*w;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var R=0;R<D.g.length;R++){var M=this.i(x)>>>16,T=this.i(x)&65535,sr=D.i(R)>>>16,os=D.i(R)&65535;C[2*x+2*R]+=T*os,Y(C,2*x+2*R),C[2*x+2*R+1]+=M*os,Y(C,2*x+2*R+1),C[2*x+2*R+1]+=T*sr,Y(C,2*x+2*R+1),C[2*x+2*R+2]+=M*sr,Y(C,2*x+2*R+2)}for(x=0;x<w;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=w;x<2*w;x++)C[x]=0;return new o(C,0)};function Y(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function ne(D,w){this.g=D,this.h=w}function he(D,w){if(I(w))throw Error("division by zero");if(I(D))return new ne(f,f);if(k(D))return w=he(N(D),w),new ne(N(w.g),N(w.h));if(k(w))return w=he(D,N(w)),new ne(N(w.g),w.h);if(30<D.g.length){if(k(D)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var C=_,x=w;0>=x.l(D);)C=Qe(C),x=Qe(x);var R=De(C,1),M=De(x,1);for(x=De(x,2),C=De(C,2);!I(x);){var T=M.add(x);0>=T.l(D)&&(R=R.add(C),M=T),x=De(x,1),C=De(C,1)}return w=j(D,R.j(w)),new ne(R,w)}for(R=f;0<=D.l(w);){for(C=Math.max(1,Math.floor(D.m()/w.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=u(C),T=M.j(w);k(T)||0<T.l(D);)C-=x,M=u(C),T=M.j(w);I(M)&&(M=_),R=R.add(M),D=j(D,T)}return new ne(R,D)}n.A=function(D){return he(this,D).h},n.and=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],x=0;x<w;x++)C[x]=this.i(x)&D.i(x);return new o(C,this.h&D.h)},n.or=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],x=0;x<w;x++)C[x]=this.i(x)|D.i(x);return new o(C,this.h|D.h)},n.xor=function(D){for(var w=Math.max(this.g.length,D.g.length),C=[],x=0;x<w;x++)C[x]=this.i(x)^D.i(x);return new o(C,this.h^D.h)};function Qe(D){for(var w=D.g.length+1,C=[],x=0;x<w;x++)C[x]=D.i(x)<<1|D.i(x-1)>>>31;return new o(C,D.h)}function De(D,w){var C=w>>5;w%=32;for(var x=D.g.length-C,R=[],M=0;M<x;M++)R[M]=0<w?D.i(M+C)>>>w|D.i(M+C+1)<<32-w:D.i(M+C);return new o(R,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VI=NO.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Ki=NO.Integer=o}).apply(typeof PO<"u"?PO:typeof self<"u"?self:typeof window<"u"?window:{});var Ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yi={};var UI,AW,Mc,BI,Id,Sg,jI,$I,HI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ig=="object"&&Ig];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var m=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var P=l[E];if(!(P in m))break e;m=m[P]}l=l[l.length-1],E=m[l],h=h(E),h!=E&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var m=0,E=!1,P={next:function(){if(!E&&m<l.length){var L=m++;return{value:h(L,l[L]),done:!1}}return E=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,m){return m})}});var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,m){return l.call.apply(l.bind,arguments)}function f(l,h,m){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,E),l.apply(h,P)}}return function(){return l.apply(h,arguments)}}function _(l,h,m){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,_.apply(null,arguments)}function b(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function I(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(E,P,L){for(var W=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)W[Xe-2]=arguments[Xe];return h.prototype[P].apply(E,W)}}function k(l){let h=l.length;if(0<h){let m=Array(h);for(let E=0;E<h;E++)m[E]=l[E];return m}return[]}function N(l,h){for(let m=1;m<arguments.length;m++){let E=arguments[m];if(c(E)){let P=l.length||0,L=E.length||0;l.length=P+L;for(let W=0;W<L;W++)l[P+W]=E[W]}else l.push(E)}}class j{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function Y(l){return/^[\s\xa0]*$/.test(l)}function ne(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function he(l){return he[" "](l),l}he[" "]=function(){};var Qe=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function De(l,h,m){for(let E in l)h.call(m,l[E],E,l)}function D(l,h){for(let m in l)h.call(void 0,l[m],m,l)}function w(l){let h={};for(let m in l)h[m]=l[m];return h}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,h){let m,E;for(let P=1;P<arguments.length;P++){E=arguments[P];for(m in E)l[m]=E[m];for(let L=0;L<C.length;L++)m=C[L],Object.prototype.hasOwnProperty.call(E,m)&&(l[m]=E[m])}}function R(l){var h=1;l=l.split(":");let m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function M(l){a.setTimeout(()=>{throw l},0)}function T(){var l=Re;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class sr{constructor(){this.h=this.g=null}add(h,m){let E=os.get();E.set(h,m),this.h?this.h.next=E:this.g=E,this.h=E}}var os=new j(()=>new re,l=>l.reset());class re{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,le=!1,Re=new sr,Tt=()=>{let l=a.Promise.resolve(void 0);ae=()=>{l.then(or)}};var or=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(m){M(m)}var h=os;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}le=!1};function yt(){this.s=this.s,this.C=this.C}yt.prototype.s=!1,yt.prototype.ma=function(){this.s||(this.s=!0,this.N())},yt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var ut=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return l})();function as(l,h){if(lt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(Qe){e:{try{he(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:yv[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&as.aa.h.call(this)}}I(as,lt);var yv={2:"touch",3:"pen",4:"mouse"};as.prototype.h=function(){as.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var bt="closure_listenable_"+(1e6*Math.random()|0),wi=0;function Dn(l,h,m,E,P){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!E,this.ha=P,this.key=++wi,this.da=this.fa=!1}function Ii(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function cs(l){this.src=l,this.g={},this.h=0}cs.prototype.add=function(l,h,m,E,P){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var W=Ev(l,h,E,P);return-1<W?(h=l[W],m||(h.fa=!1)):(h=new Dn(h,this.src,L,!!E,P),h.fa=m,l.push(h)),h};function bv(l,h){var m=h.type;if(m in l.g){var E=l.g[m],P=Array.prototype.indexOf.call(E,h,void 0),L;(L=0<=P)&&Array.prototype.splice.call(E,P,1),L&&(Ii(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Ev(l,h,m,E){for(var P=0;P<l.length;++P){var L=l[P];if(!L.da&&L.listener==h&&L.capture==!!m&&L.ha==E)return P}return-1}var wv="closure_lm_"+(1e6*Math.random()|0),Iv={};function _D(l,h,m,E,P){if(E&&E.once)return yD(l,h,m,E,P);if(Array.isArray(h)){for(var L=0;L<h.length;L++)_D(l,h[L],m,E,P);return null}return m=Dv(m),l&&l[bt]?l.K(h,m,u(E)?!!E.capture:!!E,P):vD(l,h,m,!1,E,P)}function vD(l,h,m,E,P,L){if(!h)throw Error("Invalid event type");var W=u(P)?!!P.capture:!!P,Xe=Cv(l);if(Xe||(l[wv]=Xe=new cs(l)),m=Xe.add(h,m,E,W,L),m.proxy)return m;if(E=CU(),m.proxy=E,E.src=l,E.listener=m,l.addEventListener)ut||(P=W),P===void 0&&(P=!1),l.addEventListener(h.toString(),E,P);else if(l.attachEvent)l.attachEvent(ED(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function CU(){function l(m){return h.call(l.src,l.listener,m)}let h=TU;return l}function yD(l,h,m,E,P){if(Array.isArray(h)){for(var L=0;L<h.length;L++)yD(l,h[L],m,E,P);return null}return m=Dv(m),l&&l[bt]?l.L(h,m,u(E)?!!E.capture:!!E,P):vD(l,h,m,!0,E,P)}function bD(l,h,m,E,P){if(Array.isArray(h))for(var L=0;L<h.length;L++)bD(l,h[L],m,E,P);else E=u(E)?!!E.capture:!!E,m=Dv(m),l&&l[bt]?(l=l.i,h=String(h).toString(),h in l.g&&(L=l.g[h],m=Ev(L,m,E,P),-1<m&&(Ii(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete l.g[h],l.h--)))):l&&(l=Cv(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ev(h,m,E,P)),(m=-1<l?h[l]:null)&&Sv(m))}function Sv(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[bt])bv(h.i,l);else{var m=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(m,E,l.capture):h.detachEvent?h.detachEvent(ED(m),E):h.addListener&&h.removeListener&&h.removeListener(E),(m=Cv(h))?(bv(m,l),m.h==0&&(m.src=null,h[wv]=null)):Ii(l)}}}function ED(l){return l in Iv?Iv[l]:Iv[l]="on"+l}function TU(l,h){if(l.da)l=!0;else{h=new as(h,this);var m=l.listener,E=l.ha||l.src;l.fa&&Sv(l),l=m.call(E,h)}return l}function Cv(l){return l=l[wv],l instanceof cs?l:null}var Tv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dv(l){return typeof l=="function"?l:(l[Tv]||(l[Tv]=function(h){return l.handleEvent(h)}),l[Tv])}function en(){yt.call(this),this.i=new cs(this),this.M=this,this.F=null}I(en,yt),en.prototype[bt]=!0,en.prototype.removeEventListener=function(l,h,m,E){bD(this,l,h,m,E)};function fn(l,h){var m,E=l.F;if(E)for(m=[];E;E=E.F)m.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new lt(h,l);else if(h instanceof lt)h.target=h.target||l;else{var P=h;h=new lt(E,l),x(h,P)}if(P=!0,m)for(var L=m.length-1;0<=L;L--){var W=h.g=m[L];P=Rh(W,E,!0,h)&&P}if(W=h.g=l,P=Rh(W,E,!0,h)&&P,P=Rh(W,E,!1,h)&&P,m)for(L=0;L<m.length;L++)W=h.g=m[L],P=Rh(W,E,!1,h)&&P}en.prototype.N=function(){if(en.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],E=0;E<m.length;E++)Ii(m[E]);delete l.g[h],l.h--}}this.F=null},en.prototype.K=function(l,h,m,E){return this.i.add(String(l),h,!1,m,E)},en.prototype.L=function(l,h,m,E){return this.i.add(String(l),h,!0,m,E)};function Rh(l,h,m,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,L=0;L<h.length;++L){var W=h[L];if(W&&!W.da&&W.capture==m){var Xe=W.listener,Wt=W.ha||W.src;W.fa&&bv(l.i,W),P=Xe.call(Wt,E)!==!1&&P}}return P&&!E.defaultPrevented}function wD(l,h,m){if(typeof l=="function")m&&(l=_(l,m));else if(l&&typeof l.handleEvent=="function")l=_(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function ID(l){l.g=wD(()=>{l.g=null,l.i&&(l.i=!1,ID(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class DU extends yt{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ID(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xl(l){yt.call(this),this.h=l,this.g={}}I(xl,yt);var SD=[];function CD(l){De(l.g,function(h,m){this.g.hasOwnProperty(m)&&Sv(h)},l),l.g={}}xl.prototype.N=function(){xl.aa.N.call(this),CD(this)},xl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xv=a.JSON.stringify,xU=a.JSON.parse,AU=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Av(){}Av.prototype.h=null;function TD(l){return l.h||(l.h=l.i())}function DD(){}var Al={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rv(){lt.call(this,"d")}I(Rv,lt);function kv(){lt.call(this,"c")}I(kv,lt);var co={},xD=null;function kh(){return xD=xD||new en}co.La="serverreachability";function AD(l){lt.call(this,co.La,l)}I(AD,lt);function Rl(l){let h=kh();fn(h,new AD(h))}co.STAT_EVENT="statevent";function RD(l,h){lt.call(this,co.STAT_EVENT,l),this.stat=h}I(RD,lt);function pn(l){let h=kh();fn(h,new RD(h,l))}co.Ma="timingevent";function kD(l,h){lt.call(this,co.Ma,l),this.size=h}I(kD,lt);function kl(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Pl(){this.g=!0}Pl.prototype.xa=function(){this.g=!1};function RU(l,h,m,E,P,L){l.info(function(){if(l.g)if(L)for(var W="",Xe=L.split("&"),Wt=0;Wt<Xe.length;Wt++){var Ue=Xe[Wt].split("=");if(1<Ue.length){var tn=Ue[0];Ue=Ue[1];var nn=tn.split("_");W=2<=nn.length&&nn[1]=="type"?W+(tn+"="+Ue+"&"):W+(tn+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+E+") [attempt "+P+"]: "+h+`
`+m+`
`+W})}function kU(l,h,m,E,P,L,W){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+P+"]: "+h+`
`+m+`
`+L+" "+W})}function Ra(l,h,m,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+NU(l,m)+(E?" "+E:"")})}function PU(l,h){l.info(function(){return"TIMEOUT: "+h})}Pl.prototype.info=function(){};function NU(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var E=m[l];if(!(2>E.length)){var P=E[1];if(Array.isArray(P)&&!(1>P.length)){var L=P[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<P.length;W++)P[W]=""}}}}return xv(m)}catch{return h}}var Ph={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},PD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pv;function Nh(){}I(Nh,Av),Nh.prototype.g=function(){return new XMLHttpRequest},Nh.prototype.i=function(){return{}},Pv=new Nh;function ls(l,h,m,E){this.j=l,this.i=h,this.l=m,this.R=E||1,this.U=new xl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ND}function ND(){this.i=null,this.g="",this.h=!1}var MD={},Nv={};function Mv(l,h,m){l.L=1,l.v=Lh(Si(h)),l.m=m,l.P=!0,OD(l,null)}function OD(l,h){l.F=Date.now(),Mh(l),l.A=Si(l.v);var m=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),YD(m.i,"t",E),l.C=0,m=l.j.J,l.h=new ND,l.g=fx(l.j,m?h:null,!l.m),0<l.O&&(l.M=new DU(_(l.Y,l,l.g),l.O)),h=l.U,m=l.g,E=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(SD[0]=P.toString()),P=SD);for(var L=0;L<P.length;L++){var W=_D(m,P[L],E||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Rl(),RU(l.i,l.u,l.A,l.l,l.R,l.m)}ls.prototype.ca=function(l){l=l.target;let h=this.M;h&&Ci(l)==3?h.j():this.Y(l)},ls.prototype.Y=function(l){try{if(l==this.g)e:{let nn=Ci(this.g);var h=this.g.Ba();let Na=this.g.Z();if(!(3>nn)&&(nn!=3||this.g&&(this.h.h||this.g.oa()||nx(this.g)))){this.J||nn!=4||h==7||(h==8||0>=Na?Rl(3):Rl(2)),Ov(this);var m=this.g.Z();this.X=m;t:if(FD(this)){var E=nx(this.g);l="";var P=E.length,L=Ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lo(this),Nl(this);var W="";break t}this.h.i=new a.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,l+=this.h.i.decode(E[h],{stream:!(L&&h==P-1)});E.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,kU(this.i,this.u,this.A,this.l,this.R,nn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Wt=this.g;if((Xe=Wt.g?Wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Xe)){var Ue=Xe;break t}}Ue=null}if(m=Ue)Ra(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fv(this,m);else{this.o=!1,this.s=3,pn(12),lo(this),Nl(this);break e}}if(this.P){m=!0;let Sr;for(;!this.J&&this.C<W.length;)if(Sr=MU(this,W),Sr==Nv){nn==4&&(this.s=4,pn(14),m=!1),Ra(this.i,this.l,null,"[Incomplete Response]");break}else if(Sr==MD){this.s=4,pn(15),Ra(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else Ra(this.i,this.l,Sr,null),Fv(this,Sr);if(FD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nn!=4||W.length!=0||this.h.h||(this.s=1,pn(16),m=!1),this.o=this.o&&m,!m)Ra(this.i,this.l,W,"[Invalid Chunked Response]"),lo(this),Nl(this);else if(0<W.length&&!this.W){this.W=!0;var tn=this.j;tn.g==this&&tn.ba&&!tn.M&&(tn.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),$v(tn),tn.M=!0,pn(11))}}else Ra(this.i,this.l,W,null),Fv(this,W);nn==4&&lo(this),this.o&&!this.J&&(nn==4?lx(this.j,this):(this.o=!1,Mh(this)))}else JU(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),lo(this),Nl(this)}}}catch{}finally{}};function FD(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function MU(l,h){var m=l.C,E=h.indexOf(`
`,m);return E==-1?Nv:(m=Number(h.substring(m,E)),isNaN(m)?MD:(E+=1,E+m>h.length?Nv:(h=h.slice(E,E+m),l.C=E+m,h)))}ls.prototype.cancel=function(){this.J=!0,lo(this)};function Mh(l){l.S=Date.now()+l.I,LD(l,l.I)}function LD(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=kl(_(l.ba,l),h)}function Ov(l){l.B&&(a.clearTimeout(l.B),l.B=null)}ls.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(PU(this.i,this.A),this.L!=2&&(Rl(),pn(17)),lo(this),this.s=2,Nl(this)):LD(this,this.S-l)};function Nl(l){l.j.G==0||l.J||lx(l.j,l)}function lo(l){Ov(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,CD(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Fv(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||Lv(m.h,l))){if(!l.K&&Lv(m.h,l)&&m.G==3){try{var E=m.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var P=E;if(P[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)$h(m),Bh(m);else break e;jv(m),pn(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&m.v==0&&!m.C&&(m.C=kl(_(m.Za,m),6e3));if(1>=BD(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ho(m,11)}else if((l.K||m.g==l)&&$h(m),!Y(h))for(P=m.Da.g.parse(h),h=0;h<P.length;h++){let Ue=P[h];if(m.T=Ue[0],Ue=Ue[1],m.G==2)if(Ue[0]=="c"){m.K=Ue[1],m.ia=Ue[2];let tn=Ue[3];tn!=null&&(m.la=tn,m.j.info("VER="+m.la));let nn=Ue[4];nn!=null&&(m.Aa=nn,m.j.info("SVER="+m.Aa));let Na=Ue[5];Na!=null&&typeof Na=="number"&&0<Na&&(E=1.5*Na,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;let Sr=l.g;if(Sr){let zh=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zh){var L=E.h;L.g||zh.indexOf("spdy")==-1&&zh.indexOf("quic")==-1&&zh.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Vv(L,L.h),L.h=null))}if(E.D){let Hv=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Hv&&(E.ya=Hv,dt(E.I,E.D,Hv))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var W=l;if(E.qa=hx(E,E.J?E.ia:null,E.W),W.K){jD(E.h,W);var Xe=W,Wt=E.L;Wt&&(Xe.I=Wt),Xe.B&&(Ov(Xe),Mh(Xe)),E.g=W}else ax(E);0<m.i.length&&jh(m)}else Ue[0]!="stop"&&Ue[0]!="close"||ho(m,7);else m.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?ho(m,7):Bv(m):Ue[0]!="noop"&&m.l&&m.l.ta(Ue),m.v=0)}}Rl(4)}catch{}}var OU=class{constructor(l,h){this.g=l,this.map=h}};function VD(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function UD(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function BD(l){return l.h?1:l.g?l.g.size:0}function Lv(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Vv(l,h){l.g?l.g.add(h):l.h=h}function jD(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}VD.prototype.cancel=function(){if(this.i=$D(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function $D(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let m of l.g.values())h=h.concat(m.D);return h}return k(l.i)}function FU(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],m=l.length,E=0;E<m;E++)h.push(l[E]);return h}h=[],m=0;for(E in l)h[m++]=l[E];return h}function LU(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(let E in l)h[m++]=E;return h}}}function HD(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=LU(l),E=FU(l),P=E.length,L=0;L<P;L++)h.call(void 0,E[L],m&&m[L],l)}var zD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VU(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var E=l[m].indexOf("="),P=null;if(0<=E){var L=l[m].substring(0,E);P=l[m].substring(E+1)}else L=l[m];h(L,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function uo(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof uo){this.h=l.h,Oh(this,l.j),this.o=l.o,this.g=l.g,Fh(this,l.s),this.l=l.l;var h=l.i,m=new Fl;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),GD(this,m),this.m=l.m}else l&&(h=String(l).match(zD))?(this.h=!1,Oh(this,h[1]||"",!0),this.o=Ml(h[2]||""),this.g=Ml(h[3]||"",!0),Fh(this,h[4]),this.l=Ml(h[5]||"",!0),GD(this,h[6]||"",!0),this.m=Ml(h[7]||"")):(this.h=!1,this.i=new Fl(null,this.h))}uo.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Ol(h,qD,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ol(h,qD,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Ol(m,m.charAt(0)=="/"?jU:BU,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Ol(m,HU)),l.join("")};function Si(l){return new uo(l)}function Oh(l,h,m){l.j=m?Ml(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Fh(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function GD(l,h,m){h instanceof Fl?(l.i=h,zU(l.i,l.h)):(m||(h=Ol(h,$U)),l.i=new Fl(h,l.h))}function dt(l,h,m){l.i.set(h,m)}function Lh(l){return dt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ml(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ol(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,UU),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function UU(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var qD=/[#\/\?@]/g,BU=/[#\?:]/g,jU=/[#\?]/g,$U=/[#\?@]/g,HU=/#/g;function Fl(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function us(l){l.g||(l.g=new Map,l.h=0,l.i&&VU(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}n=Fl.prototype,n.add=function(l,h){us(this),this.i=null,l=ka(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function WD(l,h){us(l),h=ka(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function KD(l,h){return us(l),h=ka(l,h),l.g.has(h)}n.forEach=function(l,h){us(this),this.g.forEach(function(m,E){m.forEach(function(P){l.call(h,P,E,this)},this)},this)},n.na=function(){us(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let E=0;E<h.length;E++){let P=l[E];for(let L=0;L<P.length;L++)m.push(h[E])}return m},n.V=function(l){us(this);let h=[];if(typeof l=="string")KD(this,l)&&(h=h.concat(this.g.get(ka(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},n.set=function(l,h){return us(this),this.i=null,l=ka(this,l),KD(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function YD(l,h,m){WD(l,h),0<m.length&&(l.i=null,l.g.set(ka(l,h),k(m)),l.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var E=h[m];let L=encodeURIComponent(String(E)),W=this.V(E);for(E=0;E<W.length;E++){var P=L;W[E]!==""&&(P+="="+encodeURIComponent(String(W[E]))),l.push(P)}}return this.i=l.join("&")};function ka(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function zU(l,h){h&&!l.j&&(us(l),l.i=null,l.g.forEach(function(m,E){var P=E.toLowerCase();E!=P&&(WD(this,E),YD(this,P,m))},l)),l.j=h}function GU(l,h){let m=new Pl;if(a.Image){let E=new Image;E.onload=b(ds,m,"TestLoadImage: loaded",!0,h,E),E.onerror=b(ds,m,"TestLoadImage: error",!1,h,E),E.onabort=b(ds,m,"TestLoadImage: abort",!1,h,E),E.ontimeout=b(ds,m,"TestLoadImage: timeout",!1,h,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function qU(l,h){let m=new Pl,E=new AbortController,P=setTimeout(()=>{E.abort(),ds(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(L=>{clearTimeout(P),L.ok?ds(m,"TestPingServer: ok",!0,h):ds(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),ds(m,"TestPingServer: error",!1,h)})}function ds(l,h,m,E,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),E(m)}catch{}}function WU(){this.g=new AU}function KU(l,h,m){let E=m||"";try{HD(l,function(P,L){let W=P;u(P)&&(W=xv(P)),h.push(E+L+"="+encodeURIComponent(W))})}catch(P){throw h.push(E+"type="+encodeURIComponent("_badmap")),P}}function Ll(l){this.l=l.Ub||null,this.j=l.eb||!1}I(Ll,Av),Ll.prototype.g=function(){return new Vh(this.l,this.j)},Ll.prototype.i=(function(l){return function(){return l}})({});function Vh(l,h){en.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Vh,en),n=Vh.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Ul(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vl(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ul(this)),this.g&&(this.readyState=3,Ul(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;QD(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function QD(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Vl(this):Ul(this),this.readyState==3&&QD(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Vl(this))},n.Qa=function(l){this.g&&(this.response=l,Vl(this))},n.ga=function(){this.g&&Vl(this)};function Vl(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ul(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function Ul(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Vh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function JD(l){let h="";return De(l,function(m,E){h+=E,h+=":",h+=m,h+=`\r
`}),h}function Uv(l,h,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=JD(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):dt(l,h,m))}function Et(l){en.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Et,en);var YU=/^https?$/i,QU=["POST","PUT"];n=Et.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pv.g(),this.v=this.o?TD(this.o):TD(Pv),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(L){ZD(this,L);return}if(l=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var P in E)m.set(P,E[P]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(let L of E.keys())m.set(L,E.get(L));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),P=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(QU,h,void 0))||E||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,W]of m)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tx(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){ZD(this,L)}};function ZD(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,XD(l),Uh(l)}function XD(l){l.A||(l.A=!0,fn(l,"complete"),fn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,fn(this,"complete"),fn(this,"abort"),Uh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uh(this,!0)),Et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ex(this):this.bb())},n.bb=function(){ex(this)};function ex(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Ci(l)!=4||l.Z()!=2)){if(l.u&&Ci(l)==4)wD(l.Ea,0,l);else if(fn(l,"readystatechange"),Ci(l)==4){l.h=!1;try{let W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var E;if(E=W===0){var P=String(l.D).match(zD)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),E=!YU.test(P?P.toLowerCase():"")}m=E}if(m)fn(l,"complete"),fn(l,"success");else{l.m=6;try{var L=2<Ci(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",XD(l)}}finally{Uh(l)}}}}function Uh(l,h){if(l.g){tx(l);let m=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||fn(l,"ready");try{m.onreadystatechange=E}catch{}}}function tx(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Ci(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Ci(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),xU(h)}};function nx(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function JU(l){let h={};l=(l.g&&2<=Ci(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(Y(l[E]))continue;var m=R(l[E]);let P=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let L=h[P]||[];h[P]=L,L.push(m)}D(h,function(E){return E.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bl(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function rx(l){this.Aa=0,this.i=[],this.j=new Pl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bl("baseRetryDelayMs",5e3,l),this.cb=Bl("retryDelaySeedMs",1e4,l),this.Wa=Bl("forwardChannelMaxRetries",2,l),this.wa=Bl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new VD(l&&l.concurrentRequestLimit),this.Da=new WU,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=rx.prototype,n.la=8,n.G=1,n.connect=function(l,h,m,E){pn(0),this.W=l,this.H=h||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=hx(this,null,this.W),jh(this)};function Bv(l){if(ix(l),l.G==3){var h=l.U++,m=Si(l.I);if(dt(m,"SID",l.K),dt(m,"RID",h),dt(m,"TYPE","terminate"),jl(l,m),h=new ls(l,l.j,h),h.L=2,h.v=Lh(Si(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=fx(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Mh(h)}dx(l)}function Bh(l){l.g&&($v(l),l.g.cancel(),l.g=null)}function ix(l){Bh(l),l.u&&(a.clearTimeout(l.u),l.u=null),$h(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function jh(l){if(!UD(l.h)&&!l.s){l.s=!0;var h=l.Ga;ae||Tt(),le||(ae(),le=!0),Re.add(h,l),l.B=0}}function ZU(l,h){return BD(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=kl(_(l.Ga,l,h),ux(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let P=new ls(this,this.j,l),L=this.o;if(this.S&&(L?(L=w(L),x(L,this.S)):L=this.S),this.m!==null||this.O||(P.H=L,L=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=ox(this,P,h),m=Si(this.I),dt(m,"RID",l),dt(m,"CVER",22),this.D&&dt(m,"X-HTTP-Session-Id",this.D),jl(this,m),L&&(this.O?h="headers="+encodeURIComponent(String(JD(L)))+"&"+h:this.m&&Uv(m,this.m,L)),Vv(this.h,P),this.Ua&&dt(m,"TYPE","init"),this.P?(dt(m,"$req",h),dt(m,"SID","null"),P.T=!0,Mv(P,m,null)):Mv(P,m,h),this.G=2}}else this.G==3&&(l?sx(this,l):this.i.length==0||UD(this.h)||sx(this))};function sx(l,h){var m;h?m=h.l:m=l.U++;let E=Si(l.I);dt(E,"SID",l.K),dt(E,"RID",m),dt(E,"AID",l.T),jl(l,E),l.m&&l.o&&Uv(E,l.m,l.o),m=new ls(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=ox(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Vv(l.h,m),Mv(m,E,h)}function jl(l,h){l.H&&De(l.H,function(m,E){dt(h,E,m)}),l.l&&HD({},function(m,E){dt(h,E,m)})}function ox(l,h,m){m=Math.min(l.i.length,m);var E=l.l?_(l.l.Na,l.l,l):null;e:{var P=l.i;let L=-1;for(;;){let W=["count="+m];L==-1?0<m?(L=P[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let Xe=!0;for(let Wt=0;Wt<m;Wt++){let Ue=P[Wt].g,tn=P[Wt].map;if(Ue-=L,0>Ue)L=Math.max(0,P[Wt].g-100),Xe=!1;else try{KU(tn,W,"req"+Ue+"_")}catch{E&&E(tn)}}if(Xe){E=W.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,E}function ax(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ae||Tt(),le||(ae(),le=!0),Re.add(h,l),l.v=0}}function jv(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=kl(_(l.Fa,l),ux(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,cx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=kl(_(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),Bh(this),cx(this))};function $v(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function cx(l){l.g=new ls(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Si(l.qa);dt(h,"RID","rpc"),dt(h,"SID",l.K),dt(h,"AID",l.T),dt(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&dt(h,"TO",l.ja),dt(h,"TYPE","xmlhttp"),jl(l,h),l.m&&l.o&&Uv(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Lh(Si(h)),m.m=null,m.P=!0,OD(m,l)}n.Za=function(){this.C!=null&&(this.C=null,Bh(this),jv(this),pn(19))};function $h(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function lx(l,h){var m=null;if(l.g==h){$h(l),$v(l),l.g=null;var E=2}else if(Lv(l.h,h))m=h.D,jD(l.h,h),E=1;else return;if(l.G!=0){if(h.o)if(E==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var P=l.B;E=kh(),fn(E,new kD(E,m)),jh(l)}else ax(l);else if(P=h.s,P==3||P==0&&0<h.X||!(E==1&&ZU(l,h)||E==2&&jv(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),P){case 1:ho(l,5);break;case 4:ho(l,10);break;case 3:ho(l,6);break;default:ho(l,2)}}}function ux(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function ho(l,h){if(l.j.info("Error code "+h),h==2){var m=_(l.fb,l),E=l.Xa;let P=!E;E=new uo(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Oh(E,"https"),Lh(E),P?GU(E.toString(),m):qU(E.toString(),m)}else pn(2);l.G=0,l.l&&l.l.sa(h),dx(l),ix(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function dx(l){if(l.G=0,l.ka=[],l.l){let h=$D(l.h);(h.length!=0||l.i.length!=0)&&(N(l.ka,h),N(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function hx(l,h,m){var E=m instanceof uo?Si(m):new uo(m);if(E.g!="")h&&(E.g=h+"."+E.g),Fh(E,E.s);else{var P=a.location;E=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var L=new uo(null);E&&Oh(L,E),h&&(L.g=h),P&&Fh(L,P),m&&(L.l=m),E=L}return m=l.D,h=l.ya,m&&h&&dt(E,m,h),dt(E,"VER",l.la),jl(l,E),E}function fx(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Et(new Ll({eb:m})):new Et(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function px(){}n=px.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Hh(){}Hh.prototype.g=function(l,h){return new Hn(l,h)};function Hn(l,h){en.call(this),this.g=new rx(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!Y(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!Y(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Pa(this)}I(Hn,en),Hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){Bv(this.g)},Hn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=xv(l),l=m);h.i.push(new OU(h.Ya++,l)),h.G==3&&jh(h)},Hn.prototype.N=function(){this.g.l=null,delete this.j,Bv(this.g),delete this.g,Hn.aa.N.call(this)};function mx(l){Rv.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}I(mx,Rv);function gx(){kv.call(this),this.status=1}I(gx,kv);function Pa(l){this.g=l}I(Pa,px),Pa.prototype.ua=function(){fn(this.g,"a")},Pa.prototype.ta=function(l){fn(this.g,new mx(l))},Pa.prototype.sa=function(l){fn(this.g,new gx)},Pa.prototype.ra=function(){fn(this.g,"b")},Hh.prototype.createWebChannel=Hh.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,HI=Yi.createWebChannelTransport=function(){return new Hh},$I=Yi.getStatEventTarget=function(){return kh()},jI=Yi.Event=co,Sg=Yi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ph.NO_ERROR=0,Ph.TIMEOUT=8,Ph.HTTP_ERROR=6,Id=Yi.ErrorCode=Ph,PD.COMPLETE="complete",BI=Yi.EventType=PD,DD.EventType=Al,Al.OPEN="a",Al.CLOSE="b",Al.ERROR="c",Al.MESSAGE="d",en.prototype.listen=en.prototype.K,Mc=Yi.WebChannel=DD,AW=Yi.FetchXmlHttpFactory=Ll,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,UI=Yi.XhrIo=Et}).apply(typeof Ig<"u"?Ig:typeof self<"u"?self:typeof window<"u"?window:{});var MO="@firebase/firestore",OO="4.8.0";var Ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");var nl="11.10.0";var ua=new ci("@firebase/firestore");function Oc(){return ua.logLevel}function X(n,...e){if(ua.logLevel<=ke.DEBUG){let t=e.map(PC);ua.debug(`Firestore (${nl}): ${n}`,...t)}}function Ji(n,...e){if(ua.logLevel<=ke.ERROR){let t=e.map(PC);ua.error(`Firestore (${nl}): ${n}`,...t)}}function eo(n,...e){if(ua.logLevel<=ke.WARN){let t=e.map(PC);ua.warn(`Firestore (${nl}): ${n}`,...t)}}function PC(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ue(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,DF(n,r,t)}function DF(n,e,t){let r=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ji(r),new Error(r)}function Le(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||DF(e,i,r)}function ve(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Xn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var yr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var kg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},WI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ht.UNAUTHENTICATED))}shutdown(){}},KI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},YI=class{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Le(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string",31837,{l:r}),new kg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}},QI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},JI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new QI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Pg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ZI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Le(this.o===void 0,3512);let r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pg(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Le(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Pg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function RW(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function xF(){return new TextEncoder}var kd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=RW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ae(n,e){return n<e?-1:n>e?1:0}function XI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ae(r,i);{let s=xF(),o=kW(s.encode(FO(n,t)),s.encode(FO(e,t)));return o!==0?o:Ae(r,i)}}t+=r>65535?2:1}return Ae(n.length,e.length)}function FO(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function kW(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ae(n[t],e[t]);return Ae(n.length,e.length)}function $c(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var LO="__name__",Ng=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ue(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ue(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ae(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):XI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ki.fromString(e.substring(4,e.length-2))}},ct=class n extends Ng{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},PW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tr=class n extends Ng{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return PW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LO}static keyField(){return new n([LO])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var de=class n{constructor(e){this.path=e}static fromPath(e){return new n(ct.fromString(e))}static fromName(e){return new n(ct.fromString(e).popFirst(5))}static empty(){return new n(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ct(e.slice()))}};function AF(n,e,t){if(!t)throw new K(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NW(n,e,t,r){if(e===!0&&r===!0)throw new K(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VO(n){if(!de.isDocumentKey(n))throw new K(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UO(n){if(de.isDocumentKey(n))throw new K(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RF(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function h_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue(12329,{type:typeof n})}function Cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new K(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=h_(n);throw new K(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function MW(n,e){if(e<=0)throw new K(V.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Ft(n,e){let t={typeString:n};return e&&(t.value=e),t}function qd(n,e){if(!RF(n))throw new K(V.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new K(V.INVALID_ARGUMENT,t);return!0}var BO=-62135596800,jO=1e6,Lt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*jO);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<BO)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jO}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qd(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-BO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Lt._jsonSchemaVersion="firestore/timestamp/1.0",Lt._jsonSchema={type:Ft("string",Lt._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};var ge=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Lt(0,0))}static max(){return new n(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Pd=-1,eS=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};eS.UNKNOWN_ID=-1;function OW(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Lt(t+1,0):new Lt(t,r));return new da(i,de.empty(),e)}function FW(n){return new da(n.readTime,n.key,Pd)}var da=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ge.min(),de.empty(),Pd)}static max(){return new n(ge.max(),de.empty(),Pd)}};function LW(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(n.documentKey,e.documentKey),t!==0?t:Ae(n.largestBatchId,e.largestBatchId))}var VW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function rl(n){if(n.code!==V.FAILED_PRECONDITION||n.message!==VW)throw n;X("LocalStore","Unexpectedly lost primary lease")}var H=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function UW(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function il(n){return n.name==="IndexedDbTransactionError"}var NC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),MC=-1;function Wd(n){return n==null}function Nd(n){return n===0&&1/n==-1/0}function BW(n){return typeof n=="number"&&Number.isInteger(n)&&!Nd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var kF="";function jW(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$O(e)),e=$W(n.get(t),e);return $O(e)}function $W(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case kF:t+="";break;default:t+=s}}return t}function $O(n){return n+kF+""}var HW="remoteDocuments",PF="owner";var NF="mutationQueues";var MF="mutations";var OF="documentMutations",zW="remoteDocumentsV14";var FF="remoteDocumentGlobal";var LF="targets";var VF="targetDocuments";var UF="targetGlobal",BF="collectionParents";var jF="clientMetadata";var $F="bundles";var HF="namedQueries";var GW="indexConfiguration";var qW="indexState";var WW="indexEntries";var zF="documentOverlays";var KW="globals";var YW=[NF,MF,OF,HW,LF,PF,UF,VF,jF,FF,BF,$F,HF],Gbe=[...YW,zF],QW=[NF,MF,OF,zW,LF,PF,UF,VF,jF,FF,BF,$F,HF,zF],JW=QW,ZW=[...JW,GW,qW,WW];var qbe=[...ZW,KW];function HO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function so(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ct=class n{constructor(e,t){this.comparator=e,this.root=t||fi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uc(this.root,e,this.comparator,!0)}},Uc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}};fi.EMPTY=null,fi.RED=!0,fi.BLACK=!1;fi.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new fi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var zt=class n{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mg(this.data.getIterator())}getIteratorFrom(e){return new Mg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Mg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var vr=class n{constructor(e){this.fields=e,e.sort(tr.comparator)}static empty(){return new n([])}unionWith(e){let t=new zt(tr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $c(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Og=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Og("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dn.EMPTY_BYTE_STRING=new dn("");var XW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(n){if(Le(!!n,39018),typeof n=="string"){let e=0,t=XW.exec(n);if(Le(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xi(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}var qF="server_timestamp",WF="__type__",KF="__previous_value__",YF="__local_write_time__";function OC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[WF])===null||t===void 0?void 0:t.stringValue)===qF}function f_(n){let e=n.mapValue.fields[KF];return OC(e)?f_(e):e}function Md(n){let e=Zi(n.mapValue.fields[YF].timestampValue);return new Lt(e.seconds,e.nanos)}var nS=class{constructor(e,t,r,i,s,o,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},Fg="(default)",Lg=class n{constructor(e,t){this.projectId=e,this.database=t||Fg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Fg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var FC="__type__",QF="__max__",Cg={mapValue:{fields:{__type__:{stringValue:QF}}}},LC="__vector__",Hc="value";function to(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?OC(n)?4:ZF(n)?9007199254740991:JF(n)?10:11:ue(28295,{value:n})}function mi(n,e){if(n===e)return!0;let t=to(n);if(t!==to(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Md(n).isEqual(Md(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Zi(i.timestampValue),a=Zi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Xi(i.bytesValue).isEqual(Xi(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return vt(i.geoPointValue.latitude)===vt(s.geoPointValue.latitude)&&vt(i.geoPointValue.longitude)===vt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return vt(i.integerValue)===vt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=vt(i.doubleValue),a=vt(s.doubleValue);return o===a?Nd(o)===Nd(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return $c(n.arrayValue.values||[],e.arrayValue.values||[],mi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(HO(o)!==HO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!mi(o[c],a[c])))return!1;return!0})(n,e);default:return ue(52216,{left:n})}}function Od(n,e){return(n.values||[]).find(t=>mi(t,e))!==void 0}function zc(n,e){if(n===e)return 0;let t=to(n),r=to(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=vt(s.integerValue||s.doubleValue),c=vt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return zO(n.timestampValue,e.timestampValue);case 4:return zO(Md(n),Md(e));case 5:return XI(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Xi(s),c=Xi(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=Ae(a[u],c[u]);if(d!==0)return d}return Ae(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ae(vt(s.latitude),vt(o.latitude));return a!==0?a:Ae(vt(s.longitude),vt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return GO(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,u,d;let f=s.fields||{},_=o.fields||{},b=(a=f[Hc])===null||a===void 0?void 0:a.arrayValue,I=(c=_[Hc])===null||c===void 0?void 0:c.arrayValue,k=Ae(((u=b?.values)===null||u===void 0?void 0:u.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return k!==0?k:GO(b,I)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Cg.mapValue&&o===Cg.mapValue)return 0;if(s===Cg.mapValue)return 1;if(o===Cg.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let _=XI(c[f],d[f]);if(_!==0)return _;let b=zc(a[c[f]],u[d[f]]);if(b!==0)return b}return Ae(c.length,d.length)})(n.mapValue,e.mapValue);default:throw ue(23264,{le:t})}}function zO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ae(n,e);let t=Zi(n),r=Zi(e),i=Ae(t.seconds,r.seconds);return i!==0?i:Ae(t.nanos,r.nanos)}function GO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=zc(t[i],r[i]);if(s)return s}return Ae(t.length,r.length)}function Gc(n){return rS(n)}function rS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Zi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Xi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return de.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=rS(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${rS(t.fields[o])}`;return i+"}"})(n.mapValue):ue(61005,{value:n})}function xg(n){switch(to(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=f_(n);return e?16+xg(e):16;case 5:return 2*n.stringValue.length;case 6:return Xi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+xg(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return so(r.fields,(s,o)=>{i+=s.length+xg(o)}),i})(n.mapValue);default:throw ue(13486,{value:n})}}function qO(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iS(n){return!!n&&"integerValue"in n}function VC(n){return!!n&&"arrayValue"in n}function WO(n){return!!n&&"nullValue"in n}function KO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ag(n){return!!n&&"mapValue"in n}function JF(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[FC])===null||t===void 0?void 0:t.stringValue)===LC}function Td(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return so(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Td(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Td(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ZF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===QF}var Kbe={mapValue:{fields:{[FC]:{stringValue:LC},[Hc]:{arrayValue:{}}}}};var jn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ag(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Td(t)}setAll(e){let t=tr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Td(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Ag(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ag(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){so(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Td(this.value))}};function XF(n){let e=[];return so(n.fields,(t,r)=>{let i=new tr([t]);if(Ag(r)){let s=XF(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new vr(e)}var rr=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ge.min(),ge.min(),ge.min(),jn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ge.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ge.min(),ge.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ge.min(),ge.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qc=class{constructor(e,t){this.position=e,this.inclusive=t}};function YO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),t.key):r=zc(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function QO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mi(n.position[t],e.position[t]))return!1;return!0}var ha=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function e7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Vg=class{},Ot=class n extends Vg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new oS(e,t,r):t==="array-contains"?new lS(e,r):t==="in"?new uS(e,r):t==="not-in"?new dS(e,r):t==="array-contains-any"?new hS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new aS(e,r):new cS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zc(t,this.value)):t!==null&&to(this.value)===to(t)&&this.matchesComparison(zc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},zr=class n extends Vg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return eL(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function eL(n){return n.op==="and"}function tL(n){return t7(n)&&eL(n)}function t7(n){for(let e of n.filters)if(e instanceof zr)return!1;return!0}function sS(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+Gc(n.value);if(tL(n))return n.filters.map(e=>sS(e)).join(",");{let e=n.filters.map(t=>sS(t)).join(",");return`${n.op}(${e})`}}function nL(n,e){return n instanceof Ot?(function(r,i){return i instanceof Ot&&r.op===i.op&&r.field.isEqual(i.field)&&mi(r.value,i.value)})(n,e):n instanceof zr?(function(r,i){return i instanceof zr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&nL(o,i.filters[a]),!0):!1})(n,e):void ue(19439)}function rL(n){return n instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${Gc(t.value)}`})(n):n instanceof zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(rL).join(" ,")+"}"})(n):"Filter"}var oS=class extends Ot{constructor(e,t,r){super(e,t,r),this.key=de.fromName(r.referenceValue)}matches(e){let t=de.comparator(e.key,this.key);return this.matchesComparison(t)}},aS=class extends Ot{constructor(e,t){super(e,"in",t),this.keys=iL("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},cS=class extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=iL("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function iL(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>de.fromName(r.referenceValue))}var lS=class extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return VC(t)&&Od(t.arrayValue,this.value)}},uS=class extends Ot{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Od(this.value.arrayValue,t)}},dS=class extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Od(this.value.arrayValue,t)}},hS=class extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!VC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Od(this.value.arrayValue,r))}};var fS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function JO(n,e=null,t=[],r=[],i=null,s=null,o=null){return new fS(n,e,t,r,i,s,o)}function UC(n){let e=ve(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),Wd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gc(r)).join(",")),e.Pe=t}return e.Pe}function BC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!e7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QO(n.startAt,e.startAt)&&QO(n.endAt,e.endAt)}function pS(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var no=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function n7(n,e,t,r,i,s,o,a){return new no(n,e,t,r,i,s,o,a)}function p_(n){return new no(n)}function ZO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sL(n){return n.collectionGroup!==null}function Dd(n){let e=ve(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zt(tr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new ha(s,r))}),t.has(tr.keyField().canonicalString())||e.Te.push(new ha(tr.keyField(),r))}return e.Te}function pi(n){let e=ve(n);return e.Ie||(e.Ie=r7(e,Dd(n))),e.Ie}function r7(n,e){if(n.limitType==="F")return JO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ha(i.field,s)});let t=n.endAt?new qc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qc(n.startAt.position,n.startAt.inclusive):null;return JO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function mS(n,e){let t=n.filters.concat([e]);return new no(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ug(n,e,t){return new no(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function m_(n,e){return BC(pi(n),pi(e))&&n.limitType===e.limitType}function oL(n){return`${UC(pi(n))}|lt:${n.limitType}`}function Fc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>rL(i)).join(", ")}]`),Wd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Gc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Gc(i)).join(",")),`Target(${r})`})(pi(n))}; limitType=${n.limitType})`}function g_(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Dd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let u=YO(o,a,c);return o.inclusive?u<=0:u<0})(r.startAt,Dd(r),i)||r.endAt&&!(function(o,a,c){let u=YO(o,a,c);return o.inclusive?u>=0:u>0})(r.endAt,Dd(r),i))})(n,e)}function i7(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aL(n){return(e,t)=>{let r=!1;for(let i of Dd(n)){let s=s7(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function s7(n,e,t){let r=n.field.isKeyField()?de.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?zc(c,u):ue(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:n.dir})}}var es=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){so(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return GF(this.inner)}size(){return this.innerSize}};var o7=new Ct(de.comparator);function ts(){return o7}var cL=new Ct(de.comparator);function Sd(...n){let e=cL;for(let t of n)e=e.insert(t.key,t);return e}function lL(n){let e=cL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function aa(){return xd()}function uL(){return xd()}function xd(){return new es(n=>n.toString(),(n,e)=>n.isEqual(e))}var a7=new Ct(de.comparator),c7=new zt(de.comparator);function Ne(...n){let e=c7;for(let t of n)e=e.add(t);return e}var l7=new zt(Ae);function u7(){return l7}function jC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function dL(n){return{integerValue:""+n}}function d7(n,e){return BW(e)?dL(e):jC(n,e)}var Wc=class{constructor(){this._=void 0}};function h7(n,e,t){return n instanceof Kc?(function(i,s){let o={fields:{[WF]:{stringValue:qF},[YF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&OC(s)&&(s=f_(s)),s&&(o.fields[KF]=s),{mapValue:o}})(t,e):n instanceof fa?fL(n,e):n instanceof pa?pL(n,e):(function(i,s){let o=hL(i,s),a=XO(o)+XO(i.Ee);return iS(o)&&iS(i.Ee)?dL(a):jC(i.serializer,a)})(n,e)}function f7(n,e,t){return n instanceof fa?fL(n,e):n instanceof pa?pL(n,e):t}function hL(n,e){return n instanceof Yc?(function(r){return iS(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Kc=class extends Wc{},fa=class extends Wc{constructor(e){super(),this.elements=e}};function fL(n,e){let t=mL(e);for(let r of n.elements)t.some(i=>mi(i,r))||t.push(r);return{arrayValue:{values:t}}}var pa=class extends Wc{constructor(e){super(),this.elements=e}};function pL(n,e){let t=mL(e);for(let r of n.elements)t=t.filter(i=>!mi(i,r));return{arrayValue:{values:t}}}var Yc=class extends Wc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function XO(n){return vt(n.integerValue||n.doubleValue)}function mL(n){return VC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function p7(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof fa&&i instanceof fa||r instanceof pa&&i instanceof pa?$c(r.elements,i.elements,mi):r instanceof Yc&&i instanceof Yc?mi(r.Ee,i.Ee):r instanceof Kc&&i instanceof Kc})(n.transform,e.transform)}var gS=class{constructor(e,t){this.version=e,this.transformResults=t}},Sn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Rg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Qc=class{};function gL(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Jc(n.key,Sn.none()):new ma(n.key,n.data,Sn.none());{let t=n.data,r=jn.empty(),i=new zt(tr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new gi(n.key,r,new vr(i.toArray()),Sn.none())}}function m7(n,e,t){n instanceof ma?(function(i,s,o){let a=i.value.clone(),c=tF(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof gi?(function(i,s,o){if(!Rg(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=tF(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(_L(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Ad(n,e,t,r){return n instanceof ma?(function(s,o,a,c){if(!Rg(s.precondition,o))return a;let u=s.value.clone(),d=nF(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof gi?(function(s,o,a,c){if(!Rg(s.precondition,o))return a;let u=nF(s.fieldTransforms,c,o),d=o.data;return d.setAll(_L(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(s,o,a){return Rg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function g7(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=hL(r.transform,i||null);s!=null&&(t===null&&(t=jn.empty()),t.set(r.field,s))}return t||null}function eF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$c(r,i,(s,o)=>p7(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ma=class extends Qc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},gi=class extends Qc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function _L(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function tF(n,e,t){let r=new Map;Le(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,f7(o,a,t[i]))}return r}function nF(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,h7(s,o,e))}return r}var Jc=class extends Qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Bg=class extends Qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _S=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&m7(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=uL();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=gL(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&$c(this.mutations,e.mutations,(t,r)=>eF(t,r))&&$c(this.baseMutations,e.baseMutations,(t,r)=>eF(t,r))}},vS=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Le(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return a7})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var yS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var bS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Nt,Fe;function vL(n){switch(n){case V.OK:return ue(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return ue(15467,{code:n})}}function yL(n){if(n===void 0)return Ji("GRPC error has no .code"),V.UNKNOWN;switch(n){case Nt.OK:return V.OK;case Nt.CANCELLED:return V.CANCELLED;case Nt.UNKNOWN:return V.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return V.INTERNAL;case Nt.UNAVAILABLE:return V.UNAVAILABLE;case Nt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Nt.NOT_FOUND:return V.NOT_FOUND;case Nt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Nt.ABORTED:return V.ABORTED;case Nt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Nt.DATA_LOSS:return V.DATA_LOSS;default:return ue(39323,{code:n})}}(Fe=Nt||(Nt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";var rF=null;var _7=new Ki([4294967295,4294967295],0);function iF(n){let e=xF().encode(n),t=new VI;return t.update(e),new Uint8Array(t.digest())}function sF(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ki([t,r],0),new Ki([i,s],0)]}var ES=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ca(`Invalid padding: ${t}`);if(r<0)throw new ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ca(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ca(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ki.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Ki.fromNumber(r)));return i.compare(_7)===1&&(i=new Ki([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=iF(e),[r,i]=sF(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=iF(e),[r,i]=sF(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ca=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var jg=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Fd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ge.min(),i,new Ct(Ae),ts(),Ne())}},Fd=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ne(),Ne(),Ne())}};var Bc=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},$g=class{constructor(e,t){this.targetId=e,this.De=t}},Hg=class{constructor(e,t,r=dn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},zg=class{constructor(){this.ve=0,this.Ce=oF(),this.Fe=dn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ne(),t=Ne(),r=Ne();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ue(38017,{changeType:s})}}),new Fd(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=oF()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},wS=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ts(),this.je=Tg(),this.Je=Tg(),this.He=new Ct(Ae)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(pS(s))if(r===0){let o=new de(s.path);this.Xe(t,o,rr.newNoDocument(o,ge.min()))}else Le(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}rF?.ct((function(d,f,_,b,I){var k,N,j,Y,ne,he;let Qe={localCacheCount:d,existenceFilterCount:f.count,databaseId:_.database,projectId:_.projectId},De=f.unchangedNames;return De&&(Qe.bloomFilter={applied:I===0,hashCount:(k=De?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(Y=(j=(N=De?.bits)===null||N===void 0?void 0:N.bitmap)===null||j===void 0?void 0:j.length)!==null&&Y!==void 0?Y:0,padding:(he=(ne=De?.bits)===null||ne===void 0?void 0:ne.padding)!==null&&he!==void 0?he:0,mightContain:D=>{var w;return(w=b?.mightContain(D))!==null&&w!==void 0&&w}}),Qe})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Xi(r).toUint8Array()}catch(c){if(c instanceof Og)return eo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ES(o,i,s)}catch(c){return eo(c instanceof ca?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&pS(a.target)){let c=new de(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,rr.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=Ne();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new jg(e,t,this.He,this.ze,r);return this.ze=ts(),this.je=Tg(),this.Je=Tg(),this.He=new Ct(Ae),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new zg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new zt(Ae),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new zt(Ae),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new zg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Tg(){return new Ct(de.comparator)}function oF(){return new Ct(de.comparator)}var v7={asc:"ASCENDING",desc:"DESCENDING"},y7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b7={and:"AND",or:"OR"},IS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function SS(n,e){return n.useProto3Json||Wd(e)?e:{value:e}}function Gg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function E7(n,e){return Gg(n,e.toTimestamp())}function nr(n){return Le(!!n,49232),ge.fromTimestamp((function(t){let r=Zi(t);return new Lt(r.seconds,r.nanos)})(n))}function $C(n,e){return CS(n,e).canonicalString()}function CS(n,e){let t=(function(i){return new ct(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function EL(n){let e=ct.fromString(n);return Le(DL(e),10190,{key:e.toString()}),e}function qg(n,e){return $C(n.databaseId,e.path)}function Rd(n,e){let t=EL(e);if(t.get(1)!==n.databaseId.projectId)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new de(IL(t))}function wL(n,e){return $C(n.databaseId,e)}function w7(n){let e=EL(n);return e.length===4?ct.emptyPath():IL(e)}function TS(n){return new ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IL(n){return Le(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function aF(n,e,t){return{name:qg(n,e),fields:t.value.mapValue.fields}}function I7(n,e){return"found"in e?(function(r,i){Le(!!i.found,43571),i.found.name,i.found.updateTime;let s=Rd(r,i.found.name),o=nr(i.found.updateTime),a=i.found.createTime?nr(i.found.createTime):ge.min(),c=new jn({mapValue:{fields:i.found.fields}});return rr.newFoundDocument(s,o,a,c)})(n,e):"missing"in e?(function(r,i){Le(!!i.missing,3894),Le(!!i.readTime,22933);let s=Rd(r,i.missing),o=nr(i.readTime);return rr.newNoDocument(s,o)})(n,e):ue(7234,{result:e})}function S7(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,d){return u.useProto3Json?(Le(d===void 0||typeof d=="string",58123),dn.fromBase64String(d||"")):(Le(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),dn.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){let d=u.code===void 0?V.UNKNOWN:yL(u.code);return new K(d,u.message||"")})(o);t=new Hg(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Rd(n,r.document.name),s=nr(r.document.updateTime),o=r.document.createTime?nr(r.document.createTime):ge.min(),a=new jn({mapValue:{fields:r.document.fields}}),c=rr.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new Bc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Rd(n,r.document),s=r.readTime?nr(r.readTime):ge.min(),o=rr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Bc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Rd(n,r.document),s=r.removedTargetIds||[];t=new Bc([],s,i,null)}else{if(!("filter"in e))return ue(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new bS(i,s),a=r.targetId;t=new $g(a,o)}}return t}function SL(n,e){let t;if(e instanceof ma)t={update:aF(n,e.key,e.value)};else if(e instanceof Jc)t={delete:qg(n,e.key)};else if(e instanceof gi)t={update:aF(n,e.key,e.data),updateMask:N7(e.fieldMask)};else{if(!(e instanceof Bg))return ue(16599,{Rt:e.type});t={verify:qg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Kc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yc)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ue(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:E7(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue(27497)})(n,e.precondition)),t}function C7(n,e){return n&&n.length>0?(Le(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?nr(i.updateTime):nr(s);return o.isEqual(ge.min())&&(o=nr(s)),new gS(o,i.transformResults||[])})(t,e))):[]}function T7(n,e){return{documents:[wL(n,e.path)]}}function D7(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=wL(n,i);let s=(function(u){if(u.length!==0)return TL(zr.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(u){if(u.length!==0)return u.map(d=>(function(_){return{field:Lc(_.field),direction:R7(_.dir)}})(d))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=SS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function x7(n){let e=w7(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Le(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=(function(f){let _=CL(f);return _ instanceof zr&&tL(_)?_.getFilters():[_]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map(_=>(function(I){return new ha(Vc(I.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(_))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let _;return _=typeof f=="object"?f.value:f,Wd(_)?null:_})(t.limit));let c=null;t.startAt&&(c=(function(f){let _=!!f.before,b=f.values||[];return new qc(b,_)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){let _=!f.before,b=f.values||[];return new qc(b,_)})(t.endAt)),n7(e,i,o,s,a,"F",c,u)}function A7(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CL(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Vc(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Vc(t.unaryFilter.field);return Ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Vc(t.unaryFilter.field);return Ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Vc(t.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ot.create(Vc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return zr.create(t.compositeFilter.filters.map(r=>CL(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(t.compositeFilter.op))})(n):ue(30097,{filter:n})}function R7(n){return v7[n]}function k7(n){return y7[n]}function P7(n){return b7[n]}function Lc(n){return{fieldPath:n.canonicalString()}}function Vc(n){return tr.fromServerFormat(n.fieldPath)}function TL(n){return n instanceof Ot?(function(t){if(t.op==="=="){if(KO(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NAN"}};if(WO(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(KO(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NOT_NAN"}};if(WO(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lc(t.field),op:k7(t.op),value:t.value}}})(n):n instanceof zr?(function(t){let r=t.getFilters().map(i=>TL(i));return r.length===1?r[0]:{compositeFilter:{op:P7(t.op),filters:r}}})(n):ue(54877,{filter:n})}function N7(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function DL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ld=class n{constructor(e,t,r,i,s=ge.min(),o=ge.min(),a=dn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var DS=class{constructor(e){this.gt=e}};function M7(n){let e=x7({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ug(e,e.limit,"L"):e}var Wg=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(vt(e.integerValue));else if("doubleValue"in e){let r=vt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Nd(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Zi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Xi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?ZF(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):JF(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ue(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Hc,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(vt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),de.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Wg.Ut=new Wg;var xS=class{constructor(){this.Dn=new AS}addToCollectionParentIndex(e,t){return this.Dn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(da.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(da.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}},AS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zt(ct.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zt(ct.comparator)).toArray()}};var Ybe=new Uint8Array(0);var cF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xL=41943040,_r=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};_r.DEFAULT_COLLECTION_PERCENTILE=10,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_r.DEFAULT=new _r(xL,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_r.DISABLED=new _r(-1,0,0);var Vd=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var lF="LruGarbageCollector",O7=1048576;function uF([n,e],[t,r]){let i=Ae(n,t);return i===0?Ae(e,r):i}var RS=class{constructor(e){this.Tr=e,this.buffer=new zt(uF),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();uF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},kS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){X(lF,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){il(t)?X(lF,"Ignoring IndexedDB error during garbage collection: ",t):await rl(t)}await this.Rr(3e5)})}},PS=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return H.resolve(NC.ue);let r=new RS(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(cF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cF):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Oc()<=ke.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function F7(n,e){return new PS(n,e)}var NS=class{constructor(){this.changes=new es(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var MS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var OS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ad(r.mutation,i,vr.empty(),Lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ne()){let i=aa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Sd();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=aa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ne()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ts(),o=xd(),a=(function(){return xd()})();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof gi)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Ad(d.mutation,u,d.mutation.getFieldMask(),Lt.now())):o.set(u.key,vr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new MS(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=xd(),i=new Ct((o,a)=>o-a),s=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||vr.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||Ne()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=uL();d.forEach(_=>{if(!s.has(_)){let b=gL(t.get(_),r.get(_));b!==null&&f.set(_,b),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sL(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):H.resolve(aa()),a=Pd,c=s;return o.next(u=>H.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?H.resolve():this.remoteDocumentCache.getEntry(e,d).next(_=>{c=c.insert(d,_)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Ne())).next(d=>({batchId:a,changes:lL(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next(r=>{let i=Sd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Sd();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,c=>{let u=(function(f,_){return new no(_,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,_)=>{o=o.insert(f,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,rr.newInvalidDocument(d)))});let a=Sd();return o.forEach((c,u)=>{let d=s.get(c);d!==void 0&&Ad(d.mutation,u,vr.empty(),Lt.now()),g_(t,u)&&(a=a.insert(c,u))}),a})}};var FS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return H.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:nr(i.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:M7(i.bundledQuery),readTime:nr(i.readTime)}})(t)),H.resolve()}};var LS=class{constructor(){this.overlays=new Ct(de.comparator),this.kr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){let r=aa();return H.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),H.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){let i=aa(),s=t.length+1,o=new de(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ct((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=aa(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=aa(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return H.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yS(t,r));let s=this.kr.get(t);s===void 0&&(s=Ne(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var VS=class{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}};var Ud=class{constructor(){this.qr=new zt(Mt.Qr),this.$r=new zt(Mt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Mt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Mt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new de(new ct([])),r=new Mt(t,e),i=new Mt(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new de(new ct([])),r=new Mt(t,e),i=new Mt(t,e+1),s=Ne();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Mt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Mt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return de.comparator(e.key,t.key)||Ae(e.Hr,t.Hr)}static Ur(e,t){return Ae(e.Hr,t.Hr)||de.comparator(e.key,t.key)}};var US=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new zt(Mt.Qr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new _S(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Mt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,t){return H.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?MC:this.er-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Mt(t,0),i=new Mt(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zt(Ae);return t.forEach(i=>{let s=new Mt(i,0),o=new Mt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),H.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;de.isDocumentKey(s)||(s=s.child(""));let o=new Mt(new de(s),0),a=new zt(Ae);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},o),H.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Le(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return H.forEach(t.mutations,i=>{let s=new Mt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Mt(t,0),i=this.Yr.firstAfterOrEqual(r);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var BS=class{constructor(e){this.ni=e,this.docs=(function(){return new Ct(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():rr.newInvalidDocument(t))}getEntries(e,t){let r=ts();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():rr.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ts(),o=t.path,a=new de(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||LW(FW(d),r)<=0||(i.has(d.key)||g_(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ue(9500)}ri(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jS(this)}getSize(e){return H.resolve(this.size)}},jS=class extends NS{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var $S=class{constructor(e){this.persistence=e,this.ii=new es(t=>UC(t),BC),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.si=0,this.oi=new Ud,this.targetCount=0,this._i=Vd.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),H.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Vd(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.hr(t),H.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),H.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this.oi.containsKey(t))}};var Kg=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new NC(0),this.ci=!1,this.ci=!0,this.li=new VS,this.referenceDelegate=e(this),this.hi=new $S(this),this.indexManager=new xS,this.remoteDocumentCache=(function(i){return new BS(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new DS(t),this.Ti=new FS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new US(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){X("MemoryPersistence","Starting transaction:",e);let i=new HS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return H.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},HS=class extends tS{constructor(e){super(),this.currentSequenceNumber=e}},zS=class n{constructor(e){this.persistence=e,this.Ai=new Ud,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ue(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.mi,r=>{let i=de.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,ge.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return H.or([()=>H.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Yg=class n{constructor(e,t){this.persistence=e,this.gi=new es(r=>jW(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=F7(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return H.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?H.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,ge.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),H.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xg(e.data.value)),t}Sr(e,t,r){return H.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return H.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var GS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ne(),i=Ne();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var qS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var WS=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return IN()?8:UW($t())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new qS;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Oc()<=ke.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Fc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(Oc()<=ke.DEBUG&&X("QueryEngine","Query:",Fc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Oc()<=ke.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Fc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(t))):H.resolve())}ps(e,t){if(ZO(t))return H.resolve(null);let r=pi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ug(t,null,"F"),r=pi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ne(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,o,c.readTime)?this.ps(e,Ug(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return ZO(t)||i.isEqual(ge.min())?H.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?H.resolve(null):(Oc()<=ke.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fc(t)),this.vs(e,o,t,OW(i,Pd)).next(a=>a))})}bs(e,t){let r=new zt(aL(e));return t.forEach((i,s)=>{g_(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Oc()<=ke.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Fc(t)),this.gs.getDocumentsMatchingQuery(e,t,da.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var HC="LocalStore",L7=3e8,KS=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ct(Ae),this.Ms=new es(s=>UC(s),BC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function V7(n,e,t,r){return new KS(n,e,t,r)}async function AL(n,e){let t=ve(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ne();for(let u of i){o.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of s){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function U7(n,e){let t=ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,d){let f=u.batch,_=f.keys(),b=H.resolve();return _.forEach(I=>{b=b.next(()=>d.getEntry(c,I)).next(k=>{let N=u.docVersions.get(I);Le(N!==null,48541),k.version.compareTo(N)<0&&(f.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),d.addEntry(k)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,f))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Ne();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function RL(n){let e=ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function B7(n,e){let t=ve(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,f)=>{let _=i.get(f);if(!_)return;a.push(t.hi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.hi.addMatchingKeys(s,d.addedDocuments,f)));let b=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?b=b.withResumeToken(dn.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,r)),i=i.insert(f,b),(function(k,N,j){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=L7?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(_,b,d)&&a.push(t.hi.updateTargetData(s,b))});let c=ts(),u=Ne();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(j7(s,o,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(ge.min())){let d=t.hi.getLastRemoteSnapshotVersion(s).next(f=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.Fs=i,s))}function j7(n,e,t){let r=Ne(),i=Ne();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ts();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):X(HC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function $7(n,e){let t=ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=MC),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function H7(n,e){let t=ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Ld(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function YS(n,e,t){let r=ve(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!il(o))throw o;X(HC,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function dF(n,e,t){let r=ve(n),i=ge.min(),s=Ne();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,u,d){let f=ve(c),_=f.Ms.get(d);return _!==void 0?H.resolve(f.Fs.get(_)):f.hi.getTargetData(u,d)})(r,o,pi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:ge.min(),t?s:Ne())).next(a=>(z7(r,i7(e),a),{documents:a,qs:s})))}function z7(n,e,t){let r=n.xs.get(e)||ge.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var Qg=class{constructor(){this.activeTargetIds=u7()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var QS=class{constructor(){this.Fo=new Qg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Qg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var JS=class{xo(e){}shutdown(){}};var hF="ConnectivityMonitor",Jg=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){X(hF,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){X(hF,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Dg=null;function ZS(){return Dg===null?Dg=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dg++,"0x"+Dg.toString(16)}var zI="RestConnection",G7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},XS=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Fg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=ZS(),a=this.Go(e,t.toUriEncodedString());X(zI,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:u}=new URL(a),d=Bs(u);return this.jo(e,a,c,r,d).then(f=>(X(zI,`Received RPC '${e}' ${o}: `,f),f),f=>{throw eo(zI,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=G7[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var eC=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var un="WebChannelConnection",tC=class extends XS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=ZS();return new Promise((a,c)=>{let u=new UI;u.setWithCredentials(!0),u.listenOnce(BI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Id.NO_ERROR:let f=u.getResponseJson();X(un,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Id.TIMEOUT:X(un,`RPC '${e}' ${o} timed out`),c(new K(V.DEADLINE_EXCEEDED,"Request time out"));break;case Id.HTTP_ERROR:let _=u.getStatus();if(X(un,`RPC '${e}' ${o} failed with status:`,_,"response text:",u.getResponseText()),_>0){let b=u.getResponseJson();Array.isArray(b)&&(b=b[0]);let I=b?.error;if(I&&I.status&&I.message){let k=(function(j){let Y=j.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(Y)>=0?Y:V.UNKNOWN})(I.status);c(new K(k,I.message))}else c(new K(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(V.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{X(un,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);X(un,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",d,r,15)})}P_(e,t,r){let i=ZS(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=HI(),a=$I(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");X(un,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c);this.T_(f);let _=!1,b=!1,I=new eC({Ho:N=>{b?X(un,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(_||(X(un,`Opening RPC '${e}' stream ${i} transport.`),f.open(),_=!0),X(un,`RPC '${e}' stream ${i} sending:`,N),f.send(N))},Yo:()=>f.close()}),k=(N,j,Y)=>{N.listen(j,ne=>{try{Y(ne)}catch(he){setTimeout(()=>{throw he},0)}})};return k(f,Mc.EventType.OPEN,()=>{b||(X(un,`RPC '${e}' stream ${i} transport opened.`),I.s_())}),k(f,Mc.EventType.CLOSE,()=>{b||(b=!0,X(un,`RPC '${e}' stream ${i} transport closed`),I.__(),this.I_(f))}),k(f,Mc.EventType.ERROR,N=>{b||(b=!0,eo(un,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),I.__(new K(V.UNAVAILABLE,"The operation could not be completed")))}),k(f,Mc.EventType.MESSAGE,N=>{var j;if(!b){let Y=N.data[0];Le(!!Y,16349);let ne=Y,he=ne?.error||((j=ne[0])===null||j===void 0?void 0:j.error);if(he){X(un,`RPC '${e}' stream ${i} received error:`,he);let Qe=he.status,De=(function(C){let x=Nt[C];if(x!==void 0)return yL(x)})(Qe),D=he.message;De===void 0&&(De=V.INTERNAL,D="Unknown error status: "+Qe+" with message "+he.message),b=!0,I.__(new K(De,D)),f.close()}else X(un,`RPC '${e}' stream ${i} received:`,Y),I.a_(Y)}}),k(a,jI.STAT_EVENT,N=>{N.stat===Sg.PROXY?X(un,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Sg.NOPROXY&&X(un,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function GI(){return typeof document<"u"?document:null}function __(n){return new IS(n,!0)}var Bd=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var fF="PersistentStream",Zg=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bd(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(Ji(t.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new K(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return X(fF,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(X(fF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},nC=class extends Zg{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=S7(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ge.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?nr(o.readTime):ge.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=TS(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=pS(c)?{documents:T7(s,c)}:{query:D7(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bL(s,o.resumeToken);let u=SS(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Gg(s,o.snapshotVersion.toTimestamp());let u=SS(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=A7(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=TS(this.serializer),t.removeTarget=e,this.k_(t)}},rC=class extends Zg{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=C7(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=TS(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>SL(this.serializer,r))};this.k_(t)}};var iC=class{},sC=class extends iC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,CS(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(V.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,CS(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(V.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},oC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ji(t),this._a=!1):X("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ga="RemoteStore",aC=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{va(this)&&(X(ga,"Restarting streams for network reachability change."),await(async function(c){let u=ve(c);u.Ia.add(4),await Kd(u),u.Aa.set("Unknown"),u.Ia.delete(4),await v_(u)})(this))})}),this.Aa=new oC(r,i)}};async function v_(n){if(va(n))for(let e of n.da)await e(!0)}async function Kd(n){for(let e of n.da)await e(!1)}function kL(n,e){let t=ve(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),WC(t)?qC(t):sl(t).x_()&&GC(t,e))}function zC(n,e){let t=ve(n),r=sl(t);t.Ta.delete(e),r.x_()&&PL(t,e),t.Ta.size===0&&(r.x_()?r.B_():va(t)&&t.Aa.set("Unknown"))}function GC(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sl(n).H_(e)}function PL(n,e){n.Ra.$e(e),sl(n).Y_(e)}function qC(n){n.Ra=new wS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),sl(n).start(),n.Aa.aa()}function WC(n){return va(n)&&!sl(n).M_()&&n.Ta.size>0}function va(n){return ve(n).Ia.size===0}function NL(n){n.Ra=void 0}async function q7(n){n.Aa.set("Online")}async function W7(n){n.Ta.forEach((e,t)=>{GC(n,e)})}async function K7(n,e){NL(n),WC(n)?(n.Aa.la(e),qC(n)):n.Aa.set("Unknown")}async function Y7(n,e,t){if(n.Aa.set("Online"),e instanceof Hg&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){X(ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xg(n,r)}else if(e instanceof Bc?n.Ra.Ye(e):e instanceof $g?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ge.min()))try{let r=await RL(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.Ta.get(u);d&&s.Ta.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let d=s.Ta.get(c);if(!d)return;s.Ta.set(c,d.withResumeToken(dn.EMPTY_BYTE_STRING,d.snapshotVersion)),PL(s,c);let f=new Ld(d.target,c,u,d.sequenceNumber);GC(s,f)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){X(ga,"Failed to raise snapshot:",r),await Xg(n,r)}}async function Xg(n,e,t){if(!il(e))throw e;n.Ia.add(1),await Kd(n),n.Aa.set("Offline"),t||(t=()=>RL(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{X(ga,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await v_(n)})}function ML(n,e){return e().catch(t=>Xg(n,t,e))}async function y_(n){let e=ve(n),t=ro(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:MC;for(;Q7(e);)try{let i=await $7(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,J7(e,i)}catch(i){await Xg(e,i)}OL(e)&&FL(e)}function Q7(n){return va(n)&&n.Pa.length<10}function J7(n,e){n.Pa.push(e);let t=ro(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function OL(n){return va(n)&&!ro(n).M_()&&n.Pa.length>0}function FL(n){ro(n).start()}async function Z7(n){ro(n).na()}async function X7(n){let e=ro(n);for(let t of n.Pa)e.X_(t.mutations)}async function eK(n,e,t){let r=n.Pa.shift(),i=vS.from(r,e,t);await ML(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await y_(n)}async function tK(n,e){e&&ro(n).Z_&&await(async function(r,i){if((function(o){return vL(o)&&o!==V.ABORTED})(i.code)){let s=r.Pa.shift();ro(r).N_(),await ML(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await y_(r)}})(n,e),OL(n)&&FL(n)}async function pF(n,e){let t=ve(n);t.asyncQueue.verifyOperationInProgress(),X(ga,"RemoteStore received new credentials");let r=va(t);t.Ia.add(3),await Kd(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await v_(t)}async function nK(n,e){let t=ve(n);e?(t.Ia.delete(2),await v_(t)):e||(t.Ia.add(2),await Kd(t),t.Aa.set("Unknown"))}function sl(n){return n.Va||(n.Va=(function(t,r,i){let s=ve(t);return s.ia(),new nC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:q7.bind(null,n),e_:W7.bind(null,n),n_:K7.bind(null,n),J_:Y7.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),WC(n)?qC(n):n.Aa.set("Unknown")):(await n.Va.stop(),NL(n))})),n.Va}function ro(n){return n.ma||(n.ma=(function(t,r,i){let s=ve(t);return s.ia(),new rC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Z7.bind(null,n),n_:tK.bind(null,n),ea:X7.bind(null,n),ta:eK.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await y_(n)):(await n.ma.stop(),n.Pa.length>0&&(X(ga,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var cC=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function KC(n,e){if(Ji("AsyncQueue",`${e}: ${n}`),il(n))return new K(V.UNAVAILABLE,`${e}: ${n}`);throw n}var e_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||de.comparator(t.key,r.key):(t,r)=>de.comparator(t.key,r.key),this.keyedMap=Sd(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var t_=class{constructor(){this.fa=new Ct(de.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ue(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Zc=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,e_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&m_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var lC=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},uC=class{constructor(){this.queries=mF(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ve(t),s=i.queries;i.queries=mF(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new K(V.ABORTED,"Firestore shutting down"))}};function mF(){return new es(n=>oL(n),m_)}async function YC(n,e){let t=ve(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new lC,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=KC(o,`Initialization of query '${Fc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&JC(t)}async function QC(n,e){let t=ve(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function rK(n,e){let t=ve(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&JC(t)}function iK(n,e,t){let r=ve(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function JC(n){n.Da.forEach(e=>{e.next()})}var dC,gF;(gF=dC||(dC={})).Fa="default",gF.Cache="cache";var jd=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Zc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==dC.Cache}};var n_=class{constructor(e){this.key=e}},r_=class{constructor(e){this.key=e}},hC=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ne(),this.mutatedKeys=Ne(),this.Xa=aL(e),this.eu=new e_(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new t_,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let _=i.get(d),b=g_(this.query,f)?f:null,I=!!_&&this.mutatedKeys.has(_.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),N=!1;_&&b?_.data.isEqual(b.data)?I!==k&&(r.track({type:3,doc:b}),N=!0):this.iu(_,b)||(r.track({type:2,doc:b}),N=!0,(c&&this.Xa(b,c)>0||u&&this.Xa(b,u)<0)&&(a=!0)):!_&&b?(r.track({type:0,doc:b}),N=!0):_&&!b&&(r.track({type:1,doc:_}),N=!0,(c||u)&&(a=!0)),N&&(b?(o=o.add(b),s=k?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((d,f)=>(function(b,I){let k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{At:N})}};return k(b)-k(I)})(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new Zc(this.query,e.eu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new t_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ne(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new r_(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new n_(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ne();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Zc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},ZC="SyncEngine",fC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},pC=class{constructor(e){this.key=e,this.lu=!1}},mC=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new es(a=>oL(a),m_),this.Tu=new Map,this.Iu=new Set,this.du=new Ct(de.comparator),this.Eu=new Map,this.Au=new Ud,this.Ru={},this.Vu=new Map,this.mu=Vd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function sK(n,e,t=!0){let r=$L(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await LL(r,e,t,!0),i}async function oK(n,e){let t=$L(n);await LL(t,e,!0,!1)}async function LL(n,e,t,r){let i=await H7(n.localStore,pi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await aK(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&kL(n.remoteStore,i),a}async function aK(n,e,t,r,i){n.gu=(f,_,b)=>(async function(k,N,j,Y){let ne=N.view.nu(j);ne.Ds&&(ne=await dF(k.localStore,N.query,!1).then(({documents:D})=>N.view.nu(D,ne)));let he=Y&&Y.targetChanges.get(N.targetId),Qe=Y&&Y.targetMismatches.get(N.targetId)!=null,De=N.view.applyChanges(ne,k.isPrimaryClient,he,Qe);return vF(k,N.targetId,De._u),De.snapshot})(n,f,_,b);let s=await dF(n.localStore,e,!0),o=new hC(e,s.qs),a=o.nu(s.documents),c=Fd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);vF(n,t,u._u);let d=new fC(e,t,o);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function cK(n,e,t){let r=ve(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!m_(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await YS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zC(r.remoteStore,i.targetId),gC(r,i.targetId)}).catch(rl)):(gC(r,i.targetId),await YS(r.localStore,i.targetId,!0))}async function lK(n,e){let t=ve(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zC(t.remoteStore,r.targetId))}async function uK(n,e,t){let r=_K(n);try{let i=await(function(o,a){let c=ve(o),u=Lt.now(),d=a.reduce((b,I)=>b.add(I.key),Ne()),f,_;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let I=ts(),k=Ne();return c.Os.getEntries(b,d).next(N=>{I=N,I.forEach((j,Y)=>{Y.isValidDocument()||(k=k.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,I)).next(N=>{f=N;let j=[];for(let Y of a){let ne=g7(Y,f.get(Y.key).overlayedDocument);ne!=null&&j.push(new gi(Y.key,ne,XF(ne.value.mapValue),Sn.exists(!0)))}return c.mutationQueue.addMutationBatch(b,u,j,a)}).next(N=>{_=N;let j=N.applyToLocalDocumentSet(f,k);return c.documentOverlayCache.saveOverlays(b,N.batchId,j)})}).then(()=>({batchId:_.batchId,changes:lL(f)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new Ct(Ae)),u=u.insert(a,c),o.Ru[o.currentUser.toKey()]=u})(r,i.batchId,t),await Yd(r,i.changes),await y_(r.remoteStore)}catch(i){let s=KC(i,"Failed to persist write");t.reject(s)}}async function VL(n,e){let t=ve(n);try{let r=await B7(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Le(o.lu,14607):i.removedDocuments.size>0&&(Le(o.lu,42227),o.lu=!1))}),await Yd(t,r,e)}catch(r){await rl(r)}}function _F(n,e,t){let r=ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=ve(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let _ of f.wa)_.va(a)&&(u=!0)}),u&&JC(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dK(n,e,t){let r=ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Ct(de.comparator);o=o.insert(s,rr.newNoDocument(s,ge.min()));let a=Ne().add(s),c=new jg(ge.min(),new Map,new Ct(Ae),o,a);await VL(r,c),r.du=r.du.remove(s),r.Eu.delete(e),XC(r)}else await YS(r.localStore,e,!1).then(()=>gC(r,e,t)).catch(rl)}async function hK(n,e){let t=ve(n),r=e.batch.batchId;try{let i=await U7(t.localStore,e);BL(t,r,null),UL(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Yd(t,i)}catch(i){await rl(i)}}async function fK(n,e,t){let r=ve(n);try{let i=await(function(o,a){let c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Le(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})})(r.localStore,e);BL(r,e,t),UL(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Yd(r,i)}catch(i){await rl(i)}}function UL(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function BL(n,e,t){let r=ve(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function gC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||jL(n,r)})}function jL(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(zC(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),XC(n))}function vF(n,e,t){for(let r of t)r instanceof n_?(n.Au.addReference(r.key,e),pK(n,r)):r instanceof r_?(X(ZC,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||jL(n,r.key)):ue(19791,{yu:r})}function pK(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(X(ZC,"New document in limbo: "+t),n.Iu.add(r),XC(n))}function XC(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new de(ct.fromString(e)),r=n.mu.next();n.Eu.set(r,new pC(t)),n.du=n.du.insert(t,r),kL(n.remoteStore,new Ld(pi(p_(t.path)),r,"TargetPurposeLimboResolution",NC.ue))}}async function Yd(n,e,t){let r=ve(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=GS.Es(c.targetId,u);s.push(f)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,u){let d=ve(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(u,_=>H.forEach(_.Is,b=>d.persistence.referenceDelegate.addReference(f,_.targetId,b)).next(()=>H.forEach(_.ds,b=>d.persistence.referenceDelegate.removeReference(f,_.targetId,b)))))}catch(f){if(!il(f))throw f;X(HC,"Failed to update sequence numbers: "+f)}for(let f of u){let _=f.targetId;if(!f.fromCache){let b=d.Fs.get(_),I=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(I);d.Fs=d.Fs.insert(_,k)}}})(r.localStore,s))}async function mK(n,e){let t=ve(n);if(!t.currentUser.isEqual(e)){X(ZC,"User change. New user:",e.toKey());let r=await AL(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new K(V.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yd(t,r.Bs)}}function gK(n,e){let t=ve(n),r=t.Eu.get(e);if(r&&r.lu)return Ne().add(r.key);{let i=Ne(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function $L(n){let e=ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dK.bind(null,e),e.hu.J_=rK.bind(null,e.eventManager),e.hu.pu=iK.bind(null,e.eventManager),e}function _K(n){let e=ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fK.bind(null,e),e}var HL=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=__(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return V7(this.persistence,new WS,t.initialUser,this.serializer)}Du(t){return new Kg(zS.Vi,this.serializer)}bu(t){return new QS}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),_C=class extends HL{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Le(this.persistence.referenceDelegate instanceof Yg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new kS(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?_r.withCacheSize(this.cacheSizeBytes):_r.DEFAULT;return new Kg(r=>Yg.Vi(r,t),this.serializer)}};var vK=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_F(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mK.bind(null,this.syncEngine),await nK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new uC})()}createDatastore(t){let r=__(t.databaseInfo.databaseId),i=(function(o){return new tC(o)})(t.databaseInfo);return(function(o,a,c,u){return new sC(o,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new aC(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>_F(this.syncEngine,r,0),(function(){return Jg.C()?new Jg:new JS})())}createSyncEngine(t,r){return(function(s,o,a,c,u,d,f){let _=new mC(s,o,a,c,u,d);return f&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=ve(s);X(ga,"RemoteStore shutting down."),o.Ia.add(5),await Kd(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var $d=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ji("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var vC=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await(async function(i,s){let o=ve(i),a={documents:s.map(f=>qg(o.serializer,f))},c=await o.Jo("BatchGetDocuments",o.serializer.databaseId,ct.emptyPath(),a,s.length),u=new Map;c.forEach(f=>{let _=I7(o.serializer,f);u.set(_.key.toString(),_)});let d=[];return s.forEach(f=>{let _=u.get(f.toString());Le(!!_,55234,{key:f}),d.push(_)}),d})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=de.fromPath(r);this.mutations.push(new Bg(i,this.precondition(i)))}),await(async function(r,i){let s=ve(r),o={writes:i.map(a=>SL(s.serializer,a))};await s.Wo("Commit",s.serializer.databaseId,ct.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ue(50498,{Wu:e.constructor.name});t=ge.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new K(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ge.min())?Sn.exists(!1):Sn.updateTime(t):Sn.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ge.min()))throw new K(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sn.updateTime(t)}return Sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var yC=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Gu=r.maxAttempts,this.F_=new Bd(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{let e=new vC(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{let t=this.updateFunction(e);return!Wd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!vL(t)}return!1}};var io="FirestoreClient",bC=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ht.UNAUTHENTICATED,this.clientId=kd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{X(io,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(io,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=KC(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function qI(n,e){n.asyncQueue.verifyOperationInProgress(),X(io,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await AL(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{eo("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{X("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{eo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function yF(n,e){n.asyncQueue.verifyOperationInProgress();let t=await yK(n);X(io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>pF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>pF(e.remoteStore,i)),n._onlineComponents=e}async function yK(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X(io,"Using user provided OfflineComponentProvider");try{await qI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;eo("Error using user provided cache. Falling back to memory cache: "+t),await qI(n,new HL)}}else X(io,"Using default OfflineComponentProvider"),await qI(n,new _C(void 0));return n._offlineComponents}async function eT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(X(io,"Using user provided OnlineComponentProvider"),await yF(n,n._uninitializedComponentsProvider._online)):(X(io,"Using default OnlineComponentProvider"),await yF(n,new vK))),n._onlineComponents}function bK(n){return eT(n).then(e=>e.syncEngine)}function EK(n){return eT(n).then(e=>e.datastore)}async function i_(n){let e=await eT(n),t=e.eventManager;return t.onListen=sK.bind(null,e.syncEngine),t.onUnlisten=cK.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oK.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lK.bind(null,e.syncEngine),t}function wK(n,e,t={}){let r=new yr;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let d=new $d({next:_=>{d.Ou(),o.enqueueAndForget(()=>QC(s,f));let b=_.docs.has(a);!b&&_.fromCache?u.reject(new K(V.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&c&&c.source==="server"?u.reject(new K(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),f=new jd(p_(a.path),d,{includeMetadataChanges:!0,ka:!0});return YC(s,f)})(await i_(n),n.asyncQueue,e,t,r)),r.promise}function IK(n,e,t={}){let r=new yr;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let d=new $d({next:_=>{d.Ou(),o.enqueueAndForget(()=>QC(s,f)),_.fromCache&&c.source==="server"?u.reject(new K(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),f=new jd(a,d,{includeMetadataChanges:!0,ka:!0});return YC(s,f)})(await i_(n),n.asyncQueue,e,t,r)),r.promise}function zL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var bF=new Map;var GL="firestore.googleapis.com",EF=!0,s_=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GL,this.ssl=EF}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:EF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<O7)throw new K(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new WI;switch(r.type){case"firstParty":return new JI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=bF.get(t);r&&(X("ComponentProvider","Removing Datastore"),bF.delete(t),r.terminate())})(this),Promise.resolve()}};function qL(n,e,t,r={}){var i;n=Cn(n,Xc);let s=Bs(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(Fm(`https://${c}`),Lm("Firestore",!0)),o.host!==GL&&o.host!==c&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!ai(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=Ht.MOCK_USER;else{d=_N(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new K(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ht(_)}n._authCredentials=new KI(new kg(d,f))}}var ns=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Vt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(qd(t,n._jsonSchema))return new n(e,r||null,new de(ct.fromString(t.referencePath)))}};Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Ft("string",Vt._jsonSchemaVersion),referencePath:Ft("string")};var Qs=class n extends ns{constructor(e,t,r){super(e,t,p_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new de(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function WL(n,e,...t){if(n=It(n),AF("collection","path",e),n instanceof Xc){let r=ct.fromString(e,...t);return UO(r),new Qs(n,null,r)}{if(!(n instanceof Vt||n instanceof Qs))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ct.fromString(e,...t));return UO(r),new Qs(n.firestore,null,r)}}function tT(n,e,...t){if(n=It(n),arguments.length===1&&(e=kd.newId()),AF("doc","path",e),n instanceof Xc){let r=ct.fromString(e,...t);return VO(r),new Vt(n,null,new de(r))}{if(!(n instanceof Vt||n instanceof Qs))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ct.fromString(e,...t));return VO(r),new Vt(n.firestore,n instanceof Qs?n.converter:null,new de(r))}}var wF="AsyncQueue",o_=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bd(this,"async_queue_retry"),this.oc=()=>{let r=GI();r&&X(wF,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=GI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=GI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new yr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!il(e))throw e;X(wF,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ji("INTERNAL UNHANDLED ERROR: ",IF(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=cC.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&ue(47125,{hc:IF(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function IF(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function SF(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var br=class extends Xc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new o_,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new o_(e),this._firestoreClient=void 0,await e}}};function KL(n,e){let t=typeof n=="object"?n:Qo(),r=typeof n=="string"?n:e||Fg,i=Sc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=gN("firestore");s&&qL(i,...s)}return i}function Qd(n){if(n._terminated)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||SK(n),n._firestoreClient}function SK(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,u,d){return new nS(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,zL(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new bC(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Qi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(dn.fromBase64String(e))}catch(t){throw new K(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qd(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Qi._jsonSchemaVersion="firestore/bytes/1.0",Qi._jsonSchema={type:Ft("string",Qi._jsonSchemaVersion),bytes:Ft("string")};var _a=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hd=class{constructor(e){this._methodName=e}};var Js=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(qd(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Js._jsonSchemaVersion="firestore/geoPoint/1.0",Js._jsonSchema={type:Ft("string",Js._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};var Zs=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qd(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new K(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Zs._jsonSchemaVersion="firestore/vectorValue/1.0",Zs._jsonSchema={type:Ft("string",Zs._jsonSchemaVersion),vectorValues:Ft("object")};var CK=/^__.*__$/,EC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ma(e,this.data,t,this.fieldTransforms)}},a_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function YL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ec:n})}}var wC=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return l_(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(YL(this.Ec)&&CK.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},IC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||__(e)}Dc(e,t,r,i=!1){return new wC({Ec:e,methodName:t,bc:r,path:tr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Jd(n){let e=n._freezeSettings(),t=__(n._databaseId);return new IC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nT(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);rT("Data must be an object, but it was:",o,r);let a=ZL(r,o),c,u;if(s.merge)c=new vr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let _=SC(e,f,t);if(!o.contains(_))throw new K(V.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);e2(d,_)||d.push(_)}c=new vr(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new EC(new jn(a),c,u)}var c_=class n extends Hd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function QL(n,e,t,r){let i=n.Dc(1,e,t);rT("Data must be an object, but it was:",i,r);let s=[],o=jn.empty();so(r,(c,u)=>{let d=iT(e,c,t);u=It(u);let f=i.gc(d);if(u instanceof c_)s.push(d);else{let _=Zd(u,f);_!=null&&(s.push(d),o.set(d,_))}});let a=new vr(s);return new a_(o,a,i.fieldTransforms)}function JL(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[SC(e,r,t)],c=[i];if(s.length%2!=0)throw new K(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(SC(e,s[_])),c.push(s[_+1]);let u=[],d=jn.empty();for(let _=a.length-1;_>=0;--_)if(!e2(u,a[_])){let b=a[_],I=c[_];I=It(I);let k=o.gc(b);if(I instanceof c_)u.push(b);else{let N=Zd(I,k);N!=null&&(u.push(b),d.set(b,N))}}let f=new vr(u);return new a_(d,f,o.fieldTransforms)}function TK(n,e,t,r=!1){return Zd(t,n.Dc(r?4:3,e))}function Zd(n,e){if(XL(n=It(n)))return rT("Unsupported field value:",e,n),ZL(n,e);if(n instanceof Hd)return(function(r,i){if(!YL(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Zd(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return d7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Lt.fromDate(r);return{timestampValue:Gg(i.serializer,s)}}if(r instanceof Lt){let s=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gg(i.serializer,s)}}if(r instanceof Js)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qi)return{bytesValue:bL(i.serializer,r._byteString)};if(r instanceof Vt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$C(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zs)return(function(o,a){return{mapValue:{fields:{[FC]:{stringValue:LC},[Hc]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return jC(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${h_(r)}`)})(n,e)}function ZL(n,e){let t={};return GF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(n,(r,i)=>{let s=Zd(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function XL(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof Js||n instanceof Qi||n instanceof Vt||n instanceof Hd||n instanceof Zs)}function rT(n,e,t){if(!XL(t)||!RF(t)){let r=h_(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function SC(n,e,t){if((e=It(e))instanceof _a)return e._internalPath;if(typeof e=="string")return iT(n,e);throw l_("Field path arguments must be of type string or ",n,!1,void 0,t)}var DK=new RegExp("[~\\*/\\[\\]]");function iT(n,e,t){if(e.search(DK)>=0)throw l_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _a(...e.split("."))._internalPath}catch{throw l_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function l_(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new K(V.INVALID_ARGUMENT,a+n+c)}function e2(n,e){return n.some(t=>t.isEqual(e))}var el=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new CC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(b_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},CC=class extends el{data(){return super.data()}};function b_(n,e){return typeof e=="string"?iT(n,e):e instanceof _a?e._internalPath:e._delegate._internalPath}function t2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new K(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zd=class{},Gd=class extends zd{};function n2(n,e,...t){let r=[];e instanceof zd&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof TC).length,a=s.filter(c=>c instanceof u_).length;if(o>1||o>0&&a>0)throw new K(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var u_=class n extends Gd{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return o2(e._query,t),new ns(e.firestore,e.converter,mS(e._query,t))}_parse(e){let t=Jd(e.firestore);return(function(s,o,a,c,u,d,f){let _;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){TF(f,d);let I=[];for(let k of f)I.push(CF(c,s,k));_={arrayValue:{values:I}}}else _=CF(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||TF(f,d),_=TK(a,o,f,d==="in"||d==="not-in");return Ot.create(u,d,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function r2(n,e,t){let r=e,i=b_("where",n);return u_._create(i,r,t)}var TC=class n extends zd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:zr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)o2(o,c),o=mS(o,c)})(e._query,t),new ns(e.firestore,e.converter,mS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var DC=class n extends Gd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new K(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ha(s,o)})(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new no(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function i2(n,e="asc"){let t=e,r=b_("orderBy",n);return DC._create(r,t)}var xC=class n extends Gd{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ns(e.firestore,e.converter,Ug(e._query,this._limit,this._limitType))}};function s2(n){return MW("limit",n),xC._create("limit",n,"F")}function CF(n,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new K(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sL(e)&&t.indexOf("/")!==-1)throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ct.fromString(t));if(!de.isDocumentKey(r))throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qO(n,new de(r))}if(t instanceof Vt)return qO(n,t._key);throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${h_(t)}.`)}function TF(n,e){if(!Array.isArray(n)||n.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function o2(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new K(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var d_=class{convertValue(e,t="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return so(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Hc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>vt(o.doubleValue));return new Zs(s)}convertGeoPoint(e){return new Js(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=f_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Md(e));default:return null}}convertTimestamp(e){let t=Zi(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ct.fromString(e);Le(DL(r),9688,{name:e});let i=new Lg(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(t)||Ji(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function sT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var AC=class extends d_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}};var Ys=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xs=class n extends el{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(b_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xs._jsonSchema={type:Ft("string",Xs._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};var jc=class extends Xs{data(e={}){return super.data(e)}},la=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ys(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jc(this._firestore,this._userDataWriter,r.key,r,new Ys(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new jc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ys(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new jc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ys(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:xK(a.type),doc:c,oldIndex:u,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function xK(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:n})}}function a2(n){n=Cn(n,Vt);let e=Cn(n.firestore,br);return wK(Qd(e),n._key).then(t=>p2(e,n,t))}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:Ft("string",la._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};var tl=class extends d_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}};function c2(n){n=Cn(n,ns);let e=Cn(n.firestore,br),t=Qd(e),r=new tl(e);return t2(n._query),IK(t,n._query).then(i=>new la(e,r,n,i))}function l2(n,e,t){n=Cn(n,Vt);let r=Cn(n.firestore,br),i=sT(n.converter,e,t);return E_(r,[nT(Jd(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Sn.none())])}function u2(n,e,t,...r){n=Cn(n,Vt);let i=Cn(n.firestore,br),s=Jd(i),o;return o=typeof(e=It(e))=="string"||e instanceof _a?JL(s,"updateDoc",n._key,e,t,r):QL(s,"updateDoc",n._key,e),E_(i,[o.toMutation(n._key,Sn.exists(!0))])}function d2(n){return E_(Cn(n.firestore,br),[new Jc(n._key,Sn.none())])}function h2(n,e){let t=Cn(n.firestore,br),r=tT(n),i=sT(n.converter,e);return E_(t,[nT(Jd(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}function f2(n,...e){var t,r,i;n=It(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||SF(e[o])||(s=e[o++]);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(SF(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof Vt)u=Cn(n.firestore,br),d=p_(n._key.path),c={next:f=>{e[o]&&e[o](p2(u,n,f))},error:e[o+1],complete:e[o+2]};else{let f=Cn(n,ns);u=Cn(f.firestore,br),d=f._query;let _=new tl(u);c={next:b=>{e[o]&&e[o](new la(u,_,f,b))},error:e[o+1],complete:e[o+2]},t2(n._query)}return(function(_,b,I,k){let N=new $d(k),j=new jd(b,N,I);return _.asyncQueue.enqueueAndForget(async()=>YC(await i_(_),j)),()=>{N.Ou(),_.asyncQueue.enqueueAndForget(async()=>QC(await i_(_),j))}})(Qd(u),d,a,c)}function E_(n,e){return(function(r,i){let s=new yr;return r.asyncQueue.enqueueAndForget(async()=>uK(await bK(r),i,s)),s.promise})(Qd(n),e)}function p2(n,e,t){let r=t.docs.get(e._key),i=new tl(n);return new Xs(n,i,e._key,r,new Ys(t.hasPendingWrites,t.fromCache),e.converter)}var AK={maxAttempts:5};function Cd(n,e){if((n=It(n)).firestore!==e)throw new K(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var RC=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Jd(e)}get(e){let t=Cd(e,this._firestore),r=new AC(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return ue(24041);let s=i[0];if(s.isFoundDocument())return new el(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new el(this._firestore,r,t._key,null,t.converter);throw ue(18433,{doc:s})})}set(e,t,r){let i=Cd(e,this._firestore),s=sT(i.converter,t,r),o=nT(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){let s=Cd(e,this._firestore),o;return o=typeof(t=It(t))=="string"||t instanceof _a?JL(this._dataReader,"Transaction.update",s._key,t,r,i):QL(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){let t=Cd(e,this._firestore);return this._transaction.delete(t._key),this}};var kC=class extends RC{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Cd(e,this._firestore),r=new tl(this._firestore);return super.get(e).then(i=>new Xs(this._firestore,r,t._key,i._document,new Ys(!1,!1),t.converter))}};function m2(n,e,t){n=Cn(n,br);let r=Object.assign(Object.assign({},AK),t);return(function(s){if(s.maxAttempts<1)throw new K(V.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(s,o,a){let c=new yr;return s.asyncQueue.enqueueAndForget(async()=>{let u=await EK(s);new yC(s.asyncQueue,u,a,o,c).zu()}),c.promise})(Qd(n),i=>e(new kC(n,i)),r)}(function(e,t=!0){(function(i){nl=i})($s),Br(new In("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new br(new YI(r.getProvider("auth-internal")),new ZI(o,r.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lg(u.options.projectId,d)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),St(MO,OO,e),St(MO,OO,"esm2017")})();var ya=class{constructor(e){return e}},g2="firestore",oT=class{constructor(){return Tc(g2)}};var aT=new Q("angularfire2.firestore-instances");function RK(n,e){let t=od(g2,n,e);return t&&new ya(t)}function kK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ya(r)}}var PK={provide:oT,deps:[[new Gn,aT]]},NK={provide:ya,useFactory:RK,deps:[[new Gn,aT],ji]};function _2(n,...e){return St("angularfire",Hs.full,"fst"),Dr([NK,PK,{provide:aT,useFactory:kK(n),multi:!0,deps:[Me,We,zs,Zo,[new Gn,wd],[new Gn,Dc],...e]}])}var ol=_t(h2,!0,2);var Er=_t(WL,!0,2);var cT=_t(d2,!0,2);var _i=_t(tT,!0,2);var lT=_t(a2,!0);var Xd=_t(c2,!0);var v2=_t(KL,!0);var al=_t(s2,!0,2);var w_=_t(f2,!0);var cl=_t(i2,!0,2),ba=_t(n2,!0,2);var I_=_t(m2,!0),y2=_t(l2,!0,2);var uT=_t(u2,!0,2);var b2=_t(r2,!0,2);var E2={production:!1,firebase:{apiKey:"AIzaSyBQ18QYhul1hn4RaOsgCsWUW_YaxrwEoqQ",authDomain:"jeub2-online.firebaseapp.com",projectId:"jeub2-online",storageBucket:"jeub2-online.firebasestorage.app",messagingSenderId:"702638381652",appId:"1:702638381652:web:fd034689545996dd8d2bc1",measurementId:"G-M3MPPHV9VB"}};var Ie="primary",dh=Symbol("RouteTitle"),mT=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function pl(n){return new mT(n)}function OK(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function A_(n){return new Promise((e,t)=>{n.pipe(Ti()).subscribe({next:r=>e(r),error:r=>t(r)})})}function FK(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!vi(n[t],e[t]))return!1;return!0}function vi(n,e){let t=n?gT(n):void 0,r=e?gT(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!R2(n[i],e[i]))return!1;return!0}function gT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function R2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function k2(n){return n.length>0?n[n.length-1]:null}function Ta(n){return Ql(n)?n:Oi(n)?ze(Promise.resolve(n)):Te(n)}function P2(n){return Ql(n)?A_(n):Promise.resolve(n)}var LK={exact:M2,subset:O2},N2={exact:VK,subset:UK,ignored:()=>!0};function w2(n,e,t){return LK[t.paths](n.root,e.root,t.matrixParams)&&N2[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function VK(n,e){return vi(n,e)}function M2(n,e,t){if(!Ia(n.segments,e.segments)||!T_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!M2(n.children[r],e.children[r],t))return!1;return!0}function UK(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>R2(n[t],e[t]))}function O2(n,e,t){return F2(n,e,e.segments,t)}function F2(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ia(i,t)||e.hasChildren()||!T_(i,t,r))}else if(n.segments.length===t.length){if(!Ia(n.segments,t)||!T_(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!O2(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ia(n.segments,i)||!T_(n.segments,i,r)||!n.children[Ie]?!1:F2(n.children[Ie],e,s,r)}}function T_(n,e,t){return e.every((r,i)=>N2[t](n[i].parameters,r.parameters))}var yi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=pl(this.queryParams),this._queryParamMap}toString(){return $K.serialize(this)}},qe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return D_(this)}},wa=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=pl(this.parameters),this._parameterMap}toString(){return V2(this)}};function BK(n,e){return Ia(n,e)&&n.every((t,r)=>vi(t.parameters,e[r].parameters))}function Ia(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function jK(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ie&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ie&&(t=t.concat(e(i,r)))}),t}var vl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new oo,providedIn:"root"})}return n})(),oo=class{parse(e){let t=new vT(e);return new yi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${eh(e.root,!0)}`,r=GK(e.queryParams),i=typeof e.fragment=="string"?`#${HK(e.fragment)}`:"";return`${t}${r}${i}`}},$K=new oo;function D_(n){return n.segments.map(e=>V2(e)).join("/")}function eh(n,e){if(!n.hasChildren())return D_(n);if(e){let t=n.children[Ie]?eh(n.children[Ie],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ie&&r.push(`${i}:${eh(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=jK(n,(r,i)=>i===Ie?[eh(n.children[Ie],!1)]:[`${i}:${eh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ie]!=null?`${D_(n)}/${t[0]}`:`${D_(n)}/(${t.join("//")})`}}function L2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function S_(n){return L2(n).replace(/%3B/gi,";")}function HK(n){return encodeURI(n)}function _T(n){return L2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function x_(n){return decodeURIComponent(n)}function I2(n){return x_(n.replace(/\+/g,"%20"))}function V2(n){return`${_T(n.path)}${zK(n.parameters)}`}function zK(n){return Object.entries(n).map(([e,t])=>`;${_T(e)}=${_T(t)}`).join("")}function GK(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${S_(t)}=${S_(i)}`).join("&"):`${S_(t)}=${S_(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var qK=/^[^\/()?;#]+/;function dT(n){let e=n.match(qK);return e?e[0]:""}var WK=/^[^\/()?;=#]+/;function KK(n){let e=n.match(WK);return e?e[0]:""}var YK=/^[^=?&#]+/;function QK(n){let e=n.match(YK);return e?e[0]:""}var JK=/^[^&#]+/;function ZK(n){let e=n.match(JK);return e?e[0]:""}var vT=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ie]=new qe(e,t)),r}parseSegment(){let e=dT(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new wa(x_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=KK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=dT(this.remaining);i&&(r=i,this.capture(r))}e[x_(t)]=x_(r)}parseQueryParam(e){let t=QK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=ZK(this.remaining);o&&(r=o,this.capture(r))}let i=I2(t),s=I2(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=dT(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ie);let o=this.parseChildren();t[s??Ie]=Object.keys(o).length===1&&o[Ie]?o[Ie]:new qe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function U2(n){return n.segments.length>0?new qe([],{[Ie]:n}):n}function B2(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=B2(i);if(r===Ie&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new qe(n.segments,e);return XK(t)}function XK(n){if(n.numberOfChildren===1&&n.children[Ie]){let e=n.children[Ie];return new qe(n.segments.concat(e.segments),e.children)}return n}function ml(n){return n instanceof yi}function eY(n,e,t=null,r=null,i=new oo){let s=j2(n);return $2(s,e,t,r,i)}function j2(n){let e;function t(s){let o={};for(let c of s.children){let u=t(c);o[c.outlet]=u}let a=new qe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=U2(r);return e??i}function $2(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return hT(s,s,s,t,r,i);let o=tY(e);if(o.toRoot())return hT(s,s,new qe([],{}),t,r,i);let a=nY(o,s,n),c=a.processChildren?nh(a.segmentGroup,a.index,o.commands):z2(a.segmentGroup,a.index,o.commands);return hT(s,a.segmentGroup,c,t,r,i)}function R_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ih(n){return typeof n=="object"&&n!=null&&n.outlets}function S2(n,e,t){n||="\u0275";let r=new yi;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function hT(n,e,t,r,i,s){let o={};for(let[u,d]of Object.entries(r??{}))o[u]=Array.isArray(d)?d.map(f=>S2(u,f,s)):S2(u,d,s);let a;n===e?a=t:a=H2(n,e,t);let c=U2(B2(a));return new yi(c,o,i)}function H2(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=H2(s,e,t)}),new qe(n.segments,r)}var k_=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&R_(r[0]))throw new B(4003,!1);let i=r.find(ih);if(i&&i!==k2(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function tY(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new k_(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new k_(t,e,r)}var ul=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function nY(n,e,t){if(n.isAbsolute)return new ul(e,!0,0);if(!t)return new ul(e,!1,NaN);if(t.parent===null)return new ul(t,!0,0);let r=R_(n.commands[0])?0:1,i=t.segments.length-1+r;return rY(t,i,n.numberOfDoubleDots)}function rY(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new ul(r,!1,i-s)}function iY(n){return ih(n[0])?n[0].outlets:{[Ie]:n}}function z2(n,e,t){if(n??=new qe([],{}),n.segments.length===0&&n.hasChildren())return nh(n,e,t);let r=sY(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new qe(n.segments.slice(0,r.pathIndex),{});return s.children[Ie]=new qe(n.segments.slice(r.pathIndex),n.children),nh(s,0,i)}else return r.match&&i.length===0?new qe(n.segments,{}):r.match&&!n.hasChildren()?yT(n,e,t):r.match?nh(n,0,i):yT(n,e,t)}function nh(n,e,t){if(t.length===0)return new qe(n.segments,{});{let r=iY(t),i={};if(Object.keys(r).some(s=>s!==Ie)&&n.children[Ie]&&n.numberOfChildren===1&&n.children[Ie].segments.length===0){let s=nh(n.children[Ie],e,t);return new qe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=z2(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new qe(n.segments,i)}}function sY(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(ih(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!T2(c,u,o))return s;r+=2}else{if(!T2(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function yT(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(ih(s)){let c=oY(s.outlets);return new qe(r,c)}if(i===0&&R_(t[0])){let c=n.segments[e];r.push(new wa(c.path,C2(t[0]))),i++;continue}let o=ih(s)?s.outlets[Ie]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&R_(a)?(r.push(new wa(o,C2(a))),i+=2):(r.push(new wa(o,{})),i++)}return new qe(r,{})}function oY(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=yT(new qe([],{}),0,r))}),e}function C2(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function T2(n,e,t){return n==t.path&&vi(e,t.parameters)}var dl="imperative",Gt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Gt||{}),wr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Sa=class extends wr{type=Gt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},bi=class extends wr{urlAfterRedirects;type=Gt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$n=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})($n||{}),sh=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(sh||{}),rs=class extends wr{reason;code;type=Gt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},is=class extends wr{reason;code;type=Gt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},oh=class extends wr{error;target;type=Gt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},P_=class extends wr{urlAfterRedirects;state;type=Gt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bT=class extends wr{urlAfterRedirects;state;type=Gt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ET=class extends wr{urlAfterRedirects;state;shouldActivate;type=Gt.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},wT=class extends wr{urlAfterRedirects;state;type=Gt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},IT=class extends wr{urlAfterRedirects;state;type=Gt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ST=class{route;type=Gt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},CT=class{route;type=Gt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},TT=class{snapshot;type=Gt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},DT=class{snapshot;type=Gt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xT=class{snapshot;type=Gt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},AT=class{snapshot;type=Gt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ah=class{routerEvent;position;anchor;type=Gt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ch=class{},gl=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function aY(n){return!(n instanceof ch)&&!(n instanceof gl)}function cY(n,e){return n.providers&&!n._injector&&(n._injector=pc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Gr(n){return n.outlet||Ie}function lY(n,e){let t=n.filter(r=>Gr(r)===e);return t.push(...n.filter(r=>Gr(r)!==e)),t}function yl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var RT=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return yl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new bl(this.rootInjector)}},bl=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new RT(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(se(wt))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),N_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=kT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=kT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=PT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return PT(e,this._root).map(t=>t.value)}};function kT(n,e){if(n===e.value)return e;for(let t of e.children){let r=kT(n,t);if(r)return r}return null}function PT(n,e){if(n===e.value)return[e];for(let t of e.children){let r=PT(n,t);if(r.length)return r.unshift(e),r}return[]}var ir=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ll(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var M_=class extends N_{snapshot;constructor(e,t){super(e),this.snapshot=t,UT(this,e)}toString(){return this.snapshot.toString()}};function G2(n){let e=uY(n),t=new rt([new wa("",{})]),r=new rt({}),i=new rt({}),s=new rt({}),o=new rt(""),a=new Ca(t,r,s,o,i,Ie,n,e.root);return a.snapshot=e.root,new M_(new ir(a,[]),e)}function uY(n){let e={},t={},r={},s=new hl([],e,r,"",t,Ie,n,null,{});return new F_("",new ir(s,[]))}var Ca=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Oe(u=>u[dh]))??Te(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Oe(e=>pl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Oe(e=>pl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function O_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&W2(i)&&(r.resolve[dh]=i.title),r}var hl=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[dh]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=pl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=pl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},F_=class extends N_{url;constructor(e,t){super(t),this.url=e,UT(this,t)}toString(){return q2(this._root)}};function UT(n,e){e.value._routerState=n,e.children.forEach(t=>UT(n,t))}function q2(n){let e=n.children.length>0?` { ${n.children.map(q2).join(", ")} } `:"";return`${n.value}${e}`}function fT(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),vi(e.params,t.params)||n.paramsSubject.next(t.params),FK(e.url,t.url)||n.urlSubject.next(t.url),vi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function NT(n,e){let t=vi(n.params,e.params)&&BK(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||NT(n.parent,e.parent))}function W2(n){return typeof n.title=="string"||n.title===null}var dY=new Q(""),K2=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ie;activateEvents=new je;deactivateEvents=new je;attachEvents=new je;detachEvents=new je;routerOutletData=Ik();parentContexts=F(bl);location=F(qn);changeDetector=F(At);inputBinder=F(hh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new MT(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ut({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Mr]})}return n})(),MT=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ca?this.route:e===bl?this.childContexts:e===dY?this.outletData:this.parent.get(e,t)}},hh=new Q(""),BT=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Df([r.queryParams,r.params,r.data]).pipe(An(([s,o,a],c)=>(a=O(O(O({},s),o),a),c===0?Te(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=Ak(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Y2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=st({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&te(0,"router-outlet")},dependencies:[K2],encapsulation:2})}return n})();function jT(n){let e=n.children&&n.children.map(jT),t=e?ee(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ie&&(t.component=Y2),t}function hY(n,e,t){let r=lh(n,e._root,t?t._root:void 0);return new M_(r,e)}function lh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=fY(n,e,t);return new ir(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>lh(n,a)),o}}let r=pY(e.value),i=e.children.map(s=>lh(n,s));return new ir(r,i)}}function fY(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return lh(n,r,i);return lh(n,r)})}function pY(n){return new Ca(new rt(n.url),new rt(n.params),new rt(n.queryParams),new rt(n.fragment),new rt(n.data),n.outlet,n.component,n)}var uh=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Q2="ngNavigationCancelingError";function L_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ml(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=J2(!1,$n.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function J2(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Q2]=!0,t.cancellationCode=e,t}function mY(n){return Z2(n)&&ml(n.url)}function Z2(n){return!!n&&n[Q2]}var gY=(n,e,t,r)=>Oe(i=>(new OT(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),OT=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),fT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ll(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ll(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ll(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ll(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new AT(s.value.snapshot))}),e.children.length&&this.forwardEvent(new DT(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(fT(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),fT(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},V_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},fl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function _Y(n,e,t){let r=n._root,i=e?e._root:null;return th(r,i,t,[r.value])}function vY(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function El(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Vy(n)?n:e.get(n):r}function th(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ll(e);return n.children.forEach(o=>{yY(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>rh(a,t.getContext(o),i)),i}function yY(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=bY(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new V_(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?th(n,e,a?a.children:null,r,i):th(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new fl(a.outlet.component,o))}else o&&rh(e,a,i),i.canActivateChecks.push(new V_(r)),s.component?th(n,null,a?a.children:null,r,i):th(n,null,t,r,i);return i}function bY(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ia(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ia(n.url,e.url)||!vi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!NT(n,e)||!vi(n.queryParams,e.queryParams);case"paramsChange":default:return!NT(n,e)}}function rh(n,e,t){let r=ll(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?rh(o,e.children.getContext(s),t):rh(o,null,t):rh(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new fl(e.outlet.component,i)):t.canDeactivateChecks.push(new fl(null,i)):t.canDeactivateChecks.push(new fl(null,i))}function fh(n){return typeof n=="function"}function EY(n){return typeof n=="boolean"}function wY(n){return n&&fh(n.canLoad)}function IY(n){return n&&fh(n.canActivate)}function SY(n){return n&&fh(n.canActivateChild)}function CY(n){return n&&fh(n.canDeactivate)}function TY(n){return n&&fh(n.canMatch)}function X2(n){return n instanceof _o||n?.name==="EmptyError"}var C_=Symbol("INITIAL_VALUE");function _l(){return An(n=>Df(n.map(e=>e.pipe(it(1),Ga(C_)))).pipe(Oe(e=>{for(let t of e)if(t!==!0){if(t===C_)return C_;if(t===!1||DY(t))return t}return!0}),gn(e=>e!==C_),it(1)))}function DY(n){return ml(n)||n instanceof uh}function eV(n){return n.aborted?Te(void 0).pipe(it(1)):new _e(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function tV(n){return Wr(eV(n))}function xY(n,e){return Kt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Te(ee(O({},t),{guardsResult:!0})):AY(o,r,i,n).pipe(Kt(a=>a&&EY(a)?RY(r,s,n,e):Te(a)),Oe(a=>ee(O({},t),{guardsResult:a})))})}function AY(n,e,t,r){return ze(n).pipe(Kt(i=>OY(i.component,i.route,t,e,r)),Ti(i=>i!==!0,!0))}function RY(n,e,t,r){return ze(e).pipe(za(i=>$a(PY(i.route.parent,r),kY(i.route,r),MY(n,i.path,t),NY(n,i.route,t))),Ti(i=>i!==!0,!0))}function kY(n,e){return n!==null&&e&&e(new xT(n)),Te(!0)}function PY(n,e){return n!==null&&e&&e(new TT(n)),Te(!0)}function NY(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Te(!0);let i=r.map(s=>Jl(()=>{let o=yl(e)??t,a=El(s,o),c=IY(a)?a.canActivate(e,n):Rt(o,()=>a(e,n));return Ta(c).pipe(Ti())}));return Te(i).pipe(_l())}function MY(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>vY(o)).filter(o=>o!==null).map(o=>Jl(()=>{let a=o.guards.map(c=>{let u=yl(o.node)??t,d=El(c,u),f=SY(d)?d.canActivateChild(r,n):Rt(u,()=>d(r,n));return Ta(f).pipe(Ti())});return Te(a).pipe(_l())}));return Te(s).pipe(_l())}function OY(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Te(!0);let o=s.map(a=>{let c=yl(e)??i,u=El(a,c),d=CY(u)?u.canDeactivate(n,e,t,r):Rt(c,()=>u(n,e,t,r));return Ta(d).pipe(Ti())});return Te(o).pipe(_l())}function FY(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return Te(!0);let o=s.map(a=>{let c=El(a,n),u=wY(c)?c.canLoad(e,t):Rt(n,()=>c(e,t)),d=Ta(u);return i?d.pipe(tV(i)):d});return Te(o).pipe(_l(),nV(r))}function nV(n){return cy(Yt(e=>{if(typeof e!="boolean")throw L_(n,e)}),Oe(e=>e===!0))}function LY(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return Te(!0);let o=s.map(a=>{let c=El(a,n),u=TY(c)?c.canMatch(e,t):Rt(n,()=>c(e,t)),d=Ta(u);return i?d.pipe(tV(i)):d});return Te(o).pipe(_l(),nV(r))}var Ea=class rV extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,rV.prototype)}},FT=class iV extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,iV.prototype)}};function VY(n){throw new B(4e3,!1)}function UY(n){throw J2(!1,$n.GuardRejected)}var BY=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Ie])throw VY(`${e.redirectTo}`);i=i.children[Ie]}}async applyRedirectCommands(e,t,r,i,s){let o=await jY(t,i,s);if(o instanceof yi)throw new FT(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new FT(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new yi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new qe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function jY(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:u,data:d,title:f}=e;return A_(Ta(Rt(t,()=>r({params:u,data:d,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:f}))))}var LT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $Y(n,e,t,r,i,s){let o=sV(n,e,t);return o.matched?(r=cY(e,r),LY(r,e,t,i,s).pipe(Oe(a=>a===!0?o:O({},LT)))):Te(o)}function sV(n,e,t){if(e.path==="**")return HY(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},LT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||OK)(t,n,e);if(!i)return O({},LT);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?O(O({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function HY(n){return{matched:!0,parameters:n.length>0?k2(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function D2(n,e,t,r){return t.length>0&&qY(n,t,r)?{segmentGroup:new qe(e,GY(r,new qe(t,n.children))),slicedSegments:[]}:t.length===0&&WY(n,t,r)?{segmentGroup:new qe(n.segments,zY(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new qe(n.segments,n.children),slicedSegments:t}}function zY(n,e,t,r){let i={};for(let s of t)if(U_(n,e,s)&&!r[Gr(s)]){let o=new qe([],{});i[Gr(s)]=o}return O(O({},r),i)}function GY(n,e){let t={};t[Ie]=e;for(let r of n)if(r.path===""&&Gr(r)!==Ie){let i=new qe([],{});t[Gr(r)]=i}return t}function qY(n,e,t){return t.some(r=>U_(n,e,r)&&Gr(r)!==Ie)}function WY(n,e,t){return t.some(r=>U_(n,e,r))}function U_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function KY(n,e,t){return e.length===0&&!n.children[t]}var YY=class{};async function QY(n,e,t,r,i,s,o="emptyOnly",a){return new ZY(n,e,t,r,i,o,s,a).recognize()}var JY=31,ZY=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new BY(this.urlSerializer,this.urlTree)}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}async recognize(){let e=D2(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new ir(r,t),s=new F_("",i),o=eY(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new hl([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ie,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Ie,t),rootSnapshot:t}}catch(r){if(r instanceof FT)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ea?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof ir?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let u=r.children[c],d=lY(t,c),f=await this.processSegmentGroup(e,d,u,c,i);o.push(...f)}let a=oV(o);return XY(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(u){if(u instanceof Ea||X2(u))continue;throw u}if(KY(r,i,s))return new YY;throw new Ea(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(Gr(r)!==o&&(o===Ie||!U_(i,s,r)))throw new Ea(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new Ea(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:_}=sV(t,i,s);if(!c)throw new Ea(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>JY&&(this.allowRedirects=!1));let b=new hl(s,u,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,x2(i),Gr(i),i.component??i._loadedComponent??null,i,A2(i)),I=O_(b,a,this.paramsInheritanceStrategy);if(b.params=Object.freeze(I.params),b.data=Object.freeze(I.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let k=await this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,b,e),N=await this.applyRedirects.lineralizeSegments(i,k);return this.processSegment(e,r,t,N.concat(_),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await A_($Y(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new Ea(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:_}=a,b=new hl(f,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,x2(r),Gr(r),r.component??r._loadedComponent??null,r,A2(r)),I=O_(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(I.params),b.data=Object.freeze(I.data);let{segmentGroup:k,slicedSegments:N}=D2(t,f,_,c);if(N.length===0&&k.hasChildren()){let ne=await this.processChildren(u,c,k,b);return new ir(b,ne)}if(c.length===0&&N.length===0)return new ir(b,[]);let j=Gr(r)===s,Y=await this.processSegment(u,c,k,N,j?Ie:s,!0,b);return new ir(b,Y instanceof ir?[Y]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await A_(FY(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw UY(t)}return{routes:[],injector:e}}};function XY(n){n.sort((e,t)=>e.value.outlet===Ie?-1:t.value.outlet===Ie?1:e.value.outlet.localeCompare(t.value.outlet))}function eQ(n){let e=n.value.routeConfig;return e&&e.path===""}function oV(n){let e=[],t=new Set;for(let r of n){if(!eQ(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=oV(r.children);e.push(new ir(r.value,i))}return e.filter(r=>!t.has(r))}function x2(n){return n.data||{}}function A2(n){return n.resolve||{}}var tQ=new Q("",{factory:()=>QY});function nQ(n,e,t,r,i,s,o){let a=n.get(tQ);return Kt(c=>Te(c).pipe(An(u=>a(n,e,t,r,u.extractedUrl,i,s,o)),Oe(({state:u,tree:d})=>ee(O({},c),{targetSnapshot:u,urlAfterRedirects:d}))))}function rQ(n,e){return Kt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Te(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of aV(c))o.add(u);let a=0;return ze(o).pipe(za(c=>s.has(c)?iQ(c,r,n,e):(c.data=O_(c,c.parent,n).resolve,Te(void 0))),Yt(()=>a++),Rf(1),Kt(c=>a===o.size?Te(t):sn))})}function aV(n){let e=n.children.map(t=>aV(t)).flat();return[n,...e]}function iQ(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!W2(i)&&(s[dh]=i.title),Jl(()=>(n.data=O_(n,n.parent,t).resolve,sQ(s,n,e,r).pipe(Oe(o=>(n._resolvedData=o,n.data=O(O({},n.data),o),null)))))}function sQ(n,e,t,r){let i=gT(n);if(i.length===0)return Te({});let s={};return ze(i).pipe(Kt(o=>oQ(n[o],e,t,r).pipe(Ti(),Yt(a=>{if(a instanceof uh)throw L_(new oo,a);s[o]=a}))),Rf(1),Oe(()=>s),Ha(o=>X2(o)?sn:my(o)))}function oQ(n,e,t,r){let i=yl(e)??r,s=El(n,i),o=s.resolve?s.resolve(e,t):Rt(i,()=>s(e,t));return Ta(o)}function pT(n){return An(e=>{let t=n(e);return t?ze(t).pipe(Oe(()=>e)):Te(e)})}var cV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ie);return r}getResolvedTitleForRoute(t){return t.data[dh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(aQ),providedIn:"root"})}return n})(),aQ=(()=>{class n extends cV{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(se(uP))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wl=new Q("",{factory:()=>({})}),ph=new Q(""),B_=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=F(Gb);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await P2(Rt(t,()=>r.loadComponent())),o=await uV(lV(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await cQ(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function cQ(n,e,t,r){let i=await P2(Rt(t,()=>n.loadChildren())),s=await uV(lV(i)),o;s instanceof Fp||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,u=!1;return Array.isArray(o)?(c=o,u=!0):(a=o.create(t).injector,c=a.get(ph,[],{optional:!0,self:!0}).flat()),{routes:c.map(jT),injector:a}}function lQ(n){return n&&typeof n=="object"&&"default"in n}function lV(n){return lQ(n)?n.default:n}async function uV(n){return n}var $T=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(uQ),providedIn:"root"})}return n})(),uQ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HT=new Q(""),zT=new Q("");function dV(n,e,t){let r=n.get(zT),i=n.get(et);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),dQ(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&Rt(n,()=>c({transition:a,from:e,to:t})),o}function dQ(n){return new Promise(e=>{Fo({read:()=>setTimeout(e)},{injector:n})})}var hQ=()=>{},GT=new Q(""),j_=(()=>{class n{currentNavigation=Jt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Jt(null);events=new be;transitionAbortWithErrorSubject=new be;configLoader=F(B_);environmentInjector=F(wt);destroyRef=F(dr);urlSerializer=F(vl);rootContexts=F(bl);location=F(Ls);inputBindingEnabled=F(hh,{optional:!0})!==null;titleStrategy=F(cV);options=F(wl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=F($T);createViewTransition=F(HT,{optional:!0});navigationErrorHandler=F(GT,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Te(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new ST(i)),r=i=>this.events.next(new CT(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;xt(()=>{this.transitions?.next(ee(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new rt(null),this.transitions.pipe(gn(r=>r!==null),An(r=>{let i=!1,s=new AbortController;return Te(r).pipe(An(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",$n.SupersededByNewNavigation),sn;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?ee(O({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new is(o.id,this.urlSerializer.serialize(o.rawUrl),"",sh.IgnoredSameUrlNavigation)),o.resolve(!1),sn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Te(o).pipe(An(d=>(this.events.next(new Sa(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?sn:Promise.resolve(d))),nQ(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Yt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(_=>(_.finalUrl=d.urlAfterRedirects,_));let f=new P_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:f,source:_,restoredState:b,extras:I}=o,k=new Sa(d,this.urlSerializer.serialize(f),_,b);this.events.next(k);let N=G2(this.rootComponentType).snapshot;return this.currentTransition=r=ee(O({},o),{targetSnapshot:N,urlAfterRedirects:f,extras:ee(O({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(j=>(j.finalUrl=f,j)),Te(r)}else return this.events.next(new is(o.id,this.urlSerializer.serialize(o.extractedUrl),"",sh.IgnoredByUrlHandlingStrategy)),o.resolve(!1),sn}),Yt(o=>{let a=new bT(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Oe(o=>(this.currentTransition=r=ee(O({},o),{guards:_Y(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),xY(this.environmentInjector,o=>this.events.next(o)),Yt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw L_(this.urlSerializer,o.guardsResult);let a=new ET(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),gn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",$n.GuardRejected),!1)),pT(o=>{if(o.guards.canActivateChecks.length!==0)return Te(o).pipe(Yt(a=>{let c=new wT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),An(a=>{let c=!1;return Te(a).pipe(rQ(this.paramsInheritanceStrategy,this.environmentInjector),Yt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",$n.NoDataFromResolver)}}))}),Yt(a=>{let c=new IT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),pT(o=>{let a=u=>{let d=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let f=yl(u)??this.environmentInjector;d.push(this.configLoader.loadComponent(f,u.routeConfig).then(_=>{u.component=_}))}for(let f of u.children)d.push(...a(f));return d},c=a(o.targetSnapshot.root);return c.length===0?Te(o):ze(Promise.all(c).then(()=>o))}),pT(()=>this.afterPreactivation()),An(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?ze(c).pipe(Oe(()=>r)):Te(r)}),Oe(o=>{let a=hY(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ee(O({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Yt(()=>{this.events.next(new ch)}),gY(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),it(1),Wr(eV(s.signal).pipe(gn(()=>!i&&!r.targetRouterState),Yt(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",$n.Aborted)}))),Yt({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=hQ,a)),this.lastSuccessfulNavigation.set(xt(this.currentNavigation)),this.events.next(new bi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Wr(this.transitionAbortWithErrorSubject.pipe(Yt(o=>{throw o}))),vy(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",$n.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ha(o=>{if(this.destroyed)return r.resolve(!1),sn;if(i=!0,Z2(o))this.events.next(new rs(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),mY(o)?this.events.next(new gl(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new oh(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=Rt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof uh){let{message:u,cancellationCode:d}=L_(this.urlSerializer,c);this.events.next(new rs(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new gl(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return sn}))}))}cancelNavigationTransition(t,r,i){let s=new rs(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=xt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fQ(n){return n!==dl}var pQ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(mQ),providedIn:"root"})}return n})(),VT=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},mQ=(()=>{class n extends VT{static \u0275fac=(()=>{let t;return function(i){return(t||(t=No(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qT=(()=>{class n{urlSerializer=F(vl);options=F(wl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=F(Ls);urlHandlingStrategy=F($T);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new yi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof yi?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=G2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(hV),providedIn:"root"})}return n})(),hV=(()=>{class n extends qT{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Sa?this.updateStateMemento():t instanceof is?this.commitTransition(r):t instanceof P_?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ch?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof rs&&t.code!==$n.SupersededByNewNavigation&&t.code!==$n.Redirect?this.restoreHistory(r):t instanceof oh?this.restoreHistory(r,!0):t instanceof bi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=O(O({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=O(O({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=No(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WT(n,e){n.events.pipe(gn(t=>t instanceof bi||t instanceof rs||t instanceof oh||t instanceof is),Oe(t=>t instanceof bi||t instanceof is?0:(t instanceof rs?t.code===$n.Redirect||t.code===$n.SupersededByNewNavigation:!1)?2:1),gn(t=>t!==2),it(1)).subscribe(()=>{e()})}var gQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_Q={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Da=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=F(Lb);stateManager=F(qT);options=F(wl,{optional:!0})||{};pendingTasks=F(ki);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=F(j_);urlSerializer=F(vl);location=F(Ls);urlHandlingStrategy=F($T);injector=F(wt);_events=new be;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=F(pQ);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=F(ph,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!F(hh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Je;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=xt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof rs&&r.code!==$n.Redirect&&r.code!==$n.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof bi)this.navigated=!0;else if(r instanceof gl){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||fQ(i.source)},o);this.scheduleNavigation(a,dl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}aY(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),dl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=O({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(hr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return xt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(jT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=O(O({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let _=i?i.snapshot:this.routerState.snapshot.root;f=j2(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return $2(f,t,d,u??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ml(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,dl,null,r)}navigate(t,r={skipLocationChange:!1}){return vQ(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Is(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},gQ):r===!1?i=O({},_Q):i=r,ml(t))return w2(this.currentUrlTree,t,i);let s=this.parseUrl(t);return w2(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((f,_)=>{a=f,c=_});let d=this.pendingTasks.add();return WT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vQ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new B(4008,!1)}var mh=class{};var fV=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(gn(t=>t instanceof bi),za(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=pc(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ze(i).pipe(_s())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=ze(this.loader.loadChildren(t,r)):i=Te(null);let s=i.pipe(Kt(o=>o===null?Te(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(t,r);return ze([s,o]).pipe(_s())}else return s})}static \u0275fac=function(r){return new(r||n)(se(Da),se(wt),se(mh),se(B_))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pV=new Q(""),yQ=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=dl;restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Sa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bi?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof is&&t.code===sh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof ah))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ah(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){kb()};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function bQ(){return F(Da).routerState.root}function gh(n,e){return{\u0275kind:n,\u0275providers:e}}function EQ(){let n=F(We);return e=>{let t=n.get(fr);if(e!==t.components[0])return;let r=n.get(Da),i=n.get(mV);n.get(YT)===1&&r.initialNavigation(),n.get(vV,null,{optional:!0})?.setUpPreloading(),n.get(pV,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var mV=new Q("",{factory:()=>new be}),YT=new Q("",{factory:()=>1});function gV(){let n=[{provide:gb,useValue:!0},{provide:YT,useValue:0},Bp(()=>{let e=F(We);return e.get(rE,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Da),s=e.get(mV);WT(i,()=>{r(!0)}),e.get(j_).afterPreactivation=()=>(r(!0),s.closed?Te(void 0):s),i.initialNavigation()}))})];return gh(2,n)}function _V(){let n=[Bp(()=>{F(Da).setUpLocationChangeListener()}),{provide:YT,useValue:2}];return gh(3,n)}var vV=new Q("");function yV(n){return gh(0,[{provide:vV,useExisting:fV},{provide:mh,useExisting:n}])}function bV(){return gh(8,[BT,{provide:hh,useExisting:BT}])}function EV(n){Oo("NgRouterViewTransitions");let e=[{provide:HT,useValue:dV},{provide:zT,useValue:O({skipNextTransition:!!n?.skipInitialTransition},n)}];return gh(9,e)}var wV=[Ls,{provide:vl,useClass:oo},Da,bl,{provide:Ca,useFactory:bQ},B_,[]],$_=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[wV,[],{provide:ph,multi:!0,useValue:t},[],r?.errorHandler?{provide:GT,useValue:r.errorHandler}:[],{provide:wl,useValue:r||{}},r?.useHash?IQ():SQ(),wQ(),r?.preloadingStrategy?yV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?CQ(r):[],r?.bindToComponentInputs?bV().\u0275providers:[],r?.enableViewTransitions?EV().\u0275providers:[],TQ()]}}static forChild(t){return{ngModule:n,providers:[{provide:ph,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=gt({type:n});static \u0275inj=ht({})}return n})();function wQ(){return{provide:pV,useFactory:()=>{let n=F(nP),e=F(Me),t=F(wl),r=F(j_),i=F(vl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new yQ(i,r,n,e,t)}}}function IQ(){return{provide:Li,useClass:hE}}function SQ(){return{provide:Li,useClass:Jp}}function CQ(n){return[n.initialNavigation==="disabled"?_V().\u0275providers:[],n.initialNavigation==="enabledBlocking"?gV().\u0275providers:[]]}var KT=new Q("");function TQ(){return[{provide:KT,useFactory:EQ},{provide:jp,multi:!0,useExisting:KT}]}var xQ=[],H_=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=gt({type:n});static \u0275inj=ht({imports:[$_.forRoot(xQ),$_]})};var z_=(s=>(s.CASINO="CASINO",s.FREELANCE_DEV="FREELANCE_DEV",s.WEB_AGENCY="WEB_AGENCY",s.FOODTRUCK="FOODTRUCK",s.FACTORY="FACTORY",s))(z_||{});var G_=(i=>(i.CHAIR="CHAIR",i.SCREEN="SCREEN",i.COFFEE="COFFEE",i.PC="PC",i))(G_||{}),_h=(u=>(u.BUN="BUN",u.STEAK="STEAK",u.CHEESE="CHEESE",u.SALAD="SALAD",u.TOMATO="TOMATO",u.SAUCE="SAUCE",u.ONION="ONION",u.PICKLE="PICKLE",u.BACON="BACON",u))(_h||{});var vh=[{id:"DEFAULT",name:"VS Code Dark",cost:0,bgClass:"bg-[#1e1e1e]",textClass:"text-slate-200",accentClass:"text-blue-400",cursorClass:"bg-blue-500",borderClass:"border-slate-700",successClass:"text-green-400"},{id:"MATRIX",name:"The Matrix",cost:2500,bgClass:"bg-black",textClass:"text-green-700 font-mono",accentClass:"text-green-400",cursorClass:"bg-green-500",borderClass:"border-green-800",successClass:"text-green-400 neon-glow"},{id:"DRACULA",name:"Dracula",cost:5e3,bgClass:"bg-[#282a36]",textClass:"text-[#f8f8f2]",accentClass:"text-[#bd93f9]",cursorClass:"bg-[#bd93f9]",borderClass:"border-[#6272a4]",successClass:"text-[#ff79c6] drop-shadow-md"},{id:"SOLARIZED",name:"Solarized Light",cost:1e4,bgClass:"bg-[#fdf6e3]",textClass:"text-[#657b83]",accentClass:"text-[#b58900]",cursorClass:"bg-[#d33682]",borderClass:"border-[#93a1a1]",successClass:"text-[#d33682] font-bold"}];var Ei=class n{constructor(e,t){this.auth=e;this.firestore=t;this.authInstance=e,this.user$=xO(this.auth),this.user$.subscribe(r=>{this.currentUserId=r?.uid||null,this.currentUsername=r?.displayName||"Anonyme",r&&(console.log("\u2705 Connect\xE9:",r.uid),this.listenToInvites(r.uid))}),this.listenToPublicEvents()}user$;currentUserId=null;currentUsername="Anonyme";authInstance;publicEvents$=new rt(["Bienvenue sur JEUB2 Online \u2022 En attente de gagnants..."]);invites$=new rt([]);activeGame$=new rt(null);async createMultiplayerGame(e,t){if(!this.currentUserId)throw new Error("Not connected");let r=[{id:0,userId:"BOT",username:"Bot",avatar:"\u{1F916}",hand:[],score:0,bet:0,status:"EMPTY"},{id:1,userId:this.currentUserId,username:e,avatar:"\u{1F451}",hand:[],score:0,bet:0,status:"WAITING_BET"},{id:2,userId:t,username:"Invit\xE9",avatar:"\u{1F464}",hand:[],score:0,bet:0,status:"WAITING_BET"}],i={id:"",hostId:this.currentUserId,hostName:e,guestId:t,guestName:"Invit\xE9",deck:[],hostHand:[],guestHand:[],dealerHand:[],dealerScore:0,hostScore:0,guestScore:0,betAmount:0,winner:null,status:"WAITING",turn:"HOST",seats:r,turnIndex:1,phase:"LOBBY",timestamp:Date.now()};return(await ol(Er(this.firestore,"active_games"),i)).id}joinGameRoom(e){console.log("Rejoindre la room :",e);let t=_i(this.firestore,"active_games",e);w_(t,r=>{if(r.exists()){let i=r.data(),s=ee(O({},i),{id:r.id});this.activeGame$.next(s)}else this.activeGame$.next(null)}),this.currentUserId&&lT(t).then(r=>{if(r.exists()){let i=r.data();if(i.guestId===this.currentUserId&&i.seats[2].userId!==this.currentUserId){let s=[...i.seats];s[2].userId=this.currentUserId,s[2].username=this.currentUsername,s[2].avatar="\u{1F464}",s[2].status="READY",uT(t,{seats:s})}}})}async leaveGameRoom(e,t){if(!e)return;let r=_i(this.firestore,"active_games",e);try{await I_(this.firestore,async i=>{let s=await i.get(r);if(!s.exists())return;let a=[...s.data().seats];a[t]&&(a[t].status="LEFT",a[t].avatar="\u{1F6AA}"),i.update(r,{seats:a})})}catch(i){console.error("Erreur leaveGameRoom",i)}this.activeGame$.next(null)}async updatePlayerBet(e,t,r,i=!1){if(!e)return;let s=_i(this.firestore,"active_games",e);try{await I_(this.firestore,async o=>{let a=await o.get(s);if(!a.exists())return;let u=[...a.data().seats];u[t]&&(u[t].bet=r,(!u[t].username||u[t].username==="Invit\xE9")&&(u[t].username=this.currentUsername||"Joueur"),i?u[t].status="READY_TO_PLAY":u[t].status==="READY_TO_PLAY"&&(u[t].status="BETTING")),o.update(s,{seats:u})})}catch(o){console.error("Erreur updatePlayerBet",o)}}async updateGameState(e,t){await uT(_i(this.firestore,"active_games",e),t)}leaveGame(){this.activeGame$.next(null)}async sendInvite(e,t,r,i,s){this.currentUserId&&await ol(Er(this.firestore,"invites"),{fromId:this.currentUserId,fromName:s,toId:e,gameId:r,amount:i,timestamp:Date.now(),gameType:"BLACKJACK"})}async acceptInvite(e){return e.id&&await cT(_i(this.firestore,"invites",e.id)),e.gameId}async declineInvite(e){e.id&&await cT(_i(this.firestore,"invites",e.id))}listenToInvites(e){let t=ba(Er(this.firestore,"invites"),b2("toId","==",e));w_(t,r=>{let i=r.docs.map(s=>O({id:s.id},s.data()));this.invites$.next(i)})}async getOnlinePlayers(){try{let e=ba(Er(this.firestore,"players"),cl("lastUpdated","desc"),al(20));return(await Xd(e)).docs.map(r=>O({id:r.id},r.data())).filter(r=>r.username&&r.id!==this.currentUserId).map(r=>({id:r.id,username:r.username,title:r.user?.title||"Joueur",money:r.money,avatarId:r.user?.avatarId||"\u{1F464}"}))}catch{return[]}}listenToPublicEvents(){let e=ba(Er(this.firestore,"public_events"),cl("timestamp","desc"),al(10));w_(e,t=>{let r=t.docs.map(i=>i.data()).map(i=>i.text);r.length>0&&this.publicEvents$.next(r)})}async logPublicEvent(e,t="INFO"){try{await ol(Er(this.firestore,"public_events"),{text:e,type:t,timestamp:Date.now()})}catch{}}async loginGoogle(){let e=new AI;return e.setCustomParameters({prompt:"select_account"}),await RO(this.auth,e)}async logout(){return await kO(this.auth)}async saveProgress(e){if(!this.currentUserId)return;let t=_i(this.firestore,"players",this.currentUserId);try{await y2(t,{username:e.user?.username||"Anonyme",money:e.money,gems:e.gems||0,day:e.day,timeOfDay:e.timeOfDay,hasCompletedIntro:e.hasCompletedIntro,user:e.user,companies:e.companies,employees:e.employees||[],foodtruckUpgrades:e.foodtruckUpgrades,freelanceUpgrades:e.freelanceUpgrades,foodtruckMastery:e.foodtruckMastery,dailyStats:e.dailyStats,achievements:e.achievements,leaderboardStats:{money:e.money,username:e.user?.username||"Anonyme",creationDate:e.user?.creationDate||Date.now(),stats:e.stats||{}},lastUpdated:Date.now()},{merge:!0})}catch{}}async loadProgress(){if(!this.currentUserId)return null;try{let e=await lT(_i(this.firestore,"players",this.currentUserId));return e.exists()?e.data():null}catch{return null}}getLeaderboard(){let e=ba(Er(this.firestore,"players"),cl("leaderboardStats.money","desc"),al(50));return ze(Xd(e)).pipe(Oe(t=>t.docs.map(r=>O({id:r.id},r.data().leaderboardStats))))}getHoldings(){let e=ba(Er(this.firestore,"holdings"),cl("totalValuation","desc"),al(20));return ze(Xd(e)).pipe(Oe(t=>t.docs.map(r=>O({id:r.id},r.data()))))}async createHolding(e,t){if(!this.currentUserId)return;let r={id:"",name:e,leaderName:t,totalValuation:0,membersCount:1,icon:"\u{1F3E2}"};await ol(Er(this.firestore,"holdings"),r)}getMarketItems(){let e=ba(Er(this.firestore,"market"),cl("timestamp","desc"),al(50));return ze(Xd(e)).pipe(Oe(t=>t.docs.map(r=>O({id:r.id},r.data()))))}async sellItem(e){await ol(Er(this.firestore,"market"),e)}async buyItem(e){if(!e.id)return"ERROR";let t=_i(this.firestore,"market",e.id);try{return await I_(this.firestore,async r=>{if(!(await r.get(t)).exists())throw"SOLD";r.delete(t)}),"SUCCESS"}catch{return"SOLD"}}static \u0275fac=function(t){return new(t||n)(se(oa),se(ya))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var QT={DEV_JUNIOR:{role:"DEV_JUNIOR",name:"Stagiaire",baseCost:2e3,costFactor:1.5,baseDailySalary:100,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.2,description:"Code lentement"},DEV_SENIOR:{role:"DEV_SENIOR",name:"Lead Dev",baseCost:1e4,costFactor:1.6,baseDailySalary:800,salaryFactor:1.3,baseEfficiency:4,efficiencyFactor:1.4,description:"Code tr\xE8s vite + Bonus"},COOK:{role:"COOK",name:"Cuisinier",baseCost:500,costFactor:1.55,baseDailySalary:50,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.1,description:"Cuisine"},SERVER:{role:"SERVER",name:"Serveur",baseCost:300,costFactor:1.6,baseDailySalary:40,salaryFactor:1.15,baseEfficiency:5,efficiencyFactor:1.05,description:"Service"},CASHIER:{role:"CASHIER",name:"Caissier",baseCost:200,costFactor:1.4,baseDailySalary:30,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Caisse"},STOCK_MANAGER:{role:"STOCK_MANAGER",name:"Stock",baseCost:500,costFactor:1.4,baseDailySalary:60,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Stock"},WORKER:{role:"WORKER",name:"Ouvrier",baseCost:2e3,costFactor:1.4,baseDailySalary:200,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Prod"},LINE_MANAGER:{role:"LINE_MANAGER",name:"Chef",baseCost:1e4,costFactor:1.5,baseDailySalary:1e3,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.2,description:"Supervision"}},qt=class n{constructor(e){this.firebaseService=e;this.loadLocalState(),vs(this.TICK_RATE_MS).subscribe(()=>this.gameLoop()),vs(3e4).subscribe(()=>this.saveToCloud()),this.firebaseService.user$.subscribe(t=>{t?this.loadCloudDataForUser(t):this.isLoading$.next(!1)})}SAVE_KEY="JEUB2_SAVE_V3_ONLINE";TICK_RATE_MS=1e3;HOURS_PER_TICK=1/60;dayEnded$=new be;isLoading$=new rt(!0);defaultState={user:{username:"Joueur",title:"D\xE9butant",creationDate:Date.now(),avatarId:"\u{1F468}\u200D\u{1F4BC}"},money:2e3,gems:0,totalMoneyEarned:0,hasCompletedIntro:!1,tutoFlags:{foodtruckIntroSeen:!1},day:1,timeOfDay:6,companies:[this.createCompany("3","FOODTRUCK","Burger Truck",!0,0),this.createCompany("1","CASINO","Casino Royal",!1,1e3),this.createCompany("2","FREELANCE_DEV","Agence Web",!1,500),this.createCompany("4","FACTORY","Usine Tesla",!1,2e4)],employees:[],foodtruckMastery:this.initFoodtruckMastery(),foodtruckUpgrades:{grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:["BUN","STEAK"],maxServiceReached:1,hasKeyboard:!1},freelanceUpgrades:{chairLevel:0,screenLevel:0,coffeeLevel:0,pcLevel:0,bossBeaten:0,contractsCompleted:0,ownedThemes:["DEFAULT"],activeThemeId:"DEFAULT"},dailyStats:{revenue:0,expenses:0,customersServed:0,day:1},quests:[],achievements:[],activeEvents:[],lastSavedAt:Date.now(),lastOnlineAt:Date.now(),stats:{foodtruckIncome:0,burgersServed:0,bestServiceCombo:0,fastestBurgerMs:0,freelanceIncome:0,maxWpm:0,totalCharsTyped:0,factoryIncome:0,itemsProduced:0,blackjackIncome:0,handsPlayed:0,highestBet:0,biggestWin:0,totalPlayTimeMinutes:0}};state$=new rt(this.defaultState);gameState$=this.state$.asObservable();createCompany(e,t,r,i,s){return{id:e,type:t,name:r,unlocked:i,unlockCost:s,level:1,baseRevenuePerAction:10,revenuePerSecond:0,costPerSecond:0,netProfitPerSecond:0,employees:[]}}async loadCloudDataForUser(e){this.isLoading$.next(!0);let t=await this.firebaseService.loadProgress();if(t){t.user&&(t.user.username==="Entrepreneur"||t.user.username==="Anonyme")&&e.displayName&&(t.user.username=e.displayName,this.updateUsername(e.displayName));let r=this.removeDuplicateCompanies(t.companies||[]),i=ee(O(O({},this.defaultState),t),{companies:r});i.stats||(i.stats=this.defaultState.stats),this.state$.next(i),this.saveLocalState()}this.isLoading$.next(!1)}removeDuplicateCompanies(e){let t=new Set,r=e.filter(i=>{let s=t.has(i.id);return t.add(i.id),!s});return this.defaultState.companies.forEach(i=>{r.find(s=>s.id===i.id)||r.push(i)}),r.sort((i,s)=>parseInt(i.id)-parseInt(s.id))}async checkIfUserHasSave(e){return!!await this.firebaseService.loadProgress()}async initializeNewUser(e,t){let r=JSON.parse(JSON.stringify(this.defaultState));r.user={username:t,title:"D\xE9butant",creationDate:Date.now(),avatarId:"\u{1F468}\u200D\u{1F4BC}"},r.lastSavedAt=Date.now(),this.state$.next(r),this.saveLocalState(),await this.firebaseService.saveProgress(r)}unlockCompany(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({companies:r.companies.map(i=>i.id===e?ee(O({},i),{unlocked:!0}):i)}),this.saveLocalState(),this.saveToCloud()}}updateUsername(e){let t=this.state$.getValue();this.updateState({user:ee(O({},t.user),{username:e})}),this.saveToCloud()}addMoney(e){let t=this.state$.getValue(),r=O({},t.dailyStats||{day:t.day,revenue:0,expenses:0,customersServed:0});e>0&&(r.revenue+=e),this.updateState({money:t.money+e,totalMoneyEarned:e>0?t.totalMoneyEarned+e:t.totalMoneyEarned,dailyStats:r})}spendMoney(e){let t=this.state$.getValue();return t.money>=e?(this.updateState({money:t.money-e}),!0):!1}gameLoop(){let e=this.state$.getValue();if(!e.hasCompletedIntro)return;let t=e.timeOfDay+this.HOURS_PER_TICK,r=e.day,i=O({},e.dailyStats);if(t>=24){t=0;let s=0;e.companies.forEach(o=>{o.employees.forEach(a=>{s+=a.dailySalary})}),s>0&&(this.addMoney(-s),i.expenses+=s),this.dayEnded$.next(ee(O({},i),{day:e.day})),r++,i={day:r,revenue:0,expenses:0,customersServed:0}}this.updateState({day:r,timeOfDay:t,dailyStats:i})}completeIntro(){let t=this.state$.getValue().companies.map(r=>r.id==="3"?ee(O({},r),{unlocked:!0}):r);this.updateState({hasCompletedIntro:!0,money:2e3,companies:t}),this.saveToCloud()}initFoodtruckMastery(){let e={};return Object.values(_h).forEach(t=>e[t]={level:1,xp:0,xpMax:5}),e}updateState(e){this.state$.next(O(O({},this.state$.getValue()),e))}saveLocalState(){localStorage.setItem(this.SAVE_KEY,JSON.stringify(this.state$.getValue()))}loadLocalState(){let e=localStorage.getItem(this.SAVE_KEY);if(e)try{this.state$.next(O(O({},this.defaultState),JSON.parse(e))),this.isLoading$.next(!1)}catch{}}async saveToCloud(){let e=this.state$.getValue(),t=this.firebaseService.authInstance.currentUser;!t||t.isAnonymous&&!e.hasCompletedIntro||e.user?.username==="Entrepreneur"||e.user?.username==="Anonyme"||await this.firebaseService.saveProgress(e)}getNextHireCost(e,t){let r=this.state$.getValue().companies.find(i=>i.id===e);return r?Math.floor(QT[t].baseCost*Math.pow(1.5,r.employees.filter(i=>i.role===t).length)):0}hireEmployee(e,t){let r=this.getNextHireCost(e,t);if(this.spendMoney(r)){let i=this.state$.getValue(),s={id:Math.random().toString(36).substr(2,9),role:t,hiredAt:Date.now(),dailySalary:QT[t].baseDailySalary,efficiency:1,isPaused:!1};this.updateState({companies:i.companies.map(o=>o.id===e?ee(O({},o),{employees:[...o.employees,s]}):o)}),this.saveLocalState()}}buySetupUpgrade(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=O({},r.freelanceUpgrades);switch(e){case"CHAIR":i.chairLevel=1;break;case"SCREEN":i.screenLevel=1;break;case"COFFEE":i.coffeeLevel=1;break;case"PC":i.pcLevel=1;break}this.updateState({freelanceUpgrades:i}),this.saveLocalState()}}buyFreelanceTheme(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({freelanceUpgrades:ee(O({},r.freelanceUpgrades),{ownedThemes:[...r.freelanceUpgrades.ownedThemes,e]})}),this.saveLocalState()}}setFreelanceTheme(e){let t=this.state$.getValue();this.updateState({freelanceUpgrades:ee(O({},t.freelanceUpgrades),{activeThemeId:e})}),this.saveLocalState()}buyFoodtruckUpgrade(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=O({},r.foodtruckUpgrades);e==="grill"?i.grillLevel++:e==="marketing"?i.marketingLevel++:i.serviceLevel++,this.updateState({foodtruckUpgrades:i}),this.saveLocalState()}}unlockIngredient(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({foodtruckUpgrades:ee(O({},r.foodtruckUpgrades),{unlockedIngredients:[...r.foodtruckUpgrades.unlockedIngredients,e]})}),this.saveLocalState()}}unlockKeyboard(e){if(this.spendMoney(e)){let t=this.state$.getValue();this.updateState({foodtruckUpgrades:ee(O({},t.foodtruckUpgrades),{hasKeyboard:!0})}),this.saveLocalState()}}buyPrestigeItem(e){let t=this.state$.getValue(),r="PRESTIGE_"+e.id;if(t.achievements.some(i=>i.id===r))return!1;if(this.spendMoney(e.cost)){let i=[...t.achievements,{id:r,name:e.name,icon:e.icon}];return this.updateState({achievements:i}),this.saveToCloud(),!0}return!1}getEmployeeConfig(e){return QT[e]}getTotalEmployeePower(e,t){return this.state$.getValue().companies.find(r=>r.type===e)?.employees.filter(r=>r.role===t).length||0}incrementContractsCompleted(){let e=this.state$.getValue();this.updateState({freelanceUpgrades:ee(O({},e.freelanceUpgrades),{contractsCompleted:(e.freelanceUpgrades.contractsCompleted||0)+1})})}incrementBossBeaten(){let e=this.state$.getValue();this.updateState({freelanceUpgrades:ee(O({},e.freelanceUpgrades),{bossBeaten:e.freelanceUpgrades.bossBeaten+1})})}toggleEmployeePause(e,t){let r=this.state$.getValue();this.updateState({companies:r.companies.map(i=>i.id===e?ee(O({},i),{employees:i.employees.map(s=>s.id===t?ee(O({},s),{isPaused:!s.isPaused}):s)}):i)})}updateMaxServiceReached(e){let t=this.state$.getValue();e>t.foodtruckUpgrades.maxServiceReached&&this.updateState({foodtruckUpgrades:ee(O({},t.foodtruckUpgrades),{maxServiceReached:e})})}unlockIngredientByService(e){let t=this.state$.getValue();t.foodtruckUpgrades.unlockedIngredients.includes(e)||this.updateState({foodtruckUpgrades:ee(O({},t.foodtruckUpgrades),{unlockedIngredients:[...t.foodtruckUpgrades.unlockedIngredients,e]})})}upgradeEmployeeSetup(e,t,r){if(this.spendMoney(r)){let i=this.state$.getValue();this.updateState({companies:i.companies.map(s=>s.id===e?ee(O({},s),{employees:s.employees.map(o=>o.id===t?ee(O({},o),{efficiency:o.efficiency+1}):o)}):s)})}}updateIngredientMastery(e){this.updateState({foodtruckMastery:e})}incrementCustomersServed(){let e=this.state$.getValue(),t=O({},e.dailyStats);t.customersServed++,this.updateState({dailyStats:t})}setTimeOfDay(e){this.updateState({timeOfDay:e})}logoutAndClear(){localStorage.removeItem(this.SAVE_KEY),this.firebaseService.logout().then(()=>window.location.reload())}hardResetGame(){confirm("Tout effacer ?")&&(localStorage.removeItem(this.SAVE_KEY),window.location.reload())}connectOnline(){}static \u0275fac=function(t){return new(t||n)(se(Ei))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var hn=class n{audioCtx;isMuted=!1;noiseBuffer;constructor(){let e=window.AudioContext||window.webkitAudioContext;this.audioCtx=new e,this.noiseBuffer=this.createNoiseBuffer(1)}resume(){this.audioCtx.state==="suspended"&&this.audioCtx.resume()}playTone(e,t,r,i,s=0,o=0){if(this.isMuted)return;this.resume();let a=this.audioCtx.currentTime,c=this.audioCtx.createOscillator(),u=this.audioCtx.createGain();if(c.type=t,c.frequency.setValueAtTime(e,a),c.detune.value=s,u.gain.setValueAtTime(i,a),u.gain.exponentialRampToValueAtTime(.001,a+r),o>0){let d=this.audioCtx.createBiquadFilter();d.type="lowpass",d.frequency.setValueAtTime(o,a),c.connect(d).connect(u).connect(this.audioCtx.destination)}else c.connect(u).connect(this.audioCtx.destination);c.start(a),c.stop(a+r)}playNoise(e,t,r,i){if(this.isMuted)return;this.resume();let s=this.audioCtx.currentTime,o=this.audioCtx.createBufferSource();o.buffer=this.noiseBuffer;let a=this.audioCtx.createBiquadFilter();a.type=t,a.frequency.setValueAtTime(r,s);let c=this.audioCtx.createGain();c.gain.setValueAtTime(i,s),c.gain.exponentialRampToValueAtTime(.001,s+e),o.connect(a).connect(c).connect(this.audioCtx.destination),o.start(s),o.stop(s+e)}playCash(){this.playTone(1200,"square",.1,.1),setTimeout(()=>this.playTone(1600,"square",.1,.1),80)}playSuccess(){[523,659,783,1046].forEach((e,t)=>{setTimeout(()=>this.playTone(e,"sine",.2,.1),t*100)})}playError(){this.playTone(150,"sawtooth",.3,.2)}playPop(){this.playTone(600,"sine",.1,.1)}playSoftPop(){this.playTone(400,"sine",.1,.05)}startRainAmbience(){}stopRainAmbience(){}playTrashInBin(){this.playNoise(.2,"lowpass",200,.5)}playPaperSound(){this.playNoise(.1,"highpass",1e3,.3)}playLeafSound(){this.playNoise(.15,"bandpass",500,.2)}playCanSound(){this.playNoise(.1,"highpass",2e3,.4)}playScratchSound(){this.playNoise(.1,"bandpass",800,.3)}playSteakSound(){this.playNoise(.3,"lowpass",400,.4)}playSaladSound(){this.playNoise(.1,"highpass",1500,.3)}getVariation(){return Math.random()*50-25}playKeystroke(){this.playRandomKey()}playRandomKey(){this.playTone(300,"triangle",.05,.1,this.getVariation())}playSpace(){this.playTone(150,"square",.1,.15,this.getVariation())}createNoiseBuffer(e){let t=this.audioCtx.sampleRate*e,r=this.audioCtx.createBuffer(1,t,this.audioCtx.sampleRate),i=r.getChannelData(0);for(let s=0;s<t;s++)i[s]=Math.random()*2-1;return r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var RV=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ie(Mi),ie(Zt))};static \u0275dir=Ut({type:n})}return n})(),AQ=(()=>{class n extends RV{static \u0275fac=(()=>{let t;return function(i){return(t||(t=No(n)))(i||n)}})();static \u0275dir=Ut({type:n,features:[Ns]})}return n})(),kV=new Q("");var RQ={provide:kV,useExisting:Ss(()=>Cl),multi:!0};function kQ(){let n=Jn()?Jn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var PQ=new Q(""),Cl=(()=>{class n extends RV{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!kQ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ie(Mi),ie(Zt),ie(PQ,8))};static \u0275dir=Ut({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Os([RQ]),Ns]})}return n})();var NQ=new Q(""),MQ=new Q("");function PV(n){return n!=null}function NV(n){return Oi(n)?ze(n):n}function MV(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function OV(n,e){return e.map(t=>t(n))}function OQ(n){return!n.validate}function FV(n){return n.map(e=>OQ(e)?e:t=>e.validate(t))}function FQ(n){if(!n)return null;let e=n.filter(PV);return e.length==0?null:function(t){return MV(OV(t,e))}}function LV(n){return n!=null?FQ(FV(n)):null}function LQ(n){if(!n)return null;let e=n.filter(PV);return e.length==0?null:function(t){let r=OV(t,e).map(NV);return Zl(r).pipe(Oe(MV))}}function VV(n){return n!=null?LQ(FV(n)):null}function IV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VQ(n){return n._rawValidators}function UQ(n){return n._rawAsyncValidators}function JT(n){return n?Array.isArray(n)?n:[n]:[]}function K_(n,e){return Array.isArray(n)?n.includes(e):n===e}function SV(n,e){let t=JT(e);return JT(n).forEach(i=>{K_(t,i)||t.push(i)}),t}function CV(n,e){return JT(e).filter(t=>!K_(n,t))}var Y_=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LV(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=VV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ZT=class extends Y_{name;get formDirective(){return null}get path(){return null}},Ih=class extends Y_{_parent=null;name=null;valueAccessor=null},XT=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var J_=(()=>{class n extends XT{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ie(Ih,2))};static \u0275dir=Ut({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&fe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ns]})}return n})();var yh="VALID",W_="INVALID",Il="PENDING",bh="DISABLED",Aa=class{},Q_=class extends Aa{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Eh=class extends Aa{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},wh=class extends Aa{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Sl=class extends Aa{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var eD=class extends Aa{source;constructor(e){super(),this.source=e}};function BQ(n){return(Z_(n)?n.validators:n)||null}function jQ(n){return Array.isArray(n)?LV(n):n||null}function $Q(n,e){return(Z_(e)?e.asyncValidators:n)||null}function HQ(n){return Array.isArray(n)?VV(n):n||null}function Z_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var tD=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xt(this.statusReactive)}set status(e){xt(()=>this.statusReactive.set(e))}_status=ku(()=>this.statusReactive());statusReactive=Jt(void 0);get valid(){return this.status===yh}get invalid(){return this.status===W_}get pending(){return this.status==Il}get disabled(){return this.status===bh}get enabled(){return this.status!==bh}errors;get pristine(){return xt(this.pristineReactive)}set pristine(e){xt(()=>this.pristineReactive.set(e))}_pristine=ku(()=>this.pristineReactive());pristineReactive=Jt(!0);get dirty(){return!this.pristine}get touched(){return xt(this.touchedReactive)}set touched(e){xt(()=>this.touchedReactive.set(e))}_touched=ku(()=>this.touchedReactive());touchedReactive=Jt(!1);get untouched(){return!this.touched}_events=new be;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CV(e,this._rawAsyncValidators))}hasValidator(e){return K_(this._rawValidators,e)}hasAsyncValidator(e){return K_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ee(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new wh(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new wh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ee(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Eh(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Eh(!0,r))}markAsPending(e={}){this.status=Il;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ee(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=bh,this.errors=null,this._forEachChild(i=>{i.disable(ee(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Q_(this.value,r)),this._events.next(new Sl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=yh,this._forEachChild(r=>{r.enable(ee(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ee(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yh||this.status===Il)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Q_(this.value,t)),this._events.next(new Sl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ee(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bh:yh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Il,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=NV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Sl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new je,this.statusChanges=new je}_calculateStatus(){return this._allControlsDisabled()?bh:this.errors?W_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Il)?Il:this._anyControlsHaveStatus(W_)?W_:yh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Eh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new wh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Z_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=jQ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=HQ(this._rawAsyncValidators)}};var UV=new Q("",{factory:()=>nD}),nD="always";function zQ(n,e){return[...e.path,n]}function GQ(n,e,t=nD){WQ(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),KQ(n,e),QQ(n,e),YQ(n,e),qQ(n,e)}function TV(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function qQ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function WQ(n,e){let t=VQ(n);e.validator!==null?n.setValidators(IV(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=UQ(n);e.asyncValidator!==null?n.setAsyncValidators(IV(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();TV(e._rawValidators,i),TV(e._rawAsyncValidators,i)}function KQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&BV(n,e)})}function YQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&BV(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function BV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function QQ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function JQ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function ZQ(n){return Object.getPrototypeOf(n.constructor)===AQ}function XQ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Cl?t=s:ZQ(s)?r=s:i=s}),i||r||t||null}function DV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xV(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var eJ=class extends tD{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(BQ(t),$Q(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Z_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(xV(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new eD(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){DV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){DV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var tJ={provide:Ih,useExisting:Ss(()=>Sh)},AV=Promise.resolve(),Sh=(()=>{class n extends Ih{_changeDetectorRef;callSetDisabledState;control=new eJ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new je;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=XQ(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),JQ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){GQ(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){AV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&jo(r);AV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?zQ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ie(ZT,9),ie(NQ,10),ie(MQ,10),ie(kV,10),ie(At,8),ie(UV,8))};static \u0275dir=Ut({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Os([tJ]),Ns,Mr]})}return n})();var nJ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=gt({type:n});static \u0275inj=ht({})}return n})();var jV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:UV,useValue:t.callSetDisabledState??nD}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=gt({type:n});static \u0275inj=ht({imports:[nJ]})}return n})();var rD;function rJ(){if(rD==null){let n=typeof document<"u"?document.head:null;rD=!!(n&&(n.createShadowRoot||n.attachShadow))}return rD}function X_(n){if(rJ()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ch(n){return n.composedPath?n.composedPath()[0]:n.target}function HV(n){return n.buttons===0||n.detail===0}function zV(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function GV(n,e=0){return iJ(n)?Number(n):arguments.length===2?e:0}function iJ(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function ss(n){return n instanceof Zt?n.nativeElement:n}var ev=new WeakMap,qV=(()=>{class n{_appRef;_injector=F(We);_environmentInjector=F(wt);load(t){let r=this._appRef=this._appRef||this._injector.get(fr),i=ev.get(r);i||(i={loaders:new Set,refs:[]},ev.set(r,i),r.onDestroy(()=>{ev.get(r)?.refs.forEach(s=>s.destroy()),ev.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(xk(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var iD;try{iD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{iD=!1}var WV=(()=>{class n{_platformId=F(Ni);isBrowser=this._platformId?tP(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||iD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sJ=new Q("cdk-dir-doc",{providedIn:"root",factory:()=>F(et)}),oJ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function aJ(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?oJ.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var KV=(()=>{class n{get value(){return this.valueSignal()}valueSignal=Jt("ltr");change=new je;constructor(){let t=F(sJ,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(aJ(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var cJ=20,YV=(()=>{class n{_platform=F(WV);_listeners;_viewportSize;_change=new be;_document=F(et);constructor(){let t=F(Me),r=F(kn).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect(),o=-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:o,left:a}}change(t=cJ){return t>0?this._change.pipe(gy(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var QV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=gt({type:n});static \u0275inj=ht({})}return n})();function aD(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?XV(n,e):(r==="input"||r==="select"||r==="textarea")&&ZV(n,e),JV("canvas",n,e,XV),JV("input, textarea, select",n,e,ZV),e}function JV(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}var lJ=0;function ZV(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${lJ++}`)}function XV(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function pD(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function cD(n,e,t){let{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function uJ(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,s=e.top+e.height>n.bottom;return t||r||i||s}function xh(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function eU(n,e,t,r){let{top:i,right:s,bottom:o,left:a,width:c,height:u}=n,d=c*e,f=u*e;return r>i-f&&r<o+f&&t>a-d&&t<s+d}var tv=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:pD(t)})})}handleScroll(e){let t=Ch(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,s,o;if(t===this._document){let u=this.getViewportScrollPosition();s=u.top,o=u.left}else s=t.scrollTop,o=t.scrollLeft;let a=i.top-s,c=i.left-o;return this.positions.forEach((u,d)=>{u.clientRect&&t!==d&&t.contains(d)&&xh(u.clientRect,a,c)}),i.top=s,i.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function dU(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function mD(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function Tl(n,e){let t=e?"":"none";mD(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function tU(n,e,t){mD(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function nv(n,e){return e&&e!="none"?n+" "+e:n}function nU(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Ah(e.left,e.top)}function Ah(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function rU(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function dJ(n){let e=getComputedStyle(n),t=sD(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),s=sD(e,"transition-duration"),o=sD(e,"transition-delay");return rU(s[i])+rU(o[i])}function sD(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var hJ=new Set(["position"]),lD=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,s,o,a,c,u,d){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=u,this._renderer=d}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),iU(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return dJ(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let s=e.matchSize?this._initialDomRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=dU(o,this._document),this._previewEmbeddedView=o,e.matchSize?nU(i,s):i.style.transform=Ah(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=aD(this._rootElement),nU(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return mD(i.style,{"pointer-events":"none",margin:iU(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},hJ),Tl(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}};function iU(n){return"showPopover"in n}var fJ={passive:!0},sU={passive:!1},pJ={passive:!1,capture:!0},mJ=800,oU="cdk-drag-placeholder",aU=new Set(["position"]),uD=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Jt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new be;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Je.EMPTY;_pointerUpSubscription=Je.EMPTY;_scrollSubscription=Je.EMPTY;_resizeSubscription=Je.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>Tl(t,e)))}_disabled=!1;beforeStarted=new be;started=new be;released=new be;ended=new be;entered=new be;exited=new be;dropped=new be;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,s,o,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new tv(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>ss(r)),this._handles.forEach(r=>Tl(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=ss(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,sU),r.listen(t,"touchstart",this._pointerDown,fJ),r.listen(t,"dragstart",this._nativeDragStart,sU)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?ss(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&uJ(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let s=this._activeTransform.x,o=this._activeTransform.y,a=s+r,c=o+i;this._rootElement.style.transform=Ah(a,c),this._activeTransform={x:a,y:c},this._passiveTransform={x:a,y:c}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Tl(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Tl(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),s=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+s>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),c=this._dropContainer;if(!a){this._endDragSequence(e);return}(!c||!c.isDragging()&&!c.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=r.x-i.x+this._passiveTransform.x,s.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Th(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",gJ,pJ)}),r){let i=this._rootElement,s=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");s.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new lD(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,t)),tU(i,!1,aU),this._document.body.appendChild(s.replaceChild(o,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=Th(t),s=!i&&t.button!==0,o=this._rootElement,a=Ch(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+mJ>Date.now(),u=i?zV(t):HV(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||s||c||u)return;if(this._handles.length){let _=o.style;this._rootElementTapHighlight=_.webkitTapHighlightColor||"",_.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(_=>this._updateOnScroll(_)),this._boundaryElement&&(this._boundaryRect=pD(this._boundaryElement));let d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){tU(this._rootElement,!0,aU),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{let o=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(o+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(s,this._dropContainer,a),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&Ch(a)===this._preview.element&&a.propertyName==="transform")&&(o(),r(),clearTimeout(s))},s=setTimeout(i,t*1.5),o=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=dU(this._placeholderRef,this._document)):r=aD(this._rootElement),r.style.pointerEvents="none",r.classList.add(oU),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=Th(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,u=o.pageY-s.top-a.top;return{x:s.left-e.left+c,y:s.top-e.top+u}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=Th(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:u}=this._getPreviewRect(),d=a.top+o,f=a.bottom-(u-o),_=a.left+s,b=a.right-(c-s);r=cU(r,_,b),i=cU(i,d,f)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Tl(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=Ah(e*r,t*r),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=nv(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=Ah(e,t);this._preview.setTransform(nv(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:Th(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=Ch(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&xh(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=X_(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return ss(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,r){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let i=this._anchor??=aD(this._placeholder);i.classList.remove(oU),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):ss(t.element).appendChild(i)}}};function cU(n,e,t){return Math.max(e,Math.min(t,n))}function Th(n){return n.type[0]==="t"}function gJ(n){n.preventDefault()}function hU(n,e,t){let r=lU(e,n.length-1),i=lU(t,n.length-1);if(r===i)return;let s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}function lU(n,e){return Math.max(0,Math.min(e,n))}var rv=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(N=>N.drag===e),u=s[o],d=s[c].clientRect,f=u.clientRect,_=c>o?1:-1,b=this._getItemOffsetPx(d,f,_),I=this._getSiblingOffsetPx(c,s,_),k=s.slice();return hU(s,c,o),s.forEach((N,j)=>{if(k[j]===N)return;let Y=N.drag===e,ne=Y?b:I,he=Y?e.getPlaceholderElement():N.drag.getRootElement();N.offset+=ne;let Qe=Math.round(N.offset*(1/N.drag.scale));a?(he.style.transform=nv(`translate3d(${Qe}px, 0, 0)`,N.initialTransform),xh(N.clientRect,0,ne)):(he.style.transform=nv(`translate3d(0, ${Qe}px, 0)`,N.initialTransform),xh(N.clientRect,ne,0))}),this._previousSwap.overlaps=cD(f,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:o}}enter(e,t,r,i){let s=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement(),u=o[s];if(u===e&&(u=o[s+1]),!u&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=o[0]),a>-1&&o.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){let d=u.getRootElement();d.parentElement.insertBefore(c,d),o.splice(s,0,e)}else this._element.appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{xh(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:pD(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=i?t.left-e.left:t.top-e.top;return r===-1&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=t[e].clientRect,o=t[e+r*-1],a=s[i?"width":"height"]*r;if(o){let c=i?"left":"top",u=i?"right":"bottom";r===-1?a-=o.clientRect[c]-s[u]:a+=s[c]-o.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}else{let o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(i){let u=s?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return s?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,e)?-1:o}},dD=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let s=this._getItemIndexFromPointerPosition(e,t,r),o=this._previousSwap;if(s===-1||this._activeItems[s]===e)return null;let a=this._activeItems[s];if(o.drag===a&&o.overlaps&&o.deltaX===i.x&&o.deltaY===i.y)return null;let c=this.getItemIndex(e),u=e.getPlaceholderElement(),d=a.getRootElement();s>c?d.after(u):d.before(u),hU(this._activeItems,c,s);let f=this._getRootNode().elementFromPoint(t,r);return o.deltaX=i.x,o.deltaY=i.y,o.drag=a,o.overlaps=d===f||d.contains(f),{previousIndex:c,currentIndex:s}}enter(e,t,r,i){let s=this._activeItems.indexOf(e);s>-1&&this._activeItems.splice(s,1);let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;o===-1&&(o=this._getClosestItemIndexToPointer(e,t,r));let a=this._activeItems[o];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(o,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,s]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==s&&(s===null?e.appendChild(i):s.parentNode===e&&e.insertBefore(i,s))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),s=i?this._activeItems.findIndex(o=>{let a=o.getRootElement();return i===a||a.contains(i)}):-1;return s===-1||!this._sortPredicate(s,e)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=X_(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){let a=this._activeItems[o];if(a!==e){let{x:c,y:u}=a.getRootElement().getBoundingClientRect(),d=Math.hypot(t-c,r-u);d<i&&(i=d,s=o)}}return s}},uU=.05,fU=.05,Ir=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(Ir||{}),Tn=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(Tn||{}),hD=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new be;entered=new be;exited=new be;dropped=new be;sorted=new be;receivingStarted=new be;receivingStopped=new be;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Je.EMPTY;_verticalScrollDirection=Ir.NONE;_horizontalScrollDirection=Tn.NONE;_scrollNode;_stopScrollTimers=new be;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s;let o=this.element=ss(e);this._document=r,this.withOrientation("vertical").withElementContainer(o),t.registerDropContainer(this),this._parentPositions=new tv(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof rv&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new dD(this._document,this._dragDropRegistry);else{let t=new rv(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=ss(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!eU(this._domRect,uU,t,r))return;let s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=Ir.NONE,s=Tn.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||eU(o.clientRect,uU,e,t)&&([i,s]=_J(a,o.clientRect,this._direction,e,t),(i||s)&&(r=a))}),!i&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};i=pU(c,t),s=mU(c,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),vs(0,uf).pipe(Wr(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===Ir.UP?e.scrollBy(0,-t):this._verticalScrollDirection===Ir.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===Tn.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===Tn.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&cD(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!cD(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=X_(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function pU(n,e){let{top:t,bottom:r,height:i}=n,s=i*fU;return e>=t-s&&e<=t+s?Ir.UP:e>=r-s&&e<=r+s?Ir.DOWN:Ir.NONE}function mU(n,e){let{left:t,right:r,width:i}=n,s=i*fU;return e>=t-s&&e<=t+s?Tn.LEFT:e>=r-s&&e<=r+s?Tn.RIGHT:Tn.NONE}function _J(n,e,t,r,i){let s=pU(e,i),o=mU(e,r),a=Ir.NONE,c=Tn.NONE;if(s){let u=n.scrollTop;s===Ir.UP?u>0&&(a=Ir.UP):n.scrollHeight-u>n.clientHeight&&(a=Ir.DOWN)}if(o){let u=n.scrollLeft;t==="rtl"?o===Tn.RIGHT?u<0&&(c=Tn.RIGHT):n.scrollWidth+u>n.clientWidth&&(c=Tn.LEFT):o===Tn.LEFT?u>0&&(c=Tn.LEFT):n.scrollWidth-u>n.clientWidth&&(c=Tn.RIGHT)}return[a,c]}var Dh={capture:!0},oD={passive:!1,capture:!0},vJ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=st({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),gU=(()=>{class n{_ngZone=F(Me);_document=F(et);_styleLoader=F(qV);_renderer=F(kn).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new be;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Jt([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new be;pointerUp=new be;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,oD)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(vJ),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),s=a=>this.pointerUp.next(a),o=[["scroll",a=>this._scroll.next(a),Dh],["selectstart",this._preventDefaultWhileDragging,oD]];i?o.push(["touchend",s,Dh],["touchcancel",s,Dh]):o.push(["mouseup",s,Dh]),i||o.push(["mousemove",a=>this.pointerMove.next(a),oD]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=o.map(([a,c,u])=>this._renderer.listen(this._document,a,c,u))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new _e(i=>this._ngZone.runOutsideAngular(()=>{let s=this._renderer.listen(t,"scroll",o=>{this._activeDragInstances().length&&i.next(o)},Dh);return()=>{s()}}))),Af(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yJ={dragStartThreshold:5,pointerDirectionChangeThreshold:5},_U=(()=>{class n{_document=F(et);_ngZone=F(Me);_viewportRuler=F(YV);_dragDropRegistry=F(gU);_renderer=F(kn).createRenderer(null,null);constructor(){}createDrag(t,r=yJ){return new uD(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new hD(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fD=new Q("CDK_DRAG_PARENT");var bJ=new Q("CdkDragHandle");var EJ=new Q("CDK_DRAG_CONFIG"),wJ=new Q("CdkDropList"),vU=(()=>{class n{element=F(Zt);dropContainer=F(wJ,{optional:!0,skipSelf:!0});_ngZone=F(Me);_viewContainerRef=F(qn);_dir=F(KV,{optional:!0});_changeDetectorRef=F(At);_selfHandle=F(bJ,{optional:!0,self:!0});_parentDrag=F(fD,{optional:!0,skipSelf:!0});_dragDropRegistry=F(gU);_destroyed=new be;_handles=new rt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new je;released=new je;ended=new je;entered=new je;exited=new je;dropped=new je;moved=new _e(t=>{let r=this._dragRef.moved.pipe(Oe(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=F(We);constructor(){let t=this.dropContainer,r=F(EJ,{optional:!0}),i=F(_U);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(Wr(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Fo(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):ss(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:GV(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(it(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:u,previewContainer:d}=t;this.disabled=c??!1,this.dragStartDelay=i||0,this.lockAxis=r||null,s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.pipe(Yt(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),An(t=>Af(...t.map(r=>r._stateChanges.pipe(Ga(r))))),Wr(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ut({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&fe("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",jo],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",tE]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Os([{provide:fD,useExisting:n}]),Mr]})}return n})();var IJ=new Q("CdkDragPlaceholder"),yU=(()=>{class n{templateRef=F(Nr);_drag=F(fD,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ut({type:n,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[Os([{provide:IJ,useExisting:n}])]})}return n})();var bU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=gt({type:n});static \u0275inj=ht({providers:[_U],imports:[QV]})}return n})();var CJ=["binRef"];function TJ(n,e){if(n&1&&(p(0,"header",10)(1,"div",11)(2,"div",12),v(3,"P"),g(),p(4,"h1",13),v(5,"JEUB2 "),p(6,"span",14),v(7,"Prologue"),g()()(),p(8,"div",15)(9,"span",16),v(10),ce(11,"number"),g()()()),n&2){let t=A();y(10),J("",Pe(11,1,t.currentMoney,"1.0-0")," \u20AC")}}function DJ(n,e){if(n&1&&te(0,"div",17),n&2){let t=e.$implicit;Ke("left",t.x,"px")("top",t.y,"px")("background-color",t.color)("opacity",t.life)("transform","scale("+t.life+")")}}function xJ(n,e){if(n&1){let t=oe();p(0,"div",28)(1,"button",29),$("click",function(){z(t);let i=A(2);return G(i.startPark())}),v(2," Commencer \xE0 chercher... \u{1F5D1}\uFE0F "),g()()}}function AJ(n,e){if(n&1&&(p(0,"div",18),te(1,"div",19)(2,"div",20),p(3,"div",21)(4,"div",22),v(5,"\u{1F976}"),g()(),p(6,"div",23)(7,"div",24),v(8,"Moi (Gal\xE9rien)"),g(),p(9,"div",25),v(10),p(11,"span",26),v(12,"|"),g()(),U(13,xJ,3,0,"div",27),g()()),n&2){let t=A();y(10),Z(t.displayedDialogue),y(3),S("ngIf",t.isTextFinished)}}function RJ(n,e){n&1&&te(0,"div")}function kJ(n,e){if(n&1){let t=oe();p(0,"div",39),$("cdkDragStarted",function(){let i=z(t).$implicit,s=A(2);return G(s.onDragStart(i))})("cdkDragEnded",function(i){let s=z(t).$implicit,o=A(2);return G(o.onDragEnded(i,s))}),te(1,"div",40),p(2,"div",41),v(3),g(),U(4,RJ,1,0,"div",42),g()}if(n&2){let t=e.$implicit,r=A(2);Ke("left",t.x,"%")("top",t.y,"%")("transform","rotate("+t.rotation+"deg) scale("+t.scale+")"),fe("floating-anim",!r.isDragging),y(3),Z(r.getIcon(t.type))}}function PJ(n,e){if(n&1){let t=oe();p(0,"div",43)(1,"button",44),$("click",function(){z(t);let i=A(2);return G(i.goToShop())}),v(2,"Aller au Tabac \u27A1\uFE0F"),g()()}}function NJ(n,e){if(n&1&&(p(0,"div",30),te(1,"div",19)(2,"div",20),p(3,"div",31,0)(5,"div",32)(6,"div",33)(7,"span",34),v(8,"\u{1F5D1}\uFE0F"),g()()(),p(9,"span",35),v(10,"Jette ici !"),g()(),p(11,"div",36),U(12,kJ,5,9,"div",37),g(),U(13,PJ,3,0,"div",38),g()),n&2){let t=A();y(3),fe("bin-active",t.isHoveringBin)("bin-eating",t.isEating),y(9),S("ngForOf",t.trashItems)("ngForTrackBy",t.trackByItemId),y(),S("ngIf",t.currentMoney>=100)}}function MJ(n,e){if(n&1){let t=oe();p(0,"div",28)(1,"button",29),$("click",function(){z(t);let i=A(2);return G(i.buyTicket())}),p(2,"span",48),v(3,"\u{1F3AB}"),g(),v(4," Acheter un ticket (100\u20AC) "),g()()}}function OJ(n,e){if(n&1&&(p(0,"div",45)(1,"div",46)(2,"div",47),v(3,"LE BALTO"),g()(),p(4,"div",21)(5,"div",22),v(6,"\u{1F9D4}\u{1F3FB}\u200D\u2642\uFE0F"),g()(),p(7,"div",23)(8,"div",24),v(9,"G\xE9rard (Patron)"),g(),p(10,"div",25),v(11),p(12,"span",26),v(13,"|"),g()(),U(14,MJ,5,0,"div",27),g()()),n&2){let t=A();y(11),Z(t.displayedDialogue),y(3),S("ngIf",t.isTextFinished)}}function FJ(n,e){n&1&&(p(0,"span",65),v(1,"$"),g())}function LJ(n,e){if(n&1){let t=oe();p(0,"div",63),$("mouseenter",function(){let i=z(t).$implicit,s=A(2);return G(s.scratch(i))}),U(1,FJ,2,0,"span",64),g()}if(n&2){let t=e.$implicit,r=A(2);fe("scratched",r.scratched[t]),y(),S("ngIf",!r.scratched[t])}}function VJ(n,e){if(n&1){let t=oe();p(0,"button",66),$("click",function(){z(t);let i=A(2);return G(i.goToOutro())}),v(1," ENCAISSER LE GAIN \u{1F4B8} "),g()}}function UJ(n,e){if(n&1&&(p(0,"div",49)(1,"div",50)(2,"div",51)(3,"div",52),v(4,"\u{1F48E} DIAMOND CASH \u{1F48E}"),g(),p(5,"div",53),v(6,"Grattez pour gagner"),g()(),p(7,"div",54)(8,"div",55)(9,"div",56)(10,"div",57),v(11,"10 000 \u20AC"),g(),p(12,"div",58),v(13,"\u{1F389} JACKPOT \u{1F389}"),g()(),p(14,"div",59),U(15,LJ,2,3,"div",60),g()()(),p(16,"div",61),U(17,VJ,2,0,"button",62),g()()()),n&2){let t=A();y(15),S("ngForOf",t.scratchGrid),y(2),S("ngIf",t.isRevealed)}}function BJ(n,e){if(n&1){let t=oe();p(0,"div",28)(1,"button",70),$("click",function(){z(t);let i=A(2);return G(i.finishIntro())}),v(2," \u{1F354} ACHETER LE FOODTRUCK "),g()()}}function jJ(n,e){if(n&1&&(p(0,"div",67)(1,"div",21)(2,"div",22),v(3,"\u{1F911}"),g()(),p(4,"div",68)(5,"div",24),v(6,"Moi (Nouveau Riche)"),g(),p(7,"div",69),v(8),p(9,"span",26),v(10,"|"),g()(),U(11,BJ,3,0,"div",27),g()()),n&2){let t=A();y(8),Z(t.displayedDialogue),y(3),S("ngIf",t.isTextFinished)}}var iv=class n{constructor(e,t,r){this.gameState=e;this.sound=t;this.cdr=r}binRef;phase="INTRO_DIALOGUE";currentMoney=0;particles=[];trashItems=[];isHoveringBin=!1;isEating=!1;isDragging=!1;currentDialogueText="";displayedDialogue="";isTextFinished=!1;typeWriterInterval;introText="Il pleut encore... J'en ai marre de cette vie de gal\xE8re. J'ai froid, j'ai faim. Si seulement je pouvais trouver 100 balles pour tenter ma chance au loto...";shopText="Alors mon petit... Une sale journ\xE9e hein ? T'es tout tremp\xE9. T'as enfin r\xE9uni les 100 balles ? Allez, prends ce ticket, c'est ta chance.";outroText="C'est... C'est pas possible... 10.000 EUROS ?! J'AI GAGN\xC9 ! Adieu la rue ! Je sais ce que je vais faire... Je vais racheter ce vieux Foodtruck abandonn\xE9 au coin de la rue. C'est le d\xE9but de mon empire !";scratchGrid=Array.from({length:60},(e,t)=>t);scratched=new Array(60).fill(!1);isRevealed=!1;ngOnInit(){this.sound.startRainAmbience(),this.startDialogue(this.introText)}ngOnDestroy(){this.sound.stopRainAmbience(),this.typeWriterInterval&&clearInterval(this.typeWriterInterval)}startDialogue(e){this.currentDialogueText=e,this.displayedDialogue="",this.isTextFinished=!1;let t=0;this.typeWriterInterval&&clearInterval(this.typeWriterInterval),this.typeWriterInterval=setInterval(()=>{t<this.currentDialogueText.length?(this.displayedDialogue+=this.currentDialogueText.charAt(t),t%3===0&&this.sound.playKeystroke(),t++,this.cdr.detectChanges()):(clearInterval(this.typeWriterInterval),this.isTextFinished=!0,this.cdr.detectChanges())},30)}startPark(){this.phase="PARK",this.spawnTrashWave()}goToShop(){this.phase="SHOP",this.sound.stopRainAmbience(),setTimeout(()=>this.startDialogue(this.shopText),800)}buyTicket(){this.currentMoney=0,this.phase="SCRATCH",this.sound.playPop()}goToOutro(){this.phase="OUTRO_DIALOGUE",this.sound.playSuccess(),setTimeout(()=>this.startDialogue(this.outroText),800)}finishIntro(){this.gameState.completeIntro()}trackByItemId(e,t){return t.id}spawnTrashWave(){this.trashItems=[];for(let e=0;e<40;e++)this.trashItems.push({id:Math.random(),x:Math.random()*80+10,y:Math.random()*70+10,type:Math.random()>.6?"can":Math.random()>.3?"paper":"leaf",rotation:Math.random()*360,scale:1,delay:Math.random()*2})}onDragStart(e){this.isDragging=!0,e.type==="can"?this.sound.playCanSound():e.type==="paper"?this.sound.playPaperSound():this.sound.playLeafSound()}onDragEnded(e,t){this.isDragging=!1,this.isHoveringBin=!1;let r=e.dropPoint,i=this.binRef.nativeElement.getBoundingClientRect();r.x>=i.left-50&&r.x<=i.right+50&&r.y>=i.top-50&&r.y<=i.bottom+50?this.cleanTrash(t):e.source.reset()}cleanTrash(e){this.trashItems=this.trashItems.filter(r=>r.id!==e.id),this.sound.playTrashInBin(),this.isEating=!0,setTimeout(()=>this.isEating=!1,200);let t=this.binRef.nativeElement.getBoundingClientRect();this.spawnParticles(t.left+t.width/2,t.top+t.height/2,"#22c55e"),this.currentMoney+=10,this.trashItems.length===0&&this.currentMoney<100&&setTimeout(()=>this.spawnTrashWave(),500)}getIcon(e){return e==="can"?"\u{1F96B}":e==="paper"?"\u{1F961}":"\u{1F342}"}scratch(e){this.scratched[e]||(this.scratched[e]=!0,Math.random()>.5&&this.sound.playScratchSound(),this.scratched.filter(t=>t).length>36&&!this.isRevealed&&(this.isRevealed=!0,this.sound.playSuccess(),this.spawnConfetti()))}spawnParticles(e,t,r){for(let i=0;i<8;i++)this.particles.push({id:Math.random(),x:e,y:t,color:r,speedX:(Math.random()-.5)*15,speedY:(Math.random()-1)*15,life:1});this.animateParticles()}spawnConfetti(){for(let e=0;e<50;e++)this.particles.push({id:Math.random(),x:window.innerWidth/2,y:window.innerHeight/2,color:["#f00","#0f0","#00f","#ff0"][Math.floor(Math.random()*4)],speedX:(Math.random()-.5)*25,speedY:(Math.random()-.5)*25,life:1});this.animateParticles()}animateParticles(){this.particles.length!==0&&(this.particles.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,e.life-=.03}),this.particles=this.particles.filter(e=>e.life>0),this.particles.length>0&&requestAnimationFrame(()=>this.animateParticles()))}static \u0275fac=function(t){return new(t||n)(ie(qt),ie(hn),ie(At))};static \u0275cmp=st({type:n,selectors:[["app-intro-game"]],viewQuery:function(t,r){if(t&1&&mc(CJ,5),t&2){let i;Lo(i=Vo())&&(r.binRef=i.first)}},standalone:!1,decls:9,vars:7,consts:[["binRef",""],[1,"intro-container"],["class","intro-header",4,"ngIf"],[1,"fx-layer"],["class","particle",3,"left","top","background-color","opacity","transform",4,"ngFor","ngForOf"],["class","scene dialogue-scene fadeIn",4,"ngIf"],["class","scene park-scene fadeIn",4,"ngIf"],["class","scene shop-scene fadeIn",4,"ngIf"],["class","scene scratch-scene fadeIn",4,"ngIf"],["class","scene dialogue-scene fadeIn outro-bg",4,"ngIf"],[1,"intro-header"],[1,"flex","items-center","gap-3"],[1,"logo-box"],[1,"text-xl","font-bold","tracking-tight","text-white"],[1,"text-xs","font-normal","text-slate-400","ml-2"],[1,"money-badge"],[1,"text-green-400","font-bold","text-xl","mr-2"],[1,"particle"],[1,"scene","dialogue-scene","fadeIn"],[1,"rain-layer","layer-1"],[1,"rain-layer","layer-2"],[1,"character-container","slide-up"],[1,"character-emoji"],[1,"dialogue-box-container"],[1,"speaker-name"],[1,"dialogue-text"],[1,"cursor"],["class","dialogue-actions",4,"ngIf"],[1,"dialogue-actions"],[1,"action-btn",3,"click"],[1,"scene","park-scene","fadeIn"],[1,"bin-container"],[1,"bin-body"],[1,"bin-base"],[1,"bin-emoji"],[1,"bin-label"],[1,"trash-zone"],["class","trash-item","cdkDrag","",3,"floating-anim","left","top","transform","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["class","next-step-container",4,"ngIf"],["cdkDrag","",1,"trash-item",3,"cdkDragStarted","cdkDragEnded"],[1,"trash-shadow"],[1,"trash-content"],[4,"cdkDragPlaceholder"],[1,"next-step-container"],[1,"next-btn","pulse-glow",3,"click"],[1,"scene","shop-scene","fadeIn"],[1,"shop-bg"],[1,"neon-sign"],[1,"icon"],[1,"scene","scratch-scene","fadeIn"],[1,"ticket","zoom-in"],[1,"ticket-top"],[1,"ticket-logo"],[1,"ticket-sub"],[1,"scratch-zone-border"],[1,"scratch-zone"],[1,"winner-content"],[1,"win-amount"],[1,"win-emoji"],[1,"scratch-cover"],["class","scratch-pixel",3,"scratched","mouseenter",4,"ngFor","ngForOf"],[1,"ticket-footer"],["class","claim-btn pulse",3,"click",4,"ngIf"],[1,"scratch-pixel",3,"mouseenter"],["class","pattern",4,"ngIf"],[1,"pattern"],[1,"claim-btn","pulse",3,"click"],[1,"scene","dialogue-scene","fadeIn","outro-bg"],[1,"dialogue-box-container","light-theme"],[1,"dialogue-text","text-black"],[1,"action-btn","gold-btn",3,"click"]],template:function(t,r){t&1&&(p(0,"div",1),U(1,TJ,12,4,"header",2),p(2,"div",3),U(3,DJ,1,10,"div",4),g(),U(4,AJ,14,2,"div",5)(5,NJ,14,7,"div",6)(6,OJ,15,2,"div",7)(7,UJ,18,2,"div",8)(8,jJ,12,2,"div",9),g()),t&2&&(y(),S("ngIf",r.phase==="PARK"||r.phase==="SCRATCH"),y(2),S("ngForOf",r.particles),y(),S("ngIf",r.phase==="INTRO_DIALOGUE"),y(),S("ngIf",r.phase==="PARK"),y(),S("ngIf",r.phase==="SHOP"),y(),S("ngIf",r.phase==="SCRATCH"),y(),S("ngIf",r.phase==="OUTRO_DIALOGUE"))},dependencies:[Ln,Xt,vU,yU,Zn],styles:[`.intro-container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;background:#0f172a;display:flex;flex-direction:column;font-family:Segoe UI,sans-serif;-webkit-user-select:none;user-select:none;position:absolute;top:0;left:0}.intro-header[_ngcontent-%COMP%]{background:#0f172ae6;border-bottom:1px solid #1e293b;height:64px;display:flex;justify-content:space-between;align-items:center;padding:0 24px;z-index:50}.logo-box[_ngcontent-%COMP%]{width:32px;height:32px;background:#2563eb;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}.money-badge[_ngcontent-%COMP%]{background:#020617;padding:8px 20px;border-radius:99px;border:1px solid rgba(22,163,74,.3)}.scene[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;height:100%;overflow:hidden}.dialogue-scene[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;background:#0f172a}.character-container[_ngcontent-%COMP%]{position:relative;z-index:10;margin-bottom:-10px}.character-emoji[_ngcontent-%COMP%]{font-size:12rem;filter:drop-shadow(0 0 30px rgba(0,0,0,.5))}.dialogue-box-container[_ngcontent-%COMP%]{width:90%;max-width:800px;margin-bottom:40px;z-index:20;background:#0f172af2;border:2px solid #475569;border-radius:8px;padding:24px;box-shadow:0 20px 50px #0009;position:relative;min-height:160px;display:flex;flex-direction:column}.outro-bg[_ngcontent-%COMP%]{background:radial-gradient(circle at center,#fef3c7,#fff7ed)}.light-theme[_ngcontent-%COMP%]{background:#fffffff2;border-color:#fbbf24;box-shadow:0 20px 50px #d9770633}.light-theme[_ngcontent-%COMP%]   .dialogue-text[_ngcontent-%COMP%]{color:#1e293b;font-weight:700}.speaker-name[_ngcontent-%COMP%]{position:absolute;top:-16px;left:24px;background:#d97706;color:#fff;padding:4px 16px;font-weight:700;font-size:.9rem;border-radius:4px;text-transform:uppercase}.dialogue-text[_ngcontent-%COMP%]{font-family:monospace;font-size:1.2rem;color:#e2e8f0;line-height:1.6;margin-top:10px;flex:1}.cursor[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite;color:#d97706;font-weight:700}.dialogue-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;animation:_ngcontent-%COMP%_fadeIn .5s}.action-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#16a34a,#15803d);color:#fff;border:1px solid #4ade80;padding:12px 24px;border-radius:6px;font-weight:700;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;gap:10px}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #22c55e66}.gold-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#f59e0b,#d97706);border-color:#fbbf24;color:#78350f}.park-scene[_ngcontent-%COMP%]{background:radial-gradient(circle at 50% 20%,#334155,#1e293b,#020617)}.rain-layer[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="40"><line x1="0" y1="0" x2="2" y2="10" stroke="rgba(148, 163, 184, 0.3)" stroke-width="1"/></svg>');z-index:5}.layer-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rain .8s linear infinite;opacity:.6;background-size:20px 40px}.layer-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rain 1.5s linear infinite;opacity:.3;background-size:40px 80px;transform:scale(1.5)}@keyframes _ngcontent-%COMP%_rain{0%{background-position:0 0}to{background-position:20px 100vh}}.trash-zone[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:30}.trash-item[_ngcontent-%COMP%]{position:absolute;width:60px;height:60px;display:flex;align-items:center;justify-content:center;cursor:grab;touch-action:none;transition:transform .1s}.trash-content[_ngcontent-%COMP%]{font-size:3.5rem;filter:drop-shadow(0 4px 6px rgba(0,0,0,.4));position:relative;z-index:2}.trash-shadow[_ngcontent-%COMP%]{position:absolute;bottom:5px;left:15%;width:70%;height:10px;background:#000;opacity:.3;filter:blur(4px);border-radius:50%;z-index:1;transition:all .2s}.trash-item[_ngcontent-%COMP%]:active   .trash-shadow[_ngcontent-%COMP%]{transform:scale(.5);opacity:.1;bottom:-20px}.floating-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.bin-container[_ngcontent-%COMP%]{position:absolute;bottom:40px;right:40px;width:140px;height:160px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;z-index:25;transition:transform .2s}.bin-body[_ngcontent-%COMP%]{font-size:6rem;filter:drop-shadow(0 10px 20px rgba(0,0,0,.5))}.bin-active[_ngcontent-%COMP%]{transform:scale(1.1)}.bin-eating[_ngcontent-%COMP%]   .bin-body[_ngcontent-%COMP%]{transform:scaleY(.8) scaleX(1.2)}.bin-label[_ngcontent-%COMP%]{font-weight:700;color:#cbd5e1;background:#0009;padding:4px 12px;border-radius:12px}.next-step-container[_ngcontent-%COMP%]{position:absolute;bottom:100px;width:100%;display:flex;justify-content:center;z-index:200}.next-btn[_ngcontent-%COMP%]{padding:15px 40px;background:linear-gradient(45deg,#f59e0b,#d97706);color:#fff;font-weight:900;font-size:1.3rem;border:none;border-radius:50px;cursor:pointer;box-shadow:0 10px 20px #d9770666;text-transform:uppercase}.pulse-glow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseGlow 2s infinite}@keyframes _ngcontent-%COMP%_pulseGlow{0%{box-shadow:0 0 #f59e0bb3}70%{box-shadow:0 0 0 20px #f59e0b00}to{box-shadow:0 0 #f59e0b00}}.shop-scene[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#2a0a0a,#1a0505);display:flex;flex-direction:column;align-items:center;justify-content:flex-end}.shop-bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.neon-sign[_ngcontent-%COMP%]{position:absolute;top:15%;left:50%;transform:translate(-50%);font-family:monospace;font-weight:900;font-size:4rem;color:#ff4d4d;text-shadow:0 0 20px #ff0000;border:4px solid #ff4d4d;padding:10px 30px;border-radius:20px;box-shadow:0 0 30px #f006;animation:_ngcontent-%COMP%_flicker 3s infinite}@keyframes _ngcontent-%COMP%_flicker{0%,to{opacity:1}50%{opacity:.8}52%{opacity:.2}54%{opacity:.8}}.scratch-scene[_ngcontent-%COMP%]{background:#0f172a;display:flex;justify-content:center;align-items:center}.ticket[_ngcontent-%COMP%]{width:360px;background:#f8fafc;border-radius:12px;overflow:hidden;box-shadow:0 25px 50px -12px #00000080;border:1px solid #94a3b8}.ticket-top[_ngcontent-%COMP%]{background:#1e1b4b;padding:20px;text-align:center;border-bottom:4px solid #fbbf24}.ticket-logo[_ngcontent-%COMP%]{font-family:Impact,sans-serif;font-size:2rem;color:#fbbf24;letter-spacing:1px}.ticket-sub[_ngcontent-%COMP%]{color:#94a3b8;font-size:.8rem;text-transform:uppercase;margin-top:5px}.scratch-zone-border[_ngcontent-%COMP%]{padding:20px;background:#e2e8f0}.scratch-zone[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;border:2px dashed #94a3b8;background:#fff;border-radius:8px;overflow:hidden}.winner-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(circle,#fef3c7,#fffbeb)}.win-amount[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:900;color:#16a34a}.win-emoji[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:10px;animation:pulse 1s infinite}.scratch-cover[_ngcontent-%COMP%]{position:absolute;inset:0;display:grid;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(6,1fr)}.scratch-pixel[_ngcontent-%COMP%]{background:#94a3b8;border:1px solid #64748b;display:flex;justify-content:center;align-items:center;cursor:crosshair}.scratch-pixel[_ngcontent-%COMP%]:nth-child(odd){background:#cbd5e1}.scratch-pixel.scratched[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.ticket-footer[_ngcontent-%COMP%]{padding:15px;text-align:center;background:#f1f5f9}.claim-btn[_ngcontent-%COMP%]{width:100%;background:#16a34a;color:#fff;font-weight:700;padding:12px;border:none;border-radius:6px;font-size:1.2rem;cursor:pointer}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .8s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.fadeIn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:0}}.particle[_ngcontent-%COMP%]{position:absolute;width:8px;height:8px;border-radius:50%;pointer-events:none;z-index:200}`]})};function HJ(n,e){if(n&1&&(p(0,"p",18),v(1),g()),n&2){let t=A(2);y(),J(" \u274C ",t.errorMessage," ")}}function zJ(n,e){n&1&&(p(0,"p",19),v(1," Reprenez votre partie l\xE0 o\xF9 vous l'avez laiss\xE9e. "),g())}function GJ(n,e){if(n&1){let t=oe();p(0,"div",7)(1,"div",8)(2,"h1",9),v(3," JEUB2 "),g(),p(4,"div",10),v(5," ONLINE EDITION "),g(),p(6,"div",11),v(7,"Devenez le CEO ultime"),g()(),p(8,"div",12)(9,"button",13),$("click",function(){z(t);let i=A();return G(i.login())}),p(10,"span",14),v(11,"G"),g(),p(12,"span"),v(13,"SE CONNECTER AVEC GOOGLE"),g(),te(14,"div",15),g(),U(15,HJ,2,1,"p",16)(16,zJ,2,0,"p",17),g()()}if(n&2){let t=A();y(15),S("ngIf",t.errorMessage),y(),S("ngIf",!t.errorMessage)}}function qJ(n,e){if(n&1){let t=oe();p(0,"div",20)(1,"div",21),v(2,"\u{1F44B}"),g(),p(3,"h2",22),v(4,"Bienvenue, CEO !"),g(),p(5,"p",23),v(6,"Confirmez votre identit\xE9 pour cr\xE9er votre holding :"),g(),p(7,"input",24),Bo("ngModelChange",function(i){z(t);let s=A();return _c(s.chosenUsername,i)||(s.chosenUsername=i),G(i)}),$("keyup.enter",function(){z(t);let i=A();return G(i.confirmName())}),g(),p(8,"button",25),$("click",function(){z(t);let i=A();return G(i.confirmName())}),v(9," LANCER L'EMPIRE \u{1F680} "),g()()}if(n&2){let t=A();y(7),Uo("ngModel",t.chosenUsername),y(),S("disabled",!t.chosenUsername)}}var sv=class n{constructor(e,t,r){this.firebase=e;this.gameState=t;this.sound=r}isChoosingName=!1;chosenUsername="";pendingUser=null;errorMessage="";async login(){this.sound.playSoftPop(),this.errorMessage="";try{await this.firebase.loginGoogle();let e=this.firebase.authInstance.currentUser;if(e)if(await this.gameState.checkIfUserHasSave(e))console.log("\u{1F4BE} Sauvegarde trouv\xE9e !"),await this.gameState.loadCloudDataForUser(e);else{console.log("\u{1F195} Nouvelle partie."),this.pendingUser=e;let r=e.displayName,i=e.email?e.email.split("@")[0]:"PDG";this.chosenUsername=r||i,this.chosenUsername&&this.chosenUsername!=="Entrepreneur"?await this.confirmName():this.isChoosingName=!0}}catch(e){console.error(e),this.errorMessage="Erreur connexion : "+e.message}}async confirmName(){this.chosenUsername.trim()&&(this.sound.playSuccess(),this.pendingUser&&await this.gameState.initializeNewUser(this.pendingUser,this.chosenUsername))}static \u0275fac=function(t){return new(t||n)(ie(Ei),ie(qt),ie(hn))};static \u0275cmp=st({type:n,selectors:[["app-title-screen"]],standalone:!1,decls:8,vars:2,consts:[[1,"h-screen","w-screen","bg-slate-950","flex","flex-col","items-center","justify-center","relative","overflow-hidden","font-sans","select-none"],[1,"absolute","inset-0","opacity-20","pointer-events-none"],[1,"absolute","top-0","left-0","w-full","h-full","bg-[radial-gradient(circle_at_50%_50%,_#3b82f6_0%,_transparent_50%)]","animate-pulse"],[1,"grid-bg","absolute","inset-0"],["class","z-10 flex flex-col items-center gap-8 animate-fade-in-up",4,"ngIf"],["class","z-20 bg-slate-900 border border-slate-700 p-8 rounded-2xl shadow-2xl flex flex-col items-center gap-6 animate-fade-in max-w-md w-full mx-4",4,"ngIf"],[1,"absolute","bottom-4","text-slate-700","text-xs","font-mono"],[1,"z-10","flex","flex-col","items-center","gap-8","animate-fade-in-up"],[1,"relative","group","cursor-default"],[1,"text-8xl","md:text-9xl","font-black","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-b","from-white","to-slate-400","drop-shadow-2xl"],[1,"absolute","-top-4","-right-8","bg-blue-600","text-white","text-xs","font-bold","px-2","py-1","rounded","rotate-12","shadow-lg"],[1,"text-center","text-slate-500","font-mono","text-sm","tracking-[0.5em]","mt-2","uppercase"],[1,"flex","flex-col","items-center","gap-4","mt-8"],[1,"group","relative","px-8","py-4","bg-white","text-slate-900","font-black","text-xl","rounded-full","shadow-[0_0_40px_rgba(255,255,255,0.3)]","hover:shadow-[0_0_60px_rgba(255,255,255,0.5)]","hover:scale-105","transition-all","duration-300","flex","items-center","gap-3",3,"click"],[1,"text-2xl"],[1,"absolute","inset-0","rounded-full","border-2","border-white","opacity-0","group-hover:opacity-100","group-hover:scale-110","transition-all","duration-500"],["class","text-red-400 font-bold text-xs mt-4 max-w-xs text-center bg-red-900/20 p-2 rounded border border-red-500/30",4,"ngIf"],["class","text-slate-600 text-xs mt-4 max-w-xs text-center",4,"ngIf"],[1,"text-red-400","font-bold","text-xs","mt-4","max-w-xs","text-center","bg-red-900/20","p-2","rounded","border","border-red-500/30"],[1,"text-slate-600","text-xs","mt-4","max-w-xs","text-center"],[1,"z-20","bg-slate-900","border","border-slate-700","p-8","rounded-2xl","shadow-2xl","flex","flex-col","items-center","gap-6","animate-fade-in","max-w-md","w-full","mx-4"],[1,"text-4xl"],[1,"text-2xl","font-black","text-white","text-center"],[1,"text-slate-400","text-center","text-sm"],["type","text","placeholder","Votre Pseudo...",1,"w-full","bg-slate-800","border","border-slate-600","rounded-lg","px-4","py-3","text-white","font-bold","text-center","focus:border-blue-500","focus:outline-none","transition-colors","text-xl",3,"ngModelChange","keyup.enter","ngModel"],[1,"w-full","py-3","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-bold","rounded-lg","transition-all","shadow-lg",3,"click","disabled"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1),te(2,"div",2)(3,"div",3),g(),U(4,GJ,17,2,"div",4)(5,qJ,10,2,"div",5),p(6,"div",6),v(7,"v1.2.0 \u2022 Blackjack Update"),g()()),t&2&&(y(4),S("ngIf",!r.isChoosingName),y(),S("ngIf",r.isChoosingName))},dependencies:[Xt,Cl,J_,Sh],styles:[".grid-bg[_ngcontent-%COMP%]{background-image:linear-gradient(rgba(255,255,255,.05) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.05) 1px,transparent 1px);background-size:50px 50px}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};var KJ=["*"];function YJ(n,e){n&1&&(p(0,"div",43),v(1,"\u{1F525} RUSH (20h-02h) -1s \u{1F525}"),g())}function QJ(n,e){n&1&&(p(0,"div",44),v(1,"\u{1F451} Client VIP \u{1F451}"),g())}function JJ(n,e){n&1&&(p(0,"div",45),v(1,"Service Midi"),g())}function ZJ(n,e){if(n&1&&(p(0,"span",46),v(1),g()),n&2){let t=A();y(),J("\u{1F468}\u200D\u{1F373} ",t.cookCount," Auto")}}function XJ(n,e){if(n&1&&(p(0,"span",47),v(1),g()),n&2){let t=A();y(),J("\u26A1 +",t.serverBonus,"% Vit.")}}function eZ(n,e){if(n&1&&(p(0,"div",48),v(1),g()),n&2){let t=e.$implicit,r=e.index,i=A();Ke("animation-delay",r*50+"ms"),y(),J(" ",i.getIcon(t)," ")}}function tZ(n,e){n&1&&(p(0,"div",49)(1,"span"),v(2,"\u2705 PR\xCAT"),g(),p(3,"span",50),v(4,"Envoie !"),g()())}function nZ(n,e){if(n&1&&te(0,"div",51),n&2){let t=e.$implicit;Ke("left",t.x,"px")("top",t.y,"px")("background-color",t.color)("transform","rotate("+t.rotation+"deg)")}}function rZ(n,e){if(n&1&&(p(0,"div",52),v(1),g()),n&2){let t=e.$implicit,r=e.index,i=A();Ke("z-index",r),y(),J(" ",i.getIcon(t)," ")}}function iZ(n,e){if(n&1&&(p(0,"div",53),v(1),g()),n&2){let t=e.$implicit;Ke("left",t.x,"px")("top",t.y,"px"),S("ngClass",t.type),y(),J(" ",t.text," ")}}function sZ(n,e){if(n&1&&(p(0,"div",60),v(1),g()),n&2){let t=A().index;y(),J(" ",t+1," ")}}function oZ(n,e){if(n&1){let t=oe();p(0,"button",54),$("click",function(i){let s=z(t).$implicit,o=A();return G(o.addIngredient(s,i))}),U(1,sZ,2,1,"div",55),p(2,"span",56),v(3),g(),p(4,"span",57),v(5),g(),p(6,"div",58),te(7,"div",59),g()()}if(n&2){let t=e.$implicit,r=A();y(),S("ngIf",r.upgrades.hasKeyboard),y(2),Z(r.getIcon(t)),y(2),Z(r.getShortName(t)),y(2),Ke("width",r.mastery[t].xp/r.mastery[t].xpMax*100,"%")}}function aZ(n,e){n&1&&(p(0,"span",61),v(1,"ESPACE"),g())}var ov=class n{constructor(e,t,r){this.gameState=e;this.cdr=t;this.soundService=r;this.allIngredientsList.forEach(i=>this.mastery[i]={level:1,xp:0,xpMax:5})}CONFIG={TIME:{startSeconds:10,lessPerLevel:1,minSeconds:2},ECONOMY:{baseReward:35,percentPerLevel:20,ingredientLevelBonus:10},VIP:{chance:.1,rewardMult:5,timeDivisor:2},PROGRESSION:{unlockCheeseLevel:3,unlockSaladLevel:6,unlockTomatoLevel:9},FX:{confettiEvery:5,feverThreshold:5,confettiColors:["#ef4444","#3b82f6","#22c55e","#eab308","#a855f7","#ffffff"]},AUTO:{cookSpeedBase:5e3,serverSlowPct:10},UNLOCK_COSTS:{CHEESE:1e3,ONION:500,SALAD:2e3,BACON:3500,PICKLE:0,TOMATO:0,SAUCE:0}};currentMoney=0;isVip=!1;triggerShake=!1;comboMultiplier=1;currentOrder=[];currentStack=[];allIngredientsList=Object.values(_h);currentAvailableIngredients=[];mastery={};upgrades={grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:[],maxServiceReached:1,hasKeyboard:!1};cookCount=0;serverCount=0;serverBonus=0;autoCookInterval;displayTimeLeft=0;totalTimeForLevel=0;isRunning=!1;rafId;endTime=0;floatingTexts=[];particles=[];counter=0;timeOfDay=6;currentDay=1;burgerStartTime=0;get isFeverMode(){return this.timeOfDay>=20||this.timeOfDay<2}get remainingOrder(){return this.currentOrder.slice(this.currentStack.length)}handleKeyboardEvent(e){if(!this.upgrades.hasKeyboard)return;let t=e.key,r=parseInt(t);!isNaN(r)&&r>0&&r<=this.currentAvailableIngredients.length&&this.addIngredient(this.currentAvailableIngredients[r-1]),(t===" "||t==="Enter")&&(e.preventDefault(),this.validateBurger())}ngOnInit(){this.gameState.gameState$.subscribe(e=>{this.currentMoney=e.money,this.timeOfDay=e.timeOfDay,this.currentDay=e.day,e.foodtruckMastery&&(this.mastery=JSON.parse(JSON.stringify(e.foodtruckMastery))),e.foodtruckUpgrades&&(this.upgrades=O({},e.foodtruckUpgrades));let t=e.companies.find(r=>r.type==="FOODTRUCK");if(t){let r=this.gameState.getTotalEmployeePower(t.type,"COOK"),i=this.gameState.getTotalEmployeePower(t.type,"SERVER");this.cookCount=Math.floor(r),this.serverBonus=Math.min(75,i)}this.cdr.markForCheck()}),this.resetGame(1)}ngOnDestroy(){this.stopChrono(),this.stopAutoCook()}startAutoCook(){if(this.stopAutoCook(),this.cookCount>0){let e=Math.max(500,this.CONFIG.AUTO.cookSpeedBase/this.cookCount);this.autoCookInterval=setInterval(()=>{this.isRunning&&(this.performAutoAction(),this.cdr.markForCheck())},e)}}stopAutoCook(){this.autoCookInterval&&clearInterval(this.autoCookInterval)}performAutoAction(){this.currentStack.length<this.currentOrder.length?this.addIngredient(this.currentOrder[this.currentStack.length],void 0,!0):this.validateBurger()}addIngredient(e,t,r=!1){this.isRunning||(this.startChrono(),this.startAutoCook()),r||(["STEAK","BACON"].includes(e)?this.soundService.playSteakSound():["SALAD","ONION"].includes(e)?this.soundService.playSaladSound():this.soundService.playSoftPop()),this.currentStack.push(e),r&&this.spawnText("\u{1F916}",100+Math.random()*150,200,"auto");let i=this.currentStack.length-1;this.currentOrder[i]!==e&&(this.spawnText("RAT\xC9 !",t?.clientX||200,t?.clientY||200,"error"),this.failLevel()),this.cdr.markForCheck()}validateBurger(e){if(this.currentStack.length!==this.currentOrder.length){this.failLevel();return}let t=Date.now()-this.burgerStartTime;this.gameState.gameState$.pipe(it(1)).subscribe(i=>{let s=O({},i.stats);s.burgersServed=(s.burgersServed||0)+1,s.bestServiceCombo=Math.max(s.bestServiceCombo||0,this.comboMultiplier),(s.fastestBurgerMs===0||t<s.fastestBurgerMs)&&(s.fastestBurgerMs=t),this.gameState.updateState({stats:s})}),this.stopChrono(),this.stopAutoCook(),this.soundService.playSuccess(),this.gameState.incrementCustomersServed(),this.gainXpForIngredients(e);let r=this.getCurrentReward();this.gameState.addMoney(r),this.spawnText(`+${Math.floor(r)}\u20AC`,200,150,this.isVip?"vip":"success"),this.gameState.updateMaxServiceReached(this.comboMultiplier),this.comboMultiplier>=6&&this.gameState.unlockIngredientByService("PICKLE"),this.comboMultiplier>=10&&this.gameState.unlockIngredientByService("TOMATO"),this.comboMultiplier>=15&&this.gameState.unlockIngredientByService("SAUCE"),(this.isVip||this.comboMultiplier%this.CONFIG.FX.confettiEvery===0)&&this.spawnConfetti(),this.resetGame(this.comboMultiplier+1)}failLevel(){this.stopChrono(),this.stopAutoCook(),this.soundService.playError(),this.triggerShake=!0,setTimeout(()=>{this.triggerShake=!1,this.cdr.markForCheck()},400),this.resetGame(1)}resetGame(e,t=!1){this.comboMultiplier=e,this.currentStack=[],this.isRunning=!1,this.burgerStartTime=Date.now(),t?this.isVip=!0:this.isVip=Math.random()<this.CONFIG.VIP.chance+this.upgrades.marketingLevel*.02;let r=this.CONFIG.TIME.startSeconds-(this.comboMultiplier-1)*this.CONFIG.TIME.lessPerLevel;r+=this.upgrades.grillLevel*.5,this.isFeverMode&&!this.isVip&&(r-=1),r<this.CONFIG.TIME.minSeconds&&(r=this.CONFIG.TIME.minSeconds),this.serverBonus>0&&(r=r*(1+this.serverBonus/100)),this.isVip&&(r=r/this.CONFIG.VIP.timeDivisor),this.totalTimeForLevel=r*1e3,this.displayTimeLeft=this.totalTimeForLevel,this.generateSmartOrder(),this.cdr.detectChanges()}generateSmartOrder(){let e=["STEAK"];(this.isUnlocked("CHEESE")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockCheeseLevel)&&e.push("CHEESE"),(this.isUnlocked("SALAD")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockSaladLevel)&&e.push("SALAD"),(this.isUnlocked("TOMATO")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockTomatoLevel)&&e.push("TOMATO"),this.allIngredientsList.forEach(i=>{this.isUnlocked(i)&&!e.includes(i)&&i!=="BUN"&&e.push(i)}),this.currentAvailableIngredients=["BUN",...e];let t=Math.min(6,1+Math.floor(this.comboMultiplier/3)),r=[];for(let i=0;i<t;i++)r.push(e[Math.floor(Math.random()*e.length)]);this.currentOrder=["BUN",...r,"BUN"]}getCurrentReward(){let e=1+this.CONFIG.ECONOMY.percentPerLevel/100,t=this.CONFIG.ECONOMY.baseReward*Math.pow(e,this.comboMultiplier-1);t+=this.upgrades.serviceLevel*5;let r=0;this.currentOrder.forEach(o=>{this.mastery[o]&&(r+=this.mastery[o].level)});let s=1+((this.currentOrder.length>0?r/this.currentOrder.length:1)-1)*(this.CONFIG.ECONOMY.ingredientLevelBonus/100);return t=t*s,this.isVip&&(t=t*this.CONFIG.VIP.rewardMult),t}gainXpForIngredients(e){[...new Set(this.currentStack)].forEach(r=>{this.mastery[r]||(this.mastery[r]={level:1,xp:0,xpMax:5});let i=this.mastery[r];i.xp++,i.xp>=i.xpMax&&(i.level++,i.xp=0,i.xpMax=Math.floor(i.xpMax*1.5),e&&this.spawnText(`${this.getIcon(r)} UP!`,e.clientX,e.clientY-50,"levelup"))}),this.gameState.updateIngredientMastery(this.mastery)}startChrono(){this.isRunning=!0,this.endTime=Date.now()+this.totalTimeForLevel;let e=()=>{if(!this.isRunning)return;let t=this.endTime-Date.now();t<=0?(this.displayTimeLeft=0,this.spawnText("TEMPS \xC9COUL\xC9 !",200,200,"error"),this.failLevel(),this.cdr.detectChanges()):(this.displayTimeLeft=t,this.cdr.detectChanges(),this.rafId=requestAnimationFrame(e))};this.rafId=requestAnimationFrame(e)}stopChrono(){this.isRunning=!1,this.rafId&&cancelAnimationFrame(this.rafId)}getBarPercentage(){return this.displayTimeLeft/this.totalTimeForLevel*100}isTimeRunningOut(){return this.getBarPercentage()<30}getActionBtnClass(){return this.isFeverMode&&!this.isVip?"bg-red-600 hover:bg-red-500 border-red-800 text-white shadow-[0_4px_20px_rgba(239,68,68,0.4)] animate-pulse":this.isVip?"bg-gradient-to-r from-amber-600 to-amber-500 border-amber-700 text-amber-50 shadow-[0_4px_20px_rgba(245,158,11,0.4)]":"bg-blue-600 hover:bg-blue-500 border-blue-700 text-white"}getButtonLabel(){return this.isFeverMode&&!this.isVip?"\u{1F525} FEVER !":this.isVip?"\u{1F451} SERVIR LE ROI DU BURGER":"\u{1F6CE}\uFE0F ENVOYER"}formatGameTime(e){let t=Math.floor(e),r=Math.floor((e-t)*60);return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}spawnConfetti(){for(let e=0;e<30;e++)this.particles.push({id:this.counter++,x:Math.random()*300+50,y:200,color:this.CONFIG.FX.confettiColors[Math.floor(Math.random()*this.CONFIG.FX.confettiColors.length)],rotation:Math.random()*360,speedX:(Math.random()-.5)*10,speedY:(Math.random()-1)*15-5});this.animateParticles()}animateParticles(){this.particles.length!==0&&(this.particles.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,e.speedY+=.5,e.rotation+=5}),this.particles=this.particles.filter(e=>e.y<600),this.particles.length>0&&requestAnimationFrame(()=>{this.animateParticles(),this.cdr.detectChanges()}))}spawnText(e,t,r,i){let s=this.counter++;this.floatingTexts.push({id:s,text:e,x:t||200,y:r||100,type:i}),setTimeout(()=>{this.floatingTexts=this.floatingTexts.filter(o=>o.id!==s),this.cdr.detectChanges()},1e3)}isUnlocked(e){return this.upgrades.unlockedIngredients.includes(e)}getShortName(e){return{BUN:"Pain",STEAK:"Viande",CHEESE:"Fromage",SALAD:"Salade",TOMATO:"Tomate",SAUCE:"Sauce",ONION:"Oignon",PICKLE:"Cornich.",BACON:"Bacon"}[e]||e}getIcon(e){return{BUN:"\u{1F35E}",STEAK:"\u{1F969}",CHEESE:"\u{1F9C0}",SALAD:"\u{1F96C}",TOMATO:"\u{1F345}",SAUCE:"\u{1F963}",ONION:"\u{1F9C5}",PICKLE:"\u{1F952}",BACON:"\u{1F953}"}[e]||"\u2753"}static \u0275fac=function(t){return new(t||n)(ie(qt),ie(At),ie(hn))};static \u0275cmp=st({type:n,selectors:[["app-foodtruck-game"]],hostBindings:function(t,r){t&1&&$("keydown",function(s){return r.handleKeyboardEvent(s)},Cu)},standalone:!1,ngContentSelectors:KJ,decls:60,vars:43,consts:[[1,"h-full","bg-slate-900","p-6","flex","flex-col","gap-6","font-sans","select-none","overflow-hidden","relative","transition-colors","duration-500"],[1,"grid","grid-cols-12","gap-6","h-24","shrink-0","z-10"],[1,"col-span-3","card-panel","flex","flex-col","justify-center","px-6","relative","overflow-hidden","group"],[1,"text-slate-500","text-[10px]","font-bold","uppercase","tracking-widest","mb-1","label-text"],[1,"text-2xl","font-black","text-white","tracking-tight","value-text","group-hover:scale-105","transition-transform","origin-left"],[1,"absolute","right-2","bottom-[-10px]","text-6xl","opacity-10","rotate-12","emoji-bg"],[1,"col-span-6","card-panel","flex","items-center","justify-between","px-2","relative"],[1,"flex","flex-col","items-center","justify-center","w-24","h-full","border-r","border-white/10"],[1,"text-3xl","font-black","text-white","value-text"],[1,"text-[9px]","text-slate-500","uppercase","font-bold","label-text"],[1,"flex-1","flex","flex-col","items-center","justify-center"],["class","text-red-500 font-black text-lg animate-pulse tracking-widest uppercase glow-text",4,"ngIf"],["class","text-amber-400 font-black text-lg animate-pulse tracking-widest uppercase glow-text",4,"ngIf"],["class","text-slate-400 font-bold text-xs uppercase tracking-wide",4,"ngIf"],[1,"flex","gap-2","mt-1","opacity-80"],["class","badge-pill bg-blue-500/20 text-blue-300 border-blue-500/30",4,"ngIf"],["class","badge-pill bg-green-500/20 text-green-300 border-green-500/30",4,"ngIf"],[1,"col-span-3","card-panel","flex","flex-col","justify-center","items-end","px-6","relative","overflow-hidden"],[1,"text-3xl","font-mono","font-bold","text-white","z-10","value-text"],[1,"absolute","bottom-0","left-0","h-1.5","w-full","bg-black/20"],[1,"h-full","transition-all","duration-200"],[1,"flex-1","grid","grid-cols-12","gap-6","min-h-0","z-0"],[1,"col-span-3","card-panel","flex","flex-col","items-center","py-4","overflow-hidden"],[1,"text-[10px]","font-bold","text-slate-500","uppercase","tracking-widest","mb-2","label-text","shrink-0"],[1,"mb-3","flex","flex-col","items-center","bg-slate-950/30","w-full","py-2","border-y","border-white/5","shrink-0"],[1,"text-2xl","font-black","text-green-400","tracking-tight"],[1,"text-[8px]","text-slate-500","uppercase","font-bold"],[1,"flex-1","min-h-0","w-full","overflow-y-auto","custom-scroll","px-2","flex","flex-col","items-center","gap-2","pb-2"],["class","w-14 h-14 shrink-0 rounded-xl flex items-center justify-center text-3xl shadow-inner border border-white/5 bg-black/20 animate-in",3,"animation-delay",4,"ngFor","ngForOf"],["class","mt-4 text-green-400 font-bold text-xs animate-pulse flex flex-col items-center",4,"ngIf"],[1,"col-span-9","card-panel","relative","overflow-hidden","flex","items-end","justify-center","pb-10","group","bg-grid-pattern"],[1,"absolute","inset-0","pointer-events-none"],["class","absolute w-2 h-2 rounded-full",3,"left","top","background-color","transform",4,"ngFor","ngForOf"],[1,"relative","z-10","flex","flex-col-reverse","items-center","transition-transform","duration-200"],["class","text-8xl -mb-14 drop-shadow-2xl animate-pop hover:scale-105 transition-transform cursor-pointer select-none",3,"zIndex",4,"ngFor","ngForOf"],[1,"w-72","h-6","bg-slate-700/50","rounded-[100%]","mt-8","shadow-xl","blur-sm","z-[-1]","plate-shadow"],["class","absolute pointer-events-none font-bold text-3xl z-50 animate-float",3,"left","top","ngClass",4,"ngFor","ngForOf"],[1,"shrink-0","card-panel","p-4","z-20","shadow-2xl","border-t","border-white/10","transition-all","duration-300"],[1,"flex","gap-4","items-stretch"],[1,"flex-1","flex","flex-wrap","gap-2","justify-center","content-center"],["class",`relative group bg-slate-800 border-b-4 border-slate-950 rounded-xl 
                              active:border-b-0 active:translate-y-1 transition-all 
                              flex flex-col items-center justify-center overflow-hidden hover:bg-slate-700 ing-key
                              w-20 h-20 lg:w-24 lg:h-24`,3,"click",4,"ngFor","ngForOf"],[1,"w-32","lg:w-48","rounded-xl","font-black","text-lg","lg:text-xl","uppercase","tracking-widest","shadow-lg","border-b-4","active:border-b-0","active:translate-y-1","transition-all","flex","flex-col","items-center","justify-center","text-center","leading-none","action-key","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none","shrink-0","self-stretch","min-h-[5rem]",3,"click","disabled","ngClass"],["class","text-[10px] opacity-60 font-normal mt-1 border border-white/30 px-2 rounded",4,"ngIf"],[1,"text-red-500","font-black","text-lg","animate-pulse","tracking-widest","uppercase","glow-text"],[1,"text-amber-400","font-black","text-lg","animate-pulse","tracking-widest","uppercase","glow-text"],[1,"text-slate-400","font-bold","text-xs","uppercase","tracking-wide"],[1,"badge-pill","bg-blue-500/20","text-blue-300","border-blue-500/30"],[1,"badge-pill","bg-green-500/20","text-green-300","border-green-500/30"],[1,"w-14","h-14","shrink-0","rounded-xl","flex","items-center","justify-center","text-3xl","shadow-inner","border","border-white/5","bg-black/20","animate-in"],[1,"mt-4","text-green-400","font-bold","text-xs","animate-pulse","flex","flex-col","items-center"],[1,"text-[9px]","opacity-70"],[1,"absolute","w-2","h-2","rounded-full"],[1,"text-8xl","-mb-14","drop-shadow-2xl","animate-pop","hover:scale-105","transition-transform","cursor-pointer","select-none"],[1,"absolute","pointer-events-none","font-bold","text-3xl","z-50","animate-float",3,"ngClass"],[1,"relative","group","bg-slate-800","border-b-4","border-slate-950","rounded-xl","active:border-b-0","active:translate-y-1","transition-all","flex","flex-col","items-center","justify-center","overflow-hidden","hover:bg-slate-700","ing-key","w-20","h-20","lg:w-24","lg:h-24",3,"click"],["class","absolute top-1 left-1 bg-white/20 text-white/70 text-[10px] px-1.5 rounded font-mono border border-white/10",4,"ngIf"],[1,"text-3xl","lg:text-4xl","mb-1","group-hover:scale-110","transition-transform","duration-200"],[1,"text-[8px]","lg:text-[9px]","font-bold","text-slate-500","uppercase","tracking-wide","group-hover:text-slate-300","label-text","truncate","w-full","text-center","px-1"],[1,"absolute","bottom-0","left-0","w-full","h-1","bg-black/40"],[1,"h-full","bg-blue-500","transition-all","duration-300"],[1,"absolute","top-1","left-1","bg-white/20","text-white/70","text-[10px]","px-1.5","rounded","font-mono","border","border-white/10"],[1,"text-[10px]","opacity-60","font-normal","mt-1","border","border-white/30","px-2","rounded"]],template:function(t,r){t&1&&($p(),p(0,"div",0),Hp(1),p(2,"div",1)(3,"div",2)(4,"div",3),v(5,"Caisse"),g(),p(6,"div",4),v(7),ce(8,"number"),g(),p(9,"div",5),v(10,"\u{1F4B0}"),g()(),p(11,"div",6)(12,"div",7)(13,"span",8),v(14),g(),p(15,"span",9),v(16),g()(),p(17,"div",10),U(18,YJ,2,0,"div",11)(19,QJ,2,0,"div",12)(20,JJ,2,0,"div",13),p(21,"div",14),U(22,ZJ,2,1,"span",15)(23,XJ,2,1,"span",16),g()()(),p(24,"div",17)(25,"div",3),v(26,"Temps Restant"),g(),p(27,"div",18),v(28),ce(29,"number"),g(),p(30,"div",19),te(31,"div",20),g()()(),p(32,"div",21)(33,"div",22)(34,"div",23),v(35,"\xC0 Pr\xE9parer"),g(),p(36,"div",24)(37,"span",25),v(38),ce(39,"number"),g(),p(40,"span",26),v(41,"Valeur Commande"),g()(),p(42,"div",27),U(43,eZ,2,3,"div",28)(44,tZ,5,0,"div",29),g()(),p(45,"div",30)(46,"div",31),U(47,nZ,1,8,"div",32),g(),p(48,"div",33),U(49,rZ,2,3,"div",34),te(50,"div",35),g(),U(51,iZ,2,6,"div",36),g()(),p(52,"div",37)(53,"div",38)(54,"div",39),U(55,oZ,8,5,"button",40),g(),p(56,"button",41),$("click",function(s){return r.validateBurger(s)}),p(57,"span"),v(58),g(),U(59,aZ,2,0,"span",42),g()()()()),t&2&&(fe("vip-theme",r.isVip)("fever-theme",r.isFeverMode&&!r.isVip),y(7),J(" ",Pe(8,34,r.currentMoney,"1.0-0")," \u20AC "),y(7),Z(r.formatGameTime(r.timeOfDay)),y(2),J("Jour ",r.currentDay),y(2),S("ngIf",r.isFeverMode),y(),S("ngIf",r.isVip&&!r.isFeverMode),y(),S("ngIf",!r.isFeverMode&&!r.isVip),y(2),S("ngIf",r.cookCount>0),y(),S("ngIf",r.serverBonus>0),y(5),J("",Pe(29,37,r.displayTimeLeft/1e3,"1.1-1"),"s"),y(3),Ke("width",r.getBarPercentage(),"%"),fe("bg-blue-500",!r.isTimeRunningOut()&&!r.isVip&&!r.isFeverMode)("bg-red-500",r.isTimeRunningOut()||r.isFeverMode)("bg-amber-400",r.isVip),y(7),J("",Pe(39,40,r.getCurrentReward(),"1.0-0")," \u20AC"),y(5),S("ngForOf",r.remainingOrder),y(),S("ngIf",r.remainingOrder.length===0),y(3),S("ngForOf",r.particles),y(),Ke("transform","scale("+(1-r.currentStack.length*.02)+")"),y(),S("ngForOf",r.currentStack),y(2),S("ngForOf",r.floatingTexts),y(4),S("ngForOf",r.currentAvailableIngredients),y(),S("disabled",r.currentStack.length===0)("ngClass",r.getActionBtnClass()),y(2),Z(r.getButtonLabel()),y(),S("ngIf",r.upgrades.hasKeyboard))},dependencies:[$o,Ln,Xt,Zn],styles:[".card-panel[_ngcontent-%COMP%]{background-color:#1e293b;border:1px solid #334155;border-radius:1rem;box-shadow:0 4px 6px -1px #0000001a}.badge-pill[_ngcontent-%COMP%]{padding:2px 8px;border-radius:99px;font-size:10px;font-weight:700;border:1px solid;display:inline-block}.vip-theme[_ngcontent-%COMP%]   .card-panel[_ngcontent-%COMP%]{background-color:#2a2010;border-color:#78350f}.vip-theme[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#d97706}.vip-theme[_ngcontent-%COMP%]   .value-text[_ngcontent-%COMP%]{color:#fcd34d;text-shadow:0 0 10px rgba(251,191,36,.5)}.vip-theme[_ngcontent-%COMP%]   .ing-key[_ngcontent-%COMP%]{background-color:#451a03;border-color:#78350f}.vip-theme[_ngcontent-%COMP%]   .plate-shadow[_ngcontent-%COMP%]{background-color:#b45309;opacity:.5}.vip-theme[_ngcontent-%COMP%]   .glow-text[_ngcontent-%COMP%]{text-shadow:0 0 15px #fbbf24}.fever-theme[_ngcontent-%COMP%]   .card-panel[_ngcontent-%COMP%]{background-color:#2a1010;border-color:#7f1d1d}.fever-theme[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#f87171}.fever-theme[_ngcontent-%COMP%]   .value-text[_ngcontent-%COMP%]{color:#fecaca;text-shadow:0 0 10px rgba(239,68,68,.5)}.fever-theme[_ngcontent-%COMP%]   .glow-text[_ngcontent-%COMP%]{text-shadow:0 0 15px #ef4444}.bg-grid-pattern[_ngcontent-%COMP%]{background-image:radial-gradient(#334155 1px,transparent 1px);background-size:20px 20px;background-position:center}.vip-theme[_ngcontent-%COMP%]   .bg-grid-pattern[_ngcontent-%COMP%]{background-image:radial-gradient(#92400e 1px,transparent 1px)}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.4,0,.2,1) backwards}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-pop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop .15s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}.animate-float[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_floatUp .8s forwards ease-out}@keyframes _ngcontent-%COMP%_floatUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-40px)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade .2s ease-out}@keyframes _ngcontent-%COMP%_fade{0%{opacity:0}to{opacity:1}}.success[_ngcontent-%COMP%]{color:#4ade80;text-shadow:0 2px 0 #000}.error[_ngcontent-%COMP%]{color:#ef4444;text-shadow:0 2px 0 #000}.vip[_ngcontent-%COMP%]{color:#fbbf24;text-shadow:0 0 10px #b45309;font-size:2.5rem}.auto[_ngcontent-%COMP%]{color:#60a5fa;text-shadow:0 2px 0 #1e3a8a}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:2px}"],changeDetection:0})};var av=class n{constructor(e){this.gameState=e}progress=0;maxProgress=15;itemValue=150;get progressPercent(){return Math.floor(this.progress/this.maxProgress*100)}work(){this.progress++,this.progress>=this.maxProgress&&this.finishItem()}finishItem(){this.gameState.addMoney(this.itemValue),this.progress=0}static \u0275fac=function(t){return new(t||n)(ie(qt))};static \u0275cmp=st({type:n,selectors:[["app-factory-game"]],standalone:!1,decls:13,vars:4,consts:[[1,"p-8","bg-slate-800","rounded-xl","border","border-slate-700","text-white","flex","flex-col","items-center","shadow-xl"],[1,"text-2xl","font-bold","mb-8","text-blue-400"],[1,"relative","w-56","h-56","mb-8","cursor-pointer","transition-transform","active:scale-95",3,"click"],[1,"absolute","inset-0","rounded-full","border-8","border-slate-700","bg-slate-900"],[1,"absolute","inset-0","rounded-full","bg-blue-600","opacity-50","transition-all","duration-75"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","z-10","select-none"],[1,"text-4xl","font-black"],[1,"text-xs","text-slate-400","uppercase","mt-1"],[1,"w-full","max-w-xs","py-4","bg-orange-600","hover:bg-orange-500","text-white","rounded-lg","font-bold","text-xl","uppercase","tracking-wider","shadow-lg","border-b-4","border-orange-800","active:border-0","active:translate-y-1","transition-all",3,"click"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"h3",1),v(2,"\u{1F3ED} Ligne d'Assemblage"),g(),p(3,"div",2),$("click",function(){return r.work()}),te(4,"div",3)(5,"div",4),p(6,"div",5)(7,"span",6),v(8),g(),p(9,"span",7),v(10,"Assemblage"),g()()(),p(11,"button",8),$("click",function(){return r.work()}),v(12),g()()),t&2&&(y(5),Ke("clip-path","inset("+(100-r.progressPercent)+"% 0 0 0)"),y(3),J("",r.progressPercent,"%"),y(4),J(" PRODUIRE (+",r.itemValue,"\u20AC) "))},encapsulation:2})};var dZ=["hiddenInput"],EU=(n,e)=>[n,e],wU=(n,e,t)=>[n,e,t];function hZ(n,e){if(n&1){let t=oe();p(0,"button",22),$("click",function(i){z(t);let s=A(2);return i.stopPropagation(),G(s.drinkCoffee())}),v(1," \u2615 PAUSE "),g()}}function fZ(n,e){n&1&&(p(0,"div",23),v(1,"GEL\xC9"),g())}function pZ(n,e){if(n&1&&(p(0,"div",8)(1,"div",18)(2,"span",19),v(3),ce(4,"number"),g()(),U(5,hZ,2,0,"button",20)(6,fZ,2,0,"div",21),g()),n&2){let t=A();y(),S("ngClass",zp(8,EU,t.activeTheme.borderClass,t.activeTheme.bgClass)),y(),S("ngClass",t.activeTheme.accentClass),y(),J("",Pe(4,5,t.currentWpm,"1.0-0")," WPM"),y(2),S("ngIf",t.coffeeLevel>0&&!t.isCoffeeActive&&t.coffeeAvailable),y(),S("ngIf",t.isCoffeeActive)}}function mZ(n,e){n&1&&(p(0,"span",24),te(1,"span",25)(2,"span",26),g())}function gZ(n,e){if(n&1&&(p(0,"div",27),v(1),g()),n&2){let t=e.$implicit,r=A();S("ngClass",Gp(2,wU,r.activeTheme.borderClass,r.activeTheme.accentClass,r.activeTheme.bgClass)),y(),J(" ",t," ")}}function _Z(n,e){if(n&1){let t=oe();p(0,"div",34),$("click",function(i){let s=z(t).$implicit,o=A(2);return i.stopPropagation(),G(o.startMission(s))}),p(1,"div",35)(2,"span",36),v(3),g(),p(4,"span",37),v(5),g()(),p(6,"h3",38),v(7),g(),p(8,"div",39)(9,"div",40)(10,"span",41),v(11,"Gain"),g(),p(12,"span",42),v(13),ce(14,"number"),g()(),p(15,"div",43)(16,"span",41),v(17,"Temps"),g(),p(18,"span",44),v(19),g()()()()}if(n&2){let t=e.$implicit,r=A(2);S("ngClass",Gp(12,wU,r.activeTheme.borderClass,r.activeTheme.bgClass,r.getMissionClass(t.difficulty))),y(3),Z(r.getIcon(t.difficulty)),y(),S("ngClass",r.getDifficultyClass(t.difficulty)),y(),Z(t.difficulty),y(2),Z(t.title),y(),S("ngClass",r.activeTheme.borderClass),y(4),S("ngClass",r.activeTheme.accentClass),y(),J("",Pe(14,9,r.calculateReward(t),"1.0-0")," \u20AC"),y(6),J("",t.timeLimit,"s")}}function vZ(n,e){if(n&1&&(p(0,"div",28)(1,"div",29)(2,"h2",30),v(3,"\u{1F4DC} Vos Contrats"),g(),p(4,"p",31),v(5,"Vos employ\xE9s g\xE8rent leurs propres projets en autonomie."),g(),p(6,"div",32),U(7,_Z,20,16,"div",33),g()()()),n&2){let t=A();y(7),S("ngForOf",t.availableMissions)}}function yZ(n,e){if(n&1&&te(0,"span",62),n&2){let t=A(4);S("ngClass",t.activeTheme.cursorClass)}}function bZ(n,e){if(n&1&&(p(0,"span"),U(1,yZ,1,1,"span",60),p(2,"span",61),v(3),g()()),n&2){let t=e.$implicit,r=A(3);y(),S("ngIf",t.index===r.userInput.length),y(),S("ngClass",r.getCharClass(t.index,t.value)),y(),Z(t.index<r.userInput.length?r.userInput[t.index]:t.value)}}function EZ(n,e){if(n&1&&(p(0,"span",58),U(1,bZ,4,3,"span",59),g()),n&2){let t=e.$implicit;fe("whitespace-nowrap",!t.isSpace),y(),S("ngForOf",t.chars)}}function wZ(n,e){n&1&&(p(0,"div",63),v(1,"CORRIGEZ !"),g())}function IZ(n,e){if(n&1){let t=oe();p(0,"div",45),te(1,"div",46),p(2,"div",47,0)(4,"div",48)(5,"div",49),v(6),g(),p(7,"div",50),v(8,"COMBO"),g()(),p(9,"div",51)(10,"div",52),U(11,EZ,2,3,"span",53),g(),U(12,wZ,2,0,"div",54),g(),p(13,"div",55)(14,"div",56),v(15),ce(16,"number"),g()(),p(17,"input",57,1),$("input",function(i){z(t);let s=A();return G(s.onInput(i))})("blur",function(){z(t);let i=A();return G(i.focusInput())}),g()()()}if(n&2){let t=A();y(),S("ngClass",t.activeTheme.bgClass),y(3),fe("opacity-0",t.currentCombo<2),y(),fe("from-amber-400",t.currentCombo>=50),y(),J("x",t.currentCombo),y(3),fe("shake-anim",t.hasError),y(2),S("ngForOf",t.currentDisplayTokens),y(),S("ngIf",t.isFinishedButWrong),y(2),fe("text-red-500",t.timeLeft<=5),y(),J("",Pe(16,13,t.timeLeft,"1.1-1"),"s")}}function SZ(n,e){if(n&1&&(p(0,"div",84),v(1),g()),n&2){let t=A(2);y(),J("",t.TEAM_BUILDING_COST,"\u20AC \u2022 30s \u2022 Boost x2.5")}}function CZ(n,e){n&1&&(p(0,"div",85)(1,"div",86),v(2,"\u{1F47B}"),g(),p(3,"div"),v(4,"Aucun employ\xE9."),g()())}function TZ(n,e){n&1&&(p(0,"div",100),v(1,"En mission..."),g())}function DZ(n,e){n&1&&(p(0,"div",101),v(1,"Libre"),g())}function xZ(n,e){n&1&&(p(0,"div",102),v(1,"PAUSE"),g())}function AZ(n,e){n&1&&(p(0,"div",103),v(1,"ACTIF"),g())}function RZ(n,e){if(n&1&&(p(0,"div",104),te(1,"div",105),g()),n&2){let t=e.ngIf,r=A(3);y(),Ke("width",t.targetText&&t.targetText.length>0?t.typedText.length/t.targetText.length*100:0,"%"),S("ngClass",r.isTeamBuildingActive?"bg-orange-500":"bg-blue-500")}}function kZ(n,e){if(n&1){let t=oe();p(0,"div",87)(1,"div",88)(2,"div",89)(3,"span",36),v(4),g(),p(5,"div")(6,"div",90),v(7),g(),U(8,TZ,2,0,"div",91)(9,DZ,2,0,"div",92),g()(),U(10,xZ,2,0,"div",93)(11,AZ,2,0,"div",94),g(),U(12,RZ,2,3,"div",95),p(13,"div",96)(14,"button",97),$("click",function(){let i=z(t).$implicit,s=A(2);return G(s.watchEmployee(i))}),v(15,"\u{1F441}\uFE0F VOIR \xC9CRAN"),g(),p(16,"button",98),$("click",function(){let i=z(t).$implicit,s=A(2);return G(s.trainEmployee(i))}),p(17,"span"),v(18,"FORMATION"),g(),p(19,"span"),v(20),g()(),p(21,"button",99),$("click",function(){let i=z(t).$implicit,s=A(2);return G(s.togglePause(i))}),v(22),g()()()}if(n&2){let t,r,i=e.$implicit,s=e.index,o=A(2);fe("opacity-50",i.isPaused),y(4),Z(i.role==="DEV_JUNIOR"?"\u{1F468}\u200D\u{1F4BB}":"\u{1F9D9}\u200D\u2642\uFE0F"),y(3),J("Dev #",s+1),y(),S("ngIf",(t=o.getWorkerState(i.id))==null?null:t.currentMission),y(),S("ngIf",!((r=o.getWorkerState(i.id))!=null&&r.currentMission)),y(),S("ngIf",i.isPaused),y(),S("ngIf",!i.isPaused),y(),S("ngIf",o.getWorkerState(i.id)),y(4),S("disabled",o.currentMoney<o.getTrainCost(i)),y(4),J("",o.getTrainCost(i),"\u20AC"),y(2),Z(i.isPaused?"REPRENDRE":"METTRE EN PAUSE")}}function PZ(n,e){if(n&1){let t=oe();p(0,"div",64),$("click",function(i){return z(t),G(i.stopPropagation())}),p(1,"div",65)(2,"div",66)(3,"h3",67),v(4,"\u{1F465} GESTION \xC9QUIPE"),g(),p(5,"button",68),$("click",function(){z(t);let i=A();return G(i.toggleStaff())}),v(6,"\u2715"),g()(),p(7,"div",69)(8,"div",70)(9,"button",71),$("click",function(){z(t);let i=A();return G(i.startTeamBuilding())}),p(10,"span",36),v(11,"\u{1F355}"),g(),p(12,"div",72)(13,"div"),v(14),g(),U(15,SZ,2,1,"div",73),g()(),p(16,"div",74)(17,"div",75),v(18,"Stagiaire"),g(),p(19,"div",76),v(20,"Petits contrats."),g(),p(21,"button",77),$("click",function(){z(t);let i=A();return G(i.hire(0))}),v(22),g()(),p(23,"div",78)(24,"div",75),v(25,"Senior"),g(),p(26,"div",76),v(27,"Gros contrats."),g(),p(28,"button",79),$("click",function(){z(t);let i=A();return G(i.hire(1))}),v(29),g()()(),p(30,"div",80),U(31,CZ,5,0,"div",81),p(32,"div",82),U(33,kZ,23,12,"div",83),g()()()()()}if(n&2){let t=A();y(9),S("disabled",t.currentMoney<t.TEAM_BUILDING_COST||t.isTeamBuildingActive)("ngClass",t.isTeamBuildingActive?"bg-green-600 text-white animate-pulse":"bg-gradient-to-r from-orange-600 to-red-600 text-white hover:brightness-110"),y(5),Z(t.isTeamBuildingActive?"PARTY EN COURS !":"PIZZA PARTY"),y(),S("ngIf",!t.isTeamBuildingActive),y(6),S("disabled",!t.canHire(0)),y(),J("",t.getHireCost(0)," \u20AC"),y(6),S("disabled",!t.canHire(1)),y(),J("",t.getHireCost(1)," \u20AC"),y(2),S("ngIf",t.employees.length===0),y(2),S("ngForOf",t.employees)}}function NZ(n,e){if(n&1&&(p(0,"div",118)(1,"span"),v(2,"Bonus \xC9cran"),g(),p(3,"span"),v(4),ce(5,"number"),g()()),n&2){let t=A(3);y(4),J("+",Pe(5,1,t.getScreenBonus((t.activeMission==null?null:t.activeMission.reward)||0),"1.0-0")," \u20AC")}}function MZ(n,e){if(n&1&&(p(0,"div",112)(1,"div",96)(2,"div",113)(3,"span"),v(4,"Base"),g(),p(5,"span"),v(6),g()(),p(7,"div",114)(8,"span"),v(9,"Combo"),g(),p(10,"span"),v(11),g()(),U(12,NZ,6,4,"div",115),te(13,"div",116),p(14,"div",117)(15,"span"),v(16,"TOTAL"),g(),p(17,"span"),v(18),ce(19,"number"),g()()()()),n&2){let t=A(2);y(6),J("",t.activeMission==null?null:t.activeMission.reward," \u20AC"),y(5),J("+",t.maxComboReached," \u20AC"),y(),S("ngIf",t.screenLevel>0),y(6),J("+",Pe(19,4,t.lastReward,"1.0-0")," \u20AC")}}function OZ(n,e){if(n&1){let t=oe();p(0,"div",106),$("click",function(i){return z(t),G(i.stopPropagation())}),p(1,"div",107)(2,"div",108),v(3),g(),p(4,"h3",109),v(5),g(),U(6,MZ,20,7,"div",110),p(7,"button",111),$("click",function(){z(t);let i=A();return G(i.closeResult())}),v(8,"Continuer \u27A1\uFE0F"),g()()()}if(n&2){let t=A();y(3),Z(t.missionResult==="SUCCESS"?"\u{1F3C6}":"\u{1F480}"),y(),fe("text-green-400",t.missionResult==="SUCCESS")("text-red-400",t.missionResult==="FAIL"),y(),Z(t.missionResult==="SUCCESS"?"CONTRAT REMPLI":"\xC9CHEC"),y(),S("ngIf",t.missionResult==="SUCCESS")}}var cv=class n{constructor(e,t,r){this.gameStateService=e;this.soundService=t;this.cdr=r}hiddenInput;availableMissions=[];activeMission=null;currentLineIndex=0;currentTargetLine="";currentDisplayTokens=[];userInput="";timeLeft=0;timerInterval;missionResult=null;lastReward=0;hasError=!1;currentCombo=0;maxComboReached=0;startTime=0;endTime=0;totalCharsTyped=0;isShopOpen=!1;isStaffOpen=!1;chairLevel=0;screenLevel=0;coffeeLevel=0;pcLevel=0;isCoffeeActive=!1;coffeeAvailable=!0;currentMoney=0;contractsCompleted=0;employees=[];workerStates={};workerInterval;notifications=[];watchedEmployee=null;activeTheme=vh[0];isTeamBuildingActive=!1;teamBuildingEndTime=0;TEAM_BUILDING_COST=2e3;TEAM_BUILDING_DURATION=3e4;WORDS_EASY=["chat","chien","ami","pain","eau","mer","ciel","mur","sac","bus","lit","bol","the","sel","coq","or","loi","nez","vis","rue","pin","pot","jeu","gaz","main","pied","joie","papa","cafe"];WORDS_HARD=["voiture","maison","enfant","ecole","manger","dormir","prendre","parler","soleil","jardin","fleur","oiseau","pomme","table","chaise","livre","crayon","porte","fenetre","arbres","nuage","pluie","neige","route","ville","famille","musique","bonheur","sourire","liberte","courage","vitesse"];WORDS_HACKER=["mainframe","firewall","bypass","encrypt","socket","buffer","overflow","inject","root","sudo","access","denied","proxy","daemon","kernel","panic","matrix","cyber","secure","token"];get isFinishedButWrong(){return this.userInput.length===this.currentTargetLine.length&&this.userInput!==this.currentTargetLine}get currentWpm(){if(!this.startTime)return 0;let t=((this.endTime||Date.now())-this.startTime)/6e4;return t<.001?0:Math.floor(this.totalCharsTyped/5/t)}ngOnInit(){this.gameStateService.gameState$.subscribe(e=>{if(this.currentMoney=e.money,e.freelanceUpgrades){this.chairLevel=e.freelanceUpgrades.chairLevel,this.screenLevel=e.freelanceUpgrades.screenLevel,this.coffeeLevel=e.freelanceUpgrades.coffeeLevel,this.pcLevel=e.freelanceUpgrades.pcLevel,this.contractsCompleted=e.freelanceUpgrades.contractsCompleted||0;let r=e.freelanceUpgrades.activeThemeId,i=vh.find(s=>s.id===r);i&&(this.activeTheme=i)}let t=e.companies.find(r=>r.id==="2");t&&(this.employees=t.employees,this.employees.forEach(r=>{this.workerStates[r.id]||(this.workerStates[r.id]={currentMission:null,targetText:"",typedText:"",progress:0,status:"IDLE",cooldown:0})})),this.cdr.markForCheck()}),this.generateMissions(),this.startWorkerSimulation()}ngOnDestroy(){this.stopTimer(),this.stopWatching(),this.workerInterval&&clearInterval(this.workerInterval)}focusInput(){!this.isShopOpen&&!this.isStaffOpen&&!this.watchedEmployee&&!this.missionResult&&this.activeMission&&setTimeout(()=>{this.hiddenInput&&this.hiddenInput.nativeElement.focus()},0)}toggleShop(){this.isShopOpen=!this.isShopOpen,this.isStaffOpen=!1,this.isShopOpen||this.focusInput(),this.cdr.markForCheck()}toggleStaff(){this.isStaffOpen=!this.isStaffOpen,this.isShopOpen=!1,this.cdr.markForCheck()}startTeamBuilding(){this.currentMoney>=this.TEAM_BUILDING_COST&&!this.isTeamBuildingActive&&(this.gameStateService.addMoney(-this.TEAM_BUILDING_COST),this.isTeamBuildingActive=!0,this.teamBuildingEndTime=Date.now()+this.TEAM_BUILDING_DURATION,this.soundService.playSuccess(),this.showNotification("\u{1F355} PIZZA PARTY ACTIV\xC9E ! (+150% Vitesse)"),setTimeout(()=>{this.isTeamBuildingActive=!1,this.showNotification("Fin de la Pizza Party..."),this.cdr.markForCheck()},this.TEAM_BUILDING_DURATION))}getCost(e){return{CHAIR:2e3,SCREEN:5e3,COFFEE:1500,PC:2e4}[e]||0}canBuy(e){return this.currentMoney>=this.getCost(e)}buyItem(e){this.gameStateService.buySetupUpgrade(e,this.getCost(e))}getHireCost(e){let t=e===0?"DEV_JUNIOR":"DEV_SENIOR";return this.gameStateService.getNextHireCost("2",t)}canHire(e){return this.currentMoney>=this.getHireCost(e)}hire(e){let t=e===0?"DEV_JUNIOR":"DEV_SENIOR";this.gameStateService.hireEmployee("2",t)}getTrainCost(e){return Math.floor(500*Math.pow(1.5,e.efficiency))}trainEmployee(e){this.gameStateService.upgradeEmployeeSetup("2",e.id,this.getTrainCost(e))}togglePause(e){this.gameStateService.toggleEmployeePause("2",e.id)}drinkCoffee(){this.isCoffeeActive||!this.coffeeAvailable||(this.isCoffeeActive=!0,this.coffeeAvailable=!1,this.soundService.playPop(),setTimeout(()=>{this.isCoffeeActive=!1,this.cdr.markForCheck()},5e3))}startWorkerSimulation(){this.workerInterval&&clearInterval(this.workerInterval),this.workerInterval=setInterval(()=>{this.employees.forEach(e=>{if(e.isPaused)return;let t=this.workerStates[e.id];if(t){if(t.status==="IDLE")if(t.cooldown>0)t.cooldown-=this.isTeamBuildingActive?.3:.1;else{let r=e.role==="DEV_JUNIOR"?Math.random()>.7?"MEDIUM":"EASY":"HARD",i=this.createMission(0,r);t.currentMission=i,t.targetText=i.lines[0],t.typedText="",t.status="WORKING"}else if(t.status==="WORKING"&&t.targetText){let r=e.role==="DEV_SENIOR"?.3:.1;if(r+=e.efficiency*.05,this.isTeamBuildingActive&&(r*=2.5),Math.random()<r&&(t.typedText+=t.targetText[t.typedText.length],t.typedText.length>=t.targetText.length)){let i=Math.floor(t.currentMission.reward*.2);this.gameStateService.addMoney(i),this.showNotification(`+${i}\u20AC (${e.role==="DEV_JUNIOR"?"Jr":"Sr"})`),t.status="IDLE",t.currentMission=null,t.cooldown=3}}}}),this.cdr.markForCheck()},100)}getWorkerState(e){return this.workerStates[e]}showNotification(e){this.notifications.push(e),setTimeout(()=>{this.notifications.shift(),this.cdr.markForCheck()},2e3)}watchEmployee(e){this.watchedEmployee=e,this.isStaffOpen=!1,this.cdr.markForCheck()}stopWatching(){this.watchedEmployee=null,this.isStaffOpen=!0,this.cdr.markForCheck()}generateMissions(){this.availableMissions=[];let e=.05+this.pcLevel*.02,t=this.pcLevel>0?.1:0;for(let r=0;r<3;r++){let i=Math.random();if(i<e)this.availableMissions.push(this.createMission(r,"BOSS"));else if(i<e+t)this.availableMissions.push(this.createMission(r,"HACKER"));else{let s=Math.random()>.6?"HARD":Math.random()>.3?"MEDIUM":"EASY";this.availableMissions.push(this.createMission(r,s))}}}createMission(e,t){let r=30,i=100,s=2,o=5;return t==="BOSS"?(r=45,i=5e3,s=5,o=10):t==="HACKER"?(r=20,i=2e3,s=4,o=6):t==="EASY"?(r=20,i=150,s=2,o=4):t==="MEDIUM"?(r=35,i=400,s=3,o=6):(r=50,i=1e3,s=4,o=8),{id:e,title:t==="BOSS"?"URGENCE":t==="HACKER"?"HACKING":"Mission",description:t==="HACKER"?"Piratage...":"Tapez vite.",difficulty:t,reward:i,timeLimit:r,lines:this.generateRandomLines(s,o,t)}}generateRandomLines(e,t,r){let i=[],s=r==="HACKER"?this.WORDS_HACKER:r==="HARD"||r==="BOSS"?this.WORDS_HARD:this.WORDS_EASY;for(let o=0;o<e;o++){let a=[];for(let c=0;c<t;c++)a.push(s[Math.floor(Math.random()*s.length)]);i.push(a.join(" "))}return i}prepareDisplayTokens(e){let t=[],r=0;return e.split(/(\s+)/).forEach(s=>{if(s.length===0)return;let o=[];for(let a=0;a<s.length;a++)o.push({value:s[a],index:r}),r++;t.push({isSpace:/^\s+$/.test(s),chars:o})}),t}startMission(e){this.activeMission=e,this.currentLineIndex=0,this.loadLine(e.lines[0]),this.userInput="",this.timeLeft=e.timeLimit,this.missionResult=null,this.currentCombo=0,this.maxComboReached=0,this.totalCharsTyped=0,this.startTime=Date.now(),this.endTime=0,this.isCoffeeActive=!1,this.coffeeAvailable=!0,this.startTimer(),this.soundService.playPop(),setTimeout(()=>this.focusInput(),100),this.cdr.markForCheck()}loadLine(e){this.currentTargetLine=e,this.currentDisplayTokens=this.prepareDisplayTokens(e),this.userInput="",this.hiddenInput&&(this.hiddenInput.nativeElement.value="")}startTimer(){this.stopTimer();let e=Date.now();this.timerInterval=setInterval(()=>{if(this.isCoffeeActive){e=Date.now();return}let t=Date.now(),r=(t-e)/1e3;e=t;let i=1-this.chairLevel*.2;this.timeLeft-=r*i,this.timeLeft<=0&&(this.timeLeft=0,this.endMission(!1)),this.cdr.markForCheck()},100)}stopTimer(){this.timerInterval&&clearInterval(this.timerInterval)}handleKeyboard(e){!this.activeMission||this.missionResult||this.isShopOpen||this.isStaffOpen||this.watchedEmployee||this.focusInput()}onInput(e){if(!this.activeMission||this.missionResult)return;let t=e.target.value;t.length>this.currentTargetLine.length?(this.userInput=t.slice(0,this.currentTargetLine.length),e.target.value=this.userInput):this.userInput=t,this.userInput.length>this.totalCharsTyped&&(this.userInput[this.userInput.length-1]===" "?this.soundService.playSpace():this.soundService.playRandomKey(),this.checkInput()),this.totalCharsTyped=this.userInput.length,this.cdr.markForCheck()}checkInput(){let e=this.userInput.length-1;e<0||(this.userInput[e]===this.currentTargetLine[e]?(this.currentCombo++,this.currentCombo>this.maxComboReached&&(this.maxComboReached=this.currentCombo)):(this.currentCombo=0,this.triggerError()),this.userInput===this.currentTargetLine&&(this.soundService.playSuccess(),setTimeout(()=>this.nextLine(),150)))}triggerError(){this.hasError=!0,this.soundService.playError(),setTimeout(()=>{this.hasError=!1,this.cdr.markForCheck()},300)}nextLine(){this.currentLineIndex++,this.activeMission&&this.currentLineIndex>=this.activeMission.lines.length?this.endMission(!0):this.activeMission&&(this.loadLine(this.activeMission.lines[this.currentLineIndex]),this.cdr.markForCheck())}calculateReward(e){let t=e.reward*(this.screenLevel*.5);return e.reward+t}getScreenBonus(e){return e*(this.screenLevel*.5)}endMission(e){if(this.stopTimer(),this.endTime=Date.now(),this.missionResult=e?"SUCCESS":"FAIL",e&&this.activeMission){let t=this.currentWpm;this.gameStateService.gameState$.pipe(it(1)).subscribe(s=>{let o=O({},s.stats);o.maxWpm=Math.max(o.maxWpm||0,t),o.totalCharsTyped=(o.totalCharsTyped||0)+this.totalCharsTyped,this.gameStateService.updateState({stats:o})});let r=this.calculateReward(this.activeMission),i=this.maxComboReached;this.lastReward=r+i,this.gameStateService.addMoney(this.lastReward),this.gameStateService.incrementContractsCompleted(),this.activeMission.difficulty==="BOSS"&&this.gameStateService.incrementBossBeaten(),this.soundService.playSuccess()}else this.soundService.playError();this.cdr.markForCheck()}closeResult(){this.missionResult=null,this.activeMission=null,this.generateMissions(),this.cdr.markForCheck()}getCharClass(e,t){if(e>=this.userInput.length)return this.activeTheme.textClass+" opacity-40";let r=this.userInput[e];return r===t?this.activeTheme.successClass:r===" "?"bg-red-500/50 text-white":"text-red-500 font-bold"}getIcon(e){return e==="BOSS"?"\u{1F479}":e==="HACKER"?"\u{1F4BB}":e==="EASY"?"\u{1F7E2}":e==="MEDIUM"?"\u{1F7E0}":"\u{1F534}"}getDifficultyClass(e){return e==="HACKER"?"border-green-500 text-green-500 bg-green-900/20":e==="BOSS"?"border-red-500 text-red-500 bg-red-900/20 animate-pulse":"border-slate-500 text-slate-500"}getMissionClass(e){return e==="HACKER"?"border-green-500 bg-green-900/10":e==="BOSS"?"border-red-500 bg-red-900/10":"border-slate-700 bg-slate-800"}static \u0275fac=function(t){return new(t||n)(ie(qt),ie(hn),ie(At))};static \u0275cmp=st({type:n,selectors:[["app-freelance-dev-game"]],viewQuery:function(t,r){if(t&1&&mc(dZ,5),t&2){let i;Lo(i=Vo())&&(r.hiddenInput=i.first)}},hostBindings:function(t,r){t&1&&$("keydown",function(s){return r.handleKeyboard(s)},Cu)},standalone:!1,decls:22,vars:17,consts:[["gameZone",""],["hiddenInput",""],[1,"h-full","font-sans","flex","flex-col","relative","overflow-hidden","select-none","transition-colors","duration-500",3,"click","ngClass"],[1,"p-4","border-b","flex","justify-between","items-center","shadow-md","z-10","relative",3,"ngClass"],[1,"flex","items-center","gap-4"],[1,"w-3","h-3","rounded-full","bg-red-500","animate-pulse"],[1,"text-sm","font-bold","opacity-50","hidden","sm:block"],["class","flex items-center gap-3",4,"ngIf"],[1,"flex","items-center","gap-3"],[1,"px-3","py-1","bg-blue-600","hover:bg-blue-500","text-white","text-xs","font-bold","rounded","shadow","flex","items-center","gap-2","transition-all","relative",3,"click"],["class","absolute -top-1 -right-1 flex h-2 w-2",4,"ngIf"],[1,"font-bold","font-mono","text-lg",3,"ngClass"],[1,"absolute","top-20","right-4","z-20","pointer-events-none","flex","flex-col","gap-2","items-end"],["class","backdrop-blur px-3 py-1 rounded border text-xs shadow-lg animate-fade-out-up",3,"ngClass",4,"ngFor","ngForOf"],["class","flex-1 p-8 overflow-y-auto custom-scroll",4,"ngIf"],["class","flex-1 flex flex-col relative transition-colors duration-500",4,"ngIf"],["class","absolute inset-0 bg-slate-950/95 z-50 flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-slate-900/90 z-50 flex items-center justify-center backdrop-blur-md animate-fade-in",3,"click",4,"ngIf"],[1,"px-3","py-1","rounded-full","border","text-xs","font-bold","flex","gap-2",3,"ngClass"],[3,"ngClass"],["class","bg-amber-700 hover:bg-amber-600 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 transition-all animate-bounce",3,"click",4,"ngIf"],["class","text-amber-400 text-xs font-black animate-pulse",4,"ngIf"],[1,"bg-amber-700","hover:bg-amber-600","text-white","px-3","py-1","rounded-full","text-xs","font-bold","flex","items-center","gap-1","transition-all","animate-bounce",3,"click"],[1,"text-amber-400","text-xs","font-black","animate-pulse"],[1,"absolute","-top-1","-right-1","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-green-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-green-500"],[1,"backdrop-blur","px-3","py-1","rounded","border","text-xs","shadow-lg","animate-fade-out-up",3,"ngClass"],[1,"flex-1","p-8","overflow-y-auto","custom-scroll"],[1,"max-w-4xl","mx-auto"],[1,"text-3xl","font-black","mb-2","tracking-tight","flex","items-center","gap-3"],[1,"opacity-60","mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","group relative border rounded-xl p-5 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-xl",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"group","relative","border","rounded-xl","p-5","cursor-pointer","transition-all","hover:-translate-y-1","hover:shadow-xl",3,"click","ngClass"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-2xl"],[1,"px-2","py-1","rounded","text-[10px]","font-bold","uppercase","tracking-wider","border",3,"ngClass"],[1,"font-bold","text-lg","mb-1","transition-colors","group-hover:opacity-80"],[1,"mt-4","pt-4","border-t","flex","justify-between","items-center",3,"ngClass"],[1,"flex","flex-col"],[1,"text-[10px]","opacity-60","uppercase"],[1,"font-bold",3,"ngClass"],[1,"flex","flex-col","items-end"],[1,"font-bold"],[1,"flex-1","flex","flex-col","relative","transition-colors","duration-500"],[1,"absolute","inset-0","opacity-10","pointer-events-none",3,"ngClass"],[1,"flex-1","p-8","flex","flex-col","justify-center","items-center","relative","overflow-hidden"],[1,"absolute","top-10","right-10","flex","flex-col","items-end","transition-all","duration-200","z-30"],[1,"text-6xl","font-black","italic","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-b","from-white","to-slate-400"],[1,"text-xs","font-bold","opacity-50","uppercase","tracking-widest"],[1,"relative","z-20","w-full","max-w-5xl","text-center","leading-relaxed","select-none","cursor-text","transition-transform","duration-100"],[1,"text-4xl","font-sans","font-medium","tracking-normal","opacity-80"],["class","inline-block",3,"whitespace-nowrap",4,"ngFor","ngForOf"],["class","mt-8 text-red-500 font-bold text-xl animate-bounce",4,"ngIf"],[1,"absolute","bottom-8","flex","flex-col","items-center","z-30"],[1,"text-5xl","font-mono","font-black","transition-colors","duration-300","drop-shadow-lg"],["type","text","autofocus","","autocomplete","off","spellcheck","false",1,"absolute","opacity-0","top-0","left-0","h-full","w-full","cursor-text",3,"input","blur"],[1,"inline-block"],[4,"ngFor","ngForOf"],["class","inline-block w-[3px] h-8 align-middle animate-pulse -mb-1 mr-[1px] rounded-full shadow-[0_0_15px_rgba(59,130,246,1)]",3,"ngClass",4,"ngIf"],[1,"transition-all","duration-150","border-b-2","border-transparent","inline-block","min-w-[12px]","whitespace-pre","text-center",3,"ngClass"],[1,"inline-block","w-[3px]","h-8","align-middle","animate-pulse","-mb-1","mr-[1px]","rounded-full","shadow-[0_0_15px_rgba(59,130,246,1)]",3,"ngClass"],[1,"mt-8","text-red-500","font-bold","text-xl","animate-bounce"],[1,"absolute","inset-0","bg-slate-950/95","z-50","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-4xl","h-[85%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-900"],[1,"font-black","text-white","text-2xl"],[1,"w-8","h-8","rounded-full","bg-slate-800","hover:bg-slate-700","text-slate-400","flex","items-center","justify-center","transition-colors",3,"click"],[1,"flex-1","flex","overflow-hidden"],[1,"w-1/3","bg-slate-950","p-4","border-r","border-slate-800","flex","flex-col","gap-4"],[1,"w-full","py-4","rounded-xl","font-black","text-sm","uppercase","tracking-wider","shadow-lg","flex","flex-col","items-center","justify-center","gap-2","transition-all","transform","active:scale-95","border","border-white/10",3,"click","disabled","ngClass"],[1,"text-center","leading-tight"],["class","text-[10px] opacity-80 font-normal mt-1",4,"ngIf"],[1,"bg-slate-900","p-3","rounded","border","border-slate-800","hover:border-blue-500","transition-colors","mt-2"],[1,"font-bold","text-white"],[1,"text-xs","text-slate-400","mb-2"],[1,"w-full","py-2","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-800","text-white","text-xs","font-bold","rounded",3,"click","disabled"],[1,"bg-slate-900","p-3","rounded","border","border-slate-800","hover:border-purple-500","transition-colors"],[1,"w-full","py-2","bg-purple-600","hover:bg-purple-500","disabled:bg-slate-800","text-white","text-xs","font-bold","rounded",3,"click","disabled"],[1,"flex-1","p-6","bg-slate-900","overflow-y-auto","custom-scroll"],["class","h-full flex flex-col items-center justify-center text-slate-600",4,"ngIf"],[1,"grid","grid-cols-2","gap-4"],["class","bg-slate-800 p-3 rounded-lg border border-slate-700 relative",3,"opacity-50",4,"ngFor","ngForOf"],[1,"text-[10px]","opacity-80","font-normal","mt-1"],[1,"h-full","flex","flex-col","items-center","justify-center","text-slate-600"],[1,"text-4xl","mb-2"],[1,"bg-slate-800","p-3","rounded-lg","border","border-slate-700","relative"],[1,"flex","justify-between","items-start","mb-2"],[1,"flex","items-center","gap-2"],[1,"font-bold","text-white","text-sm"],["class","text-[10px] text-slate-400",4,"ngIf"],["class","text-[10px] text-slate-600",4,"ngIf"],["class","text-[10px] bg-red-900 text-red-300 px-2 py-0.5 rounded",4,"ngIf"],["class","text-[10px] bg-green-900 text-green-300 px-2 py-0.5 rounded",4,"ngIf"],["class","h-1 w-full bg-black rounded-full mb-2 overflow-hidden",4,"ngIf"],[1,"flex","flex-col","gap-2"],[1,"w-full","py-1.5","bg-slate-700","hover:bg-slate-600","text-white","text-[10px]","font-bold","rounded","border","border-slate-600","flex","items-center","justify-center","gap-2",3,"click"],[1,"w-full","py-1.5","bg-green-700","hover:bg-green-600","disabled:bg-slate-700","text-white","text-[10px]","font-bold","rounded","flex","justify-between","px-2",3,"click","disabled"],[1,"w-full","py-1.5","bg-slate-700","hover:bg-slate-600","text-white","text-[10px]","font-bold","rounded",3,"click"],[1,"text-[10px]","text-slate-400"],[1,"text-[10px]","text-slate-600"],[1,"text-[10px]","bg-red-900","text-red-300","px-2","py-0.5","rounded"],[1,"text-[10px]","bg-green-900","text-green-300","px-2","py-0.5","rounded"],[1,"h-1","w-full","bg-black","rounded-full","mb-2","overflow-hidden"],[1,"h-full","transition-all","duration-300",3,"ngClass"],[1,"absolute","inset-0","bg-slate-900/90","z-50","flex","items-center","justify-center","backdrop-blur-md","animate-fade-in",3,"click"],[1,"bg-slate-800","p-8","rounded-2xl","border-2","shadow-2xl","max-w-sm","w-full","text-center"],[1,"text-6xl","mb-4"],[1,"text-2xl","font-black","uppercase","mb-6"],["class","bg-green-900/20 p-4 rounded-xl mb-6 border border-green-500/30 w-full",4,"ngIf"],[1,"w-full","py-4","rounded-xl","font-bold","uppercase","tracking-wider","transition-all","shadow-lg","active:scale-95","bg-slate-700","hover:bg-slate-600","text-white",3,"click"],[1,"bg-green-900/20","p-4","rounded-xl","mb-6","border","border-green-500/30","w-full"],[1,"flex","justify-between","items-center","text-sm","text-green-200/70"],[1,"flex","justify-between","items-center","text-sm","text-amber-400","font-bold"],["class","flex justify-between items-center text-sm text-purple-400 font-bold",4,"ngIf"],[1,"h-px","bg-green-500/30","my-1"],[1,"flex","justify-between","items-center","text-2xl","font-black","text-green-400"],[1,"flex","justify-between","items-center","text-sm","text-purple-400","font-bold"]],template:function(t,r){t&1&&(p(0,"div",2),$("click",function(){return r.focusInput()}),p(1,"div",3)(2,"div",4),te(3,"div",5),p(4,"span",6),v(5,"FreelanceOS v28"),g(),U(6,pZ,7,11,"div",7),g(),p(7,"div",8)(8,"button",9),$("click",function(s){return s.stopPropagation(),r.toggleStaff()}),p(9,"span"),v(10,"\u{1F465}"),g(),v(11," \xC9QUIPE "),U(12,mZ,3,0,"span",10),g(),p(13,"div",11),v(14),ce(15,"number"),g()()(),p(16,"div",12),U(17,gZ,2,6,"div",13),g(),U(18,vZ,8,1,"div",14)(19,IZ,19,16,"div",15)(20,PZ,34,10,"div",16)(21,OZ,9,7,"div",17),g()),t&2&&(S("ngClass",zp(14,EU,r.activeTheme.bgClass,r.activeTheme.textClass)),y(),S("ngClass",r.activeTheme.borderClass),y(5),S("ngIf",r.activeMission),y(6),S("ngIf",r.employees.length>0),y(),S("ngClass",r.activeTheme.accentClass),y(),J(" ",Pe(15,11,r.currentMoney,"1.0-0")," \u20AC "),y(3),S("ngForOf",r.notifications),y(),S("ngIf",!r.activeMission),y(),S("ngIf",r.activeMission),y(),S("ngIf",r.isStaffOpen),y(),S("ngIf",r.missionResult))},dependencies:[$o,Ln,Xt,Zn],styles:[".custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:3px}.shake-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .2s cubic-bezier(.36,.07,.19,.97) both}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-2px,0,0)}20%,80%{transform:translate3d(4px,0,0)}40%,60%{transform:translate3d(6px,0,0)}}.neon-glow[_ngcontent-%COMP%]{color:#4ade80;text-shadow:0 0 5px #4ade80,0 0 10px #4ade80;font-weight:900;transform:scale(1.1)}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.animate-fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp 2s ease-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}"],changeDetection:0})};var uv=n=>({$implicit:n}),IU=()=>["WIN","LOSE","PUSH","BLACKJACK"],gD=()=>["WIN","BLACKJACK"];function LZ(n,e){if(n&1&&(p(0,"div",37)(1,"div",38)(2,"div",39)(3,"span",40),te(4,"span",41),v(5," Session En Cours "),g()(),p(6,"div",42)(7,"div",43)(8,"span",44),v(9,"Gain Net"),g(),p(10,"span",45),v(11),ce(12,"number"),g()(),p(13,"div",46)(14,"span",47),v(15,"Pertes"),g(),p(16,"span",48),v(17),ce(18,"number"),g()(),p(19,"div",49)(20,"div",50)(21,"span",51),v(22,"Mains"),g(),p(23,"span",52),v(24),g()(),p(25,"div",50)(26,"span",51),v(27,"Blackjacks"),g(),p(28,"span",53),v(29),g()()()()()()),n&2){let t=A();S("@fadeIn",void 0),y(10),fe("text-green-400",t.sessionStats.netProfit>0)("text-red-400",t.sessionStats.netProfit<0)("text-slate-400",t.sessionStats.netProfit===0),S("@statPop",t.sessionStats.netProfit),y(),Ms(" ",t.sessionStats.netProfit>0?"+":"","",ot(12,13,t.sessionStats.netProfit)," \u20AC "),y(6),J("-",ot(18,15,t.sessionStats.totalLost)," \u20AC"),y(7),Z(t.sessionStats.handsPlayed),y(5),Z(t.sessionStats.blackjacks)}}function VZ(n,e){if(n&1&&(p(0,"span",54),v(1),g()),n&2){let t=A();y(),Z(t.dealerScore)}}function UZ(n,e){n&1&&Nn(0)}function BZ(n,e){if(n&1&&(p(0,"div",55),U(1,UZ,1,0,"ng-container",56),g()),n&2){let t=e.$implicit,r=e.index,i=A(),s=Yn(48);Ke("z-index",r)("transform","translateX("+(r-(i.dealerHand.length-1)/2)*45+"px)"),S("@dealCard",void 0),y(),S("ngTemplateOutlet",s)("ngTemplateOutletContext",Qn(7,uv,t))}}function jZ(n,e){n&1&&(p(0,"div",62),v(1,"Miser Ici"),g())}function $Z(n,e){n&1&&Nn(0)}function HZ(n,e){if(n&1&&(p(0,"div",63),U(1,$Z,1,0,"ng-container",56),g()),n&2){let t=A().$implicit;A(2);let r=Yn(46);S("@chipDrop",void 0),y(),S("ngTemplateOutlet",r)("ngTemplateOutletContext",Qn(3,uv,t.bet))}}function zZ(n,e){n&1&&(p(0,"div",64),v(1,"Ajouter"),g())}function GZ(n,e){if(n&1){let t=oe();p(0,"div",58),$("click",function(){let i=z(t).$implicit,s=A(2);return G(s.addBetToSlot(i))}),U(1,jZ,2,0,"div",59)(2,HZ,2,5,"div",60)(3,zZ,2,0,"div",61),g()}if(n&2){let t=e.$implicit;fe("border-yellow-500",t.bet>0)("bg-yellow-500-10",t.bet>0),y(),S("ngIf",t.bet===0),y(),S("ngIf",t.bet>0),y(),S("ngIf",t.bet>0)}}function qZ(n,e){if(n&1&&(Wn(0),U(1,GZ,4,7,"div",57),Kn()),n&2){let t=A();y(),S("ngForOf",t.bettingSlots)}}function WZ(n,e){n&1&&(p(0,"div",75)(1,"span",76),v(2,"Votre Tour"),g(),ur(),p(3,"svg",77),te(4,"path",78),g()()),n&2&&S("@fadeIn",void 0)}function KZ(n,e){n&1&&Nn(0)}function YZ(n,e){if(n&1&&(p(0,"div",79),U(1,KZ,1,0,"ng-container",56),g()),n&2){let t=e.$implicit,r=e.index,i=A().$implicit;A(2);let s=Yn(48);Ke("z-index",r)("transform","translateX("+(r-(i.cards.length-1)/2)*35+"px)"),S("@dealCard",void 0),y(),S("ngTemplateOutlet",s)("ngTemplateOutletContext",Qn(7,uv,t))}}function QZ(n,e){if(n&1&&(p(0,"div",80),te(1,"div",81),p(2,"span",82),v(3),g()()),n&2){let t=A().$implicit;y(3),J("",t.bet," \u20AC")}}function JZ(n,e){if(n&1&&(p(0,"div",86),v(1),ce(2,"number"),g()),n&2){let t=A(2).$implicit;y(),J("+",ot(2,1,t.resultAmount)," \u20AC")}}function ZZ(n,e){if(n&1&&(p(0,"div",83)(1,"div",84),v(2),g(),U(3,JZ,3,3,"div",85),g()),n&2){let t=A().$implicit;S("@chipDrop",void 0),y(),fe("bg-green-600",kt(21,gD).includes(t.status))("border-green-800",kt(22,gD).includes(t.status))("text-white",kt(23,gD).includes(t.status))("bg-red-600",t.status==="LOSE")("border-red-800",t.status==="LOSE")("text-white",t.status==="LOSE")("bg-blue-600",t.status==="PUSH")("border-blue-800",t.status==="PUSH")("text-white",t.status==="PUSH"),y(),J(" ",t.resultMessage," "),y(),S("ngIf",t.resultAmount)}}function XZ(n,e){if(n&1&&(p(0,"div",66),U(1,WZ,5,1,"div",67),p(2,"div",68),v(3),g(),p(4,"div",69)(5,"div",70),U(6,YZ,2,9,"div",71),g()(),p(7,"div",72),U(8,QZ,4,1,"div",73)(9,ZZ,4,24,"div",74),g()()),n&2){let t=e.$implicit,r=e.index,i=A(2);fe("opacity-30",i.gameState==="PLAYING"&&i.activeHandIndex!==r)("scale-100",i.gameState==="PLAYING"&&i.activeHandIndex!==r)("scale-110",i.gameState==="PLAYING"&&i.activeHandIndex===r)("z-10",i.gameState==="PLAYING"&&i.activeHandIndex!==r)("z-50",i.gameState==="PLAYING"&&i.activeHandIndex===r),y(),S("ngIf",i.gameState==="PLAYING"&&i.activeHandIndex===r),y(),fe("text-green-400",t.score<=21)("text-red-500",t.score>21),y(),J(" ",t.score," "),y(3),S("ngForOf",t.cards),y(2),S("ngIf",!kt(19,IU).includes(t.status)),y(),S("ngIf",kt(20,IU).includes(t.status))}}function eX(n,e){if(n&1&&(Wn(0),U(1,XZ,10,21,"div",65),Kn()),n&2){let t=A();y(),S("ngForOf",t.playerHands)}}function tX(n,e){n&1&&(p(0,"div",102),v(1,"\u25BC"),g())}function nX(n,e){n&1&&Nn(0)}function rX(n,e){if(n&1){let t=oe();p(0,"button",100),$("click",function(){let i=z(t).$implicit,s=A(2);return G(s.selectedChip=i.val)}),U(1,tX,2,0,"div",101)(2,nX,1,0,"ng-container",56),g()}if(n&2){let t=e.$implicit,r=A(2),i=Yn(44);fe("opacity-50",r.currentMoney<t.val)("grayscale",r.currentMoney<t.val),y(),S("ngIf",r.selectedChip===t.val),y(),S("ngTemplateOutlet",i)("ngTemplateOutletContext",Qn(7,uv,t))}}function iX(n,e){if(n&1){let t=oe();p(0,"div",87)(1,"div",88),U(2,rX,3,9,"button",89),g(),te(3,"div",90),p(4,"div",91)(5,"button",92),$("click",function(){z(t);let i=A();return G(i.clearBets())}),ur(),p(6,"svg",93),te(7,"path",94)(8,"path",95)(9,"path",96),g(),sc(),p(10,"span"),v(11,"Vider"),g()(),p(12,"button",97),$("click",function(){z(t);let i=A();return G(i.dealSequence())}),p(13,"span"),v(14,"Distribuer"),g(),ur(),p(15,"svg",98),te(16,"path",99),g()()()()}if(n&2){let t=A();S("@fadeIn",void 0),y(2),S("ngForOf",t.chips),y(3),S("disabled",t.totalBet===0),y(7),S("disabled",t.totalBet===0)}}function sX(n,e){if(n&1){let t=oe();p(0,"button",110),$("click",function(){z(t);let i=A(2);return G(i.double())}),p(1,"div",111),v(2,"x2"),g(),p(3,"span",106),v(4,"Doubler"),g()()}}function oX(n,e){if(n&1){let t=oe();p(0,"button",112),$("click",function(){z(t);let i=A(2);return G(i.split())}),p(1,"div",113),v(2,"\u2442"),g(),p(3,"span",106),v(4,"Split"),g()()}}function aX(n,e){if(n&1){let t=oe();p(0,"div",103)(1,"button",104),$("click",function(){z(t);let i=A();return G(i.hit())}),p(2,"div",105),v(3,"+"),g(),p(4,"span",106),v(5,"Carte"),g()(),p(6,"button",107),$("click",function(){z(t);let i=A();return G(i.stand())}),p(7,"div",105),v(8,"\u270B"),g(),p(9,"span",106),v(10,"Rester"),g()(),U(11,sX,5,0,"button",108)(12,oX,5,0,"button",109),g()}if(n&2){let t=A();S("@fadeIn",void 0),y(11),S("ngIf",t.canDouble),y(),S("ngIf",t.canSplit)}}function cX(n,e){if(n&1){let t=oe();p(0,"div")(1,"button",114),$("click",function(){z(t);let i=A();return G(i.reset())}),ur(),p(2,"svg",115),te(3,"path",116)(4,"path",117),g(),sc(),p(5,"span"),v(6,"NOUVELLE MAIN"),g()()()}n&2&&S("@fadeIn",void 0)}function lX(n,e){if(n&1&&(p(0,"div",118),te(1,"div",119),p(2,"div",120)(3,"span",121),v(4),g()(),te(5,"div",122),g()),n&2){let t=e.$implicit;Ke("background","linear-gradient(135deg, "+t.color+" 0%, "+t.accent+" 100%)"),y(3),Ke("color",t.accent),y(),Z(t.val)}}function uX(n,e){if(n&1&&(p(0,"div",123),te(1,"div",124)(2,"div",125),p(3,"div",126)(4,"span",127),v(5),g()()()),n&2){let t=e.$implicit;y(5),Z(t)}}function dX(n,e){if(n&1&&(Wn(0),p(1,"div",129)(2,"span",130),v(3),g(),p(4,"span",131),v(5),g()(),p(6,"div",132)(7,"span",130),v(8),g(),p(9,"span",131),v(10),g()(),p(11,"div",133)(12,"span",134),v(13),g()(),Kn()),n&2){let t=A().$implicit;y(2),fe("text-red-600",t.isRed)("text-black",!t.isRed),y(),Z(t.value),y(),fe("text-red-600",t.isRed)("text-black",!t.isRed),y(),Z(t.suit),y(2),fe("text-red-600",t.isRed)("text-black",!t.isRed),y(),Z(t.value),y(),fe("text-red-600",t.isRed)("text-black",!t.isRed),y(),Z(t.suit),y(2),fe("text-red-600",t.isRed)("text-black",!t.isRed),y(),Z(t.suit)}}function hX(n,e){n&1&&(Wn(0),p(1,"div",135)(2,"div",136),te(3,"div",137),g()(),Kn())}function fX(n,e){if(n&1&&(p(0,"div",128),U(1,dX,14,25,"ng-container",33)(2,hX,4,0,"ng-container",33),g()),n&2){let t=e.$implicit;fe("bg-red-900",t.isFaceDown)("border-red-950",t.isFaceDown),y(),S("ngIf",!t.isFaceDown),y(),S("ngIf",t.isFaceDown)}}var lv=class n{constructor(e,t,r){this.gameStateSvc=e;this.sound=t;this.cdr=r}exit=new je;currentMoney=0;deck=[];dealerHand=[];bettingSlots=[{id:0,bet:0},{id:1,bet:0},{id:2,bet:0}];playerHands=[];activeHandIndex=-1;gameState="BETTING";showStats=!0;sessionStats={handsPlayed:0,blackjacks:0,netProfit:0,biggestWin:0,totalLost:0};selectedChip=100;chips=[{val:5,color:"#64748b",border:"#475569",accent:"#334155"},{val:25,color:"#22c55e",border:"#16a34a",accent:"#15803d"},{val:100,color:"#171717",border:"#404040",accent:"#0a0a0a"},{val:500,color:"#a855f7",border:"#9333ea",accent:"#7e22ce"},{val:1e3,color:"#eab308",border:"#ca8a04",accent:"#a16207"},{val:5e3,color:"#f97316",border:"#ea580c",accent:"#c2410c"}];DECK_COUNT=6;SHUFFLE_THRESHOLD=.5;ngOnInit(){this.gameStateSvc.gameState$.subscribe(e=>this.currentMoney=e.money),this.createShoe()}get totalBet(){return this.bettingSlots.reduce((e,t)=>e+t.bet,0)}get currentHand(){return this.playerHands[this.activeHandIndex]}get dealerScore(){return this.calculateScore(this.dealerHand)}get canDouble(){return this.currentHand?this.currentHand.cards.length===2&&this.currentMoney>=this.currentHand.bet:!1}get canSplit(){if(!this.currentHand)return!1;let e=this.currentHand.cards;return e.length===2&&e[0].numValue===e[1].numValue&&this.currentMoney>=this.currentHand.bet}toggleStats(){this.showStats=!this.showStats}addBetToSlot(e){this.currentMoney>=this.selectedChip&&(this.gameStateSvc.addMoney(-this.selectedChip),e.bet+=this.selectedChip,this.sound.playNoise(.05,"lowpass",400,.4))}clearBets(){this.bettingSlots.forEach(e=>{e.bet>0&&(this.gameStateSvc.addMoney(e.bet),e.bet=0)}),this.sound.playSoftPop()}async dealSequence(){if(this.totalBet!==0){this.checkReshuffle(),this.playerHands=this.bettingSlots.filter(e=>e.bet>0).map(e=>({id:e.id,cards:[],bet:e.bet,score:0,status:"PLAYING"})),this.dealerHand=[],this.gameState="PLAYING";for(let e of this.playerHands)await this.wait(200),e.cards.push(this.draw()),e.score=this.calculateScore(e.cards),this.sound.playNoise(.1,"highpass",1e3,.3),this.cdr.detectChanges();await this.wait(200),this.dealerHand.push(this.draw()),this.sound.playNoise(.1,"highpass",1e3,.3),this.cdr.detectChanges();for(let e of this.playerHands)await this.wait(200),e.cards.push(this.draw()),e.score=this.calculateScore(e.cards),this.sound.playNoise(.1,"highpass",1e3,.3),this.cdr.detectChanges();await this.wait(200),this.dealerHand.push(ee(O({},this.draw()),{isFaceDown:!0})),this.sound.playNoise(.1,"highpass",1e3,.3),this.cdr.detectChanges(),await this.wait(500),this.checkDealerBlackjack()?this.resolveAllHands():this.startPlayingPhase()}}deal(){this.dealSequence()}wait(e){return new Promise(t=>setTimeout(t,e))}checkDealerBlackjack(){let e=this.dealerHand[1].numValue;return this.dealerHand[0].numValue+e===21}startPlayingPhase(){this.gameState="PLAYING",this.activeHandIndex=0,this.processCurrentHand()}processCurrentHand(){let e=this.currentHand;if(!e){this.playDealer();return}e.score===21&&e.cards.length===2&&!e.isSplit&&(e.status="BLACKJACK",setTimeout(()=>this.nextHand(),1e3))}nextHand(){this.activeHandIndex++,this.processCurrentHand()}hit(){let e=this.currentHand;e.cards.push(this.draw()),e.score=this.calculateScore(e.cards),this.sound.playNoise(.05,"highpass",1e3,.2),e.score>21?(e.status="BUST",e.resultMessage="BUSTED",this.sound.playError(),setTimeout(()=>this.nextHand(),600)):e.score===21&&setTimeout(()=>this.nextHand(),400)}stand(){this.currentHand.status="STAND",this.nextHand()}double(){let e=this.currentHand;this.currentMoney>=e.bet&&(this.gameStateSvc.addMoney(-e.bet),e.bet*=2,e.cards.push(this.draw()),e.score=this.calculateScore(e.cards),e.status="DOUBLED",e.score>21&&(e.status="BUST",e.resultMessage="BUSTED",this.sound.playError()),setTimeout(()=>this.nextHand(),800))}split(){let e=this.currentHand;if(this.currentMoney>=e.bet){this.gameStateSvc.addMoney(-e.bet),this.sound.playNoise(.1,"highpass",500,.3);let t=e.cards.pop(),r={id:Date.now(),cards:[t],bet:e.bet,score:0,status:"PLAYING",isSplit:!0};e.isSplit=!0,this.playerHands.splice(this.activeHandIndex+1,0,r),e.cards.push(this.draw()),e.score=this.calculateScore(e.cards),r.cards.push(this.draw()),r.score=this.calculateScore(r.cards)}}async playDealer(){this.dealerHand[1].isFaceDown=!1,this.cdr.detectChanges(),await this.wait(800);let e=this.calculateScore(this.dealerHand);for(;e<17;)this.dealerHand.push(this.draw()),e=this.calculateScore(this.dealerHand),this.cdr.detectChanges(),this.sound.playNoise(.05,"highpass",1e3,.2),await this.wait(1e3);this.resolveAllHands()}resolveAllHands(){this.gameState="FINISHED";let e=this.calculateScore(this.dealerHand),t=e===21&&this.dealerHand.length===2;this.playerHands.forEach(r=>{if(r.status==="BUST"){r.status="LOSE",this.updateSessionStats(-r.bet,!1);return}let i=r.status==="BLACKJACK",s=0;t?i?(r.status="PUSH",r.resultMessage="EGALIT\xC9",s=r.bet):(r.status="LOSE",r.resultMessage="PERDU"):i?(r.resultMessage="BLACKJACK !",s=r.bet*2.5):e>21?(r.status="WIN",r.resultMessage="DEALER SAUTE",s=r.bet*2):r.score>e?(r.status="WIN",r.resultMessage="GAGN\xC9",s=r.bet*2):r.score===e?(r.status="PUSH",r.resultMessage="EGALIT\xC9",s=r.bet):(r.status="LOSE",r.resultMessage="PERDU"),s>0?(r.resultAmount=s-r.bet,this.gameStateSvc.addMoney(s),this.updateSessionStats(s-r.bet,["WIN","BLACKJACK"].includes(r.status)&&i),["WIN","BLACKJACK"].includes(r.status)&&this.sound.playCash()):this.updateSessionStats(-r.bet,!1)}),this.gameStateSvc.gameState$.pipe(it(1)).subscribe(r=>{let i=O({},r.stats);i.blackjackIncome=(i.blackjackIncome||0)+this.playerHands.reduce((o,a)=>o+(a.resultAmount||-a.bet),0),i.handsPlayed=(i.handsPlayed||0)+this.playerHands.length;let s=Math.max(...this.playerHands.map(o=>o.resultAmount||0));s>(i.biggestWin||0)&&(i.biggestWin=s),this.gameStateSvc.updateState({stats:i})})}updateSessionStats(e,t){this.sessionStats.handsPlayed++,this.sessionStats.netProfit+=e,e<0&&(this.sessionStats.totalLost+=Math.abs(e)),t&&this.sessionStats.blackjacks++,e>this.sessionStats.biggestWin&&(this.sessionStats.biggestWin=e)}reset(){this.dealerHand=[],this.playerHands=[],this.activeHandIndex=-1,this.gameState="BETTING",this.bettingSlots.forEach(e=>e.bet=0)}createShoe(){let e=["\u2660","\u2665","\u2666","\u2663"],t=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];this.deck=[];for(let r=0;r<this.DECK_COUNT;r++)for(let i of e)for(let s of t)this.deck.push({suit:i,value:s,numValue:this.getVal(s),isRed:i==="\u2665"||i==="\u2666",id:Math.random().toString(),isFaceDown:!1});this.shuffle()}shuffle(){this.deck.sort(()=>Math.random()-.5),this.sound.playNoise(.5,"highpass",500,.3)}checkReshuffle(){this.deck.length<52*this.DECK_COUNT*.4&&this.createShoe()}getVal(e){return parseInt(e)||(e==="A"?11:10)}draw(){return this.deck.length===0&&this.createShoe(),this.deck.pop()}calculateScore(e){let t=0,r=0;for(let i of e)i.isFaceDown||(t+=i.numValue,i.value==="A"&&r++);for(;t>21&&r>0;)t-=10,r--;return t}static \u0275fac=function(t){return new(t||n)(ie(qt),ie(hn),ie(At))};static \u0275cmp=st({type:n,selectors:[["app-blackjack-solo"]],outputs:{exit:"exit"},standalone:!1,decls:49,vars:18,consts:[["chipTemplate",""],["chipStackTemplate",""],["cardTemplate",""],[1,"fixed","inset-0","z-[9999]","w-screen","h-screen","flex","flex-col","overflow-hidden","select-none","font-sans","bg-[#1a1a1a]"],[1,"absolute","inset-0","z-0","bg-[radial-gradient(circle_at_center,_#1a4731_0%,_#0f291e_60%,_#05100c_100%)]"],[1,"absolute","inset-0","z-0","opacity-15","mix-blend-overlay",2,"background-image","url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9IjAuMSIvPgo8L3N2Zz4=')"],[1,"absolute","top-6","right-6","z-[100]","flex","gap-3"],["title","Stats",1,"w-12","h-12","rounded-full","bg-slate-800/80","hover:bg-slate-700","text-blue-400","hover:text-white","flex","items-center","justify-center","transition-all","border","border-slate-600","shadow-lg","active:scale-95",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M3 3v18h18"],["d","M18 17V9"],["d","M13 17V5"],["d","M8 17v-3"],[1,"w-12","h-12","rounded-full","bg-red-900/50","hover:bg-red-600","text-white/80","hover:text-white","flex","items-center","justify-center","transition-all","border","border-red-500/30","shadow-lg","active:scale-95",3,"click"],[1,"absolute","top-6","left-6","z-[100]"],[1,"bg-slate-900/90","backdrop-blur-xl","pl-2","pr-6","py-2","rounded-full","border","border-slate-700","flex","items-center","gap-4","shadow-[0_0_20px_rgba(0,0,0,0.5)]"],[1,"w-10","h-10","rounded-full","bg-gradient-to-b","from-yellow-400","to-yellow-600","flex","items-center","justify-center","text-black","font-black","text-lg","shadow-inner","border-2","border-yellow-300"],[1,"flex","flex-col"],[1,"text-[9px]","text-slate-400","font-bold","uppercase","tracking-widest","leading-none","mb-1"],[1,"text-2xl","text-white","font-mono","font-bold","leading-none","tracking-tight"],["class","absolute top-24 right-6 z-[90] flex flex-col gap-2",4,"ngIf"],[1,"flex-1","relative","flex","flex-col","z-10","h-full"],[1,"h-[40%]","relative","flex","flex-col","items-center","justify-center","pt-8"],[1,"absolute","right-[5%]","top-12","w-36","h-24","bg-gradient-to-br","from-red-900","to-red-950","rounded-xl","border-l-4","border-t-2","border-red-800","shadow-2xl","transform","rotate-6","hidden","lg:flex","items-center","justify-center"],[1,"absolute","inset-0","bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]","opacity-20"],[1,"text-white/20","font-black","uppercase","tracking-widest","text-xs","transform","rotate-90"],[1,"flex","items-center","gap-2","mb-8","transition-opacity","duration-300"],[1,"text-[10px]","font-black","text-slate-400","uppercase","tracking-[0.2em]"],["class","bg-slate-800 text-white font-mono font-bold text-xs px-2 py-1 rounded shadow border border-slate-600",4,"ngIf"],[1,"relative","w-full","flex","justify-center",2,"height","140px"],[1,"relative","h-full","flex","justify-center","items-center"],["class","absolute transition-all duration-500 ease-out",3,"zIndex","transform",4,"ngFor","ngForOf"],[1,"flex-1","flex","items-end","justify-center","gap-6","md:gap-12","px-4","pb-52","z-20"],[4,"ngIf"],[1,"absolute","bottom-0","w-full","h-36","bg-gradient-to-t","from-[#050505]","via-[#0a0a0a]","to-transparent","border-t","border-white/5","flex","items-center","justify-center","z-[100]","px-4","pb-4"],["class","flex items-center gap-8 w-full max-w-5xl justify-between",4,"ngIf"],["class","flex gap-6",4,"ngIf"],[1,"absolute","top-24","right-6","z-[90]","flex","flex-col","gap-2"],[1,"bg-slate-900/95","backdrop-blur-xl","p-5","rounded-2xl","border","border-slate-700","shadow-2xl","w-64","text-sm"],[1,"flex","justify-between","items-center","border-b","border-slate-700","pb-3","mb-3"],[1,"text-xs","text-yellow-500","font-bold","uppercase","tracking-widest","flex","items-center","gap-2"],[1,"w-2","h-2","rounded-full","bg-green-500","animate-pulse"],[1,"space-y-3"],[1,"flex","justify-between","items-center","bg-slate-800/50","p-2","rounded"],[1,"text-slate-400"],[1,"font-mono","font-bold","text-base"],[1,"flex","justify-between","items-center","px-2"],[1,"text-slate-500"],[1,"font-mono","font-bold","text-red-500"],[1,"grid","grid-cols-2","gap-2","mt-2"],[1,"bg-slate-800","p-2","rounded","flex","flex-col","items-center"],[1,"text-[10px]","text-slate-500","uppercase"],[1,"font-bold","text-white"],[1,"font-bold","text-yellow-400"],[1,"bg-slate-800","text-white","font-mono","font-bold","text-xs","px-2","py-1","rounded","shadow","border","border-slate-600"],[1,"absolute","transition-all","duration-500","ease-out"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","group relative w-40 h-64 rounded-2xl border-[3px] border-dashed border-white/10 flex flex-col items-center justify-center cursor-pointer transition-all duration-200 hover:border-yellow-500/50 hover:bg-white/5 active:scale-95",3,"border-yellow-500","bg-yellow-500-10","click",4,"ngFor","ngForOf"],[1,"group","relative","w-40","h-64","rounded-2xl","border-[3px]","border-dashed","border-white/10","flex","flex-col","items-center","justify-center","cursor-pointer","transition-all","duration-200","hover:border-yellow-500/50","hover:bg-white/5","active:scale-95",3,"click"],["class","text-white/20 font-black uppercase tracking-widest text-xs group-hover:text-yellow-500 transition-colors pointer-events-none",4,"ngIf"],["class","relative filter drop-shadow-2xl",4,"ngIf"],["class","absolute bottom-6 text-[10px] font-bold text-yellow-500 uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity",4,"ngIf"],[1,"text-white/20","font-black","uppercase","tracking-widest","text-xs","group-hover:text-yellow-500","transition-colors","pointer-events-none"],[1,"relative","filter","drop-shadow-2xl"],[1,"absolute","bottom-6","text-[10px]","font-bold","text-yellow-500","uppercase","tracking-widest","opacity-0","group-hover:opacity-100","transition-opacity"],["class","relative min-w-[200px] h-64 flex flex-col items-center transition-all duration-500",3,"opacity-30","scale-100","scale-110","z-10","z-50",4,"ngFor","ngForOf"],[1,"relative","min-w-[200px]","h-64","flex","flex-col","items-center","transition-all","duration-500"],["class","absolute -top-16 flex flex-col items-center gap-1 animate-bounce",4,"ngIf"],[1,"mb-4","px-3","py-1.5","rounded-lg","bg-slate-900","font-mono","font-bold","text-white","border","border-slate-700","text-xs","relative","z-20","transition-colors","duration-300","shadow-xl"],[1,"relative","w-full","h-full","flex","justify-center"],[1,"relative","h-full","w-full","flex","justify-center","items-start"],["class","absolute top-0 transition-all duration-300 ease-out hover:-translate-y-6",3,"zIndex","transform",4,"ngFor","ngForOf"],[1,"absolute","-bottom-16","flex","flex-col","items-center","w-full","whitespace-nowrap","z-50"],["class","flex items-center gap-2 bg-slate-900/80 px-3 py-1 rounded-full border border-slate-700 shadow-lg mb-2",4,"ngIf"],["class","flex flex-col items-center gap-1",4,"ngIf"],[1,"absolute","-top-16","flex","flex-col","items-center","gap-1","animate-bounce"],[1,"text-yellow-400","text-xs","font-bold","uppercase","tracking-widest","shadow-black","drop-shadow-md"],["width","24","height","24","viewBox","0 0 24 24","fill","#facc15"],["d","M7 10l5 5 5-5z"],[1,"absolute","top-0","transition-all","duration-300","ease-out","hover:-translate-y-6"],[1,"flex","items-center","gap-2","bg-slate-900/80","px-3","py-1","rounded-full","border","border-slate-700","shadow-lg","mb-2"],[1,"w-3","h-3","rounded-full","bg-yellow-500"],[1,"text-xs","font-bold","text-white"],[1,"flex","flex-col","items-center","gap-1"],[1,"text-lg","font-black","uppercase","shadow-[0_4px_10px_rgba(0,0,0,0.5)]","px-4","py-2","rounded-xl","border-b-4","transition-transform","hover:scale-105"],["class","text-sm font-bold text-green-400 drop-shadow-md font-mono mt-1",4,"ngIf"],[1,"text-sm","font-bold","text-green-400","drop-shadow-md","font-mono","mt-1"],[1,"flex","items-center","gap-8","w-full","max-w-5xl","justify-between"],[1,"flex","gap-3","bg-black/40","p-3","rounded-2xl","border","border-white/10","shadow-inner","overflow-x-auto","scrollbar-hide"],["class","relative group transition-transform hover:-translate-y-2 active:scale-95 flex-shrink-0",3,"opacity-50","grayscale","click",4,"ngFor","ngForOf"],[1,"h-16","w-px","bg-white/10","mx-2"],[1,"flex","gap-4"],[1,"h-16","w-20","rounded-xl","bg-slate-800","hover:bg-slate-700","text-slate-300","font-bold","text-xs","uppercase","tracking-wide","border-b-4","border-slate-950","active:border-b-0","active:translate-y-1","transition-all","disabled:opacity-50","flex","flex-col","items-center","justify-center","gap-1","shadow-lg",3,"click","disabled"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M3 6h18"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"],["d","M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"h-16","px-12","rounded-xl","bg-gradient-to-b","from-green-500","to-green-700","hover:from-green-400","hover:to-green-600","text-white","font-black","text-lg","uppercase","tracking-widest","border-b-4","border-green-900","active:border-b-0","active:translate-y-1","transition-all","disabled:opacity-50","disabled:grayscale","shadow-[0_0_30px_rgba(34,197,94,0.3)]","flex","items-center","gap-3",3,"click","disabled"],["width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M5 3L19 12L5 21V3Z"],[1,"relative","group","transition-transform","hover:-translate-y-2","active:scale-95","flex-shrink-0",3,"click"],["class","absolute -top-3 left-1/2 -translate-x-1/2 text-yellow-400 text-[10px] font-bold animate-bounce",4,"ngIf"],[1,"absolute","-top-3","left-1/2","-translate-x-1/2","text-yellow-400","text-[10px]","font-bold","animate-bounce"],[1,"flex","gap-6"],[1,"action-btn","from-slate-600","to-slate-800","border-slate-950","text-green-400","hover:text-green-300",3,"click"],[1,"text-3xl","mb-1"],[1,"text-[10px]","font-black","uppercase","tracking-widest"],[1,"action-btn","from-red-600","to-red-800","border-red-950","text-white",3,"click"],["class","action-btn from-yellow-500 to-yellow-700 border-yellow-900 text-black",3,"click",4,"ngIf"],["class","action-btn from-purple-600 to-purple-800 border-purple-950 text-white",3,"click",4,"ngIf"],[1,"action-btn","from-yellow-500","to-yellow-700","border-yellow-900","text-black",3,"click"],[1,"text-2xl","mb-1","font-black"],[1,"action-btn","from-purple-600","to-purple-800","border-purple-950","text-white",3,"click"],[1,"text-2xl","mb-1","rotate-90"],[1,"h-16","px-12","rounded-full","bg-white","hover:bg-slate-200","text-black","font-black","text-xl","border-b-4","border-slate-400","active:border-b-0","active:translate-y-1","transition-all","shadow-[0_0_40px_rgba(255,255,255,0.4)]","animate-pulse","flex","items-center","gap-3",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","3"],["d","M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"],["d","M3 3v5h5"],[1,"w-16","h-16","rounded-full","shadow-[0_4px_6px_rgba(0,0,0,0.5),inset_0_-4px_4px_rgba(0,0,0,0.3)]","relative","flex","items-center","justify-center","font-sans","select-none"],[1,"absolute","inset-0","rounded-full","border-[6px]","border-dashed","border-white/40","opacity-80"],[1,"w-10","h-10","rounded-full","bg-white/90","shadow-inner","flex","items-center","justify-center","border","border-slate-300","z-10"],[1,"font-black","text-xs","text-black","tracking-tighter"],[1,"absolute","top-0","left-0","w-full","h-1/2","bg-gradient-to-b","from-white/20","to-transparent","rounded-t-full","pointer-events-none"],[1,"w-20","h-20","rounded-full","bg-yellow-500","border-[6px]","border-dashed","border-white/40","shadow-[0_10px_20px_rgba(0,0,0,0.6)]","flex","items-center","justify-center","relative"],[1,"absolute","bottom-1","w-full","h-full","rounded-full","bg-yellow-600","-z-10","translate-y-1"],[1,"absolute","bottom-2","w-full","h-full","rounded-full","bg-yellow-700","-z-20","translate-y-2"],[1,"w-12","h-12","rounded-full","bg-white","flex","items-center","justify-center","border","border-slate-300","shadow-inner"],[1,"font-black","text-black","text-sm"],[1,"w-28","h-40","rounded-xl","shadow-[2px_4px_10px_rgba(0,0,0,0.5)]","relative","select-none","overflow-hidden","bg-white","border","border-slate-200","transition-transform","backface-hidden"],[1,"absolute","top-1.5","left-1.5","flex","flex-col","items-center","leading-none"],[1,"font-black","text-2xl","tracking-tighter"],[1,"text-xl","mt-0.5"],[1,"absolute","bottom-1.5","right-1.5","flex","flex-col","items-center","leading-none","rotate-180"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"text-7xl","drop-shadow-sm","transform"],[1,"w-full","h-full","p-2"],[1,"w-full","h-full","border-2","border-white/20","rounded-lg","bg-[repeating-linear-gradient(45deg,#7f1d1d_0,#7f1d1d_10px,#991b1b_10px,#991b1b_20px)]","flex","items-center","justify-center"],[1,"w-12","h-12","bg-black/30","rounded-full","blur-md"]],template:function(t,r){if(t&1){let i=oe();p(0,"div",3),te(1,"div",4)(2,"div",5),p(3,"div",6)(4,"button",7),$("click",function(){return z(i),G(r.toggleStats())}),ur(),p(5,"svg",8),te(6,"path",9)(7,"path",10)(8,"path",11)(9,"path",12),g()(),sc(),p(10,"button",13),$("click",function(){return z(i),G(r.exit.emit())}),v(11,"\u2715"),g()(),p(12,"div",14)(13,"div",15)(14,"div",16),v(15,"\u20AC"),g(),p(16,"div",17)(17,"span",18),v(18,"Votre Solde"),g(),p(19,"span",19),v(20),ce(21,"number"),g()()()(),U(22,LZ,30,17,"div",20),p(23,"div",21)(24,"div",22)(25,"div",23),te(26,"div",24),p(27,"span",25),v(28,"Blackjack"),g()(),p(29,"div",26)(30,"span",27),v(31,"Croupier"),g(),U(32,VZ,2,1,"span",28),g(),p(33,"div",29)(34,"div",30),U(35,BZ,2,9,"div",31),g()()(),p(36,"div",32),U(37,qZ,2,1,"ng-container",33)(38,eX,2,1,"ng-container",33),g()(),p(39,"div",34),U(40,iX,17,4,"div",35)(41,aX,13,3,"div",36)(42,cX,7,1,"div",33),g(),U(43,lX,6,5,"ng-template",null,0,Fi)(45,uX,6,1,"ng-template",null,1,Fi)(47,fX,3,6,"ng-template",null,2,Fi),g()}t&2&&(S("@tableIntro",void 0),y(12),S("@fadeIn",void 0),y(8),Z(Pe(21,15,r.currentMoney,"1.0-0")),y(2),S("ngIf",r.showStats),y(7),fe("opacity-100",r.gameState!=="BETTING")("opacity-0",r.gameState==="BETTING"),y(3),S("ngIf",r.dealerScore>0),y(3),S("ngForOf",r.dealerHand),y(2),S("ngIf",r.gameState==="BETTING"),y(),S("ngIf",r.gameState!=="BETTING"),y(2),S("ngIf",r.gameState==="BETTING"),y(),S("ngIf",r.gameState==="PLAYING"),y(),S("ngIf",r.gameState==="FINISHED"))},dependencies:[Ln,Xt,Uu,Zn],styles:[".action-btn[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:20px;background-image:linear-gradient(to bottom,var(--tw-gradient-from),var(--tw-gradient-to));display:flex;flex-direction:column;align-items:center;justify-content:center;transition:all .1s;cursor:pointer;border-bottom-width:6px;box-shadow:0 10px 15px -3px #00000080}.action-btn[_ngcontent-%COMP%]:active{transform:translateY(6px);border-bottom-width:0;box-shadow:none}.action-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollbar-hide[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.bg-yellow-500-10[_ngcontent-%COMP%]{background-color:#eab3081a}"],data:{animation:[Vn("tableIntro",[ln(":enter",[Ye({transform:"scale(1.05)",opacity:0}),cn("800ms cubic-bezier(0.2, 0.8, 0.2, 1)",Ye({transform:"scale(1)",opacity:1}))])]),Vn("dealCard",[ln(":enter",[Ye({transform:"translate(50vw, -50vh) scale(0.5)",opacity:0}),cn("400ms cubic-bezier(0.16, 1, 0.3, 1)",Ye({transform:"translate(0, 0) scale(1)",opacity:1}))])]),Vn("chipDrop",[ln(":enter",[Ye({transform:"translateY(-50px) scale(1.5) rotate(180deg)",opacity:0}),cn("400ms cubic-bezier(0.175, 0.885, 0.32, 1.275)",Ye({transform:"translateY(0) scale(1) rotate(0)",opacity:1}))])]),Vn("fadeIn",[ln(":enter",[Ye({opacity:0,transform:"translateY(10px)"}),cn("300ms ease-out",Ye({opacity:1,transform:"translateY(0)"}))]),ln(":leave",[cn("200ms ease-in",Ye({opacity:0,transform:"translateY(10px)"}))])]),Vn("statPop",[ln(":increment",[Ye({transform:"scale(1.5)",color:"#4ade80"}),cn("300ms ease-out",Ye({transform:"scale(1)",color:"*"}))])])]}})};var SU=()=>["WIN","LOSE","PUSH","BLACKJACK","BUST"],Dl=n=>({$implicit:n}),dv=()=>["WIN","BLACKJACK"],hv=()=>["LOSE","BUST"];function mX(n,e){if(n&1){let t=oe();p(0,"div",27)(1,"div",28)(2,"div",29),v(3,"\u{1F464}"),g(),p(4,"div",30),v(5),p(6,"span",31),v(7,"a rejoint la table"),g()()(),p(8,"button",32),$("click",function(){z(t);let i=A(2);return G(i.launchBetting())}),v(9,"OUVRIR LA TABLE"),g()()}if(n&2){let t=A(2);y(5),J("",t.game==null||t.game.seats==null||t.game.seats[2]==null?null:t.game.seats[2].username," ")}}function gX(n,e){n&1&&(p(0,"div",33),v(1,"L'h\xF4te va lancer la partie..."),g())}function _X(n,e){if(n&1&&(p(0,"div",22)(1,"div",23),v(2,"\u23F3"),g(),p(3,"div",24),v(4,"En attente de l'adversaire..."),g(),U(5,mX,10,1,"div",25)(6,gX,2,0,"div",26),g()),n&2){let t=A();S("@fadeIn",void 0),y(5),S("ngIf",t.isHost&&(t.game==null||t.game.seats==null||t.game.seats[2]==null?null:t.game.seats[2].userId)),y(),S("ngIf",!t.isHost)}}function vX(n,e){if(n&1&&(p(0,"div",56),v(1),g()),n&2){let t=A(2);S("@fadeIn",void 0),y(),J(" ",t.statusMessage," ")}}function yX(n,e){if(n&1&&(p(0,"span",57),v(1),g()),n&2){let t=A(2);y(),Z(t.game.dealerScore)}}function bX(n,e){n&1&&Nn(0)}function EX(n,e){if(n&1&&(p(0,"div",58),U(1,bX,1,0,"ng-container",59),g()),n&2){let t=e.$implicit,r=e.index,i=A(2),s=Yn(30);Ke("z-index",r)("transform","translateX("+(r-(i.game.dealerHand.length-1)/2)*45+"px)"),S("@dealCard",void 0),y(),S("ngTemplateOutlet",s)("ngTemplateOutletContext",Qn(7,Dl,t))}}function wX(n,e){if(n&1&&(p(0,"div",60)(1,"span",61),v(2),g(),ur(),p(3,"svg",62),te(4,"path",63),g()()),n&2){let t=A(2);y(2),J("Tour de ",t.game.seats[1].username)}}function IX(n,e){if(n&1&&(p(0,"div",64),v(1),g()),n&2){let t=A(2);fe("text-green-400",t.game.seats[1].score<=21)("text-red-500",t.game.seats[1].score>21),y(),J(" ",t.game.seats[1].score," ")}}function SX(n,e){n&1&&Nn(0)}function CX(n,e){if(n&1&&(p(0,"div",65),U(1,SX,1,0,"ng-container",59),g()),n&2){let t=e.$implicit,r=e.index,i=A(2),s=Yn(30);Ke("z-index",r)("transform","translateX("+(r-(i.game.seats[1].hand.length-1)/2)*35+"px)"),S("@dealCard",void 0),y(),S("ngTemplateOutlet",s)("ngTemplateOutletContext",Qn(7,Dl,t))}}function TX(n,e){n&1&&Nn(0)}function DX(n,e){n&1&&(p(0,"div",68),v(1,"Pr\xEAt"),g())}function xX(n,e){if(n&1&&(p(0,"div",66),U(1,TX,1,0,"ng-container",59)(2,DX,2,0,"div",67),g()),n&2){let t=A(2),r=Yn(28);y(),S("ngTemplateOutlet",r)("ngTemplateOutletContext",Qn(3,Dl,t.game.seats[1].bet)),y(),S("ngIf",t.game.seats[1].status==="READY_TO_PLAY")}}function AX(n,e){if(n&1&&(p(0,"div",69),v(1),g()),n&2){let t=A(2);fe("text-green-400",kt(14,dv).includes(t.game.seats[1].status))("border-green-600",kt(15,dv).includes(t.game.seats[1].status))("text-red-500",kt(16,hv).includes(t.game.seats[1].status))("border-red-600",kt(17,hv).includes(t.game.seats[1].status))("text-blue-300",t.game.seats[1].status==="PUSH")("border-blue-500",t.game.seats[1].status==="PUSH"),S("@chipDrop",void 0),y(),J(" ",t.game.seats[1].status==="BUST"?"BUSTED":t.game.seats[1].status," ")}}function RX(n,e){if(n&1&&(p(0,"div",60)(1,"span",61),v(2),g(),ur(),p(3,"svg",62),te(4,"path",63),g()()),n&2){let t=A(2);y(2),J("Tour de ",t.game.seats[2].username)}}function kX(n,e){if(n&1&&(p(0,"div",64),v(1),g()),n&2){let t=A(2);fe("text-green-400",t.game.seats[2].score<=21)("text-red-500",t.game.seats[2].score>21),y(),J(" ",t.game.seats[2].score," ")}}function PX(n,e){n&1&&Nn(0)}function NX(n,e){if(n&1&&(p(0,"div",65),U(1,PX,1,0,"ng-container",59),g()),n&2){let t=e.$implicit,r=e.index,i=A(2),s=Yn(30);Ke("z-index",r)("transform","translateX("+(r-(i.game.seats[2].hand.length-1)/2)*35+"px)"),S("@dealCard",void 0),y(),S("ngTemplateOutlet",s)("ngTemplateOutletContext",Qn(7,Dl,t))}}function MX(n,e){n&1&&Nn(0)}function OX(n,e){n&1&&(p(0,"div",68),v(1,"Pr\xEAt"),g())}function FX(n,e){if(n&1&&(p(0,"div",66),U(1,MX,1,0,"ng-container",59)(2,OX,2,0,"div",67),g()),n&2){let t=A(2),r=Yn(28);y(),S("ngTemplateOutlet",r)("ngTemplateOutletContext",Qn(3,Dl,t.game.seats[2].bet)),y(),S("ngIf",t.game.seats[2].status==="READY_TO_PLAY")}}function LX(n,e){if(n&1&&(p(0,"div",69),v(1),g()),n&2){let t=A(2);fe("text-green-400",kt(14,dv).includes(t.game.seats[2].status))("border-green-600",kt(15,dv).includes(t.game.seats[2].status))("text-red-500",kt(16,hv).includes(t.game.seats[2].status))("border-red-600",kt(17,hv).includes(t.game.seats[2].status))("text-blue-300",t.game.seats[2].status==="PUSH")("border-blue-500",t.game.seats[2].status==="PUSH"),S("@chipDrop",void 0),y(),J(" ",t.game.seats[2].status==="BUST"?"BUSTED":t.game.seats[2].status," ")}}function VX(n,e){if(n&1&&(p(0,"div",34),U(1,vX,2,2,"div",35),p(2,"div",36)(3,"div",37),te(4,"div",38),p(5,"span",39),v(6,"Blackjack"),g()(),p(7,"div",40)(8,"span",41),v(9,"Croupier"),g(),U(10,yX,2,1,"span",42),g(),p(11,"div",43)(12,"div",44),U(13,EX,2,9,"div",45),g()()(),p(14,"div",46)(15,"div",47),U(16,wX,5,1,"div",48),p(17,"div",49)(18,"div",50),v(19),g(),U(20,IX,2,5,"div",51),g(),p(21,"div",52),U(22,CX,2,9,"div",53),g(),U(23,xX,3,5,"div",54)(24,AX,2,18,"div",55),g(),p(25,"div",47),U(26,RX,5,1,"div",48),p(27,"div",49)(28,"div",50),v(29),g(),U(30,kX,2,5,"div",51),g(),p(31,"div",52),U(32,NX,2,9,"div",53),g(),U(33,FX,3,5,"div",54)(34,LX,2,18,"div",55),g()()()),n&2){let t=A();y(),S("ngIf",t.statusMessage),y(6),fe("opacity-100",t.game.phase!=="BETTING")("opacity-0",t.game.phase==="BETTING"),y(3),S("ngIf",t.game.dealerScore>0),y(3),S("ngForOf",t.game.dealerHand),y(2),fe("opacity-40",t.game.turnIndex!==1&&t.game.phase==="PLAYING"),y(),S("ngIf",t.game.turnIndex===1&&t.game.phase==="PLAYING"),y(3),Z(t.game.seats[1].username),y(),S("ngIf",t.game.seats[1].hand.length>0),y(2),S("ngForOf",t.game.seats[1].hand),y(),S("ngIf",t.game.seats[1].bet>0),y(),S("ngIf",kt(23,SU).includes(t.game.seats[1].status)&&t.game.phase==="RESULT"),y(),fe("opacity-40",t.game.turnIndex!==2&&t.game.phase==="PLAYING"),y(),S("ngIf",t.game.turnIndex===2&&t.game.phase==="PLAYING"),y(3),Z(t.game.seats[2].username),y(),S("ngIf",t.game.seats[2].hand.length>0),y(2),S("ngForOf",t.game.seats[2].hand),y(),S("ngIf",t.game.seats[2].bet>0),y(),S("ngIf",kt(24,SU).includes(t.game.seats[2].status)&&t.game.phase==="RESULT")}}function UX(n,e){n&1&&Nn(0)}function BX(n,e){if(n&1){let t=oe();p(0,"button",82),$("click",function(){let i=z(t).$implicit,s=A(3);return G(s.addBet(i.val))}),U(1,UX,1,0,"ng-container",59),g()}if(n&2){let t=e.$implicit,r=A(3),i=Yn(26);S("disabled",r.currentMoney<t.val),y(),S("ngTemplateOutlet",i)("ngTemplateOutletContext",Qn(3,Dl,t))}}function jX(n,e){if(n&1){let t=oe();p(0,"div",75)(1,"div",76),U(2,BX,2,5,"button",77),g(),te(3,"div",78),p(4,"button",79),$("click",function(){z(t);let i=A(2);return G(i.validateBet())}),p(5,"span"),v(6,"VALIDER"),g(),ur(),p(7,"svg",80),te(8,"path",81),g()()()}if(n&2){let t=A(2);S("@fadeIn",void 0),y(2),S("ngForOf",t.chips),y(2),S("disabled",t.mySeat.bet===0)}}function $X(n,e){n&1&&(p(0,"div",83),v(1," EN ATTENTE DE L'AUTRE JOUEUR... "),g()),n&2&&S("@fadeIn",void 0)}function HX(n,e){if(n&1){let t=oe();p(0,"div",84)(1,"button",85),$("click",function(){z(t);let i=A(2);return G(i.hit())}),p(2,"div",86),v(3,"+"),g(),p(4,"span",87),v(5,"Carte"),g()(),p(6,"button",88),$("click",function(){z(t);let i=A(2);return G(i.stand())}),p(7,"div",86),v(8,"\u270B"),g(),p(9,"span",87),v(10,"Rester"),g()()()}n&2&&S("@fadeIn",void 0)}function zX(n,e){n&1&&(p(0,"div")(1,"div",89),v(2,"Fin de manche \u2022 Nouvelle partie imminente..."),g()()),n&2&&S("@fadeIn",void 0)}function GX(n,e){if(n&1&&(p(0,"div",70),U(1,jX,9,3,"div",71)(2,$X,2,1,"div",72)(3,HX,11,1,"div",73)(4,zX,3,1,"div",74),g()),n&2){let t=A();y(),S("ngIf",t.game.phase==="BETTING"&&t.mySeat.status!=="READY_TO_PLAY"),y(),S("ngIf",t.game.phase==="BETTING"&&t.mySeat.status==="READY_TO_PLAY"),y(),S("ngIf",t.game.phase==="PLAYING"&&t.isMyTurn),y(),S("ngIf",t.game.phase==="RESULT")}}function qX(n,e){if(n&1){let t=oe();p(0,"div",98)(1,"div",99)(2,"div",100),v(3),g(),p(4,"div")(5,"div",101),v(6),g(),p(7,"div",102),v(8),ce(9,"number"),g()()(),p(10,"button",103),$("click",function(){let i=z(t).$implicit,s=A(2);return G(s.invite(i))}),v(11,"INVITER"),g()()}if(n&2){let t=e.$implicit;y(3),Z(t.avatarId),y(3),Z(t.username),y(2),Ms("",t.title," \u2022 ",ot(9,4,t.money)," \u20AC")}}function WX(n,e){n&1&&(p(0,"div",104),v(1,"Aucun joueur disponible :("),g())}function KX(n,e){if(n&1){let t=oe();p(0,"div",90)(1,"div",91)(2,"button",92),$("click",function(){z(t);let i=A();return G(i.showOnlinePlayers=!1)}),v(3,"\u2715"),g(),p(4,"h3",93)(5,"span",94),v(6,"\u{1F30D}"),g(),v(7," JOUEURS EN LIGNE"),g(),p(8,"div",95),U(9,qX,12,6,"div",96)(10,WX,2,0,"div",97),g()()()}if(n&2){let t=A();y(9),S("ngForOf",t.onlinePlayers),y(),S("ngIf",t.onlinePlayers.length===0)}}function YX(n,e){if(n&1){let t=oe();p(0,"button",105),$("click",function(){z(t);let i=A();return G(i.loadOnlinePlayers())}),p(1,"span"),v(2,"TROUVER DES JOUEURS"),g(),p(3,"span",106),v(4,"\u{1F50D}"),g()()}}function QX(n,e){if(n&1&&(p(0,"div",107),te(1,"div",108),p(2,"div",109)(3,"span",110),v(4),g()(),te(5,"div",111),g()),n&2){let t=e.$implicit;Ke("background","linear-gradient(135deg, "+t.color+" 0%, "+t.accent+" 100%)"),y(3),Ke("color",t.accent),y(),Z(t.val)}}function JX(n,e){if(n&1&&(p(0,"div",112),te(1,"div",113)(2,"div",114),p(3,"div",115)(4,"span",116),v(5),g()()()),n&2){let t=e.$implicit;y(5),Z(t)}}function ZX(n,e){if(n&1&&(Wn(0),p(1,"div",118)(2,"span",119),v(3),g(),p(4,"span",120),v(5),g()(),p(6,"div",121)(7,"span",119),v(8),g(),p(9,"span",120),v(10),g()(),p(11,"div",122)(12,"span",123),v(13),g()(),Kn()),n&2){let t=A().$implicit;y(2),fe("text-red-600",t.isRed)("text-black",!t.isRed),y(),Z(t.value),y(),fe("text-red-600",t.isRed)("text-black",!t.isRed),y(),Z(t.suit),y(2),fe("text-red-600",t.isRed)("text-black",!t.isRed),y(),Z(t.value),y(),fe("text-red-600",t.isRed)("text-black",!t.isRed),y(),Z(t.suit),y(2),fe("text-red-600",t.isRed)("text-black",!t.isRed),y(),Z(t.suit)}}function XX(n,e){n&1&&(Wn(0),p(1,"div",124)(2,"div",125),te(3,"div",126),g()(),Kn())}function eee(n,e){if(n&1&&(p(0,"div",117),U(1,ZX,14,25,"ng-container",74)(2,XX,4,0,"ng-container",74),g()),n&2){let t=e.$implicit;fe("bg-red-900",t.isFaceDown)("border-red-950",t.isFaceDown),y(),S("ngIf",!t.isFaceDown),y(),S("ngIf",t.isFaceDown)}}var fv=class n{constructor(e,t,r,i){this.firebase=e;this.gameState=t;this.sound=r;this.cdr=i}exit=new je;currentMoney=0;game=null;gameSub=null;mySeatIndex=-1;onlinePlayers=[];showOnlinePlayers=!1;chips=[{val:100,color:"#171717",border:"#404040",accent:"#0a0a0a"},{val:500,color:"#a855f7",border:"#9333ea",accent:"#7e22ce"},{val:1e3,color:"#eab308",border:"#ca8a04",accent:"#a16207"},{val:5e3,color:"#f97316",border:"#ea580c",accent:"#c2410c"}];ngOnInit(){this.gameState.gameState$.subscribe(e=>this.currentMoney=e.money),this.gameSub=this.firebase.activeGame$.subscribe(e=>{if(this.game&&e){let t=this.game.seats[1].hand.length,r=e.seats[1].hand.length,i=this.game.seats[2].hand.length,s=e.seats[2].hand.length;(r>t||s>i)&&this.sound.playNoise(.1,"highpass",1e3,.2)}if(this.game=e,e){this.mySeatIndex=e.hostId===this.firebase.currentUserId?1:2;let t=this.mySeatIndex===1?2:1;if(e.seats[t].status==="LEFT"&&e.phase==="PLAYING"&&(alert("L'adversaire a quitt\xE9 !"),this.exit.emit()),e.phase==="RESULT"&&this.mySeat.status==="WIN"&&!this.mySeat.resultAmount){let r=this.mySeat.bet*2;this.gameState.addMoney(r),this.sound.playCash(),this.mySeat.resultAmount=r}else if(e.phase==="RESULT"&&this.mySeat.status==="PUSH"&&!this.mySeat.resultAmount)this.gameState.addMoney(this.mySeat.bet),this.mySeat.resultAmount=this.mySeat.bet;else if(e.phase==="RESULT"&&this.mySeat.status==="BLACKJACK"&&!this.mySeat.resultAmount){let r=this.mySeat.bet*2.5;this.gameState.addMoney(r),this.sound.playCash(),this.mySeat.resultAmount=r}this.isHost&&e.phase==="RESULT"&&setTimeout(()=>{let r=e.seats;r.forEach(i=>{i.hand=[],i.score=0,i.bet=0,i.status="WAITING_BET",i.resultAmount=void 0}),this.firebase.updateGameState(e.id,{phase:"BETTING",seats:r,dealerHand:[],dealerScore:0,turnIndex:1,deck:[]})},5e3)}this.cdr.markForCheck()})}ngOnDestroy(){this.gameSub&&this.gameSub.unsubscribe()}get isHost(){return this.game?.hostId===this.firebase.currentUserId}get mySeat(){return this.game?.seats[this.mySeatIndex]}get isMyTurn(){return this.game?.turnIndex===this.mySeatIndex}get myRole(){return this.isHost?"H\xD4TE":"INVIT\xC9"}get statusMessage(){return this.game?this.game.phase==="BETTING"?"Placez vos mises...":this.game.phase==="DEALER_TURN"?"Le croupier joue...":this.game.phase==="RESULT"?"R\xE9sultats !":this.isMyTurn?"\xC0 VOUS DE JOUER !":`Au tour de ${this.game.seats[this.game.turnIndex]?.username}...`:""}async loadOnlinePlayers(){this.onlinePlayers=await this.firebase.getOnlinePlayers(),this.showOnlinePlayers=!0,this.cdr.markForCheck()}async invite(e){let t=await this.firebase.createMultiplayerGame(this.firebase.currentUsername,e.id);this.firebase.sendInvite(e.id,e.username,t,0,this.firebase.currentUsername),this.firebase.joinGameRoom(t),this.showOnlinePlayers=!1}addBet(e){this.currentMoney>=e&&(this.gameState.addMoney(-e),this.mySeat.bet+=e,this.sound.playNoise(.05,"lowpass",400,.4),this.firebase.updatePlayerBet(this.game.id,this.mySeatIndex,this.mySeat.bet,!1))}validateBet(){this.mySeat.status="READY_TO_PLAY",this.firebase.updatePlayerBet(this.game.id,this.mySeatIndex,this.mySeat.bet,!0),this.isHost&&this.game.seats[2].status==="READY_TO_PLAY"&&this.dealInitialCards()}launchBetting(){this.firebase.updateGameState(this.game.id,{phase:"BETTING"})}tryQuit(){this.mySeat&&this.mySeat.bet>0&&this.game?.phase==="PLAYING"&&!confirm("Partie en cours ! Vous perdrez votre mise. Quitter ?")||(this.game&&this.firebase.leaveGameRoom(this.game.id,this.mySeatIndex),this.firebase.leaveGame(),this.exit.emit())}createShoe(){let e=["\u2660","\u2665","\u2666","\u2663"],t=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],r=[];for(let i=0;i<6;i++)for(let s of e)for(let o of t)r.push({suit:s,value:o,numValue:parseInt(o)||(o==="A"?11:10),isRed:s==="\u2665"||s==="\u2666",id:Math.random().toString(),isFaceDown:!1});return r.sort(()=>Math.random()-.5)}async dealInitialCards(){if(!this.game)return;let e=this.createShoe(),t=[...this.game.seats],r=[];for(let i=1;i<=2;i++)t[i].status==="READY_TO_PLAY"&&(t[i].hand=[e.pop(),e.pop()],t[i].score=this.calculateScore(t[i].hand),t[i].status="PLAYING",t[i].score===21&&(t[i].status="BLACKJACK"));r.push(e.pop()),r.push(ee(O({},e.pop()),{isFaceDown:!0})),await this.firebase.updateGameState(this.game.id,{deck:e,seats:t,dealerHand:r,dealerScore:this.calculateScore(r),phase:"PLAYING",turnIndex:1})}hit(){this.doAction("hit")}stand(){this.doAction("stand")}async doAction(e){if(!this.game)return;let t=JSON.parse(JSON.stringify(this.game.seats)),r=t[this.mySeatIndex],i=this.game.deck;if(e==="hit"){let s=i.pop();s&&(r.hand.push(s),r.score=this.calculateScore(r.hand),r.score>21?(r.status="BUST",this.sound.playError(),this.passTurn(t,i)):(this.sound.playNoise(.1,"highpass",1e3,.2),await this.firebase.updateGameState(this.game.id,{seats:t,deck:i})))}else r.status="STAND",this.passTurn(t,i)}async passTurn(e,t){if(!this.game)return;let r=this.mySeatIndex+1;r>2&&(r=3),await this.firebase.updateGameState(this.game.id,{seats:e,deck:t,turnIndex:r}),r===3&&this.isHost&&setTimeout(()=>this.playDealerTurn(),1e3)}async playDealerTurn(){if(!this.game)return;await this.firebase.updateGameState(this.game.id,{phase:"DEALER_TURN"});let e=[...this.game.dealerHand],t=[...this.game.deck];for(e[1].isFaceDown=!1,await this.firebase.updateGameState(this.game.id,{dealerHand:e}),await new Promise(r=>setTimeout(r,1e3));this.calculateScore(e)<17;){let r=t.pop();r&&e.push(r),await this.firebase.updateGameState(this.game.id,{dealerHand:e,deck:t,dealerScore:this.calculateScore(e)}),await new Promise(i=>setTimeout(i,1e3))}this.resolveGame(e)}async resolveGame(e){if(!this.game)return;let t=[...this.game.seats],r=this.calculateScore(e);t.forEach(i=>{i.id!==0&&(i.status==="BUST"?i.status="LOSE":i.status==="BLACKJACK"||(r>21||i.score>r?i.status="WIN":i.score===r?i.status="PUSH":i.status="LOSE"))}),await this.firebase.updateGameState(this.game.id,{seats:t,phase:"RESULT"})}calculateScore(e){let t=0,r=0;for(let i of e)i.isFaceDown||(t+=i.numValue,i.value==="A"&&r++);for(;t>21&&r>0;)t-=10,r--;return t}static \u0275fac=function(t){return new(t||n)(ie(Ei),ie(qt),ie(hn),ie(At))};static \u0275cmp=st({type:n,selectors:[["app-blackjack-multi"]],outputs:{exit:"exit"},standalone:!1,decls:31,vars:12,consts:[["chipTemplate",""],["chipStackTemplate",""],["cardTemplate",""],[1,"fixed","inset-0","z-[9999]","w-screen","h-screen","flex","flex-col","overflow-hidden","select-none","font-sans","bg-[#1a1a1a]"],[1,"absolute","inset-0","z-0","bg-[radial-gradient(circle_at_center,_#1a4731_0%,_#0f291e_60%,_#05100c_100%)]"],[1,"absolute","inset-0","z-0","opacity-15","mix-blend-overlay",2,"background-image","url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9IjAuMSIvPgo8L3N2Zz4=')"],[1,"absolute","top-6","right-6","z-[100]","flex","gap-3"],[1,"bg-black/60","backdrop-blur-md","px-4","py-2","rounded-full","border","border-purple-500/30","flex","items-center","gap-2"],[1,"w-2","h-2","rounded-full","bg-purple-500","animate-pulse"],[1,"text-xs","font-bold","text-purple-300","uppercase","tracking-wider"],[1,"w-10","h-10","rounded-full","bg-red-900/50","hover:bg-red-600","text-white/80","hover:text-white","flex","items-center","justify-center","transition-all","border","border-red-500/30","shadow-lg","active:scale-95",3,"click"],[1,"absolute","top-6","left-6","z-[100]"],[1,"bg-slate-900/90","backdrop-blur-xl","pl-2","pr-6","py-2","rounded-full","border","border-slate-700","flex","items-center","gap-4","shadow-[0_0_20px_rgba(0,0,0,0.5)]"],[1,"w-10","h-10","rounded-full","bg-gradient-to-b","from-yellow-400","to-yellow-600","flex","items-center","justify-center","text-black","font-black","text-lg","shadow-inner","border-2","border-yellow-300"],[1,"flex","flex-col"],[1,"text-[9px]","text-slate-400","font-bold","uppercase","tracking-widest","leading-none","mb-1"],[1,"text-2xl","text-white","font-mono","font-bold","leading-none","tracking-tight"],["class","absolute inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm",4,"ngIf"],["class","flex-1 relative flex flex-col z-10 h-full",4,"ngIf"],["class","absolute bottom-0 w-full h-36 bg-gradient-to-t from-[#050505] via-[#0a0a0a] to-transparent border-t border-white/5 flex items-center justify-center z-[100] px-4 pb-4",4,"ngIf"],["class","absolute inset-0 z-[120] bg-black/90 backdrop-blur-xl flex items-center justify-center p-8",4,"ngIf"],["class","absolute bottom-10 left-1/2 -translate-x-1/2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white px-8 py-4 rounded-full font-black shadow-[0_0_40px_rgba(168,85,247,0.4)] transition-all hover:scale-105 active:scale-95 flex items-center gap-3 z-50",3,"click",4,"ngIf"],[1,"absolute","inset-0","z-50","flex","flex-col","items-center","justify-center","bg-black/80","backdrop-blur-sm"],[1,"text-6xl","mb-6","animate-bounce"],[1,"text-2xl","font-black","text-white","mb-8","tracking-widest","uppercase"],["class","flex flex-col gap-6 items-center bg-slate-900 p-8 rounded-2xl border border-slate-700 shadow-2xl",4,"ngIf"],["class","text-slate-400 font-mono text-sm animate-pulse bg-black/40 px-4 py-2 rounded-full",4,"ngIf"],[1,"flex","flex-col","gap-6","items-center","bg-slate-900","p-8","rounded-2xl","border","border-slate-700","shadow-2xl"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-full","bg-blue-600","flex","items-center","justify-center","text-2xl"],[1,"text-xl","font-bold","text-white"],[1,"text-slate-400","text-sm"],[1,"px-10","py-4","bg-gradient-to-r","from-green-600","to-green-500","hover:from-green-500","hover:to-green-400","text-white","font-black","rounded-xl","shadow-lg","transition-all","transform","hover:scale-105",3,"click"],[1,"text-slate-400","font-mono","text-sm","animate-pulse","bg-black/40","px-4","py-2","rounded-full"],[1,"flex-1","relative","flex","flex-col","z-10","h-full"],["class","absolute top-24 left-1/2 -translate-x-1/2 bg-black/60 text-white px-6 py-2 rounded-full text-xs font-bold border border-white/10 shadow-xl backdrop-blur-md z-50 tracking-widest uppercase",4,"ngIf"],[1,"h-[40%]","relative","flex","flex-col","items-center","justify-center","pt-8"],[1,"absolute","right-[5%]","top-12","w-36","h-24","bg-gradient-to-br","from-red-900","to-red-950","rounded-xl","border-l-4","border-t-2","border-red-800","shadow-2xl","transform","rotate-6","hidden","lg:flex","items-center","justify-center"],[1,"absolute","inset-0","bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]","opacity-20"],[1,"text-white/20","font-black","uppercase","tracking-widest","text-xs","transform","rotate-90"],[1,"flex","items-center","gap-2","mb-8","transition-opacity","duration-300"],[1,"text-[10px]","font-black","text-slate-400","uppercase","tracking-[0.2em]"],["class","bg-slate-800 text-white font-mono font-bold text-xs px-2 py-1 rounded shadow border border-slate-600",4,"ngIf"],[1,"relative","w-full","flex","justify-center",2,"height","140px"],[1,"relative","h-full","flex","justify-center","items-center"],["class","absolute transition-all duration-500 ease-out",3,"zIndex","transform",4,"ngFor","ngForOf"],[1,"flex-1","grid","grid-cols-2","gap-8","px-4","pb-52","z-20","items-end"],[1,"flex","flex-col","items-center","relative","transition-all","duration-300"],["class","absolute -top-16 flex flex-col items-center gap-1 animate-bounce z-50",4,"ngIf"],[1,"mb-4","flex","flex-col","items-center","gap-1","z-20","relative"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-wider"],["class","px-3 py-1.5 rounded-lg bg-slate-900 font-mono font-bold text-white border border-slate-700 text-xs shadow-xl",3,"text-green-400","text-red-500",4,"ngIf"],[1,"relative","h-40","w-full","flex","justify-center"],["class","absolute top-0 transition-all duration-300 ease-out hover:-translate-y-4",3,"zIndex","transform",4,"ngFor","ngForOf"],["class","mt-4 relative",4,"ngIf"],["class","absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 text-2xl font-black uppercase drop-shadow-[0_4px_10px_rgba(0,0,0,0.8)] whitespace-nowrap px-4 py-2 rounded-xl border-4 bg-black/80 backdrop-blur-md",3,"text-green-400","border-green-600","text-red-500","border-red-600","text-blue-300","border-blue-500",4,"ngIf"],[1,"absolute","top-24","left-1/2","-translate-x-1/2","bg-black/60","text-white","px-6","py-2","rounded-full","text-xs","font-bold","border","border-white/10","shadow-xl","backdrop-blur-md","z-50","tracking-widest","uppercase"],[1,"bg-slate-800","text-white","font-mono","font-bold","text-xs","px-2","py-1","rounded","shadow","border","border-slate-600"],[1,"absolute","transition-all","duration-500","ease-out"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"absolute","-top-16","flex","flex-col","items-center","gap-1","animate-bounce","z-50"],[1,"text-yellow-400","text-[10px]","font-bold","uppercase","tracking-widest","shadow-black","drop-shadow-md"],["width","24","height","24","viewBox","0 0 24 24","fill","#facc15"],["d","M7 10l5 5 5-5z"],[1,"px-3","py-1.5","rounded-lg","bg-slate-900","font-mono","font-bold","text-white","border","border-slate-700","text-xs","shadow-xl"],[1,"absolute","top-0","transition-all","duration-300","ease-out","hover:-translate-y-4"],[1,"mt-4","relative"],["class","absolute -right-12 top-1/2 -translate-y-1/2 bg-green-500 text-black text-[9px] font-black px-2 py-0.5 rounded uppercase",4,"ngIf"],[1,"absolute","-right-12","top-1/2","-translate-y-1/2","bg-green-500","text-black","text-[9px]","font-black","px-2","py-0.5","rounded","uppercase"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","z-50","text-2xl","font-black","uppercase","drop-shadow-[0_4px_10px_rgba(0,0,0,0.8)]","whitespace-nowrap","px-4","py-2","rounded-xl","border-4","bg-black/80","backdrop-blur-md"],[1,"absolute","bottom-0","w-full","h-36","bg-gradient-to-t","from-[#050505]","via-[#0a0a0a]","to-transparent","border-t","border-white/5","flex","items-center","justify-center","z-[100]","px-4","pb-4"],["class","flex items-center gap-8 w-full max-w-5xl justify-between",4,"ngIf"],["class","text-white font-bold animate-pulse text-lg tracking-widest bg-black/50 px-6 py-3 rounded-full border border-white/10",4,"ngIf"],["class","flex gap-6",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","gap-8","w-full","max-w-5xl","justify-between"],[1,"flex","gap-3","bg-black/40","p-3","rounded-2xl","border","border-white/10","shadow-inner","overflow-x-auto","scrollbar-hide"],["class","relative group transition-transform hover:-translate-y-2 active:scale-95 flex-shrink-0 disabled:opacity-30 disabled:grayscale",3,"disabled","click",4,"ngFor","ngForOf"],[1,"h-16","w-px","bg-white/10","mx-2"],[1,"h-16","px-12","rounded-xl","bg-gradient-to-b","from-green-500","to-green-700","hover:from-green-400","hover:to-green-600","text-white","font-black","text-lg","uppercase","tracking-widest","border-b-4","border-green-900","active:border-b-0","active:translate-y-1","transition-all","disabled:opacity-50","disabled:grayscale","shadow-[0_0_30px_rgba(34,197,94,0.3)]","flex","items-center","gap-3",3,"click","disabled"],["width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M5 3L19 12L5 21V3Z"],[1,"relative","group","transition-transform","hover:-translate-y-2","active:scale-95","flex-shrink-0","disabled:opacity-30","disabled:grayscale",3,"click","disabled"],[1,"text-white","font-bold","animate-pulse","text-lg","tracking-widest","bg-black/50","px-6","py-3","rounded-full","border","border-white/10"],[1,"flex","gap-6"],[1,"action-btn","from-slate-600","to-slate-800","border-slate-950","text-green-400","hover:text-green-300",3,"click"],[1,"text-3xl","mb-1"],[1,"text-[10px]","font-black","uppercase","tracking-widest"],[1,"action-btn","from-red-600","to-red-800","border-red-950","text-white",3,"click"],[1,"text-slate-400","font-mono","text-xs","uppercase","tracking-widest"],[1,"absolute","inset-0","z-[120]","bg-black/90","backdrop-blur-xl","flex","items-center","justify-center","p-8"],[1,"bg-slate-900","w-full","max-w-lg","rounded-2xl","border","border-slate-700","shadow-2xl","p-6","relative"],[1,"absolute","top-4","right-4","text-slate-500","hover:text-white",3,"click"],[1,"text-white","font-black","text-2xl","mb-6","flex","items-center","gap-3"],[1,"text-3xl"],[1,"max-h-[60vh]","overflow-y-auto","custom-scroll","space-y-2"],["class","p-4 bg-slate-800 rounded-xl border border-slate-700 flex justify-between items-center group hover:border-purple-500 transition-colors",4,"ngFor","ngForOf"],["class","text-center text-slate-500 py-8",4,"ngIf"],[1,"p-4","bg-slate-800","rounded-xl","border","border-slate-700","flex","justify-between","items-center","group","hover:border-purple-500","transition-colors"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-slate-700","flex","items-center","justify-center","text-xl"],[1,"font-bold","text-white","group-hover:text-purple-400","transition-colors"],[1,"text-xs","text-slate-500"],[1,"bg-purple-600","hover:bg-purple-500","text-white","text-xs","font-bold","px-4","py-2","rounded-lg","shadow-lg","transition-all","active:scale-95",3,"click"],[1,"text-center","text-slate-500","py-8"],[1,"absolute","bottom-10","left-1/2","-translate-x-1/2","bg-gradient-to-r","from-purple-600","to-indigo-600","hover:from-purple-500","hover:to-indigo-500","text-white","px-8","py-4","rounded-full","font-black","shadow-[0_0_40px_rgba(168,85,247,0.4)]","transition-all","hover:scale-105","active:scale-95","flex","items-center","gap-3","z-50",3,"click"],[1,"text-xl"],[1,"w-16","h-16","rounded-full","shadow-[0_4px_6px_rgba(0,0,0,0.5),inset_0_-4px_4px_rgba(0,0,0,0.3)]","relative","flex","items-center","justify-center","font-sans","select-none"],[1,"absolute","inset-0","rounded-full","border-[6px]","border-dashed","border-white/40","opacity-80"],[1,"w-10","h-10","rounded-full","bg-white/90","shadow-inner","flex","items-center","justify-center","border","border-slate-300","z-10"],[1,"font-black","text-xs","text-black","tracking-tighter"],[1,"absolute","top-0","left-0","w-full","h-1/2","bg-gradient-to-b","from-white/20","to-transparent","rounded-t-full","pointer-events-none"],[1,"w-20","h-20","rounded-full","bg-yellow-500","border-[6px]","border-dashed","border-white/40","shadow-[0_10px_20px_rgba(0,0,0,0.6)]","flex","items-center","justify-center","relative","transform","scale-75","lg:scale-100"],[1,"absolute","bottom-1","w-full","h-full","rounded-full","bg-yellow-600","-z-10","translate-y-1"],[1,"absolute","bottom-2","w-full","h-full","rounded-full","bg-yellow-700","-z-20","translate-y-2"],[1,"w-12","h-12","rounded-full","bg-white","flex","items-center","justify-center","border","border-slate-300","shadow-inner"],[1,"font-black","text-black","text-sm"],[1,"w-24","h-36","md:w-28","md:h-40","rounded-xl","shadow-[2px_4px_10px_rgba(0,0,0,0.5)]","relative","select-none","overflow-hidden","bg-white","border","border-slate-200","transition-transform","backface-hidden"],[1,"absolute","top-1.5","left-1.5","flex","flex-col","items-center","leading-none"],[1,"font-black","text-2xl","tracking-tighter"],[1,"text-xl","mt-0.5"],[1,"absolute","bottom-1.5","right-1.5","flex","flex-col","items-center","leading-none","rotate-180"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"text-7xl","drop-shadow-sm","transform"],[1,"w-full","h-full","p-2"],[1,"w-full","h-full","border-2","border-white/20","rounded-lg","bg-[repeating-linear-gradient(45deg,#7f1d1d_0,#7f1d1d_10px,#991b1b_10px,#991b1b_20px)]","flex","items-center","justify-center"],[1,"w-12","h-12","bg-black/30","rounded-full","blur-md"]],template:function(t,r){if(t&1){let i=oe();p(0,"div",3),te(1,"div",4)(2,"div",5),p(3,"div",6)(4,"div",7),te(5,"span",8),p(6,"span",9),v(7),g()(),p(8,"button",10),$("click",function(){return z(i),G(r.tryQuit())}),v(9,"\u2715"),g()(),p(10,"div",11)(11,"div",12)(12,"div",13),v(13,"\u20AC"),g(),p(14,"div",14)(15,"span",15),v(16,"Votre Solde"),g(),p(17,"span",16),v(18),ce(19,"number"),g()()()(),U(20,_X,7,3,"div",17)(21,VX,35,25,"div",18)(22,GX,5,4,"div",19)(23,KX,11,2,"div",20)(24,YX,5,0,"button",21)(25,QX,6,5,"ng-template",null,0,Fi)(27,JX,6,1,"ng-template",null,1,Fi)(29,eee,3,6,"ng-template",null,2,Fi),g()}t&2&&(S("@tableIntro",void 0),y(7),Z(r.myRole),y(3),S("@fadeIn",void 0),y(8),Z(Pe(19,9,r.currentMoney,"1.0-0")),y(2),S("ngIf",(r.game==null?null:r.game.phase)==="LOBBY"),y(),S("ngIf",r.game&&r.game.phase!=="LOBBY"),y(),S("ngIf",r.game&&r.game.phase!=="LOBBY"),y(),S("ngIf",r.showOnlinePlayers),y(),S("ngIf",!r.game))},dependencies:[Ln,Xt,Uu,Zn],styles:[".action-btn[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:20px;background-image:linear-gradient(to bottom,var(--tw-gradient-from),var(--tw-gradient-to));display:flex;flex-direction:column;align-items:center;justify-content:center;transition:all .1s;cursor:pointer;border-bottom-width:6px;box-shadow:0 10px 15px -3px #00000080}.action-btn[_ngcontent-%COMP%]:active{transform:translateY(6px);border-bottom-width:0;box-shadow:none}.action-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollbar-hide[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.bg-yellow-500-10[_ngcontent-%COMP%]{background-color:#eab3081a}"],data:{animation:[Vn("tableIntro",[ln(":enter",[Ye({transform:"scale(1.05)",opacity:0}),cn("800ms cubic-bezier(0.2, 0.8, 0.2, 1)",Ye({transform:"scale(1)",opacity:1}))])]),Vn("dealCard",[ln(":enter",[Ye({transform:"translate(50vw, -50vh) scale(0.5)",opacity:0}),cn("400ms cubic-bezier(0.16, 1, 0.3, 1)",Ye({transform:"translate(0, 0) scale(1)",opacity:1}))])]),Vn("chipDrop",[ln(":enter",[Ye({transform:"translateY(-50px) scale(1.5)",opacity:0}),cn("300ms cubic-bezier(0.175, 0.885, 0.32, 1.275)",Ye({transform:"translateY(0) scale(1)",opacity:1}))])]),Vn("fadeIn",[ln(":enter",[Ye({opacity:0,transform:"translateY(10px)"}),cn("300ms ease-out",Ye({opacity:1,transform:"translateY(0)"}))])])]}})};function nee(n,e){if(n&1){let t=oe();p(0,"div",3)(1,"div",4),v(2,"\u{1F3B0}"),g(),p(3,"h1",5),v(4,"Blackjack"),g(),p(5,"p",6),v(6,"Choisissez votre table"),g(),p(7,"div",7)(8,"button",8),$("click",function(){z(t);let i=A();return G(i.mode="SOLO")}),te(9,"div",9),p(10,"span",10),v(11,"\u{1F464}"),g(),p(12,"div",11)(13,"div",12),v(14,"SOLO"),g(),p(15,"p",13),v(16,"Entra\xEEnez-vous contre le croupier IA."),g()()(),p(17,"button",14),$("click",function(){z(t);let i=A();return G(i.mode="MULTI")}),te(18,"div",15),p(19,"span",10),v(20,"\u{1F30D}"),g(),p(21,"div",11)(22,"div",12),v(23,"ONLINE"),g(),p(24,"p",13),v(25,"D\xE9fiez d'autres joueurs en temps r\xE9el."),g()()()()()}n&2&&S("@fade",void 0)}function ree(n,e){if(n&1){let t=oe();p(0,"app-blackjack-solo",16),$("exit",function(){z(t);let i=A();return G(i.mode=null)}),g()}}function iee(n,e){if(n&1){let t=oe();p(0,"app-blackjack-multi",16),$("exit",function(){z(t);let i=A();return G(i.mode=null)}),g()}}var pv=class n{mode=null;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-blackjack-game"]],standalone:!1,decls:4,vars:3,consts:[[1,"h-full","w-full","bg-slate-950","relative","overflow-hidden","flex","flex-col","font-sans","select-none"],["class","absolute inset-0 z-50 flex flex-col items-center justify-center bg-slate-900/95",4,"ngIf"],[3,"exit",4,"ngIf"],[1,"absolute","inset-0","z-50","flex","flex-col","items-center","justify-center","bg-slate-900/95"],[1,"text-7xl","mb-8","animate-bounce"],[1,"text-5xl","font-black","text-white","mb-2","tracking-tighter","uppercase"],[1,"text-slate-400","mb-12","font-mono"],[1,"flex","gap-8","flex-wrap","justify-center"],[1,"group","relative","w-64","h-80","bg-slate-800","rounded-2xl","border-2","border-slate-700","hover:border-blue-500","transition-all","hover:scale-105","shadow-2xl","flex","flex-col","items-center","justify-center","gap-6","overflow-hidden","cursor-pointer",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-blue-600/20","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-6xl","group-hover:scale-110","transition-transform"],[1,"text-center","z-10"],[1,"text-3xl","font-black","text-white"],[1,"text-xs","text-slate-400","mt-2","px-6"],[1,"group","relative","w-64","h-80","bg-slate-800","rounded-2xl","border-2","border-slate-700","hover:border-purple-500","transition-all","hover:scale-105","shadow-2xl","flex","flex-col","items-center","justify-center","gap-6","overflow-hidden","cursor-pointer",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-purple-600/20","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[3,"exit"]],template:function(t,r){t&1&&(p(0,"div",0),U(1,nee,26,1,"div",1)(2,ree,1,0,"app-blackjack-solo",2)(3,iee,1,0,"app-blackjack-multi",2),g()),t&2&&(y(),S("ngIf",r.mode===null),y(),S("ngIf",r.mode==="SOLO"),y(),S("ngIf",r.mode==="MULTI"))},dependencies:[Xt,lv,fv],encapsulation:2,data:{animation:[Vn("fade",[ln(":enter",[Ye({opacity:0}),cn("300ms ease-out",Ye({opacity:1}))]),ln(":leave",[cn("200ms ease-in",Ye({opacity:0}))])])]}})};var oee=()=>["CHAIR","SCREEN","COFFEE","PC"];function aee(n,e){n&1&&te(0,"app-title-screen")}function cee(n,e){n&1&&(p(0,"div",2)(1,"div",3),v(2,"\u{1F680}"),g(),p(3,"div",4),v(4,"CHARGEMENT..."),g()())}function lee(n,e){if(n&1){let t=oe();p(0,"div",12)(1,"div",13),v(2,"\u2694\uFE0F"),g(),p(3,"div",14)(4,"div",15),v(5),g(),p(6,"div",16),v(7),g()(),p(8,"div",17)(9,"button",18),$("click",function(){let i=z(t).$implicit,s=A(3);return G(s.acceptInvite(i))}),v(10,"OUI"),g(),p(11,"button",19),$("click",function(){let i=z(t).$implicit,s=A(3);return G(s.firebaseService.declineInvite(i))}),v(12,"NON"),g()()()}if(n&2){let t=e.$implicit;y(5),J("D\xC9FI DE ",t.fromName),y(2),Ms("",t.gameType||"BLACKJACK"," \u2022 ",t.amount," \u20AC")}}function uee(n,e){if(n&1&&(p(0,"div",10),U(1,lee,13,3,"div",11),g()),n&2){let t=e.ngIf;y(),S("ngForOf",t)}}function dee(n,e){n&1&&te(0,"app-intro-game")}function hee(n,e){if(n&1&&(p(0,"div",56),v(1),g()),n&2){let t=A(2).$implicit;y(),J("\u{1F465} ",t.employees.length)}}function fee(n,e){if(n&1){let t=oe();p(0,"button",50),$("click",function(){z(t);let i=A().$implicit,s=A(3);return G(s.selectCompany(i))}),p(1,"div",51)(2,"div")(3,"div",52)(4,"span",53),v(5),g(),v(6),g(),p(7,"div",54),v(8),g()(),U(9,hee,2,1,"div",55),g()()}if(n&2){let t=A().$implicit,r=A(3);S("ngClass",(r.selectedCompany==null?null:r.selectedCompany.id)===t.id?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-900/20":"bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-300 hover:border-slate-600"),y(5),Z(t.type===r.JobType.FOODTRUCK?"\u{1F354}":t.type===r.JobType.FACTORY?"\u{1F3ED}":t.type===r.JobType.FREELANCE_DEV?"\u{1F4BB}":"\u{1F3B0}"),y(),Z(t.name),y(2),J("Niveau ",t.level),y(),S("ngIf",t.employees.length>0)}}function pee(n,e){if(n&1){let t=oe();p(0,"div",57)(1,"div",58)(2,"div",59)(3,"span",60),v(4),g(),v(5),g(),p(6,"span"),v(7,"\u{1F512}"),g()(),p(8,"button",61),ce(9,"async"),$("click",function(){z(t);let i=A().$implicit,s=A(3);return G(s.buyCompany(i))}),p(10,"span"),v(11,"ACHETER"),g(),p(12,"span",62),v(13),ce(14,"number"),g()()()}if(n&2){let t,r=A().$implicit,i=A(3);y(4),Z(r.type===i.JobType.FOODTRUCK?"\u{1F354}":r.type===i.JobType.FACTORY?"\u{1F3ED}":r.type===i.JobType.FREELANCE_DEV?"\u{1F4BB}":"\u{1F3B0}"),y(),Z(r.name),y(3),S("disabled",(((t=ot(9,4,i.gameState$))==null?null:t.money)||0)<i.getUnlockCost(r.type)),y(5),J("",Pe(14,6,i.getUnlockCost(r.type),"1.0-0")," \u20AC")}}function mee(n,e){if(n&1&&(p(0,"div",47),U(1,fee,10,5,"button",48)(2,pee,15,9,"div",49),g()),n&2){let t=e.$implicit;y(),S("ngIf",t.unlocked),y(),S("ngIf",!t.unlocked)}}function gee(n,e){n&1&&(p(0,"div",63)(1,"div",64),v(2,"\u{1F448}"),g(),p(3,"h2",65),v(4,"S\xE9lectionnez une activit\xE9"),g(),p(5,"p",66),v(6,"Cliquez sur une entreprise \xE0 gauche."),g()())}function _ee(n,e){n&1&&te(0,"app-freelance-dev-game",67)}function vee(n,e){n&1&&te(0,"app-foodtruck-game",67)}function yee(n,e){n&1&&te(0,"app-factory-game",67)}function bee(n,e){n&1&&te(0,"app-blackjack-game",67)}function Eee(n,e){if(n&1){let t=oe();p(0,"div",20)(1,"div",21)(2,"div",22)(3,"h1",23)(4,"span",24),v(5,"\u{1F680}"),g(),v(6," JEUB2 "),p(7,"span",25),v(8,"v1.3"),g()(),p(9,"div",26)(10,"div",27)(11,"span",28),v(12,"Argent"),g(),p(13,"span",29),v(14),ce(15,"async"),ce(16,"number"),g()(),p(17,"div",30)(18,"span",28),v(19),ce(20,"async"),g(),p(21,"span",31),v(22),ce(23,"async"),g()()()(),p(24,"div",32)(25,"button",33),$("click",function(){z(t);let i=A(2);return G(i.toggleGlobalShop())}),p(26,"span",34),v(27,"\u{1F6D2}"),g(),v(28," BOUTIQUE"),g()(),p(29,"div",35)(30,"div",36),v(31,"Mes Entreprises"),g(),U(32,mee,3,2,"div",37),ce(33,"async"),g(),p(34,"div",38)(35,"div",39),te(36,"span",40),v(37),ce(38,"async"),ce(39,"async"),g(),p(40,"button",41),$("click",function(){z(t);let i=A(2);return G(i.toggleOnlineTab())}),p(41,"span"),v(42,"\u{1F30D}"),g(),v(43," Online / Classement"),g(),p(44,"div",17)(45,"button",42),$("click",function(){z(t);let i=A(2);return G(i.logout())}),p(46,"span"),v(47,"\u{1F6AA}"),g()(),p(48,"button",43),$("click",function(){z(t);let i=A(2);return G(i.toggleAdmin())}),p(49,"span"),v(50,"\u{1F575}\uFE0F\u200D\u2642\uFE0F"),g()()()()(),p(51,"div",44),U(52,gee,7,0,"div",45)(53,_ee,1,0,"app-freelance-dev-game",46)(54,vee,1,0,"app-foodtruck-game",46)(55,yee,1,0,"app-factory-game",46)(56,bee,1,0,"app-blackjack-game",46),g()()}if(n&2){let t,r,i,s,o,a=A(2);y(14),J("",Pe(16,12,(t=ot(15,10,a.gameState$))==null?null:t.money,"1.0-0")," \u20AC"),y(5),J("Jour ",(r=ot(20,15,a.gameState$))==null?null:r.day),y(3),Z(a.formatTime(((i=ot(23,17,a.gameState$))==null?null:i.timeOfDay)||6)),y(10),S("ngForOf",(s=ot(33,19,a.gameState$))==null?null:s.companies),y(5),Z(((o=ot(38,21,a.firebaseService.user$))==null?null:o.displayName)||((o=ot(39,23,a.gameState$))==null||o.user==null?null:o.user.username)||"Anonyme"),y(15),S("ngIf",!a.selectedCompany),y(),S("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FREELANCE_DEV),y(),S("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FOODTRUCK),y(),S("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FACTORY),y(),S("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.CASINO)}}function wee(n,e){if(n&1){let t=oe();p(0,"div",83)(1,"div",84)(2,"div",85),v(3),g(),p(4,"div",14)(5,"div",86),v(6,"PDG"),g(),p(7,"div",87)(8,"input",88),Bo("ngModelChange",function(i){z(t);let s=A(4);return _c(s.newUsername,i)||(s.newUsername=i),G(i)}),g(),p(9,"button",89),$("click",function(){z(t);let i=A(4);return G(i.updateUsername())}),v(10,"SAUVER"),g()(),p(11,"div",90)(12,"div",91)(13,"div",92),v(14,"Niveau"),g(),p(15,"div",93),v(16,"CEO Senior"),g()(),p(17,"div",91)(18,"div",92),v(19,"Membre depuis"),g(),p(20,"div",93),v(21),ce(22,"date"),g()()()()(),p(23,"h3",94),v(24,"Statistiques de Carri\xE8re"),g(),p(25,"div",95)(26,"div",96)(27,"div",97),v(28,"\u{1F4B0}"),g(),p(29,"div",98),v(30,"Total Gagn\xE9"),g(),p(31,"div",99),v(32),ce(33,"number"),g()(),p(34,"div",96)(35,"div",97),v(36,"\u23F1\uFE0F"),g(),p(37,"div",98),v(38,"Jours de Jeu"),g(),p(39,"div",100),v(40),g()(),p(41,"div",96)(42,"div",97),v(43,"\u{1F480}"),g(),p(44,"div",98),v(45,"Boss Vaincus"),g(),p(46,"div",101),v(47),g()()(),p(48,"h3",102),v(49,"\u{1F4CA} Performances M\xE9tiers"),g(),p(50,"div",103)(51,"div",104)(52,"div",105)(53,"div",106),v(54,"\u{1F4BB}"),g(),p(55,"div",107),v(56,"Freelance"),g()(),p(57,"div",108)(58,"div",109)(59,"span",110),v(60,"Vitesse Max"),g(),p(61,"span",111),v(62),g()(),p(63,"div",109)(64,"span",110),v(65,"Caract\xE8res"),g(),p(66,"span",111),v(67),ce(68,"number"),g()(),p(69,"div",112)(70,"span",110),v(71,"Contrats"),g(),p(72,"span",111),v(73),g()()()(),p(74,"div",113)(75,"div",105)(76,"div",114),v(77,"\u{1F354}"),g(),p(78,"div",115),v(79,"Foodtruck"),g()(),p(80,"div",108)(81,"div",109)(82,"span",110),v(83,"Record Vitesse"),g(),p(84,"span",111),v(85),ce(86,"number"),g()(),p(87,"div",109)(88,"span",110),v(89,"Servis"),g(),p(90,"span",111),v(91),g()(),p(92,"div",112)(93,"span",110),v(94,"Meilleur Combo"),g(),p(95,"span",111),v(96),g()()()(),p(97,"div",116)(98,"div",105)(99,"div",117),v(100,"\u{1F3B0}"),g(),p(101,"div",118),v(102,"Casino"),g()(),p(103,"div",108)(104,"div",109)(105,"span",110),v(106,"Mains Jou\xE9es"),g(),p(107,"span",111),v(108),g()(),p(109,"div",109)(110,"span",110),v(111,"Plus Gros Gain"),g(),p(112,"span",119),v(113),ce(114,"number"),g()(),p(115,"div",112)(116,"span",110),v(117,"Max Mise"),g(),p(118,"span",111),v(119),ce(120,"number"),g()()()()()()}if(n&2){let t=e.ngIf,r=A(4);y(3),Z((t.user==null?null:t.user.avatarId)||"\u{1F464}"),y(5),Uo("ngModel",r.newUsername),y(13),Z(Pe(22,15,t.user==null?null:t.user.creationDate,"shortDate")||"Aujourd'hui"),y(11),J("",Pe(33,18,t.totalMoneyEarned,"1.0-0")," \u20AC"),y(8),Z(t.day),y(7),Z(t.freelanceUpgrades.bossBeaten),y(15),J("",t.stats.maxWpm||0," WPM"),y(5),Z(Pe(68,21,t.stats.totalCharsTyped||0,"1.0-0")),y(6),Z(t.freelanceUpgrades.contractsCompleted),y(12),J("",Pe(86,24,(t.stats.fastestBurgerMs||0)/1e3,"1.2-2"),"s"),y(6),Z(t.stats.burgersServed||0),y(5),J("x",t.stats.bestServiceCombo||0),y(12),Z(t.stats.handsPlayed||0),y(5),J("+",Pe(114,27,t.stats.biggestWin||0,"1.0-0")," \u20AC"),y(6),J("",Pe(120,30,t.stats.highestBet||0,"1.0-0")," \u20AC")}}function Iee(n,e){if(n&1&&(p(0,"div",81),U(1,wee,121,33,"div",82),ce(2,"async"),g()),n&2){let t=A(3);y(),S("ngIf",ot(2,1,t.gameState$))}}function See(n,e){if(n&1){let t=oe();p(0,"div",127),$("click",function(){z(t);let i=A(4);return G(i.viewPlayerDetails(i.leaderboard[1]))}),p(1,"div",128)(2,"div",129),v(3),g(),p(4,"div",130),v(5),ce(6,"number"),g()(),p(7,"div",131)(8,"div",132),v(9,"2"),g(),p(10,"div",133),v(11,"\u{1F948}"),g()()()}if(n&2){let t=A(4);y(3),Z(t.leaderboard[1].username),y(2),J("",Pe(6,2,t.leaderboard[1].money,"1.0-0")," \u20AC")}}function Cee(n,e){if(n&1){let t=oe();p(0,"div",134),$("click",function(){z(t);let i=A(4);return G(i.viewPlayerDetails(i.leaderboard[0]))}),p(1,"div",128)(2,"div",135),v(3),g(),p(4,"div",136),v(5),ce(6,"number"),g()(),p(7,"div",137)(8,"div",138),v(9,"1"),g(),p(10,"div",139),v(11,"\u{1F451}"),g()()()}if(n&2){let t=A(4);y(3),Z(t.leaderboard[0].username),y(2),J("",Pe(6,2,t.leaderboard[0].money,"1.0-0")," \u20AC")}}function Tee(n,e){if(n&1){let t=oe();p(0,"div",127),$("click",function(){z(t);let i=A(4);return G(i.viewPlayerDetails(i.leaderboard[2]))}),p(1,"div",128)(2,"div",140),v(3),g(),p(4,"div",141),v(5),ce(6,"number"),g()(),p(7,"div",142)(8,"div",143),v(9,"3"),g(),p(10,"div",144),v(11,"\u{1F949}"),g()()()}if(n&2){let t=A(4);y(3),Z(t.leaderboard[2].username),y(2),J("",Pe(6,2,t.leaderboard[2].money,"1.0-0")," \u20AC")}}function Dee(n,e){if(n&1){let t=oe();p(0,"div",145),$("click",function(){let i=z(t).$implicit,s=A(4);return G(s.viewPlayerDetails(i))}),p(1,"div",146),v(2),g(),p(3,"div",147)(4,"div",148),v(5),g(),p(6,"div",149),v(7),ce(8,"number"),g()()()}if(n&2){let t=e.$implicit,r=e.index,i=A(4);S("ngClass",i.getRankClass(r)),y(2),J("#",r+1),y(3),Z(t.username),y(2),J("",Pe(8,4,t.money,"1.0-0")," \u20AC")}}function xee(n,e){if(n&1&&(p(0,"div",120)(1,"div",121)(2,"div",122),U(3,See,12,5,"div",123)(4,Cee,12,5,"div",124)(5,Tee,12,5,"div",123),g(),p(6,"div",125),U(7,Dee,9,7,"div",126),g()()()),n&2){let t=A(3);y(3),S("ngIf",t.leaderboard.length>1),y(),S("ngIf",t.leaderboard.length>0),y(),S("ngIf",t.leaderboard.length>2),y(2),S("ngForOf",t.leaderboard)}}function Aee(n,e){if(n&1){let t=oe();p(0,"div",156)(1,"div",157),v(2),g(),p(3,"div",158),v(4),g(),p(5,"div",159)(6,"div",160),v(7),ce(8,"number"),g(),p(9,"button",161),$("click",function(){let i=z(t).$implicit,s=A(4);return G(s.buyItem(i))}),v(10,"ACHETER"),g()()()}if(n&2){let t=e.$implicit;y(2),Z(t.type),y(2),J("Vendeur: ",t.sellerName),y(3),J("",Pe(8,3,t.price,"1.0-0")," \u20AC")}}function Ree(n,e){if(n&1){let t=oe();p(0,"div",150)(1,"div",151)(2,"div")(3,"h3",152),v(4,"\u{1F4E6} MARCH\xC9 NOIR"),g()(),p(5,"button",153),$("click",function(){z(t);let i=A(3);return G(i.sellEmployee())}),v(6,"\u2795 Vendre Dev"),g()(),p(7,"div",154),U(8,Aee,11,6,"div",155),g()()}if(n&2){let t=A(3);y(8),S("ngForOf",t.marketItems)}}function kee(n,e){if(n&1&&(p(0,"div",168)(1,"div",72),v(2),g(),p(3,"div")(4,"div",169),v(5),g(),p(6,"div",170),v(7),g(),p(8,"div",171),v(9),ce(10,"number"),g()()()),n&2){let t=e.$implicit;y(2),Z(t.icon||"\u{1F3E2}"),y(3),Z(t.name),y(2),J("Chef: ",t.leaderName),y(2),J("Valuation: ",Pe(10,4,t.totalValuation,"1.0-0")," \u20AC")}}function Pee(n,e){if(n&1){let t=oe();p(0,"div",150)(1,"div",162)(2,"h3",163)(3,"span",13),v(4,"\u{1F91D}"),g(),v(5," HOLDINGS"),g(),p(6,"div",17)(7,"input",164),Bo("ngModelChange",function(i){z(t);let s=A(3);return _c(s.newHoldingName,i)||(s.newHoldingName=i),G(i)}),g(),p(8,"button",165),$("click",function(){z(t);let i=A(3);return G(i.createHolding())}),v(9,"CR\xC9ER"),g()()(),p(10,"div",166),U(11,kee,11,7,"div",167),g()()}if(n&2){let t=A(3);y(7),Uo("ngModel",t.newHoldingName),y(4),S("ngForOf",t.holdings)}}function Nee(n,e){if(n&1){let t=oe();p(0,"div",172),$("click",function(){z(t);let i=A(3);return G(i.closePlayerDetails())}),p(1,"div",173),$("click",function(i){return z(t),G(i.stopPropagation())}),p(2,"button",174),$("click",function(){z(t);let i=A(3);return G(i.closePlayerDetails())}),v(3,"\u2715"),g(),p(4,"div",175)(5,"div",176),v(6),g(),p(7,"h2",177),v(8),g(),p(9,"div",178),v(10),ce(11,"number"),g()()()()}if(n&2){let t=A(3);y(6),Z(t.selectedPlayer.avatarId||"\u{1F464}"),y(2),Z(t.selectedPlayer.username),y(2),J("",Pe(11,3,t.selectedPlayer.money,"1.0-0")," \u20AC")}}function Mee(n,e){if(n&1){let t=oe();p(0,"div",68),$("click",function(){z(t);let i=A(2);return G(i.toggleOnlineTab())}),p(1,"div",69),$("click",function(i){return z(t),G(i.stopPropagation())}),p(2,"div",70)(3,"div",71)(4,"div",72),v(5,"\u{1F30D}"),g(),p(6,"div")(7,"h2",73),v(8,"LE MONDE CONNECT\xC9"),g(),p(9,"div",74)(10,"button",75),$("click",function(){z(t);let i=A(2);return G(i.activeTab="PROFILE")}),v(11,"Mon Profil"),g(),p(12,"button",75),$("click",function(){z(t);let i=A(2);return G(i.activeTab="LEADERBOARD")}),v(13,"Classement"),g(),p(14,"button",75),$("click",function(){z(t);let i=A(2);return G(i.activeTab="MARKET")}),v(15,"March\xE9 Noir"),g(),p(16,"button",75),$("click",function(){z(t);let i=A(2);return G(i.activeTab="GUILD")}),v(17,"Guildes"),g()()()(),p(18,"button",76),$("click",function(){z(t);let i=A(2);return G(i.toggleOnlineTab())}),v(19,"\u2715"),g()(),U(20,Iee,3,3,"div",77)(21,xee,8,4,"div",78)(22,Ree,9,1,"div",79)(23,Pee,12,2,"div",79)(24,Nee,12,6,"div",80),g()()}if(n&2){let t=A(2);y(10),gc(t.activeTab==="PROFILE"?"bg-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-400 hover:bg-blue-600 hover:text-white"),y(2),gc(t.activeTab==="LEADERBOARD"?"bg-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-400 hover:bg-blue-600 hover:text-white"),y(2),gc(t.activeTab==="MARKET"?"bg-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-400 hover:bg-blue-600 hover:text-white"),y(2),gc(t.activeTab==="GUILD"?"bg-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-400 hover:bg-blue-600 hover:text-white"),y(4),S("ngIf",t.activeTab==="PROFILE"),y(),S("ngIf",t.activeTab==="LEADERBOARD"),y(),S("ngIf",t.activeTab==="MARKET"),y(),S("ngIf",t.activeTab==="GUILD"),y(),S("ngIf",t.selectedPlayer)}}function Oee(n,e){if(n&1){let t=oe();p(0,"div",191)(1,"div",192),v(2),g(),p(3,"div",169),v(4),g(),p(5,"button",193),$("click",function(){let i=z(t).$implicit,s=A(4);return G(s.buySetup(i))}),v(6),ce(7,"number"),g()()}if(n&2){let t=e.$implicit,r=A().ngIf,i=A(3);y(2),Z(t==="CHAIR"?"\u{1FA91}":t==="SCREEN"?"\u{1F5A5}\uFE0F":t==="COFFEE"?"\u2615":"\u{1F680}"),y(2),Z(t),y(),S("disabled",i.getSetupLevel(r,t)>0||r.money<i.getSetupCost(t)),y(),Z(i.getSetupLevel(r,t)>0?"POSS\xC9D\xC9":Pe(7,4,i.getSetupCost(t),"1.0-0")+" \u20AC")}}function Fee(n,e){n&1&&(p(0,"div",189),U(1,Oee,8,7,"div",190),g()),n&2&&(y(),S("ngForOf",kt(1,oee)))}function Lee(n,e){if(n&1){let t=oe();p(0,"div",179),$("click",function(){z(t);let i=A(2);return G(i.toggleGlobalShop())}),p(1,"div",180),$("click",function(i){return z(t),G(i.stopPropagation())}),p(2,"div",181)(3,"h2",182),v(4,"BOUTIQUE GLOBALE"),g(),p(5,"div",183),v(6),ce(7,"async"),ce(8,"number"),g()(),p(9,"div",184)(10,"section")(11,"h3",185),v(12,"\u{1F4BB} Freelance Dev"),g(),U(13,Fee,2,2,"div",186),ce(14,"async"),g()(),p(15,"div",187)(16,"button",188),$("click",function(){z(t);let i=A(2);return G(i.toggleGlobalShop())}),v(17,"Fermer"),g()()()()}if(n&2){let t,r=A(2);y(6),J("",Pe(8,4,(t=ot(7,2,r.gameState$))==null?null:t.money,"1.0-0")," \u20AC"),y(7),S("ngIf",ot(14,7,r.gameState$))}}function Vee(n,e){if(n&1){let t=oe();p(0,"div",194),$("click",function(){z(t);let i=A(2);return G(i.toggleAdmin())}),p(1,"div",195),$("click",function(i){return z(t),G(i.stopPropagation())}),p(2,"h2",196)(3,"span"),v(4,"\u{1F575}\uFE0F\u200D\u2642\uFE0F"),g(),v(5," ZONE DE TRICHE"),g(),p(6,"div",197)(7,"div",198)(8,"button",199),$("click",function(){z(t);let i=A(2);return G(i.adminAddMoney(1e3))}),v(9,"+1k \u20AC"),g(),p(10,"button",199),$("click",function(){z(t);let i=A(2);return G(i.adminAddMoney(1e5))}),v(11,"+100k \u20AC"),g()(),p(12,"div",200)(13,"button",201),$("click",function(){z(t);let i=A(2);return G(i.resetData())}),v(14,"\u26A0\uFE0F EFFACER MA SAUVEGARDE"),g()()()()()}}function Uee(n,e){if(n&1&&(Wn(0),U(1,uee,2,1,"div",5),ce(2,"async"),U(3,dee,1,0,"app-intro-game",0),ce(4,"async"),U(5,Eee,57,25,"div",6),ce(6,"async"),U(7,Mee,25,13,"div",7)(8,Lee,18,9,"div",8)(9,Vee,15,0,"div",9),Kn()),n&2){let t,r,i=A();y(),S("ngIf",ot(2,6,i.firebaseService.invites$)),y(2),S("ngIf",!((t=ot(4,8,i.gameState$))!=null&&t.hasCompletedIntro)),y(2),S("ngIf",(r=ot(6,10,i.gameState$))==null?null:r.hasCompletedIntro),y(2),S("ngIf",i.isOnlineTabOpen),y(),S("ngIf",i.isGlobalShopOpen),y(),S("ngIf",i.isAdminOpen)}}var mv=class n{constructor(e,t,r){this.gameStateService=e;this.soundService=t;this.firebaseService=r;this.gameState$=this.gameStateService.gameState$}gameState$;selectedCompany=null;dailyReport=null;isGlobalShopOpen=!1;isAdminOpen=!1;isOnlineTabOpen=!1;isRefreshing=!1;activeTab="LEADERBOARD";selectedPlayer=null;tickerMessages=["Bienvenue sur le march\xE9 mondial !","Le Bitcoin est en chute libre...","Qui sera le prochain CEO de l'ann\xE9e ?"];tickerIndex=0;newUsername="";newHoldingName="";JobType=z_;SetupItem=G_;availableThemes=vh;leaderboard=[];marketItems=[];holdings=[];prestigeItems=[{id:"WATCH",name:"Rolex en Or",icon:"\u231A",cost:5e3,desc:"Le temps c'est de l'argent."},{id:"CAR",name:"Tesla Model S",icon:"\u{1F697}",cost:45e3,desc:"Z\xE9ro \xE9mission, 100% style."},{id:"APARTMENT",name:"Penthouse",icon:"\u{1F3E2}",cost:25e4,desc:"Vue sur tout ton empire."},{id:"ISLAND",name:"\xCEle Priv\xE9e",icon:"\u{1F3DD}\uFE0F",cost:5e6,desc:"La retraite anticip\xE9e."}];ngOnInit(){this.gameState$.pipe(Oe(e=>{let t=e.companies.find(i=>i.type==="FOODTRUCK"&&i.unlocked),r=e.companies.find(i=>i.unlocked);return t||r}),gn(e=>!!e),it(1)).subscribe(e=>{!this.selectedCompany&&e&&(this.selectedCompany=e)}),this.gameState$.subscribe(e=>{e.user&&!this.newUsername&&(this.newUsername=e.user.username)}),this.gameStateService.dayEnded$.subscribe(e=>{this.dailyReport=e,this.soundService.playSuccess()}),vs(5e3).subscribe(()=>{this.tickerIndex=(this.tickerIndex+1)%this.tickerMessages.length})}toggleOnlineTab(){this.isOnlineTabOpen=!this.isOnlineTabOpen,this.isOnlineTabOpen&&this.refreshOnlineData()}async connect(){await this.gameStateService.connectOnline(),this.refreshOnlineData()}refreshOnlineData(){this.isRefreshing||(this.isRefreshing=!0,this.soundService.playNoise(.1,"highpass",2e3,.1),Zl({leaderboard:this.firebaseService.getLeaderboard(),market:this.firebaseService.getMarketItems(),holdings:this.firebaseService.getHoldings()}).subscribe({next:e=>{this.leaderboard=e.leaderboard.filter(t=>t.username&&t.username!=="Entrepreneur"&&t.username!=="Anonyme"&&t.username!=="Joueur"),this.marketItems=e.market,this.holdings=e.holdings,this.isRefreshing=!1},error:e=>{console.error("Err refresh:",e),this.isRefreshing=!1}}))}acceptInvite(e){this.firebaseService.acceptInvite(e).then(t=>{this.firebaseService.joinGameRoom(t),this.gameStateService.gameState$.pipe(it(1)).subscribe(r=>{let i=r.companies.find(s=>s.type==="CASINO");i&&(this.selectedCompany=i)})})}toggleGlobalShop(){this.isGlobalShopOpen=!this.isGlobalShopOpen,this.isGlobalShopOpen&&this.soundService.playSoftPop()}getSetupCost(e){return{CHAIR:2e3,SCREEN:5e3,COFFEE:1500,PC:2e4}[e]||0}getSetupLevel(e,t){if(!e.freelanceUpgrades)return 0;switch(t){case"CHAIR":return e.freelanceUpgrades.chairLevel;case"SCREEN":return e.freelanceUpgrades.screenLevel;case"COFFEE":return e.freelanceUpgrades.coffeeLevel;case"PC":return e.freelanceUpgrades.pcLevel;default:return 0}}buySetup(e){let t=this.getSetupCost(e);this.gameState$.pipe(it(1)).subscribe(r=>{r.money>=t?(this.gameStateService.buySetupUpgrade(e,t),this.soundService.playSuccess()):this.soundService.playError()})}isThemeOwned(e,t){return e.freelanceUpgrades.ownedThemes.includes(t)}isActiveTheme(e,t){return e.freelanceUpgrades.activeThemeId===t}buyOrEquipTheme(e){this.gameState$.pipe(it(1)).subscribe(t=>{this.isThemeOwned(t,e.id)?(this.gameStateService.setFreelanceTheme(e.id),this.soundService.playSoftPop()):t.money>=e.cost?(this.gameStateService.buyFreelanceTheme(e.id,e.cost),this.soundService.playSuccess()):this.soundService.playError()})}getFoodtruckLevel(e,t){return e.foodtruckUpgrades&&e.foodtruckUpgrades[t+"Level"]||1}getFoodtruckCost(e,t){let r=this.getFoodtruckLevel(e,t);return Math.floor(150*Math.pow(1.6,r))}buyFoodtruck(e){this.gameState$.pipe(it(1)).subscribe(t=>{let r=this.getFoodtruckCost(t,e);t.money>=r?(this.gameStateService.buyFoodtruckUpgrade(e,r),this.soundService.playSuccess()):this.soundService.playError()})}buyKeyboard(){this.gameState$.pipe(it(1)).subscribe(e=>{e.money>=5e3&&!e.foodtruckUpgrades.hasKeyboard?(this.gameStateService.unlockKeyboard(5e3),this.soundService.playSuccess()):this.soundService.playError()})}hasPrestigeItem(e,t){return e.achievements.some(r=>r.id==="PRESTIGE_"+t)}buyPrestige(e){this.gameStateService.buyPrestigeItem(e)?this.soundService.playSuccess():this.soundService.playError()}getMyPrestigeItems(e){return e.achievements.filter(t=>t.id.startsWith("PRESTIGE_"))}getUnlockCost(e){switch(e){case"FREELANCE_DEV":return 10;case"FACTORY":return 50;case"CASINO":return 25;default:return 0}}buyCompany(e){let t=this.getUnlockCost(e.type);t>0&&(this.gameStateService.unlockCompany(e.id,t),this.soundService.playSuccess())}updateUsername(){this.newUsername?.trim()&&(this.gameStateService.updateUsername(this.newUsername.trim()),this.soundService.playSuccess())}createHolding(){this.newHoldingName&&this.firebaseService.createHolding(this.newHoldingName,this.newUsername).then(()=>{this.refreshOnlineData(),this.newHoldingName="",this.soundService.playSuccess()})}sellEmployee(){this.gameState$.pipe(it(1)).subscribe(e=>{let t={sellerId:this.firebaseService.currentUserId||"anon",sellerName:e.user?.username||"Anonyme",type:"Dev Senior",price:5e3,timestamp:Date.now(),rarity:"RARE"};this.firebaseService.sellItem(t),this.soundService.playCash(),setTimeout(()=>this.refreshOnlineData(),1e3)})}buyItem(e){this.gameState$.pipe(it(1)).subscribe(async t=>{if(t.money>=e.price){let r=await this.firebaseService.buyItem(e);r==="SUCCESS"?(this.gameStateService.addMoney(-e.price),e.type==="Dev Senior"&&this.gameStateService.hireEmployee("2","DEV_SENIOR"),this.soundService.playSuccess(),this.refreshOnlineData()):r==="SNIPER_PROTECTION"?(alert("\u{1F6D1} Protection Sniper ! Attendez quelques secondes."),this.soundService.playError()):(alert("Trop tard ! Objet d\xE9j\xE0 vendu."),this.soundService.playError(),this.refreshOnlineData())}else this.soundService.playError()})}getRankClass(e){return e===0?"bg-yellow-500/20 border-yellow-500/50 text-yellow-100 shadow-[0_0_15px_rgba(234,179,8,0.3)]":e===1?"bg-slate-300/10 border-slate-300/50 text-slate-200":e===2?"bg-amber-700/10 border-amber-700/50 text-amber-200":"bg-slate-800/50 border-slate-700 text-slate-400 hover:bg-slate-700 transition-colors"}viewPlayerDetails(e){this.selectedPlayer=e,this.soundService.playSoftPop()}closePlayerDetails(){this.selectedPlayer=null}selectCompany(e){e.unlocked&&(this.gameState$.subscribe(t=>{let r=t.companies.find(i=>i.id===e.id);r&&this.selectedCompany?.id===r.id&&(this.selectedCompany=r)}),this.selectedCompany=e,this.soundService.playSoftPop())}formatTime(e){let t=Math.floor(e),r=Math.floor((e-t)*60);return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}toggleAdmin(){this.isAdminOpen=!this.isAdminOpen}adminAddMoney(e){this.gameStateService.addMoney(e),this.soundService.playCash()}adminSetTime(e){let t=parseFloat(e.target.value);!isNaN(t)&&t>=0&&t<=24&&this.gameStateService.setTimeOfDay(t)}resetData(){this.gameStateService.hardResetGame()}logout(){confirm("Se d\xE9connecter ?")&&this.gameStateService.logoutAndClear()}closeReport(){this.dailyReport=null}static \u0275fac=function(t){return new(t||n)(ie(qt),ie(hn),ie(Ei))};static \u0275cmp=st({type:n,selectors:[["app-game-shell"]],standalone:!1,decls:8,vars:13,consts:[[4,"ngIf"],["class","fixed inset-0 bg-slate-950 flex flex-col items-center justify-center z-[9999]",4,"ngIf"],[1,"fixed","inset-0","bg-slate-950","flex","flex-col","items-center","justify-center","z-[9999]"],[1,"text-6xl","animate-bounce","mb-6"],[1,"text-white","font-bold","text-2xl","tracking-widest","animate-pulse"],["class","fixed top-4 left-1/2 -translate-x-1/2 z-[1000] flex flex-col gap-2 pointer-events-auto",4,"ngIf"],["class","flex h-screen w-full bg-slate-950 text-slate-200 font-sans overflow-hidden",4,"ngIf"],["class","fixed inset-0 bg-slate-950/95 z-[999] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","fixed inset-0 bg-slate-950/90 z-[999] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","fixed inset-0 bg-red-950/90 z-[999] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],[1,"fixed","top-4","left-1/2","-translate-x-1/2","z-[1000]","flex","flex-col","gap-2","pointer-events-auto"],["class","bg-slate-900 border border-purple-500 p-4 rounded-xl shadow-2xl flex items-center gap-4 animate-bounce min-w-[300px]",4,"ngFor","ngForOf"],[1,"bg-slate-900","border","border-purple-500","p-4","rounded-xl","shadow-2xl","flex","items-center","gap-4","animate-bounce","min-w-[300px]"],[1,"text-3xl"],[1,"flex-1"],[1,"font-bold","text-white","text-sm"],[1,"text-xs","text-purple-300"],[1,"flex","gap-2"],[1,"bg-green-600","hover:bg-green-500","text-white","p-2","rounded-lg","text-xs","font-bold",3,"click"],[1,"bg-red-600/20","hover:bg-red-600","text-red-400","hover:text-white","p-2","rounded-lg","text-xs","font-bold",3,"click"],[1,"flex","h-screen","w-full","bg-slate-950","text-slate-200","font-sans","overflow-hidden"],[1,"w-64","bg-slate-900","border-r","border-slate-800","flex","flex-col","shrink-0","z-20","shadow-xl"],[1,"p-4","border-b","border-slate-800","flex","flex-col","gap-1","bg-slate-950/50"],[1,"font-black","text-xl","tracking-tighter","text-white","flex","items-center","gap-2"],[1,"text-2xl"],[1,"text-xs","font-normal","text-slate-500","border","border-slate-700","rounded","px-1"],[1,"flex","justify-between","items-end","mt-2"],[1,"flex","flex-col"],[1,"text-[10px]","uppercase","font-bold","text-slate-500","tracking-widest"],[1,"text-green-400","font-mono","font-bold","text-lg"],[1,"flex","flex-col","items-end"],[1,"text-blue-400","font-mono","font-bold","text-sm"],[1,"p-3","pb-0"],[1,"w-full","py-3","bg-gradient-to-r","from-purple-600","to-indigo-600","hover:from-purple-500","hover:to-indigo-500","text-white","font-black","uppercase","tracking-widest","rounded-xl","shadow-lg","border","border-white/10","flex","items-center","justify-center","gap-2","transition-all","hover:scale-[1.02]","active:scale-95",3,"click"],[1,"text-xl"],[1,"flex-1","overflow-y-auto","p-3","space-y-2","custom-scroll"],[1,"text-[10px]","font-bold","text-slate-600","uppercase","tracking-widest","px-2","mb-1","mt-2"],["class","mb-2",4,"ngFor","ngForOf"],[1,"p-4","border-t","border-slate-800","bg-slate-950/30","flex","flex-col","gap-2"],[1,"text-[10px]","text-slate-500","text-center","flex","items-center","justify-center","gap-2"],[1,"w-2","h-2","bg-green-500","rounded-full","animate-pulse"],[1,"w-full","py-2","px-3","rounded-lg","border","border-blue-500","text-blue-400","hover:bg-blue-900/30","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","py-2","px-3","rounded-lg","border","border-red-900/50","text-red-500","hover:bg-red-950/30","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","py-2","px-3","rounded-lg","border","border-slate-700","text-slate-400","hover:bg-slate-800","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","relative","bg-slate-950","overflow-hidden","flex","flex-col","z-0"],["class","h-full flex flex-col items-center justify-center text-slate-600",4,"ngIf"],["class","w-full h-full block",4,"ngIf"],[1,"mb-2"],["class","w-full text-left p-3 rounded-xl transition-all duration-200 border relative group overflow-hidden",3,"ngClass","click",4,"ngIf"],["class","w-full p-3 rounded-xl border border-slate-800 bg-slate-900/50 relative overflow-hidden flex flex-col gap-2 opacity-80 hover:opacity-100 transition-opacity",4,"ngIf"],[1,"w-full","text-left","p-3","rounded-xl","transition-all","duration-200","border","relative","group","overflow-hidden",3,"click","ngClass"],[1,"relative","z-10","flex","justify-between","items-start"],[1,"font-bold","text-sm","flex","items-center","gap-2"],[1,"text-lg"],[1,"text-xs","opacity-70","mt-1"],["class","bg-black/20 px-2 py-1 rounded text-[10px] font-bold",4,"ngIf"],[1,"bg-black/20","px-2","py-1","rounded","text-[10px]","font-bold"],[1,"w-full","p-3","rounded-xl","border","border-slate-800","bg-slate-900/50","relative","overflow-hidden","flex","flex-col","gap-2","opacity-80","hover:opacity-100","transition-opacity"],[1,"flex","justify-between","items-center","opacity-60"],[1,"font-bold","text-sm","flex","items-center","gap-2","text-slate-400"],[1,"text-lg","grayscale"],[1,"w-full","py-2","bg-green-600","hover:bg-green-500","disabled:bg-slate-800","disabled:text-slate-600","text-white","font-bold","rounded-lg","transition-all","text-xs","flex","justify-center","items-center","gap-2","shadow-lg",3,"click","disabled"],[1,"bg-black/20","px-1.5","rounded","text-green-100"],[1,"h-full","flex","flex-col","items-center","justify-center","text-slate-600"],[1,"text-6xl","mb-6","animate-bounce"],[1,"text-2xl","font-bold","text-slate-500"],[1,"text-slate-600","mt-2"],[1,"w-full","h-full","block"],[1,"fixed","inset-0","bg-slate-950/95","z-[999]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-blue-500/30","w-full","max-w-6xl","h-[90%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden","relative",3,"click"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-950/80","backdrop-blur-md","z-10"],[1,"flex","items-center","gap-4"],[1,"text-4xl"],[1,"text-2xl","font-black","text-white","tracking-tight"],[1,"flex","gap-2","mt-2"],[1,"text-xs","font-bold","uppercase","tracking-wider","px-3","py-1.5","rounded-lg","transition-all","border","border-transparent",3,"click"],[1,"w-10","h-10","rounded-full","bg-slate-800","hover:bg-red-500/20","text-slate-400","hover:text-red-500","flex","items-center","justify-center","transition-all",3,"click"],["class","flex-1 flex flex-col p-8 bg-slate-900/50 overflow-y-auto custom-scroll",4,"ngIf"],["class","flex-1 flex overflow-hidden z-10",4,"ngIf"],["class","flex-1 flex flex-col p-8 bg-slate-900 overflow-y-auto custom-scroll",4,"ngIf"],["class","absolute inset-0 bg-black/80 z-20 flex items-center justify-center p-12 backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],[1,"flex-1","flex","flex-col","p-8","bg-slate-900/50","overflow-y-auto","custom-scroll"],["class","max-w-4xl mx-auto w-full",4,"ngIf"],[1,"max-w-4xl","mx-auto","w-full"],[1,"flex","gap-8","mb-8"],[1,"w-32","h-32","rounded-full","bg-gradient-to-br","from-blue-500","to-purple-600","flex","items-center","justify-center","text-6xl","shadow-2xl","border-4","border-slate-900"],[1,"text-xs","text-slate-500","uppercase","font-bold","tracking-widest","mb-1"],[1,"flex","items-center","gap-3","mb-4"],["type","text","placeholder","Votre Pseudo",1,"bg-transparent","text-4xl","font-black","text-white","border-b-2","border-transparent","focus:border-blue-500","focus:outline-none","w-full","placeholder:text-slate-700",3,"ngModelChange","ngModel"],[1,"text-sm","bg-blue-600","px-4","py-2","rounded","text-white","font-bold","hover:bg-blue-500","transition-all","shadow-lg","active:scale-95",3,"click"],[1,"flex","gap-4"],[1,"bg-slate-800","px-4","py-2","rounded-lg","border","border-slate-700"],[1,"text-[10px]","text-slate-500","uppercase"],[1,"text-white","font-bold"],[1,"text-lg","font-bold","text-white","mb-4","border-b","border-slate-700","pb-2"],[1,"grid","grid-cols-3","gap-4","mb-8"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","flex-col","items-center"],[1,"text-2xl","mb-2"],[1,"text-xs","text-slate-500","uppercase","font-bold"],[1,"text-xl","font-mono","font-bold","text-green-400"],[1,"text-xl","font-mono","font-bold","text-blue-400"],[1,"text-xl","font-mono","font-bold","text-purple-400"],[1,"text-lg","font-bold","text-white","mb-4","border-b","border-slate-700","pb-2","flex","items-center","gap-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","mb-8"],[1,"bg-slate-800/50","p-4","rounded-xl","border","border-slate-700","hover:border-blue-500","transition-colors","group"],[1,"flex","justify-between","items-start","mb-2"],[1,"text-2xl","p-2","bg-blue-900/30","rounded-lg"],[1,"text-xs","font-bold","text-blue-400","uppercase","tracking-wider"],[1,"space-y-2"],[1,"flex","justify-between","border-b","border-white/5","pb-1"],[1,"text-slate-400","text-xs"],[1,"text-white","font-mono","font-bold"],[1,"flex","justify-between"],[1,"bg-slate-800/50","p-4","rounded-xl","border","border-slate-700","hover:border-orange-500","transition-colors","group"],[1,"text-2xl","p-2","bg-orange-900/30","rounded-lg"],[1,"text-xs","font-bold","text-orange-400","uppercase","tracking-wider"],[1,"bg-slate-800/50","p-4","rounded-xl","border","border-slate-700","hover:border-green-500","transition-colors","group"],[1,"text-2xl","p-2","bg-green-900/30","rounded-lg"],[1,"text-xs","font-bold","text-green-400","uppercase","tracking-wider"],[1,"text-green-400","font-mono","font-bold"],[1,"flex-1","flex","overflow-hidden","z-10"],[1,"w-full","flex","flex-col","bg-slate-950/30"],[1,"p-6","pb-6","flex","items-end","justify-center","gap-4","border-b","border-slate-800/50","min-h-[240px]","bg-gradient-to-b","from-slate-900/50","to-slate-950"],["class","flex flex-col items-center gap-2 w-1/4 group cursor-pointer hover:-translate-y-2 transition-transform",3,"click",4,"ngIf"],["class","flex flex-col items-center gap-2 w-1/3 -mt-6 group cursor-pointer hover:-translate-y-2 transition-transform",3,"click",4,"ngIf"],[1,"flex-1","overflow-y-auto","custom-scroll","p-4","space-y-2"],["class","p-3 rounded-xl border flex items-center gap-4 transition-all hover:translate-x-1 cursor-pointer hover:bg-white/5",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","gap-2","w-1/4","group","cursor-pointer","hover:-translate-y-2","transition-transform",3,"click"],[1,"text-center","relative","z-10"],[1,"text-xs","font-bold","text-slate-300","truncate"],[1,"text-[10px]","text-slate-500","font-mono"],[1,"w-full","h-24","bg-gradient-to-t","from-slate-700","to-slate-500","rounded-t-lg","flex","items-end","justify-center","pb-2","relative","border-t","border-slate-400"],[1,"text-3xl","font-black","text-slate-800","opacity-50"],[1,"absolute","-top-4","w-10","h-10","rounded-full","bg-slate-200","border-4","border-slate-500","flex","items-center","justify-center","text-xl","shadow-xl"],[1,"flex","flex-col","items-center","gap-2","w-1/3","-mt-6","group","cursor-pointer","hover:-translate-y-2","transition-transform",3,"click"],[1,"text-sm","font-black","text-yellow-400","truncate","drop-shadow-md"],[1,"text-xs","text-yellow-600","font-mono","font-bold"],[1,"w-full","h-36","bg-gradient-to-t","from-yellow-600","to-yellow-400","rounded-t-lg","flex","items-end","justify-center","pb-4","relative","border-t","border-yellow-300"],[1,"text-5xl","font-black","text-yellow-800","opacity-50","relative","z-10"],[1,"absolute","-top-6","text-3xl","animate-bounce"],[1,"text-xs","font-bold","text-amber-700","truncate"],[1,"text-[10px]","text-amber-900/60","font-mono"],[1,"w-full","h-16","bg-gradient-to-t","from-amber-800","to-amber-600","rounded-t-lg","flex","items-end","justify-center","pb-2","relative","border-t","border-amber-500"],[1,"text-2xl","font-black","text-amber-900","opacity-50"],[1,"absolute","-top-4","w-8","h-8","rounded-full","bg-amber-600","border-2","border-amber-800","flex","items-center","justify-center","text-xs","font-bold","shadow-lg"],[1,"p-3","rounded-xl","border","flex","items-center","gap-4","transition-all","hover:translate-x-1","cursor-pointer","hover:bg-white/5",3,"click","ngClass"],[1,"font-black","text-lg","w-8","text-center","opacity-50"],[1,"flex-1","min-w-0"],[1,"font-bold","text-sm","truncate"],[1,"text-xs","opacity-60","font-mono"],[1,"flex-1","flex","flex-col","p-8","bg-slate-900","overflow-y-auto","custom-scroll"],[1,"flex","justify-between","items-end","mb-8"],[1,"text-2xl","font-black","text-white"],[1,"px-5","py-3","bg-red-600","hover:bg-red-500","text-white","font-bold","rounded-xl","shadow-lg",3,"click"],[1,"grid","grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-slate-800 p-5 rounded-2xl border border-slate-700 hover:border-blue-500 transition-all",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-5","rounded-2xl","border","border-slate-700","hover:border-blue-500","transition-all"],[1,"font-black","text-white","text-lg","mb-1"],[1,"text-xs","text-slate-400","mb-4"],[1,"flex","items-center","justify-between","mt-auto","pt-4","border-t","border-slate-700"],[1,"text-green-400","font-mono","font-black","text-lg"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-500","text-white","font-bold","rounded-lg","text-xs",3,"click"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-2xl","font-black","text-white","flex","items-center","gap-3"],["type","text","placeholder","Nom de la guilde...",1,"bg-slate-800","border","border-slate-700","px-3","py-2","rounded-lg","text-white","text-sm",3,"ngModelChange","ngModel"],[1,"px-4","py-2","bg-purple-600","hover:bg-purple-500","text-white","font-bold","rounded-lg","text-xs",3,"click"],[1,"grid","grid-cols-2","gap-4"],["class","bg-slate-800 p-4 rounded-xl border border-slate-700 flex items-center gap-4",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","items-center","gap-4"],[1,"font-bold","text-white"],[1,"text-xs","text-slate-400"],[1,"text-xs","text-purple-400","mt-1","font-mono"],[1,"absolute","inset-0","bg-black/80","z-20","flex","items-center","justify-center","p-12","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","p-8","rounded-2xl","w-full","max-w-lg","relative","shadow-2xl",3,"click"],[1,"absolute","top-4","right-4","text-slate-500","hover:text-white",3,"click"],[1,"text-center","mb-8"],[1,"w-24","h-24","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-full","mx-auto","mb-4","flex","items-center","justify-center","text-4xl","shadow-xl"],[1,"text-3xl","font-black","text-white"],[1,"text-blue-400","font-mono","text-xl"],[1,"fixed","inset-0","bg-slate-950/90","z-[999]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-5xl","h-[90%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden",3,"click"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-950"],[1,"text-2xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-purple-400","to-indigo-400"],[1,"font-mono","text-green-400","font-bold","text-xl"],[1,"flex-1","overflow-y-auto","custom-scroll","p-8","space-y-12"],[1,"text-lg","font-bold","text-blue-400","mb-4","uppercase","tracking-widest"],["class","grid grid-cols-2 md:grid-cols-4 gap-4",4,"ngIf"],[1,"p-4","border-t","border-slate-800","bg-slate-950","flex","justify-end"],[1,"px-6","py-2","bg-slate-700","hover:bg-slate-600","text-white","font-bold","rounded-lg",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],["class","bg-slate-800 p-4 rounded-xl border border-slate-700 flex flex-col gap-2",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","flex-col","gap-2"],[1,"text-3xl","mb-2"],[1,"mt-2","w-full","py-2","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-700","text-white","font-bold","rounded-lg","text-xs",3,"click","disabled"],[1,"fixed","inset-0","bg-red-950/90","z-[999]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-red-500","p-8","rounded-xl","w-96","shadow-2xl",3,"click"],[1,"text-2xl","font-black","text-red-500","mb-6","flex","items-center","gap-2"],[1,"space-y-4"],[1,"grid","grid-cols-2","gap-2"],[1,"w-full","py-3","bg-red-900/20","border","border-red-500/50","hover:bg-red-800","hover:text-white","text-red-300","font-bold","rounded","transition-all",3,"click"],[1,"pt-4","border-t","border-slate-800"],[1,"w-full","py-4","bg-black","border-2","border-red-600","text-red-500","hover:bg-red-600","hover:text-white","font-black","rounded-lg","mt-2","transition-all","uppercase","tracking-widest",3,"click"]],template:function(t,r){t&1&&(U(0,aee,1,0,"app-title-screen",0),ce(1,"async"),U(2,cee,5,0,"div",1),ce(3,"async"),ce(4,"async"),U(5,Uee,10,12,"ng-container",0),ce(6,"async"),ce(7,"async")),t&2&&(S("ngIf",!ot(1,3,r.firebaseService.user$)),y(2),S("ngIf",ot(3,5,r.gameStateService.isLoading$)&&ot(4,7,r.firebaseService.user$)),y(3),S("ngIf",ot(6,9,r.firebaseService.user$)&&!ot(7,11,r.gameStateService.isLoading$)))},dependencies:[$o,Ln,Xt,Cl,J_,Sh,iv,sv,ov,av,cv,pv,mE,Zn,gE],encapsulation:2})};var gv=class n{title="JEUB2";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(t,r){t&1&&te(0,"app-game-shell")},dependencies:[mv],encapsulation:2})};var _v=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=gt({type:n});static \u0275inj=ht({imports:[Bu,bU,jV]})};eP(dN);var vv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=gt({type:n,bootstrap:[gv]});static \u0275inj=ht({providers:[{provide:Fs,useValue:"fr-FR"},HN(()=>zN(E2.firebase)),DO(()=>AO()),_2(()=>v2())],imports:[Wu,uN,H_,_v]})};TE().bootstrapModule(vv).catch(n=>console.error(n));
