var UU=Object.defineProperty,BU=Object.defineProperties;var jU=Object.getOwnPropertyDescriptors;var Oh=Object.getOwnPropertySymbols;var oA=Object.prototype.hasOwnProperty,aA=Object.prototype.propertyIsEnumerable;var sA=(n,e,t)=>e in n?UU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})oA.call(e,t)&&sA(n,t,e[t]);if(Oh)for(var t of Oh(e))aA.call(e,t)&&sA(n,t,e[t]);return n},ne=(n,e)=>BU(n,jU(e));var Pl=(n,e)=>{var t={};for(var r in n)oA.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Oh)for(var r of Oh(n))e.indexOf(r)<0&&aA.call(n,r)&&(t[r]=n[r]);return t};var Xt=null,Fh=!1,P_=1,$U=null,un=Symbol("SIGNAL");function Ie(n){let e=Xt;return Xt=n,e}function Vh(){return Xt}var Nl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ml(n){if(Fh)throw new Error("");if(Xt===null)return;Xt.consumerOnSignalRead(n);let e=Xt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Xt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Xt.producers,t!==void 0&&t.producer===n)){Xt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Xt&&(!r||GU(i,Xt)))return;let s=Ia(Xt),o={producer:n,consumer:Xt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Xt.producersTail=o,e!==void 0?e.nextProducer=o:Xt.producers=o,s&&dA(n,o)}function cA(){P_++}function N_(n){if(!(Ia(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===P_)){if(!n.producerMustRecompute(n)&&!Bh(n)){k_(n);return}n.producerRecomputeValue(n),k_(n)}}function M_(n){if(n.consumers===void 0)return;let e=Fh;Fh=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||HU(r)}}finally{Fh=e}}function O_(){return Xt?.consumerAllowSignalWrites!==!1}function HU(n){n.dirty=!0,M_(n),n.consumerMarkedDirty?.(n)}function k_(n){n.dirty=!1,n.lastCleanEpoch=P_}function Ol(n){return n&&lA(n),Ie(n)}function lA(n){n.producersTail=void 0,n.recomputing=!0}function Uh(n,e){Ie(e),n&&uA(n)}function uA(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ia(n))do t=F_(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Bh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(N_(t),r!==t.version))return!0}return!1}function Fl(n){if(Ia(n)){let e=n.producers;for(;e!==void 0;)e=F_(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function dA(n,e){let t=n.consumersTail,r=Ia(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)dA(i.producer,i)}function F_(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ia(e)){let s=e.producers;for(;s!==void 0;)s=F_(s)}return t}function Ia(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function L_(n){$U?.(n)}function GU(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function V_(n,e){return Object.is(n,e)}function jh(n,e){let t=Object.create(zU);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(N_(t),Ml(t),t.value===Lh)throw t.error;return t.value};return r[un]=t,L_(t),r}var x_=Symbol("UNSET"),R_=Symbol("COMPUTING"),Lh=Symbol("ERRORED"),zU=ne(O({},Nl),{value:x_,dirty:!0,error:null,equal:V_,kind:"computed",producerMustRecompute(n){return n.value===x_||n.value===R_},producerRecomputeValue(n){if(n.value===R_)throw new Error("");let e=n.value;n.value=R_;let t=Ol(n),r,i=!1;try{r=n.computation(),Ie(null),i=e!==x_&&e!==Lh&&r!==Lh&&n.equal(e,r)}catch(s){r=Lh,n.error=s}finally{Uh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function qU(){throw new Error}var hA=qU;function fA(n){hA(n)}function U_(n){hA=n}var WU=null;function B_(n,e){let t=Object.create($h);t.value=n,e!==void 0&&(t.equal=e);let r=()=>pA(t);return r[un]=t,L_(t),[r,o=>Ll(t,o),o=>mA(t,o)]}function pA(n){return Ml(n),n.value}function Ll(n,e){O_()||fA(n),n.equal(n.value,e)||(n.value=e,KU(n))}function mA(n,e){O_()||fA(n),Ll(n,e(n.value))}var $h=ne(O({},Nl),{equal:V_,value:void 0,kind:"signal"});function KU(n){n.version++,cA(),M_(n),WU?.(n)}function j_(n){let e=Ie(null);try{return n()}finally{Ie(e)}}function be(n){return typeof n=="function"}function Sa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Hh=Sa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Xs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(be(r))try{r()}catch(s){e=s instanceof Hh?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{gA(s)}catch(o){e=e??[],o instanceof Hh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Hh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)gA(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Xs(t,e)}remove(e){let{_finalizers:t}=this;t&&Xs(t,e),e instanceof n&&e._removeParent(this)}};Ke.EMPTY=(()=>{let n=new Ke;return n.closed=!0,n})();var $_=Ke.EMPTY;function Gh(n){return n instanceof Ke||n&&"closed"in n&&be(n.remove)&&be(n.add)&&be(n.unsubscribe)}function gA(n){be(n)?n():n.unsubscribe()}var pr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ca={setTimeout(n,e,...t){let{delegate:r}=Ca;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ca;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zh(n){Ca.setTimeout(()=>{let{onUnhandledError:e}=pr;if(e)e(n);else throw n})}function Vl(){}var vA=H_("C",void 0,void 0);function _A(n){return H_("E",void 0,n)}function yA(n){return H_("N",n,void 0)}function H_(n,e,t){return{kind:n,value:e,error:t}}var eo=null;function Ta(n){if(pr.useDeprecatedSynchronousErrorHandling){let e=!eo;if(e&&(eo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=eo;if(eo=null,t)throw r}}else n()}function EA(n){pr.useDeprecatedSynchronousErrorHandling&&eo&&(eo.errorThrown=!0,eo.error=n)}var to=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gh(e)&&e.add(this)):this.destination=JU}static create(e,t,r){return new Da(e,t,r)}next(e){this.isStopped?z_(yA(e),this):this._next(e)}error(e){this.isStopped?z_(_A(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?z_(vA,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},YU=Function.prototype.bind;function G_(n,e){return YU.call(n,e)}var q_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){qh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){qh(r)}else qh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){qh(t)}}},Da=class extends to{constructor(e,t,r){super();let i;if(be(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&pr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&G_(e.next,s),error:e.error&&G_(e.error,s),complete:e.complete&&G_(e.complete,s)}):i=e}this.destination=new q_(i)}};function qh(n){pr.useDeprecatedSynchronousErrorHandling?EA(n):zh(n)}function QU(n){throw n}function z_(n,e){let{onStoppedNotification:t}=pr;t&&Ca.setTimeout(()=>t(n,e))}var JU={closed:!0,next:Vl,error:QU,complete:Vl};var Aa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mr(n){return n}function W_(...n){return K_(n)}function K_(n){return n.length===0?mr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ve=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=XU(t)?t:new Da(t,r,i);return Ta(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=bA(r),new r((i,s)=>{let o=new Da({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Aa](){return this}pipe(...t){return K_(t)(this)}toPromise(t){return t=bA(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function bA(n){var e;return(e=n??pr.Promise)!==null&&e!==void 0?e:Promise}function ZU(n){return n&&be(n.next)&&be(n.error)&&be(n.complete)}function XU(n){return n&&n instanceof to||ZU(n)&&Gh(n)}function eB(n){return be(n?.lift)}function Be(n){return e=>{if(eB(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ve(n,e,t,r,i){return new Y_(n,e,t,r,i)}var Y_=class extends to{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var xa={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=xa;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(s=>{t=void 0,n(s)});return new Ke(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=xa;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=xa;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var wA=Sa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ee=(()=>{class n extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new wA}next(t){Ta(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ta(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ta(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?$_:(this.currentObservers=null,s.push(t),new Ke(()=>{this.currentObservers=null,Xs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ve;return t.source=this,t}}return n.create=(e,t)=>new Wh(e,t),n})(),Wh=class extends Ee{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:$_}};var nt=class extends Ee{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Q_={now(){return(Q_.delegate||Date).now()},delegate:void 0};var Kh=class extends Ke{constructor(e,t){super()}schedule(e,t=0){return this}};var Ul={setInterval(n,e,...t){let{delegate:r}=Ul;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ul;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var es=class extends Kh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Ul.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ul.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Xs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ra=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ra.now=Q_.now;var ts=class extends Ra{constructor(e,t=Ra.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ns=new ts(es),J_=ns;var Yh=class extends es{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Qh=class extends ts{};var Z_=new Qh(Yh);var Jh=class extends es{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=xa.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:s}=e;t!=null&&t===e._scheduled&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==t&&(xa.cancelAnimationFrame(t),e._scheduled=void 0)}};var Zh=class extends ts{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var Xh=new Zh(Jh);var en=new ve(n=>n.complete());function ef(n){return n&&be(n.schedule)}function X_(n){return n[n.length-1]}function tf(n){return be(X_(n))?n.pop():void 0}function Or(n){return ef(X_(n))?n.pop():void 0}function IA(n,e){return typeof X_(n)=="number"?n.pop():e}function nf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function CA(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function SA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function no(n){return this instanceof no?(this.v=n,this):new no(n)}function TA(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(I){return Promise.resolve(I).then(_,f)}}function a(_,I){r[_]&&(i[_]=function(x){return new Promise(function(P,B){s.push([_,x,P,B])>1||c(_,x)})},I&&(i[_]=I(i[_])))}function c(_,I){try{u(r[_](I))}catch(x){g(s[0][3],x)}}function u(_){_.value instanceof no?Promise.resolve(_.value.v).then(d,f):g(s[0][2],_)}function d(_){c("next",_)}function f(_){c("throw",_)}function g(_,I){_(I),s.shift(),s.length&&c(s[0][0],s[0][1])}}function DA(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof SA=="function"?SA(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var rf=n=>n&&typeof n.length=="number"&&typeof n!="function";function sf(n){return be(n?.then)}function of(n){return be(n[Aa])}function af(n){return Symbol.asyncIterator&&be(n?.[Symbol.asyncIterator])}function cf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var lf=tB();function uf(n){return be(n?.[lf])}function df(n){return TA(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield no(t.read());if(i)return yield no(void 0);yield yield no(r)}}finally{t.releaseLock()}})}function hf(n){return be(n?.getReader)}function lt(n){if(n instanceof ve)return n;if(n!=null){if(of(n))return nB(n);if(rf(n))return rB(n);if(sf(n))return iB(n);if(af(n))return AA(n);if(uf(n))return sB(n);if(hf(n))return oB(n)}throw cf(n)}function nB(n){return new ve(e=>{let t=n[Aa]();if(be(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rB(n){return new ve(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function iB(n){return new ve(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zh)})}function sB(n){return new ve(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function AA(n){return new ve(e=>{aB(n,e).catch(t=>e.error(t))})}function oB(n){return AA(df(n))}function aB(n,e){var t,r,i,s;return CA(this,void 0,void 0,function*(){try{for(t=DA(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function In(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function rs(n,e=0){return Be((t,r)=>{t.subscribe(Ve(r,i=>In(r,n,()=>r.next(i),e),()=>In(r,n,()=>r.complete(),e),i=>In(r,n,()=>r.error(i),e)))})}function is(n,e=0){return Be((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function xA(n,e){return lt(n).pipe(is(e),rs(e))}function RA(n,e){return lt(n).pipe(is(e),rs(e))}function kA(n,e){return new ve(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function PA(n,e){return new ve(t=>{let r;return In(t,e,()=>{r=n[lf](),In(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>be(r?.return)&&r.return()})}function ff(n,e){if(!n)throw new Error("Iterable cannot be null");return new ve(t=>{In(t,e,()=>{let r=n[Symbol.asyncIterator]();In(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function NA(n,e){return ff(df(n),e)}function MA(n,e){if(n!=null){if(of(n))return xA(n,e);if(rf(n))return kA(n,e);if(sf(n))return RA(n,e);if(af(n))return ff(n,e);if(uf(n))return PA(n,e);if(hf(n))return NA(n,e)}throw cf(n)}function $e(n,e){return e?MA(n,e):lt(n)}function Se(...n){let e=Or(n);return $e(n,e)}function ey(n,e){let t=be(n)?n:()=>n,r=i=>i.error(t());return new ve(e?i=>e.schedule(r,0,i):r)}function Bl(n){return!!n&&(n instanceof ve||be(n.lift)&&be(n.subscribe))}var ro=Sa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function OA(n){return n instanceof Date&&!isNaN(n)}function Oe(n,e){return Be((t,r)=>{let i=0;t.subscribe(Ve(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:cB}=Array;function lB(n,e){return cB(e)?n(...e):n(e)}function pf(n){return Oe(e=>lB(n,e))}var{isArray:uB}=Array,{getPrototypeOf:dB,prototype:hB,keys:fB}=Object;function mf(n){if(n.length===1){let e=n[0];if(uB(e))return{args:e,keys:null};if(pB(e)){let t=fB(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function pB(n){return n&&typeof n=="object"&&dB(n)===hB}function gf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function vf(...n){let e=Or(n),t=tf(n),{args:r,keys:i}=mf(n);if(r.length===0)return $e([],e);let s=new ve(mB(r,e,i?o=>gf(i,o):mr));return t?s.pipe(pf(t)):s}function mB(n,e,t=mr){return r=>{FA(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)FA(e,()=>{let u=$e(n[c],e),d=!1;u.subscribe(Ve(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function FA(n,e,t){n?In(t,n,e):e()}function LA(n,e,t,r,i,s,o,a){let c=[],u=0,d=0,f=!1,g=()=>{f&&!c.length&&!u&&e.complete()},_=x=>u<r?I(x):c.push(x),I=x=>{s&&e.next(x),u++;let P=!1;lt(t(x,d++)).subscribe(Ve(e,B=>{i?.(B),s?_(B):e.next(B)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;c.length&&u<r;){let B=c.shift();o?In(e,o,()=>I(B)):I(B)}g()}catch(B){e.error(B)}}))};return n.subscribe(Ve(e,_,()=>{f=!0,g()})),()=>{a?.()}}function zt(n,e,t=1/0){return be(e)?zt((r,i)=>Oe((s,o)=>e(r,s,i,o))(lt(n(r,i))),t):(typeof e=="number"&&(t=e),Be((r,i)=>LA(r,i,n,t)))}function ss(n=1/0){return zt(mr,n)}function VA(){return ss(1)}function ka(...n){return VA()($e(n,Or(n)))}function jl(n){return new ve(e=>{lt(n()).subscribe(e)})}function $l(...n){let e=tf(n),{args:t,keys:r}=mf(n),i=new ve(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let d=0;d<o;d++){let f=!1;lt(t[d]).subscribe(Ve(s,g=>{f||(f=!0,u--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(u||s.next(r?gf(r,a):a),s.complete())}))}});return e?i.pipe(pf(e)):i}function _f(n=0,e,t=J_){let r=-1;return e!=null&&(ef(e)?t=e:r=e),new ve(i=>{let s=OA(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function os(n=0,e=ns){return n<0&&(n=0),_f(n,n,e)}function yf(...n){let e=Or(n),t=IA(n,1/0),r=n;return r.length?r.length===1?lt(r[0]):ss(t)($e(r,e)):en}function dn(n,e){return Be((t,r)=>{let i=0;t.subscribe(Ve(r,s=>n.call(e,s,i++)&&r.next(s)))})}function UA(n){return Be((e,t)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let u=i;i=null,t.next(u)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(Ve(t,u=>{r=!0,i=u,s||lt(n(u)).subscribe(s=Ve(t,a,c))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}function ty(n,e=ns){return UA(()=>_f(n,e))}function Pa(n){return Be((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ve(t,void 0,void 0,o=>{s=lt(n(o,Pa(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Na(n,e){return be(e)?zt(n,e,1):zt(n,1)}function ny(n){return Be((e,t)=>{let r=!1;e.subscribe(Ve(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ze(n){return n<=0?()=>en:Be((e,t)=>{let r=0;e.subscribe(Ve(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function BA(n=gB){return Be((e,t)=>{let r=!1;e.subscribe(Ve(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gB(){return new ro}function ry(n){return Be((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function pi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?dn((i,s)=>n(i,s,r)):mr,Ze(1),t?ny(e):BA(()=>new ro))}function Ef(n){return n<=0?()=>en:Be((e,t)=>{let r=[];e.subscribe(Ve(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ma(...n){let e=Or(n);return Be((t,r)=>{(e?ka(n,t,e):ka(n,t)).subscribe(r)})}function Sn(n,e){return Be((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ve(r,c=>{i?.unsubscribe();let u=0,d=s++;lt(n(c,d)).subscribe(i=Ve(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Fr(n){return Be((e,t)=>{lt(n).subscribe(Ve(t,()=>t.complete(),Vl)),!t.closed&&e.subscribe(t)})}function qt(n,e,t){let r=be(n)||e||t?{next:n,error:e,complete:t}:n;return r?Be((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ve(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):mr}var iy;function bf(){return iy}function Lr(n){let e=iy;return iy=n,e}var jA=Symbol("NotFound");function Oa(n){return n===jA||n?.name==="\u0275NotFound"}var as=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Ey=new as("21.0.0");var by="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",U=class extends Error{code;constructor(e,t){super(ds(e,t)),this.code=e}};function yB(n){return`NG0${Math.abs(n)}`}function ds(n,e){return`${yB(n)}${e?": "+e:""}`}var pn=globalThis;function He(n){for(let e in n)if(n[e]===He)return e;throw Error("")}function qA(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function gi(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(gi).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Tf(n,e){return n?e?`${n} ${e}`:n:e||""}var EB=He({__forward_ref__:He});function hs(n){return n.__forward_ref__=hs,n.toString=function(){return gi(this())},n}function Wt(n){return wy(n)?n():n}function wy(n){return typeof n=="function"&&n.hasOwnProperty(EB)&&n.__forward_ref__===hs}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ct(n){return{providers:n.providers||[],imports:n.imports||[]}}function Kl(n){return bB(n,Df)}function Iy(n){return Kl(n)!==null}function bB(n,e){return n.hasOwnProperty(e)&&n[e]||null}function wB(n){let e=n?.[Df]??null;return e||null}function oy(n){return n&&n.hasOwnProperty(If)?n[If]:null}var Df=He({\u0275prov:He}),If=He({\u0275inj:He}),Q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Sy(n){return n&&!!n.\u0275providers}var Cy=He({\u0275cmp:He}),Ty=He({\u0275dir:He}),Dy=He({\u0275pipe:He}),Ay=He({\u0275mod:He}),Gl=He({\u0275fac:He}),co=He({__NG_ELEMENT_ID__:He}),$A=He({__NG_ENV_ID__:He});function Yl(n){return typeof n=="string"?n:n==null?"":String(n)}function WA(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Yl(n)}var KA=He({ngErrorCode:He}),IB=He({ngErrorMessage:He}),SB=He({ngTokenPath:He});function xy(n,e){return YA("",-200,e)}function Af(n,e){throw new U(-201,!1)}function YA(n,e,t){let r=new U(e,n);return r[KA]=e,r[IB]=n,t&&(r[SB]=t),r}function CB(n){return n[KA]}var ay;function QA(){return ay}function hn(n){let e=ay;return ay=n,e}function Ry(n,e,t){let r=Kl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Af(n,"Injector")}var TB={},io=TB,cy="__NG_DI_FLAG__",ly=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=so(t)||0;try{return this.injector.get(e,r&8?null:io,r)}catch(i){if(Oa(i))return i;throw i}}};function DB(n,e=0){let t=bf();if(t===void 0)throw new U(-203,!1);if(t===null)return Ry(n,void 0,e);{let r=AB(e),i=t.retrieve(n,r);if(Oa(i)){if(r.optional)return null;throw i}return i}}function re(n,e=0){return(QA()||DB)(Wt(n),e)}function F(n,e){return re(n,so(e))}function so(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function AB(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function uy(n){let e=[];for(let t=0;t<n.length;t++){let r=Wt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=xB(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(re(i,s))}else e.push(re(r))}return e}function JA(n,e){return n[cy]=e,n.prototype[cy]=e,n}function xB(n){return n[cy]}function cs(n,e){let t=n.hasOwnProperty(Gl);return t?n[Gl]:null}function ZA(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function XA(n){return n.flat(Number.POSITIVE_INFINITY)}function xf(n,e){n.forEach(t=>Array.isArray(t)?xf(t,e):e(t))}function ky(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ql(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ex(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function tx(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function Rf(n,e,t){let r=La(n,e);return r>=0?n[r|1]=t:(r=~r,tx(n,r,e,t)),r}function kf(n,e){let t=La(n,e);if(t>=0)return n[t|1]}function La(n,e){return RB(n,e,1)}function RB(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var fs={},fn=[],Va=new Q(""),Py=new Q("",-1),Ny=new Q(""),zl=class{get(e,t=io){if(t===io){let i=YA("",-201);throw i.name="\u0275NotFound",i}return t}};function My(n){return n[Ay]||null}function Ur(n){return n[Cy]||null}function Oy(n){return n[Ty]||null}function nx(n){return n[Dy]||null}function gr(n){return{\u0275providers:n}}function rx(...n){return{\u0275providers:Fy(!0,n),\u0275fromNgModule:!0}}function Fy(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return xf(e,o=>{let a=o;Sf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ix(i,s),t}function ix(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ly(i,s=>{e(s,r)})}}function Sf(n,e,t,r){if(n=Wt(n),!n)return!1;let i=null,s=oy(n),o=!s&&Ur(n);if(!s&&!o){let c=n.ngModule;if(s=oy(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Sf(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{xf(s.imports,d=>{Sf(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&ix(u,e)}if(!a){let u=cs(i)||(()=>new i);e({provide:i,useFactory:u,deps:fn},i),e({provide:Ny,useValue:i,multi:!0},i),e({provide:Va,useValue:()=>re(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=n;Ly(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Ly(n,e){for(let t of n)Sy(t)&&(t=t.\u0275providers),Array.isArray(t)?Ly(t,e):e(t)}var kB=He({provide:String,useValue:He});function sx(n){return n!==null&&typeof n=="object"&&kB in n}function PB(n){return!!(n&&n.useExisting)}function NB(n){return!!(n&&n.useFactory)}function oo(n){return typeof n=="function"}function ox(n){return!!n.useClass}var Jl=new Q(""),wf={},HA={},sy;function Ua(){return sy===void 0&&(sy=new zl),sy}var _t=class{},ao=class extends _t{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,hy(e,o=>this.processProvider(o)),this.records.set(Py,Fa(void 0,this)),i.has("environment")&&this.records.set(_t,Fa(void 0,this));let s=this.records.get(Jl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ny,fn,{self:!0}))}retrieve(e,t){let r=so(t)||0;try{return this.get(e,io,r)}catch(i){if(Oa(i))return i;throw i}}destroy(){Hl(this),this._destroyed=!0;let e=Ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ie(e)}}onDestroy(e){return Hl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Hl(this);let t=Lr(this),r=hn(void 0),i;try{return e()}finally{Lr(t),hn(r)}}get(e,t=io,r){if(Hl(this),e.hasOwnProperty($A))return e[$A](this);let i=so(r),s,o=Lr(this),a=hn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=VB(e)&&Kl(e);d&&this.injectableDefInScope(d)?u=Fa(dy(e),wf):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Ua():this.parent;return t=i&8&&t===io?null:t,c.get(e,t)}catch(c){let u=CB(c);throw u===-200||u===-201?new U(u,null):c}finally{hn(a),Lr(o)}}resolveInjectorInitializers(){let e=Ie(null),t=Lr(this),r=hn(void 0),i;try{let s=this.get(Va,fn,{self:!0});for(let o of s)o()}finally{Lr(t),hn(r),Ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(gi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Wt(e);let t=oo(e)?e:Wt(e&&e.provide),r=OB(e);if(!oo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Fa(void 0,wf,!0),i.factory=()=>uy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ie(null);try{if(t.value===HA)throw xy(gi(e));return t.value===wf&&(t.value=HA,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&LB(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ie(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Wt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function dy(n){let e=Kl(n),t=e!==null?e.factory:cs(n);if(t!==null)return t;if(n instanceof Q)throw new U(204,!1);if(n instanceof Function)return MB(n);throw new U(204,!1)}function MB(n){if(n.length>0)throw new U(204,!1);let t=wB(n);return t!==null?()=>t.factory(n):()=>new n}function OB(n){if(sx(n))return Fa(void 0,n.useValue);{let e=Vy(n);return Fa(e,wf)}}function Vy(n,e,t){let r;if(oo(n)){let i=Wt(n);return cs(i)||dy(i)}else if(sx(n))r=()=>Wt(n.useValue);else if(NB(n))r=()=>n.useFactory(...uy(n.deps||[]));else if(PB(n))r=(i,s)=>re(Wt(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Wt(n&&(n.useClass||n.provide));if(FB(n))r=()=>new i(...uy(n.deps));else return cs(i)||dy(i)}return r}function Hl(n){if(n.destroyed)throw new U(205,!1)}function Fa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function FB(n){return!!n.deps}function LB(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function VB(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function hy(n,e){for(let t of n)Array.isArray(t)?hy(t,e):t&&Sy(t)?hy(t.\u0275providers,e):e(t)}function Tt(n,e){let t;n instanceof ao?(Hl(n),t=n):t=new ly(n);let r,i=Lr(t),s=hn(void 0);try{return e()}finally{Lr(i),hn(s)}}function Uy(){return QA()!==void 0||bf()!=null}var vr=0,fe=1,ye=2,Lt=3,Yn=4,mn=5,Ba=6,ja=7,tn=8,ps=9,vi=10,ut=11,$a=12,By=13,lo=14,Cn=15,ms=16,uo=17,Br=18,Zl=19,jy=20,mi=21,Pf=22,Xl=23,Ln=24,ho=25,eu=26,Dt=27,ax=1;var gs=7,tu=8,fo=9,gn=10;function jr(n){return Array.isArray(n)&&typeof n[ax]=="object"}function _r(n){return Array.isArray(n)&&n[ax]===!0}function $y(n){return(n.flags&4)!==0}function vs(n){return n.componentOffset>-1}function Ha(n){return(n.flags&1)===1}function $r(n){return!!n.template}function Ga(n){return(n[ye]&512)!==0}function po(n){return(n[ye]&256)===256}var cx="svg",lx="math";function Qn(n){for(;Array.isArray(n);)n=n[vr];return n}function Hy(n,e){return Qn(e[n])}function Hr(n,e){return Qn(e[n.index])}function Nf(n,e){return n.data[e]}function Gy(n,e){return n[e]}function zy(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Jn(n,e){let t=e[n];return jr(t)?t:t[vr]}function ux(n){return(n[ye]&4)===4}function Mf(n){return(n[ye]&128)===128}function dx(n){return _r(n[Lt])}function za(n,e){return e==null?null:n[e]}function qy(n){n[uo]=0}function Wy(n){n[ye]&1024||(n[ye]|=1024,Mf(n)&&qa(n))}function hx(n,e){for(;n>0;)e=e[lo],n--;return e}function nu(n){return!!(n[ye]&9216||n[Ln]?.dirty)}function Of(n){n[vi].changeDetectionScheduler?.notify(8),n[ye]&64&&(n[ye]|=1024),nu(n)&&qa(n)}function qa(n){n[vi].changeDetectionScheduler?.notify(0);let e=ls(n);for(;e!==null&&!(e[ye]&8192||(e[ye]|=8192,!Mf(e)));)e=ls(e)}function Ky(n,e){if(po(n))throw new U(911,!1);n[mi]===null&&(n[mi]=[]),n[mi].push(e)}function fx(n,e){if(n[mi]===null)return;let t=n[mi].indexOf(e);t!==-1&&n[mi].splice(t,1)}function ls(n){let e=n[Lt];return _r(e)?e[Lt]:e}function Yy(n){return n[ja]??=[]}function Qy(n){return n.cleanup??=[]}function px(n,e,t,r){let i=Yy(e);i.push(t),n.firstCreatePass&&Qy(n).push(r,i.length-1)}var Te={lFrame:Ax(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fy=!1;function mx(){return Te.lFrame.elementDepthCount}function gx(){Te.lFrame.elementDepthCount++}function vx(){Te.lFrame.elementDepthCount--}function Ff(){return Te.bindingsEnabled}function Jy(){return Te.skipHydrationRootTNode!==null}function _x(n){return Te.skipHydrationRootTNode===n}function yx(){Te.skipHydrationRootTNode=null}function De(){return Te.lFrame.lView}function Vt(){return Te.lFrame.tView}function G(n){return Te.lFrame.contextLView=n,n[tn]}function z(n){return Te.lFrame.contextLView=null,n}function vn(){let n=Zy();for(;n!==null&&n.type===64;)n=n.parent;return n}function Zy(){return Te.lFrame.currentTNode}function Ex(){let n=Te.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Wa(n,e){let t=Te.lFrame;t.currentTNode=n,t.isParent=e}function Xy(){return Te.lFrame.isParent}function e0(){Te.lFrame.isParent=!1}function t0(){return fy}function n0(n){let e=fy;return fy=n,e}function Ka(){let n=Te.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function bx(){return Te.lFrame.bindingIndex}function wx(n){return Te.lFrame.bindingIndex=n}function Lf(){return Te.lFrame.bindingIndex++}function Vf(n){let e=Te.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ix(){return Te.lFrame.inI18n}function Sx(n,e){let t=Te.lFrame;t.bindingIndex=t.bindingRootIndex=n,Uf(e)}function Cx(){return Te.lFrame.currentDirectiveIndex}function Uf(n){Te.lFrame.currentDirectiveIndex=n}function Tx(n){let e=Te.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function r0(){return Te.lFrame.currentQueryIndex}function Bf(n){Te.lFrame.currentQueryIndex=n}function UB(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[mn]:null}function i0(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=UB(s),i===null||(s=s[lo],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Te.lFrame=Dx();return r.currentTNode=e,r.lView=n,!0}function jf(n){let e=Dx(),t=n[fe];Te.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Dx(){let n=Te.lFrame,e=n===null?null:n.child;return e===null?Ax(n):e}function Ax(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function xx(){let n=Te.lFrame;return Te.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var s0=xx;function $f(){let n=xx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Rx(n){return(Te.lFrame.contextLView=hx(n,Te.lFrame.contextLView))[tn]}function _i(){return Te.lFrame.selectedIndex}function _s(n){Te.lFrame.selectedIndex=n}function o0(){let n=Te.lFrame;return Nf(n.tView,n.selectedIndex)}function kx(){return Te.lFrame.currentNamespace}var Px=!0;function Hf(){return Px}function ru(n){Px=n}function py(n,e=null,t=null,r){let i=a0(n,e,t,r);return i.resolveInjectorInitializers(),i}function a0(n,e=null,t=null,r,i=new Set){let s=[t||fn,rx(n)];return r=r||(typeof n=="object"?void 0:gi(n)),new ao(s,e||Ua(),r||null,i)}var qe=class n{static THROW_IF_NOT_FOUND=io;static NULL=new zl;static create(e,t){if(Array.isArray(e))return py({name:""},t,e,"");{let r=e.name??"";return py({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>re(Py)});static __NG_ELEMENT_ID__=-1},Xe=new Q(""),Zn=(()=>{class n{static __NG_ELEMENT_ID__=BB;static __NG_ENV_ID__=t=>t}return n})(),my=class extends Zn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return po(this._lView)}onDestroy(e){let t=this._lView;return Ky(t,e),()=>fx(t,e)}};function BB(){return new my(De())}var Nx=!1,yi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new nt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ve(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),gy=class extends Ee{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Uy()&&(this.destroyRef=F(Zn,{optional:!0})??void 0,this.pendingTasks=F(yi,{optional:!0})??void 0)}emit(e){let t=Ie(null);try{super.next(e)}finally{Ie(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ye=gy;function Cf(...n){}function c0(n){let e,t;function r(){n=Cf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function l0(n){return queueMicrotask(()=>n()),()=>{n=Cf}}var u0="isAngularZone",ql=u0+"_ID",jB=0,Me=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ye(!1);onMicrotaskEmpty=new Ye(!1);onStable=new Ye(!1);onError=new Ye(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Nx}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,GB(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(u0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,$B,Cf,Cf);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},$B={};function d0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function HB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){c0(()=>{n.callbackScheduled=!1,vy(n),n.isCheckStableRunning=!0,d0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),vy(n)}function GB(n){let e=()=>{HB(n)},t=jB++;n._inner=n._inner.fork({name:"angular",properties:{[u0]:!0,[ql]:t,[ql+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(zB(c))return r.invokeTask(s,o,a,c);try{return GA(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),zA(n)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return GA(n),r.invoke(s,o,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!qB(c)&&e(),zA(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,vy(n),d0(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function vy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function GA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function zA(n){n._nesting--,d0(n)}var Wl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ye;onMicrotaskEmpty=new Ye;onStable=new Ye;onError=new Ye;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function zB(n){return Mx(n,"__ignore_ng_zone__")}function qB(n){return Mx(n,"__scheduler_tick__")}function Mx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Vr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Xn=new Q("",{factory:()=>{let n=F(Me),e=F(_t),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Vr),t.handleError(r))})}}}),Ox={provide:Va,useValue:()=>{let n=F(Vr,{optional:!0})},multi:!0};function Kt(n,e){let[t,r,i]=B_(n,e?.equal),s=t,o=s[un];return s.set=r,s.update=i,s.asReadonly=Fx.bind(s),s}function Fx(){let n=this[un];if(n.readonlyFn===void 0){let e=()=>this();e[un]=n,n.readonlyFn=e}return n.readonlyFn}var Gf=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=WB}return n})();function WB(){return new Gf(De(),vn())}var us=class{},iu=new Q("",{factory:()=>!0});var h0=new Q(""),Ya=(()=>{class n{internalPendingTasks=F(yi);scheduler=F(us);errorHandler=F(Xn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),f0=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new _y})}return n})(),_y=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},yy=class{[un];constructor(e){this[un]=e}destroy(){this[un].destroy()}};function St(n){return j_(n)}function tc(n){return{toString:n}.toString()}var zf="__parameters__";function tj(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function nj(n,e,t){return tc(()=>{let r=tj(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,d){let f=c.hasOwnProperty(zf)?c[zf]:Object.defineProperty(c,zf,{value:[]})[zf];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Vn=JA(nj("Optional"),8);function c1(n){let e=pn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function rj(n){return typeof n=="function"}function l1(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Zf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},qr=(()=>{let n=()=>u1;return n.ngInherit=!0,n})();function u1(n){return n.type.prototype.ngOnChanges&&(n.setInput=sj),ij}function ij(){let n=h1(this),e=n?.current;if(e){let t=n.previous;if(t===fs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function sj(n,e,t,r,i){let s=this.declaredInputs[r],o=h1(n)||oj(n,{previous:fs,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Zf(u&&u.currentValue,t,c===fs),l1(n,e,i,t)}var d1="__ngSimpleChanges__";function h1(n){return n[d1]||null}function oj(n,e){return n[d1]=e}var Lx=[];var et=function(n,e=null,t){for(let r=0;r<Lx.length;r++){let i=Lx[r];i(n,e,t)}};function aj(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=u1(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function f1(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Kf(n,e,t){p1(n,e,3,t)}function Yf(n,e,t,r){(n[ye]&3)===t&&p1(n,e,t,r)}function p0(n,e){let t=n[ye];(t&3)===e&&(t&=16383,t+=1,n[ye]=t)}function p1(n,e,t,r){let i=r!==void 0?n[uo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[uo]+=65536),(a<s||s==-1)&&(cj(n,t,e,c),n[uo]=(n[uo]&4294901760)+c+2),c++}function Vx(n,e){et(4,n,e);let t=Ie(null);try{e.call(n)}finally{Ie(t),et(5,n,e)}}function cj(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ye]>>14<n[uo]>>16&&(n[ye]&3)===e&&(n[ye]+=16384,Vx(a,s)):Vx(a,s)}var Ja=-1,go=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function lj(n){return(n.flags&8)!==0}function uj(n){return(n.flags&16)!==0}function dj(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];fj(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function hj(n){return n===3||n===4||n===6}function fj(n){return n.charCodeAt(0)===64}function lu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Ux(n,t,i,null,e[++r]):Ux(n,t,i,null,null))}}return n}function Ux(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function m1(n){return n!==Ja}function Xf(n){return n&32767}function pj(n){return n>>16}function ep(n,e){let t=pj(n),r=e;for(;t>0;)r=r[lo],t--;return r}var S0=!0;function tp(n){let e=S0;return S0=n,e}var mj=256,g1=mj-1,v1=5,gj=0,Gr={};function vj(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(co)&&(r=t[co]),r==null&&(r=t[co]=gj++);let i=r&g1,s=1<<i;e.data[n+(i>>v1)]|=s}function np(n,e){let t=_1(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,m0(r.data,n),m0(e,null),m0(r.blueprint,null));let i=Z0(n,e),s=n.injectorIndex;if(m1(i)){let o=Xf(i),a=ep(i,e),c=a[fe].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function m0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function _1(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Z0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=I1(i),r===null)return Ja;if(t++,i=i[lo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ja}function C0(n,e,t){vj(n,e,t)}function y1(n,e,t){if(t&8||n!==void 0)return n;Af(e,"NodeInjector")}function E1(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ps],s=hn(void 0);try{return i?i.get(e,r,t&8):Ry(e,r,t&8)}finally{hn(s)}}return y1(r,e,t)}function b1(n,e,t,r=0,i){if(n!==null){if(e[ye]&2048&&!(r&2)){let o=bj(n,e,t,r,Gr);if(o!==Gr)return o}let s=w1(n,e,t,r,Gr);if(s!==Gr)return s}return E1(e,t,r,i)}function w1(n,e,t,r,i){let s=yj(t);if(typeof s=="function"){if(!i0(e,n,r))return r&1?y1(i,t,r):E1(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Af(t);else return o}finally{s0()}}else if(typeof s=="number"){let o=null,a=_1(n,e),c=Ja,u=r&1?e[Cn][mn]:null;for((a===-1||r&4)&&(c=a===-1?Z0(n,e):e[a+8],c===Ja||!jx(r,!1)?a=-1:(o=e[fe],a=Xf(c),e=ep(c,e)));a!==-1;){let d=e[fe];if(Bx(s,a,d.data)){let f=_j(a,e,t,o,r,u);if(f!==Gr)return f}c=e[a+8],c!==Ja&&jx(r,e[fe].data[a+8]===u)&&Bx(s,a,e)?(o=d,a=Xf(c),e=ep(c,e)):a=-1}}return i}function _j(n,e,t,r,i,s){let o=e[fe],a=o.data[n+8],c=r==null?vs(a)&&S0:r!=o&&(a.type&3)!==0,u=i&1&&s===a,d=Qf(a,o,t,c,u);return d!==null?uu(e,o,d,a,i):Gr}function Qf(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,u=n.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:u;for(let _=f;_<g;_++){let I=o[_];if(_<c&&t===I||_>=c&&I.type===t)return _}if(i){let _=o[c];if(_&&$r(_)&&_.type===t)return c}return null}function uu(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof go){let a=s;if(a.resolving){let _=WA(o[t]);throw xy(_)}let c=tp(a.canSeeViewProviders);a.resolving=!0;let u=o[t].type||o[t],d,f=a.injectImpl?hn(a.injectImpl):null,g=i0(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&aj(t,o[t],e)}finally{f!==null&&hn(f),tp(c),a.resolving=!1,s0()}}return s}function yj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(co)?n[co]:void 0;return typeof e=="number"?e>=0?e&g1:Ej:e}function Bx(n,e,t){let r=1<<n;return!!(t[e+(n>>v1)]&r)}function jx(n,e){return!(n&2)&&!(n&1&&e)}var mo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return b1(this._tNode,this._lView,e,so(r),t)}};function Ej(){return new mo(vn(),De())}function yo(n){return tc(()=>{let e=n.prototype.constructor,t=e[Gl]||T0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Gl]||T0(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function T0(n){return wy(n)?()=>{let e=T0(Wt(n));return e&&e()}:cs(n)}function bj(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ye]&2048&&!Ga(o);){let a=w1(s,o,t,r|2,Gr);if(a!==Gr)return a;let c=s.parent;if(!c){let u=o[jy];if(u){let d=u.get(t,Gr,r);if(d!==Gr)return d}c=I1(o),o=o[lo]}s=c}return i}function I1(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[mn]:null}function wj(){return nc(vn(),De())}function nc(n,e){return new Yt(Hr(n,e))}var Yt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=wj}return n})();function Ij(n){return n instanceof Yt?n.nativeElement:n}function Sj(){return this._results[Symbol.iterator]()}var rp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ee}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=XA(e);(this._changesDetected=!ZA(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Sj};function S1(n){return(n.flags&128)===128}var X0=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(X0||{}),C1=new Map,Cj=0;function Tj(){return Cj++}function Dj(n){C1.set(n[Zl],n)}function D0(n){C1.delete(n[Zl])}var $x="__ngContext__";function Za(n,e){jr(e)?(n[$x]=e[Zl],Dj(e)):n[$x]=e}function T1(n){return A1(n[$a])}function D1(n){return A1(n[Yn])}function A1(n){for(;n!==null&&!_r(n);)n=n[Yn];return n}var A0;function eE(n){A0=n}function x1(){if(A0!==void 0)return A0;if(typeof document<"u")return document;throw new U(210,!1)}var dp=new Q("",{factory:()=>Aj}),Aj="ng";var hp=new Q(""),bi=new Q("",{providedIn:"platform",factory:()=>"unknown"}),fp=new Q(""),pp=new Q("",{factory:()=>x1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var R1=!1,k1=new Q("",{factory:()=>R1});var tE=new Q("");var xj=(n,e,t,r)=>{};function Rj(n,e,t,r){xj(n,e,t,r)}function mp(n){return(n.flags&32)===32}var kj=()=>null;function P1(n,e,t=!1){return kj(n,e,t)}function N1(n,e){let t=n.contentQueries;if(t!==null){let r=Ie(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Bf(s),a.contentQueries(2,e[o],o)}}}finally{Ie(r)}}}function x0(n,e,t){Bf(0);let r=Ie(null);try{e(n,t)}finally{Ie(r)}}function nE(n,e,t){if($y(e)){let r=Ie(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Ie(r)}}}var br=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(br||{});var R0=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${by})`}};function gp(n){return n instanceof R0?n.changingThisBreaksApplicationSecurity:n}var Pj=/^>|^->|<!--|-->|--!>|<!-$/g,Nj=/(<|>)/g,Mj="\u200B$1\u200B";function Oj(n){return n.replace(Pj,e=>e.replace(Nj,Mj))}function mu(n){return n.ownerDocument.defaultView}function M1(n){return n instanceof Function?n():n}function Fj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var O1="ng-template";function Lj(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Fj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(rE(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function rE(n){return n.type===4&&n.value!==O1}function Vj(n,e,t){let r=n.type===4&&!t?O1:n.value;return e===r}function Uj(n,e,t){let r=4,i=n.attrs,s=i!==null?$j(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!yr(r)&&!yr(c))return!1;if(o&&yr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Vj(n,c,t)||c===""&&e.length===1){if(yr(r))return!1;o=!0}}else if(r&8){if(i===null||!Lj(n,i,c,t)){if(yr(r))return!1;o=!0}}else{let u=e[++a],d=Bj(c,i,rE(n),t);if(d===-1){if(yr(r))return!1;o=!0;continue}if(u!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(yr(r))return!1;o=!0}}}}return yr(r)||o}function yr(n){return(n&1)===0}function Bj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Hj(e,n)}function F1(n,e,t=!1){for(let r=0;r<e.length;r++)if(Uj(n,e[r],t))return!0;return!1}function jj(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function $j(n){for(let e=0;e<n.length;e++){let t=n[e];if(hj(t))return e}return n.length}function Hj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Gj(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Hx(n,e){return n?":not("+e.trim()+")":e}function zj(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!yr(o)&&(e+=Hx(s,i),i=""),r=o,s=s||!yr(r);t++}return i!==""&&(e+=Hx(s,i)),e}function qj(n){return n.map(zj).join(",")}function Wj(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!yr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Dn={};function Kj(n,e){return n.createText(e)}function Yj(n,e,t){n.setValue(e,t)}function Qj(n,e){return n.createComment(Oj(e))}function L1(n,e,t){return n.createElement(e,t)}function ip(n,e,t,r,i){n.insertBefore(e,t,r,i)}function V1(n,e,t){n.appendChild(e,t)}function Gx(n,e,t,r,i){r!==null?ip(n,e,t,r,i):V1(n,e,t)}function Jj(n,e,t,r){n.removeChild(null,e,t,r)}function Zj(n,e,t){n.setAttribute(e,"style",t)}function Xj(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function U1(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&dj(n,e,r),i!==null&&Xj(n,e,i),s!==null&&Zj(n,e,s)}function iE(n,e,t,r,i,s,o,a,c,u,d){let f=Dt+r,g=f+i,_=e3(f,g),I=typeof u=="function"?u():u;return _[fe]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function e3(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Dn);return t}function t3(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=iE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sE(n,e,t,r,i,s,o,a,c,u,d){let f=e.blueprint.slice();return f[vr]=i,f[ye]=r|4|128|8|64|1024,(u!==null||n&&n[ye]&2048)&&(f[ye]|=2048),qy(f),f[Lt]=f[lo]=n,f[tn]=t,f[vi]=o||n&&n[vi],f[ut]=a||n&&n[ut],f[ps]=c||n&&n[ps]||null,f[mn]=s,f[Zl]=Tj(),f[Ba]=d,f[jy]=u,f[Cn]=e.type==2?n[Cn]:f,f}function n3(n,e,t){let r=Hr(e,n),i=t3(t),s=n[vi].rendererFactory,o=oE(n,sE(n,i,null,B1(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function B1(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function j1(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function oE(n,e){return n[$a]?n[By][Yn]=e:n[$a]=e,n[By]=e,e}function b(n=1){$1(Vt(),De(),_i()+n,!1)}function $1(n,e,t,r){if(!r)if((e[ye]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Kf(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Yf(e,s,0,t)}_s(t)}var vp=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(vp||{});function k0(n,e,t,r){let i=Ie(null);try{let[s,o,a]=n.inputs[t],c=null;(o&vp.SignalBased)!==0&&(c=e[s][un]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):l1(e,c,s,r)}finally{Ie(i)}}var zr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(zr||{}),r3;function aE(n,e){return r3(n,e)}var Xa=new Set,_p=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(_p||{}),Eo=new Q(""),zx=new Set;function bo(n){zx.has(n)||(zx.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var cE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),H1=[0,1,2,3],G1=(()=>{class n{ngZone=F(Me);scheduler=F(us);errorHandler=F(Vr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F(Eo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&et(16),this.executing=!0;for(let r of H1)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&et(17)}register(t){let{view:r}=t;r!==void 0?((r[ho]??=[]).push(t),qa(r),r[ye]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(_p.AFTER_NEXT_RENDER,t):t()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),sp=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ho];e&&(this.view[ho]=e.filter(t=>t!==this))}};function wo(n,e){let t=e?.injector??F(qe);return bo("NgAfterNextRender"),s3(n,t,e,!0)}function i3(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function s3(n,e,t,r){let i=e.get(cE);i.impl??=e.get(G1);let s=e.get(Eo,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Zn):null,a=e.get(Gf,null,{optional:!0}),c=new sp(i.impl,i3(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var o3=new Q("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function z1(n,e,t){let r=n.get(o3);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function a3(n,e){for(let[t,r]of e)z1(n,r.animateFns)}function qx(n,e,t,r){let i=n?.[eu]?.enter;e!==null&&i&&i.has(t.index)&&a3(r,i)}function Qa(n,e,t,r,i,s,o,a){if(i!=null){let c,u=!1;_r(i)?c=i:jr(i)&&(u=!0,i=i[vr]);let d=Qn(i);n===0&&r!==null?(qx(a,r,s,t),o==null?V1(e,r,d):ip(e,r,d,o||null,!0)):n===1&&r!==null?(qx(a,r,s,t),ip(e,r,d,o||null,!0)):n===2?Wx(a,s,t,f=>{Jj(e,d,u,f)}):n===3&&Wx(a,s,t,()=>{e.destroyNode(d)}),c!=null&&_3(e,n,t,c,s,r,o)}}function c3(n,e){q1(n,e),e[vr]=null,e[mn]=null}function l3(n,e,t,r,i,s){r[vr]=i,r[mn]=e,yp(n,r,t,1,i,s)}function q1(n,e){e[vi].changeDetectionScheduler?.notify(9),yp(n,e,e[ut],2,null,null)}function u3(n){let e=n[$a];if(!e)return g0(n[fe],n);for(;e;){let t=null;if(jr(e))t=e[$a];else{let r=e[gn];r&&(t=r)}if(!t){for(;e&&!e[Yn]&&e!==n;)jr(e)&&g0(e[fe],e),e=e[Lt];e===null&&(e=n),jr(e)&&g0(e[fe],e),t=e&&e[Yn]}e=t}}function lE(n,e){let t=n[fo],r=t.indexOf(e);t.splice(r,1)}function W1(n,e){if(po(e))return;let t=e[ut];t.destroyNode&&yp(n,e,t,3,null,null),u3(e)}function g0(n,e){if(po(e))return;let t=Ie(null);try{e[ye]&=-129,e[ye]|=256,e[Ln]&&Fl(e[Ln]),f3(n,e),h3(n,e),e[fe].type===1&&e[ut].destroy();let r=e[ms];if(r!==null&&_r(e[Lt])){r!==e[Lt]&&lE(r,e);let i=e[Br];i!==null&&i.detachView(n)}D0(e)}finally{Ie(t)}}function Wx(n,e,t,r){let i=n?.[eu];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Xa.add(n),z1(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let u=o.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),d3(n,r)}else n&&Xa.delete(n),r(!1)},i)}function d3(n,e){let t=n[eu]?.running;if(t){t.then(()=>{n[eu].running=void 0,Xa.delete(n),e(!0)});return}e(!1)}function h3(n,e){let t=n.cleanup,r=e[ja];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[ja]=null);let i=e[mi];if(i!==null){e[mi]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Xl];if(s!==null){e[Xl]=null;for(let o of s)o.destroy()}}function f3(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof go)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];et(4,a,c);try{c.call(a)}finally{et(5,a,c)}}else{et(4,i,s);try{s.call(i)}finally{et(5,i,s)}}}}}function K1(n,e,t){return p3(n,e.parent,t)}function p3(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[vr];if(vs(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===br.None||i===br.Emulated)return null}return Hr(r,t)}function Y1(n,e,t){return g3(n,e,t)}function m3(n,e,t){return n.type&40?Hr(n,t):null}var g3=m3,Kx;function uE(n,e,t,r){let i=K1(n,r,e),s=e[ut],o=r.parent||e[mn],a=Y1(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Gx(s,i,t[c],a,!1);else Gx(s,i,t,a,!1);Kx!==void 0&&Kx(s,r,e,t,i)}function ou(n,e){if(e!==null){let t=e.type;if(t&3)return Hr(e,n);if(t&4)return P0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ou(n,r);{let i=n[e.index];return _r(i)?P0(-1,i):Qn(i)}}else{if(t&128)return ou(n,e.next);if(t&32)return aE(e,n)()||Qn(n[e.index]);{let r=Q1(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ls(n[Cn]);return ou(i,r)}else return ou(n,e.next)}}}return null}function Q1(n,e){if(e!==null){let r=n[Cn][mn],i=e.projection;return r.projection[i]}return null}function P0(n,e){let t=gn+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return ou(r,i)}return e[gs]}function dE(n,e,t,r,i,s,o){for(;t!=null;){let a=r[ps];if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(o&&e===0&&(c&&Za(Qn(c),r),t.flags|=2),!mp(t))if(u&8)dE(n,e,t.child,r,i,s,!1),Qa(e,n,a,i,c,t,s,r);else if(u&32){let d=aE(t,r),f;for(;f=d();)Qa(e,n,a,i,f,t,s,r);Qa(e,n,a,i,c,t,s,r)}else u&16?J1(n,e,r,t,i,s):Qa(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function yp(n,e,t,r,i,s){dE(t,r,n.firstChild,e,i,s,!1)}function v3(n,e,t){let r=e[ut],i=K1(n,t,e),s=t.parent||e[mn],o=Y1(s,t,e);J1(r,0,e,t,i,o)}function J1(n,e,t,r,i,s){let o=t[Cn],c=o[mn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Qa(e,n,t[ps],i,d,r,s,t)}else{let u=c,d=o[Lt];S1(r)&&(u.flags|=128),dE(n,e,u,d,i,s,!0)}}function _3(n,e,t,r,i,s,o){let a=r[gs],c=Qn(r);a!==c&&Qa(e,n,t,s,a,i,o);for(let u=gn;u<r.length;u++){let d=r[u];yp(d[fe],d,n,e,s,a)}}function y3(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:zr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=zr.Important),n.setStyle(t,r,i,s))}}function Z1(n,e,t,r,i){let s=_i(),o=r&2;try{_s(-1),o&&e.length>Dt&&$1(n,e,Dt,!1),et(o?2:0,i,t),t(r,i)}finally{_s(s),et(o?3:1,i,t)}}function Ep(n,e,t){T3(n,e,t),(t.flags&64)===64&&D3(n,e,t)}function bp(n,e,t=Hr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function E3(n,e,t,r){let s=r.get(k1,R1)||t===br.ShadowDom||t===br.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return b3(o),o}function b3(n){w3(n)}var w3=()=>null;function I3(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function X1(n,e,t,r,i,s){let o=e[fe];if(fE(n,o,e,t,r)){vs(n)&&C3(e,n.index);return}n.type&3&&(t=I3(t)),S3(n,e,t,r,i,s)}function S3(n,e,t,r,i,s){if(n.type&3){let o=Hr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function C3(n,e){let t=Jn(e,n);t[ye]&16||(t[ye]|=64)}function T3(n,e,t){let r=t.directiveStart,i=t.directiveEnd;vs(t)&&n3(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||np(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=uu(e,n,o,t);if(Za(c,e),s!==null&&x3(e,o-r,c,a,t,s),$r(a)){let u=Jn(t.index,e);u[tn]=uu(e,n,o,t)}}}function D3(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=Cx();try{_s(s);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Uf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&A3(c,u)}}finally{_s(-1),Uf(o)}}function A3(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function hE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];F1(e,s.selectors,!1)&&(r??=[],$r(s)?r.unshift(s):r.push(s))}return r}function x3(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],u=o[a+1];k0(r,t,c,u)}}function eR(n,e,t,r,i){let s=Dt+t,o=e[fe],a=i(o,e,n,r,t);e[s]=a,Wa(n,!0);let c=n.type===2;return c?(U1(e[ut],a,n),(mx()===0||Ha(n))&&Za(a,e),gx()):Za(a,e),Hf()&&(!c||!mp(n))&&uE(o,e,a,n),n}function tR(n){let e=n;return Xy()?e0():(e=e.parent,Wa(e,!1)),e}function R3(n,e){let t=n[ps];if(!t)return;let r;try{r=t.get(Xn,null)}catch{r=null}r?.(e)}function fE(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let u=o[c],d=o[c+1],f=e.data[u];k0(f,t[u],d,i),a=!0}if(s)for(let c of s){let u=t[c],d=e.data[c];k0(d,u,r,i),a=!0}return a}function k3(n,e){let t=Jn(e,n),r=t[fe];P3(r,t);let i=t[vr];i!==null&&t[Ba]===null&&(t[Ba]=P1(i,t[ps])),et(18),pE(r,t,t[tn]),et(19,t[tn])}function P3(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pE(n,e,t){jf(e);try{let r=n.viewQuery;r!==null&&x0(1,r,t);let i=n.template;i!==null&&Z1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Br]?.finishViewCreation(n),n.staticContentQueries&&N1(n,e),n.staticViewQueries&&x0(2,n.viewQuery,t);let s=n.components;s!==null&&N3(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ye]&=-5,$f()}}function N3(n,e){for(let t=0;t<e.length;t++)k3(n,e[t])}function nR(n,e,t,r){let i=Ie(null);try{let s=e.tView,a=n[ye]&4096?4096:16,c=sE(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[ms]=u;let d=n[Br];return d!==null&&(c[Br]=d.createEmbeddedView(s)),pE(s,c,t),c}finally{Ie(i)}}function N0(n,e){return!e||e.firstChild===null||S1(n)}function du(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Qn(s)),_r(s)&&rR(s,r);let o=t.type;if(o&8)du(n,e,t.child,r);else if(o&32){let a=aE(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Q1(e,t);if(Array.isArray(a))r.push(...a);else{let c=ls(e[Cn]);du(c[fe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function rR(n,e){for(let t=gn;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&du(r[fe],r,i,e)}n[gs]!==n[vr]&&e.push(n[gs])}function iR(n){if(n[ho]!==null){for(let e of n[ho])e.impl.addSequence(e);n[ho].length=0}}var sR=[];function M3(n){return n[Ln]??O3(n)}function O3(n){let e=sR.pop()??Object.create(L3);return e.lView=n,e}function F3(n){n.lView[Ln]!==n&&(n.lView=null,sR.push(n))}var L3=ne(O({},Nl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{qa(n.lView)},consumerOnSignalRead(){this.lView[Ln]=this}});function V3(n){let e=n[Ln]??Object.create(U3);return e.lView=n,e}var U3=ne(O({},Nl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ls(n.lView);for(;e&&!oR(e[fe]);)e=ls(e);e&&Wy(e)},consumerOnSignalRead(){this.lView[Ln]=this}});function oR(n){return n.type!==2}function aR(n){if(n[Xl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Xl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ye]&8192)}}var B3=100;function cR(n,e=0){let r=n[vi].rendererFactory,i=!1;i||r.begin?.();try{j3(n,e)}finally{i||r.end?.()}}function j3(n,e){let t=t0();try{n0(!0),M0(n,e);let r=0;for(;nu(n);){if(r===B3)throw new U(103,!1);r++,M0(n,1)}}finally{n0(t)}}function $3(n,e,t,r){if(po(e))return;let i=e[ye],s=!1,o=!1;jf(e);let a=!0,c=null,u=null;s||(oR(n)?(u=M3(e),c=Ol(u)):Vh()===null?(a=!1,u=V3(e),c=Ol(u)):e[Ln]&&(Fl(e[Ln]),e[Ln]=null));try{qy(e),wx(n.bindingStartIndex),t!==null&&Z1(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let _=n.preOrderCheckHooks;_!==null&&Kf(e,_,null)}else{let _=n.preOrderHooks;_!==null&&Yf(e,_,0,null),p0(e,0)}if(o||H3(e),aR(e),lR(e,0),n.contentQueries!==null&&N1(n,e),!s)if(d){let _=n.contentCheckHooks;_!==null&&Kf(e,_)}else{let _=n.contentHooks;_!==null&&Yf(e,_,1),p0(e,1)}z3(n,e);let f=n.components;f!==null&&dR(e,f,0);let g=n.viewQuery;if(g!==null&&x0(2,g,r),!s)if(d){let _=n.viewCheckHooks;_!==null&&Kf(e,_)}else{let _=n.viewHooks;_!==null&&Yf(e,_,2),p0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Pf]){for(let _ of e[Pf])_();e[Pf]=null}s||(iR(e),e[ye]&=-73)}catch(d){throw s||qa(e),d}finally{u!==null&&(Uh(u,c),a&&F3(u)),$f()}}function lR(n,e){for(let t=T1(n);t!==null;t=D1(t))for(let r=gn;r<t.length;r++){let i=t[r];uR(i,e)}}function H3(n){for(let e=T1(n);e!==null;e=D1(e)){if(!(e[ye]&2))continue;let t=e[fo];for(let r=0;r<t.length;r++){let i=t[r];Wy(i)}}}function G3(n,e,t){et(18);let r=Jn(e,n);uR(r,t),et(19,r[tn])}function uR(n,e){Mf(n)&&M0(n,e)}function M0(n,e){let r=n[fe],i=n[ye],s=n[Ln],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Bh(s)),o||=!1,s&&(s.dirty=!1),n[ye]&=-9217,o)$3(r,n,r.template,n[tn]);else if(i&8192){let a=Ie(null);try{aR(n),lR(n,1);let c=r.components;c!==null&&dR(n,c,1),iR(n)}finally{Ie(a)}}}function dR(n,e,t){for(let r=0;r<e.length;r++)G3(n,e[r],t)}function z3(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)_s(~i);else{let s=i,o=t[++r],a=t[++r];Sx(o,s);let c=e[s];et(24,c),a(2,c),et(25,c)}}}finally{_s(-1)}}function mE(n,e){let t=t0()?64:1088;for(n[vi].changeDetectionScheduler?.notify(e);n;){n[ye]|=t;let r=ls(n);if(Ga(n)&&!r)return n;n=r}return null}function hR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function fR(n,e,t,r=!0){let i=e[fe];if(q3(i,e,n,t),r){let o=P0(t,n),a=e[ut],c=a.parentNode(n[gs]);c!==null&&l3(i,n[mn],a,e,c,o)}let s=e[Ba];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function O0(n,e){if(n.length<=gn)return;let t=gn+e,r=n[t];if(r){let i=r[ms];i!==null&&i!==n&&lE(i,r),e>0&&(n[t-1][Yn]=r[Yn]);let s=Ql(n,gn+e);c3(r[fe],r);let o=s[Br];o!==null&&o.detachView(s[fe]),r[Lt]=null,r[Yn]=null,r[ye]&=-129}return r}function q3(n,e,t,r){let i=gn+r,s=t.length;r>0&&(t[i-1][Yn]=e),r<s-gn?(e[Yn]=t[i],ky(t,gn+r,e)):(t.push(e),e[Yn]=null),e[Lt]=t;let o=e[ms];o!==null&&t!==o&&pR(o,e);let a=e[Br];a!==null&&a.insertView(n),Of(e),e[ye]|=128}function pR(n,e){let t=n[fo],r=e[Lt];if(jr(r))n[ye]|=2;else{let i=r[Lt][Cn];e[Cn]!==i&&(n[ye]|=2)}t===null?n[fo]=[e]:t.push(e)}var ys=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[fe];return du(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[tn]}set context(e){this._lView[tn]=e}get destroyed(){return po(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Lt];if(_r(e)){let t=e[tu],r=t?t.indexOf(this):-1;r>-1&&(O0(e,r),Ql(t,r))}this._attachedToViewContainer=!1}W1(this._lView[fe],this._lView)}onDestroy(e){Ky(this._lView,e)}markForCheck(){mE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ye]&=-129}reattach(){Of(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,cR(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ga(this._lView),t=this._lView[ms];t!==null&&!e&&lE(t,this._lView),q1(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let t=Ga(this._lView),r=this._lView[ms];r!==null&&!t&&pR(r,this._lView),Of(this._lView)}};var wr=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=W3;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=nR(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ys(s)}}return n})();function W3(){return gE(vn(),De())}function gE(n,e){return n.type&4?new wr(e,n,nc(n,e)):null}function gu(n,e,t,r,i){let s=n.data[e];if(s===null)s=K3(n,e,t,r,i),Ix()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=Ex();s.injectorIndex=o===null?-1:o.injectorIndex}return Wa(s,!0),s}function K3(n,e,t,r,i){let s=Zy(),o=Xy(),a=o?s:s&&s.parent,c=n.data[e]=Q3(n,a,t,e,r,i);return Y3(n,c,s,o),c}function Y3(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Q3(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Jy()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var J3=()=>null;function F0(n,e){return J3(n,e)}var mR=class{},wp=class{},L0=class{resolveComponentFactory(e){throw new U(917,!1)}},vu=class{static NULL=new L0},Tn=class{},wi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Z3()}return n})();function Z3(){let n=De(),e=vn(),t=Jn(e.index,n);return(jr(t)?t:n)[ut]}var gR=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var Jf={},V0=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Jf,r);return i!==Jf||t===Jf?i:this.parentInjector.get(e,t,r)}};function Yx(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Tf(i,a);else if(s==2){let c=a,u=e[++o];r=Tf(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function se(n,e=0){let t=De();if(t===null)return re(n,e);let r=vn();return b1(r,t,Wt(n),e)}function vE(){let n="invalid";throw new Error(n)}function vR(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,u=null;for(let d of o)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(o);break}t4(n,e,t,a,s,c,u)}s!==null&&r!==null&&X3(t,r,s)}function X3(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new U(-301,!1);r.push(e[i],s)}}function e4(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function t4(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let g=0;g<a;g++){let _=r[g];!c&&$r(_)&&(c=!0,e4(n,t,g)),C0(np(t,e),n,_.type)}a4(t,n.data.length,a);for(let g=0;g<a;g++){let _=r[g];_.providersResolver&&_.providersResolver(_)}let u=!1,d=!1,f=j1(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let _=r[g];if(t.mergedAttrs=lu(t.mergedAttrs,_.hostAttrs),r4(n,t,e,f,_),o4(f,_,i),o!==null&&o.has(_)){let[x,P]=o.get(_);t.directiveToIndex.set(_.type,[f,x+t.directiveStart,P+t.directiveStart])}else(s===null||!s.has(_))&&t.directiveToIndex.set(_.type,f);_.contentQueries!==null&&(t.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(t.flags|=64);let I=_.type.prototype;!u&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}n4(n,t,s)}function n4(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Qx(0,e,i,r),Qx(1,e,i,r),Zx(e,r,!1);else{let s=t.get(i);Jx(0,e,s,r),Jx(1,e,s,r),Zx(e,r,!0)}}}function Qx(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),_R(e,s)}}function Jx(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),_R(e,o)}}function _R(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Zx(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||rE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let u=s[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){o??=[],o.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function r4(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=cs(i.type,!0)),o=new go(s,$r(i),se,null);n.blueprint[r]=o,t[r]=o,i4(n,e,r,j1(n,t,i.hostVars,Dn),i)}function i4(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;s4(o)!=a&&o.push(a),o.push(t,r,s)}}function s4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function o4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;$r(e)&&(t[""]=n)}}function a4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function _E(n,e,t,r,i,s,o,a){let c=e[fe],u=c.consts,d=za(u,o),f=gu(c,n,t,r,d);return s&&vR(c,e,f,za(u,a),i),f.mergedAttrs=lu(f.mergedAttrs,f.attrs),f.attrs!==null&&Yx(f,f.attrs,!1),f.mergedAttrs!==null&&Yx(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function yE(n,e){f1(n,e),$y(e)&&n.queries.elementEnd(e)}function EE(n){return ER(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function yR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function ER(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ip(n,e,t){return n[e]=t}function c4(n,e){return n[e]}function Ei(n,e,t){if(t===Dn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function bE(n,e,t,r){let i=Ei(n,e,t);return Ei(n,e+1,r)||i}function l4(n,e,t,r,i){let s=bE(n,e,t,r);return Ei(n,e+2,i)||s}function v0(n,e,t){return function r(i){let s=vs(n)?Jn(n.index,e):e;mE(s,5);let o=e[tn],a=Xx(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=Xx(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Xx(n,e,t,r){let i=Ie(null);try{return et(6,e,t),t(r)!==!1}catch(s){return R3(n,s),!1}finally{et(7,e,t),Ie(i)}}function u4(n,e,t,r,i,s,o,a){let c=Ha(n),u=!1,d=null;if(!r&&c&&(d=h4(e,t,s,n.index)),d!==null){let f=d.__ngLastListenerFn__||d;f.__ngNextListenerFn__=o,d.__ngLastListenerFn__=o,u=!0}else{let f=Hr(n,t),g=r?r(f):f;Rj(t,g,s,a);let _=i.listen(g,s,a);if(!d4(s)){let I=r?x=>r(Qn(x[n.index])):n.index;bR(I,e,t,s,a,_,!1)}}return u}function d4(n){return n.startsWith("animation")||n.startsWith("transition")}function h4(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[ja],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function bR(n,e,t,r,i,s,o){let a=e.firstCreatePass?Qy(e):null,c=Yy(t),u=c.length;c.push(i,s),a&&a.push(r,n,u,(u+1)*(o?-1:1))}function e1(n,e,t,r,i,s){let o=e[t],a=e[fe],u=a.data[t].outputs[r],f=o[u].subscribe(s);bR(n.index,a,e,i,s,f,!0)}var U0=Symbol("BINDING");var op=class extends vu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ur(e);return new Es(t,this.ngModule)}};function f4(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&vp.SignalBased)!==0};return i&&(s.transform=i),s})}function p4(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function m4(n,e,t){let r=e instanceof _t?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new V0(t,r):t}function g4(n){let e=n.get(Tn,null);if(e===null)throw new U(407,!1);let t=n.get(gR,null),r=n.get(us,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function v4(n,e){let t=wR(n);return L1(e,t,t==="svg"?cx:t==="math"?lx:null)}function wR(n){return(n.selectors[0][0]||"div").toLowerCase()}var Es=class extends wp{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=f4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=p4(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=qj(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){et(22);let a=Ie(null);try{let c=this.componentDef,u=_4(r,c,o,s),d=m4(c,i||this.ngModule,e),f=g4(d),g=f.rendererFactory.createRenderer(null,c),_=r?E3(g,r,c.encapsulation,d):v4(c,g),I=o?.some(t1)||s?.some(B=>typeof B!="function"&&B.bindings.some(t1)),x=sE(null,u,null,512|B1(c),null,null,f,g,d,null,P1(_,d,!0));x[Dt]=_,jf(x);let P=null;try{let B=_E(Dt,x,2,"#host",()=>u.directiveRegistry,!0,0);U1(g,_,B),Za(_,x),Ep(u,x,B),nE(u,B,x),yE(u,B),t!==void 0&&E4(B,this.ngContentSelectors,t),P=Jn(B.index,x),x[tn]=P[tn],pE(u,x,null)}catch(B){throw P!==null&&D0(P),D0(x),B}finally{et(23),$f()}return new ap(this.componentType,x,!!I)}finally{Ie(a)}}};function _4(n,e,t,r){let i=n?["ng-version","21.0.0"]:Wj(e.selectors[0]),s=null,o=null,a=0;if(t)for(let d of t)a+=d[U0].requiredVars,d.create&&(d.targetIdx=0,(s??=[]).push(d)),d.update&&(d.targetIdx=0,(o??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let f=r[d];if(typeof f!="function")for(let g of f.bindings){a+=g[U0].requiredVars;let _=d+1;g.create&&(g.targetIdx=_,(s??=[]).push(g)),g.update&&(g.targetIdx=_,(o??=[]).push(g))}}let c=[e];if(r)for(let d of r){let f=typeof d=="function"?d:d.type,g=Oy(f);c.push(g)}return iE(0,null,y4(s,o),1,a,c,null,null,null,[i],null)}function y4(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function t1(n){let e=n[U0].kind;return e==="input"||e==="twoWay"}var ap=class extends mR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Nf(t[fe],Dt),this.location=nc(this._tNode,t),this.instance=Jn(this._tNode.index,t)[tn],this.hostView=this.changeDetectorRef=new ys(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=fE(r,i[fe],i,e,t);this.previousInputValues.set(e,t);let o=Jn(r.index,i);mE(o,1)}get injector(){return new mo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function E4(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var er=(()=>{class n{static __NG_ELEMENT_ID__=b4}return n})();function b4(){let n=vn();return SR(n,De())}var w4=er,IR=class extends w4{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new mo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Z0(this._hostTNode,this._hostLView);if(m1(e)){let t=ep(e,this._hostLView),r=Xf(e),i=t[fe].data[r+8];return new mo(i,t)}else return new mo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=n1(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-gn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=F0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,N0(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!rj(e),u;if(c)u=t;else{let P=t||{};u=P.index,r=P.injector,i=P.projectableNodes,s=P.environmentInjector||P.ngModuleRef,o=P.directives,a=P.bindings}let d=c?e:new Es(Ur(e)),f=r||this.parentInjector;if(!s&&d.ngModule==null){let B=(c?f:this.parentInjector).get(_t,null);B&&(s=B)}let g=Ur(d.componentType??{}),_=F0(this._lContainer,g?.id??null),I=_?.firstChild??null,x=d.create(f,i,I,s,o,a);return this.insertImpl(x.hostView,u,N0(this._hostTNode,_)),x}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(dx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Lt],u=new IR(c,c[mn],c[Lt]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return fR(o,i,s,r),e.attachToViewContainerRef(),ky(_0(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=n1(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=O0(this._lContainer,t);r&&(Ql(_0(this._lContainer),t),W1(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=O0(this._lContainer,t);return r&&Ql(_0(this._lContainer),t)!=null?new ys(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function n1(n){return n[tu]}function _0(n){return n[tu]||(n[tu]=[])}function SR(n,e){let t,r=e[n.index];return _r(r)?t=r:(t=hR(r,e,null,n),e[n.index]=t,oE(e,t)),S4(t,e,n,r),new IR(t,n,e)}function I4(n,e){let t=n[ut],r=t.createComment(""),i=Hr(e,n),s=t.parentNode(i);return ip(t,s,r,t.nextSibling(i),!1),r}var S4=D4,C4=()=>!1;function T4(n,e,t){return C4(n,e,t)}function D4(n,e,t,r){if(n[gs])return;let i;t.type&8?i=Qn(r):i=I4(e,t),n[gs]=i}var B0=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},j0=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)wE(e,t).matches!==null&&this.queries[t].setDirty()}},$0=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=O4(e):this.predicate=e}},H0=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},G0=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,A4(t,s)),this.matchTNodeWithReadOption(e,t,Qf(t,e,s,!1,!1))}else r===wr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Qf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Yt||i===er||i===wr&&t.type&4)this.addMatch(t.index,-2);else{let s=Qf(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function A4(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function x4(n,e){return n.type&11?nc(n,e):n.type&4?gE(n,e):null}function R4(n,e,t,r){return t===-1?x4(e,n):t===-2?k4(n,e,r):uu(n,n[fe],t,e)}function k4(n,e,t){if(t===Yt)return nc(e,n);if(t===wr)return gE(e,n);if(t===er)return SR(e,n)}function CR(n,e,t,r){let i=e[Br].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let d=s[u];a.push(R4(e,d,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function z0(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=CR(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let u=s[a+1],d=e[-c];for(let f=gn;f<d.length;f++){let g=d[f];g[ms]===g[Lt]&&z0(g[fe],g,u,r)}if(d[fo]!==null){let f=d[fo];for(let g=0;g<f.length;g++){let _=f[g];z0(_[fe],_,u,r)}}}}}return r}function P4(n,e){return n[Br].queries[e].queryList}function N4(n,e,t){let r=new rp((t&4)===4);return px(n,e,r,r.destroy),(e[Br]??=new j0).queries.push(new B0(r))-1}function M4(n,e,t){let r=Vt();return r.firstCreatePass&&(F4(r,new $0(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),N4(r,De(),e)}function O4(n){return n.split(",").map(e=>e.trim())}function F4(n,e,t){n.queries===null&&(n.queries=new H0),n.queries.track(new G0(e,t))}function wE(n,e){return n.queries.getByIndex(e)}function L4(n,e){let t=n[fe],r=wE(t,e);return r.crossesNgTemplate?z0(t,n,e,[]):CR(t,n,r,e)}var q0=new Map,V4=new Set;async function TR(n){let e=q0;q0=new Map;let t=new Map;function r(s){let o=t.get(s);if(o)return o;let a=n(s).then(c=>U4(s,c));return t.set(s,a),a}let i=Array.from(e).map(async([s,o])=>{if(o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");let a=[];o.templateUrl&&a.push(r(o.templateUrl).then(f=>{o.template=f}));let c=typeof o.styles=="string"?[o.styles]:o.styles??[];o.styles=c;let{styleUrl:u,styleUrls:d}=o;if(u&&(d=[u],o.styleUrl=void 0),d?.length){let f=Promise.all(d.map(g=>r(g))).then(g=>{c.push(...g),o.styleUrls=void 0});a.push(f)}await Promise.all(a),V4.delete(s)});await Promise.all(i)}function DR(){return q0.size===0}async function U4(n,e){if(typeof e=="string")return e;if(e.status!==void 0&&e.status!==200)throw new U(918,!1);return e.text()}var vo=class{},Sp=class{};var hu=class extends vo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new op(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=My(e);this._bootstrapComponents=M1(s.bootstrap),this._r3Injector=a0(e,t,[{provide:vo,useValue:this},{provide:vu,useValue:this.componentFactoryResolver},...r],gi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},fu=class extends Sp{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new hu(this.moduleType,e,[])}};function AR(n,e,t){return new hu(n,e,t,!1)}var cp=class extends vo{injector;componentFactoryResolver=new op(this);instance=null;constructor(e){super();let t=new ao([...e.providers,{provide:vo,useValue:this},{provide:vu,useValue:this.componentFactoryResolver}],e.parent||Ua(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function rc(n,e,t=null){return new cp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var B4=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Fy(!1,t.type),i=r.length>0?rc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(re(_t))})}return n})();function yt(n){return tc(()=>{let e=xR(n),t=ne(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===X0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(B4).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||br.Emulated,styles:n.styles||fn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&bo("NgStandalone"),RR(t);let r=n.dependencies;return t.directiveDefs=r1(r,j4),t.pipeDefs=r1(r,nx),t.id=G4(t),t})}function j4(n){return Ur(n)||Oy(n)}function ht(n){return tc(()=>({type:n.type,bootstrap:n.bootstrap||fn,declarations:n.declarations||fn,imports:n.imports||fn,exports:n.exports||fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $4(n,e){if(n==null)return fs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=vp.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function H4(n){if(n==null)return fs;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ut(n){return tc(()=>{let e=xR(n);return RR(e),e})}function _u(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function xR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||fs,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||fn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:$4(n.inputs,e),outputs:H4(n.outputs),debugInfo:null}}function RR(n){n.features?.forEach(e=>e(n))}function r1(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function G4(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function z4(n){return Object.getPrototypeOf(n.prototype).constructor}function bs(n){let e=z4(n.type),t=!0,r=[n];for(;e;){let i;if($r(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=y0(n.inputs),o.declaredInputs=y0(n.declaredInputs),o.outputs=y0(n.outputs);let a=i.hostBindings;a&&Q4(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&K4(n,c),u&&Y4(n,u),q4(n,i),qA(n.outputs,i.outputs),$r(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===bs&&(t=!1)}}e=Object.getPrototypeOf(e)}W4(r)}function q4(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function W4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=lu(i.hostAttrs,t=lu(t,i.hostAttrs))}}function y0(n){return n===fs?{}:n===fn?[]:n}function K4(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Y4(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function Q4(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function kR(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=lu(n.mergedAttrs,n.attrs);let d=n.tView=iE(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Wa(n,!1);let c=X4(t,e,n,r);Hf()&&uE(t,e,c,n),Za(c,e);let u=hR(c,e,c,n);e[r+Dt]=u,oE(e,u),T4(u,n,e)}function J4(n,e,t,r,i,s,o,a,c,u,d){let f=t+Dt,g;return e.firstCreatePass?(g=gu(e,f,4,o||null,a||null),Ff()&&vR(e,n,g,za(e.consts,u),hE),f1(e,g)):g=e.data[f],kR(g,n,e,t,r,i,s,c),Ha(g)&&Ep(e,n,g),u!=null&&bp(n,g,d),g}function Z4(n,e,t,r,i,s,o,a,c,u,d){let f=t+Dt,g;if(e.firstCreatePass){if(g=gu(e,f,4,o||null,a||null),u!=null){let _=za(e.consts,u);g.localNames=[];for(let I=0;I<_.length;I+=2)g.localNames.push(_[I],-1)}}else g=e.data[f];return kR(g,n,e,t,r,i,s,c),u!=null&&bp(n,g,d),g}function H(n,e,t,r,i,s,o,a){let c=De(),u=Vt(),d=za(u.consts,s);return J4(c,u,n,e,t,r,i,d,void 0,o,a),H}var X4=e5;function e5(n,e,t,r){return ru(!0),e[ut].createComment("")}var IE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function PR(n){return typeof n=="function"&&n[un]!==void 0}function SE(n){return PR(n)&&typeof n.set=="function"}var Cp=new Q(""),Tp=new Q(""),yu=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,Uy()&&(this._destroyRef=F(Zn,{optional:!0})??void 0),CE||(MR(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(re(Me),re(NR),re(Tp))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),NR=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return CE?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function MR(n){CE=n}var CE;function Ii(n){return!!n&&typeof n.then=="function"}function Dp(n){return!!n&&typeof n.subscribe=="function"}var TE=new Q("");function Ap(n){return gr([{provide:TE,multi:!0,useValue:n}])}var DE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=F(TE,{optional:!0})??[];injector=F(qe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Tt(this.injector,i);if(Ii(s))t.push(s);else if(Dp(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xp=new Q("");function OR(){U_(()=>{let n="";throw new U(600,n)})}function FR(n){return n.isBoundToModule}var t5=10;function AE(n,e){return Array.isArray(e)?e.reduce(AE,n):O(O({},n),e)}var tr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(Xn);afterRenderManager=F(cE);zonelessEnabled=F(iu);rootEffectScheduler=F(f0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ee;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=F(yi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Oe(t=>!t))}constructor(){F(Eo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=F(_t);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=qe.NULL){return this._injector.get(Me).run(()=>{et(10);let o=t instanceof wp;if(!this._injector.get(DE).done){let I="";throw new U(405,I)}let c;o?c=t:c=this._injector.get(vu).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=FR(c)?void 0:this._injector.get(vo),d=r||c.selector,f=c.create(i,[],d,u),g=f.location.nativeElement,_=f.injector.get(Cp,null);return _?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),au(this.components,f),_?.unregisterApplication(g)}),this._loadComponent(f),et(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){et(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(_p.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);let t=Ie(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ie(t),this.afterTick.next(),et(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Tn,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<t5;)et(14),this.synchronizeOnce(),et(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!nu(i))continue;let s=r&&!this.zonelessEnabled?0:1;cR(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>nu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;au(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(xp,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>au(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function au(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Qae=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function R(n,e,t){let r=De(),i=Lf();if(Ei(r,i,e)){let s=Vt(),o=o0();X1(o,r,n,e,r[ut],t)}return R}function W0(n,e,t,r,i){fE(e,n,t,i?"class":"style",r)}function m(n,e,t,r){let i=De(),s=i[fe],o=n+Dt,a=s.firstCreatePass?_E(o,i,2,e,hE,Ff(),t,r):s.data[o];if(eR(a,i,n,e,n5),Ha(a)){let c=i[fe];Ep(c,i,a),nE(c,a,i)}return r!=null&&bp(i,a),m}function v(){let n=Vt(),e=vn(),t=tR(e);return n.firstCreatePass&&yE(n,t),_x(t)&&yx(),vx(),t.classesWithoutHost!=null&&lj(t)&&W0(n,t,De(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&uj(t)&&W0(n,t,De(),t.stylesWithoutHost,!1),v}function le(n,e,t,r){return m(n,e,t,r),v(),le}var n5=(n,e,t,r,i)=>(ru(!0),L1(e[ut],r,kx()));function Rp(n,e,t){let r=De(),i=r[fe],s=n+Dt,o=i.firstCreatePass?_E(s,r,8,"ng-container",hE,Ff(),e,t):i.data[s];if(eR(o,r,n,"ng-container",r5),Ha(o)){let a=r[fe];Ep(a,r,o),nE(a,o,r)}return t!=null&&bp(r,o),Rp}function kp(){let n=Vt(),e=vn(),t=tR(e);return n.firstCreatePass&&yE(n,t),kp}var r5=(n,e,t,r,i)=>(ru(!0),Qj(e[ut],""));function ae(){return De()}var su=void 0;function i5(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var s5=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",su,su,su],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",i5],cu={};function xE(n,e,t){typeof e!="string"&&(t=e,e=n[dt.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),cu[e]=n,t&&(cu[e][dt.ExtraData]=t)}function An(n){let e=o5(n),t=i1(e);if(t)return t;let r=e.split("-")[0];if(t=i1(r),t)return t;if(r==="en")return s5;throw new U(701,!1)}function i1(n){return n in cu||(cu[n]=pn.ng&&pn.ng.common&&pn.ng.common.locales&&pn.ng.common.locales[n]),cu[n]}var dt=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(dt||{});function o5(n){return n.toLowerCase().replace(/_/g,"-")}var Eu="en-US";var a5=Eu;function LR(n){typeof n=="string"&&(a5=n.toLowerCase().replace(/_/g,"-"))}function j(n,e,t){let r=De(),i=Vt(),s=vn();return VR(i,r,r[ut],s,n,e,t),j}function VR(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=v0(r,e,s),u4(r,n,e,o,t,i,s,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let f=0;f<d.length;f+=2){let g=d[f],_=d[f+1];c??=v0(r,e,s),e1(r,e,g,_,i,c)}if(u&&u.length)for(let f of u)c??=v0(r,e,s),e1(r,e,f,i,i,c)}}function M(n=1){return Rx(n)}function c5(n,e){let t=null,r=jj(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?F1(n,s,!0):Gj(r,s))return i}return t}function Pp(n){let e=De()[Cn][mn];if(!e.projection){let t=n?n.length:1,r=e.projection=ex(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?c5(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function Np(n,e=0,t,r,i,s){let o=De(),a=Vt(),c=r?n+1:null;c!==null&&Z4(o,a,c,r,i,s,null,t);let u=gu(a,Dt+n,16,null,t||null);u.projection===null&&(u.projection=e),e0();let f=!o[Ba]||Jy();o[Cn][mn].projection[u.projection]===null&&c!==null?l5(o,a,c):f&&!mp(u)&&v3(a,o,u)}function l5(n,e,t){let r=Dt+t,i=e.data[r],s=n[r],o=F0(s,i.tView.ssrId),a=nR(n,i,void 0,{dehydratedView:o});fR(s,a,0,N0(i,o))}function ic(n,e,t){M4(n,e,t)}function Io(n){let e=De(),t=Vt(),r=r0();Bf(r+1);let i=wE(t,r);if(n.dirty&&ux(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=L4(e,r);n.reset(s,Ij),n.notifyOnChanges()}return!0}return!1}function So(){return P4(De(),r0())}function qf(n,e){return n<<17|e<<2}function _o(n){return n>>17&32767}function u5(n){return(n&2)==2}function d5(n,e){return n&131071|e<<17}function K0(n){return n|2}function ec(n){return(n&131068)>>2}function E0(n,e){return n&-131069|e<<2}function h5(n){return(n&1)===1}function Y0(n){return n|1}function f5(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=_o(o),c=ec(o);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||La(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let g=_o(n[a+1]);n[r+1]=qf(g,a),g!==0&&(n[g+1]=E0(n[g+1],r)),n[a+1]=d5(n[a+1],r)}else n[r+1]=qf(a,0),a!==0&&(n[a+1]=E0(n[a+1],r)),a=r;else n[r+1]=qf(c,0),a===0?a=r:n[c+1]=E0(n[c+1],r),c=r;u&&(n[r+1]=K0(n[r+1])),s1(n,d,r,!0),s1(n,d,r,!1),p5(e,d,n,r,s),o=qf(a,c),s?e.classBindings=o:e.styleBindings=o}function p5(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&La(s,e)>=0&&(t[r+1]=Y0(t[r+1]))}function s1(n,e,t,r){let i=n[t+1],s=e===null,o=r?_o(i):ec(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],u=n[o+1];m5(c,e)&&(a=!0,n[o+1]=r?Y0(u):K0(u)),o=r?_o(u):ec(u)}a&&(n[t+1]=r?K0(i):Y0(i))}function m5(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?La(n,e)>=0:!1}var Er={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function g5(n){return n.substring(Er.key,Er.keyEnd)}function v5(n){return _5(n),UR(n,BR(n,0,Er.textEnd))}function UR(n,e){let t=Er.textEnd;return t===e?-1:(e=Er.keyEnd=y5(n,Er.key=e,t),BR(n,e,t))}function _5(n){Er.key=0,Er.keyEnd=0,Er.value=0,Er.valueEnd=0,Er.textEnd=n.length}function BR(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function y5(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Ct(n,e,t){return jR(n,e,t,!1),Ct}function Re(n,e){return jR(n,e,null,!0),Re}function sc(n){b5(D5,E5,n,!0)}function E5(n,e){for(let t=v5(e);t>=0;t=UR(e,t))Rf(n,g5(e),!0)}function jR(n,e,t,r){let i=De(),s=Vt(),o=Vf(2);if(s.firstUpdatePass&&HR(s,n,o,r),e!==Dn&&Ei(i,o,e)){let a=s.data[_i()];GR(s,a,i,i[ut],n,i[o+1]=x5(e,t),r,o)}}function b5(n,e,t,r){let i=Vt(),s=Vf(2);i.firstUpdatePass&&HR(i,null,s,r);let o=De();if(t!==Dn&&Ei(o,s,t)){let a=i.data[_i()];if(zR(a,r)&&!$R(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Tf(c,t||"")),W0(i,a,o,t,r)}else A5(i,a,o,o[ut],o[s+1],o[s+1]=T5(n,e,t),r,s)}}function $R(n,e){return e>=n.expandoStartIndex}function HR(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[_i()],o=$R(n,t);zR(s,r)&&e===null&&!o&&(e=!1),e=w5(i,s,e,r),f5(i,s,e,t,o,r)}}function w5(n,e,t,r){let i=Tx(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=b0(null,n,e,t,r),t=pu(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=b0(i,n,e,t,r),s===null){let c=I5(n,e,r);c!==void 0&&Array.isArray(c)&&(c=b0(null,n,e,c[1],r),c=pu(c,e.attrs,r),S5(n,e,r,c))}else s=C5(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function I5(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ec(r)!==0)return n[_o(r)]}function S5(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[_o(i)]=r}function C5(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=pu(r,o,t)}return pu(r,e.attrs,t)}function b0(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=pu(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function pu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Rf(n,o,t?!0:e[++s]))}return n===void 0?null:n}function T5(n,e,t){if(t==null||t==="")return fn;let r=[],i=gp(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function D5(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Rf(n,r,t)}function A5(n,e,t,r,i,s,o,a){i===Dn&&(i=fn);let c=0,u=0,d=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,_=u<s.length?s[u+1]:void 0,I=null,x;d===f?(c+=2,u+=2,g!==_&&(I=f,x=_)):f===null||d!==null&&d<f?(c+=2,I=d):(u+=2,I=f,x=_),I!==null&&GR(n,e,t,r,I,x,o,a),d=c<i.length?i[c]:null,f=u<s.length?s[u]:null}}function GR(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=h5(u)?o1(c,e,t,i,ec(u),o):void 0;if(!lp(d)){lp(s)||u5(u)&&(s=o1(c,null,t,i,a,o));let f=Hy(_i(),t);y3(r,o,f,i,s)}}function o1(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,g=t[i+1];g===Dn&&(g=f?fn:void 0);let _=f?kf(g,r):d===r?g:void 0;if(u&&!lp(_)&&(_=kf(c,r)),lp(_)&&(a=_,o))return a;let I=n[i+1];i=o?_o(I):ec(I)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=kf(c,r))}return a}function lp(n){return n!==void 0}function x5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=gi(gp(n)))),n}function zR(n,e){return(n.flags&(e?8:16))!==0}function y(n,e=""){let t=De(),r=Vt(),i=n+Dt,s=r.firstCreatePass?gu(r,i,1,e,null):r.data[i],o=R5(r,t,s,e,n);t[i]=o,Hf()&&uE(r,t,o,s),Wa(s,!1)}var R5=(n,e,t,r,i)=>(ru(!0),Kj(e[ut],r));function k5(n,e,t,r=""){return Ei(n,Lf(),t)?e+Yl(t)+r:Dn}function P5(n,e,t,r,i,s=""){let o=bx(),a=bE(n,o,t,i);return Vf(2),a?e+Yl(t)+r+Yl(i)+s:Dn}function Z(n){return J("",n),Z}function J(n,e,t){let r=De(),i=k5(r,n,e,t);return i!==Dn&&qR(r,_i(),i),J}function Co(n,e,t,r,i){let s=De(),o=P5(s,n,e,t,r,i);return o!==Dn&&qR(s,_i(),o),Co}function qR(n,e,t){let r=Hy(e,n);Yj(n[ut],r,t)}function To(n,e,t){SE(e)&&(e=e());let r=De(),i=Lf();if(Ei(r,i,e)){let s=Vt(),o=o0();X1(o,r,n,e,r[ut],t)}return To}function oc(n,e){let t=SE(n);return t&&n.set(e),t}function Do(n,e){let t=De(),r=Vt(),i=vn();return VR(r,t,t[ut],i,n,e),Do}function N5(n,e,t){let r=Vt();if(r.firstCreatePass){let i=$r(n);Q0(t,r.data,r.blueprint,i,!0),Q0(e,r.data,r.blueprint,i,!1)}}function Q0(n,e,t,r,i){if(n=Wt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Q0(n[s],e,t,r,i);else{let s=Vt(),o=De(),a=vn(),c=oo(n)?n:Wt(n.provide),u=Vy(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(oo(n)||!n.multi){let _=new go(u,i,se,null),I=I0(c,e,i?d:d+g,f);I===-1?(C0(np(a,o),s,c),w0(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),o.push(_)):(t[I]=_,o[I]=_)}else{let _=I0(c,e,d+g,f),I=I0(c,e,d,d+g),x=_>=0&&t[_],P=I>=0&&t[I];if(i&&!P||!i&&!x){C0(np(a,o),s,c);let B=F5(i?O5:M5,t.length,i,r,u,n);!i&&P&&(t[I].providerFactory=B),w0(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),o.push(B)}else{let B=WR(t[i?I:_],u,!i&&r);w0(s,n,_>-1?_:I,B)}!i&&r&&P&&t[I].componentProviders++}}}function w0(n,e,t,r){let i=oo(e),s=ox(e);if(i||s){let c=(s?Wt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function WR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function I0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function M5(n,e,t,r,i){return J0(this.multi,[])}function O5(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=uu(r,r[fe],this.providerFactory.index,i);o=c.slice(0,a),J0(s,o);for(let u=a;u<c.length;u++)o.push(c[u])}else o=[],J0(s,o);return o}function J0(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function F5(n,e,t,r,i,s){let o=new go(n,t,se,null);return o.multi=[],o.index=e,o.componentProviders=0,WR(o,i,r&&!t),o}function ws(n,e=[]){return t=>{t.providersResolver=(r,i)=>N5(r,i?i(n):n,e)}}function bu(n,e,t){let r=Ka()+n,i=De();return i[r]===Dn?Ip(i,r,t?e.call(t):e()):c4(i,r)}function Mp(n,e,t,r,i){return KR(De(),Ka(),n,e,t,r,i)}function Op(n,e,t,r,i,s){return V5(De(),Ka(),n,e,t,r,i,s)}function RE(n,e){let t=n[e];return t===Dn?void 0:t}function L5(n,e,t,r,i,s){let o=e+t;return Ei(n,o,i)?Ip(n,o+1,s?r.call(s,i):r(i)):RE(n,o+1)}function KR(n,e,t,r,i,s,o){let a=e+t;return bE(n,a,i,s)?Ip(n,a+2,o?r.call(o,i,s):r(i,s)):RE(n,a+2)}function V5(n,e,t,r,i,s,o,a){let c=e+t;return l4(n,c,i,s,o)?Ip(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):RE(n,c+3)}function oe(n,e){let t=Vt(),r,i=n+Dt;t.firstCreatePass?(r=U5(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=cs(r.type,!0)),o,a=hn(se);try{let c=tp(!1),u=s();return tp(c),zy(t,De(),i,u),u}finally{hn(a)}}function U5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function At(n,e,t){let r=n+Dt,i=De(),s=Gy(i,r);return YR(i,r)?L5(i,Ka(),e,s.transform,t,s):s.transform(t)}function Ae(n,e,t,r){let i=n+Dt,s=De(),o=Gy(s,i);return YR(s,i)?KR(s,Ka(),e,o.transform,t,r,o):o.transform(t,r)}function YR(n,e){return n[fe].data[e].pure}var Wf=null;function QR(n){Wf!==null&&(n.defaultEncapsulation!==Wf.defaultEncapsulation||n.preserveWhitespaces!==Wf.preserveWhitespaces)||(Wf=n)}var up=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},kE=(()=>{class n{compileModuleSync(t){return new fu(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=My(t),s=M1(i.declarations).reduce((o,a)=>{let c=Ur(a);return c&&o.push(new Es(c)),o},[]);return new up(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JR=new Q("");var ZR=(()=>{class n{applicationErrorHandler=F(Xn);appRef=F(tr);taskService=F(yi);ngZone=F(Me);zonelessEnabled=F(iu);tracing=F(Eo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ke;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ql):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(h0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?l0:c0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ql+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,l0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XR(){return[{provide:us,useExisting:ZR},{provide:Me,useClass:Wl},{provide:iu,useValue:!0}]}function B5(){return typeof $localize<"u"&&$localize.locale||Eu}var Is=new Q("",{factory:()=>F(Is,{optional:!0,skipSelf:!0})||B5()});function wu(n,e){return jh(n,e?.equal)}var ck=Symbol("InputSignalNode#UNSET"),X5=ne(O({},$h),{transformFn:void 0,applyValueToInputSignal(n,e){Ll(n,e)}});function lk(n,e){let t=Object.create(X5);t.value=n,t.transformFn=e?.transform;function r(){if(Ml(t),t.value===ck){let i=null;throw new U(-950,i)}return t.value}return r[un]=t,r}function ek(n,e){return lk(n,e)}function e$(n){return lk(ck,n)}var uk=(ek.required=e$,ek);function t$(n,e,t){let r=new fu(t);return Promise.resolve(r)}function tk(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var Fp=new Q(""),n$=new Q("");function Iu(n){return!n.moduleRef}function r$(n){let e=Iu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Me);return t.run(()=>{Iu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Xn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Iu(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Fp);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Fp);o.add(s),n.moduleRef.onDestroy(()=>{au(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return s$(r,t,()=>{let s=e.get(yi),o=s.add(),a=e.get(DE);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Is,Eu);if(LR(c||Eu),!e.get(n$,!0))return Iu(n)?e.get(tr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Iu(n)){let d=e.get(tr);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return dk?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var dk;function nk(){dk=i$}function i$(n,e){let t=n.injector.get(tr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new U(-403,!1);e.push(n)}function s$(n,e,t){try{let r=t();return Ii(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var hk=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=[],s=[XR(),...i,...r?.applicationProviders??[],Ox],o=AR(t.moduleType,this.injector,s);return nk(),r$({moduleRef:o,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=AE({},r);return nk(),t$(this.injector,i,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new U(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Fp,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(re(qe))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),LE=null;function o$(n){if(UE())throw new U(400,!1);OR(),LE=n;let e=n.get(hk);return l$(n),e}function VE(n,e,t=[]){let r=`Platform: ${e}`,i=new Q(r);return(s=[])=>{let o=UE();if(!o){let a=[...t,...s,{provide:i,useValue:!0}];o=n?.(a)??o$(a$(a,r))}return c$(i)}}function a$(n=[],e){return qe.create({name:e,providers:[{provide:Jl,useValue:"platform"},{provide:Fp,useValue:new Set([()=>LE=null])},...n]})}function c$(n){let e=UE();if(!e)throw new U(-401,!1);return e}function UE(){return LE?.get(hk)??null}function l$(n){let e=n.get(hp,null);Tt(n,()=>{e?.forEach(t=>t())})}function BE(){return!1}var Ft=(()=>{class n{static __NG_ELEMENT_ID__=u$}return n})();function u$(n){return d$(vn(),De(),(n&16)===16)}function d$(n,e,t){if(vs(n)&&!t){let r=Jn(n.index,e);return new ys(r,r)}else if(n.type&175){let r=e[Cn];return new ys(r,e)}return null}var PE=class{constructor(){}supports(e){return EE(e)}create(e){return new NE(e)}},h$=(n,e)=>e,NE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||h$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<rk(r,i,s)?t:r,a=rk(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,d=c-i;if(u!=d){for(let g=0;g<u;g++){let _=g<s.length?s[g]:s[g]=0,I=_+g;d<=I&&I<u&&(s[g]=_+1)}let f=o.previousIndex;s[f]=d-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!EE(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,yR(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new ME(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Lp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Lp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ME=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},OE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Lp=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new OE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function rk(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function ik(){return new Vp([new PE])}var Vp=(()=>{class n{factories;static \u0275prov=q({token:n,providedIn:"root",factory:ik});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=F(n,{optional:!0,skipSelf:!0});return n.create(t,r||ik())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new U(901,!1)}}return n})();var fk=VE(null,"core",[]),pk=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(re(tr))};static \u0275mod=ht({type:n});static \u0275inj=ct({})}return n})();function Ao(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function jE(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function mk(n,e){let t=Ur(n),r=e.elementInjector||Ua();return new Es(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function gk(n){let e=Ur(n);if(!e)return null;let t=new Es(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var yk=null;function Un(){return yk}function $E(n){yk??=n}var Su=class{},Cu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(Ek),providedIn:"platform"})}return n})(),HE=new Q(""),Ek=(()=>{class n extends Cu{_location;_history;_doc=F(Xe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Un().getBaseHref(this._doc)}onPopState(t){let r=Un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Up(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function vk(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Ir(n){return n&&n[0]!=="?"?`?${n}`:n}var Si=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(jp),providedIn:"root"})}return n})(),Bp=new Q(""),jp=(()=>{class n extends Si{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(Xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Up(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ir(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ir(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ir(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(re(Cu),re(Bp,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cs=(()=>{class n{_subject=new Ee;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=m$(vk(_k(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ir(r))}normalize(t){return n.stripTrailingSlash(p$(this._basePath,_k(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ir(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ir(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ir;static joinWithSlash=Up;static stripTrailingSlash=vk;static \u0275fac=function(r){return new(r||n)(re(Si))};static \u0275prov=q({token:n,factory:()=>f$(),providedIn:"root"})}return n})();function f$(){return new Cs(re(Si))}function p$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function _k(n){return n.replace(/\/index.html$/,"")}function m$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var ZE=(()=>{class n extends Si{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Up(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ir(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ir(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(re(Cu),re(Bp,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();var XE=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(XE||{});var nn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(nn||{}),Qe=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Qe||{}),xn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(xn||{}),Rn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Tk(n){return An(n)[dt.LocaleId]}function Dk(n,e,t){let r=An(n),i=[r[dt.DayPeriodsFormat],r[dt.DayPeriodsStandalone]],s=nr(i,e);return nr(s,t)}function Ak(n,e,t){let r=An(n),i=[r[dt.DaysFormat],r[dt.DaysStandalone]],s=nr(i,e);return nr(s,t)}function xk(n,e,t){let r=An(n),i=[r[dt.MonthsFormat],r[dt.MonthsStandalone]],s=nr(i,e);return nr(s,t)}function Rk(n,e){let r=An(n)[dt.Eras];return nr(r,e)}function Tu(n,e){let t=An(n);return nr(t[dt.DateFormat],e)}function Du(n,e){let t=An(n);return nr(t[dt.TimeFormat],e)}function Au(n,e){let r=An(n)[dt.DateTimeFormat];return nr(r,e)}function Wr(n,e){let t=An(n),r=t[dt.NumberSymbols][e];if(typeof r>"u"){if(e===Rn.CurrencyDecimal)return t[dt.NumberSymbols][Rn.Decimal];if(e===Rn.CurrencyGroup)return t[dt.NumberSymbols][Rn.Group]}return r}function kk(n,e){return An(n)[dt.NumberFormats][e]}function Pk(n){if(!n[dt.ExtraData])throw new U(2303,!1)}function Nk(n){let e=An(n);return Pk(e),(e[dt.ExtraData][2]||[]).map(r=>typeof r=="string"?GE(r):[GE(r[0]),GE(r[1])])}function Mk(n,e,t){let r=An(n);Pk(r);let i=[r[dt.ExtraData][0],r[dt.ExtraData][1]],s=nr(i,e)||[];return nr(s,t)||[]}function nr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new U(2304,!1)}function GE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var g$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,$p={},v$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Ok(n,e,t,r){let i=T$(n);e=Ci(t,e)||e;let o=[],a;for(;e;)if(a=v$.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=Lk(r,c),i=C$(i,r));let u="";return o.forEach(d=>{let f=I$(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Wp(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ci(n,e){let t=Tk(n);if($p[t]??={},$p[t][e])return $p[t][e];let r="";switch(e){case"shortDate":r=Tu(n,xn.Short);break;case"mediumDate":r=Tu(n,xn.Medium);break;case"longDate":r=Tu(n,xn.Long);break;case"fullDate":r=Tu(n,xn.Full);break;case"shortTime":r=Du(n,xn.Short);break;case"mediumTime":r=Du(n,xn.Medium);break;case"longTime":r=Du(n,xn.Long);break;case"fullTime":r=Du(n,xn.Full);break;case"short":let i=Ci(n,"shortTime"),s=Ci(n,"shortDate");r=Hp(Au(n,xn.Short),[i,s]);break;case"medium":let o=Ci(n,"mediumTime"),a=Ci(n,"mediumDate");r=Hp(Au(n,xn.Medium),[o,a]);break;case"long":let c=Ci(n,"longTime"),u=Ci(n,"longDate");r=Hp(Au(n,xn.Long),[c,u]);break;case"full":let d=Ci(n,"fullTime"),f=Ci(n,"fullDate");r=Hp(Au(n,xn.Full),[d,f]);break}return r&&($p[t][e]=r),r}function Hp(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Sr(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function _$(n,e){return Sr(n,3).substring(0,e)}function xt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=y$(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return _$(a,e);let c=Wr(o,Rn.MinusSign);return Sr(a,e,c,r,i)}}function y$(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new U(2301,!1)}}function rt(n,e,t=nn.Format,r=!1){return function(i,s){return E$(i,s,n,e,t,r)}}function E$(n,e,t,r,i,s){switch(t){case 2:return xk(e,i,r)[n.getMonth()];case 1:return Ak(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let u=Nk(e),d=Mk(e,i,r),f=u.findIndex(g=>{if(Array.isArray(g)){let[_,I]=g,x=o>=_.hours&&a>=_.minutes,P=o<I.hours||o===I.hours&&a<I.minutes;if(_.hours<I.hours){if(x&&P)return!0}else if(x||P)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return Dk(e,i,r)[o<12?0:1];case 3:return Rk(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new U(2302,!1)}}function Gp(n){return function(e,t,r){let i=-1*r,s=Wr(t,Rn.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Sr(o,2,s)+Sr(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Sr(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Sr(o,2,s)+":"+Sr(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Sr(o,2,s)+":"+Sr(Math.abs(i%60),2,s);default:throw new U(2310,!1)}}}var b$=0,qp=4;function w$(n){let e=Wp(n,b$,1).getDay();return Wp(n,0,1+(e<=qp?qp:qp+7)-e)}function Fk(n){let e=n.getDay(),t=e===0?-3:qp-e;return Wp(n.getFullYear(),n.getMonth(),n.getDate()+t)}function zE(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=Fk(t),o=w$(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Sr(i,n,Wr(r,Rn.MinusSign))}}function zp(n,e=!1){return function(t,r){let s=Fk(t).getFullYear();return Sr(s,n,Wr(r,Rn.MinusSign),e)}}var qE={};function I$(n){if(qE[n])return qE[n];let e;switch(n){case"G":case"GG":case"GGG":e=rt(3,Qe.Abbreviated);break;case"GGGG":e=rt(3,Qe.Wide);break;case"GGGGG":e=rt(3,Qe.Narrow);break;case"y":e=xt(0,1,0,!1,!0);break;case"yy":e=xt(0,2,0,!0,!0);break;case"yyy":e=xt(0,3,0,!1,!0);break;case"yyyy":e=xt(0,4,0,!1,!0);break;case"Y":e=zp(1);break;case"YY":e=zp(2,!0);break;case"YYY":e=zp(3);break;case"YYYY":e=zp(4);break;case"M":case"L":e=xt(1,1,1);break;case"MM":case"LL":e=xt(1,2,1);break;case"MMM":e=rt(2,Qe.Abbreviated);break;case"MMMM":e=rt(2,Qe.Wide);break;case"MMMMM":e=rt(2,Qe.Narrow);break;case"LLL":e=rt(2,Qe.Abbreviated,nn.Standalone);break;case"LLLL":e=rt(2,Qe.Wide,nn.Standalone);break;case"LLLLL":e=rt(2,Qe.Narrow,nn.Standalone);break;case"w":e=zE(1);break;case"ww":e=zE(2);break;case"W":e=zE(1,!0);break;case"d":e=xt(2,1);break;case"dd":e=xt(2,2);break;case"c":case"cc":e=xt(7,1);break;case"ccc":e=rt(1,Qe.Abbreviated,nn.Standalone);break;case"cccc":e=rt(1,Qe.Wide,nn.Standalone);break;case"ccccc":e=rt(1,Qe.Narrow,nn.Standalone);break;case"cccccc":e=rt(1,Qe.Short,nn.Standalone);break;case"E":case"EE":case"EEE":e=rt(1,Qe.Abbreviated);break;case"EEEE":e=rt(1,Qe.Wide);break;case"EEEEE":e=rt(1,Qe.Narrow);break;case"EEEEEE":e=rt(1,Qe.Short);break;case"a":case"aa":case"aaa":e=rt(0,Qe.Abbreviated);break;case"aaaa":e=rt(0,Qe.Wide);break;case"aaaaa":e=rt(0,Qe.Narrow);break;case"b":case"bb":case"bbb":e=rt(0,Qe.Abbreviated,nn.Standalone,!0);break;case"bbbb":e=rt(0,Qe.Wide,nn.Standalone,!0);break;case"bbbbb":e=rt(0,Qe.Narrow,nn.Standalone,!0);break;case"B":case"BB":case"BBB":e=rt(0,Qe.Abbreviated,nn.Format,!0);break;case"BBBB":e=rt(0,Qe.Wide,nn.Format,!0);break;case"BBBBB":e=rt(0,Qe.Narrow,nn.Format,!0);break;case"h":e=xt(3,1,-12);break;case"hh":e=xt(3,2,-12);break;case"H":e=xt(3,1);break;case"HH":e=xt(3,2);break;case"m":e=xt(4,1);break;case"mm":e=xt(4,2);break;case"s":e=xt(5,1);break;case"ss":e=xt(5,2);break;case"S":e=xt(6,1);break;case"SS":e=xt(6,2);break;case"SSS":e=xt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Gp(0);break;case"ZZZZZ":e=Gp(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Gp(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Gp(2);break;default:return null}return qE[n]=e,e}function Lk(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function S$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function C$(n,e,t){let i=n.getTimezoneOffset(),s=Lk(e,i);return S$(n,-1*(s-i))}function T$(n){if(bk(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return Wp(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(g$))return D$(r)}let e=new Date(n);if(!bk(e))throw new U(2311,!1);return e}function D$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,u),e}function bk(n){return n instanceof Date&&!isNaN(n.valueOf())}var A$=/^(\d+)?\.((\d+)(-(\d+))?)?$/,wk=22,Kp=".",xu="0",x$=";",R$=",",WE="#";function k$(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=Wr(t,Rn.Infinity);else{let u=M$(n);o&&(u=N$(u));let d=e.minInt,f=e.minFrac,g=e.maxFrac;if(s){let Y=s.match(A$);if(Y===null)throw new U(2306,!1);let ee=Y[1],he=Y[3],We=Y[5];ee!=null&&(d=KE(ee)),he!=null&&(f=KE(he)),We!=null?g=KE(We):he!=null&&f>g&&(g=f)}O$(u,f,g);let _=u.digits,I=u.integerLen,x=u.exponent,P=[];for(c=_.every(Y=>!Y);I<d;I++)_.unshift(0);for(;I<0;I++)_.unshift(0);I>0?P=_.splice(I,_.length):(P=_,_=[0]);let B=[];for(_.length>=e.lgSize&&B.unshift(_.splice(-e.lgSize,_.length).join(""));_.length>e.gSize;)B.unshift(_.splice(-e.gSize,_.length).join(""));_.length&&B.unshift(_.join("")),a=B.join(Wr(t,r)),P.length&&(a+=Wr(t,i)+P.join("")),x&&(a+=Wr(t,Rn.Exponential)+"+"+x)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function Vk(n,e,t){let r=kk(e,XE.Decimal),i=P$(r,Wr(e,Rn.MinusSign));return k$(n,i,e,Rn.Group,Rn.Decimal,t)}function P$(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(x$),i=r[0],s=r[1],o=i.indexOf(Kp)!==-1?i.split(Kp):[i.substring(0,i.lastIndexOf(xu)+1),i.substring(i.lastIndexOf(xu)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(WE));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===xu?t.minFrac=t.maxFrac=d+1:f===WE?t.maxFrac=d+1:t.posSuf+=f}let u=a.split(R$);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){let d=i.length-t.posPre.length-t.posSuf.length,f=s.indexOf(WE);t.negPre=s.substring(0,f).replace(/'/g,""),t.negSuf=s.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function N$(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function M$(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(Kp))>-1&&(e=e.replace(Kp,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===xu;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===xu;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>wk&&(r=r.splice(0,wk-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function O$(n,e,t){if(e>t)throw new U(2307,!1);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let f=o;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let f=1;f<o;f++)r[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,u=e+n.integerLen,d=r.reduceRight(function(f,g,_,I){return g=g+f,I[_]=g<10?g:g-10,c&&(I[_]===0&&_>=u?I.pop():c=!1),g>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function KE(n){let e=parseInt(n);if(isNaN(e))throw new U(2305,!1);return e}var YE=/\s+/,Ik=[],Ti=(()=>{class n{_ngEl;_renderer;initialClasses=Ik;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(YE):Ik}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(YE):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(YE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(se(Yt),se(wi))};static \u0275dir=Ut({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Yp=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},rr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Yp(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),Sk(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Sk(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(se(er),se(wr),se(Vp))};static \u0275dir=Ut({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Sk(n,e){n.context.$implicit=e.item}var Bn=(()=>{class n{_viewContainer;_context=new Qp;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ck(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ck(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(se(er),se(wr))};static \u0275dir=Ut({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Qp=class{$implicit=null;ngIf=null};function Ck(n,e){if(n&&!n.createEmbeddedView)throw new U(2020,!1)}function eb(n,e){return new U(2100,!1)}var QE=class{createSubscription(e,t,r){return St(()=>e.subscribe({next:t,error:r}))}dispose(e){St(()=>e.unsubscribe())}},JE=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},F$=new JE,L$=new QE,tb=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=F(Xn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Ii(t))return F$;if(Dp(t))return L$;throw eb(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(se(Ft,16))};static \u0275pipe=_u({name:"async",type:n,pure:!1})}return n})();var V$="mediumDate",Uk=new Q(""),Bk=new Q(""),nb=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??V$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Ok(t,o,s||this.locale,a)}catch(o){throw eb(n,o.message)}}static \u0275fac=function(r){return new(r||n)(se(Is,16),se(Uk,24),se(Bk,24))};static \u0275pipe=_u({name:"date",type:n,pure:!0})}return n})();var Cr=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!U$(t))return null;i||=this._locale;try{let s=B$(t);return Vk(s,i,r)}catch(s){throw eb(n,s.message)}}static \u0275fac=function(r){return new(r||n)(se(Is,16))};static \u0275pipe=_u({name:"number",type:n,pure:!0})}return n})();function U$(n){return!(n==null||n===""||n!==n)}function B$(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new U(2309,!1);return n}var Ru=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=ct({})}return n})();function rb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var ku=class{};function jk(n,e,t){return xE(n,e,t)}var sb="browser";function $k(n){return n===sb}var Hk=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new ib(F(Xe),window)})}return n})(),ib=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ne(O({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=j$(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(ds(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(ne(O({},t),{left:i-o[0],top:s-o[1]}))}};function j$(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Pu=class{_doc;constructor(e){this._doc=e}manager},Jp=(()=>{class n extends Pu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(re(Xe))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),em=new Q(""),lb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Jp));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Jp);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(re(em),re(Me))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),ob="ng-app-id";function Gk(n){for(let e of n)e.remove()}function zk(n,e){let t=e.createElement("style");return t.textContent=n,t}function $$(n,e,t,r){let i=n.head?.querySelectorAll(`style[${ob}="${e}"],link[${ob}="${e}"]`);if(i)for(let s of i)s.removeAttribute(ob),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function cb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var ub=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,$$(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,zk);r?.forEach(i=>this.addUsage(i,this.external,cb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Gk(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Gk(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,zk(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,cb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(re(Xe),re(dp),re(pp,8),re(bi))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),ab={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},db=/%COMP%/g;var Wk="%COMP%",H$=`_nghost-${Wk}`,G$=`_ngcontent-${Wk}`,z$=!0,q$=new Q("",{factory:()=>z$});function W$(n){return G$.replace(db,n)}function K$(n){return H$.replace(db,n)}function Kk(n,e){return e.map(t=>t.replace(db,n))}var Ou=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Nu(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Xp?i.applyToHost(t):i instanceof Mu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case br.Emulated:s=new Xp(c,u,r,this.appId,d,o,a,f,g);break;case br.ShadowDom:return new Zp(c,t,r,o,a,this.nonce,f,g,u);case br.ExperimentalIsolatedShadowDom:return new Zp(c,t,r,o,a,this.nonce,f,g);default:s=new Mu(c,u,r,d,o,a,f,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(re(lb),re(ub),re(dp),re(q$),re(Xe),re(Me),re(pp),re(Eo,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Nu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(ab[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qk(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qk(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=ab[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ab[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(zr.DashCase|zr.Important)?e.style.setProperty(t,r,i&zr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&zr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Un().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function qk(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Zp=class extends Nu{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,u){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=Kk(r.id,d);for(let g of d){let _=document.createElement("style");o&&_.setAttribute("nonce",o),_.textContent=g,this.shadowRoot.appendChild(_)}let f=r.getExternalStyles?.();if(f)for(let g of f){let _=cb(g,i);o&&_.setAttribute("nonce",o),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Mu=class extends Nu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,u){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?Kk(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Xa.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Xp=class extends Mu{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,u){let d=i+"-"+r.id;super(e,t,r,s,o,a,c,u,d),this.contentAttr=W$(d),this.hostAttr=K$(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var tm=class n extends Su{supportsDOMEvents=!0;static makeCurrent(){$E(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Y$();return t==null?null:Q$(t)}resetBaseElement(){Fu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rb(document.cookie,e)}},Fu=null;function Y$(){return Fu=Fu||document.head.querySelector("base"),Fu?Fu.getAttribute("href"):null}function Q$(n){return new URL(n,document.baseURI).pathname}var nm=class{addToWindow(e){pn.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new U(5103,!1);return s},pn.getAllAngularTestabilities=()=>e.getAllTestabilities(),pn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=pn.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};pn.frameworkStabilizers||(pn.frameworkStabilizers=[]),pn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Un().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},J$=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Yk=["alt","control","meta","shift"],Z$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},X$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Qk=(()=>{class n extends Pu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Un().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Yk.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=Z$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Yk.forEach(o=>{if(o!==i){let a=X$[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(re(Xe))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function eH(){tm.makeCurrent()}function tH(){return new Vr}function nH(){return eE(document),document}var rH=[{provide:bi,useValue:sb},{provide:hp,useValue:eH,multi:!0},{provide:Xe,useFactory:nH}],hb=VE(fk,"browser",rH);var iH=[{provide:Tp,useClass:nm},{provide:Cp,useClass:yu},{provide:yu,useClass:yu}],sH=[{provide:Jl,useValue:"root"},{provide:Vr,useFactory:tH},{provide:em,useClass:Jp,multi:!0},{provide:em,useClass:Qk,multi:!0},Ou,ub,lb,{provide:Tn,useExisting:Ou},{provide:ku,useClass:J$},[]],Lu=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=ct({providers:[...sH,...iH],imports:[Ru,pk]})}return n})();var Jk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(re(Xe))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pe=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(pe||{}),ir="*";function Ro(n,e){return{type:pe.Trigger,name:n,definitions:e,options:{}}}function ko(n,e=null){return{type:pe.Animate,styles:e,timings:n}}function Xk(n,e=null){return{type:pe.Sequence,steps:n,options:e}}function rn(n){return{type:pe.Style,styles:n,offset:null}}function rm(n,e,t){return{type:pe.State,name:n,styles:e,options:t}}function fb(n){return{type:pe.Keyframes,steps:n}}function Po(n,e,t=null){return{type:pe.Transition,expr:n,animation:e,options:t}}function pb(n,e,t=null){return{type:pe.Query,selector:n,animation:e,options:t}}function mb(n,e){return{type:pe.Stagger,timings:n,animation:e}}var Kr=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},xo=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},cc="!";function eP(n){return new U(3e3,!1)}function oH(){return new U(3100,!1)}function aH(){return new U(3101,!1)}function cH(n){return new U(3001,!1)}function lH(n){return new U(3003,!1)}function uH(n){return new U(3004,!1)}function nP(n,e){return new U(3005,!1)}function rP(){return new U(3006,!1)}function iP(){return new U(3007,!1)}function sP(n,e){return new U(3008,!1)}function oP(n){return new U(3002,!1)}function aP(n,e,t,r,i){return new U(3010,!1)}function cP(){return new U(3011,!1)}function lP(){return new U(3012,!1)}function uP(){return new U(3200,!1)}function dP(){return new U(3202,!1)}function hP(){return new U(3013,!1)}function fP(n){return new U(3014,!1)}function pP(n){return new U(3015,!1)}function mP(n){return new U(3016,!1)}function gP(n,e){return new U(3404,!1)}function dH(n){return new U(3502,!1)}function vP(n){return new U(3503,!1)}function _P(){return new U(3300,!1)}function yP(n){return new U(3504,!1)}function EP(n){return new U(3301,!1)}function bP(n,e){return new U(3302,!1)}function wP(n){return new U(3303,!1)}function IP(n,e){return new U(3400,!1)}function SP(n){return new U(3401,!1)}function CP(n){return new U(3402,!1)}function TP(n,e){return new U(3505,!1)}function Di(n){switch(n.length){case 0:return new Kr;case 1:return n[0];default:return new xo(n)}}function yb(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),d=u==o,f=d&&a||new Map;c.forEach((g,_)=>{let I=_,x=g;if(_!=="offset")switch(I=n.normalizePropertyName(I,i),x){case cc:x=t.get(_);break;case ir:x=r.get(_);break;default:x=n.normalizeStyleValue(_,I,x,i);break}f.set(I,x)}),d||s.push(f),a=f,o=u}),i.length)throw dH(i);return s}function im(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&gb(t,"start",n)));break;case"done":n.onDone(()=>r(t&&gb(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&gb(t,"destroy",n)));break}}function gb(n,e,t){let r=t.totalTime,i=!!t.disabled,s=sm(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function sm(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function kn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Eb(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var hH=typeof document>"u"?null:document.documentElement;function om(n){let e=n.parentNode||n.host||null;return e===hH?null:e}function fH(n){return n.substring(1,6)=="ebkit"}var No=null,tP=!1;function DP(n){No||(No=pH()||{},tP=No.style?"WebkitAppearance"in No.style:!1);let e=!0;return No.style&&!fH(n)&&(e=n in No.style,!e&&tP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in No.style)),e}function pH(){return typeof document<"u"?document.body:null}function bb(n,e){for(;e;){if(e===n)return!0;e=om(e)}return!1}function wb(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var mH=1e3,Ib="{{",gH="}}",Sb="ng-enter",am="ng-leave",Vu="ng-trigger",Uu=".ng-trigger",Cb="ng-animating",cm=".ng-animating";function Yr(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:vb(parseFloat(e[1]),e[2])}function vb(n,e){switch(e){case"s":return n*mH;default:return n}}function Bu(n,e,t){return n.hasOwnProperty("duration")?n:_H(n,e,t)}var vH=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function _H(n,e,t){let r,i=0,s="";if(typeof n=="string"){let o=n.match(vH);if(o===null)return e.push(eP(n)),{duration:0,delay:0,easing:""};r=vb(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(i=vb(parseFloat(a),o[4]));let c=o[5];c&&(s=c)}else r=n;if(!t){let o=!1,a=e.length;r<0&&(e.push(oH()),o=!0),i<0&&(e.push(aH()),o=!0),o&&e.splice(a,0,eP(n))}return{duration:r,delay:i,easing:s}}function AP(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Tr(n,e,t){e.forEach((r,i)=>{let s=lm(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Ts(n,e){e.forEach((t,r)=>{let i=lm(r);n.style[i]=""})}function lc(n){return Array.isArray(n)?n.length==1?n[0]:Xk(n):n}function xP(n,e,t){let r=e.params||{},i=Tb(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(cH(s))})}var _b=new RegExp(`${Ib}\\s*(.+?)\\s*${gH}`,"g");function Tb(n){let e=[];if(typeof n=="string"){let t;for(;t=_b.exec(n);)e.push(t[1]);_b.lastIndex=0}return e}function uc(n,e,t){let r=`${n}`,i=r.replace(_b,(s,o)=>{let a=e[o];return a==null&&(t.push(lH(o)),a=""),a.toString()});return i==r?n:i}var yH=/-+([a-z0-9])/g;function lm(n){return n.replace(yH,(...e)=>e[1].toUpperCase())}function RP(n,e){return n===0||e===0}function kP(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,um(n,a)))}}return e}function Pn(n,e,t){switch(e.type){case pe.Trigger:return n.visitTrigger(e,t);case pe.State:return n.visitState(e,t);case pe.Transition:return n.visitTransition(e,t);case pe.Sequence:return n.visitSequence(e,t);case pe.Group:return n.visitGroup(e,t);case pe.Animate:return n.visitAnimate(e,t);case pe.Keyframes:return n.visitKeyframes(e,t);case pe.Style:return n.visitStyle(e,t);case pe.Reference:return n.visitReference(e,t);case pe.AnimateChild:return n.visitAnimateChild(e,t);case pe.AnimateRef:return n.visitAnimateRef(e,t);case pe.Query:return n.visitQuery(e,t);case pe.Stagger:return n.visitStagger(e,t);default:throw uH(e.type)}}function um(n,e){return window.getComputedStyle(n)[e]}var Hb=(()=>{class n{validateStyleProperty(t){return DP(t)}containsElement(t,r){return bb(t,r)}getParentElement(t){return om(t)}query(t,r,i){return wb(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Kr(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Oo=class{static NOOP=new Hb},Fo=class{};var EH=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),mm=class extends Fo{normalizePropertyName(e,t){return lm(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(EH.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(nP(e,r))}return o+s}};var gm="*";function bH(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>wH(r,t,e)):t.push(n),t}function wH(n,e,t){if(n[0]==":"){let c=IH(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(pP(n)),e;let i=r[1],s=r[2],o=r[3];e.push(PP(i,o));let a=i==gm&&o==gm;s[0]=="<"&&!a&&e.push(PP(o,i))}function IH(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(mP(n)),"* => *"}}var dm=new Set(["true","1"]),hm=new Set(["false","0"]);function PP(n,e){let t=dm.has(n)||hm.has(n),r=dm.has(e)||hm.has(e);return(i,s)=>{let o=n==gm||n==i,a=e==gm||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?dm.has(n):hm.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?dm.has(e):hm.has(e)),o&&a}}var $P=":self",SH=new RegExp(`s*${$P}s*,?`,"g");function HP(n,e,t,r){return new Pb(n).build(e,t,r)}var NP="",Pb=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new Nb(t);return this._resetContextStyleTimingState(i),Pn(this,lc(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=NP,e.collectedStyles=new Map,e.collectedStyles.set(NP,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(rP()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==pe.State){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,s.push(this.visitState(c,t))}),c.name=u}else if(a.type==pe.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(iP())}),{type:pe.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Tb(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&t.errors.push(sP(e.name,[...s.values()]))}return{type:pe.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Pn(this,lc(e.animation),t),i=bH(e.expr,t.errors);return{type:pe.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Mo(e.options)}}visitSequence(e,t){return{type:pe.Sequence,steps:e.steps.map(r=>Pn(this,r,t)),options:Mo(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=Pn(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:pe.Group,steps:s,options:Mo(e.options)}}visitAnimate(e,t){let r=AH(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:rn({});if(s.type==pe.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let u={};r.easing&&(u.easing=r.easing),o=rn(u)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:pe.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===ir?r.push(a):t.errors.push(oP(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(Ib)>=0){s=!0;break}}}),{type:pe.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let u=t.collectedStyles.get(t.currentQuerySelector),d=u.get(c),f=!0;d&&(s!=i&&s>=d.startTime&&i<=d.endTime&&(t.errors.push(aP(c,d.startTime,d.endTime,s,i)),f=!1),s=d.startTime),f&&u.set(c,{startTime:s,endTime:i}),t.options&&xP(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:pe.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(cP()),r;let i=1,s=0,o=[],a=!1,c=!1,u=0,d=e.steps.map(B=>{let Y=this._makeStyleAst(B,t),ee=Y.offset!=null?Y.offset:DH(Y.styles),he=0;return ee!=null&&(s++,he=Y.offset=ee),c=c||he<0||he>1,a=a||he<u,u=he,o.push(he),Y});c&&t.errors.push(lP()),a&&t.errors.push(uP());let f=e.steps.length,g=0;s>0&&s<f?t.errors.push(dP()):s==0&&(g=i/(f-1));let _=f-1,I=t.currentTime,x=t.currentAnimateTimings,P=x.duration;return d.forEach((B,Y)=>{let ee=g>0?Y==_?1:g*Y:o[Y],he=ee*P;t.currentTime=I+x.delay+he,x.duration=he,this._validateStyleAst(B,t),B.offset=ee,r.styles.push(B)}),r}visitReference(e,t){return{type:pe.Reference,animation:Pn(this,lc(e.animation),t),options:Mo(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:pe.AnimateChild,options:Mo(e.options)}}visitAnimateRef(e,t){return{type:pe.AnimateRef,animation:this.visitReference(e.animation,t),options:Mo(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=CH(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,kn(t.collectedStyles,t.currentQuerySelector,new Map);let a=Pn(this,lc(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:pe.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Mo(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(hP());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Bu(e.timings,t.errors,!0);return{type:pe.Stagger,animation:Pn(this,lc(e.animation),t),timings:r,options:null}}};function CH(n){let e=!!n.split(/\s*,\s*/).find(t=>t==$P);return e&&(n=n.replace(SH,"")),n=n.replace(/@\*/g,Uu).replace(/@\w+/g,t=>Uu+"-"+t.slice(1)).replace(/:animating/g,cm),[n,e]}function TH(n){return n?O({},n):null}var Nb=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function DH(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function AH(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Bu(n,e).duration;return Db(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Db(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Bu(t,e);return Db(i.duration,i.delay,i.easing)}function Mo(n){return n?(n=O({},n),n.params&&(n.params=TH(n.params))):n={},n}function Db(n,e,t){return{duration:n,delay:e,easing:t}}function Gb(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var $u=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},xH=1,RH=":enter",kH=new RegExp(RH,"g"),PH=":leave",NH=new RegExp(PH,"g");function GP(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return new Mb().buildKeyframes(n,e,t,r,i,s,o,a,c,u)}var Mb=class{buildKeyframes(e,t,r,i,s,o,a,c,u,d=[]){u=u||new $u;let f=new Ob(e,t,u,i,s,d,[]);f.options=c;let g=c.delay?Yr(c.delay):0;f.currentTimeline.delayNextStep(g),f.currentTimeline.setStyles([o],null,f.errors,c),Pn(this,r,f);let _=f.timelines.filter(I=>I.containsAnimation());if(_.length&&a.size){let I;for(let x=_.length-1;x>=0;x--){let P=_[x];if(P.element===t){I=P;break}}I&&!I.allowOnlyTimelineStyles()&&I.setStyles([a],null,f.errors,c)}return _.length?_.map(I=>I.buildKeyframes()):[Gb(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Yr(uc(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Yr(r.duration):null,a=r.delay!=null?Yr(r.delay):null;return o!==0&&e.forEach(c=>{let u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Pn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==pe.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=vm);let o=Yr(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Pn(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Yr(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),Pn(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?uc(r,t.params,t.errors):r;return Bu(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==pe.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Yr(i.delay):0;s&&(t.previousNode.type===pe.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vm);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,d)=>{t.currentQueryIndex=d;let f=t.createSubContext(e.options,u);s&&f.delayNextStep(s),u===t.element&&(c=f.currentTimeline),Pn(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let g=f.currentTimeline.currentTime;o=Math.max(o,g)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let d=t.currentTimeline;c&&d.delayNextStep(c);let f=d.currentTime;Pn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},vm={},Ob=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=vm;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=c||new _m(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Yr(r.duration)),r.delay!=null&&(i.delay=Yr(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=uc(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=vm,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Fb(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(kH,"."+this._enterClassName),e=e.replace(NH,"."+this._leaveClassName);let c=r!=1,u=this._driver.query(this.element,e,c);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&a.length==0&&o.push(fP(t)),a}},_m=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=xH,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ir),this._currentKeyframe.set(t,ir);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=MH(e,this._globalTimelineStyles);for(let[a,c]of o){let u=uc(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ir),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let u=new Map([...this._backFill,...a]);u.forEach((d,f)=>{d===cc?e.add(f):d===ir&&t.add(f)}),r||u.set("offset",c/this.duration),i.push(u)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return Gb(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},Fb=class extends _m{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let u=new Map(e[0]);u.set("offset",MP(a)),s.push(u);let d=e.length-1;for(let f=1;f<=d;f++){let g=new Map(e[f]),_=g.get("offset"),I=t+_*r;g.set("offset",MP(I/o)),s.push(g)}r=o,t=0,i="",e=s}return Gb(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function MP(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function MH(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,ir)}else for(let[s,o]of i)t.set(s,o)}),t}function OP(n,e,t,r,i,s,o,a,c,u,d,f,g){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:d,totalTime:f,errors:g}}var Ab={},ym=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return OH(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,d){let f=[],g=this.ast.options&&this.ast.options.params||Ab,_=a&&a.params||Ab,I=this.buildStyles(r,_,f),x=c&&c.params||Ab,P=this.buildStyles(i,x,f),B=new Set,Y=new Map,ee=new Map,he=i==="void",We={params:zP(x,g),delay:this.ast.options?.delay},Ce=d?[]:GP(e,t,this.ast.animation,s,o,I,P,We,u,f),T=0;return Ce.forEach(w=>{T=Math.max(w.duration+w.delay,T)}),f.length?OP(t,this._triggerName,r,i,he,I,P,[],[],Y,ee,T,f):(Ce.forEach(w=>{let S=w.element,D=kn(Y,S,new Set);w.preStyleProps.forEach(N=>D.add(N));let A=kn(ee,S,new Set);w.postStyleProps.forEach(N=>A.add(N)),S!==t&&B.add(S)}),OP(t,this._triggerName,r,i,he,I,P,Ce,[...B.values()],Y,ee,T))}};function OH(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function zP(n,e){let t=O({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var Lb=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=zP(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=uc(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function FH(n,e,t){return new Vb(n,e,t)}var Vb=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new Lb(i.style,s,r))}),FP(this.states,"true","1"),FP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new ym(e,i,this.states))}),this.fallbackTransition=LH(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function LH(n,e,t){let r=[(o,a)=>!0],i={type:pe.Sequence,steps:[],options:null},s={type:pe.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new ym(n,s,e)}function FP(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var VH=new $u,Ub=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=HP(this._driver,t,r,i);if(r.length)throw vP(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=yb(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=GP(this._driver,t,s,Sb,am,new Map,new Map,r,VH,i),o.forEach(d=>{let f=kn(a,d.element,new Map);d.postStyleProps.forEach(g=>f.set(g,null))})):(i.push(_P()),o=[]),i.length)throw yP(i);a.forEach((d,f)=>{d.forEach((g,_)=>{d.set(_,this._driver.computeStyle(f,_,ir))})});let c=o.map(d=>{let f=a.get(d.element);return this._buildPlayer(d,new Map,f)}),u=Di(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw EP(e);return t}listen(e,t,r,i){let s=sm(t,"","","");return im(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},LP="ng-animate-queued",UH=".ng-animate-queued",xb="ng-animate-disabled",BH=".ng-animate-disabled",jH="ng-star-inserted",$H=".ng-star-inserted",HH=[],qP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},GH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Dr="__ng_removed",Hu=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=qH(i),r){let s=e,{value:o}=s,a=Pl(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},ju="void",Rb=new Hu(ju),Bb=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,sr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw bP(r,t);if(r==null||r.length==0)throw wP(t);if(!WH(r))throw IP(r,t);let s=kn(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=kn(this._engine.statesByElement,e,new Map);return a.has(t)||(sr(e,Vu),sr(e,Vu+"-"+t),a.set(t,Rb)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw SP(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Gu(this.id,t,e),a=this._engine.statesByElement.get(e);a||(sr(e,Vu),sr(e,Vu+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),u=new Hu(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=Rb),!(u.value===ju)&&c.value===u.value){if(!QH(c.params,u.params)){let x=[],P=s.matchStyles(c.value,c.params,x),B=s.matchStyles(u.value,u.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{Ts(e,P),Tr(e,B)})}return}let g=kn(this._engine.playersByElement,e,[]);g.forEach(x=>{x.namespaceId==this.id&&x.triggerName==t&&x.queued&&x.destroy()});let _=s.matchTransition(c.value,u.value,e,u.params),I=!1;if(!_){if(!i)return;_=s.fallbackTransition,I=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:_,fromState:c,toState:u,player:o,isFallbackTransition:I}),I||(sr(e,LP),o.onStart(()=>{dc(e,LP)})),o.onDone(()=>{let x=this.players.indexOf(o);x>=0&&this.players.splice(x,1);let P=this._engine.playersByElement.get(e);if(P){let B=P.indexOf(o);B>=0&&P.splice(B,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Uu,!0);r.forEach(i=>{if(i[Dr])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){let d=this.trigger(e,u,ju,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Di(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,u=r.get(o)||Rb,d=new Hu(ju),f=new Gu(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Dr];(!s||s===qP)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){sr(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=sm(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,im(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},jb=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new Bb(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(fm(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!fm(t))return;let s=t[Dr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),sr(e,xb)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),dc(e,xb))}removeNode(e,t,r){if(fm(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Dr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return fm(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Uu,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,cm,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Di(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Dr];if(t&&t.setForRemoval){if(e[Dr]=qP,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(xb)&&this.markElementAsDisabled(e,!1),this.driver.query(e,BH,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];sr(i,jH)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Di(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw CP(e)}_flushAnimations(e,t){let r=new $u,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,d=new Set;this.disabledNodes.forEach(te=>{d.add(te);let ie=this.driver.query(te,UH,!0);for(let ce=0;ce<ie.length;ce++)d.add(ie[ce])});let f=this.bodyNode,g=Array.from(this.statesByElement.keys()),_=BP(g,this.collectedEnterElements),I=new Map,x=0;_.forEach((te,ie)=>{let ce=Sb+x++;I.set(ie,ce),te.forEach(ke=>sr(ke,ce))});let P=[],B=new Set,Y=new Set;for(let te=0;te<this.collectedLeaveElements.length;te++){let ie=this.collectedLeaveElements[te],ce=ie[Dr];ce&&ce.setForRemoval&&(P.push(ie),B.add(ie),ce.hasAnimation?this.driver.query(ie,$H,!0).forEach(ke=>B.add(ke)):Y.add(ie))}let ee=new Map,he=BP(g,Array.from(B));he.forEach((te,ie)=>{let ce=am+x++;ee.set(ie,ce),te.forEach(ke=>sr(ke,ce))}),e.push(()=>{_.forEach((te,ie)=>{let ce=I.get(ie);te.forEach(ke=>dc(ke,ce))}),he.forEach((te,ie)=>{let ce=ee.get(ie);te.forEach(ke=>dc(ke,ce))}),P.forEach(te=>{this.processLeaveNode(te)})});let We=[],Ce=[];for(let te=this._namespaceList.length-1;te>=0;te--)this._namespaceList[te].drainQueuedTransitions(t).forEach(ce=>{let ke=ce.player,It=ce.element;if(We.push(ke),this.collectedEnterElements.length){let gt=It[Dr];if(gt&&gt.setForMove){if(gt.previousTriggersValues&&gt.previousTriggersValues.has(ce.triggerName)){let ui=gt.previousTriggersValues.get(ce.triggerName),wn=this.statesByElement.get(ce.element);if(wn&&wn.has(ce.triggerName)){let di=wn.get(ce.triggerName);di.value=ui,wn.set(ce.triggerName,di)}}ke.destroy();return}}let Kn=!f||!this.driver.containsElement(f,It),mt=ee.get(It),st=I.get(It),ot=this._buildInstruction(ce,r,st,mt,Kn);if(ot.errors&&ot.errors.length){Ce.push(ot);return}if(Kn){ke.onStart(()=>Ts(It,ot.fromStyles)),ke.onDestroy(()=>Tr(It,ot.toStyles)),i.push(ke);return}if(ce.isFallbackTransition){ke.onStart(()=>Ts(It,ot.fromStyles)),ke.onDestroy(()=>Tr(It,ot.toStyles)),i.push(ke);return}let Yi=[];ot.timelines.forEach(gt=>{gt.stretchStartingKeyframe=!0,this.disabledNodes.has(gt.element)||Yi.push(gt)}),ot.timelines=Yi,r.append(It,ot.timelines);let i_={instruction:ot,player:ke,element:It};o.push(i_),ot.queriedElements.forEach(gt=>kn(a,gt,[]).push(ke)),ot.preStyleProps.forEach((gt,ui)=>{if(gt.size){let wn=c.get(ui);wn||c.set(ui,wn=new Set),gt.forEach((di,Qi)=>wn.add(Qi))}}),ot.postStyleProps.forEach((gt,ui)=>{let wn=u.get(ui);wn||u.set(ui,wn=new Set),gt.forEach((di,Qi)=>wn.add(Qi))})});if(Ce.length){let te=[];Ce.forEach(ie=>{te.push(TP(ie.triggerName,ie.errors))}),We.forEach(ie=>ie.destroy()),this.reportError(te)}let T=new Map,w=new Map;o.forEach(te=>{let ie=te.element;r.has(ie)&&(w.set(ie,ie),this._beforeAnimationBuild(te.player.namespaceId,te.instruction,T))}),i.forEach(te=>{let ie=te.element;this._getPreviousPlayers(ie,!1,te.namespaceId,te.triggerName,null).forEach(ke=>{kn(T,ie,[]).push(ke),ke.destroy()})});let S=P.filter(te=>jP(te,c,u)),D=new Map;UP(D,this.driver,Y,u,ir).forEach(te=>{jP(te,c,u)&&S.push(te)});let N=new Map;_.forEach((te,ie)=>{UP(N,this.driver,new Set(te),c,cc)}),S.forEach(te=>{let ie=D.get(te),ce=N.get(te);D.set(te,new Map([...ie?.entries()??[],...ce?.entries()??[]]))});let C=[],Wn=[],Ki={};o.forEach(te=>{let{element:ie,player:ce,instruction:ke}=te;if(r.has(ie)){if(d.has(ie)){ce.onDestroy(()=>Tr(ie,ke.toStyles)),ce.disabled=!0,ce.overrideTotalTime(ke.totalTime),i.push(ce);return}let It=Ki;if(w.size>1){let mt=ie,st=[];for(;mt=mt.parentNode;){let ot=w.get(mt);if(ot){It=ot;break}st.push(mt)}st.forEach(ot=>w.set(ot,It))}let Kn=this._buildAnimation(ce.namespaceId,ke,T,s,N,D);if(ce.setRealPlayer(Kn),It===Ki)C.push(ce);else{let mt=this.playersByElement.get(It);mt&&mt.length&&(ce.parentPlayer=Di(mt)),i.push(ce)}}else Ts(ie,ke.fromStyles),ce.onDestroy(()=>Tr(ie,ke.toStyles)),Wn.push(ce),d.has(ie)&&i.push(ce)}),Wn.forEach(te=>{let ie=s.get(te.element);if(ie&&ie.length){let ce=Di(ie);te.setRealPlayer(ce)}}),i.forEach(te=>{te.parentPlayer?te.syncPlayerEvents(te.parentPlayer):te.destroy()});for(let te=0;te<P.length;te++){let ie=P[te],ce=ie[Dr];if(dc(ie,am),ce&&ce.hasAnimation)continue;let ke=[];if(a.size){let Kn=a.get(ie);Kn&&Kn.length&&ke.push(...Kn);let mt=this.driver.query(ie,cm,!0);for(let st=0;st<mt.length;st++){let ot=a.get(mt[st]);ot&&ot.length&&ke.push(...ot)}}let It=ke.filter(Kn=>!Kn.destroyed);It.length?KH(this,ie,It):this.processLeaveNode(ie)}return P.length=0,C.forEach(te=>{this.players.push(te),te.onDone(()=>{te.destroy();let ie=this.players.indexOf(te);this.players.splice(ie,1)}),te.play()}),C}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==ju;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let u=c.element,d=u!==s,f=kn(r,u,[]);this._getPreviousPlayers(u,d,o,a,t.toState).forEach(_=>{let I=_.getRealPlayer();I.beforeDestroy&&I.beforeDestroy(),_.destroy(),f.push(_)})}Ts(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,u=[],d=new Set,f=new Set,g=t.timelines.map(I=>{let x=I.element;d.add(x);let P=x[Dr];if(P&&P.removedBeforeQueried)return new Kr(I.duration,I.delay);let B=x!==c,Y=YH((r.get(x)||HH).map(T=>T.getRealPlayer())).filter(T=>{let w=T;return w.element?w.element===x:!1}),ee=s.get(x),he=o.get(x),We=yb(this._normalizer,I.keyframes,ee,he),Ce=this._buildPlayer(I,We,Y);if(I.subTimeline&&i&&f.add(x),B){let T=new Gu(e,a,x);T.setRealPlayer(Ce),u.push(T)}return Ce});u.forEach(I=>{kn(this.playersByQueriedElement,I.element,[]).push(I),I.onDone(()=>zH(this.playersByQueriedElement,I.element,I))}),d.forEach(I=>sr(I,Cb));let _=Di(g);return _.onDestroy(()=>{d.forEach(I=>dc(I,Cb)),Tr(c,t.toStyles)}),f.forEach(I=>{kn(i,I,[]).push(_)}),_}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Kr(e.duration,e.delay)}},Gu=class{namespaceId;triggerName;element;_player=new Kr;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>im(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){kn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function zH(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function qH(n){return n??null}function fm(n){return n&&n.nodeType===1}function WH(n){return n=="start"||n=="done"}function VP(n,e){let t=n.style.display;return n.style.display=e??"none",t}function UP(n,e,t,r,i){let s=[];t.forEach(c=>s.push(VP(c)));let o=[];r.forEach((c,u)=>{let d=new Map;c.forEach(f=>{let g=e.computeStyle(u,f,i);d.set(f,g),(!g||g.length==0)&&(u[Dr]=GH,o.push(u))}),n.set(u,d)});let a=0;return t.forEach(c=>VP(c,s[a++])),o}function BP(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let u=a.parentNode;return t.has(u)?c=u:i.has(u)?c=r:c=o(u),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function sr(n,e){n.classList?.add(e)}function dc(n,e){n.classList?.remove(e)}function KH(n,e,t){Di(t).onDone(()=>n.processLeaveNode(e))}function YH(n){let e=[];return WP(n,e),e}function WP(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof xo?WP(r.players,e):e.push(r)}}function QH(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function jP(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var hc=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new jb(e.body,t,r),this._timelineEngine=new Ub(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],u=[],d=HP(this._driver,s,c,u);if(c.length)throw gP(i,c);a=FH(i,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=Eb(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=Eb(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function JH(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=kb(e[0]),e.length>1&&(r=kb(e[e.length-1]))):e instanceof Map&&(t=kb(e)),t||r?new ZH(n,t,r):null}var ZH=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Tr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Tr(this._element,this._initialStyles),this._endStyles&&(Tr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ts(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ts(this._element,this._endStyles),this._endStyles=null),Tr(this._element,this._initialStyles),this._state=3)}}return n})();function kb(n){let e=null;return n.forEach((t,r)=>{XH(r)&&(e=e||new Map,e.set(r,t))}),e}function XH(n){return n==="display"||n==="position"}var Em=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:um(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},bm=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return bb(e,t)}getParentElement(e){return om(e)}query(e,t,r){return wb(e,t,r)}computeStyle(e,t,r){return um(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let u=new Map,d=o.filter(_=>_ instanceof Em);RP(r,i)&&d.forEach(_=>{_.currentSnapshot.forEach((I,x)=>u.set(x,I))});let f=AP(t).map(_=>new Map(_));f=kP(e,f,u);let g=JH(e,f);return new Em(e,f,c,g)}};var pm="@",KP="@.disabled",wm=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==pm&&t==KP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},$b=class extends wm{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==pm?t.charAt(1)=="."&&t==KP?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==pm){let s=e6(e),o=t.slice(1),a="";return o.charAt(0)!=pm&&([o,a]=t6(o)),this.engine.listen(this.namespaceId,s,o,a,c=>{let u=c._data||-1;this.factory.scheduleListenerCallback(u,r,c)})}return this.delegate.listen(e,t,r,i)}};function e6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function t6(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var Im=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,d=u.get(i);if(!d){let f=()=>u.delete(i);d=new wm("",i,this.engine,f),u.set(i,d)}return d}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(s,o,e,u.name,u)};return t.data.animation.forEach(a),new $b(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var r6=(()=>{class n extends hc{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(re(Xe),re(Oo),re(Fo))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function i6(){return new mm}function s6(){return new Im(F(Ou),F(hc),F(Me))}var QP=[{provide:Fo,useFactory:i6},{provide:hc,useClass:r6},{provide:Tn,useFactory:s6}],o6=[{provide:Oo,useClass:Hb},{provide:fp,useValue:"NoopAnimations"},...QP],YP=[{provide:Oo,useFactory:()=>new bm},{provide:fp,useFactory:()=>"BrowserAnimations"},...QP],JP=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?o6:YP}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=ct({providers:YP,imports:[Lu]})}return n})();function a6(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===0||t===1?1:i===0&&t!==0&&t%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var ZP=["fr",[["AM","PM"]],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}",void 0,void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",a6];var XP=()=>{};var nN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},c6=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Sm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,g=(a&15)<<2|u>>6,_=u&63;c||(_=64,o||(g=64)),r.push(t[d],t[f],t[g],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):c6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new qb;let g=s<<2|a>>4;if(r.push(g),u!==64){let _=a<<4&240|u>>2;if(r.push(_),f!==64){let I=u<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},qb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},l6=function(n){let e=nN(n);return Sm.encodeByteArray(e,!0)},qu=function(n){return l6(n).replace(/\./g,"")},Cm=function(n){try{return Sm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Kb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var u6=()=>Kb().__FIREBASE_DEFAULTS__,d6=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},h6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Cm(n[1]);return e&&JSON.parse(e)},Tm=()=>{try{return XP()||u6()||d6()||h6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Yb=n=>{var e,t;return(t=(e=Tm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},rN=n=>{let e=Yb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Qb=()=>{var n;return(n=Tm())===null||n===void 0?void 0:n.config},Jb=n=>{var e;return(e=Tm())===null||e===void 0?void 0:e[`_${n}`]};var Lo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ds(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dm(n){return(await fetch(n,{credentials:"include"})).ok}function iN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[qu(JSON.stringify(t)),qu(JSON.stringify(o)),""].join(".")}var zu={};function f6(){let n={prod:[],emulator:[]};for(let e of Object.keys(zu))zu[e]?n.emulator.push(e):n.prod.push(e);return n}function p6(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var eN=!1;function Am(n,e){if(typeof window>"u"||typeof document>"u"||!Ds(window.location.host)||zu[n]===e||zu[n]||eN)return;zu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",s=f6().prod.length>0;function o(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{eN=!0,o()},g}function d(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){let g=p6(r),_=t("text"),I=document.getElementById(_)||document.createElement("span"),x=t("learnmore"),P=document.getElementById(x)||document.createElement("a"),B=t("preprendIcon"),Y=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ee=g.element;a(ee),d(P,x);let he=u();c(Y,B),ee.append(Y,I,P,he),document.body.appendChild(ee)}s?(I.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function m6(){var n;let e=(n=Tm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function cN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lN(){let n=Bt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uN(){return!m6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wu(){try{return typeof indexedDB=="object"}catch{return!1}}function dN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var g6="FirebaseError",jn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=g6,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ar.prototype.create)}},Ar=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?v6(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jn(i,a,r)}};function v6(n,e){return n.replace(_6,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var _6=/\{\$([^}]+)}/g;function hN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(tN(s)&&tN(o)){if(!Qr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function tN(n){return n!==null&&typeof n=="object"}function fc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fN(n,e){let t=new Wb(n,e);return t.subscribe.bind(t)}var Wb=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");y6(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=zb),i.error===void 0&&(i.error=zb),i.complete===void 0&&(i.complete=zb);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function y6(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zb(){}var rge=14400*1e3;function Et(n){return n&&n._delegate?n._delegate:n}var _n=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Vo="[DEFAULT]";var Zb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Lo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(b6(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:E6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function E6(n){return n===Vo?void 0:n}function b6(n){return n.instantiationMode==="EAGER"}var xm=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Zb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var w6=[],Pe=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Pe||{}),I6={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},S6=Pe.INFO,C6={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},T6=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=C6[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Jr=class{constructor(e){this.name=e,this._logLevel=S6,this._logHandler=T6,this._userLogHandler=null,w6.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}};var D6=(n,e)=>e.some(t=>n instanceof t),pN,mN;function A6(){return pN||(pN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x6(){return mN||(mN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var gN=new WeakMap,ew=new WeakMap,vN=new WeakMap,Xb=new WeakMap,nw=new WeakMap;function R6(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Zr(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&gN.set(t,n)}).catch(()=>{}),nw.set(e,n),e}function k6(n){if(ew.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});ew.set(n,e)}var tw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ew.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _N(n){tw=n(tw)}function P6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Rm(this),e,...t);return vN.set(r,e.sort?e.sort():[e]),Zr(r)}:x6().includes(n)?function(...e){return n.apply(Rm(this),e),Zr(gN.get(this))}:function(...e){return Zr(n.apply(Rm(this),e))}}function N6(n){return typeof n=="function"?P6(n):(n instanceof IDBTransaction&&k6(n),D6(n,A6())?new Proxy(n,tw):n)}function Zr(n){if(n instanceof IDBRequest)return R6(n);if(Xb.has(n))return Xb.get(n);let e=N6(n);return e!==n&&(Xb.set(n,e),nw.set(e,n)),e}var Rm=n=>nw.get(n);function km(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Zr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Zr(o.result),c.oldVersion,c.newVersion,Zr(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var M6=["get","getKey","getAll","getAllKeys","count"],O6=["put","add","delete","clear"],rw=new Map;function yN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rw.get(e))return rw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=O6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M6.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&c.done]))[0]};return rw.set(e,s),s}_N(n=>ne(O({},n),{get:(e,t,r)=>yN(e,t)||n.get(e,t,r),has:(e,t)=>!!yN(e,t)||n.has(e,t)}));var sw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(F6(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function F6(n){let e=n.getComponent();return e?.type==="VERSION"}var ow="@firebase/app",EN="0.13.2";var Ai=new Jr("@firebase/app"),L6="@firebase/app-compat",V6="@firebase/analytics-compat",U6="@firebase/analytics",B6="@firebase/app-check-compat",j6="@firebase/app-check",$6="@firebase/auth",H6="@firebase/auth-compat",G6="@firebase/database",z6="@firebase/data-connect",q6="@firebase/database-compat",W6="@firebase/functions",K6="@firebase/functions-compat",Y6="@firebase/installations",Q6="@firebase/installations-compat",J6="@firebase/messaging",Z6="@firebase/messaging-compat",X6="@firebase/performance",eG="@firebase/performance-compat",tG="@firebase/remote-config",nG="@firebase/remote-config-compat",rG="@firebase/storage",iG="@firebase/storage-compat",sG="@firebase/firestore",oG="@firebase/ai",aG="@firebase/firestore-compat",cG="firebase",lG="11.10.0";var aw="[DEFAULT]",uG={[ow]:"fire-core",[L6]:"fire-core-compat",[U6]:"fire-analytics",[V6]:"fire-analytics-compat",[j6]:"fire-app-check",[B6]:"fire-app-check-compat",[$6]:"fire-auth",[H6]:"fire-auth-compat",[G6]:"fire-rtdb",[z6]:"fire-data-connect",[q6]:"fire-rtdb-compat",[W6]:"fire-fn",[K6]:"fire-fn-compat",[Y6]:"fire-iid",[Q6]:"fire-iid-compat",[J6]:"fire-fcm",[Z6]:"fire-fcm-compat",[X6]:"fire-perf",[eG]:"fire-perf-compat",[tG]:"fire-rc",[nG]:"fire-rc-compat",[rG]:"fire-gcs",[iG]:"fire-gcs-compat",[sG]:"fire-fst",[aG]:"fire-fst-compat",[oG]:"fire-vertex","fire-js":"fire-js",[cG]:"fire-js-all"};var Ku=new Map,dG=new Map,cw=new Map;function bN(n,e){try{n.container.addComponent(e)}catch(t){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xr(n){let e=n.name;if(cw.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;cw.set(e,n);for(let t of Ku.values())bN(t,n);for(let t of dG.values())bN(t,n);return!0}function pc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $n(n){return n==null?!1:n.settings!==void 0}var hG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new Ar("app","Firebase",hG);var lw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _n("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}};var xs=lG;function hw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:aw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw As.create("bad-app-name",{appName:String(i)});if(t||(t=Qb()),!t)throw As.create("no-options");let s=Ku.get(i);if(s){if(Qr(t,s.options)&&Qr(r,s.config))return s;throw As.create("duplicate-app",{appName:i})}let o=new xm(i);for(let c of cw.values())o.addComponent(c);let a=new lw(t,r,o);return Ku.set(i,a),a}function Uo(n=aw){let e=Ku.get(n);if(!e&&n===aw&&Qb())return hw();if(!e)throw As.create("no-app",{appName:n});return e}function Pm(){return Array.from(Ku.values())}function bt(n,e,t){var r;let i=(r=uG[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(a.join(" "));return}xr(new _n(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var fG="firebase-heartbeat-database",pG=1,Yu="firebase-heartbeat-store",iw=null;function CN(){return iw||(iw=km(fG,pG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yu)}catch(t){console.warn(t)}}}}).catch(n=>{throw As.create("idb-open",{originalErrorMessage:n.message})})),iw}async function mG(n){try{let t=(await CN()).transaction(Yu),r=await t.objectStore(Yu).get(TN(n));return await t.done,r}catch(e){if(e instanceof jn)Ai.warn(e.message);else{let t=As.create("idb-get",{originalErrorMessage:e?.message});Ai.warn(t.message)}}}async function wN(n,e){try{let r=(await CN()).transaction(Yu,"readwrite");await r.objectStore(Yu).put(e,TN(n)),await r.done}catch(t){if(t instanceof jn)Ai.warn(t.message);else{let r=As.create("idb-set",{originalErrorMessage:t?.message});Ai.warn(r.message)}}}function TN(n){return`${n.name}!${n.options.appId}`}var gG=1024,vG=30,uw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new dw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=IN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>vG){let o=yG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ai.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=IN(),{heartbeatsToSend:r,unsentEntries:i}=_G(this._heartbeatsCache.heartbeats),s=qu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Ai.warn(t),""}}};function IN(){return new Date().toISOString().substring(0,10)}function _G(n,e=gG){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),SN(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),SN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var dw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wu()?dN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await mG(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return wN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return wN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function SN(n){return qu(JSON.stringify({version:2,heartbeats:n})).length}function yG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function EG(n){xr(new _n("platform-logger",e=>new sw(e),"PRIVATE")),xr(new _n("heartbeat",e=>new uw(e),"PRIVATE")),bt(ow,EN,n),bt(ow,EN,"esm2017"),bt("fire-js","")}EG("");var bG="firebase",wG="11.10.0";bt(bG,wG,"app");function DN(n){n===void 0&&(n=F(qe));let e=n.get(Ya);return t=>new ve(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var Rs=new as("ANGULARFIRE2_VERSION");function Qu(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var gc=(n,e)=>{let t=e?[e]:Pm(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},mc=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(mc||{}),AN=BE()&&typeof Zone<"u"?mc.WARN:mc.SILENT;var Nm=class{zone;delegate;constructor(e,t=Z_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},ks=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=F(Me);this.outsideAngular=t.runOutsideAngular(()=>new Nm(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Nm(typeof Zone>"u"?void 0:Zone.current,ns))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xN=!1;function IG(n,e){!xN&&(AN>mc.SILENT||BE())&&(xN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),AN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function SG(n){let e=F(Me,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Bo(n){let e=F(Me,{optional:!0});return e?e.run(()=>n()):n()}var CG=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Tt(t,()=>Bo(()=>n.apply(void 0,r)))),ft=(n,e,t)=>(t||=e?mc.WARN:mc.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=F(ks),o=F(Ya),a=F(_t)}catch{return IG(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Bo(()=>o.add())),i[u]=CG(i[u],r,a));let c=SG(()=>n.apply(this,i));return e?c instanceof ve?c.pipe(is(s.outsideAngular),rs(s.insideAngular),DN(a)):c instanceof Promise?Bo(()=>{let u=o.add();return new Promise((d,f)=>{c.then(g=>Tt(a,()=>Bo(()=>d(g))),g=>Tt(a,()=>Bo(()=>f(g)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Bo(()=>c):c instanceof ve?c.pipe(is(s.outsideAngular),rs(s.insideAngular)):Bo(()=>c)});var xi=class{constructor(e){return e}},jo=class{constructor(){return Pm()}};function TG(n){return n&&n.length===1?n[0]:new xi(Uo())}var fw=new Q("angularfire2._apps"),DG={provide:xi,useFactory:TG,deps:[[new Vn,fw]]},AG={provide:jo,deps:[[new Vn,fw]]};function xG(n){return(e,t)=>{let r=t.get(bi);bt("angularfire",Rs.full,"core"),bt("angularfire",Rs.full,"app"),bt("angular",Ey.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new xi(i)}}function RN(n,...e){return gr([DG,AG,{provide:fw,useFactory:xG(n),multi:!0,deps:[Me,qe,ks,...e]}])}var kN=ft(hw,!0);var RG=new Map,kG={activated:!1,tokenObservers:[]},PG={initialized:!1,enabled:!1};function Rr(n){return RG.get(n)||Object.assign({},kG)}function ON(){return PG}var NG="https://content-firebaseappcheck.googleapis.com/v1";var MG="exchangeDebugToken",PN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},rve=1440*60*1e3;var gw=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Lo,this.pending.promise.catch(t=>{}),await OG(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Lo,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function OG(n){return new Promise(e=>{setTimeout(e,n)})}var FG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ps=new Ar("appCheck","AppCheck",FG);function FN(n){if(!Rr(n).activated)throw Ps.create("use-before-activation",{appName:n.name})}async function LN({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(f){throw Ps.create("fetch-network-error",{originalErrorMessage:f?.message})}if(o.status!==200)throw Ps.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Ps.create("fetch-parse-error",{originalErrorMessage:f?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Ps.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let u=Number(c[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+u,issuedAtTimeMillis:d}}function VN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${NG}/projects/${t}/apps/${r}:${MG}?key=${i}`,body:{debug_token:e}}}var LG="firebase-app-check-database",VG=1,vw="firebase-app-check-store";var Mm=null;function UG(){return Mm||(Mm=new Promise((n,e)=>{try{let t=indexedDB.open(LG,VG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ps.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(vw,{keyPath:"compositeKey"})}}}catch(t){e(Ps.create("storage-open",{originalErrorMessage:t?.message}))}}),Mm)}function BG(n,e){return jG($G(n),e)}async function jG(n,e){let r=(await UG()).transaction(vw,"readwrite"),s=r.objectStore(vw).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(Ps.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function $G(n){return`${n.options.appId}-${n.name}`}var Ju=new Jr("@firebase/app-check");function pw(n,e){return Wu()?BG(n,e).catch(t=>{Ju.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function UN(){return ON().enabled}async function BN(){let n=ON();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var HG={error:"UNKNOWN_ERROR"};function GG(n){return Sm.encodeString(JSON.stringify(n),!1)}async function _w(n,e=!1,t=!1){let r=n.app;FN(r);let i=Rr(r),s=i.token,o;if(s&&!Zu(s)&&(i.token=void 0,s=void 0),!s){let u=await i.cachedTokenPromise;u&&(Zu(u)?s=u:await pw(r,void 0))}if(!e&&s&&Zu(s))return{token:s.token};let a=!1;if(UN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=LN(VN(r,await BN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=await i.exchangeTokenPromise;return await pw(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Ju.warn(u.message):t&&Ju.error(u),mw(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await Rr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Ju.warn(u.message):t&&Ju.error(u),o=u}let c;return s?o?Zu(s)?c={token:s.token,internalError:o}:c=mw(o):(c={token:s.token},i.token=s,await pw(r,s)):c=mw(o),a&&KG(r,c),c}async function zG(n){let e=n.app;FN(e);let{provider:t}=Rr(e);if(UN()){let r=await BN(),{token:i}=await LN(VN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function qG(n,e,t,r){let{app:i}=n,s=Rr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Zu(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),NN(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>NN(n))}function jN(n,e){let t=Rr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function NN(n){let{app:e}=n,t=Rr(e),r=t.tokenRefresher;r||(r=WG(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WG(n){let{app:e}=n;return new gw(async()=>{let t=Rr(e),r;if(t.token?r=await _w(n,!0):r=await _w(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},PN.RETRIAL_MIN_WAIT,PN.RETRIAL_MAX_WAIT)}function KG(n,e){let t=Rr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Zu(n){return n.expireTimeMillis-Date.now()>0}function mw(n){return{token:GG(HG),error:n}}var yw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Rr(this.app);for(let t of e)jN(this.app,t.next);return Promise.resolve()}};function YG(n,e){return new yw(n,e)}function QG(n){return{getToken:e=>_w(n,e),getLimitedUseToken:()=>zG(n),addTokenListener:e=>qG(n,"INTERNAL",e),removeTokenListener:e=>jN(n.app,e)}}var JG="@firebase/app-check",ZG="0.10.1";var XG="app-check",MN="app-check-internal";function e8(){xr(new _n(XG,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return YG(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(MN).initialize()})),xr(new _n(MN,n=>{let e=n.getProvider("app-check").getImmediate();return QG(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),bt(JG,ZG)}e8();var t8="app-check";var vc=class{constructor(){return gc(t8)}};var n8=["localhost","0.0.0.0","127.0.0.1"],mve=typeof window<"u"&&n8.includes(window.location.hostname);var $N=()=>{};var HN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},r8=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},GN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,g=(a&15)<<2|u>>6,_=u&63;c||(_=64,o||(g=64)),r.push(t[d],t[f],t[g],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(HN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):r8(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new bw;let g=s<<2|a>>4;if(r.push(g),u!==64){let _=a<<4&240|u>>2;if(r.push(_),f!==64){let I=u<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},bw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},i8=function(n){let e=HN(n);return GN.encodeByteArray(e,!0)},Iw=function(n){return i8(n).replace(/\./g,"")},Om=function(n){try{return GN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function s8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var o8=()=>s8().__FIREBASE_DEFAULTS__,a8=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},c8=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Om(n[1]);return e&&JSON.parse(e)},l8=()=>{try{return $N()||o8()||a8()||c8()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var zN=n=>l8()?.[`_${n}`];function Sw(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kr())}function WN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function YN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QN(){try{return typeof indexedDB=="object"}catch{return!1}}function JN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var u8="FirebaseError",Xr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=u8,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ri.prototype.create)}},Ri=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?d8(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Xr(i,a,r)}};function d8(n,e){return n.replace(h8,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var h8=/\{\$([^}]+)}/g;function Cw(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ZN(n,e){let t=new ww(n,e);return t.subscribe.bind(t)}var ww=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");f8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ew),i.error===void 0&&(i.error=Ew),i.complete===void 0&&(i.complete=Ew);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function f8(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ew(){}var Eve=14400*1e3;function _c(n){return n&&n._delegate?n._delegate:n}var ki=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var p8=[],tt=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(tt||{}),m8={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},g8=tt.INFO,v8={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},_8=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=v8[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},yc=class{constructor(e){this.name=e,this._logLevel=g8,this._logHandler=_8,this._userLogHandler=null,p8.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?m8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}};var Dw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(E8(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function E8(n){return n.getComponent()?.type==="VERSION"}var Aw="@firebase/app",XN="0.14.6";var Pi=new yc("@firebase/app"),b8="@firebase/app-compat",w8="@firebase/analytics-compat",I8="@firebase/analytics",S8="@firebase/app-check-compat",C8="@firebase/app-check",T8="@firebase/auth",D8="@firebase/auth-compat",A8="@firebase/database",x8="@firebase/data-connect",R8="@firebase/database-compat",k8="@firebase/functions",P8="@firebase/functions-compat",N8="@firebase/installations",M8="@firebase/installations-compat",O8="@firebase/messaging",F8="@firebase/messaging-compat",L8="@firebase/performance",V8="@firebase/performance-compat",U8="@firebase/remote-config",B8="@firebase/remote-config-compat",j8="@firebase/storage",$8="@firebase/storage-compat",H8="@firebase/firestore",G8="@firebase/ai",z8="@firebase/firestore-compat",q8="firebase",W8="12.6.0";var K8={[Aw]:"fire-core",[b8]:"fire-core-compat",[I8]:"fire-analytics",[w8]:"fire-analytics-compat",[C8]:"fire-app-check",[S8]:"fire-app-check-compat",[T8]:"fire-auth",[D8]:"fire-auth-compat",[A8]:"fire-rtdb",[x8]:"fire-data-connect",[R8]:"fire-rtdb-compat",[k8]:"fire-fn",[P8]:"fire-fn-compat",[N8]:"fire-iid",[M8]:"fire-iid-compat",[O8]:"fire-fcm",[F8]:"fire-fcm-compat",[L8]:"fire-perf",[V8]:"fire-perf-compat",[U8]:"fire-rc",[B8]:"fire-rc-compat",[j8]:"fire-gcs",[$8]:"fire-gcs-compat",[H8]:"fire-fst",[z8]:"fire-fst-compat",[G8]:"fire-vertex","fire-js":"fire-js",[q8]:"fire-js-all"};var Y8=new Map,Q8=new Map,eM=new Map;function tM(n,e){try{n.container.addComponent(e)}catch(t){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function bc(n){let e=n.name;if(eM.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;eM.set(e,n);for(let t of Y8.values())tM(t,n);for(let t of Q8.values())tM(t,n);return!0}function $o(n){return n==null?!1:n.settings!==void 0}var J8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kw=new Ri("app","Firebase",J8);var Fm=W8;function Ec(n,e,t){let r=K8[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(o.join(" "));return}bc(new ki(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Z8="firebase-heartbeat-database",X8=1,Xu="firebase-heartbeat-store",Tw=null;function sM(){return Tw||(Tw=km(Z8,X8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xu)}catch(t){console.warn(t)}}}}).catch(n=>{throw kw.create("idb-open",{originalErrorMessage:n.message})})),Tw}async function ez(n){try{let t=(await sM()).transaction(Xu),r=await t.objectStore(Xu).get(oM(n));return await t.done,r}catch(e){if(e instanceof Xr)Pi.warn(e.message);else{let t=kw.create("idb-get",{originalErrorMessage:e?.message});Pi.warn(t.message)}}}async function nM(n,e){try{let r=(await sM()).transaction(Xu,"readwrite");await r.objectStore(Xu).put(e,oM(n)),await r.done}catch(t){if(t instanceof Xr)Pi.warn(t.message);else{let r=kw.create("idb-set",{originalErrorMessage:t?.message});Pi.warn(r.message)}}}function oM(n){return`${n.name}!${n.options.appId}`}var tz=1024,nz=30,xw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Rw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rM();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>nz){let i=iz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Pi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=rM(),{heartbeatsToSend:t,unsentEntries:r}=rz(this._heartbeatsCache.heartbeats),i=Iw(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Pi.warn(e),""}}};function rM(){return new Date().toISOString().substring(0,10)}function rz(n,e=tz){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),iM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),iM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Rw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QN()?JN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await ez(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return nM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return nM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function iM(n){return Iw(JSON.stringify({version:2,heartbeats:n})).length}function iz(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function sz(n){bc(new ki("platform-logger",e=>new Dw(e),"PRIVATE")),bc(new ki("heartbeat",e=>new xw(e),"PRIVATE")),Ec(Aw,XN,n),Ec(Aw,XN,"esm2020"),Ec("fire-js","")}sz("");function pM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var mM=pM,gM=new Ri("auth","Firebase",pM());var Bm=new yc("@firebase/auth");function oz(n,...e){Bm.logLevel<=tt.WARN&&Bm.warn(`Auth (${Fm}): ${n}`,...e)}function Vm(n,...e){Bm.logLevel<=tt.ERROR&&Bm.error(`Auth (${Fm}): ${n}`,...e)}function aM(n,...e){throw Hw(n,...e)}function $w(n,...e){return Hw(n,...e)}function vM(n,e,t){let r=ne(O({},mM()),{[e]:t});return new Ri("auth","Firebase",r).create(e,{appName:n.name})}function Um(n){return vM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gM.create(n,...e)}function je(n,e,...t){if(!n)throw Hw(e,...t)}function ed(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Vm(e),new Error(e)}function jm(n,e){n||ed(e)}function az(){return cM()==="http:"||cM()==="https:"}function cM(){return typeof self<"u"&&self.location?.protocol||null}function cz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(az()||KN()||"connection"in navigator)?navigator.onLine:!0}function lz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var zo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,jm(t>e,"Short delay should be less than long delay!"),this.isMobile=qN()||YN()}get(){return cz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function uz(n,e){jm(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var $m=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ed("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ed("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ed("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var dz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var hz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fz=new zo(3e4,6e4);function _M(n,e){return n.tenantId&&!e.tenantId?ne(O({},e),{tenantId:n.tenantId}):e}async function Wm(n,e,t,r,i={}){return yM(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Cw(O({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=O({method:e,headers:c},s);return WN()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Sw(n.emulatorConfig.host)&&(u.credentials="include"),$m.fetch()(await EM(n,n.config.apiHost,t,a),u)})}async function yM(n,e,t){n._canInitEmulator=!1;let r=O(O({},dz),e);try{let i=new Mw(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Lm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lm(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Lm(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Lm(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw vM(n,d,u);aM(n,d)}}catch(i){if(i instanceof Xr)throw i;aM(n,"network-request-failed",{message:String(i)})}}async function EM(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?uz(n.config,i):`${n.config.apiScheme}://${i}`;return hz.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var Mw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r($w(this.auth,"network-request-failed")),fz.get())})}};function Lm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=$w(n,e,r);return i.customData._tokenResponse=t,i}async function pz(n,e){return Wm(n,"POST","/v1/accounts:delete",e)}async function Hm(n,e){return Wm(n,"POST","/v1/accounts:lookup",e)}function td(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bM(n,e=!1){let t=_c(n),r=await t.getIdToken(e),i=wM(r);je(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:td(Pw(i.auth_time)),issuedAtTime:td(Pw(i.iat)),expirationTime:td(Pw(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Pw(n){return Number(n)*1e3}function wM(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Vm("JWT malformed, contained fewer than 3 sections"),null;try{let i=Om(t);return i?JSON.parse(i):(Vm("Failed to decode base64 JWT payload"),null)}catch(i){return Vm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function lM(n){let e=wM(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ow(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Xr&&mz(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function mz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Fw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var rd=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=td(this.lastLoginAt),this.creationTime=td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Gm(n){let e=n.auth,t=await n.getIdToken(),r=await Ow(n,Hm(e,{idToken:t}));je(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?SM(i.providerUserInfo):[],o=gz(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new rd(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function IM(n){let e=_c(n);await Gm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SM(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Pl(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function vz(n,e){let t=await yM(n,{},async()=>{let r=Cw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await EM(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Sw(n.emulatorConfig.host)&&(c.credentials="include"),$m.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _z(n,e){return Wm(n,"POST","/v2/accounts:revokeToken",_M(n,e))}var nd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");let t=lM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await vz(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(je(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(je(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(je(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ed("not implemented")}};function Ns(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ho=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=Pl(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Ow(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bM(this,e)}reload(){return IM(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>O({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ne(O({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Gm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($o(this.auth.app))return Promise.reject(Um(this.auth));let e=await this.getIdToken();return await Ow(this,pz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ne(O({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>O({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:f,emailVerified:g,isAnonymous:_,providerData:I,stsTokenManager:x}=t;je(f&&x,e,"internal-error");let P=nd.fromJSON(this.name,x);je(typeof f=="string",e,"internal-error"),Ns(r,e.name),Ns(i,e.name),je(typeof g=="boolean",e,"internal-error"),je(typeof _=="boolean",e,"internal-error"),Ns(s,e.name),Ns(o,e.name),Ns(a,e.name),Ns(c,e.name),Ns(u,e.name),Ns(d,e.name);let B=new n({uid:f,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:d});return I&&Array.isArray(I)&&(B.providerData=I.map(Y=>O({},Y))),c&&(B._redirectEventId=c),B}static async _fromIdTokenResponse(e,t,r=!1){let i=new nd;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gm(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];je(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?SM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new nd;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new rd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c}};var uM=new Map;function Go(n){jm(n instanceof Function,"Expected a class definition");let e=uM.get(n);return e?(jm(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uM.set(n,e),e)}var yz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Lw=yz;function Nw(n,e,t){return`firebase:${n}:${e}:${t}`}var zm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Nw(this.userKey,i.apiKey,s),this.fullPersistenceKey=Nw("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Hm(this.auth,{idToken:e}).catch(()=>{});return t?Ho._fromGetAccountInfoResponse(this.auth,t,e):null}return Ho._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Go(Lw),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),s=i[0]||Go(Lw),o=Nw(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(o);if(d){let f;if(typeof d=="string"){let g=await Hm(e,{idToken:d}).catch(()=>{});if(!g)break;f=await Ho._fromGetAccountInfoResponse(e,g,d)}else f=Ho._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new n(s,e,r))}};function dM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Iz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ez(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cz(e))return"Blackberry";if(Tz(e))return"Webos";if(bz(e))return"Safari";if((e.includes("chrome/")||wz(e))&&!e.includes("edge/"))return"Chrome";if(Sz(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Ez(n=kr()){return/firefox\//i.test(n)}function bz(n=kr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wz(n=kr()){return/crios\//i.test(n)}function Iz(n=kr()){return/iemobile/i.test(n)}function Sz(n=kr()){return/android/i.test(n)}function Cz(n=kr()){return/blackberry/i.test(n)}function Tz(n=kr()){return/webos/i.test(n)}function CM(n,e=[]){let t;switch(n){case"Browser":t=dM(kr());break;case"Worker":t=`${dM(kr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fm}/${r}`}var Vw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Dz(n,e={}){return Wm(n,"GET","/v2/passwordPolicy",_M(n,e))}var Az=6,Uw=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Az,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Bw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qm(this),this.idTokenSubscription=new qm(this),this.beforeStateQueue=new Vw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Go(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zm.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Hm(this,{idToken:e}),r=await Ho._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if($o(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($o(this.app))return Promise.reject(Um(this));let t=e?_c(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $o(this.app)?Promise.reject(Um(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $o(this.app)?Promise.reject(Um(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Go(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Dz(this),t=new Uw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ri("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await _z(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Go(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await zm.create(this,[Go(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if($o(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&oz(`Error while retrieving App Check token: ${e.error}`),e?.token}};function xz(n){return _c(n)}var qm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZN(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Rz={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kz(n){Rz=n}function Pz(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Nz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Go);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Gw(n,e,t,r){return _c(n).onIdTokenChanged(e,t,r)}var Xve=Pz("rcb"),e_e=new zo(3e4,6e4);var t_e=new zo(2e3,1e4);var n_e=600*1e3;var r_e=new zo(3e4,6e4);var i_e=new zo(5e3,15e3);var s_e=encodeURIComponent("fac");var hM="@firebase/auth",fM="1.11.1";var jw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Mz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Oz(n){bc(new ki("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;je(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CM(n)},u=new Bw(r,i,s,c);return Nz(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),bc(new ki("auth-internal",e=>{let t=xz(e.getProvider("auth").getImmediate());return(r=>new jw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ec(hM,fM,Mz(n)),Ec(hM,fM,"esm2020")}var Fz=300,o_e=zN("authIdTokenMaxAge")||Fz;function Lz(){return document.getElementsByTagName("head")?.[0]??document}kz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=$w("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Lz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Oz("Browser");function TM(n){return new ve(function(e){var t=Gw(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function jM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var $M=jM,HM=new Ar("auth","Firebase",jM());var Xm=new Jr("@firebase/auth");function Bz(n,...e){Xm.logLevel<=Pe.WARN&&Xm.warn(`Auth (${xs}): ${n}`,...e)}function Ym(n,...e){Xm.logLevel<=Pe.ERROR&&Xm.error(`Auth (${xs}): ${n}`,...e)}function ti(n,...e){throw cI(n,...e)}function Pr(n,...e){return cI(n,...e)}function aI(n,e,t){let r=Object.assign(Object.assign({},$M()),{[e]:t});return new Ar("auth","Firebase",r).create(e,{appName:n.name})}function qo(n){return aI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jz(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ti(n,"argument-error"),aI(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return HM.create(n,...e)}function me(n,e,...t){if(!n)throw cI(e,...t)}function Ni(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ym(e),new Error(e)}function Oi(n,e){n||Ni(e)}function Ww(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function $z(){return DM()==="http:"||DM()==="https:"}function DM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Hz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($z()||aN()||"connection"in navigator)?navigator.onLine:!0}function Gz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Wo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oi(t>e,"Short delay should be less than long delay!"),this.isMobile=sN()||cN()}get(){return Hz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function lI(n,e){Oi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var eg=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var zz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var qz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Wz=new Wo(3e4,6e4);function uI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ic(n,e,t,r,i={}){return GM(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=fc(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=Object.assign({method:e,headers:c},s);return oN()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Ds(n.emulatorConfig.host)&&(u.credentials="include"),eg.fetch()(await zM(n,n.config.apiHost,t,a),u)})}async function GM(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},zz),e);try{let i=new Kw(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Km(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Km(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Km(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Km(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw aI(n,d,u);ti(n,d)}}catch(i){if(i instanceof jn)throw i;ti(n,"network-request-failed",{message:String(i)})}}async function Kz(n,e,t,r,i={}){let s=await Ic(n,e,t,r,i);return"mfaPendingCredential"in s&&ti(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function zM(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?lI(n.config,i):`${n.config.apiScheme}://${i}`;return qz.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var Kw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Pr(this.auth,"network-request-failed")),Wz.get())})}};function Km(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Pr(n,e,r);return i.customData._tokenResponse=t,i}async function Yz(n,e){return Ic(n,"POST","/v1/accounts:delete",e)}async function tg(n,e){return Ic(n,"POST","/v1/accounts:lookup",e)}function id(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dI(n,e=!1){let t=Et(n),r=await t.getIdToken(e),i=hI(r);me(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:id(zw(i.auth_time)),issuedAtTime:id(zw(i.iat)),expirationTime:id(zw(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function zw(n){return Number(n)*1e3}function hI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ym("JWT malformed, contained fewer than 3 sections"),null;try{let i=Cm(t);return i?JSON.parse(i):(Ym("Failed to decode base64 JWT payload"),null)}catch(i){return Ym("Caught error parsing JWT payload as JSON",i?.toString()),null}}function AM(n){let e=hI(n);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function od(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof jn&&Qz(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Qz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Yw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ad=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=id(this.lastLoginAt),this.creationTime=id(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function ng(n){var e;let t=n.auth,r=await n.getIdToken(),i=await od(n,tg(t,{idToken:r}));me(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?qM(s.providerUserInfo):[],a=Jz(n.providerData,o),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ad(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,f)}async function fI(n){let e=Et(n);await ng(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Jz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qM(n){return n.map(e=>{var{providerId:t}=e,r=nf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function Zz(n,e){let t=await GM(n,{},async()=>{let r=fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await zM(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ds(n.emulatorConfig.host)&&(c.credentials="include"),eg.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Xz(n,e){return Ic(n,"POST","/v2/accounts:revokeToken",uI(n,e))}var sd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){me(e.length!==0,"internal-error");let t=AM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await Zz(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ni("not implemented")}};function Ms(n,e){me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Os=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=nf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ad(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await od(this,this.stsTokenManager.getToken(this.auth,e));return me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dI(this,e)}reload(){return fI(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ng(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(qo(this.auth));let e=await this.getIdToken();return await od(this,Yz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,_=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,I=(o=t.photoURL)!==null&&o!==void 0?o:void 0,x=(a=t.tenantId)!==null&&a!==void 0?a:void 0,P=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,B=(u=t.createdAt)!==null&&u!==void 0?u:void 0,Y=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:ee,emailVerified:he,isAnonymous:We,providerData:Ce,stsTokenManager:T}=t;me(ee&&T,e,"internal-error");let w=sd.fromJSON(this.name,T);me(typeof ee=="string",e,"internal-error"),Ms(f,e.name),Ms(g,e.name),me(typeof he=="boolean",e,"internal-error"),me(typeof We=="boolean",e,"internal-error"),Ms(_,e.name),Ms(I,e.name),Ms(x,e.name),Ms(P,e.name),Ms(B,e.name),Ms(Y,e.name);let S=new n({uid:ee,auth:e,email:g,emailVerified:he,displayName:f,isAnonymous:We,photoURL:I,phoneNumber:_,tenantId:x,stsTokenManager:w,createdAt:B,lastLoginAt:Y});return Ce&&Array.isArray(Ce)&&(S.providerData=Ce.map(D=>Object.assign({},D))),P&&(S._redirectEventId=P),S}static async _fromIdTokenResponse(e,t,r=!1){let i=new sd;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ng(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];me(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?qM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new sd;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ad(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c}};var xM=new Map;function Mi(n){Oi(n instanceof Function,"Expected a class definition");let e=xM.get(n);return e?(Oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,xM.set(n,e),e)}var e9=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Qw=e9;function Qm(n,e,t){return`firebase:${n}:${e}:${t}`}var rg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Qm(this.userKey,i.apiKey,s),this.fullPersistenceKey=Qm("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await tg(this.auth,{idToken:e}).catch(()=>{});return t?Os._fromGetAccountInfoResponse(this.auth,t,e):null}return Os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Mi(Qw),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),s=i[0]||Mi(Qw),o=Qm(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(o);if(d){let f;if(typeof d=="string"){let g=await tg(e,{idToken:d}).catch(()=>{});if(!g)break;f=await Os._fromGetAccountInfoResponse(e,g,d)}else f=Os._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new n(s,e,r))}};function RM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZM(e))return"Blackberry";if(XM(e))return"Webos";if(KM(e))return"Safari";if((e.includes("chrome/")||YM(e))&&!e.includes("edge/"))return"Chrome";if(JM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function WM(n=Bt()){return/firefox\//i.test(n)}function KM(n=Bt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YM(n=Bt()){return/crios\//i.test(n)}function QM(n=Bt()){return/iemobile/i.test(n)}function JM(n=Bt()){return/android/i.test(n)}function ZM(n=Bt()){return/blackberry/i.test(n)}function XM(n=Bt()){return/webos/i.test(n)}function pI(n=Bt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function t9(n=Bt()){var e;return pI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function n9(){return lN()&&document.documentMode===10}function eO(n=Bt()){return pI(n)||JM(n)||XM(n)||ZM(n)||/windows phone/i.test(n)||QM(n)}function tO(n,e=[]){let t;switch(n){case"Browser":t=RM(Bt());break;case"Worker":t=`${RM(Bt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xs}/${r}`}var Jw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function r9(n,e={}){return Ic(n,"GET","/v2/passwordPolicy",uI(n,e))}var i9=6,Zw=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:i9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Xw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ig(this),this.idTokenSubscription=new ig(this),this.beforeStateQueue=new Jw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mi(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await rg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await tg(this,{idToken:e}),r=await Os._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($n(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ng(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Gz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(qo(this));let t=e?Et(e):null;return t&&me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(qo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(qo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await r9(this),t=new Zw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ar("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Xz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Mi(e)||this._popupRedirectResolver;me(t,this,"argument-error"),this.redirectPersistenceManager=await rg.create(this,[Mi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Bz(`Error while retrieving App Check token: ${t.error}`),t?.token}};function hg(n){return Et(n)}var ig=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=fN(t=>this.observer=t)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var mI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s9(n){mI=n}function o9(n){return mI.loadJS(n)}function a9(){return mI.gapiScript}function nO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function gI(n,e){let t=pc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Qr(s,e??{}))return i;ti(i,"already-initialized")}return t.initialize({options:e})}function c9(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Mi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function vI(n,e,t){let r=hg(n);me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=rO(e),{host:o,port:a}=l9(e),c=a===null?"":`:${a}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),me(Qr(u,r.config.emulator)&&Qr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ds(o)?(Dm(`${s}//${o}${c}`),Am("Auth",!0)):i||u9()}function rO(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function l9(n){let e=rO(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:kM(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:kM(o)}}}function kM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function u9(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var cd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ni("not implemented")}_getIdTokenResponse(e){return Ni("not implemented")}_linkToIdToken(e,t){return Ni("not implemented")}_getReauthenticationResolver(e){return Ni("not implemented")}};async function wc(n,e){return Kz(n,"POST","/v1/accounts:signInWithIdp",uI(n,e))}var d9="http://localhost",sg=class n extends cd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ti("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=nf(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return wc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,wc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,wc(e,t)}buildRequest(){let e={requestUri:d9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fc(t)}return e}};var ld=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var og=class extends ld{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var _I=(()=>{class n extends og{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return sg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var ud=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Os._fromIdTokenResponse(e,r,i),o=PM(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=PM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function PM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var eI=class n extends jn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function iO(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?eI._fromErrorAndOperation(n,s,e,r):s})}async function h9(n,e,t=!1){let r=await od(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ud._forOperation(n,"link",r)}async function f9(n,e,t=!1){let{auth:r}=n;if($n(r.app))return Promise.reject(qo(r));let i="reauthenticate";try{let s=await od(n,iO(r,i,e,n),t);me(s.idToken,r,"internal-error");let o=hI(s.idToken);me(o,r,"internal-error");let{sub:a}=o;return me(n.uid===a,r,"user-mismatch"),ud._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ti(r,"user-mismatch"),s}}async function p9(n,e,t=!1){if($n(n.app))return Promise.reject(qo(n));let r="signIn",i=await iO(n,r,e),s=await ud._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function yI(n,e,t,r){return Et(n).onIdTokenChanged(e,t,r)}function EI(n,e,t){return Et(n).beforeAuthStateChanged(e,t)}function bI(n){return Et(n).signOut()}var ag="__sak";var cg=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ag,"1"),this.storage.removeItem(ag),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var m9=1e3,g9=10,v9=(()=>{class n extends cg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);n9()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,g9):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},m9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),sO=v9;var _9=(()=>{class n extends cg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),wI=_9;function y9(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var E9=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async d=>d(r.origin,o)),u=await y9(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function II(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var tI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=II("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function ei(){return window}function b9(n){ei().location.href=n}function oO(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function w9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I9(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function S9(){return oO()?self:null}var aO="firebaseLocalStorageDb",C9=1,lg="firebaseLocalStorage",cO="fbase_key",Ko=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function fg(n,e){return n.transaction([lg],e?"readwrite":"readonly").objectStore(lg)}function T9(){let n=indexedDB.deleteDatabase(aO);return new Ko(n).toPromise()}function nI(){let n=indexedDB.open(aO,C9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(lg,{keyPath:cO})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(lg)?e(r):(r.close(),await T9(),e(await nI()))})})}async function NM(n,e,t){let r=fg(n,!0).put({[cO]:e,value:t});return new Ko(r).toPromise()}async function D9(n,e){let t=fg(n,!1).get(e),r=await new Ko(t).toPromise();return r===void 0?null:r.value}function MM(n,e){let t=fg(n,!0).delete(e);return new Ko(t).toPromise()}var A9=800,x9=3,R9=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nI(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>x9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=E9._getInstance(S9()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await w9(),!this.activeServiceWorker)return;this.sender=new tI(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||I9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await nI();return await NM(t,ag,"1"),await MM(t,ag),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>NM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>D9(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>MM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=fg(s,!1).getAll();return new Ko(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),lO=R9;var Jye=nO("rcb"),Zye=new Wo(3e4,6e4);function uO(n,e){return e?Mi(e):(me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var dd=class extends cd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function k9(n){return p9(n.auth,new dd(n),n.bypassAuthState)}function P9(n){let{auth:e,user:t}=n;return me(t,e,"internal-error"),f9(t,new dd(n),n.bypassAuthState)}async function N9(n){let{auth:e,user:t}=n;return me(t,e,"internal-error"),h9(t,new dd(n),n.bypassAuthState)}var ug=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return k9;case"linkViaPopup":case"linkViaRedirect":return N9;case"reauthViaPopup":case"reauthViaRedirect":return P9;default:ti(this.auth,"internal-error")}}resolve(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var M9=new Wo(2e3,1e4);async function SI(n,e,t){if($n(n.app))return Promise.reject(Pr(n,"operation-not-supported-in-this-environment"));let r=hg(n);jz(n,e,ld);let i=uO(r,t);return new O9(r,"signInViaPopup",e,i).executeNotNull()}var O9=(()=>{class n extends ug{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return me(t,this.auth,"internal-error"),t}async onExecution(){Oi(this.filter.length===1,"Popup operations only handle one event");let t=II();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,M9.get())};t()}}n.currentPopupAction=null;return n})(),F9="pendingRedirect",Jm=new Map,rI=class extends ug{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Jm.get(this.auth._key());if(!e){try{let r=await L9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jm.set(this.auth._key(),e)}return this.bypassAuthState||Jm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function L9(n,e){let t=B9(e),r=U9(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function V9(n,e){Jm.set(n._key(),e)}function U9(n){return Mi(n._redirectPersistence)}function B9(n){return Qm(F9,n.config.apiKey,n.name)}async function j9(n,e,t=!1){if($n(n.app))return Promise.reject(qo(n));let r=hg(n),i=uO(r,e),o=await new rI(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var $9=600*1e3,iI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!H9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!dO(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Pr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$9&&this.cachedEventUids.clear(),this.cachedEventUids.has(OM(e))}saveEventToCache(e){this.cachedEventUids.add(OM(e)),this.lastProcessedEventTime=Date.now()}};function OM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dO({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function H9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dO(n);default:return!1}}async function G9(n,e={}){return Ic(n,"GET","/v1/projects",e)}var z9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q9=/^https?/;async function W9(n){if(n.config.emulator)return;let{authorizedDomains:e}=await G9(n);for(let t of e)try{if(K9(t))return}catch{}ti(n,"unauthorized-domain")}function K9(n){let e=Ww(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!q9.test(t))return!1;if(z9.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Y9=new Wo(3e4,6e4);function FM(){let n=ei().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Q9(n){return new Promise((e,t)=>{var r,i,s;function o(){FM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FM(),t(Pr(n,"network-request-failed"))},timeout:Y9.get()})}if(!((i=(r=ei().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ei().gapi)===null||s===void 0)&&s.load)o();else{let a=nO("iframefcb");return ei()[a]=()=>{gapi.load?o():t(Pr(n,"network-request-failed"))},o9(`${a9()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Zm=null,e})}var Zm=null;function J9(n){return Zm=Zm||Q9(n),Zm}var Z9=new Wo(5e3,15e3),X9="__/auth/iframe",eq="emulator/auth/iframe",tq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rq(n){let e=n.config;me(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?lI(e,eq):`https://${n.config.authDomain}/${X9}`,r={apiKey:e.apiKey,appName:n.name,v:xs},i=nq.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${fc(r).slice(1)}`}async function iq(n){let e=await J9(n),t=ei().gapi;return me(t,n,"internal-error"),e.open({where:document.body,url:rq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Pr(n,"network-request-failed"),a=ei().setTimeout(()=>{s(o)},Z9.get());function c(){ei().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var sq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oq=500,aq=600,cq="_blank",lq="http://localhost",dg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function uq(n,e,t,r=oq,i=aq){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},sq),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Bt().toLowerCase();t&&(a=YM(u)?cq:t),WM(u)&&(e=e||lq,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[_,I])=>`${g}${_}=${I},`,"");if(t9(u)&&a!=="_self")return dq(e||"",a),new dg(null);let f=window.open(e||"",a,d);me(f,n,"popup-blocked");try{f.focus()}catch{}return new dg(f)}function dq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var hq="__/auth/handler",fq="emulator/auth/handler",pq=encodeURIComponent("fac");async function LM(n,e,t,r,i,s){me(n.config.authDomain,n,"auth-domain-config-required"),me(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:xs,eventId:i};if(e instanceof ld){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",hN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof og){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=await n._getAppCheckToken(),u=c?`#${pq}=${encodeURIComponent(c)}`:"";return`${mq(n)}?${fc(a).slice(1)}${u}`}function mq({config:n}){return n.emulator?lI(n,fq):`https://${n.authDomain}/${hq}`}var qw="webStorageSupport",sI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wI,this._completeRedirectFn=j9,this._overrideRedirectResult=V9}async _openPopup(e,t,r,i){var s;Oi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await LM(e,t,r,Ww(),i);return uq(e,o,II())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await LM(e,t,r,Ww(),i);return b9(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Oi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await iq(e),r=new iI(e);return t.register("authEvent",i=>(me(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qw,{type:qw},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[qw];o!==void 0&&t(!!o),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=W9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eO()||KM()||pI()}},hO=sI;var VM="@firebase/auth",UM="1.10.8";var oI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function gq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vq(n){xr(new _n("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tO(n)},u=new Xw(r,i,s,c);return c9(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xr(new _n("auth-internal",e=>{let t=hg(e.getProvider("auth").getImmediate());return(r=>new oI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bt(VM,UM,gq(n)),bt(VM,UM,"esm2017")}var _q=300,yq=Jb("authIdTokenMaxAge")||_q,BM=null,Eq=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>yq)return;let i=t?.token;BM!==i&&(BM=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function CI(n=Uo()){let e=pc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=gI(n,{popupRedirectResolver:hO,persistence:[lO,sO,wI]}),r=Jb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Eq(s.toString());EI(t,o,()=>o(t.currentUser)),yI(t,a=>o(a))}}let i=Yb("auth");return i&&vI(t,`http://${i}`),t}function bq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}s9({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Pr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",bq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vq("Browser");var fO="auth",Yo=class{constructor(e){return e}},hd=class{constructor(){return gc(fO)}};var TI=new Q("angularfire2.auth-instances");function hW(n,e){let t=Qu(fO,n,e);return t&&new Yo(t)}function fW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Yo(r)}}var pW={provide:hd,deps:[[new Vn,TI]]},mW={provide:Yo,useFactory:hW,deps:[[new Vn,TI],xi]};function pO(n,...e){return bt("angularfire",Rs.full,"auth"),gr([mW,pW,{provide:TI,useFactory:fW(n),multi:!0,deps:[Me,qe,ks,jo,[new Vn,vc],...e]}])}var mO=ft(TM,!0);var gO=ft(CI,!0);var vO=ft(SI,!0,2);var _O=ft(bI,!0,2);var yO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},EO={};var Fi,DI;(function(){var n;function e(T,w){function S(){}S.prototype=w.prototype,T.D=w.prototype,T.prototype=new S,T.prototype.constructor=T,T.C=function(D,A,N){for(var C=Array(arguments.length-2),Wn=2;Wn<arguments.length;Wn++)C[Wn-2]=arguments[Wn];return w.prototype[A].apply(D,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,w,S){S||(S=0);var D=Array(16);if(typeof w=="string")for(var A=0;16>A;++A)D[A]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(A=0;16>A;++A)D[A]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=T.g[0],S=T.g[1],A=T.g[2];var N=T.g[3],C=w+(N^S&(A^N))+D[0]+3614090360&4294967295;w=S+(C<<7&4294967295|C>>>25),C=N+(A^w&(S^A))+D[1]+3905402710&4294967295,N=w+(C<<12&4294967295|C>>>20),C=A+(S^N&(w^S))+D[2]+606105819&4294967295,A=N+(C<<17&4294967295|C>>>15),C=S+(w^A&(N^w))+D[3]+3250441966&4294967295,S=A+(C<<22&4294967295|C>>>10),C=w+(N^S&(A^N))+D[4]+4118548399&4294967295,w=S+(C<<7&4294967295|C>>>25),C=N+(A^w&(S^A))+D[5]+1200080426&4294967295,N=w+(C<<12&4294967295|C>>>20),C=A+(S^N&(w^S))+D[6]+2821735955&4294967295,A=N+(C<<17&4294967295|C>>>15),C=S+(w^A&(N^w))+D[7]+4249261313&4294967295,S=A+(C<<22&4294967295|C>>>10),C=w+(N^S&(A^N))+D[8]+1770035416&4294967295,w=S+(C<<7&4294967295|C>>>25),C=N+(A^w&(S^A))+D[9]+2336552879&4294967295,N=w+(C<<12&4294967295|C>>>20),C=A+(S^N&(w^S))+D[10]+4294925233&4294967295,A=N+(C<<17&4294967295|C>>>15),C=S+(w^A&(N^w))+D[11]+2304563134&4294967295,S=A+(C<<22&4294967295|C>>>10),C=w+(N^S&(A^N))+D[12]+1804603682&4294967295,w=S+(C<<7&4294967295|C>>>25),C=N+(A^w&(S^A))+D[13]+4254626195&4294967295,N=w+(C<<12&4294967295|C>>>20),C=A+(S^N&(w^S))+D[14]+2792965006&4294967295,A=N+(C<<17&4294967295|C>>>15),C=S+(w^A&(N^w))+D[15]+1236535329&4294967295,S=A+(C<<22&4294967295|C>>>10),C=w+(A^N&(S^A))+D[1]+4129170786&4294967295,w=S+(C<<5&4294967295|C>>>27),C=N+(S^A&(w^S))+D[6]+3225465664&4294967295,N=w+(C<<9&4294967295|C>>>23),C=A+(w^S&(N^w))+D[11]+643717713&4294967295,A=N+(C<<14&4294967295|C>>>18),C=S+(N^w&(A^N))+D[0]+3921069994&4294967295,S=A+(C<<20&4294967295|C>>>12),C=w+(A^N&(S^A))+D[5]+3593408605&4294967295,w=S+(C<<5&4294967295|C>>>27),C=N+(S^A&(w^S))+D[10]+38016083&4294967295,N=w+(C<<9&4294967295|C>>>23),C=A+(w^S&(N^w))+D[15]+3634488961&4294967295,A=N+(C<<14&4294967295|C>>>18),C=S+(N^w&(A^N))+D[4]+3889429448&4294967295,S=A+(C<<20&4294967295|C>>>12),C=w+(A^N&(S^A))+D[9]+568446438&4294967295,w=S+(C<<5&4294967295|C>>>27),C=N+(S^A&(w^S))+D[14]+3275163606&4294967295,N=w+(C<<9&4294967295|C>>>23),C=A+(w^S&(N^w))+D[3]+4107603335&4294967295,A=N+(C<<14&4294967295|C>>>18),C=S+(N^w&(A^N))+D[8]+1163531501&4294967295,S=A+(C<<20&4294967295|C>>>12),C=w+(A^N&(S^A))+D[13]+2850285829&4294967295,w=S+(C<<5&4294967295|C>>>27),C=N+(S^A&(w^S))+D[2]+4243563512&4294967295,N=w+(C<<9&4294967295|C>>>23),C=A+(w^S&(N^w))+D[7]+1735328473&4294967295,A=N+(C<<14&4294967295|C>>>18),C=S+(N^w&(A^N))+D[12]+2368359562&4294967295,S=A+(C<<20&4294967295|C>>>12),C=w+(S^A^N)+D[5]+4294588738&4294967295,w=S+(C<<4&4294967295|C>>>28),C=N+(w^S^A)+D[8]+2272392833&4294967295,N=w+(C<<11&4294967295|C>>>21),C=A+(N^w^S)+D[11]+1839030562&4294967295,A=N+(C<<16&4294967295|C>>>16),C=S+(A^N^w)+D[14]+4259657740&4294967295,S=A+(C<<23&4294967295|C>>>9),C=w+(S^A^N)+D[1]+2763975236&4294967295,w=S+(C<<4&4294967295|C>>>28),C=N+(w^S^A)+D[4]+1272893353&4294967295,N=w+(C<<11&4294967295|C>>>21),C=A+(N^w^S)+D[7]+4139469664&4294967295,A=N+(C<<16&4294967295|C>>>16),C=S+(A^N^w)+D[10]+3200236656&4294967295,S=A+(C<<23&4294967295|C>>>9),C=w+(S^A^N)+D[13]+681279174&4294967295,w=S+(C<<4&4294967295|C>>>28),C=N+(w^S^A)+D[0]+3936430074&4294967295,N=w+(C<<11&4294967295|C>>>21),C=A+(N^w^S)+D[3]+3572445317&4294967295,A=N+(C<<16&4294967295|C>>>16),C=S+(A^N^w)+D[6]+76029189&4294967295,S=A+(C<<23&4294967295|C>>>9),C=w+(S^A^N)+D[9]+3654602809&4294967295,w=S+(C<<4&4294967295|C>>>28),C=N+(w^S^A)+D[12]+3873151461&4294967295,N=w+(C<<11&4294967295|C>>>21),C=A+(N^w^S)+D[15]+530742520&4294967295,A=N+(C<<16&4294967295|C>>>16),C=S+(A^N^w)+D[2]+3299628645&4294967295,S=A+(C<<23&4294967295|C>>>9),C=w+(A^(S|~N))+D[0]+4096336452&4294967295,w=S+(C<<6&4294967295|C>>>26),C=N+(S^(w|~A))+D[7]+1126891415&4294967295,N=w+(C<<10&4294967295|C>>>22),C=A+(w^(N|~S))+D[14]+2878612391&4294967295,A=N+(C<<15&4294967295|C>>>17),C=S+(N^(A|~w))+D[5]+4237533241&4294967295,S=A+(C<<21&4294967295|C>>>11),C=w+(A^(S|~N))+D[12]+1700485571&4294967295,w=S+(C<<6&4294967295|C>>>26),C=N+(S^(w|~A))+D[3]+2399980690&4294967295,N=w+(C<<10&4294967295|C>>>22),C=A+(w^(N|~S))+D[10]+4293915773&4294967295,A=N+(C<<15&4294967295|C>>>17),C=S+(N^(A|~w))+D[1]+2240044497&4294967295,S=A+(C<<21&4294967295|C>>>11),C=w+(A^(S|~N))+D[8]+1873313359&4294967295,w=S+(C<<6&4294967295|C>>>26),C=N+(S^(w|~A))+D[15]+4264355552&4294967295,N=w+(C<<10&4294967295|C>>>22),C=A+(w^(N|~S))+D[6]+2734768916&4294967295,A=N+(C<<15&4294967295|C>>>17),C=S+(N^(A|~w))+D[13]+1309151649&4294967295,S=A+(C<<21&4294967295|C>>>11),C=w+(A^(S|~N))+D[4]+4149444226&4294967295,w=S+(C<<6&4294967295|C>>>26),C=N+(S^(w|~A))+D[11]+3174756917&4294967295,N=w+(C<<10&4294967295|C>>>22),C=A+(w^(N|~S))+D[2]+718787259&4294967295,A=N+(C<<15&4294967295|C>>>17),C=S+(N^(A|~w))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+N&4294967295}r.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var S=w-this.blockSize,D=this.B,A=this.h,N=0;N<w;){if(A==0)for(;N<=S;)i(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<w;)if(D[A++]=T.charCodeAt(N++),A==this.blockSize){i(this,D),A=0;break}}else for(;N<w;)if(D[A++]=T[N++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=w},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var S=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=S&255,S/=256;for(this.u(T),T=Array(16),w=S=0;4>w;++w)for(var D=0;32>D;D+=8)T[S++]=this.g[w]>>>D&255;return T};function s(T,w){var S=a;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=w(T)}function o(T,w){this.h=w;for(var S=[],D=!0,A=T.length-1;0<=A;A--){var N=T[A]|0;D&&N==w||(S[A]=N,D=!1)}this.g=S}var a={};function c(T){return-128<=T&&128>T?s(T,function(w){return new o([w|0],0>w?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return P(u(-T));for(var w=[],S=1,D=0;T>=S;D++)w[D]=T/S|0,S*=4294967296;return new o(w,0)}function d(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return P(d(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(w,8)),D=f,A=0;A<T.length;A+=8){var N=Math.min(8,T.length-A),C=parseInt(T.substring(A,A+N),w);8>N?(N=u(Math.pow(w,N)),D=D.j(N).add(u(C))):(D=D.j(S),D=D.add(u(C)))}return D}var f=c(0),g=c(1),_=c(16777216);n=o.prototype,n.m=function(){if(x(this))return-P(this).m();for(var T=0,w=1,S=0;S<this.g.length;S++){var D=this.i(S);T+=(0<=D?D:4294967296+D)*w,w*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(I(this))return"0";if(x(this))return"-"+P(this).toString(T);for(var w=u(Math.pow(T,6)),S=this,D="";;){var A=he(S,w).g;S=B(S,A.j(w));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(T);if(S=A,I(S))return N+D;for(;6>N.length;)N="0"+N;D=N+D}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function I(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function x(T){return T.h==-1}n.l=function(T){return T=B(this,T),x(T)?-1:I(T)?0:1};function P(T){for(var w=T.g.length,S=[],D=0;D<w;D++)S[D]=~T.g[D];return new o(S,~T.h).add(g)}n.abs=function(){return x(this)?P(this):this},n.add=function(T){for(var w=Math.max(this.g.length,T.g.length),S=[],D=0,A=0;A<=w;A++){var N=D+(this.i(A)&65535)+(T.i(A)&65535),C=(N>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);D=C>>>16,N&=65535,C&=65535,S[A]=C<<16|N}return new o(S,S[S.length-1]&-2147483648?-1:0)};function B(T,w){return T.add(P(w))}n.j=function(T){if(I(this)||I(T))return f;if(x(this))return x(T)?P(this).j(P(T)):P(P(this).j(T));if(x(T))return P(this.j(P(T)));if(0>this.l(_)&&0>T.l(_))return u(this.m()*T.m());for(var w=this.g.length+T.g.length,S=[],D=0;D<2*w;D++)S[D]=0;for(D=0;D<this.g.length;D++)for(var A=0;A<T.g.length;A++){var N=this.i(D)>>>16,C=this.i(D)&65535,Wn=T.i(A)>>>16,Ki=T.i(A)&65535;S[2*D+2*A]+=C*Ki,Y(S,2*D+2*A),S[2*D+2*A+1]+=N*Ki,Y(S,2*D+2*A+1),S[2*D+2*A+1]+=C*Wn,Y(S,2*D+2*A+1),S[2*D+2*A+2]+=N*Wn,Y(S,2*D+2*A+2)}for(D=0;D<w;D++)S[D]=S[2*D+1]<<16|S[2*D];for(D=w;D<2*w;D++)S[D]=0;return new o(S,0)};function Y(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function ee(T,w){this.g=T,this.h=w}function he(T,w){if(I(w))throw Error("division by zero");if(I(T))return new ee(f,f);if(x(T))return w=he(P(T),w),new ee(P(w.g),P(w.h));if(x(w))return w=he(T,P(w)),new ee(P(w.g),w.h);if(30<T.g.length){if(x(T)||x(w))throw Error("slowDivide_ only works with positive integers.");for(var S=g,D=w;0>=D.l(T);)S=We(S),D=We(D);var A=Ce(S,1),N=Ce(D,1);for(D=Ce(D,2),S=Ce(S,2);!I(D);){var C=N.add(D);0>=C.l(T)&&(A=A.add(S),N=C),D=Ce(D,1),S=Ce(S,1)}return w=B(T,A.j(w)),new ee(A,w)}for(A=f;0<=T.l(w);){for(S=Math.max(1,Math.floor(T.m()/w.m())),D=Math.ceil(Math.log(S)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),N=u(S),C=N.j(w);x(C)||0<C.l(T);)S-=D,N=u(S),C=N.j(w);I(N)&&(N=g),A=A.add(N),T=B(T,C)}return new ee(A,T)}n.A=function(T){return he(this,T).h},n.and=function(T){for(var w=Math.max(this.g.length,T.g.length),S=[],D=0;D<w;D++)S[D]=this.i(D)&T.i(D);return new o(S,this.h&T.h)},n.or=function(T){for(var w=Math.max(this.g.length,T.g.length),S=[],D=0;D<w;D++)S[D]=this.i(D)|T.i(D);return new o(S,this.h|T.h)},n.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),S=[],D=0;D<w;D++)S[D]=this.i(D)^T.i(D);return new o(S,this.h^T.h)};function We(T){for(var w=T.g.length+1,S=[],D=0;D<w;D++)S[D]=T.i(D)<<1|T.i(D-1)>>>31;return new o(S,T.h)}function Ce(T,w){var S=w>>5;w%=32;for(var D=T.g.length-S,A=[],N=0;N<D;N++)A[N]=0<w?T.i(N+S)>>>w|T.i(N+S+1)<<32-w:T.i(N+S);return new o(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,DI=EO.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Fi=EO.Integer=o}).apply(typeof yO<"u"?yO:typeof self<"u"?self:typeof window<"u"?window:{});var pg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Li={};var AI,vW,Sc,xI,fd,mg,RI,kI,PI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof pg=="object"&&pg];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var k=l[E];if(!(k in p))break e;p=p[k]}l=l[l.length-1],E=p[l],h=h(E),h!=E&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,E=!1,k={next:function(){if(!E&&p<l.length){var L=p++;return{value:h(L,l[L]),done:!1}}return E=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,E),l.apply(h,k)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function _(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function I(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(E,k,L){for(var W=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)W[Je-2]=arguments[Je];return h.prototype[k].apply(E,W)}}function x(l){let h=l.length;if(0<h){let p=Array(h);for(let E=0;E<h;E++)p[E]=l[E];return p}return[]}function P(l,h){for(let p=1;p<arguments.length;p++){let E=arguments[p];if(c(E)){let k=l.length||0,L=E.length||0;l.length=k+L;for(let W=0;W<L;W++)l[k+W]=E[W]}else l.push(E)}}class B{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function Y(l){return/^[\s\xa0]*$/.test(l)}function ee(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function he(l){return he[" "](l),l}he[" "]=function(){};var We=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function Ce(l,h,p){for(let E in l)h.call(p,l[E],E,l)}function T(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function w(l){let h={};for(let p in l)h[p]=l[p];return h}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,h){let p,E;for(let k=1;k<arguments.length;k++){E=arguments[k];for(p in E)l[p]=E[p];for(let L=0;L<S.length;L++)p=S[L],Object.prototype.hasOwnProperty.call(E,p)&&(l[p]=E[p])}}function A(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function N(l){a.setTimeout(()=>{throw l},0)}function C(){var l=ke;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Wn{constructor(){this.h=this.g=null}add(h,p){let E=Ki.get();E.set(h,p),this.h?this.h.next=E:this.g=E,this.h=E}}var Ki=new B(()=>new te,l=>l.reset());class te{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ce=!1,ke=new Wn,It=()=>{let l=a.Promise.resolve(void 0);ie=()=>{l.then(Kn)}};var Kn=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(p){N(p)}var h=Ki;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}ce=!1};function mt(){this.s=this.s,this.C=this.C}mt.prototype.s=!1,mt.prototype.ma=function(){this.s||(this.s=!0,this.N())},mt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var ot=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l})();function Yi(l,h){if(st.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(We){e:{try{he(h.nodeName);var k=!0;break e}catch{}k=!1}k||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:i_[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Yi.aa.h.call(this)}}I(Yi,st);var i_={2:"touch",3:"pen",4:"mouse"};Yi.prototype.h=function(){Yi.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),ui=0;function wn(l,h,p,E,k){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!E,this.ha=k,this.key=++ui,this.da=this.fa=!1}function di(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Qi(l){this.src=l,this.g={},this.h=0}Qi.prototype.add=function(l,h,p,E,k){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var W=o_(l,h,E,k);return-1<W?(h=l[W],p||(h.fa=!1)):(h=new wn(h,this.src,L,!!E,k),h.fa=p,l.push(h)),h};function s_(l,h){var p=h.type;if(p in l.g){var E=l.g[p],k=Array.prototype.indexOf.call(E,h,void 0),L;(L=0<=k)&&Array.prototype.splice.call(E,k,1),L&&(di(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function o_(l,h,p,E){for(var k=0;k<l.length;++k){var L=l[k];if(!L.da&&L.listener==h&&L.capture==!!p&&L.ha==E)return k}return-1}var a_="closure_lm_"+(1e6*Math.random()|0),c_={};function sD(l,h,p,E,k){if(E&&E.once)return aD(l,h,p,E,k);if(Array.isArray(h)){for(var L=0;L<h.length;L++)sD(l,h[L],p,E,k);return null}return p=h_(p),l&&l[gt]?l.K(h,p,u(E)?!!E.capture:!!E,k):oD(l,h,p,!1,E,k)}function oD(l,h,p,E,k,L){if(!h)throw Error("Invalid event type");var W=u(k)?!!k.capture:!!k,Je=u_(l);if(Je||(l[a_]=Je=new Qi(l)),p=Je.add(h,p,E,W,L),p.proxy)return p;if(E=dU(),p.proxy=E,E.src=l,E.listener=p,l.addEventListener)ot||(k=W),k===void 0&&(k=!1),l.addEventListener(h.toString(),E,k);else if(l.attachEvent)l.attachEvent(lD(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function dU(){function l(p){return h.call(l.src,l.listener,p)}let h=hU;return l}function aD(l,h,p,E,k){if(Array.isArray(h)){for(var L=0;L<h.length;L++)aD(l,h[L],p,E,k);return null}return p=h_(p),l&&l[gt]?l.L(h,p,u(E)?!!E.capture:!!E,k):oD(l,h,p,!0,E,k)}function cD(l,h,p,E,k){if(Array.isArray(h))for(var L=0;L<h.length;L++)cD(l,h[L],p,E,k);else E=u(E)?!!E.capture:!!E,p=h_(p),l&&l[gt]?(l=l.i,h=String(h).toString(),h in l.g&&(L=l.g[h],p=o_(L,p,E,k),-1<p&&(di(L[p]),Array.prototype.splice.call(L,p,1),L.length==0&&(delete l.g[h],l.h--)))):l&&(l=u_(l))&&(h=l.g[h.toString()],l=-1,h&&(l=o_(h,p,E,k)),(p=-1<l?h[l]:null)&&l_(p))}function l_(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[gt])s_(h.i,l);else{var p=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(p,E,l.capture):h.detachEvent?h.detachEvent(lD(p),E):h.addListener&&h.removeListener&&h.removeListener(E),(p=u_(h))?(s_(p,l),p.h==0&&(p.src=null,h[a_]=null)):di(l)}}}function lD(l){return l in c_?c_[l]:c_[l]="on"+l}function hU(l,h){if(l.da)l=!0;else{h=new Yi(h,this);var p=l.listener,E=l.ha||l.src;l.fa&&l_(l),l=p.call(E,h)}return l}function u_(l){return l=l[a_],l instanceof Qi?l:null}var d_="__closure_events_fn_"+(1e9*Math.random()>>>0);function h_(l){return typeof l=="function"?l:(l[d_]||(l[d_]=function(h){return l.handleEvent(h)}),l[d_])}function Qt(){mt.call(this),this.i=new Qi(this),this.M=this,this.F=null}I(Qt,mt),Qt.prototype[gt]=!0,Qt.prototype.removeEventListener=function(l,h,p,E){cD(this,l,h,p,E)};function cn(l,h){var p,E=l.F;if(E)for(p=[];E;E=E.F)p.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new st(h,l);else if(h instanceof st)h.target=h.target||l;else{var k=h;h=new st(E,l),D(h,k)}if(k=!0,p)for(var L=p.length-1;0<=L;L--){var W=h.g=p[L];k=Eh(W,E,!0,h)&&k}if(W=h.g=l,k=Eh(W,E,!0,h)&&k,k=Eh(W,E,!1,h)&&k,p)for(L=0;L<p.length;L++)W=h.g=p[L],k=Eh(W,E,!1,h)&&k}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],E=0;E<p.length;E++)di(p[E]);delete l.g[h],l.h--}}this.F=null},Qt.prototype.K=function(l,h,p,E){return this.i.add(String(l),h,!1,p,E)},Qt.prototype.L=function(l,h,p,E){return this.i.add(String(l),h,!0,p,E)};function Eh(l,h,p,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var k=!0,L=0;L<h.length;++L){var W=h[L];if(W&&!W.da&&W.capture==p){var Je=W.listener,Gt=W.ha||W.src;W.fa&&s_(l.i,W),k=Je.call(Gt,E)!==!1&&k}}return k&&!E.defaultPrevented}function uD(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function dD(l){l.g=uD(()=>{l.g=null,l.i&&(l.i=!1,dD(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class fU extends mt{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:dD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _l(l){mt.call(this),this.h=l,this.g={}}I(_l,mt);var hD=[];function fD(l){Ce(l.g,function(h,p){this.g.hasOwnProperty(p)&&l_(h)},l),l.g={}}_l.prototype.N=function(){_l.aa.N.call(this),fD(this)},_l.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var f_=a.JSON.stringify,pU=a.JSON.parse,mU=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function p_(){}p_.prototype.h=null;function pD(l){return l.h||(l.h=l.i())}function mD(){}var yl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function m_(){st.call(this,"d")}I(m_,st);function g_(){st.call(this,"c")}I(g_,st);var Ys={},gD=null;function bh(){return gD=gD||new Qt}Ys.La="serverreachability";function vD(l){st.call(this,Ys.La,l)}I(vD,st);function El(l){let h=bh();cn(h,new vD(h))}Ys.STAT_EVENT="statevent";function _D(l,h){st.call(this,Ys.STAT_EVENT,l),this.stat=h}I(_D,st);function ln(l){let h=bh();cn(h,new _D(h,l))}Ys.Ma="timingevent";function yD(l,h){st.call(this,Ys.Ma,l),this.size=h}I(yD,st);function bl(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function wl(){this.g=!0}wl.prototype.xa=function(){this.g=!1};function gU(l,h,p,E,k,L){l.info(function(){if(l.g)if(L)for(var W="",Je=L.split("&"),Gt=0;Gt<Je.length;Gt++){var Ue=Je[Gt].split("=");if(1<Ue.length){var Jt=Ue[0];Ue=Ue[1];var Zt=Jt.split("_");W=2<=Zt.length&&Zt[1]=="type"?W+(Jt+"="+Ue+"&"):W+(Jt+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+E+") [attempt "+k+"]: "+h+`
`+p+`
`+W})}function vU(l,h,p,E,k,L,W){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+k+"]: "+h+`
`+p+`
`+L+" "+W})}function ya(l,h,p,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+yU(l,p)+(E?" "+E:"")})}function _U(l,h){l.info(function(){return"TIMEOUT: "+h})}wl.prototype.info=function(){};function yU(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var E=p[l];if(!(2>E.length)){var k=E[1];if(Array.isArray(k)&&!(1>k.length)){var L=k[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<k.length;W++)k[W]=""}}}}return f_(p)}catch{return h}}var wh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ED={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},v_;function Ih(){}I(Ih,p_),Ih.prototype.g=function(){return new XMLHttpRequest},Ih.prototype.i=function(){return{}},v_=new Ih;function Ji(l,h,p,E){this.j=l,this.i=h,this.l=p,this.R=E||1,this.U=new _l(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bD}function bD(){this.i=null,this.g="",this.h=!1}var wD={},__={};function y_(l,h,p){l.L=1,l.v=Dh(hi(h)),l.m=p,l.P=!0,ID(l,null)}function ID(l,h){l.F=Date.now(),Sh(l),l.A=hi(l.v);var p=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),LD(p.i,"t",E),l.C=0,p=l.j.J,l.h=new bD,l.g=tA(l.j,p?h:null,!l.m),0<l.O&&(l.M=new fU(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,E=l.ca;var k="readystatechange";Array.isArray(k)||(k&&(hD[0]=k.toString()),k=hD);for(var L=0;L<k.length;L++){var W=sD(p,k[L],E||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),El(),gU(l.i,l.u,l.A,l.l,l.R,l.m)}Ji.prototype.ca=function(l){l=l.target;let h=this.M;h&&fi(l)==3?h.j():this.Y(l)},Ji.prototype.Y=function(l){try{if(l==this.g)e:{let Zt=fi(this.g);var h=this.g.Ba();let wa=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||GD(this.g)))){this.J||Zt!=4||h==7||(h==8||0>=wa?El(3):El(2)),E_(this);var p=this.g.Z();this.X=p;t:if(SD(this)){var E=GD(this.g);l="";var k=E.length,L=fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qs(this),Il(this);var W="";break t}this.h.i=new a.TextDecoder}for(h=0;h<k;h++)this.h.h=!0,l+=this.h.i.decode(E[h],{stream:!(L&&h==k-1)});E.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,vU(this.i,this.u,this.A,this.l,this.R,Zt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Gt=this.g;if((Je=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Je)){var Ue=Je;break t}}Ue=null}if(p=Ue)ya(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,b_(this,p);else{this.o=!1,this.s=3,ln(12),Qs(this),Il(this);break e}}if(this.P){p=!0;let fr;for(;!this.J&&this.C<W.length;)if(fr=EU(this,W),fr==__){Zt==4&&(this.s=4,ln(14),p=!1),ya(this.i,this.l,null,"[Incomplete Response]");break}else if(fr==wD){this.s=4,ln(15),ya(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else ya(this.i,this.l,fr,null),b_(this,fr);if(SD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||W.length!=0||this.h.h||(this.s=1,ln(16),p=!1),this.o=this.o&&p,!p)ya(this.i,this.l,W,"[Invalid Chunked Response]"),Qs(this),Il(this);else if(0<W.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),D_(Jt),Jt.M=!0,ln(11))}}else ya(this.i,this.l,W,null),b_(this,W);Zt==4&&Qs(this),this.o&&!this.J&&(Zt==4?JD(this.j,this):(this.o=!1,Sh(this)))}else LU(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,ln(12)):(this.s=0,ln(13)),Qs(this),Il(this)}}}catch{}finally{}};function SD(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function EU(l,h){var p=l.C,E=h.indexOf(`
`,p);return E==-1?__:(p=Number(h.substring(p,E)),isNaN(p)?wD:(E+=1,E+p>h.length?__:(h=h.slice(E,E+p),l.C=E+p,h)))}Ji.prototype.cancel=function(){this.J=!0,Qs(this)};function Sh(l){l.S=Date.now()+l.I,CD(l,l.I)}function CD(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=bl(g(l.ba,l),h)}function E_(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ji.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(_U(this.i,this.A),this.L!=2&&(El(),ln(17)),Qs(this),this.s=2,Il(this)):CD(this,this.S-l)};function Il(l){l.j.G==0||l.J||JD(l.j,l)}function Qs(l){E_(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,fD(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function b_(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||w_(p.h,l))){if(!l.K&&w_(p.h,l)&&p.G==3){try{var E=p.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var k=E;if(k[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Ph(p),Rh(p);else break e;T_(p),ln(18)}}else p.za=k[1],0<p.za-p.T&&37500>k[2]&&p.F&&p.v==0&&!p.C&&(p.C=bl(g(p.Za,p),6e3));if(1>=AD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Zs(p,11)}else if((l.K||p.g==l)&&Ph(p),!Y(h))for(k=p.Da.g.parse(h),h=0;h<k.length;h++){let Ue=k[h];if(p.T=Ue[0],Ue=Ue[1],p.G==2)if(Ue[0]=="c"){p.K=Ue[1],p.ia=Ue[2];let Jt=Ue[3];Jt!=null&&(p.la=Jt,p.j.info("VER="+p.la));let Zt=Ue[4];Zt!=null&&(p.Aa=Zt,p.j.info("SVER="+p.Aa));let wa=Ue[5];wa!=null&&typeof wa=="number"&&0<wa&&(E=1.5*wa,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;let fr=l.g;if(fr){let Mh=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mh){var L=E.h;L.g||Mh.indexOf("spdy")==-1&&Mh.indexOf("quic")==-1&&Mh.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(I_(L,L.h),L.h=null))}if(E.D){let A_=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;A_&&(E.ya=A_,at(E.I,E.D,A_))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var W=l;if(E.qa=eA(E,E.J?E.ia:null,E.W),W.K){xD(E.h,W);var Je=W,Gt=E.L;Gt&&(Je.I=Gt),Je.B&&(E_(Je),Sh(Je)),E.g=W}else YD(E);0<p.i.length&&kh(p)}else Ue[0]!="stop"&&Ue[0]!="close"||Zs(p,7);else p.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Zs(p,7):C_(p):Ue[0]!="noop"&&p.l&&p.l.ta(Ue),p.v=0)}}El(4)}catch{}}var bU=class{constructor(l,h){this.g=l,this.map=h}};function TD(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function DD(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function AD(l){return l.h?1:l.g?l.g.size:0}function w_(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function I_(l,h){l.g?l.g.add(h):l.h=h}function xD(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}TD.prototype.cancel=function(){if(this.i=RD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function RD(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return x(l.i)}function wU(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,E=0;E<p;E++)h.push(l[E]);return h}h=[],p=0;for(E in l)h[p++]=l[E];return h}function IU(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let E in l)h[p++]=E;return h}}}function kD(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=IU(l),E=wU(l),k=E.length,L=0;L<k;L++)h.call(void 0,E[L],p&&p[L],l)}var PD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SU(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var E=l[p].indexOf("="),k=null;if(0<=E){var L=l[p].substring(0,E);k=l[p].substring(E+1)}else L=l[p];h(L,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Js(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Js){this.h=l.h,Ch(this,l.j),this.o=l.o,this.g=l.g,Th(this,l.s),this.l=l.l;var h=l.i,p=new Tl;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),ND(this,p),this.m=l.m}else l&&(h=String(l).match(PD))?(this.h=!1,Ch(this,h[1]||"",!0),this.o=Sl(h[2]||""),this.g=Sl(h[3]||"",!0),Th(this,h[4]),this.l=Sl(h[5]||"",!0),ND(this,h[6]||"",!0),this.m=Sl(h[7]||"")):(this.h=!1,this.i=new Tl(null,this.h))}Js.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Cl(h,MD,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Cl(h,MD,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Cl(p,p.charAt(0)=="/"?DU:TU,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Cl(p,xU)),l.join("")};function hi(l){return new Js(l)}function Ch(l,h,p){l.j=p?Sl(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Th(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function ND(l,h,p){h instanceof Tl?(l.i=h,RU(l.i,l.h)):(p||(h=Cl(h,AU)),l.i=new Tl(h,l.h))}function at(l,h,p){l.i.set(h,p)}function Dh(l){return at(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Sl(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Cl(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,CU),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function CU(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var MD=/[#\/\?@]/g,TU=/[#\?:]/g,DU=/[#\?]/g,AU=/[#\?@]/g,xU=/#/g;function Tl(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Zi(l){l.g||(l.g=new Map,l.h=0,l.i&&SU(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Tl.prototype,n.add=function(l,h){Zi(this),this.i=null,l=Ea(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function OD(l,h){Zi(l),h=Ea(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function FD(l,h){return Zi(l),h=Ea(l,h),l.g.has(h)}n.forEach=function(l,h){Zi(this),this.g.forEach(function(p,E){p.forEach(function(k){l.call(h,k,E,this)},this)},this)},n.na=function(){Zi(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let E=0;E<h.length;E++){let k=l[E];for(let L=0;L<k.length;L++)p.push(h[E])}return p},n.V=function(l){Zi(this);let h=[];if(typeof l=="string")FD(this,l)&&(h=h.concat(this.g.get(Ea(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return Zi(this),this.i=null,l=Ea(this,l),FD(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function LD(l,h,p){OD(l,h),0<p.length&&(l.i=null,l.g.set(Ea(l,h),x(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var E=h[p];let L=encodeURIComponent(String(E)),W=this.V(E);for(E=0;E<W.length;E++){var k=L;W[E]!==""&&(k+="="+encodeURIComponent(String(W[E]))),l.push(k)}}return this.i=l.join("&")};function Ea(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function RU(l,h){h&&!l.j&&(Zi(l),l.i=null,l.g.forEach(function(p,E){var k=E.toLowerCase();E!=k&&(OD(this,E),LD(this,k,p))},l)),l.j=h}function kU(l,h){let p=new wl;if(a.Image){let E=new Image;E.onload=_(Xi,p,"TestLoadImage: loaded",!0,h,E),E.onerror=_(Xi,p,"TestLoadImage: error",!1,h,E),E.onabort=_(Xi,p,"TestLoadImage: abort",!1,h,E),E.ontimeout=_(Xi,p,"TestLoadImage: timeout",!1,h,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function PU(l,h){let p=new wl,E=new AbortController,k=setTimeout(()=>{E.abort(),Xi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(L=>{clearTimeout(k),L.ok?Xi(p,"TestPingServer: ok",!0,h):Xi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(k),Xi(p,"TestPingServer: error",!1,h)})}function Xi(l,h,p,E,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),E(p)}catch{}}function NU(){this.g=new mU}function MU(l,h,p){let E=p||"";try{kD(l,function(k,L){let W=k;u(k)&&(W=f_(k)),h.push(E+L+"="+encodeURIComponent(W))})}catch(k){throw h.push(E+"type="+encodeURIComponent("_badmap")),k}}function Dl(l){this.l=l.Ub||null,this.j=l.eb||!1}I(Dl,p_),Dl.prototype.g=function(){return new Ah(this.l,this.j)},Dl.prototype.i=(function(l){return function(){return l}})({});function Ah(l,h){Qt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Ah,Qt),n=Ah.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,xl(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Al(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,xl(this)),this.g&&(this.readyState=3,xl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;VD(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function VD(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Al(this):xl(this),this.readyState==3&&VD(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Al(this))},n.Qa=function(l){this.g&&(this.response=l,Al(this))},n.ga=function(){this.g&&Al(this)};function Al(l){l.readyState=4,l.l=null,l.j=null,l.v=null,xl(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function xl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ah.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function UD(l){let h="";return Ce(l,function(p,E){h+=E,h+=":",h+=p,h+=`\r
`}),h}function S_(l,h,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=UD(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):at(l,h,p))}function vt(l){Qt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(vt,Qt);var OU=/^https?$/i,FU=["POST","PUT"];n=vt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():v_.g(),this.v=this.o?pD(this.o):pD(v_),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(L){BD(this,L);return}if(l=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var k in E)p.set(k,E[k]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(let L of E.keys())p.set(L,E.get(L));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),k=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(FU,h,void 0))||E||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,W]of p)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{HD(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){BD(this,L)}};function BD(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,jD(l),xh(l)}function jD(l){l.A||(l.A=!0,cn(l,"complete"),cn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,cn(this,"complete"),cn(this,"abort"),xh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xh(this,!0)),vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$D(this):this.bb())},n.bb=function(){$D(this)};function $D(l){if(l.h&&typeof o<"u"&&(!l.v[1]||fi(l)!=4||l.Z()!=2)){if(l.u&&fi(l)==4)uD(l.Ea,0,l);else if(cn(l,"readystatechange"),fi(l)==4){l.h=!1;try{let W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var E;if(E=W===0){var k=String(l.D).match(PD)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),E=!OU.test(k?k.toLowerCase():"")}p=E}if(p)cn(l,"complete"),cn(l,"success");else{l.m=6;try{var L=2<fi(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",jD(l)}}finally{xh(l)}}}}function xh(l,h){if(l.g){HD(l);let p=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||cn(l,"ready");try{p.onreadystatechange=E}catch{}}}function HD(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function fi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<fi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),pU(h)}};function GD(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function LU(l){let h={};l=(l.g&&2<=fi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(Y(l[E]))continue;var p=A(l[E]);let k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let L=h[k]||[];h[k]=L,L.push(p)}T(h,function(E){return E.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function zD(l){this.Aa=0,this.i=[],this.j=new wl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rl("baseRetryDelayMs",5e3,l),this.cb=Rl("retryDelaySeedMs",1e4,l),this.Wa=Rl("forwardChannelMaxRetries",2,l),this.wa=Rl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new TD(l&&l.concurrentRequestLimit),this.Da=new NU,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zD.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,E){ln(0),this.W=l,this.H=h||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=eA(this,null,this.W),kh(this)};function C_(l){if(qD(l),l.G==3){var h=l.U++,p=hi(l.I);if(at(p,"SID",l.K),at(p,"RID",h),at(p,"TYPE","terminate"),kl(l,p),h=new Ji(l,l.j,h),h.L=2,h.v=Dh(hi(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=tA(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Sh(h)}XD(l)}function Rh(l){l.g&&(D_(l),l.g.cancel(),l.g=null)}function qD(l){Rh(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ph(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function kh(l){if(!DD(l.h)&&!l.s){l.s=!0;var h=l.Ga;ie||It(),ce||(ie(),ce=!0),ke.add(h,l),l.B=0}}function VU(l,h){return AD(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=bl(g(l.Ga,l,h),ZD(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let k=new Ji(this,this.j,l),L=this.o;if(this.S&&(L?(L=w(L),D(L,this.S)):L=this.S),this.m!==null||this.O||(k.H=L,L=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=KD(this,k,h),p=hi(this.I),at(p,"RID",l),at(p,"CVER",22),this.D&&at(p,"X-HTTP-Session-Id",this.D),kl(this,p),L&&(this.O?h="headers="+encodeURIComponent(String(UD(L)))+"&"+h:this.m&&S_(p,this.m,L)),I_(this.h,k),this.Ua&&at(p,"TYPE","init"),this.P?(at(p,"$req",h),at(p,"SID","null"),k.T=!0,y_(k,p,null)):y_(k,p,h),this.G=2}}else this.G==3&&(l?WD(this,l):this.i.length==0||DD(this.h)||WD(this))};function WD(l,h){var p;h?p=h.l:p=l.U++;let E=hi(l.I);at(E,"SID",l.K),at(E,"RID",p),at(E,"AID",l.T),kl(l,E),l.m&&l.o&&S_(E,l.m,l.o),p=new Ji(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=KD(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),I_(l.h,p),y_(p,E,h)}function kl(l,h){l.H&&Ce(l.H,function(p,E){at(h,E,p)}),l.l&&kD({},function(p,E){at(h,E,p)})}function KD(l,h,p){p=Math.min(l.i.length,p);var E=l.l?g(l.l.Na,l.l,l):null;e:{var k=l.i;let L=-1;for(;;){let W=["count="+p];L==-1?0<p?(L=k[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let Je=!0;for(let Gt=0;Gt<p;Gt++){let Ue=k[Gt].g,Jt=k[Gt].map;if(Ue-=L,0>Ue)L=Math.max(0,k[Gt].g-100),Je=!1;else try{MU(Jt,W,"req"+Ue+"_")}catch{E&&E(Jt)}}if(Je){E=W.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,E}function YD(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ie||It(),ce||(ie(),ce=!0),ke.add(h,l),l.v=0}}function T_(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=bl(g(l.Fa,l),ZD(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,QD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=bl(g(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ln(10),Rh(this),QD(this))};function D_(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function QD(l){l.g=new Ji(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=hi(l.qa);at(h,"RID","rpc"),at(h,"SID",l.K),at(h,"AID",l.T),at(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&at(h,"TO",l.ja),at(h,"TYPE","xmlhttp"),kl(l,h),l.m&&l.o&&S_(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Dh(hi(h)),p.m=null,p.P=!0,ID(p,l)}n.Za=function(){this.C!=null&&(this.C=null,Rh(this),T_(this),ln(19))};function Ph(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function JD(l,h){var p=null;if(l.g==h){Ph(l),D_(l),l.g=null;var E=2}else if(w_(l.h,h))p=h.D,xD(l.h,h),E=1;else return;if(l.G!=0){if(h.o)if(E==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var k=l.B;E=bh(),cn(E,new yD(E,p)),kh(l)}else YD(l);else if(k=h.s,k==3||k==0&&0<h.X||!(E==1&&VU(l,h)||E==2&&T_(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),k){case 1:Zs(l,5);break;case 4:Zs(l,10);break;case 3:Zs(l,6);break;default:Zs(l,2)}}}function ZD(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Zs(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),E=l.Xa;let k=!E;E=new Js(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ch(E,"https"),Dh(E),k?kU(E.toString(),p):PU(E.toString(),p)}else ln(2);l.G=0,l.l&&l.l.sa(h),XD(l),qD(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function XD(l){if(l.G=0,l.ka=[],l.l){let h=RD(l.h);(h.length!=0||l.i.length!=0)&&(P(l.ka,h),P(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function eA(l,h,p){var E=p instanceof Js?hi(p):new Js(p);if(E.g!="")h&&(E.g=h+"."+E.g),Th(E,E.s);else{var k=a.location;E=k.protocol,h=h?h+"."+k.hostname:k.hostname,k=+k.port;var L=new Js(null);E&&Ch(L,E),h&&(L.g=h),k&&Th(L,k),p&&(L.l=p),E=L}return p=l.D,h=l.ya,p&&h&&at(E,p,h),at(E,"VER",l.la),kl(l,E),E}function tA(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new vt(new Dl({eb:p})):new vt(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nA(){}n=nA.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Nh(){}Nh.prototype.g=function(l,h){return new Fn(l,h)};function Fn(l,h){Qt.call(this),this.g=new zD(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!Y(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!Y(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new ba(this)}I(Fn,Qt),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){C_(this.g)},Fn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=f_(l),l=p);h.i.push(new bU(h.Ya++,l)),h.G==3&&kh(h)},Fn.prototype.N=function(){this.g.l=null,delete this.j,C_(this.g),delete this.g,Fn.aa.N.call(this)};function rA(l){m_.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}I(rA,m_);function iA(){g_.call(this),this.status=1}I(iA,g_);function ba(l){this.g=l}I(ba,nA),ba.prototype.ua=function(){cn(this.g,"a")},ba.prototype.ta=function(l){cn(this.g,new rA(l))},ba.prototype.sa=function(l){cn(this.g,new iA)},ba.prototype.ra=function(){cn(this.g,"b")},Nh.prototype.createWebChannel=Nh.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,PI=Li.createWebChannelTransport=function(){return new Nh},kI=Li.getStatEventTarget=function(){return bh()},RI=Li.Event=Ys,mg=Li.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wh.NO_ERROR=0,wh.TIMEOUT=8,wh.HTTP_ERROR=6,fd=Li.ErrorCode=wh,ED.COMPLETE="complete",xI=Li.EventType=ED,mD.EventType=yl,yl.OPEN="a",yl.CLOSE="b",yl.ERROR="c",yl.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,Sc=Li.WebChannel=mD,vW=Li.FetchXmlHttpFactory=Dl,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,AI=Li.XhrIo=vt}).apply(typeof pg<"u"?pg:typeof self<"u"?self:typeof window<"u"?window:{});var bO="@firebase/firestore",wO="4.8.0";var jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");var qc="11.10.0";var Xo=new Jr("@firebase/firestore");function Cc(){return Xo.logLevel}function X(n,...e){if(Xo.logLevel<=Pe.DEBUG){let t=e.map(bC);Xo.debug(`Firestore (${qc}): ${n}`,...t)}}function Ui(n,...e){if(Xo.logLevel<=Pe.ERROR){let t=e.map(bC);Xo.error(`Firestore (${qc}): ${n}`,...t)}}function js(n,...e){if(Xo.logLevel<=Pe.WARN){let t=e.map(bC);Xo.warn(`Firestore (${qc}): ${n}`,...t)}}function bC(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ue(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,pF(n,r,t)}function pF(n,e,t){let r=`FIRESTORE (${qc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ui(r),new Error(r)}function Le(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||pF(e,i,r)}function _e(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends jn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var cr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var wg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},FI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jt.UNAUTHENTICATED))}shutdown(){}},LI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},VI=class{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Le(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string",31837,{l:r}),new wg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new jt(e)}},UI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},BI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new UI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ig=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},jI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Le(this.o===void 0,3512);let r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ig(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Le(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ig(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function _W(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function mF(){return new TextEncoder}var bd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=_W(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function xe(n,e){return n<e?-1:n>e?1:0}function $I(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return xe(r,i);{let s=mF(),o=yW(s.encode(IO(n,t)),s.encode(IO(e,t)));return o!==0?o:xe(r,i)}}t+=r>65535?2:1}return xe(n.length,e.length)}function IO(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function yW(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return xe(n[t],e[t]);return xe(n.length,e.length)}function Pc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var SO="__name__",Sg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ue(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ue(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return xe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):$I(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fi.fromString(e.substring(4,e.length-2))}},it=class n extends Sg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},EW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hn=class n extends Sg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return EW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SO}static keyField(){return new n([SO])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var de=class n{constructor(e){this.path=e}static fromPath(e){return new n(it.fromString(e))}static fromName(e){return new n(it.fromString(e).popFirst(5))}static empty(){return new n(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new it(e.slice()))}};function gF(n,e,t){if(!t)throw new K(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bW(n,e,t,r){if(e===!0&&r===!0)throw new K(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CO(n){if(!de.isDocumentKey(n))throw new K(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TO(n){if(de.isDocumentKey(n))throw new K(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vF(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function rv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue(12329,{type:typeof n})}function En(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new K(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=rv(n);throw new K(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wW(n,e){if(e<=0)throw new K(V.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Nt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Fd(n,e){if(!vF(n))throw new K(V.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new K(V.INVALID_ARGUMENT,t);return!0}var DO=-62135596800,AO=1e6,Mt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*AO);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DO)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AO}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fd(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-DO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:Nt("string",Mt._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};var ge=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Mt(0,0))}static max(){return new n(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var wd=-1,HI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};HI.UNKNOWN_ID=-1;function IW(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Mt(t+1,0):new Mt(t,r));return new ea(i,de.empty(),e)}function SW(n){return new ea(n.readTime,n.key,wd)}var ea=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ge.min(),de.empty(),wd)}static max(){return new n(ge.max(),de.empty(),wd)}};function CW(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(n.documentKey,e.documentKey),t!==0?t:xe(n.largestBatchId,e.largestBatchId))}var TW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",GI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Wc(n){if(n.code!==V.FAILED_PRECONDITION||n.message!==TW)throw n;X("LocalStore","Unexpectedly lost primary lease")}var $=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function DW(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Kc(n){return n.name==="IndexedDbTransactionError"}var wC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),IC=-1;function Ld(n){return n==null}function Id(n){return n===0&&1/n==-1/0}function AW(n){return typeof n=="number"&&Number.isInteger(n)&&!Id(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var _F="";function xW(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xO(e)),e=RW(n.get(t),e);return xO(e)}function RW(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case _F:t+="";break;default:t+=s}}return t}function xO(n){return n+_F+""}var kW="remoteDocuments",yF="owner";var EF="mutationQueues";var bF="mutations";var wF="documentMutations",PW="remoteDocumentsV14";var IF="remoteDocumentGlobal";var SF="targets";var CF="targetDocuments";var TF="targetGlobal",DF="collectionParents";var AF="clientMetadata";var xF="bundles";var RF="namedQueries";var NW="indexConfiguration";var MW="indexState";var OW="indexEntries";var kF="documentOverlays";var FW="globals";var LW=[EF,bF,wF,kW,SF,yF,TF,CF,AF,IF,DF,xF,RF],eEe=[...LW,kF],VW=[EF,bF,wF,PW,SF,yF,TF,CF,AF,IF,DF,xF,RF,kF],UW=VW,BW=[...UW,NW,MW,OW];var tEe=[...BW,FW];function RO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var wt=class n{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xc(this.root,e,this.comparator,!0)}},xc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ni=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}};ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1;ni.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new ni(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var $t=class n{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cg(this.data.getIterator())}getIteratorFrom(e){return new Cg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Cg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ar=class n{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new n([])}unionWith(e){let t=new $t(Hn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Tg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var on=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Tg("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};on.EMPTY_BYTE_STRING=new on("");var jW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(n){if(Le(!!n,39018),typeof n=="string"){let e=0,t=jW.exec(n);if(Le(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ji(n){return typeof n=="string"?on.fromBase64String(n):on.fromUint8Array(n)}var NF="server_timestamp",MF="__type__",OF="__previous_value__",FF="__local_write_time__";function SC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[MF])===null||t===void 0?void 0:t.stringValue)===NF}function iv(n){let e=n.mapValue.fields[OF];return SC(e)?iv(e):e}function Sd(n){let e=Bi(n.mapValue.fields[FF].timestampValue);return new Mt(e.seconds,e.nanos)}var zI=class{constructor(e,t,r,i,s,o,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},Dg="(default)",Ag=class n{constructor(e,t){this.projectId=e,this.database=t||Dg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Dg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var CC="__type__",LF="__max__",gg={mapValue:{fields:{__type__:{stringValue:LF}}}},TC="__vector__",Nc="value";function $s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?SC(n)?4:UF(n)?9007199254740991:VF(n)?10:11:ue(28295,{value:n})}function ii(n,e){if(n===e)return!0;let t=$s(n);if(t!==$s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sd(n).isEqual(Sd(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Bi(i.timestampValue),a=Bi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return ji(i.bytesValue).isEqual(ji(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return pt(i.geoPointValue.latitude)===pt(s.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return pt(i.integerValue)===pt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=pt(i.doubleValue),a=pt(s.doubleValue);return o===a?Id(o)===Id(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Pc(n.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(RO(o)!==RO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ii(o[c],a[c])))return!1;return!0})(n,e);default:return ue(52216,{left:n})}}function Cd(n,e){return(n.values||[]).find(t=>ii(t,e))!==void 0}function Mc(n,e){if(n===e)return 0;let t=$s(n),r=$s(e);if(t!==r)return xe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=pt(s.integerValue||s.doubleValue),c=pt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return kO(n.timestampValue,e.timestampValue);case 4:return kO(Sd(n),Sd(e));case 5:return $I(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=ji(s),c=ji(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=xe(a[u],c[u]);if(d!==0)return d}return xe(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=xe(pt(s.latitude),pt(o.latitude));return a!==0?a:xe(pt(s.longitude),pt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return PO(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,u,d;let f=s.fields||{},g=o.fields||{},_=(a=f[Nc])===null||a===void 0?void 0:a.arrayValue,I=(c=g[Nc])===null||c===void 0?void 0:c.arrayValue,x=xe(((u=_?.values)===null||u===void 0?void 0:u.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:PO(_,I)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===gg.mapValue&&o===gg.mapValue)return 0;if(s===gg.mapValue)return 1;if(o===gg.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=$I(c[f],d[f]);if(g!==0)return g;let _=Mc(a[c[f]],u[d[f]]);if(_!==0)return _}return xe(c.length,d.length)})(n.mapValue,e.mapValue);default:throw ue(23264,{le:t})}}function kO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return xe(n,e);let t=Bi(n),r=Bi(e),i=xe(t.seconds,r.seconds);return i!==0?i:xe(t.nanos,r.nanos)}function PO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Mc(t[i],r[i]);if(s)return s}return xe(t.length,r.length)}function Oc(n){return qI(n)}function qI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Bi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ji(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return de.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=qI(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${qI(t.fields[o])}`;return i+"}"})(n.mapValue):ue(61005,{value:n})}function yg(n){switch($s(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=iv(n);return e?16+yg(e):16;case 5:return 2*n.stringValue.length;case 6:return ji(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+yg(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return qs(r.fields,(s,o)=>{i+=s.length+yg(o)}),i})(n.mapValue);default:throw ue(13486,{value:n})}}function NO(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function WI(n){return!!n&&"integerValue"in n}function DC(n){return!!n&&"arrayValue"in n}function MO(n){return!!n&&"nullValue"in n}function OO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Eg(n){return!!n&&"mapValue"in n}function VF(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[CC])===null||t===void 0?void 0:t.stringValue)===TC}function gd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return qs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gd(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function UF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===LF}var rEe={mapValue:{fields:{[CC]:{stringValue:TC},[Nc]:{arrayValue:{}}}}};var Nn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Eg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gd(t)}setAll(e){let t=Hn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=gd(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Eg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Eg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qs(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(gd(this.value))}};function BF(n){let e=[];return qs(n.fields,(t,r)=>{let i=new Hn([t]);if(Eg(r)){let s=BF(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ar(e)}var zn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ge.min(),ge.min(),ge.min(),Nn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ge.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ge.min(),ge.min(),Nn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ge.min(),ge.min(),Nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Fc=class{constructor(e,t){this.position=e,this.inclusive=t}};function FO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),t.key):r=Mc(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function LO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ii(n.position[t],e.position[t]))return!1;return!0}var ta=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $W(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var xg=class{},Pt=class n extends xg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new YI(e,t,r):t==="array-contains"?new ZI(e,r):t==="in"?new XI(e,r):t==="not-in"?new eS(e,r):t==="array-contains-any"?new tS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new QI(e,r):new JI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Mc(t,this.value)):t!==null&&$s(this.value)===$s(t)&&this.matchesComparison(Mc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Nr=class n extends xg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return jF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function jF(n){return n.op==="and"}function $F(n){return HW(n)&&jF(n)}function HW(n){for(let e of n.filters)if(e instanceof Nr)return!1;return!0}function KI(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+Oc(n.value);if($F(n))return n.filters.map(e=>KI(e)).join(",");{let e=n.filters.map(t=>KI(t)).join(",");return`${n.op}(${e})`}}function HF(n,e){return n instanceof Pt?(function(r,i){return i instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&ii(r.value,i.value)})(n,e):n instanceof Nr?(function(r,i){return i instanceof Nr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&HF(o,i.filters[a]),!0):!1})(n,e):void ue(19439)}function GF(n){return n instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oc(t.value)}`})(n):n instanceof Nr?(function(t){return t.op.toString()+" {"+t.getFilters().map(GF).join(" ,")+"}"})(n):"Filter"}var YI=class extends Pt{constructor(e,t,r){super(e,t,r),this.key=de.fromName(r.referenceValue)}matches(e){let t=de.comparator(e.key,this.key);return this.matchesComparison(t)}},QI=class extends Pt{constructor(e,t){super(e,"in",t),this.keys=zF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},JI=class extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=zF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function zF(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>de.fromName(r.referenceValue))}var ZI=class extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return DC(t)&&Cd(t.arrayValue,this.value)}},XI=class extends Pt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Cd(this.value.arrayValue,t)}},eS=class extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cd(this.value.arrayValue,t)}},tS=class extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!DC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cd(this.value.arrayValue,r))}};var nS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function VO(n,e=null,t=[],r=[],i=null,s=null,o=null){return new nS(n,e,t,r,i,s,o)}function AC(n){let e=_e(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>KI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),Ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oc(r)).join(",")),e.Pe=t}return e.Pe}function xC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$W(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!HF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LO(n.startAt,e.startAt)&&LO(n.endAt,e.endAt)}function rS(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Hs=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function GW(n,e,t,r,i,s,o,a){return new Hs(n,e,t,r,i,s,o,a)}function sv(n){return new Hs(n)}function UO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qF(n){return n.collectionGroup!==null}function vd(n){let e=_e(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $t(Hn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new ta(s,r))}),t.has(Hn.keyField().canonicalString())||e.Te.push(new ta(Hn.keyField(),r))}return e.Te}function ri(n){let e=_e(n);return e.Ie||(e.Ie=zW(e,vd(n))),e.Ie}function zW(n,e){if(n.limitType==="F")return VO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ta(i.field,s)});let t=n.endAt?new Fc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Fc(n.startAt.position,n.startAt.inclusive):null;return VO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function iS(n,e){let t=n.filters.concat([e]);return new Hs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Rg(n,e,t){return new Hs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ov(n,e){return xC(ri(n),ri(e))&&n.limitType===e.limitType}function WF(n){return`${AC(ri(n))}|lt:${n.limitType}`}function Tc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>GF(i)).join(", ")}]`),Ld(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Oc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Oc(i)).join(",")),`Target(${r})`})(ri(n))}; limitType=${n.limitType})`}function av(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of vd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let u=FO(o,a,c);return o.inclusive?u<=0:u<0})(r.startAt,vd(r),i)||r.endAt&&!(function(o,a,c){let u=FO(o,a,c);return o.inclusive?u>=0:u>0})(r.endAt,vd(r),i))})(n,e)}function qW(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KF(n){return(e,t)=>{let r=!1;for(let i of vd(n)){let s=WW(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function WW(n,e,t){let r=n.field.isKeyField()?de.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Mc(c,u):ue(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:n.dir})}}var $i=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return PF(this.inner)}size(){return this.innerSize}};var KW=new wt(de.comparator);function Hi(){return KW}var YF=new wt(de.comparator);function pd(...n){let e=YF;for(let t of n)e=e.insert(t.key,t);return e}function QF(n){let e=YF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qo(){return _d()}function JF(){return _d()}function _d(){return new $i(n=>n.toString(),(n,e)=>n.isEqual(e))}var YW=new wt(de.comparator),QW=new $t(de.comparator);function Ne(...n){let e=QW;for(let t of n)e=e.add(t);return e}var JW=new $t(xe);function ZW(){return JW}function RC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Id(e)?"-0":e}}function ZF(n){return{integerValue:""+n}}function XW(n,e){return AW(e)?ZF(e):RC(n,e)}var Lc=class{constructor(){this._=void 0}};function e7(n,e,t){return n instanceof Vc?(function(i,s){let o={fields:{[MF]:{stringValue:NF},[FF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&SC(s)&&(s=iv(s)),s&&(o.fields[OF]=s),{mapValue:o}})(t,e):n instanceof na?eL(n,e):n instanceof ra?tL(n,e):(function(i,s){let o=XF(i,s),a=BO(o)+BO(i.Ee);return WI(o)&&WI(i.Ee)?ZF(a):RC(i.serializer,a)})(n,e)}function t7(n,e,t){return n instanceof na?eL(n,e):n instanceof ra?tL(n,e):t}function XF(n,e){return n instanceof Uc?(function(r){return WI(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Vc=class extends Lc{},na=class extends Lc{constructor(e){super(),this.elements=e}};function eL(n,e){let t=nL(e);for(let r of n.elements)t.some(i=>ii(i,r))||t.push(r);return{arrayValue:{values:t}}}var ra=class extends Lc{constructor(e){super(),this.elements=e}};function tL(n,e){let t=nL(e);for(let r of n.elements)t=t.filter(i=>!ii(i,r));return{arrayValue:{values:t}}}var Uc=class extends Lc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function BO(n){return pt(n.integerValue||n.doubleValue)}function nL(n){return DC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function n7(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof na&&i instanceof na||r instanceof ra&&i instanceof ra?Pc(r.elements,i.elements,ii):r instanceof Uc&&i instanceof Uc?ii(r.Ee,i.Ee):r instanceof Vc&&i instanceof Vc})(n.transform,e.transform)}var sS=class{constructor(e,t){this.version=e,this.transformResults=t}},yn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Bc=class{};function rL(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jc(n.key,yn.none()):new ia(n.key,n.data,yn.none());{let t=n.data,r=Nn.empty(),i=new $t(Hn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new si(n.key,r,new ar(i.toArray()),yn.none())}}function r7(n,e,t){n instanceof ia?(function(i,s,o){let a=i.value.clone(),c=$O(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof si?(function(i,s,o){if(!bg(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=$O(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(iL(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function yd(n,e,t,r){return n instanceof ia?(function(s,o,a,c){if(!bg(s.precondition,o))return a;let u=s.value.clone(),d=HO(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof si?(function(s,o,a,c){if(!bg(s.precondition,o))return a;let u=HO(s.fieldTransforms,c,o),d=o.data;return d.setAll(iL(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(s,o,a){return bg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function i7(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=XF(r.transform,i||null);s!=null&&(t===null&&(t=Nn.empty()),t.set(r.field,s))}return t||null}function jO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Pc(r,i,(s,o)=>n7(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ia=class extends Bc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},si=class extends Bc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function iL(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function $O(n,e,t){let r=new Map;Le(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,t7(o,a,t[i]))}return r}function HO(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,e7(s,o,e))}return r}var jc=class extends Bc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},kg=class extends Bc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var oS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&r7(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=yd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=yd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=JF();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=rL(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Pc(this.mutations,e.mutations,(t,r)=>jO(t,r))&&Pc(this.baseMutations,e.baseMutations,(t,r)=>jO(t,r))}},aS=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Le(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return YW})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var cS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Rt,Fe;function sL(n){switch(n){case V.OK:return ue(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return ue(15467,{code:n})}}function oL(n){if(n===void 0)return Ui("GRPC error has no .code"),V.UNKNOWN;switch(n){case Rt.OK:return V.OK;case Rt.CANCELLED:return V.CANCELLED;case Rt.UNKNOWN:return V.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return V.INTERNAL;case Rt.UNAVAILABLE:return V.UNAVAILABLE;case Rt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Rt.NOT_FOUND:return V.NOT_FOUND;case Rt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Rt.ABORTED:return V.ABORTED;case Rt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Rt.DATA_LOSS:return V.DATA_LOSS;default:return ue(39323,{code:n})}}(Fe=Rt||(Rt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";var GO=null;var s7=new Fi([4294967295,4294967295],0);function zO(n){let e=mF().encode(n),t=new DI;return t.update(e),new Uint8Array(t.digest())}function qO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fi([t,r],0),new Fi([i,s],0)]}var uS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Jo(`Invalid padding: ${t}`);if(r<0)throw new Jo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Jo(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Fi.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Fi.fromNumber(r)));return i.compare(s7)===1&&(i=new Fi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=zO(e),[r,i]=qO(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=zO(e),[r,i]=qO(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Jo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Pg=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Td.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ge.min(),i,new wt(xe),Hi(),Ne())}},Td=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ne(),Ne(),Ne())}};var Rc=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Ng=class{constructor(e,t){this.targetId=e,this.De=t}},Mg=class{constructor(e,t,r=on.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Og=class{constructor(){this.ve=0,this.Ce=WO(),this.Fe=on.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ne(),t=Ne(),r=Ne();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ue(38017,{changeType:s})}}),new Td(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=WO()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},dS=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Hi(),this.je=vg(),this.Je=vg(),this.He=new wt(xe)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(rS(s))if(r===0){let o=new de(s.path);this.Xe(t,o,zn.newNoDocument(o,ge.min()))}else Le(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}GO?.ct((function(d,f,g,_,I){var x,P,B,Y,ee,he;let We={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Ce=f.unchangedNames;return Ce&&(We.bloomFilter={applied:I===0,hashCount:(x=Ce?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(Y=(B=(P=Ce?.bits)===null||P===void 0?void 0:P.bitmap)===null||B===void 0?void 0:B.length)!==null&&Y!==void 0?Y:0,padding:(he=(ee=Ce?.bits)===null||ee===void 0?void 0:ee.padding)!==null&&he!==void 0?he:0,mightContain:T=>{var w;return(w=_?.mightContain(T))!==null&&w!==void 0&&w}}),We})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ji(r).toUint8Array()}catch(c){if(c instanceof Tg)return js("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new uS(o,i,s)}catch(c){return js(c instanceof Jo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&rS(a.target)){let c=new de(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,zn.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=Ne();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new Pg(e,t,this.He,this.ze,r);return this.ze=Hi(),this.je=vg(),this.Je=vg(),this.He=new wt(xe),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Og,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new $t(xe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new $t(xe),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Og),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function vg(){return new wt(de.comparator)}function WO(){return new wt(de.comparator)}var o7={asc:"ASCENDING",desc:"DESCENDING"},a7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c7={and:"AND",or:"OR"},hS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function fS(n,e){return n.useProto3Json||Ld(e)?e:{value:e}}function Fg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function l7(n,e){return Fg(n,e.toTimestamp())}function Gn(n){return Le(!!n,49232),ge.fromTimestamp((function(t){let r=Bi(t);return new Mt(r.seconds,r.nanos)})(n))}function kC(n,e){return pS(n,e).canonicalString()}function pS(n,e){let t=(function(i){return new it(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function cL(n){let e=it.fromString(n);return Le(pL(e),10190,{key:e.toString()}),e}function Lg(n,e){return kC(n.databaseId,e.path)}function Ed(n,e){let t=cL(e);if(t.get(1)!==n.databaseId.projectId)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new de(uL(t))}function lL(n,e){return kC(n.databaseId,e)}function u7(n){let e=cL(n);return e.length===4?it.emptyPath():uL(e)}function mS(n){return new it(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uL(n){return Le(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function KO(n,e,t){return{name:Lg(n,e),fields:t.value.mapValue.fields}}function d7(n,e){return"found"in e?(function(r,i){Le(!!i.found,43571),i.found.name,i.found.updateTime;let s=Ed(r,i.found.name),o=Gn(i.found.updateTime),a=i.found.createTime?Gn(i.found.createTime):ge.min(),c=new Nn({mapValue:{fields:i.found.fields}});return zn.newFoundDocument(s,o,a,c)})(n,e):"missing"in e?(function(r,i){Le(!!i.missing,3894),Le(!!i.readTime,22933);let s=Ed(r,i.missing),o=Gn(i.readTime);return zn.newNoDocument(s,o)})(n,e):ue(7234,{result:e})}function h7(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,d){return u.useProto3Json?(Le(d===void 0||typeof d=="string",58123),on.fromBase64String(d||"")):(Le(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),on.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){let d=u.code===void 0?V.UNKNOWN:oL(u.code);return new K(d,u.message||"")})(o);t=new Mg(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ed(n,r.document.name),s=Gn(r.document.updateTime),o=r.document.createTime?Gn(r.document.createTime):ge.min(),a=new Nn({mapValue:{fields:r.document.fields}}),c=zn.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new Rc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ed(n,r.document),s=r.readTime?Gn(r.readTime):ge.min(),o=zn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Rc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ed(n,r.document),s=r.removedTargetIds||[];t=new Rc([],s,i,null)}else{if(!("filter"in e))return ue(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new lS(i,s),a=r.targetId;t=new Ng(a,o)}}return t}function dL(n,e){let t;if(e instanceof ia)t={update:KO(n,e.key,e.value)};else if(e instanceof jc)t={delete:Lg(n,e.key)};else if(e instanceof si)t={update:KO(n,e.key,e.data),updateMask:b7(e.fieldMask)};else{if(!(e instanceof kg))return ue(16599,{Rt:e.type});t={verify:Lg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Vc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof na)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ra)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Uc)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ue(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:l7(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue(27497)})(n,e.precondition)),t}function f7(n,e){return n&&n.length>0?(Le(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Gn(i.updateTime):Gn(s);return o.isEqual(ge.min())&&(o=Gn(s)),new sS(o,i.transformResults||[])})(t,e))):[]}function p7(n,e){return{documents:[lL(n,e.path)]}}function m7(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lL(n,i);let s=(function(u){if(u.length!==0)return fL(Nr.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(u){if(u.length!==0)return u.map(d=>(function(g){return{field:Dc(g.field),direction:_7(g.dir)}})(d))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=fS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function g7(n){let e=u7(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Le(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=(function(f){let g=hL(f);return g instanceof Nr&&$F(g)?g.getFilters():[g]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map(g=>(function(I){return new ta(Ac(I.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let g;return g=typeof f=="object"?f.value:f,Ld(g)?null:g})(t.limit));let c=null;t.startAt&&(c=(function(f){let g=!!f.before,_=f.values||[];return new Fc(_,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){let g=!f.before,_=f.values||[];return new Fc(_,g)})(t.endAt)),GW(e,i,o,s,a,"F",c,u)}function v7(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hL(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ac(t.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ac(t.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ac(t.unaryFilter.field);return Pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ac(t.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Pt.create(Ac(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Nr.create(t.compositeFilter.filters.map(r=>hL(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(t.compositeFilter.op))})(n):ue(30097,{filter:n})}function _7(n){return o7[n]}function y7(n){return a7[n]}function E7(n){return c7[n]}function Dc(n){return{fieldPath:n.canonicalString()}}function Ac(n){return Hn.fromServerFormat(n.fieldPath)}function fL(n){return n instanceof Pt?(function(t){if(t.op==="=="){if(OO(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NAN"}};if(MO(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(OO(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NOT_NAN"}};if(MO(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dc(t.field),op:y7(t.op),value:t.value}}})(n):n instanceof Nr?(function(t){let r=t.getFilters().map(i=>fL(i));return r.length===1?r[0]:{compositeFilter:{op:E7(t.op),filters:r}}})(n):ue(54877,{filter:n})}function b7(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Dd=class n{constructor(e,t,r,i,s=ge.min(),o=ge.min(),a=on.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var gS=class{constructor(e){this.gt=e}};function w7(n){let e=g7({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rg(e,e.limit,"L"):e}var Vg=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(pt(e.integerValue));else if("doubleValue"in e){let r=pt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Id(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Bi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ji(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?UF(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):VF(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ue(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Nc,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(pt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),de.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Vg.Ut=new Vg;var vS=class{constructor(){this.Dn=new _S}addToCollectionParentIndex(e,t){return this.Dn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(ea.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(ea.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}},_S=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $t(it.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $t(it.comparator)).toArray()}};var iEe=new Uint8Array(0);var YO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mL=41943040,or=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or(mL,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);var Ad=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var QO="LruGarbageCollector",I7=1048576;function JO([n,e],[t,r]){let i=xe(n,t);return i===0?xe(e,r):i}var yS=class{constructor(e){this.Tr=e,this.buffer=new $t(JO),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();JO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ES=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){X(QO,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Kc(t)?X(QO,"Ignoring IndexedDB error during garbage collection: ",t):await Wc(t)}await this.Rr(3e5)})}},bS=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return $.resolve(wC.ue);let r=new yS(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(YO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YO):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Cc()<=Pe.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function S7(n,e){return new bS(n,e)}var wS=class{constructor(){this.changes=new $i(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var IS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var SS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yd(r.mutation,i,ar.empty(),Mt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ne()){let i=Qo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=pd();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Qo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ne()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Hi(),o=_d(),a=(function(){return _d()})();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof si)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),yd(d.mutation,u,d.mutation.getFieldMask(),Mt.now())):o.set(u.key,ar.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new IS(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=_d(),i=new wt((o,a)=>o-a),s=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||ar.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||Ne()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=JF();d.forEach(g=>{if(!s.has(g)){let _=rL(t.get(g),r.get(g));_!==null&&f.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):$.resolve(Qo()),a=wd,c=s;return o.next(u=>$.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?$.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Ne())).next(d=>({batchId:a,changes:QF(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next(r=>{let i=pd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=pd();return this.indexManager.getCollectionParents(e,s).next(a=>$.forEach(a,c=>{let u=(function(f,g){return new Hs(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,zn.newInvalidDocument(d)))});let a=pd();return o.forEach((c,u)=>{let d=s.get(c);d!==void 0&&yd(d.mutation,u,ar.empty(),Mt.now()),av(t,u)&&(a=a.insert(c,u))}),a})}};var CS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return $.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Gn(i.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:w7(i.bundledQuery),readTime:Gn(i.readTime)}})(t)),$.resolve()}};var TS=class{constructor(){this.overlays=new wt(de.comparator),this.kr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Qo();return $.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),$.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){let i=Qo(),s=t.length+1,o=new de(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return $.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new wt((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Qo(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Qo(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return $.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cS(t,r));let s=this.kr.get(t);s===void 0&&(s=Ne(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var DS=class{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}};var xd=class{constructor(){this.qr=new $t(kt.Qr),this.$r=new $t(kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new kt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new kt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new de(new it([])),r=new kt(t,e),i=new kt(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new de(new it([])),r=new kt(t,e),i=new kt(t,e+1),s=Ne();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new kt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},kt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return de.comparator(e.key,t.key)||xe(e.Hr,t.Hr)}static Ur(e,t){return xe(e.Hr,t.Hr)||de.comparator(e.key,t.key)}};var AS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new $t(kt.Qr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new oS(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new kt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,t){return $.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?IC:this.er-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new kt(t,0),i=new kt(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $t(xe);return t.forEach(i=>{let s=new kt(i,0),o=new kt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),$.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;de.isDocumentKey(s)||(s=s.child(""));let o=new kt(new de(s),0),a=new $t(xe);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},o),$.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Le(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return $.forEach(t.mutations,i=>{let s=new kt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new kt(t,0),i=this.Yr.firstAfterOrEqual(r);return $.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var xS=class{constructor(e){this.ni=e,this.docs=(function(){return new wt(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=Hi();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zn.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Hi(),o=t.path,a=new de(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||CW(SW(d),r)<=0||(i.has(d.key)||av(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ue(9500)}ri(e,t){return $.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new RS(this)}getSize(e){return $.resolve(this.size)}},RS=class extends wS{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),$.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var kS=class{constructor(e){this.persistence=e,this.ii=new $i(t=>AC(t),xC),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.si=0,this.oi=new xd,this.targetCount=0,this._i=Ad.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),$.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Ad(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.hr(t),$.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),$.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this.oi.containsKey(t))}};var Ug=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new wC(0),this.ci=!1,this.ci=!0,this.li=new DS,this.referenceDelegate=e(this),this.hi=new kS(this),this.indexManager=new vS,this.remoteDocumentCache=(function(i){return new xS(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new gS(t),this.Ti=new CS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new AS(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){X("MemoryPersistence","Starting transaction:",e);let i=new PS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return $.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},PS=class extends GI{constructor(e){super(),this.currentSequenceNumber=e}},NS=class n{constructor(e){this.persistence=e,this.Ai=new xd,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ue(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,r=>{let i=de.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,ge.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return $.or([()=>$.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Bg=class n{constructor(e,t){this.persistence=e,this.gi=new $i(r=>xW(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=S7(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return $.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?$.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,ge.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),$.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yg(e.data.value)),t}Sr(e,t,r){return $.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var MS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ne(),i=Ne();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var OS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var FS=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return uN()?8:DW(Bt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new OS;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Cc()<=Pe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Tc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(Cc()<=Pe.DEBUG&&X("QueryEngine","Query:",Tc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Cc()<=Pe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Tc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ri(t))):$.resolve())}ps(e,t){if(UO(t))return $.resolve(null);let r=ri(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Rg(t,null,"F"),r=ri(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ne(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,o,c.readTime)?this.ps(e,Rg(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return UO(t)||i.isEqual(ge.min())?$.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?$.resolve(null):(Cc()<=Pe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tc(t)),this.vs(e,o,t,IW(i,wd)).next(a=>a))})}bs(e,t){let r=new $t(KF(e));return t.forEach((i,s)=>{av(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Cc()<=Pe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Tc(t)),this.gs.getDocumentsMatchingQuery(e,t,ea.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var PC="LocalStore",C7=3e8,LS=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new wt(xe),this.Ms=new $i(s=>AC(s),xC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function T7(n,e,t,r){return new LS(n,e,t,r)}async function gL(n,e){let t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ne();for(let u of i){o.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of s){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function D7(n,e){let t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,d){let f=u.batch,g=f.keys(),_=$.resolve();return g.forEach(I=>{_=_.next(()=>d.getEntry(c,I)).next(x=>{let P=u.docVersions.get(I);Le(P!==null,48541),x.version.compareTo(P)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Ne();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function vL(n){let e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function A7(n,e){let t=_e(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.hi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.hi.addMatchingKeys(s,d.addedDocuments,f)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(on.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(f,_),(function(x,P,B){return x.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=C7?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(g,_,d)&&a.push(t.hi.updateTargetData(s,_))});let c=Hi(),u=Ne();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(x7(s,o,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(ge.min())){let d=t.hi.getLastRemoteSnapshotVersion(s).next(f=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.Fs=i,s))}function x7(n,e,t){let r=Ne(),i=Ne();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Hi();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):X(PC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function R7(n,e){let t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=IC),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function k7(n,e){let t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Dd(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function VS(n,e,t){let r=_e(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Kc(o))throw o;X(PC,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function ZO(n,e,t){let r=_e(n),i=ge.min(),s=Ne();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,u,d){let f=_e(c),g=f.Ms.get(d);return g!==void 0?$.resolve(f.Fs.get(g)):f.hi.getTargetData(u,d)})(r,o,ri(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:ge.min(),t?s:Ne())).next(a=>(P7(r,qW(e),a),{documents:a,qs:s})))}function P7(n,e,t){let r=n.xs.get(e)||ge.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var jg=class{constructor(){this.activeTargetIds=ZW()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var US=class{constructor(){this.Fo=new jg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new jg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var BS=class{xo(e){}shutdown(){}};var XO="ConnectivityMonitor",$g=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){X(XO,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){X(XO,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var _g=null;function jS(){return _g===null?_g=(function(){return 268435456+Math.round(2147483648*Math.random())})():_g++,"0x"+_g.toString(16)}var NI="RestConnection",N7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},$S=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Dg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=jS(),a=this.Go(e,t.toUriEncodedString());X(NI,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:u}=new URL(a),d=Ds(u);return this.jo(e,a,c,r,d).then(f=>(X(NI,`Received RPC '${e}' ${o}: `,f),f),f=>{throw js(NI,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=N7[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var HS=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var sn="WebChannelConnection",GS=class extends $S{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=jS();return new Promise((a,c)=>{let u=new AI;u.setWithCredentials(!0),u.listenOnce(xI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case fd.NO_ERROR:let f=u.getResponseJson();X(sn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case fd.TIMEOUT:X(sn,`RPC '${e}' ${o} timed out`),c(new K(V.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:let g=u.getStatus();if(X(sn,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);let I=_?.error;if(I&&I.status&&I.message){let x=(function(B){let Y=B.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(Y)>=0?Y:V.UNKNOWN})(I.status);c(new K(x,I.message))}else c(new K(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(V.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{X(sn,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);X(sn,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",d,r,15)})}P_(e,t,r){let i=jS(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=PI(),a=kI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");X(sn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c);this.T_(f);let g=!1,_=!1,I=new HS({Ho:P=>{_?X(sn,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(g||(X(sn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),X(sn,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},Yo:()=>f.close()}),x=(P,B,Y)=>{P.listen(B,ee=>{try{Y(ee)}catch(he){setTimeout(()=>{throw he},0)}})};return x(f,Sc.EventType.OPEN,()=>{_||(X(sn,`RPC '${e}' stream ${i} transport opened.`),I.s_())}),x(f,Sc.EventType.CLOSE,()=>{_||(_=!0,X(sn,`RPC '${e}' stream ${i} transport closed`),I.__(),this.I_(f))}),x(f,Sc.EventType.ERROR,P=>{_||(_=!0,js(sn,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),I.__(new K(V.UNAVAILABLE,"The operation could not be completed")))}),x(f,Sc.EventType.MESSAGE,P=>{var B;if(!_){let Y=P.data[0];Le(!!Y,16349);let ee=Y,he=ee?.error||((B=ee[0])===null||B===void 0?void 0:B.error);if(he){X(sn,`RPC '${e}' stream ${i} received error:`,he);let We=he.status,Ce=(function(S){let D=Rt[S];if(D!==void 0)return oL(D)})(We),T=he.message;Ce===void 0&&(Ce=V.INTERNAL,T="Unknown error status: "+We+" with message "+he.message),_=!0,I.__(new K(Ce,T)),f.close()}else X(sn,`RPC '${e}' stream ${i} received:`,Y),I.a_(Y)}}),x(a,RI.STAT_EVENT,P=>{P.stat===mg.PROXY?X(sn,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===mg.NOPROXY&&X(sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function MI(){return typeof document<"u"?document:null}function cv(n){return new hS(n,!0)}var Rd=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var eF="PersistentStream",Hg=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Rd(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(Ui(t.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new K(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return X(eF,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(X(eF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},zS=class extends Hg{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=h7(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ge.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Gn(o.readTime):ge.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=mS(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=rS(c)?{documents:p7(s,c)}:{query:m7(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=aL(s,o.resumeToken);let u=fS(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Fg(s,o.snapshotVersion.toTimestamp());let u=fS(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=v7(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=mS(this.serializer),t.removeTarget=e,this.k_(t)}},qS=class extends Hg{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=f7(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=mS(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>dL(this.serializer,r))};this.k_(t)}};var WS=class{},KS=class extends WS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,pS(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(V.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,pS(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(V.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},YS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ui(t),this._a=!1):X("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var sa="RemoteStore",QS=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{aa(this)&&(X(sa,"Restarting streams for network reachability change."),await(async function(c){let u=_e(c);u.Ia.add(4),await Vd(u),u.Aa.set("Unknown"),u.Ia.delete(4),await lv(u)})(this))})}),this.Aa=new YS(r,i)}};async function lv(n){if(aa(n))for(let e of n.da)await e(!0)}async function Vd(n){for(let e of n.da)await e(!1)}function _L(n,e){let t=_e(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),FC(t)?OC(t):Yc(t).x_()&&MC(t,e))}function NC(n,e){let t=_e(n),r=Yc(t);t.Ta.delete(e),r.x_()&&yL(t,e),t.Ta.size===0&&(r.x_()?r.B_():aa(t)&&t.Aa.set("Unknown"))}function MC(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yc(n).H_(e)}function yL(n,e){n.Ra.$e(e),Yc(n).Y_(e)}function OC(n){n.Ra=new dS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Yc(n).start(),n.Aa.aa()}function FC(n){return aa(n)&&!Yc(n).M_()&&n.Ta.size>0}function aa(n){return _e(n).Ia.size===0}function EL(n){n.Ra=void 0}async function M7(n){n.Aa.set("Online")}async function O7(n){n.Ta.forEach((e,t)=>{MC(n,e)})}async function F7(n,e){EL(n),FC(n)?(n.Aa.la(e),OC(n)):n.Aa.set("Unknown")}async function L7(n,e,t){if(n.Aa.set("Online"),e instanceof Mg&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){X(sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gg(n,r)}else if(e instanceof Rc?n.Ra.Ye(e):e instanceof Ng?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ge.min()))try{let r=await vL(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.Ta.get(u);d&&s.Ta.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let d=s.Ta.get(c);if(!d)return;s.Ta.set(c,d.withResumeToken(on.EMPTY_BYTE_STRING,d.snapshotVersion)),yL(s,c);let f=new Dd(d.target,c,u,d.sequenceNumber);MC(s,f)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){X(sa,"Failed to raise snapshot:",r),await Gg(n,r)}}async function Gg(n,e,t){if(!Kc(e))throw e;n.Ia.add(1),await Vd(n),n.Aa.set("Offline"),t||(t=()=>vL(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{X(sa,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await lv(n)})}function bL(n,e){return e().catch(t=>Gg(n,t,e))}async function uv(n){let e=_e(n),t=Gs(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:IC;for(;V7(e);)try{let i=await R7(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,U7(e,i)}catch(i){await Gg(e,i)}wL(e)&&IL(e)}function V7(n){return aa(n)&&n.Pa.length<10}function U7(n,e){n.Pa.push(e);let t=Gs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function wL(n){return aa(n)&&!Gs(n).M_()&&n.Pa.length>0}function IL(n){Gs(n).start()}async function B7(n){Gs(n).na()}async function j7(n){let e=Gs(n);for(let t of n.Pa)e.X_(t.mutations)}async function $7(n,e,t){let r=n.Pa.shift(),i=aS.from(r,e,t);await bL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await uv(n)}async function H7(n,e){e&&Gs(n).Z_&&await(async function(r,i){if((function(o){return sL(o)&&o!==V.ABORTED})(i.code)){let s=r.Pa.shift();Gs(r).N_(),await bL(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await uv(r)}})(n,e),wL(n)&&IL(n)}async function tF(n,e){let t=_e(n);t.asyncQueue.verifyOperationInProgress(),X(sa,"RemoteStore received new credentials");let r=aa(t);t.Ia.add(3),await Vd(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await lv(t)}async function G7(n,e){let t=_e(n);e?(t.Ia.delete(2),await lv(t)):e||(t.Ia.add(2),await Vd(t),t.Aa.set("Unknown"))}function Yc(n){return n.Va||(n.Va=(function(t,r,i){let s=_e(t);return s.ia(),new zS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:M7.bind(null,n),e_:O7.bind(null,n),n_:F7.bind(null,n),J_:L7.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),FC(n)?OC(n):n.Aa.set("Unknown")):(await n.Va.stop(),EL(n))})),n.Va}function Gs(n){return n.ma||(n.ma=(function(t,r,i){let s=_e(t);return s.ia(),new qS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:B7.bind(null,n),n_:H7.bind(null,n),ea:j7.bind(null,n),ta:$7.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await uv(n)):(await n.ma.stop(),n.Pa.length>0&&(X(sa,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var JS=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function LC(n,e){if(Ui("AsyncQueue",`${e}: ${n}`),Kc(n))return new K(V.UNAVAILABLE,`${e}: ${n}`);throw n}var zg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||de.comparator(t.key,r.key):(t,r)=>de.comparator(t.key,r.key),this.keyedMap=pd(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var qg=class{constructor(){this.fa=new wt(de.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ue(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},$c=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,zg.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ov(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ZS=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},XS=class{constructor(){this.queries=nF(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=_e(t),s=i.queries;i.queries=nF(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new K(V.ABORTED,"Firestore shutting down"))}};function nF(){return new $i(n=>WF(n),ov)}async function VC(n,e){let t=_e(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new ZS,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=LC(o,`Initialization of query '${Tc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&BC(t)}async function UC(n,e){let t=_e(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function z7(n,e){let t=_e(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&BC(t)}function q7(n,e,t){let r=_e(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function BC(n){n.Da.forEach(e=>{e.next()})}var eC,rF;(rF=eC||(eC={})).Fa="default",rF.Cache="cache";var kd=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new $c(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=$c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==eC.Cache}};var Wg=class{constructor(e){this.key=e}},Kg=class{constructor(e){this.key=e}},tC=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ne(),this.mutatedKeys=Ne(),this.Xa=KF(e),this.eu=new zg(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new qg,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),_=av(this.query,f)?f:null,I=!!g&&this.mutatedKeys.has(g.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),P=!1;g&&_?g.data.isEqual(_.data)?I!==x&&(r.track({type:3,doc:_}),P=!0):this.iu(g,_)||(r.track({type:2,doc:_}),P=!0,(c&&this.Xa(_,c)>0||u&&this.Xa(_,u)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),P=!0):g&&!_&&(r.track({type:1,doc:g}),P=!0,(c||u)&&(a=!0)),P&&(_?(o=o.add(_),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((d,f)=>(function(_,I){let x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{At:P})}};return x(_)-x(I)})(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new $c(this.query,e.eu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new qg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ne(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Kg(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Wg(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ne();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return $c.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},jC="SyncEngine",nC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},rC=class{constructor(e){this.key=e,this.lu=!1}},iC=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new $i(a=>WF(a),ov),this.Tu=new Map,this.Iu=new Set,this.du=new wt(de.comparator),this.Eu=new Map,this.Au=new xd,this.Ru={},this.Vu=new Map,this.mu=Ad.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function W7(n,e,t=!0){let r=xL(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await SL(r,e,t,!0),i}async function K7(n,e){let t=xL(n);await SL(t,e,!0,!1)}async function SL(n,e,t,r){let i=await k7(n.localStore,ri(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await Y7(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&_L(n.remoteStore,i),a}async function Y7(n,e,t,r,i){n.gu=(f,g,_)=>(async function(x,P,B,Y){let ee=P.view.nu(B);ee.Ds&&(ee=await ZO(x.localStore,P.query,!1).then(({documents:T})=>P.view.nu(T,ee)));let he=Y&&Y.targetChanges.get(P.targetId),We=Y&&Y.targetMismatches.get(P.targetId)!=null,Ce=P.view.applyChanges(ee,x.isPrimaryClient,he,We);return sF(x,P.targetId,Ce._u),Ce.snapshot})(n,f,g,_);let s=await ZO(n.localStore,e,!0),o=new tC(e,s.qs),a=o.nu(s.documents),c=Td.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);sF(n,t,u._u);let d=new nC(e,t,o);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function Q7(n,e,t){let r=_e(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!ov(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await VS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&NC(r.remoteStore,i.targetId),sC(r,i.targetId)}).catch(Wc)):(sC(r,i.targetId),await VS(r.localStore,i.targetId,!0))}async function J7(n,e){let t=_e(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),NC(t.remoteStore,r.targetId))}async function Z7(n,e,t){let r=sK(n);try{let i=await(function(o,a){let c=_e(o),u=Mt.now(),d=a.reduce((_,I)=>_.add(I.key),Ne()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=Hi(),x=Ne();return c.Os.getEntries(_,d).next(P=>{I=P,I.forEach((B,Y)=>{Y.isValidDocument()||(x=x.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,I)).next(P=>{f=P;let B=[];for(let Y of a){let ee=i7(Y,f.get(Y.key).overlayedDocument);ee!=null&&B.push(new si(Y.key,ee,BF(ee.value.mapValue),yn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,B,a)}).next(P=>{g=P;let B=P.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(_,P.batchId,B)})}).then(()=>({batchId:g.batchId,changes:QF(f)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new wt(xe)),u=u.insert(a,c),o.Ru[o.currentUser.toKey()]=u})(r,i.batchId,t),await Ud(r,i.changes),await uv(r.remoteStore)}catch(i){let s=LC(i,"Failed to persist write");t.reject(s)}}async function CL(n,e){let t=_e(n);try{let r=await A7(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Le(o.lu,14607):i.removedDocuments.size>0&&(Le(o.lu,42227),o.lu=!1))}),await Ud(t,r,e)}catch(r){await Wc(r)}}function iF(n,e,t){let r=_e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=_e(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let g of f.wa)g.va(a)&&(u=!0)}),u&&BC(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function X7(n,e,t){let r=_e(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new wt(de.comparator);o=o.insert(s,zn.newNoDocument(s,ge.min()));let a=Ne().add(s),c=new Pg(ge.min(),new Map,new wt(xe),o,a);await CL(r,c),r.du=r.du.remove(s),r.Eu.delete(e),$C(r)}else await VS(r.localStore,e,!1).then(()=>sC(r,e,t)).catch(Wc)}async function eK(n,e){let t=_e(n),r=e.batch.batchId;try{let i=await D7(t.localStore,e);DL(t,r,null),TL(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ud(t,i)}catch(i){await Wc(i)}}async function tK(n,e,t){let r=_e(n);try{let i=await(function(o,a){let c=_e(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Le(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})})(r.localStore,e);DL(r,e,t),TL(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ud(r,i)}catch(i){await Wc(i)}}function TL(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function DL(n,e,t){let r=_e(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function sC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||AL(n,r)})}function AL(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(NC(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),$C(n))}function sF(n,e,t){for(let r of t)r instanceof Wg?(n.Au.addReference(r.key,e),nK(n,r)):r instanceof Kg?(X(jC,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||AL(n,r.key)):ue(19791,{yu:r})}function nK(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(X(jC,"New document in limbo: "+t),n.Iu.add(r),$C(n))}function $C(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new de(it.fromString(e)),r=n.mu.next();n.Eu.set(r,new rC(t)),n.du=n.du.insert(t,r),_L(n.remoteStore,new Dd(ri(sv(t.path)),r,"TargetPurposeLimboResolution",wC.ue))}}async function Ud(n,e,t){let r=_e(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=MS.Es(c.targetId,u);s.push(f)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,u){let d=_e(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(u,g=>$.forEach(g.Is,_=>d.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>$.forEach(g.ds,_=>d.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!Kc(f))throw f;X(PC,"Failed to update sequence numbers: "+f)}for(let f of u){let g=f.targetId;if(!f.fromCache){let _=d.Fs.get(g),I=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(I);d.Fs=d.Fs.insert(g,x)}}})(r.localStore,s))}async function rK(n,e){let t=_e(n);if(!t.currentUser.isEqual(e)){X(jC,"User change. New user:",e.toKey());let r=await gL(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new K(V.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ud(t,r.Bs)}}function iK(n,e){let t=_e(n),r=t.Eu.get(e);if(r&&r.lu)return Ne().add(r.key);{let i=Ne(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function xL(n){let e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X7.bind(null,e),e.hu.J_=z7.bind(null,e.eventManager),e.hu.pu=q7.bind(null,e.eventManager),e}function sK(n){let e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tK.bind(null,e),e}var RL=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=cv(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return T7(this.persistence,new FS,t.initialUser,this.serializer)}Du(t){return new Ug(NS.Vi,this.serializer)}bu(t){return new US}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),oC=class extends RL{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Le(this.persistence.referenceDelegate instanceof Bg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ES(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?or.withCacheSize(this.cacheSizeBytes):or.DEFAULT;return new Ug(r=>Bg.Vi(r,t),this.serializer)}};var oK=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rK.bind(null,this.syncEngine),await G7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new XS})()}createDatastore(t){let r=cv(t.databaseInfo.databaseId),i=(function(o){return new GS(o)})(t.databaseInfo);return(function(o,a,c,u){return new KS(o,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new QS(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>iF(this.syncEngine,r,0),(function(){return $g.C()?new $g:new BS})())}createSyncEngine(t,r){return(function(s,o,a,c,u,d,f){let g=new iC(s,o,a,c,u,d);return f&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=_e(s);X(sa,"RemoteStore shutting down."),o.Ia.add(5),await Vd(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var Pd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var aC=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await(async function(i,s){let o=_e(i),a={documents:s.map(f=>Lg(o.serializer,f))},c=await o.Jo("BatchGetDocuments",o.serializer.databaseId,it.emptyPath(),a,s.length),u=new Map;c.forEach(f=>{let g=d7(o.serializer,f);u.set(g.key.toString(),g)});let d=[];return s.forEach(f=>{let g=u.get(f.toString());Le(!!g,55234,{key:f}),d.push(g)}),d})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new jc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=de.fromPath(r);this.mutations.push(new kg(i,this.precondition(i)))}),await(async function(r,i){let s=_e(r),o={writes:i.map(a=>dL(s.serializer,a))};await s.Wo("Commit",s.serializer.databaseId,it.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ue(50498,{Wu:e.constructor.name});t=ge.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new K(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ge.min())?yn.exists(!1):yn.updateTime(t):yn.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ge.min()))throw new K(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yn.updateTime(t)}return yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var cC=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Gu=r.maxAttempts,this.F_=new Rd(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{let e=new aC(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{let t=this.updateFunction(e);return!Ld(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!sL(t)}return!1}};var zs="FirestoreClient",lC=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=jt.UNAUTHENTICATED,this.clientId=bd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{X(zs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(zs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=LC(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function OI(n,e){n.asyncQueue.verifyOperationInProgress(),X(zs,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await gL(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{js("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{X("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{js("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function oF(n,e){n.asyncQueue.verifyOperationInProgress();let t=await aK(n);X(zs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>tF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>tF(e.remoteStore,i)),n._onlineComponents=e}async function aK(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X(zs,"Using user provided OfflineComponentProvider");try{await OI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;js("Error using user provided cache. Falling back to memory cache: "+t),await OI(n,new RL)}}else X(zs,"Using default OfflineComponentProvider"),await OI(n,new oC(void 0));return n._offlineComponents}async function HC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(X(zs,"Using user provided OnlineComponentProvider"),await oF(n,n._uninitializedComponentsProvider._online)):(X(zs,"Using default OnlineComponentProvider"),await oF(n,new oK))),n._onlineComponents}function cK(n){return HC(n).then(e=>e.syncEngine)}function lK(n){return HC(n).then(e=>e.datastore)}async function Yg(n){let e=await HC(n),t=e.eventManager;return t.onListen=W7.bind(null,e.syncEngine),t.onUnlisten=Q7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=K7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=J7.bind(null,e.syncEngine),t}function uK(n,e,t={}){let r=new cr;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let d=new Pd({next:g=>{d.Ou(),o.enqueueAndForget(()=>UC(s,f));let _=g.docs.has(a);!_&&g.fromCache?u.reject(new K(V.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&c&&c.source==="server"?u.reject(new K(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new kd(sv(a.path),d,{includeMetadataChanges:!0,ka:!0});return VC(s,f)})(await Yg(n),n.asyncQueue,e,t,r)),r.promise}function dK(n,e,t={}){let r=new cr;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let d=new Pd({next:g=>{d.Ou(),o.enqueueAndForget(()=>UC(s,f)),g.fromCache&&c.source==="server"?u.reject(new K(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new kd(a,d,{includeMetadataChanges:!0,ka:!0});return VC(s,f)})(await Yg(n),n.asyncQueue,e,t,r)),r.promise}function kL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var aF=new Map;var PL="firestore.googleapis.com",cF=!0,Qg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PL,this.ssl=cF}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:cF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I7)throw new K(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Hc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new FI;switch(r.type){case"firstParty":return new BI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=aF.get(t);r&&(X("ComponentProvider","Removing Datastore"),aF.delete(t),r.terminate())})(this),Promise.resolve()}};function NL(n,e,t,r={}){var i;n=En(n,Hc);let s=Ds(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(Dm(`https://${c}`),Am("Firestore",!0)),o.host!==PL&&o.host!==c&&js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Qr(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=jt.MOCK_USER;else{d=iN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new K(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new jt(g)}n._authCredentials=new LI(new wg(d,f))}}var Gi=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ot=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Fd(t,n._jsonSchema))return new n(e,r||null,new de(it.fromString(t.referencePath)))}};Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Nt("string",Ot._jsonSchemaVersion),referencePath:Nt("string")};var Ls=class n extends Gi{constructor(e,t,r){super(e,t,sv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new de(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ML(n,e,...t){if(n=Et(n),gF("collection","path",e),n instanceof Hc){let r=it.fromString(e,...t);return TO(r),new Ls(n,null,r)}{if(!(n instanceof Ot||n instanceof Ls))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(it.fromString(e,...t));return TO(r),new Ls(n.firestore,null,r)}}function GC(n,e,...t){if(n=Et(n),arguments.length===1&&(e=bd.newId()),gF("doc","path",e),n instanceof Hc){let r=it.fromString(e,...t);return CO(r),new Ot(n,null,new de(r))}{if(!(n instanceof Ot||n instanceof Ls))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(it.fromString(e,...t));return CO(r),new Ot(n.firestore,n instanceof Ls?n.converter:null,new de(r))}}var lF="AsyncQueue",Jg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Rd(this,"async_queue_retry"),this.oc=()=>{let r=MI();r&&X(lF,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=MI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=MI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new cr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Kc(e))throw e;X(lF,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ui("INTERNAL UNHANDLED ERROR: ",uF(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=JS.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&ue(47125,{hc:uF(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function uF(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function dF(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var lr=class extends Hc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Jg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jg(e),this._firestoreClient=void 0,await e}}};function OL(n,e){let t=typeof n=="object"?n:Uo(),r=typeof n=="string"?n:e||Dg,i=pc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=rN("firestore");s&&NL(i,...s)}return i}function Bd(n){if(n._terminated)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hK(n),n._firestoreClient}function hK(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,u,d){return new zI(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kL(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new lC(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Vi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(on.fromBase64String(e))}catch(t){throw new K(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fd(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Vi._jsonSchemaVersion="firestore/bytes/1.0",Vi._jsonSchema={type:Nt("string",Vi._jsonSchemaVersion),bytes:Nt("string")};var oa=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Nd=class{constructor(e){this._methodName=e}};var Vs=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Fd(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Vs._jsonSchemaVersion="firestore/geoPoint/1.0",Vs._jsonSchema={type:Nt("string",Vs._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};var Us=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fd(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new K(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Us._jsonSchemaVersion="firestore/vectorValue/1.0",Us._jsonSchema={type:Nt("string",Us._jsonSchemaVersion),vectorValues:Nt("object")};var fK=/^__.*__$/,uC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new si(e,this.data,this.fieldMask,t,this.fieldTransforms):new ia(e,this.data,t,this.fieldTransforms)}},Zg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new si(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function FL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ec:n})}}var dC=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ev(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(FL(this.Ec)&&fK.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},hC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||cv(e)}Dc(e,t,r,i=!1){return new dC({Ec:e,methodName:t,bc:r,path:Hn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function jd(n){let e=n._freezeSettings(),t=cv(n._databaseId);return new hC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zC(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);qC("Data must be an object, but it was:",o,r);let a=UL(r,o),c,u;if(s.merge)c=new ar(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=fC(e,f,t);if(!o.contains(g))throw new K(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);jL(d,g)||d.push(g)}c=new ar(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new uC(new Nn(a),c,u)}var Xg=class n extends Nd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function LL(n,e,t,r){let i=n.Dc(1,e,t);qC("Data must be an object, but it was:",i,r);let s=[],o=Nn.empty();qs(r,(c,u)=>{let d=WC(e,c,t);u=Et(u);let f=i.gc(d);if(u instanceof Xg)s.push(d);else{let g=$d(u,f);g!=null&&(s.push(d),o.set(d,g))}});let a=new ar(s);return new Zg(o,a,i.fieldTransforms)}function VL(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[fC(e,r,t)],c=[i];if(s.length%2!=0)throw new K(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(fC(e,s[g])),c.push(s[g+1]);let u=[],d=Nn.empty();for(let g=a.length-1;g>=0;--g)if(!jL(u,a[g])){let _=a[g],I=c[g];I=Et(I);let x=o.gc(_);if(I instanceof Xg)u.push(_);else{let P=$d(I,x);P!=null&&(u.push(_),d.set(_,P))}}let f=new ar(u);return new Zg(d,f,o.fieldTransforms)}function pK(n,e,t,r=!1){return $d(t,n.Dc(r?4:3,e))}function $d(n,e){if(BL(n=Et(n)))return qC("Unsupported field value:",e,n),UL(n,e);if(n instanceof Nd)return(function(r,i){if(!FL(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=$d(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XW(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Mt.fromDate(r);return{timestampValue:Fg(i.serializer,s)}}if(r instanceof Mt){let s=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fg(i.serializer,s)}}if(r instanceof Vs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vi)return{bytesValue:aL(i.serializer,r._byteString)};if(r instanceof Ot){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Us)return(function(o,a){return{mapValue:{fields:{[CC]:{stringValue:TC},[Nc]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return RC(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${rv(r)}`)})(n,e)}function UL(n,e){let t={};return PF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(n,(r,i)=>{let s=$d(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function BL(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof Vs||n instanceof Vi||n instanceof Ot||n instanceof Nd||n instanceof Us)}function qC(n,e,t){if(!BL(t)||!vF(t)){let r=rv(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function fC(n,e,t){if((e=Et(e))instanceof oa)return e._internalPath;if(typeof e=="string")return WC(n,e);throw ev("Field path arguments must be of type string or ",n,!1,void 0,t)}var mK=new RegExp("[~\\*/\\[\\]]");function WC(n,e,t){if(e.search(mK)>=0)throw ev(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oa(...e.split("."))._internalPath}catch{throw ev(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ev(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new K(V.INVALID_ARGUMENT,a+n+c)}function jL(n,e){return n.some(t=>t.isEqual(e))}var Gc=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new pC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(dv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},pC=class extends Gc{data(){return super.data()}};function dv(n,e){return typeof e=="string"?WC(n,e):e instanceof oa?e._internalPath:e._delegate._internalPath}function $L(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new K(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Md=class{},Od=class extends Md{};function HL(n,e,...t){let r=[];e instanceof Md&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof mC).length,a=s.filter(c=>c instanceof tv).length;if(o>1||o>0&&a>0)throw new K(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var tv=class n extends Od{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return WL(e._query,t),new Gi(e.firestore,e.converter,iS(e._query,t))}_parse(e){let t=jd(e.firestore);return(function(s,o,a,c,u,d,f){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){fF(f,d);let I=[];for(let x of f)I.push(hF(c,s,x));g={arrayValue:{values:I}}}else g=hF(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||fF(f,d),g=pK(a,o,f,d==="in"||d==="not-in");return Pt.create(u,d,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function GL(n,e,t){let r=e,i=dv("where",n);return tv._create(i,r,t)}var mC=class n extends Md{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Nr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)WL(o,c),o=iS(o,c)})(e._query,t),new Gi(e.firestore,e.converter,iS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var gC=class n extends Od{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new K(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ta(s,o)})(e._query,this._field,this._direction);return new Gi(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new Hs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function zL(n,e="asc"){let t=e,r=dv("orderBy",n);return gC._create(r,t)}var vC=class n extends Od{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Gi(e.firestore,e.converter,Rg(e._query,this._limit,this._limitType))}};function qL(n){return wW("limit",n),vC._create("limit",n,"F")}function hF(n,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new K(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qF(e)&&t.indexOf("/")!==-1)throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(it.fromString(t));if(!de.isDocumentKey(r))throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return NO(n,new de(r))}if(t instanceof Ot)return NO(n,t._key);throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rv(t)}.`)}function fF(n,e){if(!Array.isArray(n)||n.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WL(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new K(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var nv=class{convertValue(e,t="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return qs(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Nc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>pt(o.doubleValue));return new Us(s)}convertGeoPoint(e){return new Vs(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=iv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sd(e));default:return null}}convertTimestamp(e){let t=Bi(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=it.fromString(e);Le(pL(r),9688,{name:e});let i=new Ag(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(t)||Ui(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function KC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var _C=class extends nv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}};var Fs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Bs=class n extends Gc{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(dv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Bs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bs._jsonSchema={type:Nt("string",Bs._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};var kc=class extends Bs{data(e={}){return super.data(e)}},Zo=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kc(this._firestore,this._userDataWriter,r.key,r,new Fs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new kc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new kc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:gK(a.type),doc:c,oldIndex:u,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function gK(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:n})}}function KL(n){n=En(n,Ot);let e=En(n.firestore,lr);return uK(Bd(e),n._key).then(t=>t2(e,n,t))}Zo._jsonSchemaVersion="firestore/querySnapshot/1.0",Zo._jsonSchema={type:Nt("string",Zo._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};var zc=class extends nv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}};function YL(n){n=En(n,Gi);let e=En(n.firestore,lr),t=Bd(e),r=new zc(e);return $L(n._query),dK(t,n._query).then(i=>new Zo(e,r,n,i))}function QL(n,e,t){n=En(n,Ot);let r=En(n.firestore,lr),i=KC(n.converter,e,t);return hv(r,[zC(jd(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,yn.none())])}function JL(n,e,t,...r){n=En(n,Ot);let i=En(n.firestore,lr),s=jd(i),o;return o=typeof(e=Et(e))=="string"||e instanceof oa?VL(s,"updateDoc",n._key,e,t,r):LL(s,"updateDoc",n._key,e),hv(i,[o.toMutation(n._key,yn.exists(!0))])}function ZL(n){return hv(En(n.firestore,lr),[new jc(n._key,yn.none())])}function XL(n,e){let t=En(n.firestore,lr),r=GC(n),i=KC(n.converter,e);return hv(t,[zC(jd(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,yn.exists(!1))]).then(()=>r)}function e2(n,...e){var t,r,i;n=Et(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||dF(e[o])||(s=e[o++]);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(dF(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof Ot)u=En(n.firestore,lr),d=sv(n._key.path),c={next:f=>{e[o]&&e[o](t2(u,n,f))},error:e[o+1],complete:e[o+2]};else{let f=En(n,Gi);u=En(f.firestore,lr),d=f._query;let g=new zc(u);c={next:_=>{e[o]&&e[o](new Zo(u,g,f,_))},error:e[o+1],complete:e[o+2]},$L(n._query)}return(function(g,_,I,x){let P=new Pd(x),B=new kd(_,P,I);return g.asyncQueue.enqueueAndForget(async()=>VC(await Yg(g),B)),()=>{P.Ou(),g.asyncQueue.enqueueAndForget(async()=>UC(await Yg(g),B))}})(Bd(u),d,a,c)}function hv(n,e){return(function(r,i){let s=new cr;return r.asyncQueue.enqueueAndForget(async()=>Z7(await cK(r),i,s)),s.promise})(Bd(n),e)}function t2(n,e,t){let r=t.docs.get(e._key),i=new zc(n);return new Bs(n,i,e._key,r,new Fs(t.hasPendingWrites,t.fromCache),e.converter)}var vK={maxAttempts:5};function md(n,e){if((n=Et(n)).firestore!==e)throw new K(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var yC=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jd(e)}get(e){let t=md(e,this._firestore),r=new _C(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return ue(24041);let s=i[0];if(s.isFoundDocument())return new Gc(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Gc(this._firestore,r,t._key,null,t.converter);throw ue(18433,{doc:s})})}set(e,t,r){let i=md(e,this._firestore),s=KC(i.converter,t,r),o=zC(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){let s=md(e,this._firestore),o;return o=typeof(t=Et(t))=="string"||t instanceof oa?VL(this._dataReader,"Transaction.update",s._key,t,r,i):LL(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){let t=md(e,this._firestore);return this._transaction.delete(t._key),this}};var EC=class extends yC{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=md(e,this._firestore),r=new zc(this._firestore);return super.get(e).then(i=>new Bs(this._firestore,r,t._key,i._document,new Fs(!1,!1),t.converter))}};function n2(n,e,t){n=En(n,lr);let r=Object.assign(Object.assign({},vK),t);return(function(s){if(s.maxAttempts<1)throw new K(V.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(s,o,a){let c=new cr;return s.asyncQueue.enqueueAndForget(async()=>{let u=await lK(s);new cC(s.asyncQueue,u,a,o,c).zu()}),c.promise})(Bd(n),i=>e(new EC(n,i)),r)}(function(e,t=!0){(function(i){qc=i})(xs),xr(new _n("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new lr(new VI(r.getProvider("auth-internal")),new jI(o,r.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ag(u.options.projectId,d)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),bt(bO,wO,e),bt(bO,wO,"esm2017")})();var ca=class{constructor(e){return e}},r2="firestore",YC=class{constructor(){return gc(r2)}};var QC=new Q("angularfire2.firestore-instances");function _K(n,e){let t=Qu(r2,n,e);return t&&new ca(t)}function yK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ca(r)}}var EK={provide:YC,deps:[[new Vn,QC]]},bK={provide:ca,useFactory:_K,deps:[[new Vn,QC],xi]};function i2(n,...e){return bt("angularfire",Rs.full,"fst"),gr([bK,EK,{provide:QC,useFactory:yK(n),multi:!0,deps:[Me,qe,ks,jo,[new Vn,hd],[new Vn,vc],...e]}])}var Qc=ft(XL,!0,2);var ur=ft(ML,!0,2);var JC=ft(ZL,!0,2);var Ws=ft(GC,!0,2);var ZC=ft(KL,!0);var Hd=ft(YL,!0);var s2=ft(OL,!0);var Jc=ft(qL,!0,2);var fv=ft(e2,!0);var Zc=ft(zL,!0,2),la=ft(HL,!0,2);var o2=ft(n2,!0),a2=ft(QL,!0,2);var XC=ft(JL,!0,2);var c2=ft(GL,!0,2);var l2={production:!1,firebase:{apiKey:"AIzaSyBQ18QYhul1hn4RaOsgCsWUW_YaxrwEoqQ",authDomain:"jeub2-online.firebaseapp.com",projectId:"jeub2-online",storageBucket:"jeub2-online.firebasestorage.app",messagingSenderId:"702638381652",appId:"1:702638381652:web:fd034689545996dd8d2bc1",measurementId:"G-M3MPPHV9VB"}};var we="primary",th=Symbol("RouteTitle"),iT=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function il(n){return new iT(n)}function IK(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function yv(n){return new Promise((e,t)=>{n.pipe(pi()).subscribe({next:r=>e(r),error:r=>t(r)})})}function SK(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!oi(n[t],e[t]))return!1;return!0}function oi(n,e){let t=n?sT(n):void 0,r=e?sT(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!_2(n[i],e[i]))return!1;return!0}function sT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function y2(n){return n.length>0?n[n.length-1]:null}function ma(n){return Bl(n)?n:Ii(n)?$e(Promise.resolve(n)):Se(n)}function E2(n){return Bl(n)?yv(n):Promise.resolve(n)}var CK={exact:w2,subset:I2},b2={exact:TK,subset:DK,ignored:()=>!0};function u2(n,e,t){return CK[t.paths](n.root,e.root,t.matrixParams)&&b2[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function TK(n,e){return oi(n,e)}function w2(n,e,t){if(!ha(n.segments,e.segments)||!gv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!w2(n.children[r],e.children[r],t))return!1;return!0}function DK(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_2(n[t],e[t]))}function I2(n,e,t){return S2(n,e,e.segments,t)}function S2(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ha(i,t)||e.hasChildren()||!gv(i,t,r))}else if(n.segments.length===t.length){if(!ha(n.segments,t)||!gv(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!I2(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ha(n.segments,i)||!gv(n.segments,i,r)||!n.children[we]?!1:S2(n.children[we],e,s,r)}}function gv(n,e,t){return e.every((r,i)=>b2[t](n[i].parameters,r.parameters))}var ai=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=il(this.queryParams),this._queryParamMap}toString(){return RK.serialize(this)}},ze=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vv(this)}},da=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=il(this.parameters),this._parameterMap}toString(){return T2(this)}};function AK(n,e){return ha(n,e)&&n.every((t,r)=>oi(t.parameters,e[r].parameters))}function ha(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function xK(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var cl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new Ks,providedIn:"root"})}return n})(),Ks=class{parse(e){let t=new aT(e);return new ai(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Gd(e.root,!0)}`,r=NK(e.queryParams),i=typeof e.fragment=="string"?`#${kK(e.fragment)}`:"";return`${t}${r}${i}`}},RK=new Ks;function vv(n){return n.segments.map(e=>T2(e)).join("/")}function Gd(n,e){if(!n.hasChildren())return vv(n);if(e){let t=n.children[we]?Gd(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==we&&r.push(`${i}:${Gd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=xK(n,(r,i)=>i===we?[Gd(n.children[we],!1)]:[`${i}:${Gd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${vv(n)}/${t[0]}`:`${vv(n)}/(${t.join("//")})`}}function C2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pv(n){return C2(n).replace(/%3B/gi,";")}function kK(n){return encodeURI(n)}function oT(n){return C2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _v(n){return decodeURIComponent(n)}function d2(n){return _v(n.replace(/\+/g,"%20"))}function T2(n){return`${oT(n.path)}${PK(n.parameters)}`}function PK(n){return Object.entries(n).map(([e,t])=>`;${oT(e)}=${oT(t)}`).join("")}function NK(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${pv(t)}=${pv(i)}`).join("&"):`${pv(t)}=${pv(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var MK=/^[^\/()?;#]+/;function eT(n){let e=n.match(MK);return e?e[0]:""}var OK=/^[^\/()?;=#]+/;function FK(n){let e=n.match(OK);return e?e[0]:""}var LK=/^[^=?&#]+/;function VK(n){let e=n.match(LK);return e?e[0]:""}var UK=/^[^&#]+/;function BK(n){let e=n.match(UK);return e?e[0]:""}var aT=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new ze(e,t)),r}parseSegment(){let e=eT(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new da(_v(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=FK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=eT(this.remaining);i&&(r=i,this.capture(r))}e[_v(t)]=_v(r)}parseQueryParam(e){let t=VK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=BK(this.remaining);o&&(r=o,this.capture(r))}let i=d2(t),s=d2(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=eT(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=we);let o=this.parseChildren();t[s??we]=Object.keys(o).length===1&&o[we]?o[we]:new ze([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function D2(n){return n.segments.length>0?new ze([],{[we]:n}):n}function A2(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=A2(i);if(r===we&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ze(n.segments,e);return jK(t)}function jK(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new ze(n.segments.concat(e.segments),e.children)}return n}function sl(n){return n instanceof ai}function $K(n,e,t=null,r=null,i=new Ks){let s=x2(n);return R2(s,e,t,r,i)}function x2(n){let e;function t(s){let o={};for(let c of s.children){let u=t(c);o[c.outlet]=u}let a=new ze(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=D2(r);return e??i}function R2(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return tT(s,s,s,t,r,i);let o=HK(e);if(o.toRoot())return tT(s,s,new ze([],{}),t,r,i);let a=GK(o,s,n),c=a.processChildren?qd(a.segmentGroup,a.index,o.commands):P2(a.segmentGroup,a.index,o.commands);return tT(s,a.segmentGroup,c,t,r,i)}function Ev(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Kd(n){return typeof n=="object"&&n!=null&&n.outlets}function h2(n,e,t){n||="\u0275";let r=new ai;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function tT(n,e,t,r,i,s){let o={};for(let[u,d]of Object.entries(r??{}))o[u]=Array.isArray(d)?d.map(f=>h2(u,f,s)):h2(u,d,s);let a;n===e?a=t:a=k2(n,e,t);let c=D2(A2(a));return new ai(c,o,i)}function k2(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=k2(s,e,t)}),new ze(n.segments,r)}var bv=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ev(r[0]))throw new U(4003,!1);let i=r.find(Kd);if(i&&i!==y2(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function HK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new bv(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new bv(t,e,r)}var el=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function GK(n,e,t){if(n.isAbsolute)return new el(e,!0,0);if(!t)return new el(e,!1,NaN);if(t.parent===null)return new el(t,!0,0);let r=Ev(n.commands[0])?0:1,i=t.segments.length-1+r;return zK(t,i,n.numberOfDoubleDots)}function zK(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new el(r,!1,i-s)}function qK(n){return Kd(n[0])?n[0].outlets:{[we]:n}}function P2(n,e,t){if(n??=new ze([],{}),n.segments.length===0&&n.hasChildren())return qd(n,e,t);let r=WK(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ze(n.segments.slice(0,r.pathIndex),{});return s.children[we]=new ze(n.segments.slice(r.pathIndex),n.children),qd(s,0,i)}else return r.match&&i.length===0?new ze(n.segments,{}):r.match&&!n.hasChildren()?cT(n,e,t):r.match?qd(n,0,i):cT(n,e,t)}function qd(n,e,t){if(t.length===0)return new ze(n.segments,{});{let r=qK(t),i={};if(Object.keys(r).some(s=>s!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let s=qd(n.children[we],e,t);return new ze(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=P2(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ze(n.segments,i)}}function WK(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Kd(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!p2(c,u,o))return s;r+=2}else{if(!p2(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function cT(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Kd(s)){let c=KK(s.outlets);return new ze(r,c)}if(i===0&&Ev(t[0])){let c=n.segments[e];r.push(new da(c.path,f2(t[0]))),i++;continue}let o=Kd(s)?s.outlets[we]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Ev(a)?(r.push(new da(o,f2(a))),i+=2):(r.push(new da(o,{})),i++)}return new ze(r,{})}function KK(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=cT(new ze([],{}),0,r))}),e}function f2(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function p2(n,e,t){return n==t.path&&oi(e,t.parameters)}var tl="imperative",Ht=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ht||{}),dr=class{id;url;constructor(e,t){this.id=e,this.url=t}},fa=class extends dr{type=Ht.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ci=class extends dr{urlAfterRedirects;type=Ht.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Mn||{}),Yd=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Yd||{}),zi=class extends dr{reason;code;type=Ht.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qi=class extends dr{reason;code;type=Ht.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Qd=class extends dr{error;target;type=Ht.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wv=class extends dr{urlAfterRedirects;state;type=Ht.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lT=class extends dr{urlAfterRedirects;state;type=Ht.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uT=class extends dr{urlAfterRedirects;state;shouldActivate;type=Ht.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dT=class extends dr{urlAfterRedirects;state;type=Ht.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hT=class extends dr{urlAfterRedirects;state;type=Ht.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fT=class{route;type=Ht.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pT=class{route;type=Ht.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mT=class{snapshot;type=Ht.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gT=class{snapshot;type=Ht.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vT=class{snapshot;type=Ht.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_T=class{snapshot;type=Ht.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jd=class{routerEvent;position;anchor;type=Ht.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Zd=class{},ol=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function YK(n){return!(n instanceof Zd)&&!(n instanceof ol)}function QK(n,e){return n.providers&&!n._injector&&(n._injector=rc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Mr(n){return n.outlet||we}function JK(n,e){let t=n.filter(r=>Mr(r)===e);return t.push(...n.filter(r=>Mr(r)!==e)),t}function ll(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var yT=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ll(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ul(this.rootInjector)}},ul=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new yT(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(re(_t))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Iv=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ET(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ET(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=bT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bT(e,this._root).map(t=>t.value)}};function ET(n,e){if(n===e.value)return e;for(let t of e.children){let r=ET(n,t);if(r)return r}return null}function bT(n,e){if(n===e.value)return[e];for(let t of e.children){let r=bT(n,t);if(r.length)return r.unshift(e),r}return[]}var qn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Xc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Sv=class extends Iv{snapshot;constructor(e,t){super(e),this.snapshot=t,AT(this,e)}toString(){return this.snapshot.toString()}};function N2(n){let e=ZK(n),t=new nt([new da("",{})]),r=new nt({}),i=new nt({}),s=new nt({}),o=new nt(""),a=new pa(t,r,s,o,i,we,n,e.root);return a.snapshot=e.root,new Sv(new qn(a,[]),e)}function ZK(n){let e={},t={},r={},s=new nl([],e,r,"",t,we,n,null,{});return new Tv("",new qn(s,[]))}var pa=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Oe(u=>u[th]))??Se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Oe(e=>il(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Oe(e=>il(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Cv(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&O2(i)&&(r.resolve[th]=i.title),r}var nl=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[th]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=il(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=il(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Tv=class extends Iv{url;constructor(e,t){super(t),this.url=e,AT(this,t)}toString(){return M2(this._root)}};function AT(n,e){e.value._routerState=n,e.children.forEach(t=>AT(n,t))}function M2(n){let e=n.children.length>0?` { ${n.children.map(M2).join(", ")} } `:"";return`${n.value}${e}`}function nT(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,oi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),oi(e.params,t.params)||n.paramsSubject.next(t.params),SK(e.url,t.url)||n.urlSubject.next(t.url),oi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function wT(n,e){let t=oi(n.params,e.params)&&AK(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||wT(n.parent,e.parent))}function O2(n){return typeof n.title=="string"||n.title===null}var XK=new Q(""),F2=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=we;activateEvents=new Ye;deactivateEvents=new Ye;attachEvents=new Ye;detachEvents=new Ye;routerOutletData=uk();parentContexts=F(ul);location=F(er);changeDetector=F(Ft);inputBinder=F(nh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new IT(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ut({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[qr]})}return n})(),IT=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===pa?this.route:e===ul?this.childContexts:e===XK?this.outletData:this.parent.get(e,t)}},nh=new Q(""),xT=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=vf([r.queryParams,r.params,r.data]).pipe(Sn(([s,o,a],c)=>(a=O(O(O({},s),o),a),c===0?Se(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=gk(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),L2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=yt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&le(0,"router-outlet")},dependencies:[F2],encapsulation:2})}return n})();function RT(n){let e=n.children&&n.children.map(RT),t=e?ne(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=L2),t}function eY(n,e,t){let r=Xd(n,e._root,t?t._root:void 0);return new Sv(r,e)}function Xd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=tY(n,e,t);return new qn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Xd(n,a)),o}}let r=nY(e.value),i=e.children.map(s=>Xd(n,s));return new qn(r,i)}}function tY(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xd(n,r,i);return Xd(n,r)})}function nY(n){return new pa(new nt(n.url),new nt(n.params),new nt(n.queryParams),new nt(n.fragment),new nt(n.data),n.outlet,n.component,n)}var eh=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},V2="ngNavigationCancelingError";function Dv(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=sl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=U2(!1,Mn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function U2(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[V2]=!0,t.cancellationCode=e,t}function rY(n){return B2(n)&&sl(n.url)}function B2(n){return!!n&&n[V2]}var iY=(n,e,t,r)=>Oe(i=>(new ST(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ST=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),nT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Xc(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Xc(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Xc(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Xc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new _T(s.value.snapshot))}),e.children.length&&this.forwardEvent(new gT(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(nT(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),nT(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Av=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},rl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function sY(n,e,t){let r=n._root,i=e?e._root:null;return zd(r,i,t,[r.value])}function oY(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function dl(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Iy(n)?n:e.get(n):r}function zd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Xc(e);return n.children.forEach(o=>{aY(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Wd(a,t.getContext(o),i)),i}function aY(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=cY(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Av(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?zd(n,e,a?a.children:null,r,i):zd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new rl(a.outlet.component,o))}else o&&Wd(e,a,i),i.canActivateChecks.push(new Av(r)),s.component?zd(n,null,a?a.children:null,r,i):zd(n,null,t,r,i);return i}function cY(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ha(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ha(n.url,e.url)||!oi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wT(n,e)||!oi(n.queryParams,e.queryParams);case"paramsChange":default:return!wT(n,e)}}function Wd(n,e,t){let r=Xc(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Wd(o,e.children.getContext(s),t):Wd(o,null,t):Wd(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new rl(e.outlet.component,i)):t.canDeactivateChecks.push(new rl(null,i)):t.canDeactivateChecks.push(new rl(null,i))}function rh(n){return typeof n=="function"}function lY(n){return typeof n=="boolean"}function uY(n){return n&&rh(n.canLoad)}function dY(n){return n&&rh(n.canActivate)}function hY(n){return n&&rh(n.canActivateChild)}function fY(n){return n&&rh(n.canDeactivate)}function pY(n){return n&&rh(n.canMatch)}function j2(n){return n instanceof ro||n?.name==="EmptyError"}var mv=Symbol("INITIAL_VALUE");function al(){return Sn(n=>vf(n.map(e=>e.pipe(Ze(1),Ma(mv)))).pipe(Oe(e=>{for(let t of e)if(t!==!0){if(t===mv)return mv;if(t===!1||mY(t))return t}return!0}),dn(e=>e!==mv),Ze(1)))}function mY(n){return sl(n)||n instanceof eh}function $2(n){return n.aborted?Se(void 0).pipe(Ze(1)):new ve(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function H2(n){return Fr($2(n))}function gY(n,e){return zt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Se(ne(O({},t),{guardsResult:!0})):vY(o,r,i,n).pipe(zt(a=>a&&lY(a)?_Y(r,s,n,e):Se(a)),Oe(a=>ne(O({},t),{guardsResult:a})))})}function vY(n,e,t,r){return $e(n).pipe(zt(i=>IY(i.component,i.route,t,e,r)),pi(i=>i!==!0,!0))}function _Y(n,e,t,r){return $e(e).pipe(Na(i=>ka(EY(i.route.parent,r),yY(i.route,r),wY(n,i.path,t),bY(n,i.route,t))),pi(i=>i!==!0,!0))}function yY(n,e){return n!==null&&e&&e(new vT(n)),Se(!0)}function EY(n,e){return n!==null&&e&&e(new mT(n)),Se(!0)}function bY(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Se(!0);let i=r.map(s=>jl(()=>{let o=ll(e)??t,a=dl(s,o),c=dY(a)?a.canActivate(e,n):Tt(o,()=>a(e,n));return ma(c).pipe(pi())}));return Se(i).pipe(al())}function wY(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>oY(o)).filter(o=>o!==null).map(o=>jl(()=>{let a=o.guards.map(c=>{let u=ll(o.node)??t,d=dl(c,u),f=hY(d)?d.canActivateChild(r,n):Tt(u,()=>d(r,n));return ma(f).pipe(pi())});return Se(a).pipe(al())}));return Se(s).pipe(al())}function IY(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Se(!0);let o=s.map(a=>{let c=ll(e)??i,u=dl(a,c),d=fY(u)?u.canDeactivate(n,e,t,r):Tt(c,()=>u(n,e,t,r));return ma(d).pipe(pi())});return Se(o).pipe(al())}function SY(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return Se(!0);let o=s.map(a=>{let c=dl(a,n),u=uY(c)?c.canLoad(e,t):Tt(n,()=>c(e,t)),d=ma(u);return i?d.pipe(H2(i)):d});return Se(o).pipe(al(),G2(r))}function G2(n){return W_(qt(e=>{if(typeof e!="boolean")throw Dv(n,e)}),Oe(e=>e===!0))}function CY(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return Se(!0);let o=s.map(a=>{let c=dl(a,n),u=pY(c)?c.canMatch(e,t):Tt(n,()=>c(e,t)),d=ma(u);return i?d.pipe(H2(i)):d});return Se(o).pipe(al(),G2(r))}var ua=class z2 extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,z2.prototype)}},CT=class q2 extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,q2.prototype)}};function TY(n){throw new U(4e3,!1)}function DY(n){throw U2(!1,Mn.GuardRejected)}var AY=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[we])throw TY(`${e.redirectTo}`);i=i.children[we]}}async applyRedirectCommands(e,t,r,i,s){let o=await xY(t,i,s);if(o instanceof ai)throw new CT(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new CT(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ai(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ze(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function xY(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:u,data:d,title:f}=e;return yv(ma(Tt(t,()=>r({params:u,data:d,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:f}))))}var TT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RY(n,e,t,r,i,s){let o=W2(n,e,t);return o.matched?(r=QK(e,r),CY(r,e,t,i,s).pipe(Oe(a=>a===!0?o:O({},TT)))):Se(o)}function W2(n,e,t){if(e.path==="**")return kY(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},TT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||IK)(t,n,e);if(!i)return O({},TT);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?O(O({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function kY(n){return{matched:!0,parameters:n.length>0?y2(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function m2(n,e,t,r){return t.length>0&&MY(n,t,r)?{segmentGroup:new ze(e,NY(r,new ze(t,n.children))),slicedSegments:[]}:t.length===0&&OY(n,t,r)?{segmentGroup:new ze(n.segments,PY(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ze(n.segments,n.children),slicedSegments:t}}function PY(n,e,t,r){let i={};for(let s of t)if(xv(n,e,s)&&!r[Mr(s)]){let o=new ze([],{});i[Mr(s)]=o}return O(O({},r),i)}function NY(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&Mr(r)!==we){let i=new ze([],{});t[Mr(r)]=i}return t}function MY(n,e,t){return t.some(r=>xv(n,e,r)&&Mr(r)!==we)}function OY(n,e,t){return t.some(r=>xv(n,e,r))}function xv(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function FY(n,e,t){return e.length===0&&!n.children[t]}var LY=class{};async function VY(n,e,t,r,i,s,o="emptyOnly",a){return new BY(n,e,t,r,i,o,s,a).recognize()}var UY=31,BY=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new AY(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}async recognize(){let e=m2(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new qn(r,t),s=new Tv("",i),o=$K(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new nl([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,we,t),rootSnapshot:t}}catch(r){if(r instanceof CT)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ua?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof qn?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let u=r.children[c],d=JK(t,c),f=await this.processSegmentGroup(e,d,u,c,i);o.push(...f)}let a=K2(o);return jY(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(u){if(u instanceof ua||j2(u))continue;throw u}if(FY(r,i,s))return new LY;throw new ua(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(Mr(r)!==o&&(o===we||!xv(i,s,r)))throw new ua(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new ua(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=W2(t,i,s);if(!c)throw new ua(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>UY&&(this.allowRedirects=!1));let _=new nl(s,u,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,g2(i),Mr(i),i.component??i._loadedComponent??null,i,v2(i)),I=Cv(_,a,this.paramsInheritanceStrategy);if(_.params=Object.freeze(I.params),_.data=Object.freeze(I.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let x=await this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,_,e),P=await this.applyRedirects.lineralizeSegments(i,x);return this.processSegment(e,r,t,P.concat(g),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await yv(RY(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new ua(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:g}=a,_=new nl(f,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,g2(r),Mr(r),r.component??r._loadedComponent??null,r,v2(r)),I=Cv(_,o,this.paramsInheritanceStrategy);_.params=Object.freeze(I.params),_.data=Object.freeze(I.data);let{segmentGroup:x,slicedSegments:P}=m2(t,f,g,c);if(P.length===0&&x.hasChildren()){let ee=await this.processChildren(u,c,x,_);return new qn(_,ee)}if(c.length===0&&P.length===0)return new qn(_,[]);let B=Mr(r)===s,Y=await this.processSegment(u,c,x,P,B?we:s,!0,_);return new qn(_,Y instanceof qn?[Y]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await yv(SY(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw DY(t)}return{routes:[],injector:e}}};function jY(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function $Y(n){let e=n.value.routeConfig;return e&&e.path===""}function K2(n){let e=[],t=new Set;for(let r of n){if(!$Y(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=K2(r.children);e.push(new qn(r.value,i))}return e.filter(r=>!t.has(r))}function g2(n){return n.data||{}}function v2(n){return n.resolve||{}}var HY=new Q("",{factory:()=>VY});function GY(n,e,t,r,i,s,o){let a=n.get(HY);return zt(c=>Se(c).pipe(Sn(u=>a(n,e,t,r,u.extractedUrl,i,s,o)),Oe(({state:u,tree:d})=>ne(O({},c),{targetSnapshot:u,urlAfterRedirects:d}))))}function zY(n,e){return zt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Se(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of Y2(c))o.add(u);let a=0;return $e(o).pipe(Na(c=>s.has(c)?qY(c,r,n,e):(c.data=Cv(c,c.parent,n).resolve,Se(void 0))),qt(()=>a++),Ef(1),zt(c=>a===o.size?Se(t):en))})}function Y2(n){let e=n.children.map(t=>Y2(t)).flat();return[n,...e]}function qY(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!O2(i)&&(s[th]=i.title),jl(()=>(n.data=Cv(n,n.parent,t).resolve,WY(s,n,e,r).pipe(Oe(o=>(n._resolvedData=o,n.data=O(O({},n.data),o),null)))))}function WY(n,e,t,r){let i=sT(n);if(i.length===0)return Se({});let s={};return $e(i).pipe(zt(o=>KY(n[o],e,t,r).pipe(pi(),qt(a=>{if(a instanceof eh)throw Dv(new Ks,a);s[o]=a}))),Ef(1),Oe(()=>s),Pa(o=>j2(o)?en:ey(o)))}function KY(n,e,t,r){let i=ll(e)??r,s=dl(n,i),o=s.resolve?s.resolve(e,t):Tt(i,()=>s(e,t));return ma(o)}function rT(n){return Sn(e=>{let t=n(e);return t?$e(t).pipe(Oe(()=>e)):Se(e)})}var Q2=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===we);return r}getResolvedTitleForRoute(t){return t.data[th]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(YY),providedIn:"root"})}return n})(),YY=(()=>{class n extends Q2{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(re(Jk))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hl=new Q("",{factory:()=>({})}),ih=new Q(""),Rv=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=F(kE);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await E2(Tt(t,()=>r.loadComponent())),o=await Z2(J2(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await QY(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function QY(n,e,t,r){let i=await E2(Tt(t,()=>n.loadChildren())),s=await Z2(J2(i)),o;s instanceof Sp||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,u=!1;return Array.isArray(o)?(c=o,u=!0):(a=o.create(t).injector,c=a.get(ih,[],{optional:!0,self:!0}).flat()),{routes:c.map(RT),injector:a}}function JY(n){return n&&typeof n=="object"&&"default"in n}function J2(n){return JY(n)?n.default:n}async function Z2(n){return n}var kT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(ZY),providedIn:"root"})}return n})(),ZY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PT=new Q(""),NT=new Q("");function X2(n,e,t){let r=n.get(NT),i=n.get(Xe);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),XY(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&Tt(n,()=>c({transition:a,from:e,to:t})),o}function XY(n){return new Promise(e=>{wo({read:()=>setTimeout(e)},{injector:n})})}var eQ=()=>{},MT=new Q(""),kv=(()=>{class n{currentNavigation=Kt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Kt(null);events=new Ee;transitionAbortWithErrorSubject=new Ee;configLoader=F(Rv);environmentInjector=F(_t);destroyRef=F(Zn);urlSerializer=F(cl);rootContexts=F(ul);location=F(Cs);inputBindingEnabled=F(nh,{optional:!0})!==null;titleStrategy=F(Q2);options=F(hl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=F(kT);createViewTransition=F(PT,{optional:!0});navigationErrorHandler=F(MT,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Se(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new fT(i)),r=i=>this.events.next(new pT(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;St(()=>{this.transitions?.next(ne(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new nt(null),this.transitions.pipe(dn(r=>r!==null),Sn(r=>{let i=!1,s=new AbortController;return Se(r).pipe(Sn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Mn.SupersededByNewNavigation),en;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?ne(O({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new qi(o.id,this.urlSerializer.serialize(o.rawUrl),"",Yd.IgnoredSameUrlNavigation)),o.resolve(!1),en;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Se(o).pipe(Sn(d=>(this.events.next(new fa(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?en:Promise.resolve(d))),GY(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),qt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=d.urlAfterRedirects,g));let f=new wv(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:f,source:g,restoredState:_,extras:I}=o,x=new fa(d,this.urlSerializer.serialize(f),g,_);this.events.next(x);let P=N2(this.rootComponentType).snapshot;return this.currentTransition=r=ne(O({},o),{targetSnapshot:P,urlAfterRedirects:f,extras:ne(O({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(B=>(B.finalUrl=f,B)),Se(r)}else return this.events.next(new qi(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Yd.IgnoredByUrlHandlingStrategy)),o.resolve(!1),en}),qt(o=>{let a=new lT(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Oe(o=>(this.currentTransition=r=ne(O({},o),{guards:sY(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),gY(this.environmentInjector,o=>this.events.next(o)),qt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Dv(this.urlSerializer,o.guardsResult);let a=new uT(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),dn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Mn.GuardRejected),!1)),rT(o=>{if(o.guards.canActivateChecks.length!==0)return Se(o).pipe(qt(a=>{let c=new dT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Sn(a=>{let c=!1;return Se(a).pipe(zY(this.paramsInheritanceStrategy,this.environmentInjector),qt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Mn.NoDataFromResolver)}}))}),qt(a=>{let c=new hT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),rT(o=>{let a=u=>{let d=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let f=ll(u)??this.environmentInjector;d.push(this.configLoader.loadComponent(f,u.routeConfig).then(g=>{u.component=g}))}for(let f of u.children)d.push(...a(f));return d},c=a(o.targetSnapshot.root);return c.length===0?Se(o):$e(Promise.all(c).then(()=>o))}),rT(()=>this.afterPreactivation()),Sn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?$e(c).pipe(Oe(()=>r)):Se(r)}),Oe(o=>{let a=eY(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ne(O({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),qt(()=>{this.events.next(new Zd)}),iY(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Ze(1),Fr($2(s.signal).pipe(dn(()=>!i&&!r.targetRouterState),qt(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Mn.Aborted)}))),qt({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=eQ,a)),this.lastSuccessfulNavigation.set(St(this.currentNavigation)),this.events.next(new ci(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Fr(this.transitionAbortWithErrorSubject.pipe(qt(o=>{throw o}))),ry(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Mn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Pa(o=>{if(this.destroyed)return r.resolve(!1),en;if(i=!0,B2(o))this.events.next(new zi(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),rY(o)?this.events.next(new ol(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Qd(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=Tt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof eh){let{message:u,cancellationCode:d}=Dv(this.urlSerializer,c);this.events.next(new zi(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new ol(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return en}))}))}cancelNavigationTransition(t,r,i){let s=new zi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=St(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tQ(n){return n!==tl}var nQ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(rQ),providedIn:"root"})}return n})(),DT=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},rQ=(()=>{class n extends DT{static \u0275fac=(()=>{let t;return function(i){return(t||(t=yo(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OT=(()=>{class n{urlSerializer=F(cl);options=F(hl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=F(Cs);urlHandlingStrategy=F(kT);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ai;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof ai?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=N2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>F(eV),providedIn:"root"})}return n})(),eV=(()=>{class n extends OT{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof fa?this.updateStateMemento():t instanceof qi?this.commitTransition(r):t instanceof wv?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Zd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof zi&&t.code!==Mn.SupersededByNewNavigation&&t.code!==Mn.Redirect?this.restoreHistory(r):t instanceof Qd?this.restoreHistory(r,!0):t instanceof ci&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=O(O({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=O(O({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=yo(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FT(n,e){n.events.pipe(dn(t=>t instanceof ci||t instanceof zi||t instanceof Qd||t instanceof qi),Oe(t=>t instanceof ci||t instanceof qi?0:(t instanceof zi?t.code===Mn.Redirect||t.code===Mn.SupersededByNewNavigation:!1)?2:1),dn(t=>t!==2),Ze(1)).subscribe(()=>{e()})}var iQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ga=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=F(IE);stateManager=F(OT);options=F(hl,{optional:!0})||{};pendingTasks=F(yi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=F(kv);urlSerializer=F(cl);location=F(Cs);urlHandlingStrategy=F(kT);injector=F(_t);_events=new Ee;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=F(nQ);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=F(ih,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!F(nh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ke;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=St(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof zi&&r.code!==Mn.Redirect&&r.code!==Mn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ci)this.navigated=!0;else if(r instanceof ol){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||tQ(i.source)},o);this.scheduleNavigation(a,tl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}YK(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),tl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=O({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(Xn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return St(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(RT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=O(O({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=x2(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return R2(f,t,d,u??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=sl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,tl,null,r)}navigate(t,r={skipLocationChange:!1}){return oQ(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ds(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},iQ):r===!1?i=O({},sQ):i=r,sl(t))return u2(this.currentUrlTree,t,i);let s=this.parseUrl(t);return u2(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return FT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oQ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new U(4008,!1)}var sh=class{};var tV=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(dn(t=>t instanceof ci),Na(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=rc(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return $e(i).pipe(ss())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=$e(this.loader.loadChildren(t,r)):i=Se(null);let s=i.pipe(zt(o=>o===null?Se(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(t,r);return $e([s,o]).pipe(ss())}else return s})}static \u0275fac=function(r){return new(r||n)(re(ga),re(_t),re(sh),re(Rv))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nV=new Q(""),aQ=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=tl;restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ci?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qi&&t.code===Yd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Jd))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Jd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){vE()};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function cQ(){return F(ga).routerState.root}function oh(n,e){return{\u0275kind:n,\u0275providers:e}}function lQ(){let n=F(qe);return e=>{let t=n.get(tr);if(e!==t.components[0])return;let r=n.get(ga),i=n.get(rV);n.get(VT)===1&&r.initialNavigation(),n.get(oV,null,{optional:!0})?.setUpPreloading(),n.get(nV,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rV=new Q("",{factory:()=>new Ee}),VT=new Q("",{factory:()=>1});function iV(){let n=[{provide:tE,useValue:!0},{provide:VT,useValue:0},Ap(()=>{let e=F(qe);return e.get(HE,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(ga),s=e.get(rV);FT(i,()=>{r(!0)}),e.get(kv).afterPreactivation=()=>(r(!0),s.closed?Se(void 0):s),i.initialNavigation()}))})];return oh(2,n)}function sV(){let n=[Ap(()=>{F(ga).setUpLocationChangeListener()}),{provide:VT,useValue:2}];return oh(3,n)}var oV=new Q("");function aV(n){return oh(0,[{provide:oV,useExisting:tV},{provide:sh,useExisting:n}])}function cV(){return oh(8,[xT,{provide:nh,useExisting:xT}])}function lV(n){bo("NgRouterViewTransitions");let e=[{provide:PT,useValue:X2},{provide:NT,useValue:O({skipNextTransition:!!n?.skipInitialTransition},n)}];return oh(9,e)}var uV=[Cs,{provide:cl,useClass:Ks},ga,ul,{provide:pa,useFactory:cQ},Rv,[]],Pv=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[uV,[],{provide:ih,multi:!0,useValue:t},[],r?.errorHandler?{provide:MT,useValue:r.errorHandler}:[],{provide:hl,useValue:r||{}},r?.useHash?dQ():hQ(),uQ(),r?.preloadingStrategy?aV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?fQ(r):[],r?.bindToComponentInputs?cV().\u0275providers:[],r?.enableViewTransitions?lV().\u0275providers:[],pQ()]}}static forChild(t){return{ngModule:n,providers:[{provide:ih,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=ct({})}return n})();function uQ(){return{provide:nV,useFactory:()=>{let n=F(Hk),e=F(Me),t=F(hl),r=F(kv),i=F(cl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new aQ(i,r,n,e,t)}}}function dQ(){return{provide:Si,useClass:ZE}}function hQ(){return{provide:Si,useClass:jp}}function fQ(n){return[n.initialNavigation==="disabled"?sV().\u0275providers:[],n.initialNavigation==="enabledBlocking"?iV().\u0275providers:[]]}var LT=new Q("");function pQ(){return[{provide:LT,useFactory:lQ},{provide:xp,multi:!0,useExisting:LT}]}var gQ=[],Nv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ht({type:n});static \u0275inj=ct({imports:[Pv.forRoot(gQ),Pv]})};var Mv=(s=>(s.CASINO="CASINO",s.FREELANCE_DEV="FREELANCE_DEV",s.WEB_AGENCY="WEB_AGENCY",s.FOODTRUCK="FOODTRUCK",s.FACTORY="FACTORY",s))(Mv||{});var Ov=(i=>(i.CHAIR="CHAIR",i.SCREEN="SCREEN",i.COFFEE="COFFEE",i.PC="PC",i))(Ov||{}),ah=(u=>(u.BUN="BUN",u.STEAK="STEAK",u.CHEESE="CHEESE",u.SALAD="SALAD",u.TOMATO="TOMATO",u.SAUCE="SAUCE",u.ONION="ONION",u.PICKLE="PICKLE",u.BACON="BACON",u))(ah||{});var ch=[{id:"DEFAULT",name:"VS Code Dark",cost:0,bgClass:"bg-[#1e1e1e]",textClass:"text-slate-200",accentClass:"text-blue-400",cursorClass:"bg-blue-500",borderClass:"border-slate-700",successClass:"text-green-400"},{id:"MATRIX",name:"The Matrix",cost:2500,bgClass:"bg-black",textClass:"text-green-700 font-mono",accentClass:"text-green-400",cursorClass:"bg-green-500",borderClass:"border-green-800",successClass:"text-green-400 neon-glow"},{id:"DRACULA",name:"Dracula",cost:5e3,bgClass:"bg-[#282a36]",textClass:"text-[#f8f8f2]",accentClass:"text-[#bd93f9]",cursorClass:"bg-[#bd93f9]",borderClass:"border-[#6272a4]",successClass:"text-[#ff79c6] drop-shadow-md"},{id:"SOLARIZED",name:"Solarized Light",cost:1e4,bgClass:"bg-[#fdf6e3]",textClass:"text-[#657b83]",accentClass:"text-[#b58900]",cursorClass:"bg-[#d33682]",borderClass:"border-[#93a1a1]",successClass:"text-[#d33682] font-bold"}];var li=class n{constructor(e,t){this.auth=e;this.firestore=t;this.authInstance=e,this.user$=mO(this.auth),this.user$.subscribe(r=>{this.currentUserId=r?.uid||null,this.currentUsername=r?.displayName||"Anonyme",r&&(console.log("\u2705 Connect\xE9:",r.uid),this.listenToInvites(r.uid))}),this.listenToPublicEvents()}user$;currentUserId=null;currentUsername="Anonyme";authInstance;publicEvents$=new nt(["Bienvenue sur JEUB2 Online \u2022 En attente de gagnants..."]);invites$=new nt([]);activeGame$=new nt(null);async createMultiplayerGame(e,t,r){if(!this.currentUserId)throw new Error("Not connected");let i=[{id:0,userId:"BOT",username:"Bot",avatar:"\u{1F916}",hand:[],score:0,bet:0,status:"EMPTY"},{id:1,userId:this.currentUserId,username:e,avatar:"\u{1F451}",hand:[],score:0,bet:r,status:"WAITING_BET"},{id:2,userId:t,username:"Invit\xE9",avatar:"\u{1F464}",hand:[],score:0,bet:r,status:"WAITING_BET"}],s={id:"",hostId:this.currentUserId,guestId:t,deck:[],dealerHand:[],dealerScore:0,seats:i,turnIndex:1,phase:"LOBBY",timestamp:Date.now()};return(await Qc(ur(this.firestore,"active_games"),s)).id}joinGameRoom(e){console.log("Rejoindre la room :",e);let t=Ws(this.firestore,"active_games",e);fv(t,r=>{if(r.exists()){let i=O({id:r.id},r.data());this.activeGame$.next(i)}else this.activeGame$.next(null)}),this.currentUserId&&ZC(t).then(r=>{if(r.exists()){let i=r.data();if(i.guestId===this.currentUserId&&i.seats[2].userId!==this.currentUserId){let s=[...i.seats];s[2].userId=this.currentUserId,s[2].username=this.currentUsername,s[2].avatar="\u{1F464}",s[2].status="READY",XC(t,{seats:s})}}})}async updateGameState(e,t){await XC(Ws(this.firestore,"active_games",e),t)}leaveGame(){this.activeGame$.next(null)}async sendInvite(e,t,r,i,s){this.currentUserId&&await Qc(ur(this.firestore,"invites"),{fromId:this.currentUserId,fromName:s,toId:e,gameId:r,amount:i,timestamp:Date.now(),gameType:"BLACKJACK"})}async declineInvite(e){e.id&&await JC(Ws(this.firestore,"invites",e.id))}async acceptInvite(e){return e.id&&await JC(Ws(this.firestore,"invites",e.id)),e.gameId}listenToInvites(e){let t=la(ur(this.firestore,"invites"),c2("toId","==",e));fv(t,r=>{let i=r.docs.map(s=>O({id:s.id},s.data()));this.invites$.next(i)})}async getOnlinePlayers(){try{let e=la(ur(this.firestore,"players"),Zc("lastUpdated","desc"),Jc(20));return(await Hd(e)).docs.map(r=>O({id:r.id},r.data())).filter(r=>r.username&&r.id!==this.currentUserId).map(r=>({id:r.id,username:r.username,title:r.user?.title||"Joueur",money:r.money,avatarId:r.user?.avatarId||"\u{1F464}"}))}catch{return[]}}listenToPublicEvents(){let e=la(ur(this.firestore,"public_events"),Zc("timestamp","desc"),Jc(10));fv(e,t=>{let r=t.docs.map(i=>i.data()).map(i=>i.text);r.length>0&&this.publicEvents$.next(r)})}async logPublicEvent(e,t="INFO"){try{await Qc(ur(this.firestore,"public_events"),{text:e,type:t,timestamp:Date.now()})}catch{}}async loginGoogle(){let e=new _I;return e.setCustomParameters({prompt:"select_account"}),await vO(this.auth,e)}async logout(){return await _O(this.auth)}async saveProgress(e){if(!this.currentUserId)return;let t=Ws(this.firestore,"players",this.currentUserId);try{await a2(t,{username:e.user?.username||"Anonyme",money:e.money,gems:e.gems||0,day:e.day,timeOfDay:e.timeOfDay,hasCompletedIntro:e.hasCompletedIntro,user:e.user,companies:e.companies,employees:e.employees||[],foodtruckUpgrades:e.foodtruckUpgrades,freelanceUpgrades:e.freelanceUpgrades,foodtruckMastery:e.foodtruckMastery,dailyStats:e.dailyStats,achievements:e.achievements,leaderboardStats:{money:e.money,username:e.user?.username||"Anonyme",creationDate:e.user?.creationDate||Date.now(),stats:e.stats||{}},lastUpdated:Date.now()},{merge:!0})}catch{}}async loadProgress(){if(!this.currentUserId)return null;try{let e=await ZC(Ws(this.firestore,"players",this.currentUserId));return e.exists()?e.data():null}catch{return null}}getLeaderboard(){let e=la(ur(this.firestore,"players"),Zc("leaderboardStats.money","desc"),Jc(50));return $e(Hd(e)).pipe(Oe(t=>t.docs.map(r=>O({id:r.id},r.data().leaderboardStats))))}getHoldings(){let e=la(ur(this.firestore,"holdings"),Zc("totalValuation","desc"),Jc(20));return $e(Hd(e)).pipe(Oe(t=>t.docs.map(r=>O({id:r.id},r.data()))))}async createHolding(e,t){if(!this.currentUserId)return;let r={id:"",name:e,leaderName:t,totalValuation:0,membersCount:1,icon:"\u{1F3E2}"};await Qc(ur(this.firestore,"holdings"),r)}getMarketItems(){let e=la(ur(this.firestore,"market"),Zc("timestamp","desc"),Jc(50));return $e(Hd(e)).pipe(Oe(t=>t.docs.map(r=>O({id:r.id},r.data()))))}async sellItem(e){await Qc(ur(this.firestore,"market"),e)}async buyItem(e){if(!e.id)return"ERROR";let t=Ws(this.firestore,"market",e.id);try{return await o2(this.firestore,async r=>{if(!(await r.get(t)).exists())throw"SOLD";r.delete(t)}),"SUCCESS"}catch{return"SOLD"}}static \u0275fac=function(t){return new(t||n)(re(Yo),re(ca))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var UT={DEV_JUNIOR:{role:"DEV_JUNIOR",name:"Stagiaire",baseCost:2e3,costFactor:1.5,baseDailySalary:100,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.2,description:"Code lentement"},DEV_SENIOR:{role:"DEV_SENIOR",name:"Lead Dev",baseCost:1e4,costFactor:1.6,baseDailySalary:800,salaryFactor:1.3,baseEfficiency:4,efficiencyFactor:1.4,description:"Code tr\xE8s vite + Bonus"},COOK:{role:"COOK",name:"Cuisinier",baseCost:500,costFactor:1.55,baseDailySalary:50,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.1,description:"Cuisine"},SERVER:{role:"SERVER",name:"Serveur",baseCost:300,costFactor:1.6,baseDailySalary:40,salaryFactor:1.15,baseEfficiency:5,efficiencyFactor:1.05,description:"Service"},CASHIER:{role:"CASHIER",name:"Caissier",baseCost:200,costFactor:1.4,baseDailySalary:30,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Caisse"},STOCK_MANAGER:{role:"STOCK_MANAGER",name:"Stock",baseCost:500,costFactor:1.4,baseDailySalary:60,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Stock"},WORKER:{role:"WORKER",name:"Ouvrier",baseCost:2e3,costFactor:1.4,baseDailySalary:200,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Prod"},LINE_MANAGER:{role:"LINE_MANAGER",name:"Chef",baseCost:1e4,costFactor:1.5,baseDailySalary:1e3,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.2,description:"Supervision"}},an=class n{constructor(e){this.firebaseService=e;this.loadLocalState(),os(this.TICK_RATE_MS).subscribe(()=>this.gameLoop()),os(3e4).subscribe(()=>this.saveToCloud()),this.firebaseService.user$.subscribe(t=>{t?this.loadCloudDataForUser(t):this.isLoading$.next(!1)})}SAVE_KEY="JEUB2_SAVE_V3_ONLINE";TICK_RATE_MS=1e3;HOURS_PER_TICK=1/60;dayEnded$=new Ee;isLoading$=new nt(!0);defaultState={user:{username:"Joueur",title:"D\xE9butant",creationDate:Date.now(),avatarId:"\u{1F468}\u200D\u{1F4BC}"},money:2e3,gems:0,totalMoneyEarned:0,hasCompletedIntro:!1,tutoFlags:{foodtruckIntroSeen:!1},day:1,timeOfDay:6,companies:[this.createCompany("3","FOODTRUCK","Burger Truck",!0,0),this.createCompany("1","CASINO","Casino Royal",!1,1e3),this.createCompany("2","FREELANCE_DEV","Agence Web",!1,500),this.createCompany("4","FACTORY","Usine Tesla",!1,2e4)],employees:[],foodtruckMastery:this.initFoodtruckMastery(),foodtruckUpgrades:{grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:["BUN","STEAK"],maxServiceReached:1,hasKeyboard:!1},freelanceUpgrades:{chairLevel:0,screenLevel:0,coffeeLevel:0,pcLevel:0,bossBeaten:0,contractsCompleted:0,ownedThemes:["DEFAULT"],activeThemeId:"DEFAULT"},dailyStats:{revenue:0,expenses:0,customersServed:0,day:1},quests:[],achievements:[],activeEvents:[],lastSavedAt:Date.now(),lastOnlineAt:Date.now(),stats:{foodtruckIncome:0,burgersServed:0,bestServiceCombo:0,fastestBurgerMs:0,freelanceIncome:0,maxWpm:0,totalCharsTyped:0,factoryIncome:0,itemsProduced:0,blackjackIncome:0,handsPlayed:0,highestBet:0,biggestWin:0,totalPlayTimeMinutes:0}};state$=new nt(this.defaultState);gameState$=this.state$.asObservable();createCompany(e,t,r,i,s){return{id:e,type:t,name:r,unlocked:i,unlockCost:s,level:1,baseRevenuePerAction:10,revenuePerSecond:0,costPerSecond:0,netProfitPerSecond:0,employees:[]}}async loadCloudDataForUser(e){this.isLoading$.next(!0);let t=await this.firebaseService.loadProgress();if(t){t.user&&(t.user.username==="Entrepreneur"||t.user.username==="Anonyme")&&e.displayName&&(t.user.username=e.displayName,this.updateUsername(e.displayName));let r=this.removeDuplicateCompanies(t.companies||[]),i=ne(O(O({},this.defaultState),t),{companies:r});i.stats||(i.stats=this.defaultState.stats),this.state$.next(i),this.saveLocalState()}this.isLoading$.next(!1)}removeDuplicateCompanies(e){let t=new Set,r=e.filter(i=>{let s=t.has(i.id);return t.add(i.id),!s});return this.defaultState.companies.forEach(i=>{r.find(s=>s.id===i.id)||r.push(i)}),r.sort((i,s)=>parseInt(i.id)-parseInt(s.id))}async checkIfUserHasSave(e){return!!await this.firebaseService.loadProgress()}async initializeNewUser(e,t){let r=JSON.parse(JSON.stringify(this.defaultState));r.user={username:t,title:"D\xE9butant",creationDate:Date.now(),avatarId:"\u{1F468}\u200D\u{1F4BC}"},r.lastSavedAt=Date.now(),this.state$.next(r),this.saveLocalState(),await this.firebaseService.saveProgress(r)}unlockCompany(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({companies:r.companies.map(i=>i.id===e?ne(O({},i),{unlocked:!0}):i)}),this.saveLocalState(),this.saveToCloud()}}updateUsername(e){let t=this.state$.getValue();this.updateState({user:ne(O({},t.user),{username:e})}),this.saveToCloud()}addMoney(e){let t=this.state$.getValue(),r=O({},t.dailyStats||{day:t.day,revenue:0,expenses:0,customersServed:0});e>0&&(r.revenue+=e),this.updateState({money:t.money+e,totalMoneyEarned:e>0?t.totalMoneyEarned+e:t.totalMoneyEarned,dailyStats:r})}spendMoney(e){let t=this.state$.getValue();return t.money>=e?(this.updateState({money:t.money-e}),!0):!1}gameLoop(){let e=this.state$.getValue();if(!e.hasCompletedIntro)return;let t=e.timeOfDay+this.HOURS_PER_TICK,r=e.day,i=O({},e.dailyStats);if(t>=24){t=0;let s=0;e.companies.forEach(o=>{o.employees.forEach(a=>{s+=a.dailySalary})}),s>0&&(this.addMoney(-s),i.expenses+=s),this.dayEnded$.next(ne(O({},i),{day:e.day})),r++,i={day:r,revenue:0,expenses:0,customersServed:0}}this.updateState({day:r,timeOfDay:t,dailyStats:i})}completeIntro(){let t=this.state$.getValue().companies.map(r=>r.id==="3"?ne(O({},r),{unlocked:!0}):r);this.updateState({hasCompletedIntro:!0,money:2e3,companies:t}),this.saveToCloud()}initFoodtruckMastery(){let e={};return Object.values(ah).forEach(t=>e[t]={level:1,xp:0,xpMax:5}),e}updateState(e){this.state$.next(O(O({},this.state$.getValue()),e))}saveLocalState(){localStorage.setItem(this.SAVE_KEY,JSON.stringify(this.state$.getValue()))}loadLocalState(){let e=localStorage.getItem(this.SAVE_KEY);if(e)try{this.state$.next(O(O({},this.defaultState),JSON.parse(e))),this.isLoading$.next(!1)}catch{}}async saveToCloud(){let e=this.state$.getValue(),t=this.firebaseService.authInstance.currentUser;!t||t.isAnonymous&&!e.hasCompletedIntro||e.user?.username==="Entrepreneur"||e.user?.username==="Anonyme"||await this.firebaseService.saveProgress(e)}getNextHireCost(e,t){let r=this.state$.getValue().companies.find(i=>i.id===e);return r?Math.floor(UT[t].baseCost*Math.pow(1.5,r.employees.filter(i=>i.role===t).length)):0}hireEmployee(e,t){let r=this.getNextHireCost(e,t);if(this.spendMoney(r)){let i=this.state$.getValue(),s={id:Math.random().toString(36).substr(2,9),role:t,hiredAt:Date.now(),dailySalary:UT[t].baseDailySalary,efficiency:1,isPaused:!1};this.updateState({companies:i.companies.map(o=>o.id===e?ne(O({},o),{employees:[...o.employees,s]}):o)}),this.saveLocalState()}}buySetupUpgrade(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=O({},r.freelanceUpgrades);switch(e){case"CHAIR":i.chairLevel=1;break;case"SCREEN":i.screenLevel=1;break;case"COFFEE":i.coffeeLevel=1;break;case"PC":i.pcLevel=1;break}this.updateState({freelanceUpgrades:i}),this.saveLocalState()}}buyFreelanceTheme(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({freelanceUpgrades:ne(O({},r.freelanceUpgrades),{ownedThemes:[...r.freelanceUpgrades.ownedThemes,e]})}),this.saveLocalState()}}setFreelanceTheme(e){let t=this.state$.getValue();this.updateState({freelanceUpgrades:ne(O({},t.freelanceUpgrades),{activeThemeId:e})}),this.saveLocalState()}buyFoodtruckUpgrade(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=O({},r.foodtruckUpgrades);e==="grill"?i.grillLevel++:e==="marketing"?i.marketingLevel++:i.serviceLevel++,this.updateState({foodtruckUpgrades:i}),this.saveLocalState()}}unlockIngredient(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({foodtruckUpgrades:ne(O({},r.foodtruckUpgrades),{unlockedIngredients:[...r.foodtruckUpgrades.unlockedIngredients,e]})}),this.saveLocalState()}}unlockKeyboard(e){if(this.spendMoney(e)){let t=this.state$.getValue();this.updateState({foodtruckUpgrades:ne(O({},t.foodtruckUpgrades),{hasKeyboard:!0})}),this.saveLocalState()}}buyPrestigeItem(e){let t=this.state$.getValue(),r="PRESTIGE_"+e.id;if(t.achievements.some(i=>i.id===r))return!1;if(this.spendMoney(e.cost)){let i=[...t.achievements,{id:r,name:e.name,icon:e.icon}];return this.updateState({achievements:i}),this.saveToCloud(),!0}return!1}getEmployeeConfig(e){return UT[e]}getTotalEmployeePower(e,t){return this.state$.getValue().companies.find(r=>r.type===e)?.employees.filter(r=>r.role===t).length||0}incrementContractsCompleted(){let e=this.state$.getValue();this.updateState({freelanceUpgrades:ne(O({},e.freelanceUpgrades),{contractsCompleted:(e.freelanceUpgrades.contractsCompleted||0)+1})})}incrementBossBeaten(){let e=this.state$.getValue();this.updateState({freelanceUpgrades:ne(O({},e.freelanceUpgrades),{bossBeaten:e.freelanceUpgrades.bossBeaten+1})})}toggleEmployeePause(e,t){let r=this.state$.getValue();this.updateState({companies:r.companies.map(i=>i.id===e?ne(O({},i),{employees:i.employees.map(s=>s.id===t?ne(O({},s),{isPaused:!s.isPaused}):s)}):i)})}updateMaxServiceReached(e){let t=this.state$.getValue();e>t.foodtruckUpgrades.maxServiceReached&&this.updateState({foodtruckUpgrades:ne(O({},t.foodtruckUpgrades),{maxServiceReached:e})})}unlockIngredientByService(e){let t=this.state$.getValue();t.foodtruckUpgrades.unlockedIngredients.includes(e)||this.updateState({foodtruckUpgrades:ne(O({},t.foodtruckUpgrades),{unlockedIngredients:[...t.foodtruckUpgrades.unlockedIngredients,e]})})}upgradeEmployeeSetup(e,t,r){if(this.spendMoney(r)){let i=this.state$.getValue();this.updateState({companies:i.companies.map(s=>s.id===e?ne(O({},s),{employees:s.employees.map(o=>o.id===t?ne(O({},o),{efficiency:o.efficiency+1}):o)}):s)})}}updateIngredientMastery(e){this.updateState({foodtruckMastery:e})}incrementCustomersServed(){let e=this.state$.getValue(),t=O({},e.dailyStats);t.customersServed++,this.updateState({dailyStats:t})}setTimeOfDay(e){this.updateState({timeOfDay:e})}logoutAndClear(){localStorage.removeItem(this.SAVE_KEY),this.firebaseService.logout().then(()=>window.location.reload())}hardResetGame(){confirm("Tout effacer ?")&&(localStorage.removeItem(this.SAVE_KEY),window.location.reload())}connectOnline(){}static \u0275fac=function(t){return new(t||n)(re(li))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var On=class n{audioCtx;isMuted=!1;noiseBuffer;constructor(){let e=window.AudioContext||window.webkitAudioContext;this.audioCtx=new e,this.noiseBuffer=this.createNoiseBuffer(1)}resume(){this.audioCtx.state==="suspended"&&this.audioCtx.resume()}playTone(e,t,r,i,s=0,o=0){if(this.isMuted)return;this.resume();let a=this.audioCtx.currentTime,c=this.audioCtx.createOscillator(),u=this.audioCtx.createGain();if(c.type=t,c.frequency.setValueAtTime(e,a),c.detune.value=s,u.gain.setValueAtTime(i,a),u.gain.exponentialRampToValueAtTime(.001,a+r),o>0){let d=this.audioCtx.createBiquadFilter();d.type="lowpass",d.frequency.setValueAtTime(o,a),c.connect(d).connect(u).connect(this.audioCtx.destination)}else c.connect(u).connect(this.audioCtx.destination);c.start(a),c.stop(a+r)}playNoise(e,t,r,i){if(this.isMuted)return;this.resume();let s=this.audioCtx.currentTime,o=this.audioCtx.createBufferSource();o.buffer=this.noiseBuffer;let a=this.audioCtx.createBiquadFilter();a.type=t,a.frequency.setValueAtTime(r,s);let c=this.audioCtx.createGain();c.gain.setValueAtTime(i,s),c.gain.exponentialRampToValueAtTime(.001,s+e),o.connect(a).connect(c).connect(this.audioCtx.destination),o.start(s),o.stop(s+e)}playCash(){this.playTone(1200,"square",.1,.1),setTimeout(()=>this.playTone(1600,"square",.1,.1),80)}playSuccess(){[523,659,783,1046].forEach((e,t)=>{setTimeout(()=>this.playTone(e,"sine",.2,.1),t*100)})}playError(){this.playTone(150,"sawtooth",.3,.2)}playPop(){this.playTone(600,"sine",.1,.1)}playSoftPop(){this.playTone(400,"sine",.1,.05)}startRainAmbience(){}stopRainAmbience(){}playTrashInBin(){this.playNoise(.2,"lowpass",200,.5)}playPaperSound(){this.playNoise(.1,"highpass",1e3,.3)}playLeafSound(){this.playNoise(.15,"bandpass",500,.2)}playCanSound(){this.playNoise(.1,"highpass",2e3,.4)}playScratchSound(){this.playNoise(.1,"bandpass",800,.3)}playSteakSound(){this.playNoise(.3,"lowpass",400,.4)}playSaladSound(){this.playNoise(.1,"highpass",1500,.3)}getVariation(){return Math.random()*50-25}playKeystroke(){this.playRandomKey()}playRandomKey(){this.playTone(300,"triangle",.05,.1,this.getVariation())}playSpace(){this.playTone(150,"square",.1,.15,this.getVariation())}createNoiseBuffer(e){let t=this.audioCtx.sampleRate*e,r=this.audioCtx.createBuffer(1,t,this.audioCtx.sampleRate),i=r.getChannelData(0);for(let s=0;s<t;s++)i[s]=Math.random()*2-1;return r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var _V=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(se(wi),se(Yt))};static \u0275dir=Ut({type:n})}return n})(),vQ=(()=>{class n extends _V{static \u0275fac=(()=>{let t;return function(i){return(t||(t=yo(n)))(i||n)}})();static \u0275dir=Ut({type:n,features:[bs]})}return n})(),yV=new Q("");var _Q={provide:yV,useExisting:hs(()=>gl),multi:!0};function yQ(){let n=Un()?Un().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var EQ=new Q(""),gl=(()=>{class n extends _V{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!yQ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(se(wi),se(Yt),se(EQ,8))};static \u0275dir=Ut({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&j("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[ws([_Q]),bs]})}return n})();var bQ=new Q(""),wQ=new Q("");function EV(n){return n!=null}function bV(n){return Ii(n)?$e(n):n}function wV(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function IV(n,e){return e.map(t=>t(n))}function IQ(n){return!n.validate}function SV(n){return n.map(e=>IQ(e)?e:t=>e.validate(t))}function SQ(n){if(!n)return null;let e=n.filter(EV);return e.length==0?null:function(t){return wV(IV(t,e))}}function CV(n){return n!=null?SQ(SV(n)):null}function CQ(n){if(!n)return null;let e=n.filter(EV);return e.length==0?null:function(t){let r=IV(t,e).map(bV);return $l(r).pipe(Oe(wV))}}function TV(n){return n!=null?CQ(SV(n)):null}function dV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TQ(n){return n._rawValidators}function DQ(n){return n._rawAsyncValidators}function BT(n){return n?Array.isArray(n)?n:[n]:[]}function Vv(n,e){return Array.isArray(n)?n.includes(e):n===e}function hV(n,e){let t=BT(e);return BT(n).forEach(i=>{Vv(t,i)||t.push(i)}),t}function fV(n,e){return BT(e).filter(t=>!Vv(n,t))}var Uv=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CV(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},jT=class extends Uv{name;get formDirective(){return null}get path(){return null}},fh=class extends Uv{_parent=null;name=null;valueAccessor=null},$T=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var jv=(()=>{class n extends $T{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(se(fh,2))};static \u0275dir=Ut({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Re("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[bs]})}return n})();var lh="VALID",Lv="INVALID",pl="PENDING",uh="DISABLED",_a=class{},Bv=class extends _a{value;source;constructor(e,t){super(),this.value=e,this.source=t}},dh=class extends _a{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},hh=class extends _a{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ml=class extends _a{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var HT=class extends _a{source;constructor(e){super(),this.source=e}};function AQ(n){return($v(n)?n.validators:n)||null}function xQ(n){return Array.isArray(n)?CV(n):n||null}function RQ(n,e){return($v(e)?e.asyncValidators:n)||null}function kQ(n){return Array.isArray(n)?TV(n):n||null}function $v(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var GT=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return St(this.statusReactive)}set status(e){St(()=>this.statusReactive.set(e))}_status=wu(()=>this.statusReactive());statusReactive=Kt(void 0);get valid(){return this.status===lh}get invalid(){return this.status===Lv}get pending(){return this.status==pl}get disabled(){return this.status===uh}get enabled(){return this.status!==uh}errors;get pristine(){return St(this.pristineReactive)}set pristine(e){St(()=>this.pristineReactive.set(e))}_pristine=wu(()=>this.pristineReactive());pristineReactive=Kt(!0);get dirty(){return!this.pristine}get touched(){return St(this.touchedReactive)}set touched(e){St(()=>this.touchedReactive.set(e))}_touched=wu(()=>this.touchedReactive());touchedReactive=Kt(!1);get untouched(){return!this.touched}_events=new Ee;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(hV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fV(e,this._rawAsyncValidators))}hasValidator(e){return Vv(this._rawValidators,e)}hasAsyncValidator(e){return Vv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ne(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new hh(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new hh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ne(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new dh(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new dh(!0,r))}markAsPending(e={}){this.status=pl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ml(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ne(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=uh,this.errors=null,this._forEachChild(i=>{i.disable(ne(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Bv(this.value,r)),this._events.next(new ml(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=lh,this._forEachChild(r=>{r.enable(ne(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ne(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lh||this.status===pl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Bv(this.value,t)),this._events.next(new ml(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ne(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uh:lh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=bV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ml(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ye,this.statusChanges=new Ye}_calculateStatus(){return this._allControlsDisabled()?uh:this.errors?Lv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pl)?pl:this._anyControlsHaveStatus(Lv)?Lv:lh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new dh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new hh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$v(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=xQ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=kQ(this._rawAsyncValidators)}};var DV=new Q("",{factory:()=>zT}),zT="always";function PQ(n,e){return[...e.path,n]}function NQ(n,e,t=zT){OQ(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),FQ(n,e),VQ(n,e),LQ(n,e),MQ(n,e)}function pV(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MQ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function OQ(n,e){let t=TQ(n);e.validator!==null?n.setValidators(dV(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=DQ(n);e.asyncValidator!==null?n.setAsyncValidators(dV(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();pV(e._rawValidators,i),pV(e._rawAsyncValidators,i)}function FQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&AV(n,e)})}function LQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&AV(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function AV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VQ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function UQ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function BQ(n){return Object.getPrototypeOf(n.constructor)===vQ}function jQ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===gl?t=s:BQ(s)?r=s:i=s}),i||r||t||null}function mV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function gV(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var $Q=class extends GT{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(AQ(t),RQ(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$v(t)&&(t.nonNullable||t.initialValueIsDefault)&&(gV(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new HT(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){mV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){mV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){gV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var HQ={provide:fh,useExisting:hs(()=>ph)},vV=Promise.resolve(),ph=(()=>{class n extends fh{_changeDetectorRef;callSetDisabledState;control=new $Q;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ye;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=jQ(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),UQ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){NQ(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){vV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ao(r);vV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?PQ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(se(jT,9),se(bQ,10),se(wQ,10),se(yV,10),se(Ft,8),se(DV,8))};static \u0275dir=Ut({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ws([HQ]),bs,qr]})}return n})();var GQ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=ct({})}return n})();var xV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:DV,useValue:t.callSetDisabledState??zT}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=ct({imports:[GQ]})}return n})();var qT;function zQ(){if(qT==null){let n=typeof document<"u"?document.head:null;qT=!!(n&&(n.createShadowRoot||n.attachShadow))}return qT}function Hv(n){if(zQ()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function mh(n){return n.composedPath?n.composedPath()[0]:n.target}function kV(n){return n.buttons===0||n.detail===0}function PV(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function NV(n,e=0){return qQ(n)?Number(n):arguments.length===2?e:0}function qQ(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Wi(n){return n instanceof Yt?n.nativeElement:n}var Gv=new WeakMap,MV=(()=>{class n{_appRef;_injector=F(qe);_environmentInjector=F(_t);load(t){let r=this._appRef=this._appRef||this._injector.get(tr),i=Gv.get(r);i||(i={loaders:new Set,refs:[]},Gv.set(r,i),r.onDestroy(()=>{Gv.get(r)?.refs.forEach(s=>s.destroy()),Gv.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(mk(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var WT;try{WT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{WT=!1}var OV=(()=>{class n{_platformId=F(bi);isBrowser=this._platformId?$k(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||WT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var WQ=new Q("cdk-dir-doc",{providedIn:"root",factory:()=>F(Xe)}),KQ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function YQ(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?KQ.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var FV=(()=>{class n{get value(){return this.valueSignal()}valueSignal=Kt("ltr");change=new Ye;constructor(){let t=F(WQ,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(YQ(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var QQ=20,LV=(()=>{class n{_platform=F(OV);_listeners;_viewportSize;_change=new Ee;_document=F(Xe);constructor(){let t=F(Me),r=F(Tn).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect(),o=-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:o,left:a}}change(t=QQ){return t>0?this._change.pipe(ty(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var VV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=ct({})}return n})();function QT(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?jV(n,e):(r==="input"||r==="select"||r==="textarea")&&BV(n,e),UV("canvas",n,e,jV),UV("input, textarea, select",n,e,BV),e}function UV(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}var JQ=0;function BV(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${JQ++}`)}function jV(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function rD(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function JT(n,e,t){let{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function ZQ(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,s=e.top+e.height>n.bottom;return t||r||i||s}function _h(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function $V(n,e,t,r){let{top:i,right:s,bottom:o,left:a,width:c,height:u}=n,d=c*e,f=u*e;return r>i-f&&r<o+f&&t>a-d&&t<s+d}var zv=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:rD(t)})})}handleScroll(e){let t=mh(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,s,o;if(t===this._document){let u=this.getViewportScrollPosition();s=u.top,o=u.left}else s=t.scrollTop,o=t.scrollLeft;let a=i.top-s,c=i.left-o;return this.positions.forEach((u,d)=>{u.clientRect&&t!==d&&t.contains(d)&&_h(u.clientRect,a,c)}),i.top=s,i.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function XV(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function iD(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function vl(n,e){let t=e?"":"none";iD(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function HV(n,e,t){iD(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function qv(n,e){return e&&e!="none"?n+" "+e:n}function GV(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=yh(e.left,e.top)}function yh(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function zV(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function XQ(n){let e=getComputedStyle(n),t=KT(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),s=KT(e,"transition-duration"),o=KT(e,"transition-delay");return zV(s[i])+zV(o[i])}function KT(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var eJ=new Set(["position"]),ZT=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,s,o,a,c,u,d){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=u,this._renderer=d}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),qV(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return XQ(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let s=e.matchSize?this._initialDomRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=XV(o,this._document),this._previewEmbeddedView=o,e.matchSize?GV(i,s):i.style.transform=yh(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=QT(this._rootElement),GV(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return iD(i.style,{"pointer-events":"none",margin:qV(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},eJ),vl(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}};function qV(n){return"showPopover"in n}var tJ={passive:!0},WV={passive:!1},nJ={passive:!1,capture:!0},rJ=800,KV="cdk-drag-placeholder",YV=new Set(["position"]),XT=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Kt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new Ee;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Ke.EMPTY;_pointerUpSubscription=Ke.EMPTY;_scrollSubscription=Ke.EMPTY;_resizeSubscription=Ke.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>vl(t,e)))}_disabled=!1;beforeStarted=new Ee;started=new Ee;released=new Ee;ended=new Ee;entered=new Ee;exited=new Ee;dropped=new Ee;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,s,o,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new zv(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Wi(r)),this._handles.forEach(r=>vl(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=Wi(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,WV),r.listen(t,"touchstart",this._pointerDown,tJ),r.listen(t,"dragstart",this._nativeDragStart,WV)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Wi(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&ZQ(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let s=this._activeTransform.x,o=this._activeTransform.y,a=s+r,c=o+i;this._rootElement.style.transform=yh(a,c),this._activeTransform={x:a,y:c},this._passiveTransform={x:a,y:c}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),vl(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),vl(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),s=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+s>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),c=this._dropContainer;if(!a){this._endDragSequence(e);return}(!c||!c.isDragging()&&!c.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=r.x-i.x+this._passiveTransform.x,s.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){gh(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",iJ,nJ)}),r){let i=this._rootElement,s=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");s.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new ZT(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,t)),HV(i,!1,YV),this._document.body.appendChild(s.replaceChild(o,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=gh(t),s=!i&&t.button!==0,o=this._rootElement,a=mh(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+rJ>Date.now(),u=i?PV(t):kV(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||s||c||u)return;if(this._handles.length){let g=o.style;this._rootElementTapHighlight=g.webkitTapHighlightColor||"",g.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(g=>this._updateOnScroll(g)),this._boundaryElement&&(this._boundaryRect=rD(this._boundaryElement));let d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){HV(this._rootElement,!0,YV),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{let o=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(o+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(s,this._dropContainer,a),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&mh(a)===this._preview.element&&a.propertyName==="transform")&&(o(),r(),clearTimeout(s))},s=setTimeout(i,t*1.5),o=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=XV(this._placeholderRef,this._document)):r=QT(this._rootElement),r.style.pointerEvents="none",r.classList.add(KV),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=gh(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,u=o.pageY-s.top-a.top;return{x:s.left-e.left+c,y:s.top-e.top+u}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=gh(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:u}=this._getPreviewRect(),d=a.top+o,f=a.bottom-(u-o),g=a.left+s,_=a.right-(c-s);r=QV(r,g,_),i=QV(i,d,f)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,vl(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=yh(e*r,t*r),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=qv(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=yh(e,t);this._preview.setTransform(qv(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:gh(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=mh(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&_h(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Hv(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Wi(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,r){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let i=this._anchor??=QT(this._placeholder);i.classList.remove(KV),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):Wi(t.element).appendChild(i)}}};function QV(n,e,t){return Math.max(e,Math.min(t,n))}function gh(n){return n.type[0]==="t"}function iJ(n){n.preventDefault()}function eU(n,e,t){let r=JV(e,n.length-1),i=JV(t,n.length-1);if(r===i)return;let s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}function JV(n,e){return Math.max(0,Math.min(e,n))}var Wv=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(P=>P.drag===e),u=s[o],d=s[c].clientRect,f=u.clientRect,g=c>o?1:-1,_=this._getItemOffsetPx(d,f,g),I=this._getSiblingOffsetPx(c,s,g),x=s.slice();return eU(s,c,o),s.forEach((P,B)=>{if(x[B]===P)return;let Y=P.drag===e,ee=Y?_:I,he=Y?e.getPlaceholderElement():P.drag.getRootElement();P.offset+=ee;let We=Math.round(P.offset*(1/P.drag.scale));a?(he.style.transform=qv(`translate3d(${We}px, 0, 0)`,P.initialTransform),_h(P.clientRect,0,ee)):(he.style.transform=qv(`translate3d(0, ${We}px, 0)`,P.initialTransform),_h(P.clientRect,ee,0))}),this._previousSwap.overlaps=JT(f,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:o}}enter(e,t,r,i){let s=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement(),u=o[s];if(u===e&&(u=o[s+1]),!u&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=o[0]),a>-1&&o.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){let d=u.getRootElement();d.parentElement.insertBefore(c,d),o.splice(s,0,e)}else this._element.appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{_h(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:rD(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=i?t.left-e.left:t.top-e.top;return r===-1&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=t[e].clientRect,o=t[e+r*-1],a=s[i?"width":"height"]*r;if(o){let c=i?"left":"top",u=i?"right":"bottom";r===-1?a-=o.clientRect[c]-s[u]:a+=s[c]-o.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}else{let o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(i){let u=s?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return s?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,e)?-1:o}},eD=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let s=this._getItemIndexFromPointerPosition(e,t,r),o=this._previousSwap;if(s===-1||this._activeItems[s]===e)return null;let a=this._activeItems[s];if(o.drag===a&&o.overlaps&&o.deltaX===i.x&&o.deltaY===i.y)return null;let c=this.getItemIndex(e),u=e.getPlaceholderElement(),d=a.getRootElement();s>c?d.after(u):d.before(u),eU(this._activeItems,c,s);let f=this._getRootNode().elementFromPoint(t,r);return o.deltaX=i.x,o.deltaY=i.y,o.drag=a,o.overlaps=d===f||d.contains(f),{previousIndex:c,currentIndex:s}}enter(e,t,r,i){let s=this._activeItems.indexOf(e);s>-1&&this._activeItems.splice(s,1);let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;o===-1&&(o=this._getClosestItemIndexToPointer(e,t,r));let a=this._activeItems[o];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(o,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,s]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==s&&(s===null?e.appendChild(i):s.parentNode===e&&e.insertBefore(i,s))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),s=i?this._activeItems.findIndex(o=>{let a=o.getRootElement();return i===a||a.contains(i)}):-1;return s===-1||!this._sortPredicate(s,e)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=Hv(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){let a=this._activeItems[o];if(a!==e){let{x:c,y:u}=a.getRootElement().getBoundingClientRect(),d=Math.hypot(t-c,r-u);d<i&&(i=d,s=o)}}return s}},ZV=.05,tU=.05,hr=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(hr||{}),bn=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(bn||{}),tD=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new Ee;entered=new Ee;exited=new Ee;dropped=new Ee;sorted=new Ee;receivingStarted=new Ee;receivingStopped=new Ee;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Ke.EMPTY;_verticalScrollDirection=hr.NONE;_horizontalScrollDirection=bn.NONE;_scrollNode;_stopScrollTimers=new Ee;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s;let o=this.element=Wi(e);this._document=r,this.withOrientation("vertical").withElementContainer(o),t.registerDropContainer(this),this._parentPositions=new zv(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof Wv&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new eD(this._document,this._dragDropRegistry);else{let t=new Wv(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=Wi(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!$V(this._domRect,ZV,t,r))return;let s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=hr.NONE,s=bn.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||$V(o.clientRect,ZV,e,t)&&([i,s]=sJ(a,o.clientRect,this._direction,e,t),(i||s)&&(r=a))}),!i&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};i=nU(c,t),s=rU(c,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),os(0,Xh).pipe(Fr(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===hr.UP?e.scrollBy(0,-t):this._verticalScrollDirection===hr.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===bn.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===bn.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&JT(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!JT(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Hv(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function nU(n,e){let{top:t,bottom:r,height:i}=n,s=i*tU;return e>=t-s&&e<=t+s?hr.UP:e>=r-s&&e<=r+s?hr.DOWN:hr.NONE}function rU(n,e){let{left:t,right:r,width:i}=n,s=i*tU;return e>=t-s&&e<=t+s?bn.LEFT:e>=r-s&&e<=r+s?bn.RIGHT:bn.NONE}function sJ(n,e,t,r,i){let s=nU(e,i),o=rU(e,r),a=hr.NONE,c=bn.NONE;if(s){let u=n.scrollTop;s===hr.UP?u>0&&(a=hr.UP):n.scrollHeight-u>n.clientHeight&&(a=hr.DOWN)}if(o){let u=n.scrollLeft;t==="rtl"?o===bn.RIGHT?u<0&&(c=bn.RIGHT):n.scrollWidth+u>n.clientWidth&&(c=bn.LEFT):o===bn.LEFT?u>0&&(c=bn.LEFT):n.scrollWidth-u>n.clientWidth&&(c=bn.RIGHT)}return[a,c]}var vh={capture:!0},YT={passive:!1,capture:!0},oJ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=yt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),iU=(()=>{class n{_ngZone=F(Me);_document=F(Xe);_styleLoader=F(MV);_renderer=F(Tn).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new Ee;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Kt([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new Ee;pointerUp=new Ee;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,YT)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(oJ),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),s=a=>this.pointerUp.next(a),o=[["scroll",a=>this._scroll.next(a),vh],["selectstart",this._preventDefaultWhileDragging,YT]];i?o.push(["touchend",s,vh],["touchcancel",s,vh]):o.push(["mouseup",s,vh]),i||o.push(["mousemove",a=>this.pointerMove.next(a),YT]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=o.map(([a,c,u])=>this._renderer.listen(this._document,a,c,u))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new ve(i=>this._ngZone.runOutsideAngular(()=>{let s=this._renderer.listen(t,"scroll",o=>{this._activeDragInstances().length&&i.next(o)},vh);return()=>{s()}}))),yf(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aJ={dragStartThreshold:5,pointerDirectionChangeThreshold:5},sU=(()=>{class n{_document=F(Xe);_ngZone=F(Me);_viewportRuler=F(LV);_dragDropRegistry=F(iU);_renderer=F(Tn).createRenderer(null,null);constructor(){}createDrag(t,r=aJ){return new XT(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new tD(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nD=new Q("CDK_DRAG_PARENT");var cJ=new Q("CdkDragHandle");var lJ=new Q("CDK_DRAG_CONFIG"),uJ=new Q("CdkDropList"),oU=(()=>{class n{element=F(Yt);dropContainer=F(uJ,{optional:!0,skipSelf:!0});_ngZone=F(Me);_viewContainerRef=F(er);_dir=F(FV,{optional:!0});_changeDetectorRef=F(Ft);_selfHandle=F(cJ,{optional:!0,self:!0});_parentDrag=F(nD,{optional:!0,skipSelf:!0});_dragDropRegistry=F(iU);_destroyed=new Ee;_handles=new nt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new Ye;released=new Ye;ended=new Ye;entered=new Ye;exited=new Ye;dropped=new Ye;moved=new ve(t=>{let r=this._dragRef.moved.pipe(Oe(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=F(qe);constructor(){let t=this.dropContainer,r=F(lJ,{optional:!0}),i=F(sU);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(Fr(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){wo(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):Wi(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:NV(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(Ze(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:u,previewContainer:d}=t;this.disabled=c??!1,this.dragStartDelay=i||0,this.lockAxis=r||null,s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.pipe(qt(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Sn(t=>yf(...t.map(r=>r._stateChanges.pipe(Ma(r))))),Fr(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ut({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&Re("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Ao],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",jE]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[ws([{provide:nD,useExisting:n}]),qr]})}return n})();var dJ=new Q("CdkDragPlaceholder"),aU=(()=>{class n{templateRef=F(wr);_drag=F(nD,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ut({type:n,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[ws([{provide:dJ,useExisting:n}])]})}return n})();var cU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ht({type:n});static \u0275inj=ct({providers:[sU],imports:[VV]})}return n})();var fJ=["binRef"];function pJ(n,e){if(n&1&&(m(0,"header",10)(1,"div",11)(2,"div",12),y(3,"P"),v(),m(4,"h1",13),y(5,"JEUB2 "),m(6,"span",14),y(7,"Prologue"),v()()(),m(8,"div",15)(9,"span",16),y(10),oe(11,"number"),v()()()),n&2){let t=M();b(10),J("",Ae(11,1,t.currentMoney,"1.0-0")," \u20AC")}}function mJ(n,e){if(n&1&&le(0,"div",17),n&2){let t=e.$implicit;Ct("left",t.x,"px")("top",t.y,"px")("background-color",t.color)("opacity",t.life)("transform","scale("+t.life+")")}}function gJ(n,e){if(n&1){let t=ae();m(0,"div",28)(1,"button",29),j("click",function(){G(t);let i=M(2);return z(i.startPark())}),y(2," Commencer \xE0 chercher... \u{1F5D1}\uFE0F "),v()()}}function vJ(n,e){if(n&1&&(m(0,"div",18),le(1,"div",19)(2,"div",20),m(3,"div",21)(4,"div",22),y(5,"\u{1F976}"),v()(),m(6,"div",23)(7,"div",24),y(8,"Moi (Gal\xE9rien)"),v(),m(9,"div",25),y(10),m(11,"span",26),y(12,"|"),v()(),H(13,gJ,3,0,"div",27),v()()),n&2){let t=M();b(10),Z(t.displayedDialogue),b(3),R("ngIf",t.isTextFinished)}}function _J(n,e){n&1&&le(0,"div")}function yJ(n,e){if(n&1){let t=ae();m(0,"div",39),j("cdkDragStarted",function(){let i=G(t).$implicit,s=M(2);return z(s.onDragStart(i))})("cdkDragEnded",function(i){let s=G(t).$implicit,o=M(2);return z(o.onDragEnded(i,s))}),le(1,"div",40),m(2,"div",41),y(3),v(),H(4,_J,1,0,"div",42),v()}if(n&2){let t=e.$implicit,r=M(2);Ct("left",t.x,"%")("top",t.y,"%")("transform","rotate("+t.rotation+"deg) scale("+t.scale+")"),Re("floating-anim",!r.isDragging),b(3),Z(r.getIcon(t.type))}}function EJ(n,e){if(n&1){let t=ae();m(0,"div",43)(1,"button",44),j("click",function(){G(t);let i=M(2);return z(i.goToShop())}),y(2,"Aller au Tabac \u27A1\uFE0F"),v()()}}function bJ(n,e){if(n&1&&(m(0,"div",30),le(1,"div",19)(2,"div",20),m(3,"div",31,0)(5,"div",32)(6,"div",33)(7,"span",34),y(8,"\u{1F5D1}\uFE0F"),v()()(),m(9,"span",35),y(10,"Jette ici !"),v()(),m(11,"div",36),H(12,yJ,5,9,"div",37),v(),H(13,EJ,3,0,"div",38),v()),n&2){let t=M();b(3),Re("bin-active",t.isHoveringBin)("bin-eating",t.isEating),b(9),R("ngForOf",t.trashItems)("ngForTrackBy",t.trackByItemId),b(),R("ngIf",t.currentMoney>=100)}}function wJ(n,e){if(n&1){let t=ae();m(0,"div",28)(1,"button",29),j("click",function(){G(t);let i=M(2);return z(i.buyTicket())}),m(2,"span",48),y(3,"\u{1F3AB}"),v(),y(4," Acheter un ticket (100\u20AC) "),v()()}}function IJ(n,e){if(n&1&&(m(0,"div",45)(1,"div",46)(2,"div",47),y(3,"LE BALTO"),v()(),m(4,"div",21)(5,"div",22),y(6,"\u{1F9D4}\u{1F3FB}\u200D\u2642\uFE0F"),v()(),m(7,"div",23)(8,"div",24),y(9,"G\xE9rard (Patron)"),v(),m(10,"div",25),y(11),m(12,"span",26),y(13,"|"),v()(),H(14,wJ,5,0,"div",27),v()()),n&2){let t=M();b(11),Z(t.displayedDialogue),b(3),R("ngIf",t.isTextFinished)}}function SJ(n,e){n&1&&(m(0,"span",65),y(1,"$"),v())}function CJ(n,e){if(n&1){let t=ae();m(0,"div",63),j("mouseenter",function(){let i=G(t).$implicit,s=M(2);return z(s.scratch(i))}),H(1,SJ,2,0,"span",64),v()}if(n&2){let t=e.$implicit,r=M(2);Re("scratched",r.scratched[t]),b(),R("ngIf",!r.scratched[t])}}function TJ(n,e){if(n&1){let t=ae();m(0,"button",66),j("click",function(){G(t);let i=M(2);return z(i.goToOutro())}),y(1," ENCAISSER LE GAIN \u{1F4B8} "),v()}}function DJ(n,e){if(n&1&&(m(0,"div",49)(1,"div",50)(2,"div",51)(3,"div",52),y(4,"\u{1F48E} DIAMOND CASH \u{1F48E}"),v(),m(5,"div",53),y(6,"Grattez pour gagner"),v()(),m(7,"div",54)(8,"div",55)(9,"div",56)(10,"div",57),y(11,"10 000 \u20AC"),v(),m(12,"div",58),y(13,"\u{1F389} JACKPOT \u{1F389}"),v()(),m(14,"div",59),H(15,CJ,2,3,"div",60),v()()(),m(16,"div",61),H(17,TJ,2,0,"button",62),v()()()),n&2){let t=M();b(15),R("ngForOf",t.scratchGrid),b(2),R("ngIf",t.isRevealed)}}function AJ(n,e){if(n&1){let t=ae();m(0,"div",28)(1,"button",70),j("click",function(){G(t);let i=M(2);return z(i.finishIntro())}),y(2," \u{1F354} ACHETER LE FOODTRUCK "),v()()}}function xJ(n,e){if(n&1&&(m(0,"div",67)(1,"div",21)(2,"div",22),y(3,"\u{1F911}"),v()(),m(4,"div",68)(5,"div",24),y(6,"Moi (Nouveau Riche)"),v(),m(7,"div",69),y(8),m(9,"span",26),y(10,"|"),v()(),H(11,AJ,3,0,"div",27),v()()),n&2){let t=M();b(8),Z(t.displayedDialogue),b(3),R("ngIf",t.isTextFinished)}}var Kv=class n{constructor(e,t,r){this.gameState=e;this.sound=t;this.cdr=r}binRef;phase="INTRO_DIALOGUE";currentMoney=0;particles=[];trashItems=[];isHoveringBin=!1;isEating=!1;isDragging=!1;currentDialogueText="";displayedDialogue="";isTextFinished=!1;typeWriterInterval;introText="Il pleut encore... J'en ai marre de cette vie de gal\xE8re. J'ai froid, j'ai faim. Si seulement je pouvais trouver 100 balles pour tenter ma chance au loto...";shopText="Alors mon petit... Une sale journ\xE9e hein ? T'es tout tremp\xE9. T'as enfin r\xE9uni les 100 balles ? Allez, prends ce ticket, c'est ta chance.";outroText="C'est... C'est pas possible... 10.000 EUROS ?! J'AI GAGN\xC9 ! Adieu la rue ! Je sais ce que je vais faire... Je vais racheter ce vieux Foodtruck abandonn\xE9 au coin de la rue. C'est le d\xE9but de mon empire !";scratchGrid=Array.from({length:60},(e,t)=>t);scratched=new Array(60).fill(!1);isRevealed=!1;ngOnInit(){this.sound.startRainAmbience(),this.startDialogue(this.introText)}ngOnDestroy(){this.sound.stopRainAmbience(),this.typeWriterInterval&&clearInterval(this.typeWriterInterval)}startDialogue(e){this.currentDialogueText=e,this.displayedDialogue="",this.isTextFinished=!1;let t=0;this.typeWriterInterval&&clearInterval(this.typeWriterInterval),this.typeWriterInterval=setInterval(()=>{t<this.currentDialogueText.length?(this.displayedDialogue+=this.currentDialogueText.charAt(t),t%3===0&&this.sound.playKeystroke(),t++,this.cdr.detectChanges()):(clearInterval(this.typeWriterInterval),this.isTextFinished=!0,this.cdr.detectChanges())},30)}startPark(){this.phase="PARK",this.spawnTrashWave()}goToShop(){this.phase="SHOP",this.sound.stopRainAmbience(),setTimeout(()=>this.startDialogue(this.shopText),800)}buyTicket(){this.currentMoney=0,this.phase="SCRATCH",this.sound.playPop()}goToOutro(){this.phase="OUTRO_DIALOGUE",this.sound.playSuccess(),setTimeout(()=>this.startDialogue(this.outroText),800)}finishIntro(){this.gameState.completeIntro()}trackByItemId(e,t){return t.id}spawnTrashWave(){this.trashItems=[];for(let e=0;e<40;e++)this.trashItems.push({id:Math.random(),x:Math.random()*80+10,y:Math.random()*70+10,type:Math.random()>.6?"can":Math.random()>.3?"paper":"leaf",rotation:Math.random()*360,scale:1,delay:Math.random()*2})}onDragStart(e){this.isDragging=!0,e.type==="can"?this.sound.playCanSound():e.type==="paper"?this.sound.playPaperSound():this.sound.playLeafSound()}onDragEnded(e,t){this.isDragging=!1,this.isHoveringBin=!1;let r=e.dropPoint,i=this.binRef.nativeElement.getBoundingClientRect();r.x>=i.left-50&&r.x<=i.right+50&&r.y>=i.top-50&&r.y<=i.bottom+50?this.cleanTrash(t):e.source.reset()}cleanTrash(e){this.trashItems=this.trashItems.filter(r=>r.id!==e.id),this.sound.playTrashInBin(),this.isEating=!0,setTimeout(()=>this.isEating=!1,200);let t=this.binRef.nativeElement.getBoundingClientRect();this.spawnParticles(t.left+t.width/2,t.top+t.height/2,"#22c55e"),this.currentMoney+=10,this.trashItems.length===0&&this.currentMoney<100&&setTimeout(()=>this.spawnTrashWave(),500)}getIcon(e){return e==="can"?"\u{1F96B}":e==="paper"?"\u{1F961}":"\u{1F342}"}scratch(e){this.scratched[e]||(this.scratched[e]=!0,Math.random()>.5&&this.sound.playScratchSound(),this.scratched.filter(t=>t).length>36&&!this.isRevealed&&(this.isRevealed=!0,this.sound.playSuccess(),this.spawnConfetti()))}spawnParticles(e,t,r){for(let i=0;i<8;i++)this.particles.push({id:Math.random(),x:e,y:t,color:r,speedX:(Math.random()-.5)*15,speedY:(Math.random()-1)*15,life:1});this.animateParticles()}spawnConfetti(){for(let e=0;e<50;e++)this.particles.push({id:Math.random(),x:window.innerWidth/2,y:window.innerHeight/2,color:["#f00","#0f0","#00f","#ff0"][Math.floor(Math.random()*4)],speedX:(Math.random()-.5)*25,speedY:(Math.random()-.5)*25,life:1});this.animateParticles()}animateParticles(){this.particles.length!==0&&(this.particles.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,e.life-=.03}),this.particles=this.particles.filter(e=>e.life>0),this.particles.length>0&&requestAnimationFrame(()=>this.animateParticles()))}static \u0275fac=function(t){return new(t||n)(se(an),se(On),se(Ft))};static \u0275cmp=yt({type:n,selectors:[["app-intro-game"]],viewQuery:function(t,r){if(t&1&&ic(fJ,5),t&2){let i;Io(i=So())&&(r.binRef=i.first)}},standalone:!1,decls:9,vars:7,consts:[["binRef",""],[1,"intro-container"],["class","intro-header",4,"ngIf"],[1,"fx-layer"],["class","particle",3,"left","top","background-color","opacity","transform",4,"ngFor","ngForOf"],["class","scene dialogue-scene fadeIn",4,"ngIf"],["class","scene park-scene fadeIn",4,"ngIf"],["class","scene shop-scene fadeIn",4,"ngIf"],["class","scene scratch-scene fadeIn",4,"ngIf"],["class","scene dialogue-scene fadeIn outro-bg",4,"ngIf"],[1,"intro-header"],[1,"flex","items-center","gap-3"],[1,"logo-box"],[1,"text-xl","font-bold","tracking-tight","text-white"],[1,"text-xs","font-normal","text-slate-400","ml-2"],[1,"money-badge"],[1,"text-green-400","font-bold","text-xl","mr-2"],[1,"particle"],[1,"scene","dialogue-scene","fadeIn"],[1,"rain-layer","layer-1"],[1,"rain-layer","layer-2"],[1,"character-container","slide-up"],[1,"character-emoji"],[1,"dialogue-box-container"],[1,"speaker-name"],[1,"dialogue-text"],[1,"cursor"],["class","dialogue-actions",4,"ngIf"],[1,"dialogue-actions"],[1,"action-btn",3,"click"],[1,"scene","park-scene","fadeIn"],[1,"bin-container"],[1,"bin-body"],[1,"bin-base"],[1,"bin-emoji"],[1,"bin-label"],[1,"trash-zone"],["class","trash-item","cdkDrag","",3,"floating-anim","left","top","transform","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["class","next-step-container",4,"ngIf"],["cdkDrag","",1,"trash-item",3,"cdkDragStarted","cdkDragEnded"],[1,"trash-shadow"],[1,"trash-content"],[4,"cdkDragPlaceholder"],[1,"next-step-container"],[1,"next-btn","pulse-glow",3,"click"],[1,"scene","shop-scene","fadeIn"],[1,"shop-bg"],[1,"neon-sign"],[1,"icon"],[1,"scene","scratch-scene","fadeIn"],[1,"ticket","zoom-in"],[1,"ticket-top"],[1,"ticket-logo"],[1,"ticket-sub"],[1,"scratch-zone-border"],[1,"scratch-zone"],[1,"winner-content"],[1,"win-amount"],[1,"win-emoji"],[1,"scratch-cover"],["class","scratch-pixel",3,"scratched","mouseenter",4,"ngFor","ngForOf"],[1,"ticket-footer"],["class","claim-btn pulse",3,"click",4,"ngIf"],[1,"scratch-pixel",3,"mouseenter"],["class","pattern",4,"ngIf"],[1,"pattern"],[1,"claim-btn","pulse",3,"click"],[1,"scene","dialogue-scene","fadeIn","outro-bg"],[1,"dialogue-box-container","light-theme"],[1,"dialogue-text","text-black"],[1,"action-btn","gold-btn",3,"click"]],template:function(t,r){t&1&&(m(0,"div",1),H(1,pJ,12,4,"header",2),m(2,"div",3),H(3,mJ,1,10,"div",4),v(),H(4,vJ,14,2,"div",5)(5,bJ,14,7,"div",6)(6,IJ,15,2,"div",7)(7,DJ,18,2,"div",8)(8,xJ,12,2,"div",9),v()),t&2&&(b(),R("ngIf",r.phase==="PARK"||r.phase==="SCRATCH"),b(2),R("ngForOf",r.particles),b(),R("ngIf",r.phase==="INTRO_DIALOGUE"),b(),R("ngIf",r.phase==="PARK"),b(),R("ngIf",r.phase==="SHOP"),b(),R("ngIf",r.phase==="SCRATCH"),b(),R("ngIf",r.phase==="OUTRO_DIALOGUE"))},dependencies:[rr,Bn,oU,aU,Cr],styles:[`.intro-container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;background:#0f172a;display:flex;flex-direction:column;font-family:Segoe UI,sans-serif;-webkit-user-select:none;user-select:none;position:absolute;top:0;left:0}.intro-header[_ngcontent-%COMP%]{background:#0f172ae6;border-bottom:1px solid #1e293b;height:64px;display:flex;justify-content:space-between;align-items:center;padding:0 24px;z-index:50}.logo-box[_ngcontent-%COMP%]{width:32px;height:32px;background:#2563eb;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}.money-badge[_ngcontent-%COMP%]{background:#020617;padding:8px 20px;border-radius:99px;border:1px solid rgba(22,163,74,.3)}.scene[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;height:100%;overflow:hidden}.dialogue-scene[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;background:#0f172a}.character-container[_ngcontent-%COMP%]{position:relative;z-index:10;margin-bottom:-10px}.character-emoji[_ngcontent-%COMP%]{font-size:12rem;filter:drop-shadow(0 0 30px rgba(0,0,0,.5))}.dialogue-box-container[_ngcontent-%COMP%]{width:90%;max-width:800px;margin-bottom:40px;z-index:20;background:#0f172af2;border:2px solid #475569;border-radius:8px;padding:24px;box-shadow:0 20px 50px #0009;position:relative;min-height:160px;display:flex;flex-direction:column}.outro-bg[_ngcontent-%COMP%]{background:radial-gradient(circle at center,#fef3c7,#fff7ed)}.light-theme[_ngcontent-%COMP%]{background:#fffffff2;border-color:#fbbf24;box-shadow:0 20px 50px #d9770633}.light-theme[_ngcontent-%COMP%]   .dialogue-text[_ngcontent-%COMP%]{color:#1e293b;font-weight:700}.speaker-name[_ngcontent-%COMP%]{position:absolute;top:-16px;left:24px;background:#d97706;color:#fff;padding:4px 16px;font-weight:700;font-size:.9rem;border-radius:4px;text-transform:uppercase}.dialogue-text[_ngcontent-%COMP%]{font-family:monospace;font-size:1.2rem;color:#e2e8f0;line-height:1.6;margin-top:10px;flex:1}.cursor[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite;color:#d97706;font-weight:700}.dialogue-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;animation:_ngcontent-%COMP%_fadeIn .5s}.action-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#16a34a,#15803d);color:#fff;border:1px solid #4ade80;padding:12px 24px;border-radius:6px;font-weight:700;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;gap:10px}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #22c55e66}.gold-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#f59e0b,#d97706);border-color:#fbbf24;color:#78350f}.park-scene[_ngcontent-%COMP%]{background:radial-gradient(circle at 50% 20%,#334155,#1e293b,#020617)}.rain-layer[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="40"><line x1="0" y1="0" x2="2" y2="10" stroke="rgba(148, 163, 184, 0.3)" stroke-width="1"/></svg>');z-index:5}.layer-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rain .8s linear infinite;opacity:.6;background-size:20px 40px}.layer-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rain 1.5s linear infinite;opacity:.3;background-size:40px 80px;transform:scale(1.5)}@keyframes _ngcontent-%COMP%_rain{0%{background-position:0 0}to{background-position:20px 100vh}}.trash-zone[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:30}.trash-item[_ngcontent-%COMP%]{position:absolute;width:60px;height:60px;display:flex;align-items:center;justify-content:center;cursor:grab;touch-action:none;transition:transform .1s}.trash-content[_ngcontent-%COMP%]{font-size:3.5rem;filter:drop-shadow(0 4px 6px rgba(0,0,0,.4));position:relative;z-index:2}.trash-shadow[_ngcontent-%COMP%]{position:absolute;bottom:5px;left:15%;width:70%;height:10px;background:#000;opacity:.3;filter:blur(4px);border-radius:50%;z-index:1;transition:all .2s}.trash-item[_ngcontent-%COMP%]:active   .trash-shadow[_ngcontent-%COMP%]{transform:scale(.5);opacity:.1;bottom:-20px}.floating-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.bin-container[_ngcontent-%COMP%]{position:absolute;bottom:40px;right:40px;width:140px;height:160px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;z-index:25;transition:transform .2s}.bin-body[_ngcontent-%COMP%]{font-size:6rem;filter:drop-shadow(0 10px 20px rgba(0,0,0,.5))}.bin-active[_ngcontent-%COMP%]{transform:scale(1.1)}.bin-eating[_ngcontent-%COMP%]   .bin-body[_ngcontent-%COMP%]{transform:scaleY(.8) scaleX(1.2)}.bin-label[_ngcontent-%COMP%]{font-weight:700;color:#cbd5e1;background:#0009;padding:4px 12px;border-radius:12px}.next-step-container[_ngcontent-%COMP%]{position:absolute;bottom:100px;width:100%;display:flex;justify-content:center;z-index:200}.next-btn[_ngcontent-%COMP%]{padding:15px 40px;background:linear-gradient(45deg,#f59e0b,#d97706);color:#fff;font-weight:900;font-size:1.3rem;border:none;border-radius:50px;cursor:pointer;box-shadow:0 10px 20px #d9770666;text-transform:uppercase}.pulse-glow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseGlow 2s infinite}@keyframes _ngcontent-%COMP%_pulseGlow{0%{box-shadow:0 0 #f59e0bb3}70%{box-shadow:0 0 0 20px #f59e0b00}to{box-shadow:0 0 #f59e0b00}}.shop-scene[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#2a0a0a,#1a0505);display:flex;flex-direction:column;align-items:center;justify-content:flex-end}.shop-bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.neon-sign[_ngcontent-%COMP%]{position:absolute;top:15%;left:50%;transform:translate(-50%);font-family:monospace;font-weight:900;font-size:4rem;color:#ff4d4d;text-shadow:0 0 20px #ff0000;border:4px solid #ff4d4d;padding:10px 30px;border-radius:20px;box-shadow:0 0 30px #f006;animation:_ngcontent-%COMP%_flicker 3s infinite}@keyframes _ngcontent-%COMP%_flicker{0%,to{opacity:1}50%{opacity:.8}52%{opacity:.2}54%{opacity:.8}}.scratch-scene[_ngcontent-%COMP%]{background:#0f172a;display:flex;justify-content:center;align-items:center}.ticket[_ngcontent-%COMP%]{width:360px;background:#f8fafc;border-radius:12px;overflow:hidden;box-shadow:0 25px 50px -12px #00000080;border:1px solid #94a3b8}.ticket-top[_ngcontent-%COMP%]{background:#1e1b4b;padding:20px;text-align:center;border-bottom:4px solid #fbbf24}.ticket-logo[_ngcontent-%COMP%]{font-family:Impact,sans-serif;font-size:2rem;color:#fbbf24;letter-spacing:1px}.ticket-sub[_ngcontent-%COMP%]{color:#94a3b8;font-size:.8rem;text-transform:uppercase;margin-top:5px}.scratch-zone-border[_ngcontent-%COMP%]{padding:20px;background:#e2e8f0}.scratch-zone[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;border:2px dashed #94a3b8;background:#fff;border-radius:8px;overflow:hidden}.winner-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(circle,#fef3c7,#fffbeb)}.win-amount[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:900;color:#16a34a}.win-emoji[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:10px;animation:pulse 1s infinite}.scratch-cover[_ngcontent-%COMP%]{position:absolute;inset:0;display:grid;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(6,1fr)}.scratch-pixel[_ngcontent-%COMP%]{background:#94a3b8;border:1px solid #64748b;display:flex;justify-content:center;align-items:center;cursor:crosshair}.scratch-pixel[_ngcontent-%COMP%]:nth-child(odd){background:#cbd5e1}.scratch-pixel.scratched[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.ticket-footer[_ngcontent-%COMP%]{padding:15px;text-align:center;background:#f1f5f9}.claim-btn[_ngcontent-%COMP%]{width:100%;background:#16a34a;color:#fff;font-weight:700;padding:12px;border:none;border-radius:6px;font-size:1.2rem;cursor:pointer}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .8s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.fadeIn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:0}}.particle[_ngcontent-%COMP%]{position:absolute;width:8px;height:8px;border-radius:50%;pointer-events:none;z-index:200}`]})};var kJ=["*"];function PJ(n,e){n&1&&(m(0,"div",43),y(1,"\u{1F525} RUSH (20h-02h) -1s \u{1F525}"),v())}function NJ(n,e){n&1&&(m(0,"div",44),y(1,"\u{1F451} Client VIP \u{1F451}"),v())}function MJ(n,e){n&1&&(m(0,"div",45),y(1,"Service Midi"),v())}function OJ(n,e){if(n&1&&(m(0,"span",46),y(1),v()),n&2){let t=M();b(),J("\u{1F468}\u200D\u{1F373} ",t.cookCount," Auto")}}function FJ(n,e){if(n&1&&(m(0,"span",47),y(1),v()),n&2){let t=M();b(),J("\u26A1 +",t.serverBonus,"% Vit.")}}function LJ(n,e){if(n&1&&(m(0,"div",48),y(1),v()),n&2){let t=e.$implicit,r=e.index,i=M();Ct("animation-delay",r*50+"ms"),b(),J(" ",i.getIcon(t)," ")}}function VJ(n,e){n&1&&(m(0,"div",49)(1,"span"),y(2,"\u2705 PR\xCAT"),v(),m(3,"span",50),y(4,"Envoie !"),v()())}function UJ(n,e){if(n&1&&le(0,"div",51),n&2){let t=e.$implicit;Ct("left",t.x,"px")("top",t.y,"px")("background-color",t.color)("transform","rotate("+t.rotation+"deg)")}}function BJ(n,e){if(n&1&&(m(0,"div",52),y(1),v()),n&2){let t=e.$implicit,r=e.index,i=M();Ct("z-index",r),b(),J(" ",i.getIcon(t)," ")}}function jJ(n,e){if(n&1&&(m(0,"div",53),y(1),v()),n&2){let t=e.$implicit;Ct("left",t.x,"px")("top",t.y,"px"),R("ngClass",t.type),b(),J(" ",t.text," ")}}function $J(n,e){if(n&1&&(m(0,"div",60),y(1),v()),n&2){let t=M().index;b(),J(" ",t+1," ")}}function HJ(n,e){if(n&1){let t=ae();m(0,"button",54),j("click",function(i){let s=G(t).$implicit,o=M();return z(o.addIngredient(s,i))}),H(1,$J,2,1,"div",55),m(2,"span",56),y(3),v(),m(4,"span",57),y(5),v(),m(6,"div",58),le(7,"div",59),v()()}if(n&2){let t=e.$implicit,r=M();b(),R("ngIf",r.upgrades.hasKeyboard),b(2),Z(r.getIcon(t)),b(2),Z(r.getShortName(t)),b(2),Ct("width",r.mastery[t].xp/r.mastery[t].xpMax*100,"%")}}function GJ(n,e){n&1&&(m(0,"span",61),y(1,"ESPACE"),v())}var Yv=class n{constructor(e,t,r){this.gameState=e;this.cdr=t;this.soundService=r;this.allIngredientsList.forEach(i=>this.mastery[i]={level:1,xp:0,xpMax:5})}CONFIG={TIME:{startSeconds:10,lessPerLevel:1,minSeconds:2},ECONOMY:{baseReward:35,percentPerLevel:20,ingredientLevelBonus:10},VIP:{chance:.1,rewardMult:5,timeDivisor:2},PROGRESSION:{unlockCheeseLevel:3,unlockSaladLevel:6,unlockTomatoLevel:9},FX:{confettiEvery:5,feverThreshold:5,confettiColors:["#ef4444","#3b82f6","#22c55e","#eab308","#a855f7","#ffffff"]},AUTO:{cookSpeedBase:5e3,serverSlowPct:10},UNLOCK_COSTS:{CHEESE:1e3,ONION:500,SALAD:2e3,BACON:3500,PICKLE:0,TOMATO:0,SAUCE:0}};currentMoney=0;isVip=!1;triggerShake=!1;comboMultiplier=1;currentOrder=[];currentStack=[];allIngredientsList=Object.values(ah);currentAvailableIngredients=[];mastery={};upgrades={grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:[],maxServiceReached:1,hasKeyboard:!1};cookCount=0;serverCount=0;serverBonus=0;autoCookInterval;displayTimeLeft=0;totalTimeForLevel=0;isRunning=!1;rafId;endTime=0;floatingTexts=[];particles=[];counter=0;timeOfDay=6;currentDay=1;burgerStartTime=0;get isFeverMode(){return this.timeOfDay>=20||this.timeOfDay<2}get remainingOrder(){return this.currentOrder.slice(this.currentStack.length)}handleKeyboardEvent(e){if(!this.upgrades.hasKeyboard)return;let t=e.key,r=parseInt(t);!isNaN(r)&&r>0&&r<=this.currentAvailableIngredients.length&&this.addIngredient(this.currentAvailableIngredients[r-1]),(t===" "||t==="Enter")&&(e.preventDefault(),this.validateBurger())}ngOnInit(){this.gameState.gameState$.subscribe(e=>{this.currentMoney=e.money,this.timeOfDay=e.timeOfDay,this.currentDay=e.day,e.foodtruckMastery&&(this.mastery=JSON.parse(JSON.stringify(e.foodtruckMastery))),e.foodtruckUpgrades&&(this.upgrades=O({},e.foodtruckUpgrades));let t=e.companies.find(r=>r.type==="FOODTRUCK");if(t){let r=this.gameState.getTotalEmployeePower(t.type,"COOK"),i=this.gameState.getTotalEmployeePower(t.type,"SERVER");this.cookCount=Math.floor(r),this.serverBonus=Math.min(75,i)}this.cdr.markForCheck()}),this.resetGame(1)}ngOnDestroy(){this.stopChrono(),this.stopAutoCook()}startAutoCook(){if(this.stopAutoCook(),this.cookCount>0){let e=Math.max(500,this.CONFIG.AUTO.cookSpeedBase/this.cookCount);this.autoCookInterval=setInterval(()=>{this.isRunning&&(this.performAutoAction(),this.cdr.markForCheck())},e)}}stopAutoCook(){this.autoCookInterval&&clearInterval(this.autoCookInterval)}performAutoAction(){this.currentStack.length<this.currentOrder.length?this.addIngredient(this.currentOrder[this.currentStack.length],void 0,!0):this.validateBurger()}addIngredient(e,t,r=!1){this.isRunning||(this.startChrono(),this.startAutoCook()),r||(["STEAK","BACON"].includes(e)?this.soundService.playSteakSound():["SALAD","ONION"].includes(e)?this.soundService.playSaladSound():this.soundService.playSoftPop()),this.currentStack.push(e),r&&this.spawnText("\u{1F916}",100+Math.random()*150,200,"auto");let i=this.currentStack.length-1;this.currentOrder[i]!==e&&(this.spawnText("RAT\xC9 !",t?.clientX||200,t?.clientY||200,"error"),this.failLevel()),this.cdr.markForCheck()}validateBurger(e){if(this.currentStack.length!==this.currentOrder.length){this.failLevel();return}let t=Date.now()-this.burgerStartTime;this.gameState.gameState$.pipe(Ze(1)).subscribe(i=>{let s=O({},i.stats);s.burgersServed=(s.burgersServed||0)+1,s.bestServiceCombo=Math.max(s.bestServiceCombo||0,this.comboMultiplier),(s.fastestBurgerMs===0||t<s.fastestBurgerMs)&&(s.fastestBurgerMs=t),this.gameState.updateState({stats:s})}),this.stopChrono(),this.stopAutoCook(),this.soundService.playSuccess(),this.gameState.incrementCustomersServed(),this.gainXpForIngredients(e);let r=this.getCurrentReward();this.gameState.addMoney(r),this.spawnText(`+${Math.floor(r)}\u20AC`,200,150,this.isVip?"vip":"success"),this.gameState.updateMaxServiceReached(this.comboMultiplier),this.comboMultiplier>=6&&this.gameState.unlockIngredientByService("PICKLE"),this.comboMultiplier>=10&&this.gameState.unlockIngredientByService("TOMATO"),this.comboMultiplier>=15&&this.gameState.unlockIngredientByService("SAUCE"),(this.isVip||this.comboMultiplier%this.CONFIG.FX.confettiEvery===0)&&this.spawnConfetti(),this.resetGame(this.comboMultiplier+1)}failLevel(){this.stopChrono(),this.stopAutoCook(),this.soundService.playError(),this.triggerShake=!0,setTimeout(()=>{this.triggerShake=!1,this.cdr.markForCheck()},400),this.resetGame(1)}resetGame(e,t=!1){this.comboMultiplier=e,this.currentStack=[],this.isRunning=!1,this.burgerStartTime=Date.now(),t?this.isVip=!0:this.isVip=Math.random()<this.CONFIG.VIP.chance+this.upgrades.marketingLevel*.02;let r=this.CONFIG.TIME.startSeconds-(this.comboMultiplier-1)*this.CONFIG.TIME.lessPerLevel;r+=this.upgrades.grillLevel*.5,this.isFeverMode&&!this.isVip&&(r-=1),r<this.CONFIG.TIME.minSeconds&&(r=this.CONFIG.TIME.minSeconds),this.serverBonus>0&&(r=r*(1+this.serverBonus/100)),this.isVip&&(r=r/this.CONFIG.VIP.timeDivisor),this.totalTimeForLevel=r*1e3,this.displayTimeLeft=this.totalTimeForLevel,this.generateSmartOrder(),this.cdr.detectChanges()}generateSmartOrder(){let e=["STEAK"];(this.isUnlocked("CHEESE")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockCheeseLevel)&&e.push("CHEESE"),(this.isUnlocked("SALAD")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockSaladLevel)&&e.push("SALAD"),(this.isUnlocked("TOMATO")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockTomatoLevel)&&e.push("TOMATO"),this.allIngredientsList.forEach(i=>{this.isUnlocked(i)&&!e.includes(i)&&i!=="BUN"&&e.push(i)}),this.currentAvailableIngredients=["BUN",...e];let t=Math.min(6,1+Math.floor(this.comboMultiplier/3)),r=[];for(let i=0;i<t;i++)r.push(e[Math.floor(Math.random()*e.length)]);this.currentOrder=["BUN",...r,"BUN"]}getCurrentReward(){let e=1+this.CONFIG.ECONOMY.percentPerLevel/100,t=this.CONFIG.ECONOMY.baseReward*Math.pow(e,this.comboMultiplier-1);t+=this.upgrades.serviceLevel*5;let r=0;this.currentOrder.forEach(o=>{this.mastery[o]&&(r+=this.mastery[o].level)});let s=1+((this.currentOrder.length>0?r/this.currentOrder.length:1)-1)*(this.CONFIG.ECONOMY.ingredientLevelBonus/100);return t=t*s,this.isVip&&(t=t*this.CONFIG.VIP.rewardMult),t}gainXpForIngredients(e){[...new Set(this.currentStack)].forEach(r=>{this.mastery[r]||(this.mastery[r]={level:1,xp:0,xpMax:5});let i=this.mastery[r];i.xp++,i.xp>=i.xpMax&&(i.level++,i.xp=0,i.xpMax=Math.floor(i.xpMax*1.5),e&&this.spawnText(`${this.getIcon(r)} UP!`,e.clientX,e.clientY-50,"levelup"))}),this.gameState.updateIngredientMastery(this.mastery)}startChrono(){this.isRunning=!0,this.endTime=Date.now()+this.totalTimeForLevel;let e=()=>{if(!this.isRunning)return;let t=this.endTime-Date.now();t<=0?(this.displayTimeLeft=0,this.spawnText("TEMPS \xC9COUL\xC9 !",200,200,"error"),this.failLevel(),this.cdr.detectChanges()):(this.displayTimeLeft=t,this.cdr.detectChanges(),this.rafId=requestAnimationFrame(e))};this.rafId=requestAnimationFrame(e)}stopChrono(){this.isRunning=!1,this.rafId&&cancelAnimationFrame(this.rafId)}getBarPercentage(){return this.displayTimeLeft/this.totalTimeForLevel*100}isTimeRunningOut(){return this.getBarPercentage()<30}getActionBtnClass(){return this.isFeverMode&&!this.isVip?"bg-red-600 hover:bg-red-500 border-red-800 text-white shadow-[0_4px_20px_rgba(239,68,68,0.4)] animate-pulse":this.isVip?"bg-gradient-to-r from-amber-600 to-amber-500 border-amber-700 text-amber-50 shadow-[0_4px_20px_rgba(245,158,11,0.4)]":"bg-blue-600 hover:bg-blue-500 border-blue-700 text-white"}getButtonLabel(){return this.isFeverMode&&!this.isVip?"\u{1F525} FEVER !":this.isVip?"\u{1F451} SERVIR LE ROI DU BURGER":"\u{1F6CE}\uFE0F ENVOYER"}formatGameTime(e){let t=Math.floor(e),r=Math.floor((e-t)*60);return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}spawnConfetti(){for(let e=0;e<30;e++)this.particles.push({id:this.counter++,x:Math.random()*300+50,y:200,color:this.CONFIG.FX.confettiColors[Math.floor(Math.random()*this.CONFIG.FX.confettiColors.length)],rotation:Math.random()*360,speedX:(Math.random()-.5)*10,speedY:(Math.random()-1)*15-5});this.animateParticles()}animateParticles(){this.particles.length!==0&&(this.particles.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,e.speedY+=.5,e.rotation+=5}),this.particles=this.particles.filter(e=>e.y<600),this.particles.length>0&&requestAnimationFrame(()=>{this.animateParticles(),this.cdr.detectChanges()}))}spawnText(e,t,r,i){let s=this.counter++;this.floatingTexts.push({id:s,text:e,x:t||200,y:r||100,type:i}),setTimeout(()=>{this.floatingTexts=this.floatingTexts.filter(o=>o.id!==s),this.cdr.detectChanges()},1e3)}isUnlocked(e){return this.upgrades.unlockedIngredients.includes(e)}getShortName(e){return{BUN:"Pain",STEAK:"Viande",CHEESE:"Fromage",SALAD:"Salade",TOMATO:"Tomate",SAUCE:"Sauce",ONION:"Oignon",PICKLE:"Cornich.",BACON:"Bacon"}[e]||e}getIcon(e){return{BUN:"\u{1F35E}",STEAK:"\u{1F969}",CHEESE:"\u{1F9C0}",SALAD:"\u{1F96C}",TOMATO:"\u{1F345}",SAUCE:"\u{1F963}",ONION:"\u{1F9C5}",PICKLE:"\u{1F952}",BACON:"\u{1F953}"}[e]||"\u2753"}static \u0275fac=function(t){return new(t||n)(se(an),se(Ft),se(On))};static \u0275cmp=yt({type:n,selectors:[["app-foodtruck-game"]],hostBindings:function(t,r){t&1&&j("keydown",function(s){return r.handleKeyboardEvent(s)},mu)},standalone:!1,ngContentSelectors:kJ,decls:60,vars:43,consts:[[1,"h-full","bg-slate-900","p-6","flex","flex-col","gap-6","font-sans","select-none","overflow-hidden","relative","transition-colors","duration-500"],[1,"grid","grid-cols-12","gap-6","h-24","shrink-0","z-10"],[1,"col-span-3","card-panel","flex","flex-col","justify-center","px-6","relative","overflow-hidden","group"],[1,"text-slate-500","text-[10px]","font-bold","uppercase","tracking-widest","mb-1","label-text"],[1,"text-2xl","font-black","text-white","tracking-tight","value-text","group-hover:scale-105","transition-transform","origin-left"],[1,"absolute","right-2","bottom-[-10px]","text-6xl","opacity-10","rotate-12","emoji-bg"],[1,"col-span-6","card-panel","flex","items-center","justify-between","px-2","relative"],[1,"flex","flex-col","items-center","justify-center","w-24","h-full","border-r","border-white/10"],[1,"text-3xl","font-black","text-white","value-text"],[1,"text-[9px]","text-slate-500","uppercase","font-bold","label-text"],[1,"flex-1","flex","flex-col","items-center","justify-center"],["class","text-red-500 font-black text-lg animate-pulse tracking-widest uppercase glow-text",4,"ngIf"],["class","text-amber-400 font-black text-lg animate-pulse tracking-widest uppercase glow-text",4,"ngIf"],["class","text-slate-400 font-bold text-xs uppercase tracking-wide",4,"ngIf"],[1,"flex","gap-2","mt-1","opacity-80"],["class","badge-pill bg-blue-500/20 text-blue-300 border-blue-500/30",4,"ngIf"],["class","badge-pill bg-green-500/20 text-green-300 border-green-500/30",4,"ngIf"],[1,"col-span-3","card-panel","flex","flex-col","justify-center","items-end","px-6","relative","overflow-hidden"],[1,"text-3xl","font-mono","font-bold","text-white","z-10","value-text"],[1,"absolute","bottom-0","left-0","h-1.5","w-full","bg-black/20"],[1,"h-full","transition-all","duration-200"],[1,"flex-1","grid","grid-cols-12","gap-6","min-h-0","z-0"],[1,"col-span-3","card-panel","flex","flex-col","items-center","py-4","overflow-hidden"],[1,"text-[10px]","font-bold","text-slate-500","uppercase","tracking-widest","mb-2","label-text","shrink-0"],[1,"mb-3","flex","flex-col","items-center","bg-slate-950/30","w-full","py-2","border-y","border-white/5","shrink-0"],[1,"text-2xl","font-black","text-green-400","tracking-tight"],[1,"text-[8px]","text-slate-500","uppercase","font-bold"],[1,"flex-1","min-h-0","w-full","overflow-y-auto","custom-scroll","px-2","flex","flex-col","items-center","gap-2","pb-2"],["class","w-14 h-14 shrink-0 rounded-xl flex items-center justify-center text-3xl shadow-inner border border-white/5 bg-black/20 animate-in",3,"animation-delay",4,"ngFor","ngForOf"],["class","mt-4 text-green-400 font-bold text-xs animate-pulse flex flex-col items-center",4,"ngIf"],[1,"col-span-9","card-panel","relative","overflow-hidden","flex","items-end","justify-center","pb-10","group","bg-grid-pattern"],[1,"absolute","inset-0","pointer-events-none"],["class","absolute w-2 h-2 rounded-full",3,"left","top","background-color","transform",4,"ngFor","ngForOf"],[1,"relative","z-10","flex","flex-col-reverse","items-center","transition-transform","duration-200"],["class","text-8xl -mb-14 drop-shadow-2xl animate-pop hover:scale-105 transition-transform cursor-pointer select-none",3,"zIndex",4,"ngFor","ngForOf"],[1,"w-72","h-6","bg-slate-700/50","rounded-[100%]","mt-8","shadow-xl","blur-sm","z-[-1]","plate-shadow"],["class","absolute pointer-events-none font-bold text-3xl z-50 animate-float",3,"left","top","ngClass",4,"ngFor","ngForOf"],[1,"shrink-0","card-panel","p-4","z-20","shadow-2xl","border-t","border-white/10","transition-all","duration-300"],[1,"flex","gap-4","items-stretch"],[1,"flex-1","flex","flex-wrap","gap-2","justify-center","content-center"],["class",`relative group bg-slate-800 border-b-4 border-slate-950 rounded-xl 
                              active:border-b-0 active:translate-y-1 transition-all 
                              flex flex-col items-center justify-center overflow-hidden hover:bg-slate-700 ing-key
                              w-20 h-20 lg:w-24 lg:h-24`,3,"click",4,"ngFor","ngForOf"],[1,"w-32","lg:w-48","rounded-xl","font-black","text-lg","lg:text-xl","uppercase","tracking-widest","shadow-lg","border-b-4","active:border-b-0","active:translate-y-1","transition-all","flex","flex-col","items-center","justify-center","text-center","leading-none","action-key","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none","shrink-0","self-stretch","min-h-[5rem]",3,"click","disabled","ngClass"],["class","text-[10px] opacity-60 font-normal mt-1 border border-white/30 px-2 rounded",4,"ngIf"],[1,"text-red-500","font-black","text-lg","animate-pulse","tracking-widest","uppercase","glow-text"],[1,"text-amber-400","font-black","text-lg","animate-pulse","tracking-widest","uppercase","glow-text"],[1,"text-slate-400","font-bold","text-xs","uppercase","tracking-wide"],[1,"badge-pill","bg-blue-500/20","text-blue-300","border-blue-500/30"],[1,"badge-pill","bg-green-500/20","text-green-300","border-green-500/30"],[1,"w-14","h-14","shrink-0","rounded-xl","flex","items-center","justify-center","text-3xl","shadow-inner","border","border-white/5","bg-black/20","animate-in"],[1,"mt-4","text-green-400","font-bold","text-xs","animate-pulse","flex","flex-col","items-center"],[1,"text-[9px]","opacity-70"],[1,"absolute","w-2","h-2","rounded-full"],[1,"text-8xl","-mb-14","drop-shadow-2xl","animate-pop","hover:scale-105","transition-transform","cursor-pointer","select-none"],[1,"absolute","pointer-events-none","font-bold","text-3xl","z-50","animate-float",3,"ngClass"],[1,"relative","group","bg-slate-800","border-b-4","border-slate-950","rounded-xl","active:border-b-0","active:translate-y-1","transition-all","flex","flex-col","items-center","justify-center","overflow-hidden","hover:bg-slate-700","ing-key","w-20","h-20","lg:w-24","lg:h-24",3,"click"],["class","absolute top-1 left-1 bg-white/20 text-white/70 text-[10px] px-1.5 rounded font-mono border border-white/10",4,"ngIf"],[1,"text-3xl","lg:text-4xl","mb-1","group-hover:scale-110","transition-transform","duration-200"],[1,"text-[8px]","lg:text-[9px]","font-bold","text-slate-500","uppercase","tracking-wide","group-hover:text-slate-300","label-text","truncate","w-full","text-center","px-1"],[1,"absolute","bottom-0","left-0","w-full","h-1","bg-black/40"],[1,"h-full","bg-blue-500","transition-all","duration-300"],[1,"absolute","top-1","left-1","bg-white/20","text-white/70","text-[10px]","px-1.5","rounded","font-mono","border","border-white/10"],[1,"text-[10px]","opacity-60","font-normal","mt-1","border","border-white/30","px-2","rounded"]],template:function(t,r){t&1&&(Pp(),m(0,"div",0),Np(1),m(2,"div",1)(3,"div",2)(4,"div",3),y(5,"Caisse"),v(),m(6,"div",4),y(7),oe(8,"number"),v(),m(9,"div",5),y(10,"\u{1F4B0}"),v()(),m(11,"div",6)(12,"div",7)(13,"span",8),y(14),v(),m(15,"span",9),y(16),v()(),m(17,"div",10),H(18,PJ,2,0,"div",11)(19,NJ,2,0,"div",12)(20,MJ,2,0,"div",13),m(21,"div",14),H(22,OJ,2,1,"span",15)(23,FJ,2,1,"span",16),v()()(),m(24,"div",17)(25,"div",3),y(26,"Temps Restant"),v(),m(27,"div",18),y(28),oe(29,"number"),v(),m(30,"div",19),le(31,"div",20),v()()(),m(32,"div",21)(33,"div",22)(34,"div",23),y(35,"\xC0 Pr\xE9parer"),v(),m(36,"div",24)(37,"span",25),y(38),oe(39,"number"),v(),m(40,"span",26),y(41,"Valeur Commande"),v()(),m(42,"div",27),H(43,LJ,2,3,"div",28)(44,VJ,5,0,"div",29),v()(),m(45,"div",30)(46,"div",31),H(47,UJ,1,8,"div",32),v(),m(48,"div",33),H(49,BJ,2,3,"div",34),le(50,"div",35),v(),H(51,jJ,2,6,"div",36),v()(),m(52,"div",37)(53,"div",38)(54,"div",39),H(55,HJ,8,5,"button",40),v(),m(56,"button",41),j("click",function(s){return r.validateBurger(s)}),m(57,"span"),y(58),v(),H(59,GJ,2,0,"span",42),v()()()()),t&2&&(Re("vip-theme",r.isVip)("fever-theme",r.isFeverMode&&!r.isVip),b(7),J(" ",Ae(8,34,r.currentMoney,"1.0-0")," \u20AC "),b(7),Z(r.formatGameTime(r.timeOfDay)),b(2),J("Jour ",r.currentDay),b(2),R("ngIf",r.isFeverMode),b(),R("ngIf",r.isVip&&!r.isFeverMode),b(),R("ngIf",!r.isFeverMode&&!r.isVip),b(2),R("ngIf",r.cookCount>0),b(),R("ngIf",r.serverBonus>0),b(5),J("",Ae(29,37,r.displayTimeLeft/1e3,"1.1-1"),"s"),b(3),Ct("width",r.getBarPercentage(),"%"),Re("bg-blue-500",!r.isTimeRunningOut()&&!r.isVip&&!r.isFeverMode)("bg-red-500",r.isTimeRunningOut()||r.isFeverMode)("bg-amber-400",r.isVip),b(7),J("",Ae(39,40,r.getCurrentReward(),"1.0-0")," \u20AC"),b(5),R("ngForOf",r.remainingOrder),b(),R("ngIf",r.remainingOrder.length===0),b(3),R("ngForOf",r.particles),b(),Ct("transform","scale("+(1-r.currentStack.length*.02)+")"),b(),R("ngForOf",r.currentStack),b(2),R("ngForOf",r.floatingTexts),b(4),R("ngForOf",r.currentAvailableIngredients),b(),R("disabled",r.currentStack.length===0)("ngClass",r.getActionBtnClass()),b(2),Z(r.getButtonLabel()),b(),R("ngIf",r.upgrades.hasKeyboard))},dependencies:[Ti,rr,Bn,Cr],styles:[".card-panel[_ngcontent-%COMP%]{background-color:#1e293b;border:1px solid #334155;border-radius:1rem;box-shadow:0 4px 6px -1px #0000001a}.badge-pill[_ngcontent-%COMP%]{padding:2px 8px;border-radius:99px;font-size:10px;font-weight:700;border:1px solid;display:inline-block}.vip-theme[_ngcontent-%COMP%]   .card-panel[_ngcontent-%COMP%]{background-color:#2a2010;border-color:#78350f}.vip-theme[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#d97706}.vip-theme[_ngcontent-%COMP%]   .value-text[_ngcontent-%COMP%]{color:#fcd34d;text-shadow:0 0 10px rgba(251,191,36,.5)}.vip-theme[_ngcontent-%COMP%]   .ing-key[_ngcontent-%COMP%]{background-color:#451a03;border-color:#78350f}.vip-theme[_ngcontent-%COMP%]   .plate-shadow[_ngcontent-%COMP%]{background-color:#b45309;opacity:.5}.vip-theme[_ngcontent-%COMP%]   .glow-text[_ngcontent-%COMP%]{text-shadow:0 0 15px #fbbf24}.fever-theme[_ngcontent-%COMP%]   .card-panel[_ngcontent-%COMP%]{background-color:#2a1010;border-color:#7f1d1d}.fever-theme[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#f87171}.fever-theme[_ngcontent-%COMP%]   .value-text[_ngcontent-%COMP%]{color:#fecaca;text-shadow:0 0 10px rgba(239,68,68,.5)}.fever-theme[_ngcontent-%COMP%]   .glow-text[_ngcontent-%COMP%]{text-shadow:0 0 15px #ef4444}.bg-grid-pattern[_ngcontent-%COMP%]{background-image:radial-gradient(#334155 1px,transparent 1px);background-size:20px 20px;background-position:center}.vip-theme[_ngcontent-%COMP%]   .bg-grid-pattern[_ngcontent-%COMP%]{background-image:radial-gradient(#92400e 1px,transparent 1px)}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.4,0,.2,1) backwards}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-pop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop .15s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}.animate-float[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_floatUp .8s forwards ease-out}@keyframes _ngcontent-%COMP%_floatUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-40px)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade .2s ease-out}@keyframes _ngcontent-%COMP%_fade{0%{opacity:0}to{opacity:1}}.success[_ngcontent-%COMP%]{color:#4ade80;text-shadow:0 2px 0 #000}.error[_ngcontent-%COMP%]{color:#ef4444;text-shadow:0 2px 0 #000}.vip[_ngcontent-%COMP%]{color:#fbbf24;text-shadow:0 0 10px #b45309;font-size:2.5rem}.auto[_ngcontent-%COMP%]{color:#60a5fa;text-shadow:0 2px 0 #1e3a8a}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:2px}"],changeDetection:0})};var Qv=class n{constructor(e){this.gameState=e}progress=0;maxProgress=15;itemValue=150;get progressPercent(){return Math.floor(this.progress/this.maxProgress*100)}work(){this.progress++,this.progress>=this.maxProgress&&this.finishItem()}finishItem(){this.gameState.addMoney(this.itemValue),this.progress=0}static \u0275fac=function(t){return new(t||n)(se(an))};static \u0275cmp=yt({type:n,selectors:[["app-factory-game"]],standalone:!1,decls:13,vars:4,consts:[[1,"p-8","bg-slate-800","rounded-xl","border","border-slate-700","text-white","flex","flex-col","items-center","shadow-xl"],[1,"text-2xl","font-bold","mb-8","text-blue-400"],[1,"relative","w-56","h-56","mb-8","cursor-pointer","transition-transform","active:scale-95",3,"click"],[1,"absolute","inset-0","rounded-full","border-8","border-slate-700","bg-slate-900"],[1,"absolute","inset-0","rounded-full","bg-blue-600","opacity-50","transition-all","duration-75"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","z-10","select-none"],[1,"text-4xl","font-black"],[1,"text-xs","text-slate-400","uppercase","mt-1"],[1,"w-full","max-w-xs","py-4","bg-orange-600","hover:bg-orange-500","text-white","rounded-lg","font-bold","text-xl","uppercase","tracking-wider","shadow-lg","border-b-4","border-orange-800","active:border-0","active:translate-y-1","transition-all",3,"click"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"h3",1),y(2,"\u{1F3ED} Ligne d'Assemblage"),v(),m(3,"div",2),j("click",function(){return r.work()}),le(4,"div",3)(5,"div",4),m(6,"div",5)(7,"span",6),y(8),v(),m(9,"span",7),y(10,"Assemblage"),v()()(),m(11,"button",8),j("click",function(){return r.work()}),y(12),v()()),t&2&&(b(5),Ct("clip-path","inset("+(100-r.progressPercent)+"% 0 0 0)"),b(3),J("",r.progressPercent,"%"),b(4),J(" PRODUIRE (+",r.itemValue,"\u20AC) "))},encapsulation:2})};var WJ=()=>["PLAYING","STAND","BUST","BLACKJACK","WIN","LOSE","PUSH"];function KJ(n,e){if(n&1&&(m(0,"span",46),y(1),v()),n&2){let t=M();b(),J(" MODE ONLINE \u2022 ",t.myRole," ")}}function YJ(n,e){n&1&&(m(0,"div",62),y(1,"CONNECT\xC9"),v())}function QJ(n,e){if(n&1){let t=ae();m(0,"button",63),j("click",function(){G(t);let i=M(2);return z(i.hostStartGame())}),y(1),v()}if(n&2){let t=M(2);R("disabled",!(!(t.activeGame==null||t.activeGame.seats==null||t.activeGame.seats[2]==null)&&t.activeGame.seats[2].userId)),b(),J(" ",!(t.activeGame==null||t.activeGame.seats==null||t.activeGame.seats[2]==null)&&t.activeGame.seats[2].userId?"LANCER LA PARTIE":"ATTENTE JOUEUR..."," ")}}function JJ(n,e){n&1&&(m(0,"div",64),y(1,"En attente de l'h\xF4te..."),v())}function ZJ(n,e){if(n&1&&(m(0,"div",47)(1,"div",48),y(2,"\u23F3"),v(),m(3,"h2",49),y(4,"SALON D'ATTENTE"),v(),m(5,"p",50),y(6,"La partie commencera quand l'invit\xE9 sera pr\xEAt."),v(),m(7,"div",51)(8,"div",52)(9,"div",53),y(10," \u{1F451} "),m(11,"div",54),y(12,"PR\xCAT"),v()(),m(13,"span",55),y(14,"H\xF4te"),v()(),m(15,"div",56),y(16,"VS"),v(),m(17,"div",52)(18,"div",57),y(19),H(20,YJ,2,0,"div",58),v(),m(21,"span",59),y(22,"Invit\xE9"),v()()(),H(23,QJ,2,2,"button",60)(24,JJ,2,0,"div",61),v()),n&2){let t=M();b(18),R("ngClass",!(t.activeGame==null||t.activeGame.seats==null||t.activeGame.seats[2]==null)&&t.activeGame.seats[2].userId?"bg-slate-800 border-4 border-green-500":"bg-slate-800/50 border-4 border-slate-700 border-dashed"),b(),J(" ",!(t.activeGame==null||t.activeGame.seats==null||t.activeGame.seats[2]==null)&&t.activeGame.seats[2].userId?"\u{1F464}":"?"," "),b(),R("ngIf",t.activeGame==null||t.activeGame.seats==null||t.activeGame.seats[2]==null?null:t.activeGame.seats[2].userId),b(),Re("text-white",t.activeGame==null||t.activeGame.seats==null||t.activeGame.seats[2]==null?null:t.activeGame.seats[2].userId)("text-slate-600",!(!(t.activeGame==null||t.activeGame.seats==null||t.activeGame.seats[2]==null)&&t.activeGame.seats[2].userId)),b(2),R("ngIf",t.isHost),b(),R("ngIf",!t.isHost)}}function XJ(n,e){n&1&&le(0,"div",65)}function eZ(n,e){if(n&1&&(m(0,"span",66),y(1),v()),n&2){let t=e.$implicit;R("title",t.name),b(),Z(t.icon)}}function tZ(n,e){if(n&1){let t=ae();m(0,"button",67),j("click",function(){G(t);let i=M();return z(i.buyCasino())}),y(1," \u{1F3F0} RACHETER LE CASINO (1M\u20AC) "),v()}}function nZ(n,e){if(n&1){let t=ae();m(0,"button",68),j("click",function(){G(t);let i=M();return z(i.openDuelLobby())}),y(1," \u{1F464} SOLO "),v()}}function rZ(n,e){if(n&1&&(m(0,"div",72)(1,"div",73),y(2),le(3,"br"),m(4,"span",74),y(5),v()(),m(6,"div",75),y(7),v()()),n&2){let t=M().$implicit;Re("text-red-600",t.isRed)("text-slate-900",!t.isRed),b(2),Z(t.value),b(3),Z(t.suit),b(2),Z(t.suit)}}function iZ(n,e){if(n&1&&(m(0,"div",76)(1,"div",77)(2,"div",78),le(3,"div",79)(4,"div",80),v(),m(5,"div",81)(6,"div",73),y(7),le(8,"br"),m(9,"span",74),y(10),v()(),m(11,"div",82),y(12),v(),m(13,"div",83),y(14),le(15,"br"),m(16,"span",74),y(17),v()()()()()),n&2){let t=M().$implicit,r=M();b(),Re("flipped",r.cardRevealed),b(4),Re("text-red-600",t.isRed)("text-slate-900",!t.isRed),b(2),Z(t.value),b(3),Z(t.suit),b(2),Z(t.suit),b(2),Z(t.value),b(3),Z(t.suit)}}function sZ(n,e){if(n&1&&(m(0,"div",69),H(1,rZ,8,7,"div",70)(2,iZ,18,11,"div",71),v()),n&2){let t=e.$implicit;R("@cardDeal",void 0),b(),R("ngIf",!t.isFaceDown),b(),R("ngIf",t.isFaceDown)}}function oZ(n,e){if(n&1){let t=ae();m(0,"button",89),j("click",function(i){G(t);let s=M().index,o=M();return i.stopPropagation(),z(o.occupySeat(s))}),m(1,"span",90),y(2,"\u2795"),v(),m(3,"span",91),y(4,"REJOINDRE"),v()()}}function aZ(n,e){if(n&1&&(m(0,"span",102),y(1),v()),n&2){let t=M(2).$implicit;b(),Z(t.avatar)}}function cZ(n,e){n&1&&(m(0,"span",103),y(1,"\u{1F916}"),v())}function lZ(n,e){if(n&1){let t=ae();m(0,"button",104),j("click",function(i){G(t);let s=M(2).index,o=M();return i.stopPropagation(),z(o.clearBet(s))}),y(1,"Effacer"),v()}}function uZ(n,e){n&1&&(m(0,"div",105),y(1,"Cliquer pour miser"),v())}function dZ(n,e){if(n&1&&(m(0,"div",92)(1,"div",93),H(2,aZ,2,1,"span",94)(3,cZ,2,0,"span",95),y(4),v(),m(5,"div",96),le(6,"div",97),m(7,"div",98),y(8),oe(9,"number"),v(),m(10,"div",99),H(11,lZ,2,0,"button",100),v()(),H(12,uZ,2,0,"div",101),v()),n&2){let t=M().$implicit,r=M();b(2),R("ngIf",t.avatar),b(),R("ngIf",t.isBot),b(),J(" ",t.name," "),b(4),J(" ",Ae(9,6,t.bet,"1.0-0")," "),b(3),R("ngIf",t.bet>0),b(),R("ngIf",!t.isBot&&!r.isMultiplayer)}}function hZ(n,e){if(n&1&&(m(0,"div",113)(1,"div",114),y(2),v()()),n&2){let t=M(2).$implicit;R("@modalPop",void 0),b(),Re("text-green-400",t.status==="WIN")("text-red-500",t.status==="LOSE")("text-amber-400",t.status==="BLACKJACK"),b(),J(" ",t.resultMessage," ")}}function fZ(n,e){if(n&1&&(m(0,"div",115)(1,"div",116)(2,"div",117),y(3),le(4,"br"),y(5),v(),m(6,"div",118),y(7),v()()()),n&2){let t=e.$implicit;R("@cardDeal",void 0),b(),Re("text-red-600",t.isRed)("text-slate-900",!t.isRed),b(2),Z(t.value),b(2),Z(t.suit),b(2),Z(t.suit)}}function pZ(n,e){if(n&1&&(m(0,"div",106),H(1,hZ,3,8,"div",107),m(2,"div",108),H(3,fZ,8,8,"div",109),v(),m(4,"div",110)(5,"span",111),y(6),v(),m(7,"span",112),y(8),v()()()),n&2){let t=M().$implicit,r=M();b(),R("ngIf",t.resultMessage&&r.winAmount===0),b(2),R("ngForOf",t.hand),b(3),Z(t.name),b(2),J(" ",t.score," ")}}function mZ(n,e){n&1&&le(0,"div",119)}function gZ(n,e){if(n&1){let t=ae();m(0,"div",84),j("click",function(i){let s=G(t).index,o=M();return z(o.addToBet(i,s))}),H(1,oZ,5,0,"button",85)(2,dZ,13,9,"div",86)(3,pZ,9,4,"div",87)(4,mZ,1,0,"div",88),v()}if(n&2){let t=e.$implicit,r=e.index,i=M();Re("opacity-50",!i.isSeatActive(r))("scale-105",i.activeSeatIndex===r),b(),R("ngIf",t.status==="EMPTY"&&!i.isMultiplayer),b(),R("ngIf",t.status==="BETTING"||t.status==="WAITING_BET"),b(),R("ngIf",bu(8,WJ).includes(t.status)),b(),R("ngIf",i.activeSeatIndex===r||i.isMultiplayer&&(i.activeGame==null?null:i.activeGame.turnIndex)===r&&(i.activeGame==null?null:i.activeGame.phase)==="PLAYING")}}function vZ(n,e){if(n&1){let t=ae();m(0,"button",126),j("click",function(){G(t);let i=M(2);return z(i.actionDouble())}),m(1,"div",122),y(2,"\u{1F4B0}"),v(),m(3,"div",123),y(4,"Doubler"),v()()}}function _Z(n,e){if(n&1){let t=ae();m(0,"div",120)(1,"button",121),j("click",function(){G(t);let i=M();return z(i.actionHit())}),m(2,"div",122),y(3,"\u{1F447}"),v(),m(4,"div",123),y(5,"Carte"),v()(),m(6,"button",124),j("click",function(){G(t);let i=M();return z(i.actionStand())}),m(7,"div",122),y(8,"\u270B"),v(),m(9,"div",123),y(10,"Rester"),v()(),H(11,vZ,5,0,"button",125),v()}if(n&2){let t=M();b(11),R("ngIf",t.canDouble)}}function yZ(n,e){n&1&&(m(0,"div",135),y(1," Aucun joueur trouv\xE9... \u{1F634}"),le(2,"br"),m(3,"span",103),y(4,"Attendez qu'ils se connectent !"),v()())}function EZ(n,e){if(n&1){let t=ae();m(0,"div",136),j("click",function(){let i=G(t).$implicit,s=M(2);return z(s.challengePlayer(i))}),m(1,"div",137)(2,"div",138),y(3),v(),m(4,"div")(5,"div",139),y(6),v(),m(7,"div",140),y(8),oe(9,"number"),v()()(),m(10,"button",141),y(11,"INVITER"),v()()}if(n&2){let t=e.$implicit;b(3),Z(t.avatarId),b(3),Z(t.username),b(2),Co("",t.title," \u2022 ",Ae(9,4,t.money,"1.0-0"),"\u20AC")}}function bZ(n,e){if(n&1){let t=ae();m(0,"div",127),j("click",function(){G(t);let i=M();return z(i.closeLobby())}),m(1,"div",128),j("click",function(i){return G(t),z(i.stopPropagation())}),m(2,"div",129)(3,"h3",130),y(4,"\u2694\uFE0F JOUEURS EN LIGNE"),v(),m(5,"button",131),j("click",function(){G(t);let i=M();return z(i.closeLobby())}),y(6,"\u2715"),v()(),m(7,"div",132),H(8,yZ,5,0,"div",133)(9,EZ,12,7,"div",134),v()()()}if(n&2){let t=M();b(8),R("ngIf",t.onlinePlayers.length===0),b(),R("ngForOf",t.onlinePlayers)}}function wZ(n,e){if(n&1){let t=ae();m(0,"button",148),j("click",function(){let i=G(t).$implicit,s=M(2);return z(s.selectChip(i))}),le(1,"div",149),m(2,"div",150)(3,"span",151),y(4),oe(5,"number"),v()()()}if(n&2){let t=e.$implicit,r=M(2);Re("ring-4",r.selectedChip===t)("ring-white",r.selectedChip===t),R("disabled",r.currentMoney<t)("ngClass",r.getChipShadow(t)),b(),R("ngClass",r.getChipBg(t)),b(),R("ngClass",r.getChipBg(t)),b(2),Z(Ae(5,9,t,"1.0-0"))}}function IZ(n,e){if(n&1){let t=ae();m(0,"div",142)(1,"div",143),H(2,wZ,6,12,"button",144),v(),m(3,"div",145)(4,"button",146),j("click",function(){G(t);let i=M();return z(i.allIn())}),y(5,"\u{1F525} TAPIS"),v(),m(6,"button",147),j("click",function(){G(t);let i=M();return z(i.startRound())}),y(7,"DISTRIBUER"),v()()()}if(n&2){let t=M();R("@chipsIn",void 0),b(2),R("ngForOf",t.chips),b(4),R("disabled",!t.canStartRound())}}function SZ(n,e){if(n&1){let t=ae();m(0,"div",152)(1,"button",153),j("click",function(){G(t);let i=M();return z(i.openDuelLobby())}),y(2," \u2694\uFE0F INVITER UN AMI EN DUEL "),v()()}}function CZ(n,e){if(n&1){let t=ae();m(0,"div",154)(1,"div",155)(2,"div",156)(3,"div",157),y(4,"R\xE9sultat de la manche"),v(),m(5,"div",158),y(6," VICTOIRE "),v()(),le(7,"div",159),m(8,"div",160)(9,"div",161),y(10,"Gains Totaux"),v(),m(11,"div",162),y(12),oe(13,"number"),v()(),m(14,"button",163),j("click",function(){G(t);let i=M();return z(i.resetRound())}),y(15," Continuer "),v()()()}if(n&2){let t=M();b(),R("@modalPop",void 0),b(11),J(" +",Ae(13,2,t.winAmount,"1.0-0")," \u20AC ")}}function TZ(n,e){if(n&1){let t=ae();m(0,"div",164)(1,"button",165),j("click",function(){G(t);let i=M();return z(i.resetRound())}),y(2,"NOUVELLE MANCHE \u{1F3B2}"),v()()}}function DZ(n,e){if(n&1&&(m(0,"div",166)(1,"div",167)(2,"div",168),y(3),oe(4,"number"),v()()()),n&2){let t=e.$implicit,r=M();Ct("left",t.startX,"px")("top",t.startY,"px"),Re("flying-target",t.targetX>0),b(),R("ngClass",r.getChipStyle(t.value)),b(2),Z(Ae(4,8,t.value,"1.0-0"))}}function AZ(n,e){if(n&1&&(m(0,"div",175)(1,"span"),y(2),v(),m(3,"span"),y(4),v()()),n&2){let t=e.$implicit;b(2),Z(t.result),b(),Re("text-green-600",t.amount>0)("text-red-600",t.amount<0),b(),Co("",t.amount>0?"+":"","",t.amount)}}function xZ(n,e){if(n&1){let t=ae();m(0,"div",169)(1,"div",170)(2,"span"),y(3,"SESSION LOG"),v(),m(4,"span",171),j("click",function(){G(t);let i=M();return z(i.toggleStats())}),y(5,"\u2715"),v()(),m(6,"div",172),H(7,AZ,5,7,"div",173),v(),m(8,"div",174)(9,"span"),y(10,"TOTAL"),v(),m(11,"span"),y(12),v()()()}if(n&2){let t=M();b(7),R("ngForOf",t.sessionLogs),b(4),Re("text-green-600",t.sessionWinnings>=0)("text-red-600",t.sessionWinnings<0),b(),J("",t.sessionWinnings," \u20AC")}}var Jv=class n{constructor(e,t,r,i){this.gameState=e;this.sound=t;this.cdr=r;this.firebase=i}isMultiplayer=!1;activeGame=null;gameSub=null;mySeatIndex=-1;isHost=!1;previousPhase="";seats=[{id:0,hand:[],bet:0,score:0,status:"EMPTY",isBot:!0,name:"Si\xE8ge 1"},{id:1,hand:[],bet:0,score:0,status:"EMPTY",isBot:!1,name:"Si\xE8ge 2"},{id:2,hand:[],bet:0,score:0,status:"EMPTY",isBot:!1,name:"Si\xE8ge 3"}];dealerHand=[];dealerScore=0;globalStatus="BETTING";isLobbyOpen=!1;onlinePlayers=[];isSpotlightMode=!1;currentMoney=0;winAmount=0;tickerMessages=["Bienvenue au Casino."];badges=[];sessionWinnings=0;dealerHandTransform="";isOwner=!1;showStats=!1;sessionLogs=[];myUsername="";chips=[100,1e3,1e4,1e5,1e6];selectedChip=100;flyingChips=[];cardRevealed=!1;deck=[];activeSeatIndex=null;ngOnInit(){this.gameSub=this.firebase.activeGame$.subscribe(e=>{this.activeGame=e,e?(this.isMultiplayer=!0,this.isHost=e.hostId===this.firebase.currentUserId,this.mySeatIndex=e.guestId===this.firebase.currentUserId?2:1,this.syncGameState(e)):(this.isMultiplayer=!1,this.seats[1].status==="EMPTY"&&(this.seats[1].status="BETTING",this.seats[1].name="Vous")),this.cdr.markForCheck()}),this.gameState.gameState$.subscribe(e=>{this.currentMoney=e.money,e.user&&(this.myUsername=e.user.username)}),this.createDeck()}ngOnDestroy(){this.gameSub&&this.gameSub.unsubscribe(),this.firebase.leaveGame()}get connectionStatus(){return this.isMultiplayer?this.activeGame?.phase==="LOBBY"?"EN ATTENTE...":"PARTIE EN COURS":"MODE SOLO"}get myRole(){return this.isHost?"H\xD4TE":"INVIT\xC9"}get isMyTurn(){return this.activeGame?.turnIndex===this.mySeatIndex}get dealerScoreDisplay(){return this.dealerScore}get showActionButtons(){return this.isMultiplayer?this.isMyTurn&&this.activeGame?.phase==="PLAYING":this.globalStatus==="PLAYING"&&this.activeSeatIndex!==null&&!this.seats[this.activeSeatIndex].isBot}get canDouble(){return this.isMultiplayer?this.isMyTurn&&this.seats[this.mySeatIndex].hand.length===2:this.activeSeatIndex!==null&&this.seats[this.activeSeatIndex].hand.length===2}syncGameState(e){this.dealerHand=e.dealerHand||[],this.dealerScore=e.dealerScore||0,this.cardRevealed=e.phase==="DEALER_TURN"||e.phase==="RESULT",e.seats&&e.seats.forEach((t,r)=>{this.seats[r]={id:t.id,hand:t.hand||[],score:t.score||0,bet:t.bet||0,status:t.status,isBot:!1,name:t.username||"Joueur",avatar:t.avatar}}),e.phase==="RESULT"&&this.previousPhase!=="RESULT"&&this.handleLocalResults(this.seats[this.mySeatIndex]),this.previousPhase=e.phase,this.isHost&&e.phase==="DEALER_TURN"&&this.processDealerTurn(e)}async actionHit(){if(this.isMultiplayer){if(!this.activeGame)return;let e=[...this.activeGame.deck],t=e.pop();if(!t)return;let r=this.activeGame.seats[this.mySeatIndex];if(r.hand.push(t),r.score=this.calculateScore(r.hand),r.score>21){r.status="BUST",this.sound.playError();let i=this.mySeatIndex===1?2:3;await this.firebase.updateGameState(this.activeGame.id,{seats:this.activeGame.seats,deck:e,turnIndex:i}),this.checkNextTurn(i)}else this.sound.playNoise(.1,"highpass",1e3,.2),await this.firebase.updateGameState(this.activeGame.id,{seats:this.activeGame.seats,deck:e})}else this.hit()}async actionStand(){if(this.isMultiplayer){if(!this.activeGame)return;let e=this.activeGame.seats[this.mySeatIndex];e.status="STAND";let t=this.mySeatIndex===1?2:3;await this.firebase.updateGameState(this.activeGame.id,{seats:this.activeGame.seats,turnIndex:t}),this.checkNextTurn(t)}else this.stand()}async actionDouble(){this.isMultiplayer?(this.actionHit(),setTimeout(()=>this.actionStand(),500)):this.double()}async hostStartGame(){if(!this.isHost||!this.activeGame)return;console.log("Lancement de la partie...");let e=this.createDeck(),t=JSON.parse(JSON.stringify(this.activeGame.seats));t[1].status="PLAYING",t[2].status="PLAYING",t[1].hand=[e.pop(),e.pop()],t[1].score=this.calculateScore(t[1].hand),t[2].hand=[e.pop(),e.pop()],t[2].score=this.calculateScore(t[2].hand);let r=[e.pop(),ne(O({},e.pop()),{isFaceDown:!0})];await this.firebase.updateGameState(this.activeGame.id,{deck:e,seats:t,dealerHand:r,dealerScore:this.calculateScore([r[0]]),phase:"PLAYING",turnIndex:1})}async checkNextTurn(e){!this.isHost||!this.activeGame||(e===2&&this.activeGame.seats[2].status!=="PLAYING"&&(e=3),e===3?await this.firebase.updateGameState(this.activeGame.id,{phase:"DEALER_TURN",turnIndex:3}):await this.firebase.updateGameState(this.activeGame.id,{turnIndex:e}))}async processDealerTurn(e){let t=[...e.dealerHand],r=[...e.deck];if(t[1].isFaceDown&&(t[1].isFaceDown=!1,await new Promise(s=>setTimeout(s,1e3)),await this.firebase.updateGameState(e.id,{dealerHand:t,dealerScore:this.calculateScore(t)})),this.calculateScore(t)<17){await new Promise(o=>setTimeout(o,1e3));let s=r.pop();s&&(t.push(s),await this.firebase.updateGameState(e.id,{dealerHand:t,dealerScore:this.calculateScore(t),deck:r}))}else await this.resolveWinners(e)}async resolveWinners(e){let t=[...e.seats],r=this.calculateScore(e.dealerHand),i=r>21;t.forEach(s=>{s.id!==0&&(s.status==="BUST"?s.status="LOSE":i||s.score>r?s.status="WIN":s.score===r?s.status="PUSH":s.status="LOSE")}),await this.firebase.updateGameState(e.id,{seats:t,phase:"RESULT"})}startRound(){let e=this.seats[1].bet;e>0&&this.gameState.gameState$.pipe(Ze(1)).subscribe(i=>{let s=O({},i.stats);s.handsPlayed=(s.handsPlayed||0)+1,s.highestBet=Math.max(s.highestBet||0,e),this.gameState.updateState({stats:s})}),this.globalStatus="PLAYING",this.dealerHand=[],this.cardRevealed=!1,this.isSpotlightMode=!1,this.winAmount=0,this.seats.forEach(i=>{i.status==="BETTING"&&i.bet>0?(i.status="PLAYING",i.hand=[],i.score=0,i.resultMessage=""):i.status==="BETTING"&&(i.status="EMPTY")});let t=0,r=setInterval(()=>{t++,t===1&&this.seats.forEach(i=>{i.status==="PLAYING"&&i.hand.push(this.drawCard())}),t===2&&this.dealerHand.push(this.drawCard()),t===3&&this.seats.forEach(i=>{i.status==="PLAYING"&&i.hand.push(this.drawCard())}),t===4&&this.dealerHand.push(this.drawCard(!0)),this.updateScores(),this.sound.playNoise(.02,"highpass",1200,.2),this.cdr.markForCheck(),t===4&&(clearInterval(r),setTimeout(()=>this.checkBlackjacks(),500))},400)}updateScores(){this.seats.forEach(e=>e.score=this.calculateScore(e.hand))}checkBlackjacks(){let e=!0;this.seats.forEach(t=>{t.status==="PLAYING"&&t.score===21&&(t.status="BLACKJACK",this.sound.playSuccess()),t.status==="PLAYING"&&(e=!1)}),e?this.startDealerTurn():this.nextTurn()}nextTurn(){let e=this.seats.findIndex((t,r)=>t.status==="PLAYING"&&(this.activeSeatIndex===null||r>this.activeSeatIndex));e!==-1?(this.activeSeatIndex=e,this.seats[e].isBot&&setTimeout(()=>this.playBotTurn(e),500)):(this.activeSeatIndex=null,this.startDealerTurn()),this.cdr.markForCheck()}hit(){if(this.activeSeatIndex===null)return;let e=this.seats[this.activeSeatIndex];e.hand.push(this.drawCard()),this.updateScores(),this.sound.playNoise(.02,"highpass",1500,.15),e.score>21&&(e.status="BUST",e.resultMessage="SAUT\xC9 !",this.sound.playError(),setTimeout(()=>this.nextTurn(),800))}stand(){this.activeSeatIndex!==null&&(this.seats[this.activeSeatIndex].status="STAND",this.nextTurn())}double(){if(this.activeSeatIndex===null)return;let e=this.seats[this.activeSeatIndex];this.gameState.addMoney(-e.bet),e.bet*=2,e.hand.push(this.drawCard()),this.updateScores(),this.sound.playCash(),e.score>21?(e.status="BUST",e.resultMessage="SAUT\xC9 !"):e.status="STAND",setTimeout(()=>this.nextTurn(),1e3)}async playBotTurn(e){let t=this.seats[e];for(;t.score<17;)await new Promise(r=>setTimeout(r,1e3)),t.hand.push(this.drawCard()),this.updateScores(),this.cdr.markForCheck();t.score>21?t.status="BUST":t.status="STAND",await new Promise(r=>setTimeout(r,500)),this.nextTurn()}async startDealerTurn(){for(this.globalStatus="DEALER_TURN",this.isSpotlightMode=!0,this.activeSeatIndex=null,this.cardRevealed=!0,this.sound.playNoise(.1,"lowpass",600,.3),await new Promise(e=>setTimeout(e,600)),this.dealerHand[1].isFaceDown=!1,this.cdr.markForCheck();this.dealerScore<17;)await new Promise(e=>setTimeout(e,1e3)),this.dealerHand.push(this.drawCard()),this.sound.playNoise(.02,"highpass",1200,.2),this.cdr.markForCheck();await new Promise(e=>setTimeout(e,500)),this.resolveRound()}resolveRound(){this.globalStatus="RESULT";let e=this.dealerScore,t=e>21,r=e===21&&this.dealerHand.length===2;this.seats.forEach(i=>{if(i.status==="EMPTY"||i.status==="BETTING")return;let s=0;i.resultAmount=0,i.status==="BUST"||(i.status==="BLACKJACK"?r?(i.status="PUSH",i.resultMessage="EGALIT\xC9",s=i.bet):(i.status="WIN",i.resultMessage="BLACKJACK !!",s=i.bet*2.5,this.sound.playCash()):r?(i.status="LOSE",i.resultMessage="PERDU"):t||i.score>e?(i.status="WIN",i.resultMessage="GAGN\xC9",s=i.bet*2):i.score===e?(i.status="PUSH",i.resultMessage="EGALIT\xC9",s=i.bet):(i.status="LOSE",i.resultMessage="PERDU")),s>0&&this.handleLocalResults(i,s)}),this.cdr.markForCheck()}handleLocalResults(e,t=0){if(e.status==="WIN"){let r=t||e.bet*2;this.winAmount=r,this.gameState.addMoney(r),this.sound.playCash(),this.gameState.gameState$.pipe(Ze(1)).subscribe(i=>{let s=O({},i.stats);s.biggestWin=Math.max(s.biggestWin||0,r),this.gameState.updateState({stats:s})})}else e.status==="PUSH"&&this.gameState.addMoney(e.bet)}resetRound(){this.isMultiplayer||(this.globalStatus="BETTING",this.isSpotlightMode=!1,this.activeSeatIndex=null,this.dealerHand=[],this.seats.forEach(e=>{e.status!=="EMPTY"&&(e.status="BETTING",e.hand=[],e.score=0,e.resultMessage="",e.resultAmount=0,e.bet=0)}))}createDeck(){let e=["\u2660","\u2665","\u2666","\u2663"],t=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];this.deck=[];for(let r=0;r<4;r++)for(let i of e)for(let s of t){let o=parseInt(s);isNaN(o)&&(o=s==="A"?11:10),this.deck.push({suit:i,value:s,numValue:o,isRed:i==="\u2665"||i==="\u2666",id:Math.random().toString(),isFaceDown:!1})}return this.deck.sort(()=>Math.random()-.5)}drawCard(e=!1){this.deck.length<20&&this.createDeck();let t=this.deck.pop();return t.isFaceDown=e,this.animateDealerHand(),t}animateDealerHand(){this.dealerHandTransform="translate(-50px, 50px)",setTimeout(()=>{this.dealerHandTransform="translate(0,0)",this.cdr.markForCheck()},150)}calculateScore(e){let t=0,r=0;for(let i of e)i.isFaceDown||(t+=i.numValue,i.value==="A"&&r++);for(;t>21&&r>0;)t-=10,r--;return t}async openDuelLobby(){this.isLobbyOpen=!0,this.onlinePlayers=await this.firebase.getOnlinePlayers(),this.cdr.markForCheck()}closeLobby(){this.isLobbyOpen=!1}async challengePlayer(e){let t=await this.firebase.createMultiplayerGame(this.myUsername,e.id,1e3);this.firebase.sendInvite(e.id,e.username,t,1e3,this.myUsername),this.firebase.joinGameRoom(t),this.closeLobby()}occupySeat(e){this.seats[e].status="BETTING",this.seats[e].name=`Moi (${e+1})`,this.seats[e].isBot=!1}selectChip(e){this.selectedChip=e}addToBet(e,t){if(this.currentMoney<this.selectedChip){this.sound.playError();return}if(this.seats[t].status!=="BETTING"||this.seats[t].isBot)return;let r=Date.now();this.flyingChips.push({id:r,value:this.selectedChip,startX:e.clientX,startY:e.clientY,targetX:0,targetY:0}),this.gameState.addMoney(-this.selectedChip),this.seats[t].bet+=this.selectedChip,this.sound.playNoise(.05,"lowpass",400,.4),setTimeout(()=>this.flyingChips=this.flyingChips.filter(i=>i.id!==r),400)}clearBet(e){this.seats[e].bet>0&&!this.seats[e].isBot?(this.gameState.addMoney(this.seats[e].bet),this.seats[e].bet=0,this.sound.playSoftPop()):e!==1&&(this.seats[e].status="EMPTY")}allIn(){if(this.currentMoney<=0)return;let e=this.seats[1];if(e.status==="BETTING"){let t=this.currentMoney;this.gameState.addMoney(-t),e.bet+=t,this.sound.playCash()}}canStartRound(){return this.seats.some(e=>e.status==="BETTING"&&e.bet>0)}getChipBg(e){return e===100?"bg-slate-400 text-slate-900":e===1e3?"bg-emerald-600 text-white":e===1e4?"bg-blue-600 text-white":e===1e5?"bg-purple-600 text-white":"bg-black text-amber-400 border-amber-400"}getChipShadow(e){return e===100?"shadow-[0_4px_0_#94a3b8]":e===1e3?"shadow-[0_4px_0_#065f46]":e===1e4?"shadow-[0_4px_0_#1e3a8a]":e===1e5?"shadow-[0_4px_0_#581c87]":"shadow-[0_4px_0_#78350f]"}getChipStyle(e){return this.getChipBg(e)+" border-2 border-white/20"}logSession(e,t){this.sessionLogs.unshift({result:e,amount:t}),this.sessionWinnings+=t}toggleStats(){this.showStats=!this.showStats}updateBadges(){this.badges=[],this.sessionWinnings>1e4&&this.badges.push({name:"High Roller",icon:"\u{1F433}"}),this.sessionWinnings>5e4&&this.badges.push({name:"Shark",icon:"\u{1F988}"}),this.sessionWinnings>1e6&&this.badges.push({name:"Legend",icon:"\u{1F451}"})}buyCasino(){this.isOwner=!0,this.sound.playSuccess(),this.firebase.logPublicEvent("\u{1F451} LE CASINO VIENT D'\xCATRE RACHET\xC9 ! Respect au nouveau Boss ! \u{1F451}","JACKPOT"),alert("F\xC9LICITATIONS ! Vous \xEAtes maintenant le propri\xE9taire du Casino Royal !")}isSeatActive(e){return!(this.activeSeatIndex!==null&&this.activeSeatIndex!==e&&this.seats[e].status!=="EMPTY")}static \u0275fac=function(t){return new(t||n)(se(an),se(On),se(Ft),se(li))};static \u0275cmp=yt({type:n,selectors:[["app-blackjack-game"]],standalone:!1,decls:56,vars:38,consts:[[1,"h-full","flex","flex-col","font-sans","select-none","relative","overflow-hidden","text-slate-200","shadow-[inset_0_0_150px_rgba(0,0,0,0.9)]","transition-colors","duration-1000"],[1,"absolute","top-0","left-0","w-full","bg-black/60","backdrop-blur-sm","border-b","border-white/5","h-8","flex","items-center","overflow-hidden","z-30"],[1,"flex","gap-4","px-4","w-full","justify-between","items-center"],[1,"flex","gap-4"],[1,"text-xs","font-mono","font-bold","text-green-400","flex","items-center","gap-2"],[1,"w-2","h-2","bg-red-500","rounded-full","animate-pulse"],["class","text-[10px] font-bold text-purple-400 bg-purple-900/20 px-2 py-0.5 rounded border border-purple-500/30",4,"ngIf"],["class","absolute inset-0 z-50 flex flex-col items-center justify-center bg-slate-900/95 backdrop-blur animate-fade-in",4,"ngIf"],[1,"absolute","-top-10","-right-10","w-40","h-60","bg-slate-900","border","border-slate-700","rounded-xl","rotate-12","shadow-2xl","z-0","deck-stack"],[1,"absolute","inset-0","bg-red-900/20","rounded-xl"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","text-slate-700","font-black","opacity-20","text-4xl","rotate-90"],[1,"absolute","inset-0","pointer-events-none","transition-opacity","duration-1000"],[1,"absolute","top-0","left-1/2","-translate-x-1/2","w-[600px]","h-[600px]","bg-amber-500/10","blur-[100px]","rounded-full","mix-blend-screen"],[1,"absolute","top-[-50px]","right-[20%]","w-32","h-32","z-50","pointer-events-none","transition-transform","duration-300"],[1,"w-full","h-full","bg-white","rounded-full","opacity-10","blur-xl"],[1,"text-6xl","absolute","top-0","left-0","drop-shadow-2xl"],[1,"flex","justify-between","items-start","z-30","mt-10","mb-4","px-6","relative"],[1,"flex","flex-col","bg-slate-950/80","backdrop-blur-md","p-4","rounded-2xl","border","border-white/10","shadow-xl","transition-all","hover:border-white/20","group","relative","overflow-hidden"],["class","absolute inset-0 bg-amber-500/10 pointer-events-none animate-pulse",4,"ngIf"],[1,"flex","items-center","gap-2","mb-1"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-[0.2em]"],[1,"flex","gap-1"],["class","text-xs",3,"title",4,"ngFor","ngForOf"],[1,"text-4xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-emerald-400","to-teal-300","font-mono","filter","drop-shadow"],["class","mt-2 text-[10px] bg-gradient-to-r from-amber-600 to-amber-500 text-white font-black px-3 py-1.5 rounded hover:scale-105 transition-transform shadow-lg animate-bounce border border-amber-400/50",3,"click",4,"ngIf"],["class","px-4 py-2 rounded-xl border border-slate-600 bg-slate-900/50 text-slate-400 hover:bg-slate-800 text-xs font-bold transition-all shadow-lg backdrop-blur-md",3,"click",4,"ngIf"],[1,"w-10","h-10","rounded-full","bg-slate-800","border","border-slate-600","flex","items-center","justify-center","hover:bg-slate-700","text-xl","shadow-lg",3,"click"],[1,"flex-1","flex","flex-col","relative","z-10","min-h-0","transition-all","duration-700"],[1,"flex","flex-col","items-center","h-48","relative","justify-end","mt-4"],[1,"flex","items-center","gap-3","mb-4","z-10","transition-opacity","duration-300"],[1,"text-xs","font-black","uppercase","tracking-widest","text-slate-500","drop-shadow-md"],[1,"bg-slate-900","text-slate-200","text-xs","font-bold","px-3","py-1","rounded-full","border","border-slate-700","shadow-lg","min-w-[2rem]","text-center"],[1,"flex","justify-center","-space-x-14","perspective-1000"],["class","card-wrapper w-[90px] h-[126px]",4,"ngFor","ngForOf"],[1,"flex-1"],[1,"grid","grid-cols-3","gap-4","px-4","h-56","items-end","mb-8","relative"],["class","relative flex flex-col items-center justify-end h-full transition-all duration-300 rounded-xl hover:bg-white/5 cursor-pointer border border-transparent hover:border-white/10",3,"opacity-50","scale-105","click",4,"ngFor","ngForOf"],["class","absolute bottom-10 left-0 w-full flex justify-center gap-6 animate-fade-in z-50",4,"ngIf"],["class","absolute inset-0 z-50 flex items-center justify-center backdrop-blur-md bg-black/80 animate-fade-in",3,"click",4,"ngIf"],["class","absolute bottom-20 w-full flex flex-col items-center gap-3 px-4 z-40",4,"ngIf"],["class","absolute bottom-4 left-0 w-full flex justify-center z-30",4,"ngIf"],["class","absolute inset-0 z-50 flex items-center justify-center pointer-events-none",4,"ngIf"],["class","absolute bottom-10 w-full flex justify-center z-50",4,"ngIf"],[1,"mt-auto","relative","h-40","flex","items-center","justify-center","z-40","bg-gradient-to-t","from-black/90","via-black/80","to-transparent"],["class","fixed pointer-events-none z-[100] transition-all duration-500 ease-in-out",3,"left","top","flying-target",4,"ngFor","ngForOf"],["class","absolute right-4 bottom-32 bg-yellow-50 text-slate-900 p-4 rounded-sm shadow-2xl rotate-2 w-48 font-mono text-xs border border-slate-300 z-50 animate-fade-up",4,"ngIf"],[1,"text-[10px]","font-bold","text-purple-400","bg-purple-900/20","px-2","py-0.5","rounded","border","border-purple-500/30"],[1,"absolute","inset-0","z-50","flex","flex-col","items-center","justify-center","bg-slate-900/95","backdrop-blur","animate-fade-in"],[1,"text-6xl","animate-bounce","mb-6"],[1,"text-3xl","font-black","text-white","mb-2","tracking-tight"],[1,"text-slate-400","text-sm","mb-8"],[1,"flex","items-center","gap-8","mb-8"],[1,"flex","flex-col","items-center","gap-2"],[1,"w-20","h-20","rounded-full","bg-slate-800","border-4","border-green-500","flex","items-center","justify-center","text-3xl","shadow-lg","relative"],[1,"absolute","-bottom-2","bg-green-600","text-white","text-[10px]","font-bold","px-2","py-0.5","rounded"],[1,"font-bold","text-white"],[1,"text-slate-600","font-bold","text-xl"],[1,"w-20","h-20","rounded-full","flex","items-center","justify-center","text-3xl","shadow-lg","transition-all",3,"ngClass"],["class","absolute -bottom-2 bg-green-600 text-white text-[10px] font-bold px-2 py-0.5 rounded animate-pulse",4,"ngIf"],[1,"font-bold"],["class","px-10 py-4 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-700 disabled:text-slate-500 text-white font-black rounded-xl shadow-xl text-lg uppercase tracking-widest transition-all",3,"disabled","click",4,"ngIf"],["class","text-slate-500 text-xs animate-pulse",4,"ngIf"],[1,"absolute","-bottom-2","bg-green-600","text-white","text-[10px]","font-bold","px-2","py-0.5","rounded","animate-pulse"],[1,"px-10","py-4","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-black","rounded-xl","shadow-xl","text-lg","uppercase","tracking-widest","transition-all",3,"click","disabled"],[1,"text-slate-500","text-xs","animate-pulse"],[1,"absolute","inset-0","bg-amber-500/10","pointer-events-none","animate-pulse"],[1,"text-xs",3,"title"],[1,"mt-2","text-[10px]","bg-gradient-to-r","from-amber-600","to-amber-500","text-white","font-black","px-3","py-1.5","rounded","hover:scale-105","transition-transform","shadow-lg","animate-bounce","border","border-amber-400/50",3,"click"],[1,"px-4","py-2","rounded-xl","border","border-slate-600","bg-slate-900/50","text-slate-400","hover:bg-slate-800","text-xs","font-bold","transition-all","shadow-lg","backdrop-blur-md",3,"click"],[1,"card-wrapper","w-[90px]","h-[126px]"],["class","card-inner w-full h-full relative rounded-xl shadow-2xl bg-slate-100 border border-slate-300 overflow-hidden transform transition-transform hover:-translate-y-4 hover:rotate-1",3,"text-red-600","text-slate-900",4,"ngIf"],["class","flip-container w-full h-full relative",4,"ngIf"],[1,"card-inner","w-full","h-full","relative","rounded-xl","shadow-2xl","bg-slate-100","border","border-slate-300","overflow-hidden","transform","transition-transform","hover:-translate-y-4","hover:rotate-1"],[1,"absolute","top-2","left-2","text-lg","font-black","leading-none"],[1,"text-xl"],[1,"absolute","inset-0","flex","items-center","justify-center","text-6xl","opacity-90"],[1,"flip-container","w-full","h-full","relative"],[1,"flipper","w-full","h-full","relative","transition-transform","duration-700","transform-style-3d"],[1,"front","w-full","h-full","absolute","top-0","left-0","backface-hidden","rounded-xl","border-2","border-white/80","bg-gradient-to-br","from-red-700","to-red-900","shadow-2xl","flex","items-center","justify-center","overflow-hidden"],[1,"absolute","inset-0","pattern-grid","opacity-30"],[1,"w-12","h-12","rounded-full","border-2","border-white/20"],[1,"back","w-full","h-full","absolute","top-0","left-0","backface-hidden","rounded-xl","bg-slate-100","border","border-slate-300","shadow-2xl","flex","items-center","justify-center","rotate-y-180"],[1,"text-6xl"],[1,"absolute","bottom-2","right-2","text-lg","font-black","leading-none","rotate-180"],[1,"relative","flex","flex-col","items-center","justify-end","h-full","transition-all","duration-300","rounded-xl","hover:bg-white/5","cursor-pointer","border","border-transparent","hover:border-white/10",3,"click"],["class","w-20 h-20 rounded-full border-2 border-dashed border-slate-600 flex items-center justify-center text-slate-500 hover:border-slate-400 hover:text-slate-300 transition-colors mb-8 group flex-col gap-1",3,"click",4,"ngIf"],["class","flex flex-col items-center mb-8 animate-fade-in w-full",4,"ngIf"],["class","flex flex-col items-center w-full",4,"ngIf"],["class","absolute -bottom-2 w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-b-[15px] border-b-yellow-400 animate-bounce",4,"ngIf"],[1,"w-20","h-20","rounded-full","border-2","border-dashed","border-slate-600","flex","items-center","justify-center","text-slate-500","hover:border-slate-400","hover:text-slate-300","transition-colors","mb-8","group","flex-col","gap-1",3,"click"],[1,"text-2xl","group-hover:scale-110","transition-transform"],[1,"text-[9px]","font-bold"],[1,"flex","flex-col","items-center","mb-8","animate-fade-in","w-full"],[1,"text-[10px]","font-bold","uppercase","text-slate-500","mb-1","flex","items-center","gap-1"],["class","text-sm",4,"ngIf"],["class","text-xs",4,"ngIf"],[1,"relative","group"],[1,"w-16","h-16","rounded-full","border-4","border-dashed","border-amber-500/30","bg-amber-900/20","flex","items-center","justify-center","animate-pulse-slow","group-hover:border-green-500/50","transition-colors"],[1,"absolute","inset-0","flex","items-center","justify-center","font-black","text-amber-400","text-sm","lg:text-lg","drop-shadow-md"],[1,"absolute","-top-8","left-1/2","-translate-x-1/2","flex","gap-1","opacity-0","group-hover:opacity-100","transition-opacity"],["class","bg-red-600/80 hover:bg-red-500 text-white text-[10px] px-2 py-1 rounded shadow",3,"click",4,"ngIf"],["class","text-[9px] text-slate-600 mt-1 uppercase tracking-wider",4,"ngIf"],[1,"text-sm"],[1,"text-xs"],[1,"bg-red-600/80","hover:bg-red-500","text-white","text-[10px]","px-2","py-1","rounded","shadow",3,"click"],[1,"text-[9px]","text-slate-600","mt-1","uppercase","tracking-wider"],[1,"flex","flex-col","items-center","w-full"],["class","absolute -top-10 z-50 flex flex-col items-center pointer-events-none",4,"ngIf"],[1,"flex","justify-center","-space-x-10","mb-2","z-20","perspective-1000","min-h-[100px]"],["class","card-wrapper w-[70px] h-[98px]",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-2","z-10"],[1,"text-[10px]","font-bold","uppercase","text-slate-500"],[1,"bg-blue-600","text-white","text-[10px]","font-bold","px-2","py-0.5","rounded","shadow","border","border-blue-400"],[1,"absolute","-top-10","z-50","flex","flex-col","items-center","pointer-events-none"],[1,"text-2xl","font-black","text-white","stroke-text","shadow-xl"],[1,"card-wrapper","w-[70px]","h-[98px]"],[1,"card-inner","w-full","h-full","relative","rounded-lg","shadow-md","bg-slate-100","border","border-slate-300","overflow-hidden"],[1,"absolute","top-1","left-1","text-xs","font-black","leading-none"],[1,"absolute","inset-0","flex","items-center","justify-center","text-4xl","opacity-90"],[1,"absolute","-bottom-2","w-0","h-0","border-l-[10px]","border-l-transparent","border-r-[10px]","border-r-transparent","border-b-[15px]","border-b-yellow-400","animate-bounce"],[1,"absolute","bottom-10","left-0","w-full","flex","justify-center","gap-6","animate-fade-in","z-50"],[1,"action-btn","bg-slate-800","hover:bg-slate-700","text-white","border-slate-600",3,"click"],[1,"text-2xl","mb-1"],[1,"text-[10px]","font-black","uppercase","tracking-wider"],[1,"action-btn","bg-emerald-600","hover:bg-emerald-500","text-white","border-emerald-400","shadow-[0_0_20px_rgba(16,185,129,0.4)]",3,"click"],["class","action-btn bg-amber-500 hover:bg-amber-400 text-amber-950 border-amber-300",3,"click",4,"ngIf"],[1,"action-btn","bg-amber-500","hover:bg-amber-400","text-amber-950","border-amber-300",3,"click"],[1,"absolute","inset-0","z-50","flex","items-center","justify-center","backdrop-blur-md","bg-black/80","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-md","rounded-2xl","shadow-2xl","overflow-hidden",3,"click"],[1,"p-4","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-950"],[1,"font-black","text-white","text-lg"],[1,"text-slate-400","hover:text-white",3,"click"],[1,"max-h-96","overflow-y-auto","p-4","custom-scroll"],["class","text-center text-slate-500 py-8",4,"ngIf"],["class","flex items-center justify-between p-3 rounded-xl bg-slate-800 hover:bg-purple-900/30 border border-slate-700 hover:border-purple-500 cursor-pointer transition-all mb-2 group",3,"click",4,"ngFor","ngForOf"],[1,"text-center","text-slate-500","py-8"],[1,"flex","items-center","justify-between","p-3","rounded-xl","bg-slate-800","hover:bg-purple-900/30","border","border-slate-700","hover:border-purple-500","cursor-pointer","transition-all","mb-2","group",3,"click"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-slate-700","flex","items-center","justify-center","text-xl","shadow-inner"],[1,"font-bold","text-white","group-hover:text-purple-300"],[1,"text-[10px]","text-slate-400"],[1,"bg-purple-600","text-white","text-xs","font-bold","px-3","py-1.5","rounded","hover:bg-purple-500","shadow-lg"],[1,"absolute","bottom-20","w-full","flex","flex-col","items-center","gap-3","px-4","z-40"],[1,"flex","gap-3","justify-center","w-full","overflow-x-auto","pb-2","scrollbar-hide"],["class","chip-btn group relative w-14 h-14 lg:w-16 lg:h-16 shrink-0 rounded-full transition-transform active:scale-90 hover:-translate-y-2 duration-200 disabled:opacity-30 disabled:cursor-not-allowed",3,"ring-4","ring-white","disabled","ngClass","click",4,"ngFor","ngForOf"],[1,"flex","gap-4","w-full","justify-center"],[1,"px-6","py-2","bg-red-900/50","border","border-red-500/50","hover:bg-red-800","text-red-200","font-bold","uppercase","text-xs","rounded-lg","transition-colors",3,"click"],[1,"px-12","py-3","bg-gradient-to-r","from-green-600","to-emerald-500","text-white","font-black","uppercase","text-sm","rounded-xl","shadow-lg","hover:brightness-110","disabled:opacity-30","disabled:cursor-not-allowed","transition-all","active:scale-95","border-b-4","border-green-800","active:border-b-0","active:translate-y-1",3,"click","disabled"],[1,"chip-btn","group","relative","w-14","h-14","lg:w-16","lg:h-16","shrink-0","rounded-full","transition-transform","active:scale-90","hover:-translate-y-2","duration-200","disabled:opacity-30","disabled:cursor-not-allowed",3,"click","disabled","ngClass"],[1,"absolute","inset-0","rounded-full","translate-y-1","brightness-75",3,"ngClass"],[1,"absolute","inset-0","rounded-full","flex","items-center","justify-center","border-[3px]","border-dashed","border-white/40","shadow-inner",3,"ngClass"],[1,"font-black","text-[10px]","lg:text-xs","drop-shadow-md","z-10"],[1,"absolute","bottom-4","left-0","w-full","flex","justify-center","z-30"],[1,"text-[10px]","text-purple-400","hover:text-purple-300","font-bold","uppercase","tracking-wider","flex","items-center","gap-2",3,"click"],[1,"absolute","inset-0","z-50","flex","items-center","justify-center","pointer-events-none"],[1,"bg-black/80","backdrop-blur-xl","border","border-amber-500/30","p-10","rounded-3xl","shadow-2xl","flex","flex-col","items-center","gap-4","pointer-events-auto","max-w-lg","w-full","mx-4"],[1,"text-center"],[1,"text-amber-400","text-sm","font-bold","uppercase","tracking-[0.5em]","mb-2"],[1,"text-7xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-b","from-yellow-300","via-amber-500","to-amber-700","filter","drop-shadow-[0_5px_5px_rgba(0,0,0,0.5)]"],[1,"w-full","h-px","bg-gradient-to-r","from-transparent","via-amber-500/50","to-transparent","my-2"],[1,"flex","flex-col","items-center","gap-1"],[1,"text-slate-400","text-xs","uppercase","tracking-widest"],[1,"text-5xl","font-mono","font-black","text-green-400","text-shadow-glow"],[1,"mt-6","w-full","py-4","bg-white","text-black","font-black","text-xl","rounded-xl","hover:scale-105","transition-transform","shadow-xl","active:scale-95","uppercase","tracking-wider",3,"click"],[1,"absolute","bottom-10","w-full","flex","justify-center","z-50"],[1,"px-10","py-3","bg-white","text-slate-900","font-black","text-lg","rounded-xl","hover:scale-105","transition-transform","shadow-xl","active:scale-95",3,"click"],[1,"fixed","pointer-events-none","z-[100]","transition-all","duration-500","ease-in-out"],[1,"w-12","h-12","rounded-full","shadow-2xl","animate-spin-slow",3,"ngClass"],[1,"w-full","h-full","rounded-full","border-2","border-dashed","border-white/30","flex","items-center","justify-center","font-black","text-[10px]"],[1,"absolute","right-4","bottom-32","bg-yellow-50","text-slate-900","p-4","rounded-sm","shadow-2xl","rotate-2","w-48","font-mono","text-xs","border","border-slate-300","z-50","animate-fade-up"],[1,"font-bold","border-b","border-slate-400","pb-1","mb-2","flex","justify-between"],[1,"cursor-pointer",3,"click"],[1,"space-y-1","max-h-32","overflow-y-auto"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"border-t","border-slate-400","pt-1","mt-2","font-bold","flex","justify-between"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),le(5,"span",5),y(6),v()(),H(7,KJ,2,1,"span",6),v()(),H(8,ZJ,25,9,"div",7),m(9,"div",8),le(10,"div",9),m(11,"div",10),y(12,"JEUB2"),v()(),m(13,"div",11),le(14,"div",12),v(),m(15,"div",13),le(16,"div",14),m(17,"div",15),y(18,"\u{1F9E4}"),v()(),m(19,"div",16)(20,"div",17),H(21,XJ,1,0,"div",18),m(22,"div",19)(23,"span",20),y(24),v(),m(25,"div",21),H(26,eZ,2,2,"span",22),v()(),m(27,"span",23),y(28),oe(29,"number"),v(),H(30,tZ,2,0,"button",24),v(),m(31,"div",3),H(32,nZ,2,0,"button",25),m(33,"button",26),j("click",function(){return r.toggleStats()}),y(34,"\u{1F4DD}"),v()()(),m(35,"div",27)(36,"div",28)(37,"div",29)(38,"span",30),y(39,"Croupier"),v(),m(40,"span",31),y(41),v()(),m(42,"div",32),H(43,sZ,3,3,"div",33),v()(),le(44,"div",34),m(45,"div",35),H(46,gZ,5,9,"div",36),v()(),H(47,_Z,12,1,"div",37)(48,bZ,10,2,"div",38)(49,IZ,8,3,"div",39)(50,SZ,3,0,"div",40)(51,CZ,16,5,"div",41)(52,TZ,3,0,"div",42),m(53,"div",43),H(54,DZ,5,11,"div",44),v(),H(55,xZ,13,6,"div",45),v()),t&2&&(Re("bg-[#0f172a]",!r.isSpotlightMode)("bg-[#05080f]",r.isSpotlightMode),b(6),J(" ",r.connectionStatus," "),b(),R("ngIf",r.isMultiplayer),b(),R("ngIf",r.isMultiplayer&&(r.activeGame==null?null:r.activeGame.phase)==="LOBBY"),b(5),Re("opacity-0",!r.isSpotlightMode)("opacity-100",r.isSpotlightMode),b(2),Ct("transform",r.dealerHandTransform),b(6),R("ngIf",r.isOwner),b(3),Z(r.isOwner?"\u{1F451} PROPRI\xC9TAIRE":"Votre Solde"),b(2),R("ngForOf",r.badges),b(2),J("",Ae(29,35,r.currentMoney,"1.0-0")," \u20AC"),b(2),R("ngIf",r.sessionWinnings>1e6&&!r.isOwner),b(2),R("ngIf",!r.isMultiplayer),b(3),Re("blur-sm",r.globalStatus==="RESULT"&&r.winAmount>0),b(2),Re("opacity-0",r.dealerHand.length===0),b(3),R("@scorePop",r.dealerScore),b(),J(" ",r.dealerScore," "),b(2),R("ngForOf",r.dealerHand),b(3),R("ngForOf",r.seats),b(),R("ngIf",r.showActionButtons),b(),R("ngIf",r.isLobbyOpen),b(),R("ngIf",r.globalStatus==="BETTING"&&!r.isMultiplayer),b(),R("ngIf",!r.isMultiplayer&&r.globalStatus==="BETTING"),b(),R("ngIf",r.globalStatus==="RESULT"&&r.winAmount>0),b(),R("ngIf",r.globalStatus==="RESULT"&&r.winAmount===0&&!r.isMultiplayer),b(2),R("ngForOf",r.flyingChips),b(),R("ngIf",r.showStats))},dependencies:[Ti,rr,Bn,Cr],styles:[".table-mat[_ngcontent-%COMP%]{background:radial-gradient(circle at 50% 30%,#1e293b,#020617)}.pattern-grid[_ngcontent-%COMP%]{background-image:radial-gradient(#fff 1px,transparent 1px);background-size:10px 10px}.perspective-1000[_ngcontent-%COMP%]{perspective:1000px}.transform-style-3d[_ngcontent-%COMP%]{transform-style:preserve-3d}.backface-hidden[_ngcontent-%COMP%]{backface-visibility:hidden}.rotate-y-180[_ngcontent-%COMP%], .flipper.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.action-btn[_ngcontent-%COMP%]{display:flex;height:6rem;width:6rem;cursor:pointer;flex-direction:column;align-items:center;justify-content:center;border-radius:1rem;border-bottom-width:4px;--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.action-btn[_ngcontent-%COMP%]:active{--tw-translate-y: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-bottom-width:0px}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.stroke-text[_ngcontent-%COMP%]{-webkit-text-stroke:1px rgba(0,0,0,.5)}.animate-marquee[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_marquee 20s linear infinite}@keyframes _ngcontent-%COMP%_marquee{0%{transform:translate(100%)}to{transform:translate(-100%)}}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.text-shadow-glow[_ngcontent-%COMP%]{text-shadow:0 0 20px rgba(74,222,128,.5)}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.animate-fade-in-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"],data:{animation:[Ro("chipsIn",[Po(":enter",[pb(".chip-btn",[rn({opacity:0,transform:"translateY(50px) scale(0.5)"}),mb(50,[ko("400ms cubic-bezier(0.23, 1, 0.32, 1)",rn({opacity:1,transform:"translateY(0) scale(1)"}))])])])]),Ro("cardDeal",[Po(":enter",[rn({opacity:0,transform:"translate(200px, -200px) rotate(45deg) scale(0.5)"}),ko("500ms cubic-bezier(0.175, 0.885, 0.32, 1.1)",rn({opacity:1,transform:"translate(0, 0) rotate(0) scale(1)"}))])]),Ro("cardFlip",[rm("face-down",rn({transform:"rotateY(0)"})),rm("face-up",rn({transform:"rotateY(180deg)"})),Po("face-down => face-up",[ko("600ms cubic-bezier(0.455, 0.03, 0.515, 0.955)")])]),Ro("scorePop",[Po(":increment",[ko("200ms ease-in-out",fb([rn({transform:"scale(1)",offset:0}),rn({transform:"scale(1.5)",offset:.5}),rn({transform:"scale(1)",offset:1})]))])]),Ro("modalPop",[Po(":enter",[rn({opacity:0,transform:"scale(0.8) translateY(20px)"}),ko("0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)",rn({opacity:1,transform:"scale(1) translateY(0)"}))])])]},changeDetection:0})};var PZ=["hiddenInput"],lU=(n,e)=>[n,e],uU=(n,e,t)=>[n,e,t];function NZ(n,e){if(n&1){let t=ae();m(0,"button",22),j("click",function(i){G(t);let s=M(2);return i.stopPropagation(),z(s.drinkCoffee())}),y(1," \u2615 PAUSE "),v()}}function MZ(n,e){n&1&&(m(0,"div",23),y(1,"GEL\xC9"),v())}function OZ(n,e){if(n&1&&(m(0,"div",8)(1,"div",18)(2,"span",19),y(3),oe(4,"number"),v()(),H(5,NZ,2,0,"button",20)(6,MZ,2,0,"div",21),v()),n&2){let t=M();b(),R("ngClass",Mp(8,lU,t.activeTheme.borderClass,t.activeTheme.bgClass)),b(),R("ngClass",t.activeTheme.accentClass),b(),J("",Ae(4,5,t.currentWpm,"1.0-0")," WPM"),b(2),R("ngIf",t.coffeeLevel>0&&!t.isCoffeeActive&&t.coffeeAvailable),b(),R("ngIf",t.isCoffeeActive)}}function FZ(n,e){n&1&&(m(0,"span",24),le(1,"span",25)(2,"span",26),v())}function LZ(n,e){if(n&1&&(m(0,"div",27),y(1),v()),n&2){let t=e.$implicit,r=M();R("ngClass",Op(2,uU,r.activeTheme.borderClass,r.activeTheme.accentClass,r.activeTheme.bgClass)),b(),J(" ",t," ")}}function VZ(n,e){if(n&1){let t=ae();m(0,"div",34),j("click",function(i){let s=G(t).$implicit,o=M(2);return i.stopPropagation(),z(o.startMission(s))}),m(1,"div",35)(2,"span",36),y(3),v(),m(4,"span",37),y(5),v()(),m(6,"h3",38),y(7),v(),m(8,"div",39)(9,"div",40)(10,"span",41),y(11,"Gain"),v(),m(12,"span",42),y(13),oe(14,"number"),v()(),m(15,"div",43)(16,"span",41),y(17,"Temps"),v(),m(18,"span",44),y(19),v()()()()}if(n&2){let t=e.$implicit,r=M(2);R("ngClass",Op(12,uU,r.activeTheme.borderClass,r.activeTheme.bgClass,r.getMissionClass(t.difficulty))),b(3),Z(r.getIcon(t.difficulty)),b(),R("ngClass",r.getDifficultyClass(t.difficulty)),b(),Z(t.difficulty),b(2),Z(t.title),b(),R("ngClass",r.activeTheme.borderClass),b(4),R("ngClass",r.activeTheme.accentClass),b(),J("",Ae(14,9,r.calculateReward(t),"1.0-0")," \u20AC"),b(6),J("",t.timeLimit,"s")}}function UZ(n,e){if(n&1&&(m(0,"div",28)(1,"div",29)(2,"h2",30),y(3,"\u{1F4DC} Vos Contrats"),v(),m(4,"p",31),y(5,"Vos employ\xE9s g\xE8rent leurs propres projets en autonomie."),v(),m(6,"div",32),H(7,VZ,20,16,"div",33),v()()()),n&2){let t=M();b(7),R("ngForOf",t.availableMissions)}}function BZ(n,e){if(n&1&&le(0,"span",62),n&2){let t=M(4);R("ngClass",t.activeTheme.cursorClass)}}function jZ(n,e){if(n&1&&(m(0,"span"),H(1,BZ,1,1,"span",60),m(2,"span",61),y(3),v()()),n&2){let t=e.$implicit,r=M(3);b(),R("ngIf",t.index===r.userInput.length),b(),R("ngClass",r.getCharClass(t.index,t.value)),b(),Z(t.index<r.userInput.length?r.userInput[t.index]:t.value)}}function $Z(n,e){if(n&1&&(m(0,"span",58),H(1,jZ,4,3,"span",59),v()),n&2){let t=e.$implicit;Re("whitespace-nowrap",!t.isSpace),b(),R("ngForOf",t.chars)}}function HZ(n,e){n&1&&(m(0,"div",63),y(1,"CORRIGEZ !"),v())}function GZ(n,e){if(n&1){let t=ae();m(0,"div",45),le(1,"div",46),m(2,"div",47,0)(4,"div",48)(5,"div",49),y(6),v(),m(7,"div",50),y(8,"COMBO"),v()(),m(9,"div",51)(10,"div",52),H(11,$Z,2,3,"span",53),v(),H(12,HZ,2,0,"div",54),v(),m(13,"div",55)(14,"div",56),y(15),oe(16,"number"),v()(),m(17,"input",57,1),j("input",function(i){G(t);let s=M();return z(s.onInput(i))})("blur",function(){G(t);let i=M();return z(i.focusInput())}),v()()()}if(n&2){let t=M();b(),R("ngClass",t.activeTheme.bgClass),b(3),Re("opacity-0",t.currentCombo<2),b(),Re("from-amber-400",t.currentCombo>=50),b(),J("x",t.currentCombo),b(3),Re("shake-anim",t.hasError),b(2),R("ngForOf",t.currentDisplayTokens),b(),R("ngIf",t.isFinishedButWrong),b(2),Re("text-red-500",t.timeLeft<=5),b(),J("",Ae(16,13,t.timeLeft,"1.1-1"),"s")}}function zZ(n,e){if(n&1&&(m(0,"div",84),y(1),v()),n&2){let t=M(2);b(),J("",t.TEAM_BUILDING_COST,"\u20AC \u2022 30s \u2022 Boost x2.5")}}function qZ(n,e){n&1&&(m(0,"div",85)(1,"div",86),y(2,"\u{1F47B}"),v(),m(3,"div"),y(4,"Aucun employ\xE9."),v()())}function WZ(n,e){n&1&&(m(0,"div",100),y(1,"En mission..."),v())}function KZ(n,e){n&1&&(m(0,"div",101),y(1,"Libre"),v())}function YZ(n,e){n&1&&(m(0,"div",102),y(1,"PAUSE"),v())}function QZ(n,e){n&1&&(m(0,"div",103),y(1,"ACTIF"),v())}function JZ(n,e){if(n&1&&(m(0,"div",104),le(1,"div",105),v()),n&2){let t=e.ngIf,r=M(3);b(),Ct("width",t.targetText&&t.targetText.length>0?t.typedText.length/t.targetText.length*100:0,"%"),R("ngClass",r.isTeamBuildingActive?"bg-orange-500":"bg-blue-500")}}function ZZ(n,e){if(n&1){let t=ae();m(0,"div",87)(1,"div",88)(2,"div",89)(3,"span",36),y(4),v(),m(5,"div")(6,"div",90),y(7),v(),H(8,WZ,2,0,"div",91)(9,KZ,2,0,"div",92),v()(),H(10,YZ,2,0,"div",93)(11,QZ,2,0,"div",94),v(),H(12,JZ,2,3,"div",95),m(13,"div",96)(14,"button",97),j("click",function(){let i=G(t).$implicit,s=M(2);return z(s.watchEmployee(i))}),y(15,"\u{1F441}\uFE0F VOIR \xC9CRAN"),v(),m(16,"button",98),j("click",function(){let i=G(t).$implicit,s=M(2);return z(s.trainEmployee(i))}),m(17,"span"),y(18,"FORMATION"),v(),m(19,"span"),y(20),v()(),m(21,"button",99),j("click",function(){let i=G(t).$implicit,s=M(2);return z(s.togglePause(i))}),y(22),v()()()}if(n&2){let t,r,i=e.$implicit,s=e.index,o=M(2);Re("opacity-50",i.isPaused),b(4),Z(i.role==="DEV_JUNIOR"?"\u{1F468}\u200D\u{1F4BB}":"\u{1F9D9}\u200D\u2642\uFE0F"),b(3),J("Dev #",s+1),b(),R("ngIf",(t=o.getWorkerState(i.id))==null?null:t.currentMission),b(),R("ngIf",!((r=o.getWorkerState(i.id))!=null&&r.currentMission)),b(),R("ngIf",i.isPaused),b(),R("ngIf",!i.isPaused),b(),R("ngIf",o.getWorkerState(i.id)),b(4),R("disabled",o.currentMoney<o.getTrainCost(i)),b(4),J("",o.getTrainCost(i),"\u20AC"),b(2),Z(i.isPaused?"REPRENDRE":"METTRE EN PAUSE")}}function XZ(n,e){if(n&1){let t=ae();m(0,"div",64),j("click",function(i){return G(t),z(i.stopPropagation())}),m(1,"div",65)(2,"div",66)(3,"h3",67),y(4,"\u{1F465} GESTION \xC9QUIPE"),v(),m(5,"button",68),j("click",function(){G(t);let i=M();return z(i.toggleStaff())}),y(6,"\u2715"),v()(),m(7,"div",69)(8,"div",70)(9,"button",71),j("click",function(){G(t);let i=M();return z(i.startTeamBuilding())}),m(10,"span",36),y(11,"\u{1F355}"),v(),m(12,"div",72)(13,"div"),y(14),v(),H(15,zZ,2,1,"div",73),v()(),m(16,"div",74)(17,"div",75),y(18,"Stagiaire"),v(),m(19,"div",76),y(20,"Petits contrats."),v(),m(21,"button",77),j("click",function(){G(t);let i=M();return z(i.hire(0))}),y(22),v()(),m(23,"div",78)(24,"div",75),y(25,"Senior"),v(),m(26,"div",76),y(27,"Gros contrats."),v(),m(28,"button",79),j("click",function(){G(t);let i=M();return z(i.hire(1))}),y(29),v()()(),m(30,"div",80),H(31,qZ,5,0,"div",81),m(32,"div",82),H(33,ZZ,23,12,"div",83),v()()()()()}if(n&2){let t=M();b(9),R("disabled",t.currentMoney<t.TEAM_BUILDING_COST||t.isTeamBuildingActive)("ngClass",t.isTeamBuildingActive?"bg-green-600 text-white animate-pulse":"bg-gradient-to-r from-orange-600 to-red-600 text-white hover:brightness-110"),b(5),Z(t.isTeamBuildingActive?"PARTY EN COURS !":"PIZZA PARTY"),b(),R("ngIf",!t.isTeamBuildingActive),b(6),R("disabled",!t.canHire(0)),b(),J("",t.getHireCost(0)," \u20AC"),b(6),R("disabled",!t.canHire(1)),b(),J("",t.getHireCost(1)," \u20AC"),b(2),R("ngIf",t.employees.length===0),b(2),R("ngForOf",t.employees)}}function eX(n,e){if(n&1&&(m(0,"div",118)(1,"span"),y(2,"Bonus \xC9cran"),v(),m(3,"span"),y(4),oe(5,"number"),v()()),n&2){let t=M(3);b(4),J("+",Ae(5,1,t.getScreenBonus((t.activeMission==null?null:t.activeMission.reward)||0),"1.0-0")," \u20AC")}}function tX(n,e){if(n&1&&(m(0,"div",112)(1,"div",96)(2,"div",113)(3,"span"),y(4,"Base"),v(),m(5,"span"),y(6),v()(),m(7,"div",114)(8,"span"),y(9,"Combo"),v(),m(10,"span"),y(11),v()(),H(12,eX,6,4,"div",115),le(13,"div",116),m(14,"div",117)(15,"span"),y(16,"TOTAL"),v(),m(17,"span"),y(18),oe(19,"number"),v()()()()),n&2){let t=M(2);b(6),J("",t.activeMission==null?null:t.activeMission.reward," \u20AC"),b(5),J("+",t.maxComboReached," \u20AC"),b(),R("ngIf",t.screenLevel>0),b(6),J("+",Ae(19,4,t.lastReward,"1.0-0")," \u20AC")}}function nX(n,e){if(n&1){let t=ae();m(0,"div",106),j("click",function(i){return G(t),z(i.stopPropagation())}),m(1,"div",107)(2,"div",108),y(3),v(),m(4,"h3",109),y(5),v(),H(6,tX,20,7,"div",110),m(7,"button",111),j("click",function(){G(t);let i=M();return z(i.closeResult())}),y(8,"Continuer \u27A1\uFE0F"),v()()()}if(n&2){let t=M();b(3),Z(t.missionResult==="SUCCESS"?"\u{1F3C6}":"\u{1F480}"),b(),Re("text-green-400",t.missionResult==="SUCCESS")("text-red-400",t.missionResult==="FAIL"),b(),Z(t.missionResult==="SUCCESS"?"CONTRAT REMPLI":"\xC9CHEC"),b(),R("ngIf",t.missionResult==="SUCCESS")}}var Zv=class n{constructor(e,t,r){this.gameStateService=e;this.soundService=t;this.cdr=r}hiddenInput;availableMissions=[];activeMission=null;currentLineIndex=0;currentTargetLine="";currentDisplayTokens=[];userInput="";timeLeft=0;timerInterval;missionResult=null;lastReward=0;hasError=!1;currentCombo=0;maxComboReached=0;startTime=0;endTime=0;totalCharsTyped=0;isShopOpen=!1;isStaffOpen=!1;chairLevel=0;screenLevel=0;coffeeLevel=0;pcLevel=0;isCoffeeActive=!1;coffeeAvailable=!0;currentMoney=0;contractsCompleted=0;employees=[];workerStates={};workerInterval;notifications=[];watchedEmployee=null;activeTheme=ch[0];isTeamBuildingActive=!1;teamBuildingEndTime=0;TEAM_BUILDING_COST=2e3;TEAM_BUILDING_DURATION=3e4;WORDS_EASY=["chat","chien","ami","pain","eau","mer","ciel","mur","sac","bus","lit","bol","the","sel","coq","or","loi","nez","vis","rue","pin","pot","jeu","gaz","main","pied","joie","papa","cafe"];WORDS_HARD=["voiture","maison","enfant","ecole","manger","dormir","prendre","parler","soleil","jardin","fleur","oiseau","pomme","table","chaise","livre","crayon","porte","fenetre","arbres","nuage","pluie","neige","route","ville","famille","musique","bonheur","sourire","liberte","courage","vitesse"];WORDS_HACKER=["mainframe","firewall","bypass","encrypt","socket","buffer","overflow","inject","root","sudo","access","denied","proxy","daemon","kernel","panic","matrix","cyber","secure","token"];get isFinishedButWrong(){return this.userInput.length===this.currentTargetLine.length&&this.userInput!==this.currentTargetLine}get currentWpm(){if(!this.startTime)return 0;let t=((this.endTime||Date.now())-this.startTime)/6e4;return t<.001?0:Math.floor(this.totalCharsTyped/5/t)}ngOnInit(){this.gameStateService.gameState$.subscribe(e=>{if(this.currentMoney=e.money,e.freelanceUpgrades){this.chairLevel=e.freelanceUpgrades.chairLevel,this.screenLevel=e.freelanceUpgrades.screenLevel,this.coffeeLevel=e.freelanceUpgrades.coffeeLevel,this.pcLevel=e.freelanceUpgrades.pcLevel,this.contractsCompleted=e.freelanceUpgrades.contractsCompleted||0;let r=e.freelanceUpgrades.activeThemeId,i=ch.find(s=>s.id===r);i&&(this.activeTheme=i)}let t=e.companies.find(r=>r.id==="2");t&&(this.employees=t.employees,this.employees.forEach(r=>{this.workerStates[r.id]||(this.workerStates[r.id]={currentMission:null,targetText:"",typedText:"",progress:0,status:"IDLE",cooldown:0})})),this.cdr.markForCheck()}),this.generateMissions(),this.startWorkerSimulation()}ngOnDestroy(){this.stopTimer(),this.stopWatching(),this.workerInterval&&clearInterval(this.workerInterval)}focusInput(){!this.isShopOpen&&!this.isStaffOpen&&!this.watchedEmployee&&!this.missionResult&&this.activeMission&&setTimeout(()=>{this.hiddenInput&&this.hiddenInput.nativeElement.focus()},0)}toggleShop(){this.isShopOpen=!this.isShopOpen,this.isStaffOpen=!1,this.isShopOpen||this.focusInput(),this.cdr.markForCheck()}toggleStaff(){this.isStaffOpen=!this.isStaffOpen,this.isShopOpen=!1,this.cdr.markForCheck()}startTeamBuilding(){this.currentMoney>=this.TEAM_BUILDING_COST&&!this.isTeamBuildingActive&&(this.gameStateService.addMoney(-this.TEAM_BUILDING_COST),this.isTeamBuildingActive=!0,this.teamBuildingEndTime=Date.now()+this.TEAM_BUILDING_DURATION,this.soundService.playSuccess(),this.showNotification("\u{1F355} PIZZA PARTY ACTIV\xC9E ! (+150% Vitesse)"),setTimeout(()=>{this.isTeamBuildingActive=!1,this.showNotification("Fin de la Pizza Party..."),this.cdr.markForCheck()},this.TEAM_BUILDING_DURATION))}getCost(e){return{CHAIR:2e3,SCREEN:5e3,COFFEE:1500,PC:2e4}[e]||0}canBuy(e){return this.currentMoney>=this.getCost(e)}buyItem(e){this.gameStateService.buySetupUpgrade(e,this.getCost(e))}getHireCost(e){let t=e===0?"DEV_JUNIOR":"DEV_SENIOR";return this.gameStateService.getNextHireCost("2",t)}canHire(e){return this.currentMoney>=this.getHireCost(e)}hire(e){let t=e===0?"DEV_JUNIOR":"DEV_SENIOR";this.gameStateService.hireEmployee("2",t)}getTrainCost(e){return Math.floor(500*Math.pow(1.5,e.efficiency))}trainEmployee(e){this.gameStateService.upgradeEmployeeSetup("2",e.id,this.getTrainCost(e))}togglePause(e){this.gameStateService.toggleEmployeePause("2",e.id)}drinkCoffee(){this.isCoffeeActive||!this.coffeeAvailable||(this.isCoffeeActive=!0,this.coffeeAvailable=!1,this.soundService.playPop(),setTimeout(()=>{this.isCoffeeActive=!1,this.cdr.markForCheck()},5e3))}startWorkerSimulation(){this.workerInterval&&clearInterval(this.workerInterval),this.workerInterval=setInterval(()=>{this.employees.forEach(e=>{if(e.isPaused)return;let t=this.workerStates[e.id];if(t){if(t.status==="IDLE")if(t.cooldown>0)t.cooldown-=this.isTeamBuildingActive?.3:.1;else{let r=e.role==="DEV_JUNIOR"?Math.random()>.7?"MEDIUM":"EASY":"HARD",i=this.createMission(0,r);t.currentMission=i,t.targetText=i.lines[0],t.typedText="",t.status="WORKING"}else if(t.status==="WORKING"&&t.targetText){let r=e.role==="DEV_SENIOR"?.3:.1;if(r+=e.efficiency*.05,this.isTeamBuildingActive&&(r*=2.5),Math.random()<r&&(t.typedText+=t.targetText[t.typedText.length],t.typedText.length>=t.targetText.length)){let i=Math.floor(t.currentMission.reward*.2);this.gameStateService.addMoney(i),this.showNotification(`+${i}\u20AC (${e.role==="DEV_JUNIOR"?"Jr":"Sr"})`),t.status="IDLE",t.currentMission=null,t.cooldown=3}}}}),this.cdr.markForCheck()},100)}getWorkerState(e){return this.workerStates[e]}showNotification(e){this.notifications.push(e),setTimeout(()=>{this.notifications.shift(),this.cdr.markForCheck()},2e3)}watchEmployee(e){this.watchedEmployee=e,this.isStaffOpen=!1,this.cdr.markForCheck()}stopWatching(){this.watchedEmployee=null,this.isStaffOpen=!0,this.cdr.markForCheck()}generateMissions(){this.availableMissions=[];let e=.05+this.pcLevel*.02,t=this.pcLevel>0?.1:0;for(let r=0;r<3;r++){let i=Math.random();if(i<e)this.availableMissions.push(this.createMission(r,"BOSS"));else if(i<e+t)this.availableMissions.push(this.createMission(r,"HACKER"));else{let s=Math.random()>.6?"HARD":Math.random()>.3?"MEDIUM":"EASY";this.availableMissions.push(this.createMission(r,s))}}}createMission(e,t){let r=30,i=100,s=2,o=5;return t==="BOSS"?(r=45,i=5e3,s=5,o=10):t==="HACKER"?(r=20,i=2e3,s=4,o=6):t==="EASY"?(r=20,i=150,s=2,o=4):t==="MEDIUM"?(r=35,i=400,s=3,o=6):(r=50,i=1e3,s=4,o=8),{id:e,title:t==="BOSS"?"URGENCE":t==="HACKER"?"HACKING":"Mission",description:t==="HACKER"?"Piratage...":"Tapez vite.",difficulty:t,reward:i,timeLimit:r,lines:this.generateRandomLines(s,o,t)}}generateRandomLines(e,t,r){let i=[],s=r==="HACKER"?this.WORDS_HACKER:r==="HARD"||r==="BOSS"?this.WORDS_HARD:this.WORDS_EASY;for(let o=0;o<e;o++){let a=[];for(let c=0;c<t;c++)a.push(s[Math.floor(Math.random()*s.length)]);i.push(a.join(" "))}return i}prepareDisplayTokens(e){let t=[],r=0;return e.split(/(\s+)/).forEach(s=>{if(s.length===0)return;let o=[];for(let a=0;a<s.length;a++)o.push({value:s[a],index:r}),r++;t.push({isSpace:/^\s+$/.test(s),chars:o})}),t}startMission(e){this.activeMission=e,this.currentLineIndex=0,this.loadLine(e.lines[0]),this.userInput="",this.timeLeft=e.timeLimit,this.missionResult=null,this.currentCombo=0,this.maxComboReached=0,this.totalCharsTyped=0,this.startTime=Date.now(),this.endTime=0,this.isCoffeeActive=!1,this.coffeeAvailable=!0,this.startTimer(),this.soundService.playPop(),setTimeout(()=>this.focusInput(),100),this.cdr.markForCheck()}loadLine(e){this.currentTargetLine=e,this.currentDisplayTokens=this.prepareDisplayTokens(e),this.userInput="",this.hiddenInput&&(this.hiddenInput.nativeElement.value="")}startTimer(){this.stopTimer();let e=Date.now();this.timerInterval=setInterval(()=>{if(this.isCoffeeActive){e=Date.now();return}let t=Date.now(),r=(t-e)/1e3;e=t;let i=1-this.chairLevel*.2;this.timeLeft-=r*i,this.timeLeft<=0&&(this.timeLeft=0,this.endMission(!1)),this.cdr.markForCheck()},100)}stopTimer(){this.timerInterval&&clearInterval(this.timerInterval)}handleKeyboard(e){!this.activeMission||this.missionResult||this.isShopOpen||this.isStaffOpen||this.watchedEmployee||this.focusInput()}onInput(e){if(!this.activeMission||this.missionResult)return;let t=e.target.value;t.length>this.currentTargetLine.length?(this.userInput=t.slice(0,this.currentTargetLine.length),e.target.value=this.userInput):this.userInput=t,this.userInput.length>this.totalCharsTyped&&(this.userInput[this.userInput.length-1]===" "?this.soundService.playSpace():this.soundService.playRandomKey(),this.checkInput()),this.totalCharsTyped=this.userInput.length,this.cdr.markForCheck()}checkInput(){let e=this.userInput.length-1;e<0||(this.userInput[e]===this.currentTargetLine[e]?(this.currentCombo++,this.currentCombo>this.maxComboReached&&(this.maxComboReached=this.currentCombo)):(this.currentCombo=0,this.triggerError()),this.userInput===this.currentTargetLine&&(this.soundService.playSuccess(),setTimeout(()=>this.nextLine(),150)))}triggerError(){this.hasError=!0,this.soundService.playError(),setTimeout(()=>{this.hasError=!1,this.cdr.markForCheck()},300)}nextLine(){this.currentLineIndex++,this.activeMission&&this.currentLineIndex>=this.activeMission.lines.length?this.endMission(!0):this.activeMission&&(this.loadLine(this.activeMission.lines[this.currentLineIndex]),this.cdr.markForCheck())}calculateReward(e){let t=e.reward*(this.screenLevel*.5);return e.reward+t}getScreenBonus(e){return e*(this.screenLevel*.5)}endMission(e){if(this.stopTimer(),this.endTime=Date.now(),this.missionResult=e?"SUCCESS":"FAIL",e&&this.activeMission){let t=this.currentWpm;this.gameStateService.gameState$.pipe(Ze(1)).subscribe(s=>{let o=O({},s.stats);o.maxWpm=Math.max(o.maxWpm||0,t),o.totalCharsTyped=(o.totalCharsTyped||0)+this.totalCharsTyped,this.gameStateService.updateState({stats:o})});let r=this.calculateReward(this.activeMission),i=this.maxComboReached;this.lastReward=r+i,this.gameStateService.addMoney(this.lastReward),this.gameStateService.incrementContractsCompleted(),this.activeMission.difficulty==="BOSS"&&this.gameStateService.incrementBossBeaten(),this.soundService.playSuccess()}else this.soundService.playError();this.cdr.markForCheck()}closeResult(){this.missionResult=null,this.activeMission=null,this.generateMissions(),this.cdr.markForCheck()}getCharClass(e,t){if(e>=this.userInput.length)return this.activeTheme.textClass+" opacity-40";let r=this.userInput[e];return r===t?this.activeTheme.successClass:r===" "?"bg-red-500/50 text-white":"text-red-500 font-bold"}getIcon(e){return e==="BOSS"?"\u{1F479}":e==="HACKER"?"\u{1F4BB}":e==="EASY"?"\u{1F7E2}":e==="MEDIUM"?"\u{1F7E0}":"\u{1F534}"}getDifficultyClass(e){return e==="HACKER"?"border-green-500 text-green-500 bg-green-900/20":e==="BOSS"?"border-red-500 text-red-500 bg-red-900/20 animate-pulse":"border-slate-500 text-slate-500"}getMissionClass(e){return e==="HACKER"?"border-green-500 bg-green-900/10":e==="BOSS"?"border-red-500 bg-red-900/10":"border-slate-700 bg-slate-800"}static \u0275fac=function(t){return new(t||n)(se(an),se(On),se(Ft))};static \u0275cmp=yt({type:n,selectors:[["app-freelance-dev-game"]],viewQuery:function(t,r){if(t&1&&ic(PZ,5),t&2){let i;Io(i=So())&&(r.hiddenInput=i.first)}},hostBindings:function(t,r){t&1&&j("keydown",function(s){return r.handleKeyboard(s)},mu)},standalone:!1,decls:22,vars:17,consts:[["gameZone",""],["hiddenInput",""],[1,"h-full","font-sans","flex","flex-col","relative","overflow-hidden","select-none","transition-colors","duration-500",3,"click","ngClass"],[1,"p-4","border-b","flex","justify-between","items-center","shadow-md","z-10","relative",3,"ngClass"],[1,"flex","items-center","gap-4"],[1,"w-3","h-3","rounded-full","bg-red-500","animate-pulse"],[1,"text-sm","font-bold","opacity-50","hidden","sm:block"],["class","flex items-center gap-3",4,"ngIf"],[1,"flex","items-center","gap-3"],[1,"px-3","py-1","bg-blue-600","hover:bg-blue-500","text-white","text-xs","font-bold","rounded","shadow","flex","items-center","gap-2","transition-all","relative",3,"click"],["class","absolute -top-1 -right-1 flex h-2 w-2",4,"ngIf"],[1,"font-bold","font-mono","text-lg",3,"ngClass"],[1,"absolute","top-20","right-4","z-20","pointer-events-none","flex","flex-col","gap-2","items-end"],["class","backdrop-blur px-3 py-1 rounded border text-xs shadow-lg animate-fade-out-up",3,"ngClass",4,"ngFor","ngForOf"],["class","flex-1 p-8 overflow-y-auto custom-scroll",4,"ngIf"],["class","flex-1 flex flex-col relative transition-colors duration-500",4,"ngIf"],["class","absolute inset-0 bg-slate-950/95 z-50 flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-slate-900/90 z-50 flex items-center justify-center backdrop-blur-md animate-fade-in",3,"click",4,"ngIf"],[1,"px-3","py-1","rounded-full","border","text-xs","font-bold","flex","gap-2",3,"ngClass"],[3,"ngClass"],["class","bg-amber-700 hover:bg-amber-600 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 transition-all animate-bounce",3,"click",4,"ngIf"],["class","text-amber-400 text-xs font-black animate-pulse",4,"ngIf"],[1,"bg-amber-700","hover:bg-amber-600","text-white","px-3","py-1","rounded-full","text-xs","font-bold","flex","items-center","gap-1","transition-all","animate-bounce",3,"click"],[1,"text-amber-400","text-xs","font-black","animate-pulse"],[1,"absolute","-top-1","-right-1","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-green-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-green-500"],[1,"backdrop-blur","px-3","py-1","rounded","border","text-xs","shadow-lg","animate-fade-out-up",3,"ngClass"],[1,"flex-1","p-8","overflow-y-auto","custom-scroll"],[1,"max-w-4xl","mx-auto"],[1,"text-3xl","font-black","mb-2","tracking-tight","flex","items-center","gap-3"],[1,"opacity-60","mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","group relative border rounded-xl p-5 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-xl",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"group","relative","border","rounded-xl","p-5","cursor-pointer","transition-all","hover:-translate-y-1","hover:shadow-xl",3,"click","ngClass"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-2xl"],[1,"px-2","py-1","rounded","text-[10px]","font-bold","uppercase","tracking-wider","border",3,"ngClass"],[1,"font-bold","text-lg","mb-1","transition-colors","group-hover:opacity-80"],[1,"mt-4","pt-4","border-t","flex","justify-between","items-center",3,"ngClass"],[1,"flex","flex-col"],[1,"text-[10px]","opacity-60","uppercase"],[1,"font-bold",3,"ngClass"],[1,"flex","flex-col","items-end"],[1,"font-bold"],[1,"flex-1","flex","flex-col","relative","transition-colors","duration-500"],[1,"absolute","inset-0","opacity-10","pointer-events-none",3,"ngClass"],[1,"flex-1","p-8","flex","flex-col","justify-center","items-center","relative","overflow-hidden"],[1,"absolute","top-10","right-10","flex","flex-col","items-end","transition-all","duration-200","z-30"],[1,"text-6xl","font-black","italic","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-b","from-white","to-slate-400"],[1,"text-xs","font-bold","opacity-50","uppercase","tracking-widest"],[1,"relative","z-20","w-full","max-w-5xl","text-center","leading-relaxed","select-none","cursor-text","transition-transform","duration-100"],[1,"text-4xl","font-sans","font-medium","tracking-normal","opacity-80"],["class","inline-block",3,"whitespace-nowrap",4,"ngFor","ngForOf"],["class","mt-8 text-red-500 font-bold text-xl animate-bounce",4,"ngIf"],[1,"absolute","bottom-8","flex","flex-col","items-center","z-30"],[1,"text-5xl","font-mono","font-black","transition-colors","duration-300","drop-shadow-lg"],["type","text","autofocus","","autocomplete","off","spellcheck","false",1,"absolute","opacity-0","top-0","left-0","h-full","w-full","cursor-text",3,"input","blur"],[1,"inline-block"],[4,"ngFor","ngForOf"],["class","inline-block w-[3px] h-8 align-middle animate-pulse -mb-1 mr-[1px] rounded-full shadow-[0_0_15px_rgba(59,130,246,1)]",3,"ngClass",4,"ngIf"],[1,"transition-all","duration-150","border-b-2","border-transparent","inline-block","min-w-[12px]","whitespace-pre","text-center",3,"ngClass"],[1,"inline-block","w-[3px]","h-8","align-middle","animate-pulse","-mb-1","mr-[1px]","rounded-full","shadow-[0_0_15px_rgba(59,130,246,1)]",3,"ngClass"],[1,"mt-8","text-red-500","font-bold","text-xl","animate-bounce"],[1,"absolute","inset-0","bg-slate-950/95","z-50","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-4xl","h-[85%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-900"],[1,"font-black","text-white","text-2xl"],[1,"w-8","h-8","rounded-full","bg-slate-800","hover:bg-slate-700","text-slate-400","flex","items-center","justify-center","transition-colors",3,"click"],[1,"flex-1","flex","overflow-hidden"],[1,"w-1/3","bg-slate-950","p-4","border-r","border-slate-800","flex","flex-col","gap-4"],[1,"w-full","py-4","rounded-xl","font-black","text-sm","uppercase","tracking-wider","shadow-lg","flex","flex-col","items-center","justify-center","gap-2","transition-all","transform","active:scale-95","border","border-white/10",3,"click","disabled","ngClass"],[1,"text-center","leading-tight"],["class","text-[10px] opacity-80 font-normal mt-1",4,"ngIf"],[1,"bg-slate-900","p-3","rounded","border","border-slate-800","hover:border-blue-500","transition-colors","mt-2"],[1,"font-bold","text-white"],[1,"text-xs","text-slate-400","mb-2"],[1,"w-full","py-2","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-800","text-white","text-xs","font-bold","rounded",3,"click","disabled"],[1,"bg-slate-900","p-3","rounded","border","border-slate-800","hover:border-purple-500","transition-colors"],[1,"w-full","py-2","bg-purple-600","hover:bg-purple-500","disabled:bg-slate-800","text-white","text-xs","font-bold","rounded",3,"click","disabled"],[1,"flex-1","p-6","bg-slate-900","overflow-y-auto","custom-scroll"],["class","h-full flex flex-col items-center justify-center text-slate-600",4,"ngIf"],[1,"grid","grid-cols-2","gap-4"],["class","bg-slate-800 p-3 rounded-lg border border-slate-700 relative",3,"opacity-50",4,"ngFor","ngForOf"],[1,"text-[10px]","opacity-80","font-normal","mt-1"],[1,"h-full","flex","flex-col","items-center","justify-center","text-slate-600"],[1,"text-4xl","mb-2"],[1,"bg-slate-800","p-3","rounded-lg","border","border-slate-700","relative"],[1,"flex","justify-between","items-start","mb-2"],[1,"flex","items-center","gap-2"],[1,"font-bold","text-white","text-sm"],["class","text-[10px] text-slate-400",4,"ngIf"],["class","text-[10px] text-slate-600",4,"ngIf"],["class","text-[10px] bg-red-900 text-red-300 px-2 py-0.5 rounded",4,"ngIf"],["class","text-[10px] bg-green-900 text-green-300 px-2 py-0.5 rounded",4,"ngIf"],["class","h-1 w-full bg-black rounded-full mb-2 overflow-hidden",4,"ngIf"],[1,"flex","flex-col","gap-2"],[1,"w-full","py-1.5","bg-slate-700","hover:bg-slate-600","text-white","text-[10px]","font-bold","rounded","border","border-slate-600","flex","items-center","justify-center","gap-2",3,"click"],[1,"w-full","py-1.5","bg-green-700","hover:bg-green-600","disabled:bg-slate-700","text-white","text-[10px]","font-bold","rounded","flex","justify-between","px-2",3,"click","disabled"],[1,"w-full","py-1.5","bg-slate-700","hover:bg-slate-600","text-white","text-[10px]","font-bold","rounded",3,"click"],[1,"text-[10px]","text-slate-400"],[1,"text-[10px]","text-slate-600"],[1,"text-[10px]","bg-red-900","text-red-300","px-2","py-0.5","rounded"],[1,"text-[10px]","bg-green-900","text-green-300","px-2","py-0.5","rounded"],[1,"h-1","w-full","bg-black","rounded-full","mb-2","overflow-hidden"],[1,"h-full","transition-all","duration-300",3,"ngClass"],[1,"absolute","inset-0","bg-slate-900/90","z-50","flex","items-center","justify-center","backdrop-blur-md","animate-fade-in",3,"click"],[1,"bg-slate-800","p-8","rounded-2xl","border-2","shadow-2xl","max-w-sm","w-full","text-center"],[1,"text-6xl","mb-4"],[1,"text-2xl","font-black","uppercase","mb-6"],["class","bg-green-900/20 p-4 rounded-xl mb-6 border border-green-500/30 w-full",4,"ngIf"],[1,"w-full","py-4","rounded-xl","font-bold","uppercase","tracking-wider","transition-all","shadow-lg","active:scale-95","bg-slate-700","hover:bg-slate-600","text-white",3,"click"],[1,"bg-green-900/20","p-4","rounded-xl","mb-6","border","border-green-500/30","w-full"],[1,"flex","justify-between","items-center","text-sm","text-green-200/70"],[1,"flex","justify-between","items-center","text-sm","text-amber-400","font-bold"],["class","flex justify-between items-center text-sm text-purple-400 font-bold",4,"ngIf"],[1,"h-px","bg-green-500/30","my-1"],[1,"flex","justify-between","items-center","text-2xl","font-black","text-green-400"],[1,"flex","justify-between","items-center","text-sm","text-purple-400","font-bold"]],template:function(t,r){t&1&&(m(0,"div",2),j("click",function(){return r.focusInput()}),m(1,"div",3)(2,"div",4),le(3,"div",5),m(4,"span",6),y(5,"FreelanceOS v28"),v(),H(6,OZ,7,11,"div",7),v(),m(7,"div",8)(8,"button",9),j("click",function(s){return s.stopPropagation(),r.toggleStaff()}),m(9,"span"),y(10,"\u{1F465}"),v(),y(11," \xC9QUIPE "),H(12,FZ,3,0,"span",10),v(),m(13,"div",11),y(14),oe(15,"number"),v()()(),m(16,"div",12),H(17,LZ,2,6,"div",13),v(),H(18,UZ,8,1,"div",14)(19,GZ,19,16,"div",15)(20,XZ,34,10,"div",16)(21,nX,9,7,"div",17),v()),t&2&&(R("ngClass",Mp(14,lU,r.activeTheme.bgClass,r.activeTheme.textClass)),b(),R("ngClass",r.activeTheme.borderClass),b(5),R("ngIf",r.activeMission),b(6),R("ngIf",r.employees.length>0),b(),R("ngClass",r.activeTheme.accentClass),b(),J(" ",Ae(15,11,r.currentMoney,"1.0-0")," \u20AC "),b(3),R("ngForOf",r.notifications),b(),R("ngIf",!r.activeMission),b(),R("ngIf",r.activeMission),b(),R("ngIf",r.isStaffOpen),b(),R("ngIf",r.missionResult))},dependencies:[Ti,rr,Bn,Cr],styles:[".custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:3px}.shake-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .2s cubic-bezier(.36,.07,.19,.97) both}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-2px,0,0)}20%,80%{transform:translate3d(4px,0,0)}40%,60%{transform:translate3d(6px,0,0)}}.neon-glow[_ngcontent-%COMP%]{color:#4ade80;text-shadow:0 0 5px #4ade80,0 0 10px #4ade80;font-weight:900;transform:scale(1.1)}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.animate-fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp 2s ease-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}"],changeDetection:0})};function iX(n,e){if(n&1&&(m(0,"p",18),y(1),v()),n&2){let t=M(2);b(),J(" \u274C ",t.errorMessage," ")}}function sX(n,e){n&1&&(m(0,"p",19),y(1," Reprenez votre partie l\xE0 o\xF9 vous l'avez laiss\xE9e. "),v())}function oX(n,e){if(n&1){let t=ae();m(0,"div",7)(1,"div",8)(2,"h1",9),y(3," JEUB2 "),v(),m(4,"div",10),y(5," ONLINE EDITION "),v(),m(6,"div",11),y(7,"Devenez le CEO ultime"),v()(),m(8,"div",12)(9,"button",13),j("click",function(){G(t);let i=M();return z(i.login())}),m(10,"span",14),y(11,"G"),v(),m(12,"span"),y(13,"SE CONNECTER AVEC GOOGLE"),v(),le(14,"div",15),v(),H(15,iX,2,1,"p",16)(16,sX,2,0,"p",17),v()()}if(n&2){let t=M();b(15),R("ngIf",t.errorMessage),b(),R("ngIf",!t.errorMessage)}}function aX(n,e){if(n&1){let t=ae();m(0,"div",20)(1,"div",21),y(2,"\u{1F44B}"),v(),m(3,"h2",22),y(4,"Bienvenue, CEO !"),v(),m(5,"p",23),y(6,"Confirmez votre identit\xE9 pour cr\xE9er votre holding :"),v(),m(7,"input",24),Do("ngModelChange",function(i){G(t);let s=M();return oc(s.chosenUsername,i)||(s.chosenUsername=i),z(i)}),j("keyup.enter",function(){G(t);let i=M();return z(i.confirmName())}),v(),m(8,"button",25),j("click",function(){G(t);let i=M();return z(i.confirmName())}),y(9," LANCER L'EMPIRE \u{1F680} "),v()()}if(n&2){let t=M();b(7),To("ngModel",t.chosenUsername),b(),R("disabled",!t.chosenUsername)}}var Xv=class n{constructor(e,t,r){this.firebase=e;this.gameState=t;this.sound=r}isChoosingName=!1;chosenUsername="";pendingUser=null;errorMessage="";async login(){this.sound.playSoftPop(),this.errorMessage="";try{await this.firebase.loginGoogle();let e=this.firebase.authInstance.currentUser;if(e)if(await this.gameState.checkIfUserHasSave(e))console.log("\u{1F4BE} Sauvegarde trouv\xE9e !"),await this.gameState.loadCloudDataForUser(e);else{console.log("\u{1F195} Nouvelle partie."),this.pendingUser=e;let r=e.displayName,i=e.email?e.email.split("@")[0]:"PDG";this.chosenUsername=r||i,this.chosenUsername&&this.chosenUsername!=="Entrepreneur"?await this.confirmName():this.isChoosingName=!0}}catch(e){console.error(e),this.errorMessage="Erreur connexion : "+e.message}}async confirmName(){this.chosenUsername.trim()&&(this.sound.playSuccess(),this.pendingUser&&await this.gameState.initializeNewUser(this.pendingUser,this.chosenUsername))}static \u0275fac=function(t){return new(t||n)(se(li),se(an),se(On))};static \u0275cmp=yt({type:n,selectors:[["app-title-screen"]],standalone:!1,decls:8,vars:2,consts:[[1,"h-screen","w-screen","bg-slate-950","flex","flex-col","items-center","justify-center","relative","overflow-hidden","font-sans","select-none"],[1,"absolute","inset-0","opacity-20","pointer-events-none"],[1,"absolute","top-0","left-0","w-full","h-full","bg-[radial-gradient(circle_at_50%_50%,_#3b82f6_0%,_transparent_50%)]","animate-pulse"],[1,"grid-bg","absolute","inset-0"],["class","z-10 flex flex-col items-center gap-8 animate-fade-in-up",4,"ngIf"],["class","z-20 bg-slate-900 border border-slate-700 p-8 rounded-2xl shadow-2xl flex flex-col items-center gap-6 animate-fade-in max-w-md w-full mx-4",4,"ngIf"],[1,"absolute","bottom-4","text-slate-700","text-xs","font-mono"],[1,"z-10","flex","flex-col","items-center","gap-8","animate-fade-in-up"],[1,"relative","group","cursor-default"],[1,"text-8xl","md:text-9xl","font-black","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-b","from-white","to-slate-400","drop-shadow-2xl"],[1,"absolute","-top-4","-right-8","bg-blue-600","text-white","text-xs","font-bold","px-2","py-1","rounded","rotate-12","shadow-lg"],[1,"text-center","text-slate-500","font-mono","text-sm","tracking-[0.5em]","mt-2","uppercase"],[1,"flex","flex-col","items-center","gap-4","mt-8"],[1,"group","relative","px-8","py-4","bg-white","text-slate-900","font-black","text-xl","rounded-full","shadow-[0_0_40px_rgba(255,255,255,0.3)]","hover:shadow-[0_0_60px_rgba(255,255,255,0.5)]","hover:scale-105","transition-all","duration-300","flex","items-center","gap-3",3,"click"],[1,"text-2xl"],[1,"absolute","inset-0","rounded-full","border-2","border-white","opacity-0","group-hover:opacity-100","group-hover:scale-110","transition-all","duration-500"],["class","text-red-400 font-bold text-xs mt-4 max-w-xs text-center bg-red-900/20 p-2 rounded border border-red-500/30",4,"ngIf"],["class","text-slate-600 text-xs mt-4 max-w-xs text-center",4,"ngIf"],[1,"text-red-400","font-bold","text-xs","mt-4","max-w-xs","text-center","bg-red-900/20","p-2","rounded","border","border-red-500/30"],[1,"text-slate-600","text-xs","mt-4","max-w-xs","text-center"],[1,"z-20","bg-slate-900","border","border-slate-700","p-8","rounded-2xl","shadow-2xl","flex","flex-col","items-center","gap-6","animate-fade-in","max-w-md","w-full","mx-4"],[1,"text-4xl"],[1,"text-2xl","font-black","text-white","text-center"],[1,"text-slate-400","text-center","text-sm"],["type","text","placeholder","Votre Pseudo...",1,"w-full","bg-slate-800","border","border-slate-600","rounded-lg","px-4","py-3","text-white","font-bold","text-center","focus:border-blue-500","focus:outline-none","transition-colors","text-xl",3,"ngModelChange","keyup.enter","ngModel"],[1,"w-full","py-3","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-bold","rounded-lg","transition-all","shadow-lg",3,"click","disabled"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"div",1),le(2,"div",2)(3,"div",3),v(),H(4,oX,17,2,"div",4)(5,aX,10,2,"div",5),m(6,"div",6),y(7,"v1.2.0 \u2022 Blackjack Update"),v()()),t&2&&(b(4),R("ngIf",!r.isChoosingName),b(),R("ngIf",r.isChoosingName))},dependencies:[Bn,gl,jv,ph],styles:[".grid-bg[_ngcontent-%COMP%]{background-image:linear-gradient(rgba(255,255,255,.05) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.05) 1px,transparent 1px);background-size:50px 50px}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};var lX=()=>["CHAIR","SCREEN","COFFEE","PC"];function uX(n,e){n&1&&le(0,"app-title-screen")}function dX(n,e){n&1&&(m(0,"div",2)(1,"div",3),y(2,"\u{1F680}"),v(),m(3,"div",4),y(4,"CHARGEMENT..."),v()())}function hX(n,e){if(n&1){let t=ae();m(0,"div",12)(1,"div",13),y(2,"\u2694\uFE0F"),v(),m(3,"div",14)(4,"div",15),y(5),v(),m(6,"div",16),y(7),v()(),m(8,"div",17)(9,"button",18),j("click",function(){let i=G(t).$implicit,s=M(3);return z(s.acceptInvite(i))}),y(10,"OUI"),v(),m(11,"button",19),j("click",function(){let i=G(t).$implicit,s=M(3);return z(s.firebaseService.declineInvite(i))}),y(12,"NON"),v()()()}if(n&2){let t=e.$implicit;b(5),J("D\xC9FI DE ",t.fromName),b(2),Co("",t.gameType||"BLACKJACK"," \u2022 ",t.amount," \u20AC")}}function fX(n,e){if(n&1&&(m(0,"div",10),H(1,hX,13,3,"div",11),v()),n&2){let t=e.ngIf;b(),R("ngForOf",t)}}function pX(n,e){n&1&&le(0,"app-intro-game")}function mX(n,e){if(n&1&&(m(0,"div",56),y(1),v()),n&2){let t=M(2).$implicit;b(),J("\u{1F465} ",t.employees.length)}}function gX(n,e){if(n&1){let t=ae();m(0,"button",50),j("click",function(){G(t);let i=M().$implicit,s=M(3);return z(s.selectCompany(i))}),m(1,"div",51)(2,"div")(3,"div",52)(4,"span",53),y(5),v(),y(6),v(),m(7,"div",54),y(8),v()(),H(9,mX,2,1,"div",55),v()()}if(n&2){let t=M().$implicit,r=M(3);R("ngClass",(r.selectedCompany==null?null:r.selectedCompany.id)===t.id?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-900/20":"bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-300 hover:border-slate-600"),b(5),Z(t.type===r.JobType.FOODTRUCK?"\u{1F354}":t.type===r.JobType.FACTORY?"\u{1F3ED}":t.type===r.JobType.FREELANCE_DEV?"\u{1F4BB}":"\u{1F3B0}"),b(),Z(t.name),b(2),J("Niveau ",t.level),b(),R("ngIf",t.employees.length>0)}}function vX(n,e){if(n&1){let t=ae();m(0,"div",57)(1,"div",58)(2,"div",59)(3,"span",60),y(4),v(),y(5),v(),m(6,"span"),y(7,"\u{1F512}"),v()(),m(8,"button",61),oe(9,"async"),j("click",function(){G(t);let i=M().$implicit,s=M(3);return z(s.buyCompany(i))}),m(10,"span"),y(11,"ACHETER"),v(),m(12,"span",62),y(13),oe(14,"number"),v()()()}if(n&2){let t,r=M().$implicit,i=M(3);b(4),Z(r.type===i.JobType.FOODTRUCK?"\u{1F354}":r.type===i.JobType.FACTORY?"\u{1F3ED}":r.type===i.JobType.FREELANCE_DEV?"\u{1F4BB}":"\u{1F3B0}"),b(),Z(r.name),b(3),R("disabled",(((t=At(9,4,i.gameState$))==null?null:t.money)||0)<i.getUnlockCost(r.type)),b(5),J("",Ae(14,6,i.getUnlockCost(r.type),"1.0-0")," \u20AC")}}function _X(n,e){if(n&1&&(m(0,"div",47),H(1,gX,10,5,"button",48)(2,vX,15,9,"div",49),v()),n&2){let t=e.$implicit;b(),R("ngIf",t.unlocked),b(),R("ngIf",!t.unlocked)}}function yX(n,e){n&1&&(m(0,"div",63)(1,"div",64),y(2,"\u{1F448}"),v(),m(3,"h2",65),y(4,"S\xE9lectionnez une activit\xE9"),v(),m(5,"p",66),y(6,"Cliquez sur une entreprise \xE0 gauche."),v()())}function EX(n,e){n&1&&le(0,"app-freelance-dev-game",67)}function bX(n,e){n&1&&le(0,"app-foodtruck-game",67)}function wX(n,e){n&1&&le(0,"app-factory-game",67)}function IX(n,e){n&1&&le(0,"app-blackjack-game",67)}function SX(n,e){if(n&1){let t=ae();m(0,"div",20)(1,"div",21)(2,"div",22)(3,"h1",23)(4,"span",24),y(5,"\u{1F680}"),v(),y(6," JEUB2 "),m(7,"span",25),y(8,"v1.3"),v()(),m(9,"div",26)(10,"div",27)(11,"span",28),y(12,"Argent"),v(),m(13,"span",29),y(14),oe(15,"async"),oe(16,"number"),v()(),m(17,"div",30)(18,"span",28),y(19),oe(20,"async"),v(),m(21,"span",31),y(22),oe(23,"async"),v()()()(),m(24,"div",32)(25,"button",33),j("click",function(){G(t);let i=M(2);return z(i.toggleGlobalShop())}),m(26,"span",34),y(27,"\u{1F6D2}"),v(),y(28," BOUTIQUE"),v()(),m(29,"div",35)(30,"div",36),y(31,"Mes Entreprises"),v(),H(32,_X,3,2,"div",37),oe(33,"async"),v(),m(34,"div",38)(35,"div",39),le(36,"span",40),y(37),oe(38,"async"),oe(39,"async"),v(),m(40,"button",41),j("click",function(){G(t);let i=M(2);return z(i.toggleOnlineTab())}),m(41,"span"),y(42,"\u{1F30D}"),v(),y(43," Online / Classement"),v(),m(44,"div",17)(45,"button",42),j("click",function(){G(t);let i=M(2);return z(i.logout())}),m(46,"span"),y(47,"\u{1F6AA}"),v()(),m(48,"button",43),j("click",function(){G(t);let i=M(2);return z(i.toggleAdmin())}),m(49,"span"),y(50,"\u{1F575}\uFE0F\u200D\u2642\uFE0F"),v()()()()(),m(51,"div",44),H(52,yX,7,0,"div",45)(53,EX,1,0,"app-freelance-dev-game",46)(54,bX,1,0,"app-foodtruck-game",46)(55,wX,1,0,"app-factory-game",46)(56,IX,1,0,"app-blackjack-game",46),v()()}if(n&2){let t,r,i,s,o,a=M(2);b(14),J("",Ae(16,12,(t=At(15,10,a.gameState$))==null?null:t.money,"1.0-0")," \u20AC"),b(5),J("Jour ",(r=At(20,15,a.gameState$))==null?null:r.day),b(3),Z(a.formatTime(((i=At(23,17,a.gameState$))==null?null:i.timeOfDay)||6)),b(10),R("ngForOf",(s=At(33,19,a.gameState$))==null?null:s.companies),b(5),Z(((o=At(38,21,a.firebaseService.user$))==null?null:o.displayName)||((o=At(39,23,a.gameState$))==null||o.user==null?null:o.user.username)||"Anonyme"),b(15),R("ngIf",!a.selectedCompany),b(),R("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FREELANCE_DEV),b(),R("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FOODTRUCK),b(),R("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FACTORY),b(),R("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.CASINO)}}function CX(n,e){if(n&1){let t=ae();m(0,"div",83)(1,"div",84)(2,"div",85),y(3),v(),m(4,"div",14)(5,"div",86),y(6,"PDG"),v(),m(7,"div",87)(8,"input",88),Do("ngModelChange",function(i){G(t);let s=M(4);return oc(s.newUsername,i)||(s.newUsername=i),z(i)}),v(),m(9,"button",89),j("click",function(){G(t);let i=M(4);return z(i.updateUsername())}),y(10,"SAUVER"),v()(),m(11,"div",90)(12,"div",91)(13,"div",92),y(14,"Niveau"),v(),m(15,"div",93),y(16,"CEO Senior"),v()(),m(17,"div",91)(18,"div",92),y(19,"Membre depuis"),v(),m(20,"div",93),y(21),oe(22,"date"),v()()()()(),m(23,"h3",94),y(24,"Statistiques de Carri\xE8re"),v(),m(25,"div",95)(26,"div",96)(27,"div",97),y(28,"\u{1F4B0}"),v(),m(29,"div",98),y(30,"Total Gagn\xE9"),v(),m(31,"div",99),y(32),oe(33,"number"),v()(),m(34,"div",96)(35,"div",97),y(36,"\u23F1\uFE0F"),v(),m(37,"div",98),y(38,"Jours de Jeu"),v(),m(39,"div",100),y(40),v()(),m(41,"div",96)(42,"div",97),y(43,"\u{1F480}"),v(),m(44,"div",98),y(45,"Boss Vaincus"),v(),m(46,"div",101),y(47),v()()(),m(48,"h3",102),y(49,"\u{1F4CA} Performances M\xE9tiers"),v(),m(50,"div",103)(51,"div",104)(52,"div",105)(53,"div",106),y(54,"\u{1F4BB}"),v(),m(55,"div",107),y(56,"Freelance"),v()(),m(57,"div",108)(58,"div",109)(59,"span",110),y(60,"Vitesse Max"),v(),m(61,"span",111),y(62),v()(),m(63,"div",109)(64,"span",110),y(65,"Caract\xE8res"),v(),m(66,"span",111),y(67),oe(68,"number"),v()(),m(69,"div",112)(70,"span",110),y(71,"Contrats"),v(),m(72,"span",111),y(73),v()()()(),m(74,"div",113)(75,"div",105)(76,"div",114),y(77,"\u{1F354}"),v(),m(78,"div",115),y(79,"Foodtruck"),v()(),m(80,"div",108)(81,"div",109)(82,"span",110),y(83,"Record Vitesse"),v(),m(84,"span",111),y(85),oe(86,"number"),v()(),m(87,"div",109)(88,"span",110),y(89,"Servis"),v(),m(90,"span",111),y(91),v()(),m(92,"div",112)(93,"span",110),y(94,"Meilleur Combo"),v(),m(95,"span",111),y(96),v()()()(),m(97,"div",116)(98,"div",105)(99,"div",117),y(100,"\u{1F3B0}"),v(),m(101,"div",118),y(102,"Casino"),v()(),m(103,"div",108)(104,"div",109)(105,"span",110),y(106,"Mains Jou\xE9es"),v(),m(107,"span",111),y(108),v()(),m(109,"div",109)(110,"span",110),y(111,"Plus Gros Gain"),v(),m(112,"span",119),y(113),oe(114,"number"),v()(),m(115,"div",112)(116,"span",110),y(117,"Max Mise"),v(),m(118,"span",111),y(119),oe(120,"number"),v()()()()()()}if(n&2){let t=e.ngIf,r=M(4);b(3),Z((t.user==null?null:t.user.avatarId)||"\u{1F464}"),b(5),To("ngModel",r.newUsername),b(13),Z(Ae(22,15,t.user==null?null:t.user.creationDate,"shortDate")||"Aujourd'hui"),b(11),J("",Ae(33,18,t.totalMoneyEarned,"1.0-0")," \u20AC"),b(8),Z(t.day),b(7),Z(t.freelanceUpgrades.bossBeaten),b(15),J("",t.stats.maxWpm||0," WPM"),b(5),Z(Ae(68,21,t.stats.totalCharsTyped||0,"1.0-0")),b(6),Z(t.freelanceUpgrades.contractsCompleted),b(12),J("",Ae(86,24,(t.stats.fastestBurgerMs||0)/1e3,"1.2-2"),"s"),b(6),Z(t.stats.burgersServed||0),b(5),J("x",t.stats.bestServiceCombo||0),b(12),Z(t.stats.handsPlayed||0),b(5),J("+",Ae(114,27,t.stats.biggestWin||0,"1.0-0")," \u20AC"),b(6),J("",Ae(120,30,t.stats.highestBet||0,"1.0-0")," \u20AC")}}function TX(n,e){if(n&1&&(m(0,"div",81),H(1,CX,121,33,"div",82),oe(2,"async"),v()),n&2){let t=M(3);b(),R("ngIf",At(2,1,t.gameState$))}}function DX(n,e){if(n&1){let t=ae();m(0,"div",127),j("click",function(){G(t);let i=M(4);return z(i.viewPlayerDetails(i.leaderboard[1]))}),m(1,"div",128)(2,"div",129),y(3),v(),m(4,"div",130),y(5),oe(6,"number"),v()(),m(7,"div",131)(8,"div",132),y(9,"2"),v(),m(10,"div",133),y(11,"\u{1F948}"),v()()()}if(n&2){let t=M(4);b(3),Z(t.leaderboard[1].username),b(2),J("",Ae(6,2,t.leaderboard[1].money,"1.0-0")," \u20AC")}}function AX(n,e){if(n&1){let t=ae();m(0,"div",134),j("click",function(){G(t);let i=M(4);return z(i.viewPlayerDetails(i.leaderboard[0]))}),m(1,"div",128)(2,"div",135),y(3),v(),m(4,"div",136),y(5),oe(6,"number"),v()(),m(7,"div",137)(8,"div",138),y(9,"1"),v(),m(10,"div",139),y(11,"\u{1F451}"),v()()()}if(n&2){let t=M(4);b(3),Z(t.leaderboard[0].username),b(2),J("",Ae(6,2,t.leaderboard[0].money,"1.0-0")," \u20AC")}}function xX(n,e){if(n&1){let t=ae();m(0,"div",127),j("click",function(){G(t);let i=M(4);return z(i.viewPlayerDetails(i.leaderboard[2]))}),m(1,"div",128)(2,"div",140),y(3),v(),m(4,"div",141),y(5),oe(6,"number"),v()(),m(7,"div",142)(8,"div",143),y(9,"3"),v(),m(10,"div",144),y(11,"\u{1F949}"),v()()()}if(n&2){let t=M(4);b(3),Z(t.leaderboard[2].username),b(2),J("",Ae(6,2,t.leaderboard[2].money,"1.0-0")," \u20AC")}}function RX(n,e){if(n&1){let t=ae();m(0,"div",145),j("click",function(){let i=G(t).$implicit,s=M(4);return z(s.viewPlayerDetails(i))}),m(1,"div",146),y(2),v(),m(3,"div",147)(4,"div",148),y(5),v(),m(6,"div",149),y(7),oe(8,"number"),v()()()}if(n&2){let t=e.$implicit,r=e.index,i=M(4);R("ngClass",i.getRankClass(r)),b(2),J("#",r+1),b(3),Z(t.username),b(2),J("",Ae(8,4,t.money,"1.0-0")," \u20AC")}}function kX(n,e){if(n&1&&(m(0,"div",120)(1,"div",121)(2,"div",122),H(3,DX,12,5,"div",123)(4,AX,12,5,"div",124)(5,xX,12,5,"div",123),v(),m(6,"div",125),H(7,RX,9,7,"div",126),v()()()),n&2){let t=M(3);b(3),R("ngIf",t.leaderboard.length>1),b(),R("ngIf",t.leaderboard.length>0),b(),R("ngIf",t.leaderboard.length>2),b(2),R("ngForOf",t.leaderboard)}}function PX(n,e){if(n&1){let t=ae();m(0,"div",156)(1,"div",157),y(2),v(),m(3,"div",158),y(4),v(),m(5,"div",159)(6,"div",160),y(7),oe(8,"number"),v(),m(9,"button",161),j("click",function(){let i=G(t).$implicit,s=M(4);return z(s.buyItem(i))}),y(10,"ACHETER"),v()()()}if(n&2){let t=e.$implicit;b(2),Z(t.type),b(2),J("Vendeur: ",t.sellerName),b(3),J("",Ae(8,3,t.price,"1.0-0")," \u20AC")}}function NX(n,e){if(n&1){let t=ae();m(0,"div",150)(1,"div",151)(2,"div")(3,"h3",152),y(4,"\u{1F4E6} MARCH\xC9 NOIR"),v()(),m(5,"button",153),j("click",function(){G(t);let i=M(3);return z(i.sellEmployee())}),y(6,"\u2795 Vendre Dev"),v()(),m(7,"div",154),H(8,PX,11,6,"div",155),v()()}if(n&2){let t=M(3);b(8),R("ngForOf",t.marketItems)}}function MX(n,e){if(n&1&&(m(0,"div",168)(1,"div",72),y(2),v(),m(3,"div")(4,"div",169),y(5),v(),m(6,"div",170),y(7),v(),m(8,"div",171),y(9),oe(10,"number"),v()()()),n&2){let t=e.$implicit;b(2),Z(t.icon||"\u{1F3E2}"),b(3),Z(t.name),b(2),J("Chef: ",t.leaderName),b(2),J("Valuation: ",Ae(10,4,t.totalValuation,"1.0-0")," \u20AC")}}function OX(n,e){if(n&1){let t=ae();m(0,"div",150)(1,"div",162)(2,"h3",163)(3,"span",13),y(4,"\u{1F91D}"),v(),y(5," HOLDINGS"),v(),m(6,"div",17)(7,"input",164),Do("ngModelChange",function(i){G(t);let s=M(3);return oc(s.newHoldingName,i)||(s.newHoldingName=i),z(i)}),v(),m(8,"button",165),j("click",function(){G(t);let i=M(3);return z(i.createHolding())}),y(9,"CR\xC9ER"),v()()(),m(10,"div",166),H(11,MX,11,7,"div",167),v()()}if(n&2){let t=M(3);b(7),To("ngModel",t.newHoldingName),b(4),R("ngForOf",t.holdings)}}function FX(n,e){if(n&1){let t=ae();m(0,"div",172),j("click",function(){G(t);let i=M(3);return z(i.closePlayerDetails())}),m(1,"div",173),j("click",function(i){return G(t),z(i.stopPropagation())}),m(2,"button",174),j("click",function(){G(t);let i=M(3);return z(i.closePlayerDetails())}),y(3,"\u2715"),v(),m(4,"div",175)(5,"div",176),y(6),v(),m(7,"h2",177),y(8),v(),m(9,"div",178),y(10),oe(11,"number"),v()()()()}if(n&2){let t=M(3);b(6),Z(t.selectedPlayer.avatarId||"\u{1F464}"),b(2),Z(t.selectedPlayer.username),b(2),J("",Ae(11,3,t.selectedPlayer.money,"1.0-0")," \u20AC")}}function LX(n,e){if(n&1){let t=ae();m(0,"div",68),j("click",function(){G(t);let i=M(2);return z(i.toggleOnlineTab())}),m(1,"div",69),j("click",function(i){return G(t),z(i.stopPropagation())}),m(2,"div",70)(3,"div",71)(4,"div",72),y(5,"\u{1F30D}"),v(),m(6,"div")(7,"h2",73),y(8,"LE MONDE CONNECT\xC9"),v(),m(9,"div",74)(10,"button",75),j("click",function(){G(t);let i=M(2);return z(i.activeTab="PROFILE")}),y(11,"Mon Profil"),v(),m(12,"button",75),j("click",function(){G(t);let i=M(2);return z(i.activeTab="LEADERBOARD")}),y(13,"Classement"),v(),m(14,"button",75),j("click",function(){G(t);let i=M(2);return z(i.activeTab="MARKET")}),y(15,"March\xE9 Noir"),v(),m(16,"button",75),j("click",function(){G(t);let i=M(2);return z(i.activeTab="GUILD")}),y(17,"Guildes"),v()()()(),m(18,"button",76),j("click",function(){G(t);let i=M(2);return z(i.toggleOnlineTab())}),y(19,"\u2715"),v()(),H(20,TX,3,3,"div",77)(21,kX,8,4,"div",78)(22,NX,9,1,"div",79)(23,OX,12,2,"div",79)(24,FX,12,6,"div",80),v()()}if(n&2){let t=M(2);b(10),sc(t.activeTab==="PROFILE"?"bg-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-400 hover:bg-blue-600 hover:text-white"),b(2),sc(t.activeTab==="LEADERBOARD"?"bg-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-400 hover:bg-blue-600 hover:text-white"),b(2),sc(t.activeTab==="MARKET"?"bg-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-400 hover:bg-blue-600 hover:text-white"),b(2),sc(t.activeTab==="GUILD"?"bg-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-400 hover:bg-blue-600 hover:text-white"),b(4),R("ngIf",t.activeTab==="PROFILE"),b(),R("ngIf",t.activeTab==="LEADERBOARD"),b(),R("ngIf",t.activeTab==="MARKET"),b(),R("ngIf",t.activeTab==="GUILD"),b(),R("ngIf",t.selectedPlayer)}}function VX(n,e){if(n&1){let t=ae();m(0,"div",191)(1,"div",192),y(2),v(),m(3,"div",169),y(4),v(),m(5,"button",193),j("click",function(){let i=G(t).$implicit,s=M(4);return z(s.buySetup(i))}),y(6),oe(7,"number"),v()()}if(n&2){let t=e.$implicit,r=M().ngIf,i=M(3);b(2),Z(t==="CHAIR"?"\u{1FA91}":t==="SCREEN"?"\u{1F5A5}\uFE0F":t==="COFFEE"?"\u2615":"\u{1F680}"),b(2),Z(t),b(),R("disabled",i.getSetupLevel(r,t)>0||r.money<i.getSetupCost(t)),b(),Z(i.getSetupLevel(r,t)>0?"POSS\xC9D\xC9":Ae(7,4,i.getSetupCost(t),"1.0-0")+" \u20AC")}}function UX(n,e){n&1&&(m(0,"div",189),H(1,VX,8,7,"div",190),v()),n&2&&(b(),R("ngForOf",bu(1,lX)))}function BX(n,e){if(n&1){let t=ae();m(0,"div",179),j("click",function(){G(t);let i=M(2);return z(i.toggleGlobalShop())}),m(1,"div",180),j("click",function(i){return G(t),z(i.stopPropagation())}),m(2,"div",181)(3,"h2",182),y(4,"BOUTIQUE GLOBALE"),v(),m(5,"div",183),y(6),oe(7,"async"),oe(8,"number"),v()(),m(9,"div",184)(10,"section")(11,"h3",185),y(12,"\u{1F4BB} Freelance Dev"),v(),H(13,UX,2,2,"div",186),oe(14,"async"),v()(),m(15,"div",187)(16,"button",188),j("click",function(){G(t);let i=M(2);return z(i.toggleGlobalShop())}),y(17,"Fermer"),v()()()()}if(n&2){let t,r=M(2);b(6),J("",Ae(8,4,(t=At(7,2,r.gameState$))==null?null:t.money,"1.0-0")," \u20AC"),b(7),R("ngIf",At(14,7,r.gameState$))}}function jX(n,e){if(n&1){let t=ae();m(0,"div",194),j("click",function(){G(t);let i=M(2);return z(i.toggleAdmin())}),m(1,"div",195),j("click",function(i){return G(t),z(i.stopPropagation())}),m(2,"h2",196)(3,"span"),y(4,"\u{1F575}\uFE0F\u200D\u2642\uFE0F"),v(),y(5," ZONE DE TRICHE"),v(),m(6,"div",197)(7,"div",198)(8,"button",199),j("click",function(){G(t);let i=M(2);return z(i.adminAddMoney(1e3))}),y(9,"+1k \u20AC"),v(),m(10,"button",199),j("click",function(){G(t);let i=M(2);return z(i.adminAddMoney(1e5))}),y(11,"+100k \u20AC"),v()(),m(12,"div",200)(13,"button",201),j("click",function(){G(t);let i=M(2);return z(i.resetData())}),y(14,"\u26A0\uFE0F EFFACER MA SAUVEGARDE"),v()()()()()}}function $X(n,e){if(n&1&&(Rp(0),H(1,fX,2,1,"div",5),oe(2,"async"),H(3,pX,1,0,"app-intro-game",0),oe(4,"async"),H(5,SX,57,25,"div",6),oe(6,"async"),H(7,LX,25,13,"div",7)(8,BX,18,9,"div",8)(9,jX,15,0,"div",9),kp()),n&2){let t,r,i=M();b(),R("ngIf",At(2,6,i.firebaseService.invites$)),b(2),R("ngIf",!((t=At(4,8,i.gameState$))!=null&&t.hasCompletedIntro)),b(2),R("ngIf",(r=At(6,10,i.gameState$))==null?null:r.hasCompletedIntro),b(2),R("ngIf",i.isOnlineTabOpen),b(),R("ngIf",i.isGlobalShopOpen),b(),R("ngIf",i.isAdminOpen)}}var e_=class n{constructor(e,t,r){this.gameStateService=e;this.soundService=t;this.firebaseService=r;this.gameState$=this.gameStateService.gameState$}gameState$;selectedCompany=null;dailyReport=null;isGlobalShopOpen=!1;isAdminOpen=!1;isOnlineTabOpen=!1;isRefreshing=!1;activeTab="LEADERBOARD";selectedPlayer=null;tickerMessages=["Bienvenue sur le march\xE9 mondial !","Le Bitcoin est en chute libre...","Qui sera le prochain CEO de l'ann\xE9e ?"];tickerIndex=0;newUsername="";newHoldingName="";JobType=Mv;SetupItem=Ov;availableThemes=ch;leaderboard=[];marketItems=[];holdings=[];prestigeItems=[{id:"WATCH",name:"Rolex en Or",icon:"\u231A",cost:5e3,desc:"Le temps c'est de l'argent."},{id:"CAR",name:"Tesla Model S",icon:"\u{1F697}",cost:45e3,desc:"Z\xE9ro \xE9mission, 100% style."},{id:"APARTMENT",name:"Penthouse",icon:"\u{1F3E2}",cost:25e4,desc:"Vue sur tout ton empire."},{id:"ISLAND",name:"\xCEle Priv\xE9e",icon:"\u{1F3DD}\uFE0F",cost:5e6,desc:"La retraite anticip\xE9e."}];ngOnInit(){this.gameState$.pipe(Oe(e=>{let t=e.companies.find(i=>i.type==="FOODTRUCK"&&i.unlocked),r=e.companies.find(i=>i.unlocked);return t||r}),dn(e=>!!e),Ze(1)).subscribe(e=>{!this.selectedCompany&&e&&(this.selectedCompany=e)}),this.gameState$.subscribe(e=>{e.user&&!this.newUsername&&(this.newUsername=e.user.username)}),this.gameStateService.dayEnded$.subscribe(e=>{this.dailyReport=e,this.soundService.playSuccess()}),os(5e3).subscribe(()=>{this.tickerIndex=(this.tickerIndex+1)%this.tickerMessages.length})}toggleOnlineTab(){this.isOnlineTabOpen=!this.isOnlineTabOpen,this.isOnlineTabOpen&&this.refreshOnlineData()}async connect(){await this.gameStateService.connectOnline(),this.refreshOnlineData()}refreshOnlineData(){this.isRefreshing||(this.isRefreshing=!0,this.soundService.playNoise(.1,"highpass",2e3,.1),$l({leaderboard:this.firebaseService.getLeaderboard(),market:this.firebaseService.getMarketItems(),holdings:this.firebaseService.getHoldings()}).subscribe({next:e=>{this.leaderboard=e.leaderboard.filter(t=>t.username&&t.username!=="Entrepreneur"&&t.username!=="Anonyme"&&t.username!=="Joueur"),this.marketItems=e.market,this.holdings=e.holdings,this.isRefreshing=!1},error:e=>{console.error("Err refresh:",e),this.isRefreshing=!1}}))}acceptInvite(e){this.firebaseService.acceptInvite(e).then(t=>{this.firebaseService.joinGameRoom(t),this.gameStateService.gameState$.pipe(Ze(1)).subscribe(r=>{let i=r.companies.find(s=>s.type==="CASINO");i&&(this.selectedCompany=i)})})}toggleGlobalShop(){this.isGlobalShopOpen=!this.isGlobalShopOpen,this.isGlobalShopOpen&&this.soundService.playSoftPop()}getSetupCost(e){return{CHAIR:2e3,SCREEN:5e3,COFFEE:1500,PC:2e4}[e]||0}getSetupLevel(e,t){if(!e.freelanceUpgrades)return 0;switch(t){case"CHAIR":return e.freelanceUpgrades.chairLevel;case"SCREEN":return e.freelanceUpgrades.screenLevel;case"COFFEE":return e.freelanceUpgrades.coffeeLevel;case"PC":return e.freelanceUpgrades.pcLevel;default:return 0}}buySetup(e){let t=this.getSetupCost(e);this.gameState$.pipe(Ze(1)).subscribe(r=>{r.money>=t?(this.gameStateService.buySetupUpgrade(e,t),this.soundService.playSuccess()):this.soundService.playError()})}isThemeOwned(e,t){return e.freelanceUpgrades.ownedThemes.includes(t)}isActiveTheme(e,t){return e.freelanceUpgrades.activeThemeId===t}buyOrEquipTheme(e){this.gameState$.pipe(Ze(1)).subscribe(t=>{this.isThemeOwned(t,e.id)?(this.gameStateService.setFreelanceTheme(e.id),this.soundService.playSoftPop()):t.money>=e.cost?(this.gameStateService.buyFreelanceTheme(e.id,e.cost),this.soundService.playSuccess()):this.soundService.playError()})}getFoodtruckLevel(e,t){return e.foodtruckUpgrades&&e.foodtruckUpgrades[t+"Level"]||1}getFoodtruckCost(e,t){let r=this.getFoodtruckLevel(e,t);return Math.floor(150*Math.pow(1.6,r))}buyFoodtruck(e){this.gameState$.pipe(Ze(1)).subscribe(t=>{let r=this.getFoodtruckCost(t,e);t.money>=r?(this.gameStateService.buyFoodtruckUpgrade(e,r),this.soundService.playSuccess()):this.soundService.playError()})}buyKeyboard(){this.gameState$.pipe(Ze(1)).subscribe(e=>{e.money>=5e3&&!e.foodtruckUpgrades.hasKeyboard?(this.gameStateService.unlockKeyboard(5e3),this.soundService.playSuccess()):this.soundService.playError()})}hasPrestigeItem(e,t){return e.achievements.some(r=>r.id==="PRESTIGE_"+t)}buyPrestige(e){this.gameStateService.buyPrestigeItem(e)?this.soundService.playSuccess():this.soundService.playError()}getMyPrestigeItems(e){return e.achievements.filter(t=>t.id.startsWith("PRESTIGE_"))}getUnlockCost(e){switch(e){case"FREELANCE_DEV":return 10;case"FACTORY":return 50;case"CASINO":return 25;default:return 0}}buyCompany(e){let t=this.getUnlockCost(e.type);t>0&&(this.gameStateService.unlockCompany(e.id,t),this.soundService.playSuccess())}updateUsername(){this.newUsername?.trim()&&(this.gameStateService.updateUsername(this.newUsername.trim()),this.soundService.playSuccess())}createHolding(){this.newHoldingName&&this.firebaseService.createHolding(this.newHoldingName,this.newUsername).then(()=>{this.refreshOnlineData(),this.newHoldingName="",this.soundService.playSuccess()})}sellEmployee(){this.gameState$.pipe(Ze(1)).subscribe(e=>{let t={sellerId:this.firebaseService.currentUserId||"anon",sellerName:e.user?.username||"Anonyme",type:"Dev Senior",price:5e3,timestamp:Date.now(),rarity:"RARE"};this.firebaseService.sellItem(t),this.soundService.playCash(),setTimeout(()=>this.refreshOnlineData(),1e3)})}buyItem(e){this.gameState$.pipe(Ze(1)).subscribe(async t=>{if(t.money>=e.price){let r=await this.firebaseService.buyItem(e);r==="SUCCESS"?(this.gameStateService.addMoney(-e.price),e.type==="Dev Senior"&&this.gameStateService.hireEmployee("2","DEV_SENIOR"),this.soundService.playSuccess(),this.refreshOnlineData()):r==="SNIPER_PROTECTION"?(alert("\u{1F6D1} Protection Sniper ! Attendez quelques secondes."),this.soundService.playError()):(alert("Trop tard ! Objet d\xE9j\xE0 vendu."),this.soundService.playError(),this.refreshOnlineData())}else this.soundService.playError()})}getRankClass(e){return e===0?"bg-yellow-500/20 border-yellow-500/50 text-yellow-100 shadow-[0_0_15px_rgba(234,179,8,0.3)]":e===1?"bg-slate-300/10 border-slate-300/50 text-slate-200":e===2?"bg-amber-700/10 border-amber-700/50 text-amber-200":"bg-slate-800/50 border-slate-700 text-slate-400 hover:bg-slate-700 transition-colors"}viewPlayerDetails(e){this.selectedPlayer=e,this.soundService.playSoftPop()}closePlayerDetails(){this.selectedPlayer=null}selectCompany(e){e.unlocked&&(this.gameState$.subscribe(t=>{let r=t.companies.find(i=>i.id===e.id);r&&this.selectedCompany?.id===r.id&&(this.selectedCompany=r)}),this.selectedCompany=e,this.soundService.playSoftPop())}formatTime(e){let t=Math.floor(e),r=Math.floor((e-t)*60);return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}toggleAdmin(){this.isAdminOpen=!this.isAdminOpen}adminAddMoney(e){this.gameStateService.addMoney(e),this.soundService.playCash()}adminSetTime(e){let t=parseFloat(e.target.value);!isNaN(t)&&t>=0&&t<=24&&this.gameStateService.setTimeOfDay(t)}resetData(){this.gameStateService.hardResetGame()}logout(){confirm("Se d\xE9connecter ?")&&this.gameStateService.logoutAndClear()}closeReport(){this.dailyReport=null}static \u0275fac=function(t){return new(t||n)(se(an),se(On),se(li))};static \u0275cmp=yt({type:n,selectors:[["app-game-shell"]],standalone:!1,decls:8,vars:13,consts:[[4,"ngIf"],["class","fixed inset-0 bg-slate-950 flex flex-col items-center justify-center z-[9999]",4,"ngIf"],[1,"fixed","inset-0","bg-slate-950","flex","flex-col","items-center","justify-center","z-[9999]"],[1,"text-6xl","animate-bounce","mb-6"],[1,"text-white","font-bold","text-2xl","tracking-widest","animate-pulse"],["class","fixed top-4 left-1/2 -translate-x-1/2 z-[1000] flex flex-col gap-2 pointer-events-auto",4,"ngIf"],["class","flex h-screen w-full bg-slate-950 text-slate-200 font-sans overflow-hidden",4,"ngIf"],["class","fixed inset-0 bg-slate-950/95 z-[999] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","fixed inset-0 bg-slate-950/90 z-[999] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","fixed inset-0 bg-red-950/90 z-[999] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],[1,"fixed","top-4","left-1/2","-translate-x-1/2","z-[1000]","flex","flex-col","gap-2","pointer-events-auto"],["class","bg-slate-900 border border-purple-500 p-4 rounded-xl shadow-2xl flex items-center gap-4 animate-bounce min-w-[300px]",4,"ngFor","ngForOf"],[1,"bg-slate-900","border","border-purple-500","p-4","rounded-xl","shadow-2xl","flex","items-center","gap-4","animate-bounce","min-w-[300px]"],[1,"text-3xl"],[1,"flex-1"],[1,"font-bold","text-white","text-sm"],[1,"text-xs","text-purple-300"],[1,"flex","gap-2"],[1,"bg-green-600","hover:bg-green-500","text-white","p-2","rounded-lg","text-xs","font-bold",3,"click"],[1,"bg-red-600/20","hover:bg-red-600","text-red-400","hover:text-white","p-2","rounded-lg","text-xs","font-bold",3,"click"],[1,"flex","h-screen","w-full","bg-slate-950","text-slate-200","font-sans","overflow-hidden"],[1,"w-64","bg-slate-900","border-r","border-slate-800","flex","flex-col","shrink-0","z-20","shadow-xl"],[1,"p-4","border-b","border-slate-800","flex","flex-col","gap-1","bg-slate-950/50"],[1,"font-black","text-xl","tracking-tighter","text-white","flex","items-center","gap-2"],[1,"text-2xl"],[1,"text-xs","font-normal","text-slate-500","border","border-slate-700","rounded","px-1"],[1,"flex","justify-between","items-end","mt-2"],[1,"flex","flex-col"],[1,"text-[10px]","uppercase","font-bold","text-slate-500","tracking-widest"],[1,"text-green-400","font-mono","font-bold","text-lg"],[1,"flex","flex-col","items-end"],[1,"text-blue-400","font-mono","font-bold","text-sm"],[1,"p-3","pb-0"],[1,"w-full","py-3","bg-gradient-to-r","from-purple-600","to-indigo-600","hover:from-purple-500","hover:to-indigo-500","text-white","font-black","uppercase","tracking-widest","rounded-xl","shadow-lg","border","border-white/10","flex","items-center","justify-center","gap-2","transition-all","hover:scale-[1.02]","active:scale-95",3,"click"],[1,"text-xl"],[1,"flex-1","overflow-y-auto","p-3","space-y-2","custom-scroll"],[1,"text-[10px]","font-bold","text-slate-600","uppercase","tracking-widest","px-2","mb-1","mt-2"],["class","mb-2",4,"ngFor","ngForOf"],[1,"p-4","border-t","border-slate-800","bg-slate-950/30","flex","flex-col","gap-2"],[1,"text-[10px]","text-slate-500","text-center","flex","items-center","justify-center","gap-2"],[1,"w-2","h-2","bg-green-500","rounded-full","animate-pulse"],[1,"w-full","py-2","px-3","rounded-lg","border","border-blue-500","text-blue-400","hover:bg-blue-900/30","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","py-2","px-3","rounded-lg","border","border-red-900/50","text-red-500","hover:bg-red-950/30","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","py-2","px-3","rounded-lg","border","border-slate-700","text-slate-400","hover:bg-slate-800","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","relative","bg-slate-950","overflow-hidden","flex","flex-col","z-0"],["class","h-full flex flex-col items-center justify-center text-slate-600",4,"ngIf"],["class","w-full h-full block",4,"ngIf"],[1,"mb-2"],["class","w-full text-left p-3 rounded-xl transition-all duration-200 border relative group overflow-hidden",3,"ngClass","click",4,"ngIf"],["class","w-full p-3 rounded-xl border border-slate-800 bg-slate-900/50 relative overflow-hidden flex flex-col gap-2 opacity-80 hover:opacity-100 transition-opacity",4,"ngIf"],[1,"w-full","text-left","p-3","rounded-xl","transition-all","duration-200","border","relative","group","overflow-hidden",3,"click","ngClass"],[1,"relative","z-10","flex","justify-between","items-start"],[1,"font-bold","text-sm","flex","items-center","gap-2"],[1,"text-lg"],[1,"text-xs","opacity-70","mt-1"],["class","bg-black/20 px-2 py-1 rounded text-[10px] font-bold",4,"ngIf"],[1,"bg-black/20","px-2","py-1","rounded","text-[10px]","font-bold"],[1,"w-full","p-3","rounded-xl","border","border-slate-800","bg-slate-900/50","relative","overflow-hidden","flex","flex-col","gap-2","opacity-80","hover:opacity-100","transition-opacity"],[1,"flex","justify-between","items-center","opacity-60"],[1,"font-bold","text-sm","flex","items-center","gap-2","text-slate-400"],[1,"text-lg","grayscale"],[1,"w-full","py-2","bg-green-600","hover:bg-green-500","disabled:bg-slate-800","disabled:text-slate-600","text-white","font-bold","rounded-lg","transition-all","text-xs","flex","justify-center","items-center","gap-2","shadow-lg",3,"click","disabled"],[1,"bg-black/20","px-1.5","rounded","text-green-100"],[1,"h-full","flex","flex-col","items-center","justify-center","text-slate-600"],[1,"text-6xl","mb-6","animate-bounce"],[1,"text-2xl","font-bold","text-slate-500"],[1,"text-slate-600","mt-2"],[1,"w-full","h-full","block"],[1,"fixed","inset-0","bg-slate-950/95","z-[999]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-blue-500/30","w-full","max-w-6xl","h-[90%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden","relative",3,"click"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-950/80","backdrop-blur-md","z-10"],[1,"flex","items-center","gap-4"],[1,"text-4xl"],[1,"text-2xl","font-black","text-white","tracking-tight"],[1,"flex","gap-2","mt-2"],[1,"text-xs","font-bold","uppercase","tracking-wider","px-3","py-1.5","rounded-lg","transition-all","border","border-transparent",3,"click"],[1,"w-10","h-10","rounded-full","bg-slate-800","hover:bg-red-500/20","text-slate-400","hover:text-red-500","flex","items-center","justify-center","transition-all",3,"click"],["class","flex-1 flex flex-col p-8 bg-slate-900/50 overflow-y-auto custom-scroll",4,"ngIf"],["class","flex-1 flex overflow-hidden z-10",4,"ngIf"],["class","flex-1 flex flex-col p-8 bg-slate-900 overflow-y-auto custom-scroll",4,"ngIf"],["class","absolute inset-0 bg-black/80 z-20 flex items-center justify-center p-12 backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],[1,"flex-1","flex","flex-col","p-8","bg-slate-900/50","overflow-y-auto","custom-scroll"],["class","max-w-4xl mx-auto w-full",4,"ngIf"],[1,"max-w-4xl","mx-auto","w-full"],[1,"flex","gap-8","mb-8"],[1,"w-32","h-32","rounded-full","bg-gradient-to-br","from-blue-500","to-purple-600","flex","items-center","justify-center","text-6xl","shadow-2xl","border-4","border-slate-900"],[1,"text-xs","text-slate-500","uppercase","font-bold","tracking-widest","mb-1"],[1,"flex","items-center","gap-3","mb-4"],["type","text","placeholder","Votre Pseudo",1,"bg-transparent","text-4xl","font-black","text-white","border-b-2","border-transparent","focus:border-blue-500","focus:outline-none","w-full","placeholder:text-slate-700",3,"ngModelChange","ngModel"],[1,"text-sm","bg-blue-600","px-4","py-2","rounded","text-white","font-bold","hover:bg-blue-500","transition-all","shadow-lg","active:scale-95",3,"click"],[1,"flex","gap-4"],[1,"bg-slate-800","px-4","py-2","rounded-lg","border","border-slate-700"],[1,"text-[10px]","text-slate-500","uppercase"],[1,"text-white","font-bold"],[1,"text-lg","font-bold","text-white","mb-4","border-b","border-slate-700","pb-2"],[1,"grid","grid-cols-3","gap-4","mb-8"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","flex-col","items-center"],[1,"text-2xl","mb-2"],[1,"text-xs","text-slate-500","uppercase","font-bold"],[1,"text-xl","font-mono","font-bold","text-green-400"],[1,"text-xl","font-mono","font-bold","text-blue-400"],[1,"text-xl","font-mono","font-bold","text-purple-400"],[1,"text-lg","font-bold","text-white","mb-4","border-b","border-slate-700","pb-2","flex","items-center","gap-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","mb-8"],[1,"bg-slate-800/50","p-4","rounded-xl","border","border-slate-700","hover:border-blue-500","transition-colors","group"],[1,"flex","justify-between","items-start","mb-2"],[1,"text-2xl","p-2","bg-blue-900/30","rounded-lg"],[1,"text-xs","font-bold","text-blue-400","uppercase","tracking-wider"],[1,"space-y-2"],[1,"flex","justify-between","border-b","border-white/5","pb-1"],[1,"text-slate-400","text-xs"],[1,"text-white","font-mono","font-bold"],[1,"flex","justify-between"],[1,"bg-slate-800/50","p-4","rounded-xl","border","border-slate-700","hover:border-orange-500","transition-colors","group"],[1,"text-2xl","p-2","bg-orange-900/30","rounded-lg"],[1,"text-xs","font-bold","text-orange-400","uppercase","tracking-wider"],[1,"bg-slate-800/50","p-4","rounded-xl","border","border-slate-700","hover:border-green-500","transition-colors","group"],[1,"text-2xl","p-2","bg-green-900/30","rounded-lg"],[1,"text-xs","font-bold","text-green-400","uppercase","tracking-wider"],[1,"text-green-400","font-mono","font-bold"],[1,"flex-1","flex","overflow-hidden","z-10"],[1,"w-full","flex","flex-col","bg-slate-950/30"],[1,"p-6","pb-6","flex","items-end","justify-center","gap-4","border-b","border-slate-800/50","min-h-[240px]","bg-gradient-to-b","from-slate-900/50","to-slate-950"],["class","flex flex-col items-center gap-2 w-1/4 group cursor-pointer hover:-translate-y-2 transition-transform",3,"click",4,"ngIf"],["class","flex flex-col items-center gap-2 w-1/3 -mt-6 group cursor-pointer hover:-translate-y-2 transition-transform",3,"click",4,"ngIf"],[1,"flex-1","overflow-y-auto","custom-scroll","p-4","space-y-2"],["class","p-3 rounded-xl border flex items-center gap-4 transition-all hover:translate-x-1 cursor-pointer hover:bg-white/5",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","gap-2","w-1/4","group","cursor-pointer","hover:-translate-y-2","transition-transform",3,"click"],[1,"text-center","relative","z-10"],[1,"text-xs","font-bold","text-slate-300","truncate"],[1,"text-[10px]","text-slate-500","font-mono"],[1,"w-full","h-24","bg-gradient-to-t","from-slate-700","to-slate-500","rounded-t-lg","flex","items-end","justify-center","pb-2","relative","border-t","border-slate-400"],[1,"text-3xl","font-black","text-slate-800","opacity-50"],[1,"absolute","-top-4","w-10","h-10","rounded-full","bg-slate-200","border-4","border-slate-500","flex","items-center","justify-center","text-xl","shadow-xl"],[1,"flex","flex-col","items-center","gap-2","w-1/3","-mt-6","group","cursor-pointer","hover:-translate-y-2","transition-transform",3,"click"],[1,"text-sm","font-black","text-yellow-400","truncate","drop-shadow-md"],[1,"text-xs","text-yellow-600","font-mono","font-bold"],[1,"w-full","h-36","bg-gradient-to-t","from-yellow-600","to-yellow-400","rounded-t-lg","flex","items-end","justify-center","pb-4","relative","border-t","border-yellow-300"],[1,"text-5xl","font-black","text-yellow-800","opacity-50","relative","z-10"],[1,"absolute","-top-6","text-3xl","animate-bounce"],[1,"text-xs","font-bold","text-amber-700","truncate"],[1,"text-[10px]","text-amber-900/60","font-mono"],[1,"w-full","h-16","bg-gradient-to-t","from-amber-800","to-amber-600","rounded-t-lg","flex","items-end","justify-center","pb-2","relative","border-t","border-amber-500"],[1,"text-2xl","font-black","text-amber-900","opacity-50"],[1,"absolute","-top-4","w-8","h-8","rounded-full","bg-amber-600","border-2","border-amber-800","flex","items-center","justify-center","text-xs","font-bold","shadow-lg"],[1,"p-3","rounded-xl","border","flex","items-center","gap-4","transition-all","hover:translate-x-1","cursor-pointer","hover:bg-white/5",3,"click","ngClass"],[1,"font-black","text-lg","w-8","text-center","opacity-50"],[1,"flex-1","min-w-0"],[1,"font-bold","text-sm","truncate"],[1,"text-xs","opacity-60","font-mono"],[1,"flex-1","flex","flex-col","p-8","bg-slate-900","overflow-y-auto","custom-scroll"],[1,"flex","justify-between","items-end","mb-8"],[1,"text-2xl","font-black","text-white"],[1,"px-5","py-3","bg-red-600","hover:bg-red-500","text-white","font-bold","rounded-xl","shadow-lg",3,"click"],[1,"grid","grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-slate-800 p-5 rounded-2xl border border-slate-700 hover:border-blue-500 transition-all",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-5","rounded-2xl","border","border-slate-700","hover:border-blue-500","transition-all"],[1,"font-black","text-white","text-lg","mb-1"],[1,"text-xs","text-slate-400","mb-4"],[1,"flex","items-center","justify-between","mt-auto","pt-4","border-t","border-slate-700"],[1,"text-green-400","font-mono","font-black","text-lg"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-500","text-white","font-bold","rounded-lg","text-xs",3,"click"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-2xl","font-black","text-white","flex","items-center","gap-3"],["type","text","placeholder","Nom de la guilde...",1,"bg-slate-800","border","border-slate-700","px-3","py-2","rounded-lg","text-white","text-sm",3,"ngModelChange","ngModel"],[1,"px-4","py-2","bg-purple-600","hover:bg-purple-500","text-white","font-bold","rounded-lg","text-xs",3,"click"],[1,"grid","grid-cols-2","gap-4"],["class","bg-slate-800 p-4 rounded-xl border border-slate-700 flex items-center gap-4",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","items-center","gap-4"],[1,"font-bold","text-white"],[1,"text-xs","text-slate-400"],[1,"text-xs","text-purple-400","mt-1","font-mono"],[1,"absolute","inset-0","bg-black/80","z-20","flex","items-center","justify-center","p-12","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","p-8","rounded-2xl","w-full","max-w-lg","relative","shadow-2xl",3,"click"],[1,"absolute","top-4","right-4","text-slate-500","hover:text-white",3,"click"],[1,"text-center","mb-8"],[1,"w-24","h-24","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-full","mx-auto","mb-4","flex","items-center","justify-center","text-4xl","shadow-xl"],[1,"text-3xl","font-black","text-white"],[1,"text-blue-400","font-mono","text-xl"],[1,"fixed","inset-0","bg-slate-950/90","z-[999]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-5xl","h-[90%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden",3,"click"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-950"],[1,"text-2xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-purple-400","to-indigo-400"],[1,"font-mono","text-green-400","font-bold","text-xl"],[1,"flex-1","overflow-y-auto","custom-scroll","p-8","space-y-12"],[1,"text-lg","font-bold","text-blue-400","mb-4","uppercase","tracking-widest"],["class","grid grid-cols-2 md:grid-cols-4 gap-4",4,"ngIf"],[1,"p-4","border-t","border-slate-800","bg-slate-950","flex","justify-end"],[1,"px-6","py-2","bg-slate-700","hover:bg-slate-600","text-white","font-bold","rounded-lg",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],["class","bg-slate-800 p-4 rounded-xl border border-slate-700 flex flex-col gap-2",4,"ngFor","ngForOf"],[1,"bg-slate-800","p-4","rounded-xl","border","border-slate-700","flex","flex-col","gap-2"],[1,"text-3xl","mb-2"],[1,"mt-2","w-full","py-2","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-700","text-white","font-bold","rounded-lg","text-xs",3,"click","disabled"],[1,"fixed","inset-0","bg-red-950/90","z-[999]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-red-500","p-8","rounded-xl","w-96","shadow-2xl",3,"click"],[1,"text-2xl","font-black","text-red-500","mb-6","flex","items-center","gap-2"],[1,"space-y-4"],[1,"grid","grid-cols-2","gap-2"],[1,"w-full","py-3","bg-red-900/20","border","border-red-500/50","hover:bg-red-800","hover:text-white","text-red-300","font-bold","rounded","transition-all",3,"click"],[1,"pt-4","border-t","border-slate-800"],[1,"w-full","py-4","bg-black","border-2","border-red-600","text-red-500","hover:bg-red-600","hover:text-white","font-black","rounded-lg","mt-2","transition-all","uppercase","tracking-widest",3,"click"]],template:function(t,r){t&1&&(H(0,uX,1,0,"app-title-screen",0),oe(1,"async"),H(2,dX,5,0,"div",1),oe(3,"async"),oe(4,"async"),H(5,$X,10,12,"ng-container",0),oe(6,"async"),oe(7,"async")),t&2&&(R("ngIf",!At(1,3,r.firebaseService.user$)),b(2),R("ngIf",At(3,5,r.gameStateService.isLoading$)&&At(4,7,r.firebaseService.user$)),b(3),R("ngIf",At(6,9,r.firebaseService.user$)&&!At(7,11,r.gameStateService.isLoading$)))},dependencies:[Ti,rr,Bn,gl,jv,ph,Kv,Yv,Qv,Jv,Zv,Xv,tb,Cr,nb],encapsulation:2})};var t_=class n{title="JEUB2";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=yt({type:n,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(t,r){t&1&&le(0,"app-game-shell")},dependencies:[e_],encapsulation:2})};var n_=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ht({type:n});static \u0275inj=ct({imports:[Ru,cU,xV]})};jk(ZP);var r_=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ht({type:n,bootstrap:[t_]});static \u0275inj=ct({providers:[{provide:Is,useValue:"fr-FR"},RN(()=>kN(l2.firebase)),pO(()=>gO()),i2(()=>s2())],imports:[Lu,JP,Nv,n_]})};hb().bootstrapModule(r_).catch(n=>console.error(n));
