var vU=Object.defineProperty,yU=Object.defineProperties;var bU=Object.getOwnPropertyDescriptors;var Nh=Object.getOwnPropertySymbols;var ZD=Object.prototype.hasOwnProperty,XD=Object.prototype.propertyIsEnumerable;var JD=(n,e,t)=>e in n?vU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})ZD.call(e,t)&&JD(n,t,e[t]);if(Nh)for(var t of Nh(e))XD.call(e,t)&&JD(n,t,e[t]);return n},re=(n,e)=>yU(n,bU(e));var Fl=(n,e)=>{var t={};for(var r in n)ZD.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Nh)for(var r of Nh(n))e.indexOf(r)<0&&XD.call(n,r)&&(t[r]=n[r]);return t};var sn=null,Mh=!1,x_=1,EU=null,hn=Symbol("SIGNAL");function Te(n){let e=sn;return sn=n,e}function Fh(){return sn}var Ll={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vl(n){if(Mh)throw new Error("");if(sn===null)return;sn.consumerOnSignalRead(n);let e=sn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=sn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:sn.producers,t!==void 0&&t.producer===n)){sn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===sn&&(!r||IU(i,sn)))return;let s=Da(sn),o={producer:n,consumer:sn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};sn.producersTail=o,e!==void 0?e.nextProducer=o:sn.producers=o,s&&rx(n,o)}function ex(){x_++}function A_(n){if(!(Da(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===x_)){if(!n.producerMustRecompute(n)&&!Vh(n)){D_(n);return}n.producerRecomputeValue(n),D_(n)}}function R_(n){if(n.consumers===void 0)return;let e=Mh;Mh=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||wU(r)}}finally{Mh=e}}function k_(){return sn?.consumerAllowSignalWrites!==!1}function wU(n){n.dirty=!0,R_(n),n.consumerMarkedDirty?.(n)}function D_(n){n.dirty=!1,n.lastCleanEpoch=x_}function Ul(n){return n&&tx(n),Te(n)}function tx(n){n.producersTail=void 0,n.recomputing=!0}function Lh(n,e){Te(e),n&&nx(n)}function nx(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Da(n))do t=P_(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Vh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(A_(t),r!==t.version))return!0}return!1}function Bl(n){if(Da(n)){let e=n.producers;for(;e!==void 0;)e=P_(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function rx(n,e){let t=n.consumersTail,r=Da(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)rx(i.producer,i)}function P_(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Da(e)){let s=e.producers;for(;s!==void 0;)s=P_(s)}return t}function Da(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function N_(n){EU?.(n)}function IU(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function M_(n,e){return Object.is(n,e)}function Uh(n,e){let t=Object.create(SU);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(A_(t),Vl(t),t.value===Oh)throw t.error;return t.value};return r[hn]=t,N_(t),r}var C_=Symbol("UNSET"),T_=Symbol("COMPUTING"),Oh=Symbol("ERRORED"),SU=re(O({},Ll),{value:C_,dirty:!0,error:null,equal:M_,kind:"computed",producerMustRecompute(n){return n.value===C_||n.value===T_},producerRecomputeValue(n){if(n.value===T_)throw new Error("");let e=n.value;n.value=T_;let t=Ul(n),r,i=!1;try{r=n.computation(),Te(null),i=e!==C_&&e!==Oh&&r!==Oh&&n.equal(e,r)}catch(s){r=Oh,n.error=s}finally{Lh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function CU(){throw new Error}var ix=CU;function sx(n){ix(n)}function O_(n){ix=n}var TU=null;function F_(n,e){let t=Object.create(Bh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>ox(t);return r[hn]=t,N_(t),[r,o=>jl(t,o),o=>ax(t,o)]}function ox(n){return Vl(n),n.value}function jl(n,e){k_()||sx(n),n.equal(n.value,e)||(n.value=e,DU(n))}function ax(n,e){k_()||sx(n),jl(n,e(n.value))}var Bh=re(O({},Ll),{equal:M_,value:void 0,kind:"signal"});function DU(n){n.version++,ex(),R_(n),TU?.(n)}function L_(n){let e=Te(null);try{return n()}finally{Te(e)}}function Ie(n){return typeof n=="function"}function xa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var jh=xa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ao(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ie(r))try{r()}catch(s){e=s instanceof jh?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{cx(s)}catch(o){e=e??[],o instanceof jh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new jh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)cx(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ao(t,e)}remove(e){let{_finalizers:t}=this;t&&ao(t,e),e instanceof n&&e._removeParent(this)}};Ke.EMPTY=(()=>{let n=new Ke;return n.closed=!0,n})();var V_=Ke.EMPTY;function $h(n){return n instanceof Ke||n&&"closed"in n&&Ie(n.remove)&&Ie(n.add)&&Ie(n.unsubscribe)}function cx(n){Ie(n)?n():n.unsubscribe()}var vr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Aa={setTimeout(n,e,...t){let{delegate:r}=Aa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Aa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Hh(n){Aa.setTimeout(()=>{let{onUnhandledError:e}=vr;if(e)e(n);else throw n})}function $l(){}var lx=U_("C",void 0,void 0);function ux(n){return U_("E",void 0,n)}function dx(n){return U_("N",n,void 0)}function U_(n,e,t){return{kind:n,value:e,error:t}}var co=null;function Ra(n){if(vr.useDeprecatedSynchronousErrorHandling){let e=!co;if(e&&(co={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=co;if(co=null,t)throw r}}else n()}function hx(n){vr.useDeprecatedSynchronousErrorHandling&&co&&(co.errorThrown=!0,co.error=n)}var lo=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$h(e)&&e.add(this)):this.destination=RU}static create(e,t,r){return new ka(e,t,r)}next(e){this.isStopped?j_(dx(e),this):this._next(e)}error(e){this.isStopped?j_(ux(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?j_(lx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},xU=Function.prototype.bind;function B_(n,e){return xU.call(n,e)}var $_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Gh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Gh(r)}else Gh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Gh(t)}}},ka=class extends lo{constructor(e,t,r){super();let i;if(Ie(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&vr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&B_(e.next,s),error:e.error&&B_(e.error,s),complete:e.complete&&B_(e.complete,s)}):i=e}this.destination=new $_(i)}};function Gh(n){vr.useDeprecatedSynchronousErrorHandling?hx(n):Hh(n)}function AU(n){throw n}function j_(n,e){let{onStoppedNotification:t}=vr;t&&Aa.setTimeout(()=>t(n,e))}var RU={closed:!0,next:$l,error:AU,complete:$l};var Pa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yr(n){return n}function H_(...n){return G_(n)}function G_(n){return n.length===0?yr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var _e=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=PU(t)?t:new ka(t,r,i);return Ra(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=fx(r),new r((i,s)=>{let o=new ka({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Pa](){return this}pipe(...t){return G_(t)(this)}toPromise(t){return t=fx(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function fx(n){var e;return(e=n??vr.Promise)!==null&&e!==void 0?e:Promise}function kU(n){return n&&Ie(n.next)&&Ie(n.error)&&Ie(n.complete)}function PU(n){return n&&n instanceof lo||kU(n)&&$h(n)}function NU(n){return Ie(n?.lift)}function ze(n){return e=>{if(NU(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function He(n,e,t,r,i){return new z_(n,e,t,r,i)}var z_=class extends lo{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Na={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=Na;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(s=>{t=void 0,n(s)});return new Ke(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=Na;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=Na;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var px=xa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ee=(()=>{class n extends _e{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new zh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new px}next(t){Ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?V_:(this.currentObservers=null,s.push(t),new Ke(()=>{this.currentObservers=null,ao(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new _e;return t.source=this,t}}return n.create=(e,t)=>new zh(e,t),n})(),zh=class extends Ee{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:V_}};var et=class extends Ee{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var q_={now(){return(q_.delegate||Date).now()},delegate:void 0};var qh=class extends Ke{constructor(e,t){super()}schedule(e,t=0){return this}};var Hl={setInterval(n,e,...t){let{delegate:r}=Hl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Hl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ls=class extends qh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Hl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Hl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ao(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ma=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ma.now=q_.now;var us=class extends Ma{constructor(e,t=Ma.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ds=new us(ls),W_=ds;var Wh=class extends ls{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Kh=class extends us{};var K_=new Kh(Wh);var Yh=class extends ls{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Na.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:s}=e;t!=null&&t===e._scheduled&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==t&&(Na.cancelAnimationFrame(t),e._scheduled=void 0)}};var Qh=class extends us{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var Jh=new Qh(Yh);var on=new _e(n=>n.complete());function Zh(n){return n&&Ie(n.schedule)}function Y_(n){return n[n.length-1]}function Xh(n){return Ie(Y_(n))?n.pop():void 0}function Vr(n){return Zh(Y_(n))?n.pop():void 0}function mx(n,e){return typeof Y_(n)=="number"?n.pop():e}function ef(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function _x(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function c(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function gx(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uo(n){return this instanceof uo?(this.v=n,this):new uo(n)}function vx(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(b){return function(S){return Promise.resolve(S).then(b,p)}}function a(b,S){r[b]&&(i[b]=function(P){return new Promise(function(M,H){s.push([b,P,M,H])>1||c(b,P)})},S&&(i[b]=S(i[b])))}function c(b,S){try{u(r[b](S))}catch(P){v(s[0][3],P)}}function u(b){b.value instanceof uo?Promise.resolve(b.value.v).then(d,p):v(s[0][2],b)}function d(b){c("next",b)}function p(b){c("throw",b)}function v(b,S){b(S),s.shift(),s.length&&c(s[0][0],s[0][1])}}function yx(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gx=="function"?gx(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var tf=n=>n&&typeof n.length=="number"&&typeof n!="function";function nf(n){return Ie(n?.then)}function rf(n){return Ie(n[Pa])}function sf(n){return Symbol.asyncIterator&&Ie(n?.[Symbol.asyncIterator])}function of(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function MU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var af=MU();function cf(n){return Ie(n?.[af])}function lf(n){return vx(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield uo(t.read());if(i)return yield uo(void 0);yield yield uo(r)}}finally{t.releaseLock()}})}function uf(n){return Ie(n?.getReader)}function ht(n){if(n instanceof _e)return n;if(n!=null){if(rf(n))return OU(n);if(tf(n))return FU(n);if(nf(n))return LU(n);if(sf(n))return bx(n);if(cf(n))return VU(n);if(uf(n))return UU(n)}throw of(n)}function OU(n){return new _e(e=>{let t=n[Pa]();if(Ie(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function FU(n){return new _e(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function LU(n){return new _e(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Hh)})}function VU(n){return new _e(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function bx(n){return new _e(e=>{BU(n,e).catch(t=>e.error(t))})}function UU(n){return bx(lf(n))}function BU(n,e){var t,r,i,s;return _x(this,void 0,void 0,function*(){try{for(t=yx(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Cn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function hs(n,e=0){return ze((t,r)=>{t.subscribe(He(r,i=>Cn(r,n,()=>r.next(i),e),()=>Cn(r,n,()=>r.complete(),e),i=>Cn(r,n,()=>r.error(i),e)))})}function fs(n,e=0){return ze((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ex(n,e){return ht(n).pipe(fs(e),hs(e))}function wx(n,e){return ht(n).pipe(fs(e),hs(e))}function Ix(n,e){return new _e(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Sx(n,e){return new _e(t=>{let r;return Cn(t,e,()=>{r=n[af](),Cn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Ie(r?.return)&&r.return()})}function df(n,e){if(!n)throw new Error("Iterable cannot be null");return new _e(t=>{Cn(t,e,()=>{let r=n[Symbol.asyncIterator]();Cn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Cx(n,e){return df(lf(n),e)}function Tx(n,e){if(n!=null){if(rf(n))return Ex(n,e);if(tf(n))return Ix(n,e);if(nf(n))return wx(n,e);if(sf(n))return df(n,e);if(cf(n))return Sx(n,e);if(uf(n))return Cx(n,e)}throw of(n)}function Ye(n,e){return e?Tx(n,e):ht(n)}function De(...n){let e=Vr(n);return Ye(n,e)}function Q_(n,e){let t=Ie(n)?n:()=>n,r=i=>i.error(t());return new _e(e?i=>e.schedule(r,0,i):r)}function Gl(n){return!!n&&(n instanceof _e||Ie(n.lift)&&Ie(n.subscribe))}var ho=xa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Dx(n){return n instanceof Date&&!isNaN(n)}function Ue(n,e){return ze((t,r)=>{let i=0;t.subscribe(He(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:jU}=Array;function $U(n,e){return jU(e)?n(...e):n(e)}function hf(n){return Ue(e=>$U(n,e))}var{isArray:HU}=Array,{getPrototypeOf:GU,prototype:zU,keys:qU}=Object;function ff(n){if(n.length===1){let e=n[0];if(HU(e))return{args:e,keys:null};if(WU(e)){let t=qU(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function WU(n){return n&&typeof n=="object"&&GU(n)===zU}function pf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function mf(...n){let e=Vr(n),t=Xh(n),{args:r,keys:i}=ff(n);if(r.length===0)return Ye([],e);let s=new _e(KU(r,e,i?o=>pf(i,o):yr));return t?s.pipe(hf(t)):s}function KU(n,e,t=yr){return r=>{xx(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)xx(e,()=>{let u=Ye(n[c],e),d=!1;u.subscribe(He(r,p=>{s[c]=p,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function xx(n,e,t){n?Cn(t,n,e):e()}function Ax(n,e,t,r,i,s,o,a){let c=[],u=0,d=0,p=!1,v=()=>{p&&!c.length&&!u&&e.complete()},b=P=>u<r?S(P):c.push(P),S=P=>{s&&e.next(P),u++;let M=!1;ht(t(P,d++)).subscribe(He(e,H=>{i?.(H),s?b(H):e.next(H)},()=>{M=!0},void 0,()=>{if(M)try{for(u--;c.length&&u<r;){let H=c.shift();o?Cn(e,o,()=>S(H)):S(H)}v()}catch(H){e.error(H)}}))};return n.subscribe(He(e,b,()=>{p=!0,v()})),()=>{a?.()}}function Yt(n,e,t=1/0){return Ie(e)?Yt((r,i)=>Ue((s,o)=>e(r,s,i,o))(ht(n(r,i))),t):(typeof e=="number"&&(t=e),ze((r,i)=>Ax(r,i,n,t)))}function ps(n=1/0){return Yt(yr,n)}function Rx(){return ps(1)}function Oa(...n){return Rx()(Ye(n,Vr(n)))}function zl(n){return new _e(e=>{ht(n()).subscribe(e)})}function ql(...n){let e=Xh(n),{args:t,keys:r}=ff(n),i=new _e(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let d=0;d<o;d++){let p=!1;ht(t[d]).subscribe(He(s,v=>{p||(p=!0,u--),a[d]=v},()=>c--,void 0,()=>{(!c||!p)&&(u||s.next(r?pf(r,a):a),s.complete())}))}});return e?i.pipe(hf(e)):i}function gf(n=0,e,t=W_){let r=-1;return e!=null&&(Zh(e)?t=e:r=e),new _e(i=>{let s=Dx(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function ms(n=0,e=ds){return n<0&&(n=0),gf(n,n,e)}function _f(...n){let e=Vr(n),t=mx(n,1/0),r=n;return r.length?r.length===1?ht(r[0]):ps(t)(Ye(r,e)):on}function fn(n,e){return ze((t,r)=>{let i=0;t.subscribe(He(r,s=>n.call(e,s,i++)&&r.next(s)))})}function kx(n){return ze((e,t)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let u=i;i=null,t.next(u)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(He(t,u=>{r=!0,i=u,s||ht(n(u)).subscribe(s=He(t,a,c))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}function J_(n,e=ds){return kx(()=>gf(n,e))}function Fa(n){return ze((e,t)=>{let r=null,i=!1,s;r=e.subscribe(He(t,void 0,void 0,o=>{s=ht(n(o,Fa(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function La(n,e){return Ie(e)?Yt(n,e,1):Yt(n,1)}function Z_(n){return ze((e,t)=>{let r=!1;e.subscribe(He(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function st(n){return n<=0?()=>on:ze((e,t)=>{let r=0;e.subscribe(He(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Px(n=YU){return ze((e,t)=>{let r=!1;e.subscribe(He(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function YU(){return new ho}function X_(n){return ze((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ei(n,e){let t=arguments.length>=2;return r=>r.pipe(n?fn((i,s)=>n(i,s,r)):yr,st(1),t?Z_(e):Px(()=>new ho))}function vf(n){return n<=0?()=>on:ze((e,t)=>{let r=[];e.subscribe(He(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Va(...n){let e=Vr(n);return ze((t,r)=>{(e?Oa(n,t,e):Oa(n,t)).subscribe(r)})}function Tn(n,e){return ze((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(He(r,c=>{i?.unsubscribe();let u=0,d=s++;ht(n(c,d)).subscribe(i=He(r,p=>r.next(e?e(c,p,d,u++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ur(n){return ze((e,t)=>{ht(n).subscribe(He(t,()=>t.complete(),$l)),!t.closed&&e.subscribe(t)})}function Qt(n,e,t){let r=Ie(n)||e||t?{next:n,error:e,complete:t}:n;return r?ze((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(He(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):yr}var ev;function yf(){return ev}function Br(n){let e=ev;return ev=n,e}var Nx=Symbol("NotFound");function Ua(n){return n===Nx||n?.name==="\u0275NotFound"}var gs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},gv=new gs("21.0.0");var _v="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",z=class extends Error{code;constructor(e,t){super(bs(e,t)),this.code=e}};function ZU(n){return`NG0${Math.abs(n)}`}function bs(n,e){return`${ZU(n)}${e?": "+e:""}`}var mn=globalThis;function Qe(n){for(let e in n)if(n[e]===Qe)return e;throw Error("")}function Vx(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ii(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ii).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function vv(n,e){return n?e?`${n} ${e}`:n:e||""}var XU=Qe({__forward_ref__:Qe});function Si(n){return n.__forward_ref__=Si,n.toString=function(){return Ii(this())},n}function Jt(n){return yv(n)?n():n}function yv(n){return typeof n=="function"&&n.hasOwnProperty(XU)&&n.__forward_ref__===Si}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function dt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zl(n){return e3(n,Sf)}function bv(n){return Zl(n)!==null}function e3(n,e){return n.hasOwnProperty(e)&&n[e]||null}function t3(n){let e=n?.[Sf]??null;return e||null}function nv(n){return n&&n.hasOwnProperty(Ef)?n[Ef]:null}var Sf=Qe({\u0275prov:Qe}),Ef=Qe({\u0275inj:Qe}),Z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ev(n){return n&&!!n.\u0275providers}var wv=Qe({\u0275cmp:Qe}),Iv=Qe({\u0275dir:Qe}),Sv=Qe({\u0275pipe:Qe}),Cv=Qe({\u0275mod:Qe}),Kl=Qe({\u0275fac:Qe}),_o=Qe({__NG_ELEMENT_ID__:Qe}),Mx=Qe({__NG_ENV_ID__:Qe});function Xl(n){return typeof n=="string"?n:n==null?"":String(n)}function Ux(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Xl(n)}var Bx=Qe({ngErrorCode:Qe}),n3=Qe({ngErrorMessage:Qe}),r3=Qe({ngTokenPath:Qe});function Tv(n,e){return jx("",-200,e)}function Cf(n,e){throw new z(-201,!1)}function jx(n,e,t){let r=new z(e,n);return r[Bx]=e,r[n3]=n,t&&(r[r3]=t),r}function i3(n){return n[Bx]}var rv;function $x(){return rv}function pn(n){let e=rv;return rv=n,e}function Dv(n,e,t){let r=Zl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Cf(n,"Injector")}var s3={},fo=s3,iv="__NG_DI_FLAG__",sv=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=po(t)||0;try{return this.injector.get(e,r&8?null:fo,r)}catch(i){if(Ua(i))return i;throw i}}};function o3(n,e=0){let t=yf();if(t===void 0)throw new z(-203,!1);if(t===null)return Dv(n,void 0,e);{let r=a3(e),i=t.retrieve(n,r);if(Ua(i)){if(r.optional)return null;throw i}return i}}function ae(n,e=0){return($x()||o3)(Jt(n),e)}function F(n,e){return ae(n,po(e))}function po(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function a3(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function ov(n){let e=[];for(let t=0;t<n.length;t++){let r=Jt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=c3(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ae(i,s))}else e.push(ae(r))}return e}function Hx(n,e){return n[iv]=e,n.prototype[iv]=e,n}function c3(n){return n[iv]}function _s(n,e){let t=n.hasOwnProperty(Kl);return t?n[Kl]:null}function Gx(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function zx(n){return n.flat(Number.POSITIVE_INFINITY)}function Tf(n,e){n.forEach(t=>Array.isArray(t)?Tf(t,e):e(t))}function xv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function eu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qx(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function Wx(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function Kx(n,e,t){let r=ja(n,e);return r>=0?n[r|1]=t:(r=~r,Wx(n,r,e,t)),r}function Df(n,e){let t=ja(n,e);if(t>=0)return n[t|1]}function ja(n,e){return l3(n,e,1)}function l3(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Es={},Fn=[],$a=new Z(""),Av=new Z("",-1),Rv=new Z(""),Yl=class{get(e,t=fo){if(t===fo){let i=jx("",-201);throw i.name="\u0275NotFound",i}return t}};function kv(n){return n[Cv]||null}function $r(n){return n[wv]||null}function Pv(n){return n[Iv]||null}function Yx(n){return n[Sv]||null}function br(n){return{\u0275providers:n}}function Qx(...n){return{\u0275providers:Nv(!0,n),\u0275fromNgModule:!0}}function Nv(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Tf(e,o=>{let a=o;wf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Jx(i,s),t}function Jx(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Mv(i,s=>{e(s,r)})}}function wf(n,e,t,r){if(n=Jt(n),!n)return!1;let i=null,s=nv(n),o=!s&&$r(n);if(!s&&!o){let c=n.ngModule;if(s=nv(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)wf(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{Tf(s.imports,d=>{wf(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&Jx(u,e)}if(!a){let u=_s(i)||(()=>new i);e({provide:i,useFactory:u,deps:Fn},i),e({provide:Rv,useValue:i,multi:!0},i),e({provide:$a,useValue:()=>ae(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=n;Mv(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Mv(n,e){for(let t of n)Ev(t)&&(t=t.\u0275providers),Array.isArray(t)?Mv(t,e):e(t)}var u3=Qe({provide:String,useValue:Qe});function Zx(n){return n!==null&&typeof n=="object"&&u3 in n}function d3(n){return!!(n&&n.useExisting)}function h3(n){return!!(n&&n.useFactory)}function mo(n){return typeof n=="function"}function Xx(n){return!!n.useClass}var tu=new Z(""),bf={},Ox={},tv;function Ha(){return tv===void 0&&(tv=new Yl),tv}var bt=class{},go=class extends bt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,cv(e,o=>this.processProvider(o)),this.records.set(Av,Ba(void 0,this)),i.has("environment")&&this.records.set(bt,Ba(void 0,this));let s=this.records.get(tu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Rv,Fn,{self:!0}))}retrieve(e,t){let r=po(t)||0;try{return this.get(e,fo,r)}catch(i){if(Ua(i))return i;throw i}}destroy(){Wl(this),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return Wl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Wl(this);let t=Br(this),r=pn(void 0),i;try{return e()}finally{Br(t),pn(r)}}get(e,t=fo,r){if(Wl(this),e.hasOwnProperty(Mx))return e[Mx](this);let i=po(r),s,o=Br(this),a=pn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=_3(e)&&Zl(e);d&&this.injectableDefInScope(d)?u=Ba(av(e),bf):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Ha():this.parent;return t=i&8&&t===fo?null:t,c.get(e,t)}catch(c){let u=i3(c);throw u===-200||u===-201?new z(u,null):c}finally{pn(a),Br(o)}}resolveInjectorInitializers(){let e=Te(null),t=Br(this),r=pn(void 0),i;try{let s=this.get($a,Fn,{self:!0});for(let o of s)o()}finally{Br(t),pn(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ii(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Jt(e);let t=mo(e)?e:Jt(e&&e.provide),r=p3(e);if(!mo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ba(void 0,bf,!0),i.factory=()=>ov(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Te(null);try{if(t.value===Ox)throw Tv(Ii(e));return t.value===bf&&(t.value=Ox,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&g3(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Jt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function av(n){let e=Zl(n),t=e!==null?e.factory:_s(n);if(t!==null)return t;if(n instanceof Z)throw new z(204,!1);if(n instanceof Function)return f3(n);throw new z(204,!1)}function f3(n){if(n.length>0)throw new z(204,!1);let t=t3(n);return t!==null?()=>t.factory(n):()=>new n}function p3(n){if(Zx(n))return Ba(void 0,n.useValue);{let e=Ov(n);return Ba(e,bf)}}function Ov(n,e,t){let r;if(mo(n)){let i=Jt(n);return _s(i)||av(i)}else if(Zx(n))r=()=>Jt(n.useValue);else if(h3(n))r=()=>n.useFactory(...ov(n.deps||[]));else if(d3(n))r=(i,s)=>ae(Jt(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Jt(n&&(n.useClass||n.provide));if(m3(n))r=()=>new i(...ov(n.deps));else return _s(i)||av(i)}return r}function Wl(n){if(n.destroyed)throw new z(205,!1)}function Ba(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function m3(n){return!!n.deps}function g3(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function _3(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function cv(n,e){for(let t of n)Array.isArray(t)?cv(t,e):t&&Ev(t)?cv(t.\u0275providers,e):e(t)}function kt(n,e){let t;n instanceof go?(Wl(n),t=n):t=new sv(n);let r,i=Br(t),s=pn(void 0);try{return e()}finally{Br(i),pn(s)}}function Fv(){return $x()!==void 0||yf()!=null}var Er=0,pe=1,ye=2,jt=3,Jn=4,gn=5,Ga=6,za=7,an=8,ws=9,Ci=10,gt=11,qa=12,Lv=13,vo=14,Dn=15,Is=16,yo=17,Hr=18,nu=19,Vv=20,wi=21,xf=22,ru=23,Ln=24,bo=25,iu=26,Ct=27,e1=1;var Ss=7,su=8,Eo=9,_n=10;function Gr(n){return Array.isArray(n)&&typeof n[e1]=="object"}function wr(n){return Array.isArray(n)&&n[e1]===!0}function Uv(n){return(n.flags&4)!==0}function Cs(n){return n.componentOffset>-1}function Wa(n){return(n.flags&1)===1}function zr(n){return!!n.template}function Ka(n){return(n[ye]&512)!==0}function wo(n){return(n[ye]&256)===256}var Bv="svg",t1="math";function Zn(n){for(;Array.isArray(n);)n=n[Er];return n}function jv(n,e){return Zn(e[n])}function qr(n,e){return Zn(e[n.index])}function Af(n,e){return n.data[e]}function Rf(n,e){return n[e]}function $v(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Xn(n,e){let t=e[n];return Gr(t)?t:t[Er]}function n1(n){return(n[ye]&4)===4}function kf(n){return(n[ye]&128)===128}function r1(n){return wr(n[jt])}function Ya(n,e){return e==null?null:n[e]}function Hv(n){n[yo]=0}function Gv(n){n[ye]&1024||(n[ye]|=1024,kf(n)&&Qa(n))}function i1(n,e){for(;n>0;)e=e[vo],n--;return e}function ou(n){return!!(n[ye]&9216||n[Ln]?.dirty)}function Pf(n){n[Ci].changeDetectionScheduler?.notify(8),n[ye]&64&&(n[ye]|=1024),ou(n)&&Qa(n)}function Qa(n){n[Ci].changeDetectionScheduler?.notify(0);let e=vs(n);for(;e!==null&&!(e[ye]&8192||(e[ye]|=8192,!kf(e)));)e=vs(e)}function zv(n,e){if(wo(n))throw new z(911,!1);n[wi]===null&&(n[wi]=[]),n[wi].push(e)}function s1(n,e){if(n[wi]===null)return;let t=n[wi].indexOf(e);t!==-1&&n[wi].splice(t,1)}function vs(n){let e=n[jt];return wr(e)?e[jt]:e}function qv(n){return n[za]??=[]}function Wv(n){return n.cleanup??=[]}function o1(n,e,t,r){let i=qv(e);i.push(t),n.firstCreatePass&&Wv(n).push(r,i.length-1)}var Ce={lFrame:E1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var lv=!1;function a1(){return Ce.lFrame.elementDepthCount}function c1(){Ce.lFrame.elementDepthCount++}function l1(){Ce.lFrame.elementDepthCount--}function Nf(){return Ce.bindingsEnabled}function Kv(){return Ce.skipHydrationRootTNode!==null}function u1(n){return Ce.skipHydrationRootTNode===n}function d1(){Ce.skipHydrationRootTNode=null}function Ae(){return Ce.lFrame.lView}function Zt(){return Ce.lFrame.tView}function j(n){return Ce.lFrame.contextLView=n,n[an]}function $(n){return Ce.lFrame.contextLView=null,n}function vn(){let n=Yv();for(;n!==null&&n.type===64;)n=n.parent;return n}function Yv(){return Ce.lFrame.currentTNode}function h1(){let n=Ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ja(n,e){let t=Ce.lFrame;t.currentTNode=n,t.isParent=e}function Qv(){return Ce.lFrame.isParent}function Jv(){Ce.lFrame.isParent=!1}function f1(){return Ce.lFrame.contextLView}function Zv(){return lv}function Xv(n){let e=lv;return lv=n,e}function Io(){let n=Ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function p1(){return Ce.lFrame.bindingIndex}function m1(n){return Ce.lFrame.bindingIndex=n}function Mf(){return Ce.lFrame.bindingIndex++}function ey(n){let e=Ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function g1(){return Ce.lFrame.inI18n}function _1(n,e){let t=Ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Of(e)}function v1(){return Ce.lFrame.currentDirectiveIndex}function Of(n){Ce.lFrame.currentDirectiveIndex=n}function y1(n){let e=Ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ty(){return Ce.lFrame.currentQueryIndex}function Ff(n){Ce.lFrame.currentQueryIndex=n}function v3(n){let e=n[pe];return e.type===2?e.declTNode:e.type===1?n[gn]:null}function ny(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=v3(s),i===null||(s=s[vo],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ce.lFrame=b1();return r.currentTNode=e,r.lView=n,!0}function Lf(n){let e=b1(),t=n[pe];Ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function b1(){let n=Ce.lFrame,e=n===null?null:n.child;return e===null?E1(n):e}function E1(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function w1(){let n=Ce.lFrame;return Ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ry=w1;function Vf(){let n=w1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function I1(n){return(Ce.lFrame.contextLView=i1(n,Ce.lFrame.contextLView))[an]}function Ts(){return Ce.lFrame.selectedIndex}function Ds(n){Ce.lFrame.selectedIndex=n}function iy(){let n=Ce.lFrame;return Af(n.tView,n.selectedIndex)}function er(){Ce.lFrame.currentNamespace=Bv}function xs(){y3()}function y3(){Ce.lFrame.currentNamespace=null}function S1(){return Ce.lFrame.currentNamespace}var C1=!0;function Uf(){return C1}function au(n){C1=n}function uv(n,e=null,t=null,r){let i=sy(n,e,t,r);return i.resolveInjectorInitializers(),i}function sy(n,e=null,t=null,r,i=new Set){let s=[t||Fn,Qx(n)];return r=r||(typeof n=="object"?void 0:Ii(n)),new go(s,e||Ha(),r||null,i)}var Ze=class n{static THROW_IF_NOT_FOUND=fo;static NULL=new Yl;static create(e,t){if(Array.isArray(e))return uv({name:""},t,e,"");{let r=e.name??"";return uv({name:r},e.parent,e.providers,r)}}static \u0275prov=K({token:n,providedIn:"any",factory:()=>ae(Av)});static __NG_ELEMENT_ID__=-1},nt=new Z(""),tr=(()=>{class n{static __NG_ELEMENT_ID__=b3;static __NG_ENV_ID__=t=>t}return n})(),dv=class extends tr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return wo(this._lView)}onDestroy(e){let t=this._lView;return zv(t,e),()=>s1(t,e)}};function b3(){return new dv(Ae())}var T1=!1,Ti=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new et(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new _e(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),hv=class extends Ee{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Fv()&&(this.destroyRef=F(tr,{optional:!0})??void 0,this.pendingTasks=F(Ti,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ke=hv;function If(...n){}function oy(n){let e,t;function r(){n=If;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ay(n){return queueMicrotask(()=>n()),()=>{n=If}}var cy="isAngularZone",Ql=cy+"_ID",E3=0,Ve=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ke(!1);onMicrotaskEmpty=new ke(!1);onStable=new ke(!1);onError=new ke(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=T1}=e;if(typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,S3(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(cy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,w3,If,If);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},w3={};function ly(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function I3(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){oy(()=>{n.callbackScheduled=!1,fv(n),n.isCheckStableRunning=!0,ly(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),fv(n)}function S3(n){let e=()=>{I3(n)},t=E3++;n._inner=n._inner.fork({name:"angular",properties:{[cy]:!0,[Ql]:t,[Ql+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(C3(c))return r.invokeTask(s,o,a,c);try{return Fx(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Lx(n)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return Fx(n),r.invoke(s,o,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!T3(c)&&e(),Lx(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,fv(n),ly(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function fv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Fx(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Lx(n){n._nesting--,ly(n)}var Jl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ke;onMicrotaskEmpty=new ke;onStable=new ke;onError=new ke;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function C3(n){return D1(n,"__ignore_ng_zone__")}function T3(n){return D1(n,"__scheduler_tick__")}function D1(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var jr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},nr=new Z("",{factory:()=>{let n=F(Ve),e=F(bt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(jr),t.handleError(r))})}}}),x1={provide:$a,useValue:()=>{let n=F(jr,{optional:!0})},multi:!0};function Xt(n,e){let[t,r,i]=F_(n,e?.equal),s=t,o=s[hn];return s.set=r,s.update=i,s.asReadonly=A1.bind(s),s}function A1(){let n=this[hn];if(n.readonlyFn===void 0){let e=()=>this();e[hn]=n,n.readonlyFn=e}return n.readonlyFn}var Bf=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=D3}return n})();function D3(){return new Bf(Ae(),vn())}var ys=class{},cu=new Z("",{factory:()=>!0});var uy=new Z(""),Za=(()=>{class n{internalPendingTasks=F(Ti);scheduler=F(ys);errorHandler=F(nr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),dy=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>new pv})}return n})(),pv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},mv=class{[hn];constructor(e){this[hn]=e}destroy(){this[hn].destroy()}};function Tt(n){return L_(n)}function ic(n){return{toString:n}.toString()}var jf="__parameters__";function N3(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function M3(n,e,t){return ic(()=>{let r=N3(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,d){let p=c.hasOwnProperty(jf)?c[jf]:Object.defineProperty(c,jf,{value:[]})[jf];for(;p.length<=d;)p.push(null);return(p[d]=p[d]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Vn=Hx(M3("Optional"),8);function nA(n){let e=mn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function O3(n){return typeof n=="function"}function rA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Kf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Tr=(()=>{let n=()=>iA;return n.ngInherit=!0,n})();function iA(n){return n.type.prototype.ngOnChanges&&(n.setInput=L3),F3}function F3(){let n=oA(this),e=n?.current;if(e){let t=n.previous;if(t===Es)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function L3(n,e,t,r,i){let s=this.declaredInputs[r],o=oA(n)||V3(n,{previous:Es,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Kf(u&&u.currentValue,t,c===Es),rA(n,e,i,t)}var sA="__ngSimpleChanges__";function oA(n){return n[sA]||null}function V3(n,e){return n[sA]=e}var R1=[];var rt=function(n,e=null,t){for(let r=0;r<R1.length;r++){let i=R1[r];i(n,e,t)}};function U3(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=iA(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function aA(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Gf(n,e,t){cA(n,e,3,t)}function zf(n,e,t,r){(n[ye]&3)===t&&cA(n,e,t,r)}function hy(n,e){let t=n[ye];(t&3)===e&&(t&=16383,t+=1,n[ye]=t)}function cA(n,e,t,r){let i=r!==void 0?n[yo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[yo]+=65536),(a<s||s==-1)&&(B3(n,t,e,c),n[yo]=(n[yo]&4294901760)+c+2),c++}function k1(n,e){rt(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),rt(5,n,e)}}function B3(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ye]>>14<n[yo]>>16&&(n[ye]&3)===e&&(n[ye]+=16384,k1(a,s)):k1(a,s)}var ec=-1,Co=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function j3(n){return(n.flags&8)!==0}function $3(n){return(n.flags&16)!==0}function H3(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];z3(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function G3(n){return n===3||n===4||n===6}function z3(n){return n.charCodeAt(0)===64}function fu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?P1(n,t,i,null,e[++r]):P1(n,t,i,null,null))}}return n}function P1(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function lA(n){return n!==ec}function Yf(n){return n&32767}function q3(n){return n>>16}function Qf(n,e){let t=q3(n),r=e;for(;t>0;)r=r[vo],t--;return r}var wy=!0;function Jf(n){let e=wy;return wy=n,e}var W3=256,uA=W3-1,dA=5,K3=0,Wr={};function Y3(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(_o)&&(r=t[_o]),r==null&&(r=t[_o]=K3++);let i=r&uA,s=1<<i;e.data[n+(i>>dA)]|=s}function Zf(n,e){let t=hA(n,e);if(t!==-1)return t;let r=e[pe];r.firstCreatePass&&(n.injectorIndex=e.length,fy(r.data,n),fy(e,null),fy(r.blueprint,null));let i=Yy(n,e),s=n.injectorIndex;if(lA(i)){let o=Yf(i),a=Qf(i,e),c=a[pe].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function fy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function hA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Yy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=_A(i),r===null)return ec;if(t++,i=i[vo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ec}function Iy(n,e,t){Y3(n,e,t)}function fA(n,e,t){if(t&8||n!==void 0)return n;Cf(e,"NodeInjector")}function pA(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ws],s=pn(void 0);try{return i?i.get(e,r,t&8):Dv(e,r,t&8)}finally{pn(s)}}return fA(r,e,t)}function mA(n,e,t,r=0,i){if(n!==null){if(e[ye]&2048&&!(r&2)){let o=X3(n,e,t,r,Wr);if(o!==Wr)return o}let s=gA(n,e,t,r,Wr);if(s!==Wr)return s}return pA(e,t,r,i)}function gA(n,e,t,r,i){let s=J3(t);if(typeof s=="function"){if(!ny(e,n,r))return r&1?fA(i,t,r):pA(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Cf(t);else return o}finally{ry()}}else if(typeof s=="number"){let o=null,a=hA(n,e),c=ec,u=r&1?e[Dn][gn]:null;for((a===-1||r&4)&&(c=a===-1?Yy(n,e):e[a+8],c===ec||!M1(r,!1)?a=-1:(o=e[pe],a=Yf(c),e=Qf(c,e)));a!==-1;){let d=e[pe];if(N1(s,a,d.data)){let p=Q3(a,e,t,o,r,u);if(p!==Wr)return p}c=e[a+8],c!==ec&&M1(r,e[pe].data[a+8]===u)&&N1(s,a,e)?(o=d,a=Yf(c),e=Qf(c,e)):a=-1}}return i}function Q3(n,e,t,r,i,s){let o=e[pe],a=o.data[n+8],c=r==null?Cs(a)&&wy:r!=o&&(a.type&3)!==0,u=i&1&&s===a,d=qf(a,o,t,c,u);return d!==null?pu(e,o,d,a,i):Wr}function qf(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,u=n.directiveEnd,d=s>>20,p=r?a:a+d,v=i?a+d:u;for(let b=p;b<v;b++){let S=o[b];if(b<c&&t===S||b>=c&&S.type===t)return b}if(i){let b=o[c];if(b&&zr(b)&&b.type===t)return c}return null}function pu(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Co){let a=s;if(a.resolving){let b=Ux(o[t]);throw Tv(b)}let c=Jf(a.canSeeViewProviders);a.resolving=!0;let u=o[t].type||o[t],d,p=a.injectImpl?pn(a.injectImpl):null,v=ny(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&U3(t,o[t],e)}finally{p!==null&&pn(p),Jf(c),a.resolving=!1,ry()}}return s}function J3(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_o)?n[_o]:void 0;return typeof e=="number"?e>=0?e&uA:Z3:e}function N1(n,e,t){let r=1<<n;return!!(t[e+(n>>dA)]&r)}function M1(n,e){return!(n&2)&&!(n&1&&e)}var So=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mA(this._tNode,this._lView,e,po(r),t)}};function Z3(){return new So(vn(),Ae())}function Ps(n){return ic(()=>{let e=n.prototype.constructor,t=e[Kl]||Sy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Kl]||Sy(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Sy(n){return yv(n)?()=>{let e=Sy(Jt(n));return e&&e()}:_s(n)}function X3(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ye]&2048&&!Ka(o);){let a=gA(s,o,t,r|2,Wr);if(a!==Wr)return a;let c=s.parent;if(!c){let u=o[Vv];if(u){let d=u.get(t,Wr,r);if(d!==Wr)return d}c=_A(o),o=o[vo]}s=c}return i}function _A(n){let e=n[pe],t=e.type;return t===2?e.declTNode:t===1?n[gn]:null}function e4(){return sc(vn(),Ae())}function sc(n,e){return new en(qr(n,e))}var en=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=e4}return n})();function t4(n){return n instanceof en?n.nativeElement:n}function n4(){return this._results[Symbol.iterator]()}var Xf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ee}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=zx(e);(this._changesDetected=!Gx(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=n4};function vA(n){return(n.flags&128)===128}var Qy=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Qy||{}),yA=new Map,r4=0;function i4(){return r4++}function s4(n){yA.set(n[nu],n)}function Cy(n){yA.delete(n[nu])}var O1="__ngContext__";function tc(n,e){Gr(e)?(n[O1]=e[nu],s4(e)):n[O1]=e}function bA(n){return wA(n[qa])}function EA(n){return wA(n[Jn])}function wA(n){for(;n!==null&&!wr(n);)n=n[Jn];return n}var Ty;function Jy(n){Ty=n}function IA(){if(Ty!==void 0)return Ty;if(typeof document<"u")return document;throw new z(210,!1)}var ap=new Z("",{factory:()=>o4}),o4="ng";var cp=new Z(""),xi=new Z("",{providedIn:"platform",factory:()=>"unknown"}),lp=new Z(""),up=new Z("",{factory:()=>IA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var SA=!1,CA=new Z("",{factory:()=>SA});var Zy=new Z("");var a4=(n,e,t,r)=>{};function c4(n,e,t,r){a4(n,e,t,r)}function dp(n){return(n.flags&32)===32}var l4=()=>null;function TA(n,e,t=!1){return l4(n,e,t)}function DA(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Ff(s),a.contentQueries(2,e[o],o)}}}finally{Te(r)}}}function Dy(n,e,t){Ff(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function Xy(n,e,t){if(Uv(e)){let r=Te(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Te(r)}}}var Sr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Sr||{});var xy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_v})`}};function eb(n){return n instanceof xy?n.changingThisBreaksApplicationSecurity:n}var u4=/^>|^->|<!--|-->|--!>|<!-$/g,d4=/(<|>)/g,h4="\u200B$1\u200B";function f4(n){return n.replace(u4,e=>e.replace(d4,h4))}function yu(n){return n.ownerDocument.defaultView}function xA(n){return n instanceof Function?n():n}function p4(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var AA="ng-template";function m4(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&p4(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(tb(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function tb(n){return n.type===4&&n.value!==AA}function g4(n,e,t){let r=n.type===4&&!t?AA:n.value;return e===r}function _4(n,e,t){let r=4,i=n.attrs,s=i!==null?b4(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Ir(r)&&!Ir(c))return!1;if(o&&Ir(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!g4(n,c,t)||c===""&&e.length===1){if(Ir(r))return!1;o=!0}}else if(r&8){if(i===null||!m4(n,i,c,t)){if(Ir(r))return!1;o=!0}}else{let u=e[++a],d=v4(c,i,tb(n),t);if(d===-1){if(Ir(r))return!1;o=!0;continue}if(u!==""){let p;if(d>s?p="":p=i[d+1].toLowerCase(),r&2&&u!==p){if(Ir(r))return!1;o=!0}}}}return Ir(r)||o}function Ir(n){return(n&1)===0}function v4(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return E4(e,n)}function RA(n,e,t=!1){for(let r=0;r<e.length;r++)if(_4(n,e[r],t))return!0;return!1}function y4(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function b4(n){for(let e=0;e<n.length;e++){let t=n[e];if(G3(t))return e}return n.length}function E4(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function w4(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function F1(n,e){return n?":not("+e.trim()+")":e}function I4(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ir(o)&&(e+=F1(s,i),i=""),r=o,s=s||!Ir(r);t++}return i!==""&&(e+=F1(s,i)),e}function S4(n){return n.map(I4).join(",")}function C4(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Ir(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var rr={};function T4(n,e){return n.createText(e)}function D4(n,e,t){n.setValue(e,t)}function x4(n,e){return n.createComment(f4(e))}function kA(n,e,t){return n.createElement(e,t)}function ep(n,e,t,r,i){n.insertBefore(e,t,r,i)}function PA(n,e,t){n.appendChild(e,t)}function L1(n,e,t,r,i){r!==null?ep(n,e,t,r,i):PA(n,e,t)}function A4(n,e,t,r){n.removeChild(null,e,t,r)}function R4(n,e,t){n.setAttribute(e,"style",t)}function k4(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function NA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&H3(n,e,r),i!==null&&k4(n,e,i),s!==null&&R4(n,e,s)}function nb(n,e,t,r,i,s,o,a,c,u,d){let p=Ct+r,v=p+i,b=P4(p,v),S=typeof u=="function"?u():u;return b[pe]={type:n,blueprint:b,template:t,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:S,incompleteFirstPass:!1,ssrId:d}}function P4(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:rr);return t}function N4(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=nb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function rb(n,e,t,r,i,s,o,a,c,u,d){let p=e.blueprint.slice();return p[Er]=i,p[ye]=r|4|128|8|64|1024,(u!==null||n&&n[ye]&2048)&&(p[ye]|=2048),Hv(p),p[jt]=p[vo]=n,p[an]=t,p[Ci]=o||n&&n[Ci],p[gt]=a||n&&n[gt],p[ws]=c||n&&n[ws]||null,p[gn]=s,p[nu]=i4(),p[Ga]=d,p[Vv]=u,p[Dn]=e.type==2?n[Dn]:p,p}function M4(n,e,t){let r=qr(e,n),i=N4(t),s=n[Ci].rendererFactory,o=ib(n,rb(n,i,null,MA(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function MA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function OA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ib(n,e){return n[qa]?n[Lv][Jn]=e:n[qa]=e,n[Lv]=e,e}function _(n=1){FA(Zt(),Ae(),Ts()+n,!1)}function FA(n,e,t,r){if(!r)if((e[ye]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Gf(e,s,t)}else{let s=n.preOrderHooks;s!==null&&zf(e,s,0,t)}Ds(t)}var hp=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(hp||{});function Ay(n,e,t,r){let i=Te(null);try{let[s,o,a]=n.inputs[t],c=null;(o&hp.SignalBased)!==0&&(c=e[s][hn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):rA(e,c,s,r)}finally{Te(i)}}var Kr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Kr||{}),O4;function sb(n,e){return O4(n,e)}var nc=new Set,fp=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(fp||{}),xo=new Z(""),V1=new Set;function Ao(n){V1.has(n)||(V1.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ob=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),LA=[0,1,2,3],VA=(()=>{class n{ngZone=F(Ve);scheduler=F(ys);errorHandler=F(jr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F(xo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&rt(16),this.executing=!0;for(let r of LA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&rt(17)}register(t){let{view:r}=t;r!==void 0?((r[bo]??=[]).push(t),Qa(r),r[ye]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(fp.AFTER_NEXT_RENDER,t):t()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),tp=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[bo];e&&(this.view[bo]=e.filter(t=>t!==this))}};function Ro(n,e){let t=e?.injector??F(Ze);return Ao("NgAfterNextRender"),L4(n,t,e,!0)}function F4(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function L4(n,e,t,r){let i=e.get(ob);i.impl??=e.get(VA);let s=e.get(xo,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(tr):null,a=e.get(Bf,null,{optional:!0}),c=new tp(i.impl,F4(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var V4=new Z("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function UA(n,e,t){let r=n.get(V4);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function U4(n,e){for(let[t,r]of e)UA(n,r.animateFns)}function U1(n,e,t,r){let i=n?.[iu]?.enter;e!==null&&i&&i.has(t.index)&&U4(r,i)}function Xa(n,e,t,r,i,s,o,a){if(i!=null){let c,u=!1;wr(i)?c=i:Gr(i)&&(u=!0,i=i[Er]);let d=Zn(i);n===0&&r!==null?(U1(a,r,s,t),o==null?PA(e,r,d):ep(e,r,d,o||null,!0)):n===1&&r!==null?(U1(a,r,s,t),ep(e,r,d,o||null,!0)):n===2?B1(a,s,t,p=>{A4(e,d,u,p)}):n===3&&B1(a,s,t,()=>{e.destroyNode(d)}),c!=null&&Q4(e,n,t,c,s,r,o)}}function B4(n,e){BA(n,e),e[Er]=null,e[gn]=null}function j4(n,e,t,r,i,s){r[Er]=i,r[gn]=e,pp(n,r,t,1,i,s)}function BA(n,e){e[Ci].changeDetectionScheduler?.notify(9),pp(n,e,e[gt],2,null,null)}function $4(n){let e=n[qa];if(!e)return py(n[pe],n);for(;e;){let t=null;if(Gr(e))t=e[qa];else{let r=e[_n];r&&(t=r)}if(!t){for(;e&&!e[Jn]&&e!==n;)Gr(e)&&py(e[pe],e),e=e[jt];e===null&&(e=n),Gr(e)&&py(e[pe],e),t=e&&e[Jn]}e=t}}function ab(n,e){let t=n[Eo],r=t.indexOf(e);t.splice(r,1)}function jA(n,e){if(wo(e))return;let t=e[gt];t.destroyNode&&pp(n,e,t,3,null,null),$4(e)}function py(n,e){if(wo(e))return;let t=Te(null);try{e[ye]&=-129,e[ye]|=256,e[Ln]&&Bl(e[Ln]),z4(n,e),G4(n,e),e[pe].type===1&&e[gt].destroy();let r=e[Is];if(r!==null&&wr(e[jt])){r!==e[jt]&&ab(r,e);let i=e[Hr];i!==null&&i.detachView(n)}Cy(e)}finally{Te(t)}}function B1(n,e,t,r){let i=n?.[iu];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&nc.add(n),UA(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let u=o.animateFns[c],{promise:d}=u();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),H4(n,r)}else n&&nc.delete(n),r(!1)},i)}function H4(n,e){let t=n[iu]?.running;if(t){t.then(()=>{n[iu].running=void 0,nc.delete(n),e(!0)});return}e(!1)}function G4(n,e){let t=n.cleanup,r=e[za];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[za]=null);let i=e[wi];if(i!==null){e[wi]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[ru];if(s!==null){e[ru]=null;for(let o of s)o.destroy()}}function z4(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Co)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];rt(4,a,c);try{c.call(a)}finally{rt(5,a,c)}}else{rt(4,i,s);try{s.call(i)}finally{rt(5,i,s)}}}}}function $A(n,e,t){return q4(n,e.parent,t)}function q4(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Er];if(Cs(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Sr.None||i===Sr.Emulated)return null}return qr(r,t)}function HA(n,e,t){return K4(n,e,t)}function W4(n,e,t){return n.type&40?qr(n,t):null}var K4=W4,j1;function cb(n,e,t,r){let i=$A(n,r,e),s=e[gt],o=r.parent||e[gn],a=HA(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)L1(s,i,t[c],a,!1);else L1(s,i,t,a,!1);j1!==void 0&&j1(s,r,e,t,i)}function uu(n,e){if(e!==null){let t=e.type;if(t&3)return qr(e,n);if(t&4)return Ry(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return uu(n,r);{let i=n[e.index];return wr(i)?Ry(-1,i):Zn(i)}}else{if(t&128)return uu(n,e.next);if(t&32)return sb(e,n)()||Zn(n[e.index]);{let r=GA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=vs(n[Dn]);return uu(i,r)}else return uu(n,e.next)}}}return null}function GA(n,e){if(e!==null){let r=n[Dn][gn],i=e.projection;return r.projection[i]}return null}function Ry(n,e){let t=_n+n+1;if(t<e.length){let r=e[t],i=r[pe].firstChild;if(i!==null)return uu(r,i)}return e[Ss]}function lb(n,e,t,r,i,s,o){for(;t!=null;){let a=r[ws];if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(o&&e===0&&(c&&tc(Zn(c),r),t.flags|=2),!dp(t))if(u&8)lb(n,e,t.child,r,i,s,!1),Xa(e,n,a,i,c,t,s,r);else if(u&32){let d=sb(t,r),p;for(;p=d();)Xa(e,n,a,i,p,t,s,r);Xa(e,n,a,i,c,t,s,r)}else u&16?zA(n,e,r,t,i,s):Xa(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function pp(n,e,t,r,i,s){lb(t,r,n.firstChild,e,i,s,!1)}function Y4(n,e,t){let r=e[gt],i=$A(n,t,e),s=t.parent||e[gn],o=HA(s,t,e);zA(r,0,e,t,i,o)}function zA(n,e,t,r,i,s){let o=t[Dn],c=o[gn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Xa(e,n,t[ws],i,d,r,s,t)}else{let u=c,d=o[jt];vA(r)&&(u.flags|=128),lb(n,e,u,d,i,s,!0)}}function Q4(n,e,t,r,i,s,o){let a=r[Ss],c=Zn(r);a!==c&&Xa(e,n,t,s,a,i,o);for(let u=_n;u<r.length;u++){let d=r[u];pp(d[pe],d,n,e,s,a)}}function J4(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Kr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Kr.Important),n.setStyle(t,r,i,s))}}function qA(n,e,t,r,i){let s=Ts(),o=r&2;try{Ds(-1),o&&e.length>Ct&&FA(n,e,Ct,!1),rt(o?2:0,i,t),t(r,i)}finally{Ds(s),rt(o?3:1,i,t)}}function mp(n,e,t){iB(n,e,t),(t.flags&64)===64&&sB(n,e,t)}function gp(n,e,t=qr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function Z4(n,e,t,r){let s=r.get(CA,SA)||t===Sr.ShadowDom||t===Sr.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return X4(o),o}function X4(n){eB(n)}var eB=()=>null;function tB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function WA(n,e,t,r,i,s){let o=e[pe];if(db(n,o,e,t,r)){Cs(n)&&rB(e,n.index);return}n.type&3&&(t=tB(t)),nB(n,e,t,r,i,s)}function nB(n,e,t,r,i,s){if(n.type&3){let o=qr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function rB(n,e){let t=Xn(e,n);t[ye]&16||(t[ye]|=64)}function iB(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Cs(t)&&M4(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Zf(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=pu(e,n,o,t);if(tc(c,e),s!==null&&aB(e,o-r,c,a,t,s),zr(a)){let u=Xn(t.index,e);u[an]=pu(e,n,o,t)}}}function sB(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=v1();try{Ds(s);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Of(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&oB(c,u)}}finally{Ds(-1),Of(o)}}function oB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function ub(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];RA(e,s.selectors,!1)&&(r??=[],zr(s)?r.unshift(s):r.push(s))}return r}function aB(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],u=o[a+1];Ay(r,t,c,u)}}function KA(n,e,t,r,i){let s=Ct+t,o=e[pe],a=i(o,e,n,r,t);e[s]=a,Ja(n,!0);let c=n.type===2;return c?(NA(e[gt],a,n),(a1()===0||Wa(n))&&tc(a,e),c1()):tc(a,e),Uf()&&(!c||!dp(n))&&cb(o,e,a,n),n}function YA(n){let e=n;return Qv()?Jv():(e=e.parent,Ja(e,!1)),e}function cB(n,e){let t=n[ws];if(!t)return;let r;try{r=t.get(nr,null)}catch{r=null}r?.(e)}function db(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let u=o[c],d=o[c+1],p=e.data[u];Ay(p,t[u],d,i),a=!0}if(s)for(let c of s){let u=t[c],d=e.data[c];Ay(d,u,r,i),a=!0}return a}function lB(n,e){let t=Xn(e,n),r=t[pe];uB(r,t);let i=t[Er];i!==null&&t[Ga]===null&&(t[Ga]=TA(i,t[ws])),rt(18),hb(r,t,t[an]),rt(19,t[an])}function uB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function hb(n,e,t){Lf(e);try{let r=n.viewQuery;r!==null&&Dy(1,r,t);let i=n.template;i!==null&&qA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Hr]?.finishViewCreation(n),n.staticContentQueries&&DA(n,e),n.staticViewQueries&&Dy(2,n.viewQuery,t);let s=n.components;s!==null&&dB(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ye]&=-5,Vf()}}function dB(n,e){for(let t=0;t<e.length;t++)lB(n,e[t])}function QA(n,e,t,r){let i=Te(null);try{let s=e.tView,a=n[ye]&4096?4096:16,c=rb(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Is]=u;let d=n[Hr];return d!==null&&(c[Hr]=d.createEmbeddedView(s)),hb(s,c,t),c}finally{Te(i)}}function ky(n,e){return!e||e.firstChild===null||vA(n)}function mu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Zn(s)),wr(s)&&JA(s,r);let o=t.type;if(o&8)mu(n,e,t.child,r);else if(o&32){let a=sb(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=GA(e,t);if(Array.isArray(a))r.push(...a);else{let c=vs(e[Dn]);mu(c[pe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function JA(n,e){for(let t=_n;t<n.length;t++){let r=n[t],i=r[pe].firstChild;i!==null&&mu(r[pe],r,i,e)}n[Ss]!==n[Er]&&e.push(n[Ss])}function ZA(n){if(n[bo]!==null){for(let e of n[bo])e.impl.addSequence(e);n[bo].length=0}}var XA=[];function hB(n){return n[Ln]??fB(n)}function fB(n){let e=XA.pop()??Object.create(mB);return e.lView=n,e}function pB(n){n.lView[Ln]!==n&&(n.lView=null,XA.push(n))}var mB=re(O({},Ll),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Qa(n.lView)},consumerOnSignalRead(){this.lView[Ln]=this}});function gB(n){let e=n[Ln]??Object.create(_B);return e.lView=n,e}var _B=re(O({},Ll),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=vs(n.lView);for(;e&&!eR(e[pe]);)e=vs(e);e&&Gv(e)},consumerOnSignalRead(){this.lView[Ln]=this}});function eR(n){return n.type!==2}function tR(n){if(n[ru]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ru])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ye]&8192)}}var vB=100;function nR(n,e=0){let r=n[Ci].rendererFactory,i=!1;i||r.begin?.();try{yB(n,e)}finally{i||r.end?.()}}function yB(n,e){let t=Zv();try{Xv(!0),Py(n,e);let r=0;for(;ou(n);){if(r===vB)throw new z(103,!1);r++,Py(n,1)}}finally{Xv(t)}}function bB(n,e,t,r){if(wo(e))return;let i=e[ye],s=!1,o=!1;Lf(e);let a=!0,c=null,u=null;s||(eR(n)?(u=hB(e),c=Ul(u)):Fh()===null?(a=!1,u=gB(e),c=Ul(u)):e[Ln]&&(Bl(e[Ln]),e[Ln]=null));try{Hv(e),m1(n.bindingStartIndex),t!==null&&qA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let b=n.preOrderCheckHooks;b!==null&&Gf(e,b,null)}else{let b=n.preOrderHooks;b!==null&&zf(e,b,0,null),hy(e,0)}if(o||EB(e),tR(e),rR(e,0),n.contentQueries!==null&&DA(n,e),!s)if(d){let b=n.contentCheckHooks;b!==null&&Gf(e,b)}else{let b=n.contentHooks;b!==null&&zf(e,b,1),hy(e,1)}IB(n,e);let p=n.components;p!==null&&sR(e,p,0);let v=n.viewQuery;if(v!==null&&Dy(2,v,r),!s)if(d){let b=n.viewCheckHooks;b!==null&&Gf(e,b)}else{let b=n.viewHooks;b!==null&&zf(e,b,2),hy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[xf]){for(let b of e[xf])b();e[xf]=null}s||(ZA(e),e[ye]&=-73)}catch(d){throw s||Qa(e),d}finally{u!==null&&(Lh(u,c),a&&pB(u)),Vf()}}function rR(n,e){for(let t=bA(n);t!==null;t=EA(t))for(let r=_n;r<t.length;r++){let i=t[r];iR(i,e)}}function EB(n){for(let e=bA(n);e!==null;e=EA(e)){if(!(e[ye]&2))continue;let t=e[Eo];for(let r=0;r<t.length;r++){let i=t[r];Gv(i)}}}function wB(n,e,t){rt(18);let r=Xn(e,n);iR(r,t),rt(19,r[an])}function iR(n,e){kf(n)&&Py(n,e)}function Py(n,e){let r=n[pe],i=n[ye],s=n[Ln],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Vh(s)),o||=!1,s&&(s.dirty=!1),n[ye]&=-9217,o)bB(r,n,r.template,n[an]);else if(i&8192){let a=Te(null);try{tR(n),rR(n,1);let c=r.components;c!==null&&sR(n,c,1),ZA(n)}finally{Te(a)}}}function sR(n,e,t){for(let r=0;r<e.length;r++)wB(n,e[r],t)}function IB(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ds(~i);else{let s=i,o=t[++r],a=t[++r];_1(o,s);let c=e[s];rt(24,c),a(2,c),rt(25,c)}}}finally{Ds(-1)}}function fb(n,e){let t=Zv()?64:1088;for(n[Ci].changeDetectionScheduler?.notify(e);n;){n[ye]|=t;let r=vs(n);if(Ka(n)&&!r)return n;n=r}return null}function oR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function aR(n,e,t,r=!0){let i=e[pe];if(SB(i,e,n,t),r){let o=Ry(t,n),a=e[gt],c=a.parentNode(n[Ss]);c!==null&&j4(i,n[gn],a,e,c,o)}let s=e[Ga];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ny(n,e){if(n.length<=_n)return;let t=_n+e,r=n[t];if(r){let i=r[Is];i!==null&&i!==n&&ab(i,r),e>0&&(n[t-1][Jn]=r[Jn]);let s=eu(n,_n+e);B4(r[pe],r);let o=s[Hr];o!==null&&o.detachView(s[pe]),r[jt]=null,r[Jn]=null,r[ye]&=-129}return r}function SB(n,e,t,r){let i=_n+r,s=t.length;r>0&&(t[i-1][Jn]=e),r<s-_n?(e[Jn]=t[i],xv(t,_n+r,e)):(t.push(e),e[Jn]=null),e[jt]=t;let o=e[Is];o!==null&&t!==o&&cR(o,e);let a=e[Hr];a!==null&&a.insertView(n),Pf(e),e[ye]|=128}function cR(n,e){let t=n[Eo],r=e[jt];if(Gr(r))n[ye]|=2;else{let i=r[jt][Dn];e[Dn]!==i&&(n[ye]|=2)}t===null?n[Eo]=[e]:t.push(e)}var As=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[pe];return mu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[an]}set context(e){this._lView[an]=e}get destroyed(){return wo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[jt];if(wr(e)){let t=e[su],r=t?t.indexOf(this):-1;r>-1&&(Ny(e,r),eu(t,r))}this._attachedToViewContainer=!1}jA(this._lView[pe],this._lView)}onDestroy(e){zv(this._lView,e)}markForCheck(){fb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ye]&=-129}reattach(){Pf(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,nR(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ka(this._lView),t=this._lView[Is];t!==null&&!e&&ab(t,this._lView),BA(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e;let t=Ka(this._lView),r=this._lView[Is];r!==null&&!t&&cR(r,this._lView),Pf(this._lView)}};var Cr=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=CB;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=QA(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new As(s)}}return n})();function CB(){return _p(vn(),Ae())}function _p(n,e){return n.type&4?new Cr(e,n,sc(n,e)):null}function bu(n,e,t,r,i){let s=n.data[e];if(s===null)s=TB(n,e,t,r,i),g1()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=h1();s.injectorIndex=o===null?-1:o.injectorIndex}return Ja(s,!0),s}function TB(n,e,t,r,i){let s=Yv(),o=Qv(),a=o?s:s&&s.parent,c=n.data[e]=xB(n,a,t,e,r,i);return DB(n,c,s,o),c}function DB(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function xB(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Kv()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var AB=()=>null;function My(n,e){return AB(n,e)}var lR=class{},vp=class{},Oy=class{resolveComponentFactory(e){throw new z(917,!1)}},Eu=class{static NULL=new Oy},xn=class{},Ai=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>RB()}return n})();function RB(){let n=Ae(),e=vn(),t=Xn(e.index,n);return(Gr(t)?t:n)[gt]}var uR=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>null})}return n})();var Wf={},Fy=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Wf,r);return i!==Wf||t===Wf?i:this.parentInjector.get(e,t,r)}};function $1(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=vv(i,a);else if(s==2){let c=a,u=e[++o];r=vv(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function X(n,e=0){let t=Ae();if(t===null)return ae(n,e);let r=vn();return mA(r,t,Jt(n),e)}function pb(){let n="invalid";throw new Error(n)}function dR(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,u=null;for(let d of o)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(o);break}NB(n,e,t,a,s,c,u)}s!==null&&r!==null&&kB(t,r,s)}function kB(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new z(-301,!1);r.push(e[i],s)}}function PB(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function NB(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let v=0;v<a;v++){let b=r[v];!c&&zr(b)&&(c=!0,PB(n,t,v)),Iy(Zf(t,e),n,b.type)}UB(t,n.data.length,a);for(let v=0;v<a;v++){let b=r[v];b.providersResolver&&b.providersResolver(b)}let u=!1,d=!1,p=OA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let v=0;v<a;v++){let b=r[v];if(t.mergedAttrs=fu(t.mergedAttrs,b.hostAttrs),OB(n,t,e,p,b),VB(p,b,i),o!==null&&o.has(b)){let[P,M]=o.get(b);t.directiveToIndex.set(b.type,[p,P+t.directiveStart,M+t.directiveStart])}else(s===null||!s.has(b))&&t.directiveToIndex.set(b.type,p);b.contentQueries!==null&&(t.flags|=4),(b.hostBindings!==null||b.hostAttrs!==null||b.hostVars!==0)&&(t.flags|=64);let S=b.type.prototype;!u&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),p++}MB(n,t,s)}function MB(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))H1(0,e,i,r),H1(1,e,i,r),z1(e,r,!1);else{let s=t.get(i);G1(0,e,s,r),G1(1,e,s,r),z1(e,r,!0)}}}function H1(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),hR(e,s)}}function G1(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),hR(e,o)}}function hR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function z1(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||tb(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let u=s[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){o??=[],o.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function OB(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=_s(i.type,!0)),o=new Co(s,zr(i),X,null);n.blueprint[r]=o,t[r]=o,FB(n,e,r,OA(n,t,i.hostVars,rr),i)}function FB(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;LB(o)!=a&&o.push(a),o.push(t,r,s)}}function LB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function VB(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zr(e)&&(t[""]=n)}}function UB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function mb(n,e,t,r,i,s,o,a){let c=e[pe],u=c.consts,d=Ya(u,o),p=bu(c,n,t,r,d);return s&&dR(c,e,p,Ya(u,a),i),p.mergedAttrs=fu(p.mergedAttrs,p.attrs),p.attrs!==null&&$1(p,p.attrs,!1),p.mergedAttrs!==null&&$1(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function gb(n,e){aA(n,e),Uv(e)&&n.queries.elementEnd(e)}function _b(n){return pR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function fR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function pR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function yp(n,e,t){return n[e]=t}function BB(n,e){return n[e]}function Rs(n,e,t){if(t===rr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function vb(n,e,t,r){let i=Rs(n,e,t);return Rs(n,e+1,r)||i}function jB(n,e,t,r,i){let s=vb(n,e,t,r);return Rs(n,e+2,i)||s}function my(n,e,t){return function r(i){let s=Cs(n)?Xn(n.index,e):e;fb(s,5);let o=e[an],a=q1(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=q1(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function q1(n,e,t,r){let i=Te(null);try{return rt(6,e,t),t(r)!==!1}catch(s){return cB(n,s),!1}finally{rt(7,e,t),Te(i)}}function $B(n,e,t,r,i,s,o,a){let c=Wa(n),u=!1,d=null;if(!r&&c&&(d=GB(e,t,s,n.index)),d!==null){let p=d.__ngLastListenerFn__||d;p.__ngNextListenerFn__=o,d.__ngLastListenerFn__=o,u=!0}else{let p=qr(n,t),v=r?r(p):p;c4(t,v,s,a);let b=i.listen(v,s,a);if(!HB(s)){let S=r?P=>r(Zn(P[n.index])):n.index;mR(S,e,t,s,a,b,!1)}}return u}function HB(n){return n.startsWith("animation")||n.startsWith("transition")}function GB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[za],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function mR(n,e,t,r,i,s,o){let a=e.firstCreatePass?Wv(e):null,c=qv(t),u=c.length;c.push(i,s),a&&a.push(r,n,u,(u+1)*(o?-1:1))}function W1(n,e,t,r,i,s){let o=e[t],a=e[pe],u=a.data[t].outputs[r],p=o[u].subscribe(s);mR(n.index,a,e,i,s,p,!0)}var Ly=Symbol("BINDING");var np=class extends Eu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=$r(e);return new ks(t,this.ngModule)}};function zB(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&hp.SignalBased)!==0};return i&&(s.transform=i),s})}function qB(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function WB(n,e,t){let r=e instanceof bt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Fy(t,r):t}function KB(n){let e=n.get(xn,null);if(e===null)throw new z(407,!1);let t=n.get(uR,null),r=n.get(ys,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function YB(n,e){let t=gR(n);return kA(e,t,t==="svg"?Bv:t==="math"?t1:null)}function gR(n){return(n.selectors[0][0]||"div").toLowerCase()}var ks=class extends vp{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=zB(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=qB(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=S4(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){rt(22);let a=Te(null);try{let c=this.componentDef,u=QB(r,c,o,s),d=WB(c,i||this.ngModule,e),p=KB(d),v=p.rendererFactory.createRenderer(null,c),b=r?Z4(v,r,c.encapsulation,d):YB(c,v),S=o?.some(K1)||s?.some(H=>typeof H!="function"&&H.bindings.some(K1)),P=rb(null,u,null,512|MA(c),null,null,p,v,d,null,TA(b,d,!0));P[Ct]=b,Lf(P);let M=null;try{let H=mb(Ct,P,2,"#host",()=>u.directiveRegistry,!0,0);NA(v,b,H),tc(b,P),mp(u,P,H),Xy(u,H,P),gb(u,H),t!==void 0&&ZB(H,this.ngContentSelectors,t),M=Xn(H.index,P),P[an]=M[an],hb(u,P,null)}catch(H){throw M!==null&&Cy(M),Cy(P),H}finally{rt(23),Vf()}return new rp(this.componentType,P,!!S)}finally{Te(a)}}};function QB(n,e,t,r){let i=n?["ng-version","21.0.0"]:C4(e.selectors[0]),s=null,o=null,a=0;if(t)for(let d of t)a+=d[Ly].requiredVars,d.create&&(d.targetIdx=0,(s??=[]).push(d)),d.update&&(d.targetIdx=0,(o??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let p=r[d];if(typeof p!="function")for(let v of p.bindings){a+=v[Ly].requiredVars;let b=d+1;v.create&&(v.targetIdx=b,(s??=[]).push(v)),v.update&&(v.targetIdx=b,(o??=[]).push(v))}}let c=[e];if(r)for(let d of r){let p=typeof d=="function"?d:d.type,v=Pv(p);c.push(v)}return nb(0,null,JB(s,o),1,a,c,null,null,null,[i],null)}function JB(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function K1(n){let e=n[Ly].kind;return e==="input"||e==="twoWay"}var rp=class extends lR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Af(t[pe],Ct),this.location=sc(this._tNode,t),this.instance=Xn(this._tNode.index,t)[an],this.hostView=this.changeDetectorRef=new As(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=db(r,i[pe],i,e,t);this.previousInputValues.set(e,t);let o=Xn(r.index,i);fb(o,1)}get injector(){return new So(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ZB(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Un=(()=>{class n{static __NG_ELEMENT_ID__=XB}return n})();function XB(){let n=vn();return vR(n,Ae())}var ej=Un,_R=class extends ej{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return sc(this._hostTNode,this._hostLView)}get injector(){return new So(this._hostTNode,this._hostLView)}get parentInjector(){let e=Yy(this._hostTNode,this._hostLView);if(lA(e)){let t=Qf(e,this._hostLView),r=Yf(e),i=t[pe].data[r+8];return new So(i,t)}else return new So(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Y1(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-_n}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=My(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,ky(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!O3(e),u;if(c)u=t;else{let M=t||{};u=M.index,r=M.injector,i=M.projectableNodes,s=M.environmentInjector||M.ngModuleRef,o=M.directives,a=M.bindings}let d=c?e:new ks($r(e)),p=r||this.parentInjector;if(!s&&d.ngModule==null){let H=(c?p:this.parentInjector).get(bt,null);H&&(s=H)}let v=$r(d.componentType??{}),b=My(this._lContainer,v?.id??null),S=b?.firstChild??null,P=d.create(p,i,S,s,o,a);return this.insertImpl(P.hostView,u,ky(this._hostTNode,b)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(r1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[jt],u=new _R(c,c[gn],c[jt]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return aR(o,i,s,r),e.attachToViewContainerRef(),xv(gy(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Y1(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ny(this._lContainer,t);r&&(eu(gy(this._lContainer),t),jA(r[pe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ny(this._lContainer,t);return r&&eu(gy(this._lContainer),t)!=null?new As(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Y1(n){return n[su]}function gy(n){return n[su]||(n[su]=[])}function vR(n,e){let t,r=e[n.index];return wr(r)?t=r:(t=oR(r,e,null,n),e[n.index]=t,ib(e,t)),nj(t,e,n,r),new _R(t,n,e)}function tj(n,e){let t=n[gt],r=t.createComment(""),i=qr(e,n),s=t.parentNode(i);return ep(t,s,r,t.nextSibling(i),!1),r}var nj=sj,rj=()=>!1;function ij(n,e,t){return rj(n,e,t)}function sj(n,e,t,r){if(n[Ss])return;let i;t.type&8?i=Zn(r):i=tj(e,t),n[Ss]=i}var Vy=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Uy=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)yb(e,t).matches!==null&&this.queries[t].setDirty()}},By=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=fj(e):this.predicate=e}},jy=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},$y=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,oj(t,s)),this.matchTNodeWithReadOption(e,t,qf(t,e,s,!1,!1))}else r===Cr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,qf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===en||i===Un||i===Cr&&t.type&4)this.addMatch(t.index,-2);else{let s=qf(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function oj(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function aj(n,e){return n.type&11?sc(n,e):n.type&4?_p(n,e):null}function cj(n,e,t,r){return t===-1?aj(e,n):t===-2?lj(n,e,r):pu(n,n[pe],t,e)}function lj(n,e,t){if(t===en)return sc(e,n);if(t===Cr)return _p(e,n);if(t===Un)return vR(e,n)}function yR(n,e,t,r){let i=e[Hr].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let d=s[u];a.push(cj(e,d,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Hy(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=yR(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let u=s[a+1],d=e[-c];for(let p=_n;p<d.length;p++){let v=d[p];v[Is]===v[jt]&&Hy(v[pe],v,u,r)}if(d[Eo]!==null){let p=d[Eo];for(let v=0;v<p.length;v++){let b=p[v];Hy(b[pe],b,u,r)}}}}}return r}function uj(n,e){return n[Hr].queries[e].queryList}function dj(n,e,t){let r=new Xf((t&4)===4);return o1(n,e,r,r.destroy),(e[Hr]??=new Uy).queries.push(new Vy(r))-1}function hj(n,e,t){let r=Zt();return r.firstCreatePass&&(pj(r,new By(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),dj(r,Ae(),e)}function fj(n){return n.split(",").map(e=>e.trim())}function pj(n,e,t){n.queries===null&&(n.queries=new jy),n.queries.track(new $y(e,t))}function yb(n,e){return n.queries.getByIndex(e)}function mj(n,e){let t=n[pe],r=yb(t,e);return r.crossesNgTemplate?Hy(t,n,e,[]):yR(t,n,r,e)}var Gy=new Map,gj=new Set;async function bR(n){let e=Gy;Gy=new Map;let t=new Map;function r(s){let o=t.get(s);if(o)return o;let a=n(s).then(c=>_j(s,c));return t.set(s,a),a}let i=Array.from(e).map(async([s,o])=>{if(o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");let a=[];o.templateUrl&&a.push(r(o.templateUrl).then(p=>{o.template=p}));let c=typeof o.styles=="string"?[o.styles]:o.styles??[];o.styles=c;let{styleUrl:u,styleUrls:d}=o;if(u&&(d=[u],o.styleUrl=void 0),d?.length){let p=Promise.all(d.map(v=>r(v))).then(v=>{c.push(...v),o.styleUrls=void 0});a.push(p)}await Promise.all(a),gj.delete(s)});await Promise.all(i)}function ER(){return Gy.size===0}async function _j(n,e){if(typeof e=="string")return e;if(e.status!==void 0&&e.status!==200)throw new z(918,!1);return e.text()}var To=class{},bp=class{};var gu=class extends To{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new np(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=kv(e);this._bootstrapComponents=xA(s.bootstrap),this._r3Injector=sy(e,t,[{provide:To,useValue:this},{provide:Eu,useValue:this.componentFactoryResolver},...r],Ii(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},_u=class extends bp{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new gu(this.moduleType,e,[])}};function wR(n,e,t){return new gu(n,e,t,!1)}var ip=class extends To{injector;componentFactoryResolver=new np(this);instance=null;constructor(e){super();let t=new go([...e.providers,{provide:To,useValue:this},{provide:Eu,useValue:this.componentFactoryResolver}],e.parent||Ha(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function oc(n,e,t=null){return new ip({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var vj=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Nv(!1,t.type),i=r.length>0?oc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(ae(bt))})}return n})();function qe(n){return ic(()=>{let e=IR(n),t=re(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Qy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(vj).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Sr.Emulated,styles:n.styles||Fn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ao("NgStandalone"),SR(t);let r=n.dependencies;return t.directiveDefs=Q1(r,yj),t.pipeDefs=Q1(r,Yx),t.id=wj(t),t})}function yj(n){return $r(n)||Pv(n)}function ft(n){return ic(()=>({type:n.type,bootstrap:n.bootstrap||Fn,declarations:n.declarations||Fn,imports:n.imports||Fn,exports:n.exports||Fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function bj(n,e){if(n==null)return Es;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=hp.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function Ej(n){if(n==null)return Es;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Pt(n){return ic(()=>{let e=IR(n);return SR(e),e})}function Ep(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function IR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Es,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Fn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:bj(n.inputs,e),outputs:Ej(n.outputs),debugInfo:null}}function SR(n){n.features?.forEach(e=>e(n))}function Q1(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function wj(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ij(n){return Object.getPrototypeOf(n.prototype).constructor}function Ri(n){let e=Ij(n.type),t=!0,r=[n];for(;e;){let i;if(zr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=_y(n.inputs),o.declaredInputs=_y(n.declaredInputs),o.outputs=_y(n.outputs);let a=i.hostBindings;a&&xj(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&Tj(n,c),u&&Dj(n,u),Sj(n,i),Vx(n.outputs,i.outputs),zr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Ri&&(t=!1)}}e=Object.getPrototypeOf(e)}Cj(r)}function Sj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Cj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fu(i.hostAttrs,t=fu(t,i.hostAttrs))}}function _y(n){return n===Es?{}:n===Fn?[]:n}function Tj(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Dj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function xj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function CR(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=fu(n.mergedAttrs,n.attrs);let d=n.tView=nb(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ja(n,!1);let c=kj(t,e,n,r);Uf()&&cb(t,e,c,n),tc(c,e);let u=oR(c,e,c,n);e[r+Ct]=u,ib(e,u),ij(u,n,e)}function Aj(n,e,t,r,i,s,o,a,c,u,d){let p=t+Ct,v;return e.firstCreatePass?(v=bu(e,p,4,o||null,a||null),Nf()&&dR(e,n,v,Ya(e.consts,u),ub),aA(e,v)):v=e.data[p],CR(v,n,e,t,r,i,s,c),Wa(v)&&mp(e,n,v),u!=null&&gp(n,v,d),v}function Rj(n,e,t,r,i,s,o,a,c,u,d){let p=t+Ct,v;if(e.firstCreatePass){if(v=bu(e,p,4,o||null,a||null),u!=null){let b=Ya(e.consts,u);v.localNames=[];for(let S=0;S<b.length;S+=2)v.localNames.push(b[S],-1)}}else v=e.data[p];return CR(v,n,e,t,r,i,s,c),u!=null&&gp(n,v,d),v}function V(n,e,t,r,i,s,o,a){let c=Ae(),u=Zt(),d=Ya(u.consts,s);return Aj(c,u,n,e,t,r,i,d,void 0,o,a),V}var kj=Pj;function Pj(n,e,t,r){return au(!0),e[gt].createComment("")}var bb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function TR(n){return typeof n=="function"&&n[hn]!==void 0}function Eb(n){return TR(n)&&typeof n.set=="function"}var wp=new Z(""),Ip=new Z(""),wu=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,Fv()&&(this._destroyRef=F(tr,{optional:!0})??void 0),wb||(xR(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Ve.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(ae(Ve),ae(DR),ae(Ip))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),DR=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return wb?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function xR(n){wb=n}var wb;function ki(n){return!!n&&typeof n.then=="function"}function Sp(n){return!!n&&typeof n.subscribe=="function"}var Ib=new Z("");function Cp(n){return br([{provide:Ib,multi:!0,useValue:n}])}var Sb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=F(Ib,{optional:!0})??[];injector=F(Ze);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=kt(this.injector,i);if(ki(s))t.push(s);else if(Sp(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tp=new Z("");function AR(){O_(()=>{let n="";throw new z(600,n)})}function RR(n){return n.isBoundToModule}var Nj=10;function Cb(n,e){return Array.isArray(e)?e.reduce(Cb,n):O(O({},n),e)}var ir=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(nr);afterRenderManager=F(ob);zonelessEnabled=F(cu);rootEffectScheduler=F(dy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ee;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=F(Ti);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ue(t=>!t))}constructor(){F(xo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=F(bt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ze.NULL){return this._injector.get(Ve).run(()=>{rt(10);let o=t instanceof vp;if(!this._injector.get(Sb).done){let S="";throw new z(405,S)}let c;o?c=t:c=this._injector.get(Eu).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=RR(c)?void 0:this._injector.get(To),d=r||c.selector,p=c.create(i,[],d,u),v=p.location.nativeElement,b=p.injector.get(wp,null);return b?.registerApplication(v),p.onDestroy(()=>{this.detachView(p.hostView),du(this.components,p),b?.unregisterApplication(v)}),this._loadComponent(p),rt(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){rt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(fp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new z(101,!1);let t=Te(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Te(t),this.afterTick.next(),rt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xn,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Nj;)rt(14),this.synchronizeOnce(),rt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ou(i))continue;let s=r&&!this.zonelessEnabled?0:1;nR(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ou(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;du(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Tp,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>du(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function du(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Ace=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function w(n,e,t){let r=Ae(),i=Mf();if(Rs(r,i,e)){let s=Zt(),o=iy();WA(o,r,n,e,r[gt],t)}return w}function J1(n,e,t,r,i){db(e,n,t,i?"class":"style",r)}function f(n,e,t,r){let i=Ae(),s=i[pe],o=n+Ct,a=s.firstCreatePass?mb(o,i,2,e,ub,Nf(),t,r):s.data[o];if(KA(a,i,n,e,Mj),Wa(a)){let c=i[pe];mp(c,i,a),Xy(c,a,i)}return r!=null&&gp(i,a),f}function m(){let n=Zt(),e=vn(),t=YA(e);return n.firstCreatePass&&gb(n,t),u1(t)&&d1(),l1(),t.classesWithoutHost!=null&&j3(t)&&J1(n,t,Ae(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&$3(t)&&J1(n,t,Ae(),t.stylesWithoutHost,!1),m}function W(n,e,t,r){return f(n,e,t,r),m(),W}var Mj=(n,e,t,r,i)=>(au(!0),kA(e[gt],r,S1()));function Yr(n,e,t){let r=Ae(),i=r[pe],s=n+Ct,o=i.firstCreatePass?mb(s,r,8,"ng-container",ub,Nf(),e,t):i.data[s];if(KA(o,r,n,"ng-container",Oj),Wa(o)){let a=r[pe];mp(a,r,o),Xy(a,o,r)}return t!=null&&gp(r,o),Yr}function Qr(){let n=Zt(),e=vn(),t=YA(e);return n.firstCreatePass&&gb(n,t),Qr}function An(n,e,t){return Yr(n,e,t),Qr(),An}var Oj=(n,e,t,r,i)=>(au(!0),x4(e[gt],""));function ee(){return Ae()}var lu=void 0;function Fj(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Lj=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],lu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],lu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",lu,lu,lu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Fj],hu={};function Tb(n,e,t){typeof e!="string"&&(t=e,e=n[Di.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),hu[e]=n,t&&(hu[e][Di.ExtraData]=t)}function Dp(n){let e=Vj(n),t=Z1(e);if(t)return t;let r=e.split("-")[0];if(t=Z1(r),t)return t;if(r==="en")return Lj;throw new z(701,!1)}function Z1(n){return n in hu||(hu[n]=mn.ng&&mn.ng.common&&mn.ng.common.locales&&mn.ng.common.locales[n]),hu[n]}var Di=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Di||{});function Vj(n){return n.toLowerCase().replace(/_/g,"-")}var Iu="en-US";var Uj=Iu;function kR(n){typeof n=="string"&&(Uj=n.toLowerCase().replace(/_/g,"-"))}function U(n,e,t){let r=Ae(),i=Zt(),s=vn();return PR(i,r,r[gt],s,n,e,t),U}function PR(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=my(r,e,s),$B(r,n,e,o,t,i,s,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let p=0;p<d.length;p+=2){let v=d[p],b=d[p+1];c??=my(r,e,s),W1(r,e,v,b,i,c)}if(u&&u.length)for(let p of u)c??=my(r,e,s),W1(r,e,p,i,i,c)}}function D(n=1){return I1(n)}function Bj(n,e){let t=null,r=y4(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?RA(n,s,!0):w4(r,s))return i}return t}function xp(n){let e=Ae()[Dn][gn];if(!e.projection){let t=n?n.length:1,r=e.projection=qx(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?Bj(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function Ap(n,e=0,t,r,i,s){let o=Ae(),a=Zt(),c=r?n+1:null;c!==null&&Rj(o,a,c,r,i,s,null,t);let u=bu(a,Ct+n,16,null,t||null);u.projection===null&&(u.projection=e),Jv();let p=!o[Ga]||Kv();o[Dn][gn].projection[u.projection]===null&&c!==null?jj(o,a,c):p&&!dp(u)&&Y4(a,o,u)}function jj(n,e,t){let r=Ct+t,i=e.data[r],s=n[r],o=My(s,i.tView.ssrId),a=QA(n,i,void 0,{dehydratedView:o});aR(s,a,0,ky(i,o))}function Pi(n,e,t){hj(n,e,t)}function Jr(n){let e=Ae(),t=Zt(),r=ty();Ff(r+1);let i=yb(t,r);if(n.dirty&&n1(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=mj(e,r);n.reset(s,t4),n.notifyOnChanges()}return!0}return!1}function Zr(){return uj(Ae(),ty())}function sr(n){let e=f1();return Rf(e,Ct+n)}function $f(n,e){return n<<17|e<<2}function Do(n){return n>>17&32767}function $j(n){return(n&2)==2}function Hj(n,e){return n&131071|e<<17}function zy(n){return n|2}function rc(n){return(n&131068)>>2}function vy(n,e){return n&-131069|e<<2}function Gj(n){return(n&1)===1}function qy(n){return n|1}function zj(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Do(o),c=rc(o);n[r]=t;let u=!1,d;if(Array.isArray(t)){let p=t;d=p[1],(d===null||ja(p,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let v=Do(n[a+1]);n[r+1]=$f(v,a),v!==0&&(n[v+1]=vy(n[v+1],r)),n[a+1]=Hj(n[a+1],r)}else n[r+1]=$f(a,0),a!==0&&(n[a+1]=vy(n[a+1],r)),a=r;else n[r+1]=$f(c,0),a===0?a=r:n[c+1]=vy(n[c+1],r),c=r;u&&(n[r+1]=zy(n[r+1])),X1(n,d,r,!0),X1(n,d,r,!1),qj(e,d,n,r,s),o=$f(a,c),s?e.classBindings=o:e.styleBindings=o}function qj(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&ja(s,e)>=0&&(t[r+1]=qy(t[r+1]))}function X1(n,e,t,r){let i=n[t+1],s=e===null,o=r?Do(i):rc(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],u=n[o+1];Wj(c,e)&&(a=!0,n[o+1]=r?qy(u):zy(u)),o=r?Do(u):rc(u)}a&&(n[t+1]=r?zy(i):qy(i))}function Wj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ja(n,e)>=0:!1}function we(n,e,t){return NR(n,e,t,!1),we}function le(n,e){return NR(n,e,null,!0),le}function NR(n,e,t,r){let i=Ae(),s=Zt(),o=ey(2);if(s.firstUpdatePass&&Yj(s,n,o,r),e!==rr&&Rs(i,o,e)){let a=s.data[Ts()];e5(s,a,i,i[gt],n,i[o+1]=t5(e,t),r,o)}}function Kj(n,e){return e>=n.expandoStartIndex}function Yj(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ts()],o=Kj(n,t);n5(s,r)&&e===null&&!o&&(e=!1),e=Qj(i,s,e,r),zj(i,s,e,t,o,r)}}function Qj(n,e,t,r){let i=y1(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=yy(null,n,e,t,r),t=vu(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=yy(i,n,e,t,r),s===null){let c=Jj(n,e,r);c!==void 0&&Array.isArray(c)&&(c=yy(null,n,e,c[1],r),c=vu(c,e.attrs,r),Zj(n,e,r,c))}else s=Xj(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Jj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(rc(r)!==0)return n[Do(r)]}function Zj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Do(i)]=r}function Xj(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=vu(r,o,t)}return vu(r,e.attrs,t)}function yy(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=vu(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function vu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Kx(n,o,t?!0:e[++s]))}return n===void 0?null:n}function e5(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=Gj(u)?eA(c,e,t,i,rc(u),o):void 0;if(!sp(d)){sp(s)||$j(u)&&(s=eA(c,null,t,i,a,o));let p=jv(Ts(),t);J4(r,o,p,i,s)}}function eA(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,p=d===null,v=t[i+1];v===rr&&(v=p?Fn:void 0);let b=p?Df(v,r):d===r?v:void 0;if(u&&!sp(b)&&(b=Df(c,r)),sp(b)&&(a=b,o))return a;let S=n[i+1];i=o?Do(S):rc(S)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Df(c,r))}return a}function sp(n){return n!==void 0}function t5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ii(eb(n)))),n}function n5(n,e){return(n.flags&(e?8:16))!==0}function y(n,e=""){let t=Ae(),r=Zt(),i=n+Ct,s=r.firstCreatePass?bu(r,i,1,e,null):r.data[i],o=r5(r,t,s,e,n);t[i]=o,Uf()&&cb(r,t,o,s),Ja(s,!1)}var r5=(n,e,t,r,i)=>(au(!0),T4(e[gt],r));function i5(n,e,t,r=""){return Rs(n,Mf(),t)?e+Xl(t)+r:rr}function s5(n,e,t,r,i,s=""){let o=p1(),a=vb(n,o,t,i);return ey(2),a?e+Xl(t)+r+Xl(i)+s:rr}function te(n){return G("",n),te}function G(n,e,t){let r=Ae(),i=i5(r,n,e,t);return i!==rr&&MR(r,Ts(),i),G}function or(n,e,t,r,i){let s=Ae(),o=s5(s,n,e,t,r,i);return o!==rr&&MR(s,Ts(),o),or}function MR(n,e,t){let r=jv(e,n);D4(n[gt],r,t)}function ko(n,e,t){Eb(e)&&(e=e());let r=Ae(),i=Mf();if(Rs(r,i,e)){let s=Zt(),o=iy();WA(o,r,n,e,r[gt],t)}return ko}function ac(n,e){let t=Eb(n);return t&&n.set(e),t}function Po(n,e){let t=Ae(),r=Zt(),i=vn();return PR(r,t,t[gt],i,n,e),Po}function o5(n,e,t){let r=Zt();if(r.firstCreatePass){let i=zr(n);Wy(t,r.data,r.blueprint,i,!0),Wy(e,r.data,r.blueprint,i,!1)}}function Wy(n,e,t,r,i){if(n=Jt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Wy(n[s],e,t,r,i);else{let s=Zt(),o=Ae(),a=vn(),c=mo(n)?n:Jt(n.provide),u=Ov(n),d=a.providerIndexes&1048575,p=a.directiveStart,v=a.providerIndexes>>20;if(mo(n)||!n.multi){let b=new Co(u,i,X,null),S=Ey(c,e,i?d:d+v,p);S===-1?(Iy(Zf(a,o),s,c),by(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(b),o.push(b)):(t[S]=b,o[S]=b)}else{let b=Ey(c,e,d+v,p),S=Ey(c,e,d,d+v),P=b>=0&&t[b],M=S>=0&&t[S];if(i&&!M||!i&&!P){Iy(Zf(a,o),s,c);let H=l5(i?c5:a5,t.length,i,r,u,n);!i&&M&&(t[S].providerFactory=H),by(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else{let H=OR(t[i?S:b],u,!i&&r);by(s,n,b>-1?b:S,H)}!i&&r&&M&&t[S].componentProviders++}}}function by(n,e,t,r){let i=mo(e),s=Xx(e);if(i||s){let c=(s?Jt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function OR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ey(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function a5(n,e,t,r,i){return Ky(this.multi,[])}function c5(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=pu(r,r[pe],this.providerFactory.index,i);o=c.slice(0,a),Ky(s,o);for(let u=a;u<c.length;u++)o.push(c[u])}else o=[],Ky(s,o);return o}function Ky(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function l5(n,e,t,r,i,s){let o=new Co(n,t,X,null);return o.multi=[],o.index=e,o.componentProviders=0,OR(o,i,r&&!t),o}function Ni(n,e=[]){return t=>{t.providersResolver=(r,i)=>o5(r,i?i(n):n,e)}}function yn(n,e,t){let r=Io()+n,i=Ae();return i[r]===rr?yp(i,r,t?e.call(t):e()):BB(i,r)}function Bn(n,e,t,r){return FR(Ae(),Io(),n,e,t,r)}function cc(n,e,t,r,i){return LR(Ae(),Io(),n,e,t,r,i)}function Rp(n,e,t,r,i,s){return u5(Ae(),Io(),n,e,t,r,i,s)}function Db(n,e){let t=n[e];return t===rr?void 0:t}function FR(n,e,t,r,i,s){let o=e+t;return Rs(n,o,i)?yp(n,o+1,s?r.call(s,i):r(i)):Db(n,o+1)}function LR(n,e,t,r,i,s,o){let a=e+t;return vb(n,a,i,s)?yp(n,a+2,o?r.call(o,i,s):r(i,s)):Db(n,a+2)}function u5(n,e,t,r,i,s,o,a){let c=e+t;return jB(n,c,i,s,o)?yp(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):Db(n,c+3)}function oe(n,e){let t=Zt(),r,i=n+Ct;t.firstCreatePass?(r=d5(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=_s(r.type,!0)),o,a=pn(X);try{let c=Jf(!1),u=s();return Jf(c),$v(t,Ae(),i,u),u}finally{pn(a)}}function d5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Me(n,e,t){let r=n+Ct,i=Ae(),s=Rf(i,r);return VR(i,r)?FR(i,Io(),e,s.transform,t,s):s.transform(t)}function Be(n,e,t,r){let i=n+Ct,s=Ae(),o=Rf(s,i);return VR(s,i)?LR(s,Io(),e,o.transform,t,r,o):o.transform(t,r)}function VR(n,e){return n[pe].data[e].pure}function Xr(n,e){return _p(n,e)}var Hf=null;function UR(n){Hf!==null&&(n.defaultEncapsulation!==Hf.defaultEncapsulation||n.preserveWhitespaces!==Hf.preserveWhitespaces)||(Hf=n)}var op=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},xb=(()=>{class n{compileModuleSync(t){return new _u(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=kv(t),s=xA(i.declarations).reduce((o,a)=>{let c=$r(a);return c&&o.push(new ks(c)),o},[]);return new op(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BR=new Z("");var jR=(()=>{class n{applicationErrorHandler=F(nr);appRef=F(ir);taskService=F(Ti);ngZone=F(Ve);zonelessEnabled=F(cu);tracing=F(xo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ke;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ql):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(uy,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?ay:oy;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ql+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ay(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $R(){return[{provide:ys,useExisting:jR},{provide:Ve,useClass:Jl},{provide:cu,useValue:!0}]}function h5(){return typeof $localize<"u"&&$localize.locale||Iu}var No=new Z("",{factory:()=>F(No,{optional:!0,skipSelf:!0})||h5()});function Su(n,e){return Uh(n,e?.equal)}var JR=Symbol("InputSignalNode#UNSET"),C5=re(O({},Bh),{transformFn:void 0,applyValueToInputSignal(n,e){jl(n,e)}});function ZR(n,e){let t=Object.create(C5);t.value=n,t.transformFn=e?.transform;function r(){if(Vl(t),t.value===JR){let i=null;throw new z(-950,i)}return t.value}return r[hn]=t,r}function HR(n,e){return ZR(n,e)}function T5(n){return ZR(JR,n)}var XR=(HR.required=T5,HR);function D5(n,e,t){let r=new _u(t);return Promise.resolve(r)}function GR(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var kp=new Z(""),x5=new Z("");function Cu(n){return!n.moduleRef}function A5(n){let e=Cu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ve);return t.run(()=>{Cu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(nr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Cu(n)){let s=()=>e.destroy(),o=n.platformInjector.get(kp);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(kp);o.add(s),n.moduleRef.onDestroy(()=>{du(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return k5(r,t,()=>{let s=e.get(Ti),o=s.add(),a=e.get(Sb);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(No,Iu);if(kR(c||Iu),!e.get(x5,!0))return Cu(n)?e.get(ir):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Cu(n)){let d=e.get(ir);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return ek?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var ek;function zR(){ek=R5}function R5(n,e){let t=n.injector.get(ir);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new z(-403,!1);e.push(n)}function k5(n,e,t){try{let r=t();return ki(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var tk=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=[],s=[$R(),...i,...r?.applicationProviders??[],x1],o=wR(t.moduleType,this.injector,s);return zR(),A5({moduleRef:o,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=Cb({},r);return zR(),D5(this.injector,i,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new z(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(kp,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(ae(Ze))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Mb=null;function P5(n){if(Fb())throw new z(400,!1);AR(),Mb=n;let e=n.get(tk);return O5(n),e}function Ob(n,e,t=[]){let r=`Platform: ${e}`,i=new Z(r);return(s=[])=>{let o=Fb();if(!o){let a=[...t,...s,{provide:i,useValue:!0}];o=n?.(a)??P5(N5(a,r))}return M5(i)}}function N5(n=[],e){return Ze.create({name:e,providers:[{provide:tu,useValue:"platform"},{provide:kp,useValue:new Set([()=>Mb=null])},...n]})}function M5(n){let e=Fb();if(!e)throw new z(-401,!1);return e}function Fb(){return Mb?.get(tk)??null}function O5(n){let e=n.get(cp,null);kt(n,()=>{e?.forEach(t=>t())})}function Lb(){return!1}var Dt=(()=>{class n{static __NG_ELEMENT_ID__=F5}return n})();function F5(n){return L5(vn(),Ae(),(n&16)===16)}function L5(n,e,t){if(Cs(n)&&!t){let r=Xn(n.index,e);return new As(r,r)}else if(n.type&175){let r=e[Dn];return new As(r,e)}return null}var Ab=class{constructor(){}supports(e){return _b(e)}create(e){return new Rb(e)}},V5=(n,e)=>e,Rb=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||V5}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<qR(r,i,s)?t:r,a=qR(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,d=c-i;if(u!=d){for(let v=0;v<u;v++){let b=v<s.length?s[v]:s[v]=0,S=b+v;d<=S&&S<u&&(s[v]=b+1)}let p=o.previousIndex;s[p]=d-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!_b(e))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,fR(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new kb(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Pp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Pp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},kb=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Pb=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Pp=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Pb,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function qR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function WR(){return new Np([new Ab])}var Np=(()=>{class n{factories;static \u0275prov=K({token:n,providedIn:"root",factory:WR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=F(n,{optional:!0,skipSelf:!0});return n.create(t,r||WR())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new z(901,!1)}}return n})();var nk=Ob(null,"core",[]),rk=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(ae(ir))};static \u0275mod=ft({type:n});static \u0275inj=dt({})}return n})();function Mo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Vb(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function ik(n,e){let t=$r(n),r=e.elementInjector||Ha();return new ks(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function sk(n){let e=$r(n);if(!e)return null;let t=new ks(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ck=null;function $n(){return ck}function Ub(n){ck??=n}var Tu=class{},Du=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>F(lk),providedIn:"platform"})}return n})(),Bb=new Z(""),lk=(()=>{class n extends Du{_location;_history;_doc=F(nt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $n().getBaseHref(this._doc)}onPopState(t){let r=$n().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=$n().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Mp(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function ok(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Dr(n){return n&&n[0]!=="?"?`?${n}`:n}var Mi=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>F(Fp),providedIn:"root"})}return n})(),Op=new Z(""),Fp=(()=>{class n extends Mi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Mp(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Dr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Dr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Dr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ae(Du),ae(Op,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ns=(()=>{class n{_subject=new Ee;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=j5(ok(ak(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Dr(r))}normalize(t){return n.stripTrailingSlash(B5(this._basePath,ak(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Dr;static joinWithSlash=Mp;static stripTrailingSlash=ok;static \u0275fac=function(r){return new(r||n)(ae(Mi))};static \u0275prov=K({token:n,factory:()=>U5(),providedIn:"root"})}return n})();function U5(){return new Ns(ae(Mi))}function B5(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function ak(n){return n.replace(/\/index.html$/,"")}function j5(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var qb=(()=>{class n extends Mi{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Mp(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Dr(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Dr(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ae(Du),ae(Op,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var Wb=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(Wb||{});var ei={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function lc(n,e){let t=Dp(n),r=t[Di.NumberSymbols][e];if(typeof r>"u"){if(e===ei.CurrencyDecimal)return t[Di.NumberSymbols][ei.Decimal];if(e===ei.CurrencyGroup)return t[Di.NumberSymbols][ei.Group]}return r}function pk(n,e){return Dp(n)[Di.NumberFormats][e]}var $5=/^(\d+)?\.((\d+)(-(\d+))?)?$/,uk=22,Lp=".",xu="0",H5=";",G5=",",jb="#";function z5(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=lc(t,ei.Infinity);else{let u=K5(n);o&&(u=W5(u));let d=e.minInt,p=e.minFrac,v=e.maxFrac;if(s){let J=s.match($5);if(J===null)throw new z(2306,!1);let ie=J[1],fe=J[3],Xe=J[5];ie!=null&&(d=$b(ie)),fe!=null&&(p=$b(fe)),Xe!=null?v=$b(Xe):fe!=null&&p>v&&(v=p)}Y5(u,p,v);let b=u.digits,S=u.integerLen,P=u.exponent,M=[];for(c=b.every(J=>!J);S<d;S++)b.unshift(0);for(;S<0;S++)b.unshift(0);S>0?M=b.splice(S,b.length):(M=b,b=[0]);let H=[];for(b.length>=e.lgSize&&H.unshift(b.splice(-e.lgSize,b.length).join(""));b.length>e.gSize;)H.unshift(b.splice(-e.gSize,b.length).join(""));b.length&&H.unshift(b.join("")),a=H.join(lc(t,r)),M.length&&(a+=lc(t,i)+M.join("")),P&&(a+=lc(t,ei.Exponential)+"+"+P)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function mk(n,e,t){let r=pk(e,Wb.Decimal),i=q5(r,lc(e,ei.MinusSign));return z5(n,i,e,ei.Group,ei.Decimal,t)}function q5(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(H5),i=r[0],s=r[1],o=i.indexOf(Lp)!==-1?i.split(Lp):[i.substring(0,i.lastIndexOf(xu)+1),i.substring(i.lastIndexOf(xu)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(jb));for(let d=0;d<c.length;d++){let p=c.charAt(d);p===xu?t.minFrac=t.maxFrac=d+1:p===jb?t.maxFrac=d+1:t.posSuf+=p}let u=a.split(G5);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){let d=i.length-t.posPre.length-t.posSuf.length,p=s.indexOf(jb);t.negPre=s.substring(0,p).replace(/'/g,""),t.negSuf=s.slice(p+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function W5(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function K5(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(Lp))>-1&&(e=e.replace(Lp,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===xu;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===xu;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>uk&&(r=r.splice(0,uk-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function Y5(n,e,t){if(e>t)throw new z(2307,!1);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let p=o;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let p=1;p<o;p++)r[p]=0}if(a>=5)if(o-1<0){for(let p=0;p>o;p--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,u=e+n.integerLen,d=r.reduceRight(function(p,v,b,S){return v=v+p,S[b]=v<10?v:v-10,c&&(S[b]===0&&b>=u?S.pop():c=!1),v>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function $b(n){let e=parseInt(n);if(isNaN(e))throw new z(2305,!1);return e}var Hb=/\s+/,dk=[],Oi=(()=>{class n{_ngEl;_renderer;initialClasses=dk;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Hb):dk}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Hb):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Hb).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(X(en),X(Ai))};static \u0275dir=Pt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Vp=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Nt=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Vp(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),hk(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);hk(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(X(Un),X(Cr),X(Np))};static \u0275dir=Pt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function hk(n,e){n.context.$implicit=e.item}var xt=(()=>{class n{_viewContainer;_context=new Up;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fk(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fk(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(X(Un),X(Cr))};static \u0275dir=Pt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Up=class{$implicit=null;ngIf=null};function fk(n,e){if(n&&!n.createEmbeddedView)throw new z(2020,!1)}var Au=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,i):!1,get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static \u0275fac=function(r){return new(r||n)(X(Un))};static \u0275dir=Pt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Tr]})}return n})();function gk(n,e){return new z(2100,!1)}var Gb=class{createSubscription(e,t,r){return Tt(()=>e.subscribe({next:t,error:r}))}dispose(e){Tt(()=>e.unsubscribe())}},zb=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},Q5=new zb,J5=new Gb,Kb=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=F(nr);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(ki(t))return Q5;if(Sp(t))return J5;throw gk(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(X(Dt,16))};static \u0275pipe=Ep({name:"async",type:n,pure:!1})}return n})();var Bt=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!Z5(t))return null;i||=this._locale;try{let s=X5(t);return mk(s,i,r)}catch(s){throw gk(n,s.message)}}static \u0275fac=function(r){return new(r||n)(X(No,16))};static \u0275pipe=Ep({name:"number",type:n,pure:!0})}return n})();function Z5(n){return!(n==null||n===""||n!==n)}function X5(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new z(2309,!1);return n}var Oo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ft({type:n});static \u0275inj=dt({})}return n})();function Yb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ru=class{};function _k(n,e,t){return Tb(n,e,t)}var Jb="browser";function vk(n){return n===Jb}var yk=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>new Qb(F(nt),window)})}return n})(),Qb=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(re(O({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=e6(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(bs(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(re(O({},t),{left:i-o[0],top:s-o[1]}))}};function e6(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var ku=class{_doc;constructor(e){this._doc=e}manager},Bp=(()=>{class n extends ku{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(ae(nt))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Hp=new Z(""),tE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Bp));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Bp);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ae(Hp),ae(Ve))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Zb="ng-app-id";function bk(n){for(let e of n)e.remove()}function Ek(n,e){let t=e.createElement("style");return t.textContent=n,t}function t6(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Zb}="${e}"],link[${Zb}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Zb),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function eE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var nE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,t6(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Ek);r?.forEach(i=>this.addUsage(i,this.external,eE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(bk(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])bk(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Ek(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,eE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ae(nt),ae(ap),ae(up,8),ae(xi))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Xb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},rE=/%COMP%/g;var Ik="%COMP%",n6=`_nghost-${Ik}`,r6=`_ngcontent-${Ik}`,i6=!0,s6=new Z("",{factory:()=>i6});function o6(n){return r6.replace(rE,n)}function a6(n){return n6.replace(rE,n)}function Sk(n,e){return e.map(t=>t.replace(rE,n))}var Mu=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Pu(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof $p?i.applyToHost(t):i instanceof Nu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer,v=this.tracingService;switch(r.encapsulation){case Sr.Emulated:s=new $p(c,u,r,this.appId,d,o,a,p,v);break;case Sr.ShadowDom:return new jp(c,t,r,o,a,this.nonce,p,v,u);case Sr.ExperimentalIsolatedShadowDom:return new jp(c,t,r,o,a,this.nonce,p,v);default:s=new Nu(c,u,r,d,o,a,p,v);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ae(tE),ae(nE),ae(ap),ae(s6),ae(nt),ae(Ve),ae(up),ae(xo,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Pu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Xb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wk(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wk(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Xb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Xb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Kr.DashCase|Kr.Important)?e.style.setProperty(t,r,i&Kr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Kr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=$n().getGlobalEventTarget(this.doc,e),!e))throw new z(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function wk(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var jp=class extends Pu{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,u){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=Sk(r.id,d);for(let v of d){let b=document.createElement("style");o&&b.setAttribute("nonce",o),b.textContent=v,this.shadowRoot.appendChild(b)}let p=r.getExternalStyles?.();if(p)for(let v of p){let b=eE(v,i);o&&b.setAttribute("nonce",o),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Nu=class extends Pu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,u){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?Sk(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&nc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},$p=class extends Nu{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,u){let d=i+"-"+r.id;super(e,t,r,s,o,a,c,u,d),this.contentAttr=o6(d),this.hostAttr=a6(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Gp=class n extends Tu{supportsDOMEvents=!0;static makeCurrent(){Ub(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=c6();return t==null?null:l6(t)}resetBaseElement(){Ou=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yb(document.cookie,e)}},Ou=null;function c6(){return Ou=Ou||document.head.querySelector("base"),Ou?Ou.getAttribute("href"):null}function l6(n){return new URL(n,document.baseURI).pathname}var zp=class{addToWindow(e){mn.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new z(5103,!1);return s},mn.getAllAngularTestabilities=()=>e.getAllTestabilities(),mn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=mn.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};mn.frameworkStabilizers||(mn.frameworkStabilizers=[]),mn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?$n().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},u6=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Ck=["alt","control","meta","shift"],d6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},h6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Tk=(()=>{class n extends ku{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$n().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Ck.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=d6[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Ck.forEach(o=>{if(o!==i){let a=h6[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ae(nt))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function f6(){Gp.makeCurrent()}function p6(){return new jr}function m6(){return Jy(document),document}var g6=[{provide:xi,useValue:Jb},{provide:cp,useValue:f6,multi:!0},{provide:nt,useFactory:m6}],iE=Ob(nk,"browser",g6);var _6=[{provide:Ip,useClass:zp},{provide:wp,useClass:wu},{provide:wu,useClass:wu}],v6=[{provide:tu,useValue:"root"},{provide:jr,useFactory:p6},{provide:Hp,useClass:Bp,multi:!0},{provide:Hp,useClass:Tk,multi:!0},Mu,nE,tE,{provide:xn,useExisting:Mu},{provide:Ru,useClass:u6},[]],Fu=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ft({type:n});static \u0275inj=dt({providers:[...v6,..._6],imports:[Oo,rk]})}return n})();var Dk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ae(nt))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var be=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(be||{}),ar="*";function $t(n,e){return{type:be.Trigger,name:n,definitions:e,options:{}}}function At(n,e=null){return{type:be.Animate,styles:e,timings:n}}function Ak(n,e=null){return{type:be.Sequence,steps:n,options:e}}function Pe(n){return{type:be.Style,styles:n,offset:null}}function qp(n,e,t){return{type:be.State,name:n,styles:e,options:t}}function Wp(n){return{type:be.Keyframes,steps:n}}function Rt(n,e,t=null){return{type:be.Transition,expr:n,animation:e,options:t}}var ti=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Fo=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},uc="!";function Rk(n){return new z(3e3,!1)}function y6(){return new z(3100,!1)}function b6(){return new z(3101,!1)}function E6(n){return new z(3001,!1)}function w6(n){return new z(3003,!1)}function I6(n){return new z(3004,!1)}function Pk(n,e){return new z(3005,!1)}function Nk(){return new z(3006,!1)}function Mk(){return new z(3007,!1)}function Ok(n,e){return new z(3008,!1)}function Fk(n){return new z(3002,!1)}function Lk(n,e,t,r,i){return new z(3010,!1)}function Vk(){return new z(3011,!1)}function Uk(){return new z(3012,!1)}function Bk(){return new z(3200,!1)}function jk(){return new z(3202,!1)}function $k(){return new z(3013,!1)}function Hk(n){return new z(3014,!1)}function Gk(n){return new z(3015,!1)}function zk(n){return new z(3016,!1)}function qk(n,e){return new z(3404,!1)}function S6(n){return new z(3502,!1)}function Wk(n){return new z(3503,!1)}function Kk(){return new z(3300,!1)}function Yk(n){return new z(3504,!1)}function Qk(n){return new z(3301,!1)}function Jk(n,e){return new z(3302,!1)}function Zk(n){return new z(3303,!1)}function Xk(n,e){return new z(3400,!1)}function eP(n){return new z(3401,!1)}function tP(n){return new z(3402,!1)}function nP(n,e){return new z(3505,!1)}function Fi(n){switch(n.length){case 0:return new ti;case 1:return n[0];default:return new Fo(n)}}function cE(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),d=u==o,p=d&&a||new Map;c.forEach((v,b)=>{let S=b,P=v;if(b!=="offset")switch(S=n.normalizePropertyName(S,i),P){case uc:P=t.get(b);break;case ar:P=r.get(b);break;default:P=n.normalizeStyleValue(b,S,P,i);break}p.set(S,P)}),d||s.push(p),a=p,o=u}),i.length)throw S6(i);return s}function Kp(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&sE(t,"start",n)));break;case"done":n.onDone(()=>r(t&&sE(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&sE(t,"destroy",n)));break}}function sE(n,e,t){let r=t.totalTime,i=!!t.disabled,s=Yp(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function Yp(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Rn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function lE(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var C6=typeof document>"u"?null:document.documentElement;function Qp(n){let e=n.parentNode||n.host||null;return e===C6?null:e}function T6(n){return n.substring(1,6)=="ebkit"}var Lo=null,kk=!1;function rP(n){Lo||(Lo=D6()||{},kk=Lo.style?"WebkitAppearance"in Lo.style:!1);let e=!0;return Lo.style&&!T6(n)&&(e=n in Lo.style,!e&&kk&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Lo.style)),e}function D6(){return typeof document<"u"?document.body:null}function uE(n,e){for(;e;){if(e===n)return!0;e=Qp(e)}return!1}function dE(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var x6=1e3,hE="{{",A6="}}",fE="ng-enter",Jp="ng-leave",Lu="ng-trigger",Vu=".ng-trigger",pE="ng-animating",Zp=".ng-animating";function ni(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:oE(parseFloat(e[1]),e[2])}function oE(n,e){switch(e){case"s":return n*x6;default:return n}}function Uu(n,e,t){return n.hasOwnProperty("duration")?n:k6(n,e,t)}var R6=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function k6(n,e,t){let r,i=0,s="";if(typeof n=="string"){let o=n.match(R6);if(o===null)return e.push(Rk(n)),{duration:0,delay:0,easing:""};r=oE(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(i=oE(parseFloat(a),o[4]));let c=o[5];c&&(s=c)}else r=n;if(!t){let o=!1,a=e.length;r<0&&(e.push(y6()),o=!0),i<0&&(e.push(b6()),o=!0),o&&e.splice(a,0,Rk(n))}return{duration:r,delay:i,easing:s}}function iP(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Ar(n,e,t){e.forEach((r,i)=>{let s=Xp(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Ms(n,e){e.forEach((t,r)=>{let i=Xp(r);n.style[i]=""})}function dc(n){return Array.isArray(n)?n.length==1?n[0]:Ak(n):n}function sP(n,e,t){let r=e.params||{},i=mE(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(E6(s))})}var aE=new RegExp(`${hE}\\s*(.+?)\\s*${A6}`,"g");function mE(n){let e=[];if(typeof n=="string"){let t;for(;t=aE.exec(n);)e.push(t[1]);aE.lastIndex=0}return e}function hc(n,e,t){let r=`${n}`,i=r.replace(aE,(s,o)=>{let a=e[o];return a==null&&(t.push(w6(o)),a=""),a.toString()});return i==r?n:i}var P6=/-+([a-z0-9])/g;function Xp(n){return n.replace(P6,(...e)=>e[1].toUpperCase())}function oP(n,e){return n===0||e===0}function aP(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,em(n,a)))}}return e}function kn(n,e,t){switch(e.type){case be.Trigger:return n.visitTrigger(e,t);case be.State:return n.visitState(e,t);case be.Transition:return n.visitTransition(e,t);case be.Sequence:return n.visitSequence(e,t);case be.Group:return n.visitGroup(e,t);case be.Animate:return n.visitAnimate(e,t);case be.Keyframes:return n.visitKeyframes(e,t);case be.Style:return n.visitStyle(e,t);case be.Reference:return n.visitReference(e,t);case be.AnimateChild:return n.visitAnimateChild(e,t);case be.AnimateRef:return n.visitAnimateRef(e,t);case be.Query:return n.visitQuery(e,t);case be.Stagger:return n.visitStagger(e,t);default:throw I6(e.type)}}function em(n,e){return window.getComputedStyle(n)[e]}var PE=(()=>{class n{validateStyleProperty(t){return rP(t)}containsElement(t,r){return uE(t,r)}getParentElement(t){return Qp(t)}query(t,r,i){return dE(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new ti(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Uo=class{static NOOP=new PE},Bo=class{};var N6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),sm=class extends Bo{normalizePropertyName(e,t){return Xp(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(N6.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(Pk(e,r))}return o+s}};var om="*";function M6(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>O6(r,t,e)):t.push(n),t}function O6(n,e,t){if(n[0]==":"){let c=F6(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(Gk(n)),e;let i=r[1],s=r[2],o=r[3];e.push(cP(i,o));let a=i==om&&o==om;s[0]=="<"&&!a&&e.push(cP(o,i))}function F6(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(zk(n)),"* => *"}}var tm=new Set(["true","1"]),nm=new Set(["false","0"]);function cP(n,e){let t=tm.has(n)||nm.has(n),r=tm.has(e)||nm.has(e);return(i,s)=>{let o=n==om||n==i,a=e==om||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?tm.has(n):nm.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?tm.has(e):nm.has(e)),o&&a}}var vP=":self",L6=new RegExp(`s*${vP}s*,?`,"g");function yP(n,e,t,r){return new EE(n).build(e,t,r)}var lP="",EE=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new wE(t);return this._resetContextStyleTimingState(i),kn(this,dc(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=lP,e.collectedStyles=new Map,e.collectedStyles.set(lP,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(Nk()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==be.State){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,s.push(this.visitState(c,t))}),c.name=u}else if(a.type==be.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(Mk())}),{type:be.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{mE(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&t.errors.push(Ok(e.name,[...s.values()]))}return{type:be.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=kn(this,dc(e.animation),t),i=M6(e.expr,t.errors);return{type:be.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Vo(e.options)}}visitSequence(e,t){return{type:be.Sequence,steps:e.steps.map(r=>kn(this,r,t)),options:Vo(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=kn(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:be.Group,steps:s,options:Vo(e.options)}}visitAnimate(e,t){let r=j6(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Pe({});if(s.type==be.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let u={};r.easing&&(u.easing=r.easing),o=Pe(u)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:be.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===ar?r.push(a):t.errors.push(Fk(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(hE)>=0){s=!0;break}}}),{type:be.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let u=t.collectedStyles.get(t.currentQuerySelector),d=u.get(c),p=!0;d&&(s!=i&&s>=d.startTime&&i<=d.endTime&&(t.errors.push(Lk(c,d.startTime,d.endTime,s,i)),p=!1),s=d.startTime),p&&u.set(c,{startTime:s,endTime:i}),t.options&&sP(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:be.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Vk()),r;let i=1,s=0,o=[],a=!1,c=!1,u=0,d=e.steps.map(H=>{let J=this._makeStyleAst(H,t),ie=J.offset!=null?J.offset:B6(J.styles),fe=0;return ie!=null&&(s++,fe=J.offset=ie),c=c||fe<0||fe>1,a=a||fe<u,u=fe,o.push(fe),J});c&&t.errors.push(Uk()),a&&t.errors.push(Bk());let p=e.steps.length,v=0;s>0&&s<p?t.errors.push(jk()):s==0&&(v=i/(p-1));let b=p-1,S=t.currentTime,P=t.currentAnimateTimings,M=P.duration;return d.forEach((H,J)=>{let ie=v>0?J==b?1:v*J:o[J],fe=ie*M;t.currentTime=S+P.delay+fe,P.duration=fe,this._validateStyleAst(H,t),H.offset=ie,r.styles.push(H)}),r}visitReference(e,t){return{type:be.Reference,animation:kn(this,dc(e.animation),t),options:Vo(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:be.AnimateChild,options:Vo(e.options)}}visitAnimateRef(e,t){return{type:be.AnimateRef,animation:this.visitReference(e.animation,t),options:Vo(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=V6(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Rn(t.collectedStyles,t.currentQuerySelector,new Map);let a=kn(this,dc(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:be.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Vo(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push($k());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Uu(e.timings,t.errors,!0);return{type:be.Stagger,animation:kn(this,dc(e.animation),t),timings:r,options:null}}};function V6(n){let e=!!n.split(/\s*,\s*/).find(t=>t==vP);return e&&(n=n.replace(L6,"")),n=n.replace(/@\*/g,Vu).replace(/@\w+/g,t=>Vu+"-"+t.slice(1)).replace(/:animating/g,Zp),[n,e]}function U6(n){return n?O({},n):null}var wE=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function B6(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function j6(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Uu(n,e).duration;return gE(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=gE(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Uu(t,e);return gE(i.duration,i.delay,i.easing)}function Vo(n){return n?(n=O({},n),n.params&&(n.params=U6(n.params))):n={},n}function gE(n,e,t){return{duration:n,delay:e,easing:t}}function NE(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var ju=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},$6=1,H6=":enter",G6=new RegExp(H6,"g"),z6=":leave",q6=new RegExp(z6,"g");function bP(n,e,t,r,i,s=new Map,o=new Map,a,c,u=[]){return new IE().buildKeyframes(n,e,t,r,i,s,o,a,c,u)}var IE=class{buildKeyframes(e,t,r,i,s,o,a,c,u,d=[]){u=u||new ju;let p=new SE(e,t,u,i,s,d,[]);p.options=c;let v=c.delay?ni(c.delay):0;p.currentTimeline.delayNextStep(v),p.currentTimeline.setStyles([o],null,p.errors,c),kn(this,r,p);let b=p.timelines.filter(S=>S.containsAnimation());if(b.length&&a.size){let S;for(let P=b.length-1;P>=0;P--){let M=b[P];if(M.element===t){S=M;break}}S&&!S.allowOnlyTimelineStyles()&&S.setStyles([a],null,p.errors,c)}return b.length?b.map(S=>S.buildKeyframes()):[NE(t,[],[],[],0,v,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:ni(hc(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?ni(r.duration):null,a=r.delay!=null?ni(r.delay):null;return o!==0&&e.forEach(c=>{let u=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),kn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==be.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=am);let o=ni(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>kn(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?ni(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),kn(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?hc(r,t.params,t.errors):r;return Uu(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==be.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ni(i.delay):0;s&&(t.previousNode.type===be.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=am);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,d)=>{t.currentQueryIndex=d;let p=t.createSubContext(e.options,u);s&&p.delayNextStep(s),u===t.element&&(c=p.currentTimeline),kn(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe();let v=p.currentTimeline.currentTime;o=Math.max(o,v)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let d=t.currentTimeline;c&&d.delayNextStep(c);let p=d.currentTime;kn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},am={},SE=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=am;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=c||new cm(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=ni(r.duration)),r.delay!=null&&(i.delay=ni(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=hc(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=am,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new CE(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(G6,"."+this._enterClassName),e=e.replace(q6,"."+this._leaveClassName);let c=r!=1,u=this._driver.query(this.element,e,c);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&a.length==0&&o.push(Hk(t)),a}},cm=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=$6,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ar),this._currentKeyframe.set(t,ar);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=W6(e,this._globalTimelineStyles);for(let[a,c]of o){let u=hc(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ar),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let u=new Map([...this._backFill,...a]);u.forEach((d,p)=>{d===uc?e.add(p):d===ar&&t.add(p)}),r||u.set("offset",c/this.duration),i.push(u)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return NE(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},CE=class extends cm{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let u=new Map(e[0]);u.set("offset",uP(a)),s.push(u);let d=e.length-1;for(let p=1;p<=d;p++){let v=new Map(e[p]),b=v.get("offset"),S=t+b*r;v.set("offset",uP(S/o)),s.push(v)}r=o,t=0,i="",e=s}return NE(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function uP(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function W6(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,ar)}else for(let[s,o]of i)t.set(s,o)}),t}function dP(n,e,t,r,i,s,o,a,c,u,d,p,v){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:d,totalTime:p,errors:v}}var _E={},lm=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return K6(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,u,d){let p=[],v=this.ast.options&&this.ast.options.params||_E,b=a&&a.params||_E,S=this.buildStyles(r,b,p),P=c&&c.params||_E,M=this.buildStyles(i,P,p),H=new Set,J=new Map,ie=new Map,fe=i==="void",Xe={params:EP(P,v),delay:this.ast.options?.delay},xe=d?[]:bP(e,t,this.ast.animation,s,o,S,M,Xe,u,p),x=0;return xe.forEach(I=>{x=Math.max(I.duration+I.delay,x)}),p.length?dP(t,this._triggerName,r,i,fe,S,M,[],[],J,ie,x,p):(xe.forEach(I=>{let C=I.element,A=Rn(J,C,new Set);I.preStyleProps.forEach(N=>A.add(N));let R=Rn(ie,C,new Set);I.postStyleProps.forEach(N=>R.add(N)),C!==t&&H.add(C)}),dP(t,this._triggerName,r,i,fe,S,M,xe,[...H.values()],J,ie,x))}};function K6(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function EP(n,e){let t=O({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var TE=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=EP(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=hc(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function Y6(n,e,t){return new DE(n,e,t)}var DE=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new TE(i.style,s,r))}),hP(this.states,"true","1"),hP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new lm(e,i,this.states))}),this.fallbackTransition=Q6(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function Q6(n,e,t){let r=[(o,a)=>!0],i={type:be.Sequence,steps:[],options:null},s={type:be.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new lm(n,s,e)}function hP(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var J6=new ju,xE=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=yP(this._driver,t,r,i);if(r.length)throw Wk(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=cE(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=bP(this._driver,t,s,fE,Jp,new Map,new Map,r,J6,i),o.forEach(d=>{let p=Rn(a,d.element,new Map);d.postStyleProps.forEach(v=>p.set(v,null))})):(i.push(Kk()),o=[]),i.length)throw Yk(i);a.forEach((d,p)=>{d.forEach((v,b)=>{d.set(b,this._driver.computeStyle(p,b,ar))})});let c=o.map(d=>{let p=a.get(d.element);return this._buildPlayer(d,new Map,p)}),u=Fi(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Qk(e);return t}listen(e,t,r,i){let s=Yp(t,"","","");return Kp(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},fP="ng-animate-queued",Z6=".ng-animate-queued",vE="ng-animate-disabled",X6=".ng-animate-disabled",e$="ng-star-inserted",t$=".ng-star-inserted",n$=[],wP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},r$={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Rr="__ng_removed",$u=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=s$(i),r){let s=e,{value:o}=s,a=Fl(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Bu="void",yE=new $u(Bu),AE=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,cr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw Jk(r,t);if(r==null||r.length==0)throw Zk(t);if(!o$(r))throw Xk(r,t);let s=Rn(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=Rn(this._engine.statesByElement,e,new Map);return a.has(t)||(cr(e,Lu),cr(e,Lu+"-"+t),a.set(t,yE)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw eP(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Hu(this.id,t,e),a=this._engine.statesByElement.get(e);a||(cr(e,Lu),cr(e,Lu+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),u=new $u(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=yE),!(u.value===Bu)&&c.value===u.value){if(!l$(c.params,u.params)){let P=[],M=s.matchStyles(c.value,c.params,P),H=s.matchStyles(u.value,u.params,P);P.length?this._engine.reportError(P):this._engine.afterFlush(()=>{Ms(e,M),Ar(e,H)})}return}let v=Rn(this._engine.playersByElement,e,[]);v.forEach(P=>{P.namespaceId==this.id&&P.triggerName==t&&P.queued&&P.destroy()});let b=s.matchTransition(c.value,u.value,e,u.params),S=!1;if(!b){if(!i)return;b=s.fallbackTransition,S=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:b,fromState:c,toState:u,player:o,isFallbackTransition:S}),S||(cr(e,fP),o.onStart(()=>{fc(e,fP)})),o.onDone(()=>{let P=this.players.indexOf(o);P>=0&&this.players.splice(P,1);let M=this._engine.playersByElement.get(e);if(M){let H=M.indexOf(o);H>=0&&M.splice(H,1)}}),this.players.push(o),v.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Vu,!0);r.forEach(i=>{if(i[Rr])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){let d=this.trigger(e,u,Bu,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Fi(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,u=r.get(o)||yE,d=new $u(Bu),p=new Hu(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:d,player:p,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Rr];(!s||s===wP)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){cr(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=Yp(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Kp(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},RE=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new AE(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(rm(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!rm(t))return;let s=t[Rr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),cr(e,vE)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),fc(e,vE))}removeNode(e,t,r){if(rm(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Rr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return rm(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Vu,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Zp,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Fi(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Rr];if(t&&t.setForRemoval){if(e[Rr]=wP,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(vE)&&this.markElementAsDisabled(e,!1),this.driver.query(e,X6,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];cr(i,e$)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Fi(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw tP(e)}_flushAnimations(e,t){let r=new ju,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,d=new Set;this.disabledNodes.forEach(se=>{d.add(se);let ce=this.driver.query(se,Z6,!0);for(let ue=0;ue<ce.length;ue++)d.add(ce[ue])});let p=this.bodyNode,v=Array.from(this.statesByElement.keys()),b=gP(v,this.collectedEnterElements),S=new Map,P=0;b.forEach((se,ce)=>{let ue=fE+P++;S.set(ce,ue),se.forEach(Ne=>cr(Ne,ue))});let M=[],H=new Set,J=new Set;for(let se=0;se<this.collectedLeaveElements.length;se++){let ce=this.collectedLeaveElements[se],ue=ce[Rr];ue&&ue.setForRemoval&&(M.push(ce),H.add(ce),ue.hasAnimation?this.driver.query(ce,t$,!0).forEach(Ne=>H.add(Ne)):J.add(ce))}let ie=new Map,fe=gP(v,Array.from(H));fe.forEach((se,ce)=>{let ue=Jp+P++;ie.set(ce,ue),se.forEach(Ne=>cr(Ne,ue))}),e.push(()=>{b.forEach((se,ce)=>{let ue=S.get(ce);se.forEach(Ne=>fc(Ne,ue))}),fe.forEach((se,ce)=>{let ue=ie.get(ce);se.forEach(Ne=>fc(Ne,ue))}),M.forEach(se=>{this.processLeaveNode(se)})});let Xe=[],xe=[];for(let se=this._namespaceList.length-1;se>=0;se--)this._namespaceList[se].drainQueuedTransitions(t).forEach(ue=>{let Ne=ue.player,St=ue.element;if(Xe.push(Ne),this.collectedEnterElements.length){let vt=St[Rr];if(vt&&vt.setForMove){if(vt.previousTriggersValues&&vt.previousTriggersValues.has(ue.triggerName)){let _i=vt.previousTriggersValues.get(ue.triggerName),Sn=this.statesByElement.get(ue.element);if(Sn&&Sn.has(ue.triggerName)){let vi=Sn.get(ue.triggerName);vi.value=_i,Sn.set(ue.triggerName,vi)}}Ne.destroy();return}}let Qn=!p||!this.driver.containsElement(p,St),_t=ie.get(St),ct=S.get(St),lt=this._buildInstruction(ue,r,ct,_t,Qn);if(lt.errors&&lt.errors.length){xe.push(lt);return}if(Qn){Ne.onStart(()=>Ms(St,lt.fromStyles)),Ne.onDestroy(()=>Ar(St,lt.toStyles)),i.push(Ne);return}if(ue.isFallbackTransition){Ne.onStart(()=>Ms(St,lt.fromStyles)),Ne.onDestroy(()=>Ar(St,lt.toStyles)),i.push(Ne);return}let is=[];lt.timelines.forEach(vt=>{vt.stretchStartingKeyframe=!0,this.disabledNodes.has(vt.element)||is.push(vt)}),lt.timelines=is,r.append(St,lt.timelines);let e_={instruction:lt,player:Ne,element:St};o.push(e_),lt.queriedElements.forEach(vt=>Rn(a,vt,[]).push(Ne)),lt.preStyleProps.forEach((vt,_i)=>{if(vt.size){let Sn=c.get(_i);Sn||c.set(_i,Sn=new Set),vt.forEach((vi,ss)=>Sn.add(ss))}}),lt.postStyleProps.forEach((vt,_i)=>{let Sn=u.get(_i);Sn||u.set(_i,Sn=new Set),vt.forEach((vi,ss)=>Sn.add(ss))})});if(xe.length){let se=[];xe.forEach(ce=>{se.push(nP(ce.triggerName,ce.errors))}),Xe.forEach(ce=>ce.destroy()),this.reportError(se)}let x=new Map,I=new Map;o.forEach(se=>{let ce=se.element;r.has(ce)&&(I.set(ce,ce),this._beforeAnimationBuild(se.player.namespaceId,se.instruction,x))}),i.forEach(se=>{let ce=se.element;this._getPreviousPlayers(ce,!1,se.namespaceId,se.triggerName,null).forEach(Ne=>{Rn(x,ce,[]).push(Ne),Ne.destroy()})});let C=M.filter(se=>_P(se,c,u)),A=new Map;mP(A,this.driver,J,u,ar).forEach(se=>{_P(se,c,u)&&C.push(se)});let N=new Map;b.forEach((se,ce)=>{mP(N,this.driver,new Set(se),c,uc)}),C.forEach(se=>{let ce=A.get(se),ue=N.get(se);A.set(se,new Map([...ce?.entries()??[],...ue?.entries()??[]]))});let T=[],Yn=[],rs={};o.forEach(se=>{let{element:ce,player:ue,instruction:Ne}=se;if(r.has(ce)){if(d.has(ce)){ue.onDestroy(()=>Ar(ce,Ne.toStyles)),ue.disabled=!0,ue.overrideTotalTime(Ne.totalTime),i.push(ue);return}let St=rs;if(I.size>1){let _t=ce,ct=[];for(;_t=_t.parentNode;){let lt=I.get(_t);if(lt){St=lt;break}ct.push(_t)}ct.forEach(lt=>I.set(lt,St))}let Qn=this._buildAnimation(ue.namespaceId,Ne,x,s,N,A);if(ue.setRealPlayer(Qn),St===rs)T.push(ue);else{let _t=this.playersByElement.get(St);_t&&_t.length&&(ue.parentPlayer=Fi(_t)),i.push(ue)}}else Ms(ce,Ne.fromStyles),ue.onDestroy(()=>Ar(ce,Ne.toStyles)),Yn.push(ue),d.has(ce)&&i.push(ue)}),Yn.forEach(se=>{let ce=s.get(se.element);if(ce&&ce.length){let ue=Fi(ce);se.setRealPlayer(ue)}}),i.forEach(se=>{se.parentPlayer?se.syncPlayerEvents(se.parentPlayer):se.destroy()});for(let se=0;se<M.length;se++){let ce=M[se],ue=ce[Rr];if(fc(ce,Jp),ue&&ue.hasAnimation)continue;let Ne=[];if(a.size){let Qn=a.get(ce);Qn&&Qn.length&&Ne.push(...Qn);let _t=this.driver.query(ce,Zp,!0);for(let ct=0;ct<_t.length;ct++){let lt=a.get(_t[ct]);lt&&lt.length&&Ne.push(...lt)}}let St=Ne.filter(Qn=>!Qn.destroyed);St.length?a$(this,ce,St):this.processLeaveNode(ce)}return M.length=0,T.forEach(se=>{this.players.push(se),se.onDone(()=>{se.destroy();let ce=this.players.indexOf(se);this.players.splice(ce,1)}),se.play()}),T}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Bu;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let u=c.element,d=u!==s,p=Rn(r,u,[]);this._getPreviousPlayers(u,d,o,a,t.toState).forEach(b=>{let S=b.getRealPlayer();S.beforeDestroy&&S.beforeDestroy(),b.destroy(),p.push(b)})}Ms(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,u=[],d=new Set,p=new Set,v=t.timelines.map(S=>{let P=S.element;d.add(P);let M=P[Rr];if(M&&M.removedBeforeQueried)return new ti(S.duration,S.delay);let H=P!==c,J=c$((r.get(P)||n$).map(x=>x.getRealPlayer())).filter(x=>{let I=x;return I.element?I.element===P:!1}),ie=s.get(P),fe=o.get(P),Xe=cE(this._normalizer,S.keyframes,ie,fe),xe=this._buildPlayer(S,Xe,J);if(S.subTimeline&&i&&p.add(P),H){let x=new Hu(e,a,P);x.setRealPlayer(xe),u.push(x)}return xe});u.forEach(S=>{Rn(this.playersByQueriedElement,S.element,[]).push(S),S.onDone(()=>i$(this.playersByQueriedElement,S.element,S))}),d.forEach(S=>cr(S,pE));let b=Fi(v);return b.onDestroy(()=>{d.forEach(S=>fc(S,pE)),Ar(c,t.toStyles)}),p.forEach(S=>{Rn(i,S,[]).push(b)}),b}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ti(e.duration,e.delay)}},Hu=class{namespaceId;triggerName;element;_player=new ti;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Kp(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Rn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function i$(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function s$(n){return n??null}function rm(n){return n&&n.nodeType===1}function o$(n){return n=="start"||n=="done"}function pP(n,e){let t=n.style.display;return n.style.display=e??"none",t}function mP(n,e,t,r,i){let s=[];t.forEach(c=>s.push(pP(c)));let o=[];r.forEach((c,u)=>{let d=new Map;c.forEach(p=>{let v=e.computeStyle(u,p,i);d.set(p,v),(!v||v.length==0)&&(u[Rr]=r$,o.push(u))}),n.set(u,d)});let a=0;return t.forEach(c=>pP(c,s[a++])),o}function gP(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let u=a.parentNode;return t.has(u)?c=u:i.has(u)?c=r:c=o(u),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function cr(n,e){n.classList?.add(e)}function fc(n,e){n.classList?.remove(e)}function a$(n,e,t){Fi(t).onDone(()=>n.processLeaveNode(e))}function c$(n){let e=[];return IP(n,e),e}function IP(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Fo?IP(r.players,e):e.push(r)}}function l$(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function _P(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var pc=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new RE(e.body,t,r),this._timelineEngine=new xE(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],u=[],d=yP(this._driver,s,c,u);if(c.length)throw qk(i,c);a=Y6(i,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=lE(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=lE(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function u$(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=bE(e[0]),e.length>1&&(r=bE(e[e.length-1]))):e instanceof Map&&(t=bE(e)),t||r?new d$(n,t,r):null}var d$=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ar(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ar(this._element,this._initialStyles),this._endStyles&&(Ar(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ms(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ms(this._element,this._endStyles),this._endStyles=null),Ar(this._element,this._initialStyles),this._state=3)}}return n})();function bE(n){let e=null;return n.forEach((t,r)=>{h$(r)&&(e=e||new Map,e.set(r,t))}),e}function h$(n){return n==="display"||n==="position"}var um=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:em(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},dm=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return uE(e,t)}getParentElement(e){return Qp(e)}query(e,t,r){return dE(e,t,r)}computeStyle(e,t,r){return em(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let u=new Map,d=o.filter(b=>b instanceof um);oP(r,i)&&d.forEach(b=>{b.currentSnapshot.forEach((S,P)=>u.set(P,S))});let p=iP(t).map(b=>new Map(b));p=aP(e,p,u);let v=u$(e,p);return new um(e,p,c,v)}};var im="@",SP="@.disabled",hm=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==im&&t==SP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},kE=class extends hm{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==im?t.charAt(1)=="."&&t==SP?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==im){let s=f$(e),o=t.slice(1),a="";return o.charAt(0)!=im&&([o,a]=p$(o)),this.engine.listen(this.namespaceId,s,o,a,c=>{let u=c._data||-1;this.factory.scheduleListenerCallback(u,r,c)})}return this.delegate.listen(e,t,r,i)}};function f$(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function p$(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var fm=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,d=u.get(i);if(!d){let p=()=>u.delete(i);d=new hm("",i,this.engine,p),u.set(i,d)}return d}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(s,o,e,u.name,u)};return t.data.animation.forEach(a),new kE(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var g$=(()=>{class n extends pc{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(ae(nt),ae(Uo),ae(Bo))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function _$(){return new sm}function v$(){return new fm(F(Mu),F(pc),F(Ve))}var TP=[{provide:Bo,useFactory:_$},{provide:pc,useClass:g$},{provide:xn,useFactory:v$}],y$=[{provide:Uo,useClass:PE},{provide:lp,useValue:"NoopAnimations"},...TP],CP=[{provide:Uo,useFactory:()=>new dm},{provide:lp,useFactory:()=>"BrowserAnimations"},...TP],DP=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?y$:CP}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ft({type:n});static \u0275inj=dt({providers:CP,imports:[Fu]})}return n})();function b$(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===0||t===1?1:i===0&&t!==0&&t%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var xP=["fr",[["AM","PM"]],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}",void 0,void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",b$];var AP=()=>{};var PP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},E$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},pm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=s>>2,p=(s&3)<<4|a>>4,v=(a&15)<<2|u>>6,b=u&63;c||(b=64,o||(v=64)),r.push(t[d],t[p],t[v],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(PP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):E$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new OE;let v=s<<2|a>>4;if(r.push(v),u!==64){let b=a<<4&240|u>>2;if(r.push(b),p!==64){let S=u<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},OE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},w$=function(n){let e=PP(n);return pm.encodeByteArray(e,!0)},zu=function(n){return w$(n).replace(/\./g,"")},mm=function(n){try{return pm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var I$=()=>LE().__FIREBASE_DEFAULTS__,S$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},C$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&mm(n[1]);return e&&JSON.parse(e)},gm=()=>{try{return AP()||I$()||S$()||C$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},VE=n=>{var e,t;return(t=(e=gm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},NP=n=>{let e=VE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},UE=()=>{var n;return(n=gm())===null||n===void 0?void 0:n.config},BE=n=>{var e;return(e=gm())===null||e===void 0?void 0:e[`_${n}`]};var jo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Os(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _m(n){return(await fetch(n,{credentials:"include"})).ok}function MP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zu(JSON.stringify(t)),zu(JSON.stringify(o)),""].join(".")}var Gu={};function T$(){let n={prod:[],emulator:[]};for(let e of Object.keys(Gu))Gu[e]?n.emulator.push(e):n.prod.push(e);return n}function D$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var RP=!1;function vm(n,e){if(typeof window>"u"||typeof document>"u"||!Os(window.location.host)||Gu[n]===e||Gu[n]||RP)return;Gu[n]=e;function t(v){return`__firebase__banner__${v}`}let r="__firebase__banner",s=T$().prod.length>0;function o(){let v=document.getElementById(r);v&&v.remove()}function a(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function u(){let v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{RP=!0,o()},v}function d(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function p(){let v=D$(r),b=t("text"),S=document.getElementById(b)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),H=t("preprendIcon"),J=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){let ie=v.element;a(ie),d(M,P);let fe=u();c(J,H),ie.append(J,S,M,fe),document.body.appendChild(ie)}s?(S.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function x$(){var n;let e=(n=gm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function VP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UP(){let n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function BP(){return!x$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qu(){try{return typeof indexedDB=="object"}catch{return!1}}function jP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var A$="FirebaseError",Hn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=A$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kr.prototype.create)}},kr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?R$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Hn(i,a,r)}};function R$(n,e){return n.replace(k$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var k$=/\{\$([^}]+)}/g;function $P(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ri(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(kP(s)&&kP(o)){if(!ri(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function kP(n){return n!==null&&typeof n=="object"}function mc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function HP(n,e){let t=new FE(n,e);return t.subscribe.bind(t)}var FE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");P$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ME),i.error===void 0&&(i.error=ME),i.complete===void 0&&(i.complete=ME);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function P$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ME(){}var Yge=14400*1e3;function Et(n){return n&&n._delegate?n._delegate:n}var bn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var $o="[DEFAULT]";var jE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new jo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M$(e))try{this.getOrInitializeService({instanceIdentifier:$o})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$o){return this.instances.has(e)}getOptions(e=$o){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:N$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$o){return this.component?this.component.multipleInstances?e:$o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function N$(n){return n===$o?void 0:n}function M$(n){return n.instantiationMode==="EAGER"}var ym=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new jE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var O$=[],Oe=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Oe||{}),F$={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},L$=Oe.INFO,V$={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},U$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=V$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ii=class{constructor(e){this.name=e,this._logLevel=L$,this._logHandler=U$,this._userLogHandler=null,O$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}};var B$=(n,e)=>e.some(t=>n instanceof t),GP,zP;function j$(){return GP||(GP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $$(){return zP||(zP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var qP=new WeakMap,HE=new WeakMap,WP=new WeakMap,$E=new WeakMap,zE=new WeakMap;function H$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(si(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&qP.set(t,n)}).catch(()=>{}),zE.set(e,n),e}function G$(n){if(HE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});HE.set(n,e)}var GE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return HE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return si(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function KP(n){GE=n(GE)}function z$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(bm(this),e,...t);return WP.set(r,e.sort?e.sort():[e]),si(r)}:$$().includes(n)?function(...e){return n.apply(bm(this),e),si(qP.get(this))}:function(...e){return si(n.apply(bm(this),e))}}function q$(n){return typeof n=="function"?z$(n):(n instanceof IDBTransaction&&G$(n),B$(n,j$())?new Proxy(n,GE):n)}function si(n){if(n instanceof IDBRequest)return H$(n);if($E.has(n))return $E.get(n);let e=q$(n);return e!==n&&($E.set(n,e),zE.set(e,n)),e}var bm=n=>zE.get(n);function Em(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=si(o);return r&&o.addEventListener("upgradeneeded",c=>{r(si(o.result),c.oldVersion,c.newVersion,si(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var W$=["get","getKey","getAll","getAllKeys","count"],K$=["put","add","delete","clear"],qE=new Map;function YP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qE.get(e))return qE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=K$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||W$.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&c.done]))[0]};return qE.set(e,s),s}KP(n=>re(O({},n),{get:(e,t,r)=>YP(e,t)||n.get(e,t,r),has:(e,t)=>!!YP(e,t)||n.has(e,t)}));var KE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Y$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Y$(n){let e=n.getComponent();return e?.type==="VERSION"}var YE="@firebase/app",QP="0.13.2";var Li=new ii("@firebase/app"),Q$="@firebase/app-compat",J$="@firebase/analytics-compat",Z$="@firebase/analytics",X$="@firebase/app-check-compat",eH="@firebase/app-check",tH="@firebase/auth",nH="@firebase/auth-compat",rH="@firebase/database",iH="@firebase/data-connect",sH="@firebase/database-compat",oH="@firebase/functions",aH="@firebase/functions-compat",cH="@firebase/installations",lH="@firebase/installations-compat",uH="@firebase/messaging",dH="@firebase/messaging-compat",hH="@firebase/performance",fH="@firebase/performance-compat",pH="@firebase/remote-config",mH="@firebase/remote-config-compat",gH="@firebase/storage",_H="@firebase/storage-compat",vH="@firebase/firestore",yH="@firebase/ai",bH="@firebase/firestore-compat",EH="firebase",wH="11.10.0";var QE="[DEFAULT]",IH={[YE]:"fire-core",[Q$]:"fire-core-compat",[Z$]:"fire-analytics",[J$]:"fire-analytics-compat",[eH]:"fire-app-check",[X$]:"fire-app-check-compat",[tH]:"fire-auth",[nH]:"fire-auth-compat",[rH]:"fire-rtdb",[iH]:"fire-data-connect",[sH]:"fire-rtdb-compat",[oH]:"fire-fn",[aH]:"fire-fn-compat",[cH]:"fire-iid",[lH]:"fire-iid-compat",[uH]:"fire-fcm",[dH]:"fire-fcm-compat",[hH]:"fire-perf",[fH]:"fire-perf-compat",[pH]:"fire-rc",[mH]:"fire-rc-compat",[gH]:"fire-gcs",[_H]:"fire-gcs-compat",[vH]:"fire-fst",[bH]:"fire-fst-compat",[yH]:"fire-vertex","fire-js":"fire-js",[EH]:"fire-js-all"};var Wu=new Map,SH=new Map,JE=new Map;function JP(n,e){try{n.container.addComponent(e)}catch(t){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pr(n){let e=n.name;if(JE.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;JE.set(e,n);for(let t of Wu.values())JP(t,n);for(let t of SH.values())JP(t,n);return!0}function gc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gn(n){return n==null?!1:n.settings!==void 0}var CH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fs=new kr("app","Firebase",CH);var ZE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fs.create("app-deleted",{appName:this._name})}};var Ls=wH;function tw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:QE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Fs.create("bad-app-name",{appName:String(i)});if(t||(t=UE()),!t)throw Fs.create("no-options");let s=Wu.get(i);if(s){if(ri(t,s.options)&&ri(r,s.config))return s;throw Fs.create("duplicate-app",{appName:i})}let o=new ym(i);for(let c of JE.values())o.addComponent(c);let a=new ZE(t,r,o);return Wu.set(i,a),a}function Ho(n=QE){let e=Wu.get(n);if(!e&&n===QE&&UE())return tw();if(!e)throw Fs.create("no-app",{appName:n});return e}function wm(){return Array.from(Wu.values())}function wt(n,e,t){var r;let i=(r=IH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(a.join(" "));return}Pr(new bn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var TH="firebase-heartbeat-database",DH=1,Ku="firebase-heartbeat-store",WE=null;function tN(){return WE||(WE=Em(TH,DH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fs.create("idb-open",{originalErrorMessage:n.message})})),WE}async function xH(n){try{let t=(await tN()).transaction(Ku),r=await t.objectStore(Ku).get(nN(n));return await t.done,r}catch(e){if(e instanceof Hn)Li.warn(e.message);else{let t=Fs.create("idb-get",{originalErrorMessage:e?.message});Li.warn(t.message)}}}async function ZP(n,e){try{let r=(await tN()).transaction(Ku,"readwrite");await r.objectStore(Ku).put(e,nN(n)),await r.done}catch(t){if(t instanceof Hn)Li.warn(t.message);else{let r=Fs.create("idb-set",{originalErrorMessage:t?.message});Li.warn(r.message)}}}function nN(n){return`${n.name}!${n.options.appId}`}var AH=1024,RH=30,XE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ew(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=XP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>RH){let o=PH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Li.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=XP(),{heartbeatsToSend:r,unsentEntries:i}=kH(this._heartbeatsCache.heartbeats),s=zu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Li.warn(t),""}}};function XP(){return new Date().toISOString().substring(0,10)}function kH(n,e=AH){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),eN(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),eN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ew=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qu()?jP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await xH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return ZP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return ZP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function eN(n){return zu(JSON.stringify({version:2,heartbeats:n})).length}function PH(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function NH(n){Pr(new bn("platform-logger",e=>new KE(e),"PRIVATE")),Pr(new bn("heartbeat",e=>new XE(e),"PRIVATE")),wt(YE,QP,n),wt(YE,QP,"esm2017"),wt("fire-js","")}NH("");var MH="firebase",OH="11.10.0";wt(MH,OH,"app");function rN(n){n===void 0&&(n=F(Ze));let e=n.get(Za);return t=>new _e(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var Vs=new gs("ANGULARFIRE2_VERSION");function Yu(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var vc=(n,e)=>{let t=e?[e]:wm(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},_c=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(_c||{}),iN=Lb()&&typeof Zone<"u"?_c.WARN:_c.SILENT;var Im=class{zone;delegate;constructor(e,t=K_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Us=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=F(Ve);this.outsideAngular=t.runOutsideAngular(()=>new Im(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Im(typeof Zone>"u"?void 0:Zone.current,ds))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sN=!1;function FH(n,e){!sN&&(iN>_c.SILENT||Lb())&&(sN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),iN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function LH(n){let e=F(Ve,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Go(n){let e=F(Ve,{optional:!0});return e?e.run(()=>n()):n()}var VH=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),kt(t,()=>Go(()=>n.apply(void 0,r)))),pt=(n,e,t)=>(t||=e?_c.WARN:_c.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=F(Us),o=F(Za),a=F(bt)}catch{return FH(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Go(()=>o.add())),i[u]=VH(i[u],r,a));let c=LH(()=>n.apply(this,i));return e?c instanceof _e?c.pipe(fs(s.outsideAngular),hs(s.insideAngular),rN(a)):c instanceof Promise?Go(()=>{let u=o.add();return new Promise((d,p)=>{c.then(v=>kt(a,()=>Go(()=>d(v))),v=>kt(a,()=>Go(()=>p(v)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Go(()=>c):c instanceof _e?c.pipe(fs(s.outsideAngular),hs(s.insideAngular)):Go(()=>c)});var Vi=class{constructor(e){return e}},zo=class{constructor(){return wm()}};function UH(n){return n&&n.length===1?n[0]:new Vi(Ho())}var nw=new Z("angularfire2._apps"),BH={provide:Vi,useFactory:UH,deps:[[new Vn,nw]]},jH={provide:zo,deps:[[new Vn,nw]]};function $H(n){return(e,t)=>{let r=t.get(xi);wt("angularfire",Vs.full,"core"),wt("angularfire",Vs.full,"app"),wt("angular",gv.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Vi(i)}}function oN(n,...e){return br([BH,jH,{provide:nw,useFactory:$H(n),multi:!0,deps:[Ve,Ze,Us,...e]}])}var aN=pt(tw,!0);var HH=new Map,GH={activated:!1,tokenObservers:[]},zH={initialized:!1,enabled:!1};function Nr(n){return HH.get(n)||Object.assign({},GH)}function dN(){return zH}var qH="https://content-firebaseappcheck.googleapis.com/v1";var WH="exchangeDebugToken",cN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Y0e=1440*60*1e3;var sw=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new jo,this.pending.promise.catch(t=>{}),await KH(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new jo,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function KH(n){return new Promise(e=>{setTimeout(e,n)})}var YH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Bs=new kr("appCheck","AppCheck",YH);function hN(n){if(!Nr(n).activated)throw Bs.create("use-before-activation",{appName:n.name})}async function fN({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(p){throw Bs.create("fetch-network-error",{originalErrorMessage:p?.message})}if(o.status!==200)throw Bs.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(p){throw Bs.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let u=Number(c[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+u,issuedAtTimeMillis:d}}function pN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${qH}/projects/${t}/apps/${r}:${WH}?key=${i}`,body:{debug_token:e}}}var QH="firebase-app-check-database",JH=1,ow="firebase-app-check-store";var Sm=null;function ZH(){return Sm||(Sm=new Promise((n,e)=>{try{let t=indexedDB.open(QH,JH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Bs.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ow,{keyPath:"compositeKey"})}}}catch(t){e(Bs.create("storage-open",{originalErrorMessage:t?.message}))}}),Sm)}function XH(n,e){return e8(t8(n),e)}async function e8(n,e){let r=(await ZH()).transaction(ow,"readwrite"),s=r.objectStore(ow).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(Bs.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function t8(n){return`${n.options.appId}-${n.name}`}var Qu=new ii("@firebase/app-check");function rw(n,e){return qu()?XH(n,e).catch(t=>{Qu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function mN(){return dN().enabled}async function gN(){let n=dN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var n8={error:"UNKNOWN_ERROR"};function r8(n){return pm.encodeString(JSON.stringify(n),!1)}async function aw(n,e=!1,t=!1){let r=n.app;hN(r);let i=Nr(r),s=i.token,o;if(s&&!Ju(s)&&(i.token=void 0,s=void 0),!s){let u=await i.cachedTokenPromise;u&&(Ju(u)?s=u:await rw(r,void 0))}if(!e&&s&&Ju(s))return{token:s.token};let a=!1;if(mN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=fN(pN(r,await gN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=await i.exchangeTokenPromise;return await rw(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Qu.warn(u.message):t&&Qu.error(u),iw(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await Nr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Qu.warn(u.message):t&&Qu.error(u),o=u}let c;return s?o?Ju(s)?c={token:s.token,internalError:o}:c=iw(o):(c={token:s.token},i.token=s,await rw(r,s)):c=iw(o),a&&a8(r,c),c}async function i8(n){let e=n.app;hN(e);let{provider:t}=Nr(e);if(mN()){let r=await gN(),{token:i}=await fN(pN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function s8(n,e,t,r){let{app:i}=n,s=Nr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Ju(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),lN(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>lN(n))}function _N(n,e){let t=Nr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function lN(n){let{app:e}=n,t=Nr(e),r=t.tokenRefresher;r||(r=o8(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function o8(n){let{app:e}=n;return new sw(async()=>{let t=Nr(e),r;if(t.token?r=await aw(n,!0):r=await aw(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Nr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cN.RETRIAL_MIN_WAIT,cN.RETRIAL_MAX_WAIT)}function a8(n,e){let t=Nr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ju(n){return n.expireTimeMillis-Date.now()>0}function iw(n){return{token:r8(n8),error:n}}var cw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Nr(this.app);for(let t of e)_N(this.app,t.next);return Promise.resolve()}};function c8(n,e){return new cw(n,e)}function l8(n){return{getToken:e=>aw(n,e),getLimitedUseToken:()=>i8(n),addTokenListener:e=>s8(n,"INTERNAL",e),removeTokenListener:e=>_N(n.app,e)}}var u8="@firebase/app-check",d8="0.10.1";var h8="app-check",uN="app-check-internal";function f8(){Pr(new bn(h8,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return c8(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uN).initialize()})),Pr(new bn(uN,n=>{let e=n.getProvider("app-check").getImmediate();return l8(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),wt(u8,d8)}f8();var p8="app-check";var yc=class{constructor(){return vc(p8)}};var m8=["localhost","0.0.0.0","127.0.0.1"],a_e=typeof window<"u"&&m8.includes(window.location.hostname);var vN=()=>{};var yN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},g8=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=s>>2,p=(s&3)<<4|a>>4,v=(a&15)<<2|u>>6,b=u&63;c||(b=64,o||(v=64)),r.push(t[d],t[p],t[v],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):g8(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new uw;let v=s<<2|a>>4;if(r.push(v),u!==64){let b=a<<4&240|u>>2;if(r.push(b),p!==64){let S=u<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},uw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_8=function(n){let e=yN(n);return bN.encodeByteArray(e,!0)},hw=function(n){return _8(n).replace(/\./g,"")},Cm=function(n){try{return bN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function v8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var y8=()=>v8().__FIREBASE_DEFAULTS__,b8=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},E8=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Cm(n[1]);return e&&JSON.parse(e)},w8=()=>{try{return vN()||y8()||b8()||E8()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var EN=n=>w8()?.[`_${n}`];function fw(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Mr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mr())}function IN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function CN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TN(){try{return typeof indexedDB=="object"}catch{return!1}}function DN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var I8="FirebaseError",oi=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=I8,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ui.prototype.create)}},Ui=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?S8(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new oi(i,a,r)}};function S8(n,e){return n.replace(C8,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var C8=/\{\$([^}]+)}/g;function pw(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xN(n,e){let t=new dw(n,e);return t.subscribe.bind(t)}var dw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");T8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=lw),i.error===void 0&&(i.error=lw),i.complete===void 0&&(i.complete=lw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function T8(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lw(){}var h_e=14400*1e3;function bc(n){return n&&n._delegate?n._delegate:n}var Bi=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var D8=[],it=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(it||{}),x8={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},A8=it.INFO,R8={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},k8=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=R8[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ec=class{constructor(e){this.name=e,this._logLevel=A8,this._logHandler=k8,this._userLogHandler=null,D8.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}};var gw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(N8(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function N8(n){return n.getComponent()?.type==="VERSION"}var _w="@firebase/app",AN="0.14.6";var ji=new Ec("@firebase/app"),M8="@firebase/app-compat",O8="@firebase/analytics-compat",F8="@firebase/analytics",L8="@firebase/app-check-compat",V8="@firebase/app-check",U8="@firebase/auth",B8="@firebase/auth-compat",j8="@firebase/database",$8="@firebase/data-connect",H8="@firebase/database-compat",G8="@firebase/functions",z8="@firebase/functions-compat",q8="@firebase/installations",W8="@firebase/installations-compat",K8="@firebase/messaging",Y8="@firebase/messaging-compat",Q8="@firebase/performance",J8="@firebase/performance-compat",Z8="@firebase/remote-config",X8="@firebase/remote-config-compat",eG="@firebase/storage",tG="@firebase/storage-compat",nG="@firebase/firestore",rG="@firebase/ai",iG="@firebase/firestore-compat",sG="firebase",oG="12.6.0";var aG={[_w]:"fire-core",[M8]:"fire-core-compat",[F8]:"fire-analytics",[O8]:"fire-analytics-compat",[V8]:"fire-app-check",[L8]:"fire-app-check-compat",[U8]:"fire-auth",[B8]:"fire-auth-compat",[j8]:"fire-rtdb",[$8]:"fire-data-connect",[H8]:"fire-rtdb-compat",[G8]:"fire-fn",[z8]:"fire-fn-compat",[q8]:"fire-iid",[W8]:"fire-iid-compat",[K8]:"fire-fcm",[Y8]:"fire-fcm-compat",[Q8]:"fire-perf",[J8]:"fire-perf-compat",[Z8]:"fire-rc",[X8]:"fire-rc-compat",[eG]:"fire-gcs",[tG]:"fire-gcs-compat",[nG]:"fire-fst",[iG]:"fire-fst-compat",[rG]:"fire-vertex","fire-js":"fire-js",[sG]:"fire-js-all"};var cG=new Map,lG=new Map,RN=new Map;function kN(n,e){try{n.container.addComponent(e)}catch(t){ji.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ic(n){let e=n.name;if(RN.has(e))return ji.debug(`There were multiple attempts to register component ${e}.`),!1;RN.set(e,n);for(let t of cG.values())kN(t,n);for(let t of lG.values())kN(t,n);return!0}function qo(n){return n==null?!1:n.settings!==void 0}var uG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bw=new Ui("app","Firebase",uG);var Tm=oG;function wc(n,e,t){let r=aG[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ji.warn(o.join(" "));return}Ic(new Bi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var dG="firebase-heartbeat-database",hG=1,Zu="firebase-heartbeat-store",mw=null;function ON(){return mw||(mw=Em(dG,hG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Zu)}catch(t){console.warn(t)}}}}).catch(n=>{throw bw.create("idb-open",{originalErrorMessage:n.message})})),mw}async function fG(n){try{let t=(await ON()).transaction(Zu),r=await t.objectStore(Zu).get(FN(n));return await t.done,r}catch(e){if(e instanceof oi)ji.warn(e.message);else{let t=bw.create("idb-get",{originalErrorMessage:e?.message});ji.warn(t.message)}}}async function PN(n,e){try{let r=(await ON()).transaction(Zu,"readwrite");await r.objectStore(Zu).put(e,FN(n)),await r.done}catch(t){if(t instanceof oi)ji.warn(t.message);else{let r=bw.create("idb-set",{originalErrorMessage:t?.message});ji.warn(r.message)}}}function FN(n){return`${n.name}!${n.options.appId}`}var pG=1024,mG=30,vw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new yw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=NN();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>mG){let i=_G(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ji.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=NN(),{heartbeatsToSend:t,unsentEntries:r}=gG(this._heartbeatsCache.heartbeats),i=hw(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ji.warn(e),""}}};function NN(){return new Date().toISOString().substring(0,10)}function gG(n,e=pG){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),MN(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),MN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var yw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TN()?DN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await fG(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return PN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return PN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function MN(n){return hw(JSON.stringify({version:2,heartbeats:n})).length}function _G(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function vG(n){Ic(new Bi("platform-logger",e=>new gw(e),"PRIVATE")),Ic(new Bi("heartbeat",e=>new vw(e),"PRIVATE")),wc(_w,AN,n),wc(_w,AN,"esm2020"),wc("fire-js","")}vG("");function GN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var zN=GN,qN=new Ui("auth","Firebase",GN());var Rm=new Ec("@firebase/auth");function yG(n,...e){Rm.logLevel<=it.WARN&&Rm.warn(`Auth (${Tm}): ${n}`,...e)}function xm(n,...e){Rm.logLevel<=it.ERROR&&Rm.error(`Auth (${Tm}): ${n}`,...e)}function LN(n,...e){throw Pw(n,...e)}function kw(n,...e){return Pw(n,...e)}function WN(n,e,t){let r=re(O({},zN()),{[e]:t});return new Ui("auth","Firebase",r).create(e,{appName:n.name})}function Am(n){return WN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qN.create(n,...e)}function We(n,e,...t){if(!n)throw Pw(e,...t)}function Xu(n){let e="INTERNAL ASSERTION FAILED: "+n;throw xm(e),new Error(e)}function km(n,e){n||Xu(e)}function bG(){return VN()==="http:"||VN()==="https:"}function VN(){return typeof self<"u"&&self.location?.protocol||null}function EG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bG()||SN()||"connection"in navigator)?navigator.onLine:!0}function wG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Yo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,km(t>e,"Short delay should be less than long delay!"),this.isMobile=wN()||CN()}get(){return EG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function IG(n,e){km(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Pm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var SG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var CG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TG=new Yo(3e4,6e4);function KN(n,e){return n.tenantId&&!e.tenantId?re(O({},e),{tenantId:n.tenantId}):e}async function Lm(n,e,t,r,i={}){return YN(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=pw(O({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=O({method:e,headers:c},s);return IN()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&fw(n.emulatorConfig.host)&&(u.credentials="include"),Pm.fetch()(await QN(n,n.config.apiHost,t,a),u)})}async function YN(n,e,t){n._canInitEmulator=!1;let r=O(O({},SG),e);try{let i=new Iw(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Dm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dm(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Dm(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Dm(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw WN(n,d,u);LN(n,d)}}catch(i){if(i instanceof oi)throw i;LN(n,"network-request-failed",{message:String(i)})}}async function QN(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?IG(n.config,i):`${n.config.apiScheme}://${i}`;return CG.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var Iw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(kw(this.auth,"network-request-failed")),TG.get())})}};function Dm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=kw(n,e,r);return i.customData._tokenResponse=t,i}async function DG(n,e){return Lm(n,"POST","/v1/accounts:delete",e)}async function Nm(n,e){return Lm(n,"POST","/v1/accounts:lookup",e)}function ed(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JN(n,e=!1){let t=bc(n),r=await t.getIdToken(e),i=ZN(r);We(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ed(Ew(i.auth_time)),issuedAtTime:ed(Ew(i.iat)),expirationTime:ed(Ew(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Ew(n){return Number(n)*1e3}function ZN(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return xm("JWT malformed, contained fewer than 3 sections"),null;try{let i=Cm(t);return i?JSON.parse(i):(xm("Failed to decode base64 JWT payload"),null)}catch(i){return xm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function UN(n){let e=ZN(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Sw(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof oi&&xG(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function xG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Cw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var nd=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ed(this.lastLoginAt),this.creationTime=ed(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Mm(n){let e=n.auth,t=await n.getIdToken(),r=await Sw(n,Nm(e,{idToken:t}));We(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?eM(i.providerUserInfo):[],o=AG(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new nd(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function XN(n){let e=bc(n);await Mm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eM(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Fl(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function RG(n,e){let t=await YN(n,{},async()=>{let r=pw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await QN(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&fw(n.emulatorConfig.host)&&(c.credentials="include"),Pm.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kG(n,e){return Lm(n,"POST","/v2/accounts:revokeToken",KN(n,e))}var td=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");let t=UN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await RG(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(We(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(We(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(We(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Xu("not implemented")}};function js(n,e){We(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Wo=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=Fl(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Sw(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return JN(this,e)}reload(){return XN(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>O({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(re(O({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Mm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qo(this.auth.app))return Promise.reject(Am(this.auth));let e=await this.getIdToken();return await Sw(this,DG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return re(O({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>O({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:p,emailVerified:v,isAnonymous:b,providerData:S,stsTokenManager:P}=t;We(p&&P,e,"internal-error");let M=td.fromJSON(this.name,P);We(typeof p=="string",e,"internal-error"),js(r,e.name),js(i,e.name),We(typeof v=="boolean",e,"internal-error"),We(typeof b=="boolean",e,"internal-error"),js(s,e.name),js(o,e.name),js(a,e.name),js(c,e.name),js(u,e.name),js(d,e.name);let H=new n({uid:p,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:M,createdAt:u,lastLoginAt:d});return S&&Array.isArray(S)&&(H.providerData=S.map(J=>O({},J))),c&&(H._redirectEventId=c),H}static async _fromIdTokenResponse(e,t,r=!1){let i=new td;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mm(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];We(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?eM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new td;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new nd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c}};var BN=new Map;function Ko(n){km(n instanceof Function,"Expected a class definition");let e=BN.get(n);return e?(km(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,BN.set(n,e),e)}var PG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Tw=PG;function ww(n,e,t){return`firebase:${n}:${e}:${t}`}var Om=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ww(this.userKey,i.apiKey,s),this.fullPersistenceKey=ww("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Nm(this.auth,{idToken:e}).catch(()=>{});return t?Wo._fromGetAccountInfoResponse(this.auth,t,e):null}return Wo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Ko(Tw),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),s=i[0]||Ko(Tw),o=ww(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(o);if(d){let p;if(typeof d=="string"){let v=await Nm(e,{idToken:d}).catch(()=>{});if(!v)break;p=await Wo._fromGetAccountInfoResponse(e,v,d)}else p=Wo._fromJSON(e,d);u!==s&&(a=p),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new n(s,e,r))}};function jN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FG(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NG(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VG(e))return"Blackberry";if(UG(e))return"Webos";if(MG(e))return"Safari";if((e.includes("chrome/")||OG(e))&&!e.includes("edge/"))return"Chrome";if(LG(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function NG(n=Mr()){return/firefox\//i.test(n)}function MG(n=Mr()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OG(n=Mr()){return/crios\//i.test(n)}function FG(n=Mr()){return/iemobile/i.test(n)}function LG(n=Mr()){return/android/i.test(n)}function VG(n=Mr()){return/blackberry/i.test(n)}function UG(n=Mr()){return/webos/i.test(n)}function tM(n,e=[]){let t;switch(n){case"Browser":t=jN(Mr());break;case"Worker":t=`${jN(Mr())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Tm}/${r}`}var Dw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function BG(n,e={}){return Lm(n,"GET","/v2/passwordPolicy",KN(n,e))}var jG=6,xw=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??jG,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Aw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fm(this),this.idTokenSubscription=new Fm(this),this.beforeStateQueue=new Dw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ko(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Om.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Nm(this,{idToken:e}),r=await Wo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qo(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qo(this.app))return Promise.reject(Am(this));let t=e?bc(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qo(this.app)?Promise.reject(Am(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qo(this.app)?Promise.reject(Am(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ko(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await BG(this),t=new xw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ui("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kG(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Ko(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await Om.create(this,[Ko(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(qo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yG(`Error while retrieving App Check token: ${e.error}`),e?.token}};function $G(n){return bc(n)}var Fm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=xN(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var HG={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GG(n){HG=n}function zG(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function qG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ko);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Nw(n,e,t,r){return bc(n).onIdTokenChanged(e,t,r)}var z_e=zG("rcb"),q_e=new Yo(3e4,6e4);var W_e=new Yo(2e3,1e4);var K_e=600*1e3;var Y_e=new Yo(3e4,6e4);var Q_e=new Yo(5e3,15e3);var J_e=encodeURIComponent("fac");var $N="@firebase/auth",HN="1.11.1";var Rw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function WG(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KG(n){Ic(new Bi("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;We(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tM(n)},u=new Aw(r,i,s,c);return qG(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ic(new Bi("auth-internal",e=>{let t=$G(e.getProvider("auth").getImmediate());return(r=>new Rw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wc($N,HN,WG(n)),wc($N,HN,"esm2020")}var YG=300,Z_e=EN("authIdTokenMaxAge")||YG;function QG(){return document.getElementsByTagName("head")?.[0]??document}GG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=kw("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",QG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KG("Browser");function nM(n){return new _e(function(e){var t=Nw(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function _M(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var vM=_M,yM=new kr("auth","Firebase",_M());var Hm=new ii("@firebase/auth");function XG(n,...e){Hm.logLevel<=Oe.WARN&&Hm.warn(`Auth (${Ls}): ${n}`,...e)}function Um(n,...e){Hm.logLevel<=Oe.ERROR&&Hm.error(`Auth (${Ls}): ${n}`,...e)}function ci(n,...e){throw Jw(n,...e)}function Or(n,...e){return Jw(n,...e)}function Qw(n,e,t){let r=Object.assign(Object.assign({},vM()),{[e]:t});return new kr("auth","Firebase",r).create(e,{appName:n.name})}function Qo(n){return Qw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ez(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ci(n,"argument-error"),Qw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return yM.create(n,...e)}function me(n,e,...t){if(!n)throw Jw(e,...t)}function $i(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Um(e),new Error(e)}function Gi(n,e){n||$i(e)}function Fw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function tz(){return rM()==="http:"||rM()==="https:"}function rM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function nz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tz()||LP()||"connection"in navigator)?navigator.onLine:!0}function rz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Jo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gi(t>e,"Short delay should be less than long delay!"),this.isMobile=OP()||VP()}get(){return nz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Zw(n,e){Gi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Gm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var iz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var sz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oz=new Jo(3e4,6e4);function Xw(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Cc(n,e,t,r,i={}){return bM(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=mc(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=Object.assign({method:e,headers:c},s);return FP()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Os(n.emulatorConfig.host)&&(u.credentials="include"),Gm.fetch()(await EM(n,n.config.apiHost,t,a),u)})}async function bM(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},iz),e);try{let i=new Lw(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Vm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vm(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Vm(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Vm(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Qw(n,d,u);ci(n,d)}}catch(i){if(i instanceof Hn)throw i;ci(n,"network-request-failed",{message:String(i)})}}async function az(n,e,t,r,i={}){let s=await Cc(n,e,t,r,i);return"mfaPendingCredential"in s&&ci(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function EM(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Zw(n.config,i):`${n.config.apiScheme}://${i}`;return sz.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var Lw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Or(this.auth,"network-request-failed")),oz.get())})}};function Vm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Or(n,e,r);return i.customData._tokenResponse=t,i}async function cz(n,e){return Cc(n,"POST","/v1/accounts:delete",e)}async function zm(n,e){return Cc(n,"POST","/v1/accounts:lookup",e)}function rd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eI(n,e=!1){let t=Et(n),r=await t.getIdToken(e),i=tI(r);me(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:rd(Mw(i.auth_time)),issuedAtTime:rd(Mw(i.iat)),expirationTime:rd(Mw(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Mw(n){return Number(n)*1e3}function tI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Um("JWT malformed, contained fewer than 3 sections"),null;try{let i=mm(t);return i?JSON.parse(i):(Um("Failed to decode base64 JWT payload"),null)}catch(i){return Um("Caught error parsing JWT payload as JSON",i?.toString()),null}}function iM(n){let e=tI(n);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function sd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Hn&&lz(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function lz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Vw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var od=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rd(this.lastLoginAt),this.creationTime=rd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function qm(n){var e;let t=n.auth,r=await n.getIdToken(),i=await sd(n,zm(t,{idToken:r}));me(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?wM(s.providerUserInfo):[],a=uz(n.providerData,o),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,d=c?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new od(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function nI(n){let e=Et(n);await qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wM(n){return n.map(e=>{var{providerId:t}=e,r=ef(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function dz(n,e){let t=await bM(n,{},async()=>{let r=mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await EM(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Os(n.emulatorConfig.host)&&(c.credentials="include"),Gm.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hz(n,e){return Cc(n,"POST","/v2/accounts:revokeToken",Xw(n,e))}var id=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){me(e.length!==0,"internal-error");let t=iM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await dz(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return $i("not implemented")}};function $s(n,e){me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Hs=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ef(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new od(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await sd(this,this.stsTokenManager.getToken(this.auth,e));return me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eI(this,e)}reload(){return nI(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await qm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(Qo(this.auth));let e=await this.getIdToken();return await sd(this,cz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,u,d;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,b=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,H=(u=t.createdAt)!==null&&u!==void 0?u:void 0,J=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:ie,emailVerified:fe,isAnonymous:Xe,providerData:xe,stsTokenManager:x}=t;me(ie&&x,e,"internal-error");let I=id.fromJSON(this.name,x);me(typeof ie=="string",e,"internal-error"),$s(p,e.name),$s(v,e.name),me(typeof fe=="boolean",e,"internal-error"),me(typeof Xe=="boolean",e,"internal-error"),$s(b,e.name),$s(S,e.name),$s(P,e.name),$s(M,e.name),$s(H,e.name),$s(J,e.name);let C=new n({uid:ie,auth:e,email:v,emailVerified:fe,displayName:p,isAnonymous:Xe,photoURL:S,phoneNumber:b,tenantId:P,stsTokenManager:I,createdAt:H,lastLoginAt:J});return xe&&Array.isArray(xe)&&(C.providerData=xe.map(A=>Object.assign({},A))),M&&(C._redirectEventId=M),C}static async _fromIdTokenResponse(e,t,r=!1){let i=new id;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qm(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];me(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?wM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new id;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new od(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c}};var sM=new Map;function Hi(n){Gi(n instanceof Function,"Expected a class definition");let e=sM.get(n);return e?(Gi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sM.set(n,e),e)}var fz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Uw=fz;function Bm(n,e,t){return`firebase:${n}:${e}:${t}`}var Wm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Bm(this.userKey,i.apiKey,s),this.fullPersistenceKey=Bm("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await zm(this.auth,{idToken:e}).catch(()=>{});return t?Hs._fromGetAccountInfoResponse(this.auth,t,e):null}return Hs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Hi(Uw),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),s=i[0]||Hi(Uw),o=Bm(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=await u._get(o);if(d){let p;if(typeof d=="string"){let v=await zm(e,{idToken:d}).catch(()=>{});if(!v)break;p=await Hs._fromGetAccountInfoResponse(e,v,d)}else p=Hs._fromJSON(e,d);u!==s&&(a=p),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new n(s,e,r))}};function oM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xM(e))return"Blackberry";if(AM(e))return"Webos";if(SM(e))return"Safari";if((e.includes("chrome/")||CM(e))&&!e.includes("edge/"))return"Chrome";if(DM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function IM(n=Ht()){return/firefox\//i.test(n)}function SM(n=Ht()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CM(n=Ht()){return/crios\//i.test(n)}function TM(n=Ht()){return/iemobile/i.test(n)}function DM(n=Ht()){return/android/i.test(n)}function xM(n=Ht()){return/blackberry/i.test(n)}function AM(n=Ht()){return/webos/i.test(n)}function rI(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function pz(n=Ht()){var e;return rI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mz(){return UP()&&document.documentMode===10}function RM(n=Ht()){return rI(n)||DM(n)||AM(n)||xM(n)||/windows phone/i.test(n)||TM(n)}function kM(n,e=[]){let t;switch(n){case"Browser":t=oM(Ht());break;case"Worker":t=`${oM(Ht())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ls}/${r}`}var Bw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function gz(n,e={}){return Cc(n,"GET","/v2/passwordPolicy",Xw(n,e))}var _z=6,jw=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:_z,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var $w=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Km(this),this.idTokenSubscription=new Km(this),this.beforeStateQueue=new Bw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hi(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Wm.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await zm(this,{idToken:e}),r=await Hs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(Qo(this));let t=e?Et(e):null;return t&&me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(Qo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(Qo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await gz(this),t=new jw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await hz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Hi(e)||this._popupRedirectResolver;me(t,this,"argument-error"),this.redirectPersistenceManager=await Wm.create(this,[Hi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&XG(`Error while retrieving App Check token: ${t.error}`),t?.token}};function ng(n){return Et(n)}var Km=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=HP(t=>this.observer=t)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var iI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vz(n){iI=n}function yz(n){return iI.loadJS(n)}function bz(){return iI.gapiScript}function PM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function sI(n,e){let t=gc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ri(s,e??{}))return i;ci(i,"already-initialized")}return t.initialize({options:e})}function Ez(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Hi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function oI(n,e,t){let r=ng(n);me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=NM(e),{host:o,port:a}=wz(e),c=a===null?"":`:${a}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),me(ri(u,r.config.emulator)&&ri(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Os(o)?(_m(`${s}//${o}${c}`),vm("Auth",!0)):i||Iz()}function NM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wz(n){let e=NM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:aM(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:aM(o)}}}function aM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Iz(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ad=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $i("not implemented")}_getIdTokenResponse(e){return $i("not implemented")}_linkToIdToken(e,t){return $i("not implemented")}_getReauthenticationResolver(e){return $i("not implemented")}};async function Sc(n,e){return az(n,"POST","/v1/accounts:signInWithIdp",Xw(n,e))}var Sz="http://localhost",Ym=class n extends ad{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=ef(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Sc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Sc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Sc(e,t)}buildRequest(){let e={requestUri:Sz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mc(t)}return e}};var cd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Qm=class extends cd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var aI=(()=>{class n extends Qm{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ym._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var ld=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Hs._fromIdTokenResponse(e,r,i),o=cM(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=cM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function cM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Hw=class n extends Hn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function MM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hw._fromErrorAndOperation(n,s,e,r):s})}async function Cz(n,e,t=!1){let r=await sd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ld._forOperation(n,"link",r)}async function Tz(n,e,t=!1){let{auth:r}=n;if(Gn(r.app))return Promise.reject(Qo(r));let i="reauthenticate";try{let s=await sd(n,MM(r,i,e,n),t);me(s.idToken,r,"internal-error");let o=tI(s.idToken);me(o,r,"internal-error");let{sub:a}=o;return me(n.uid===a,r,"user-mismatch"),ld._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ci(r,"user-mismatch"),s}}async function Dz(n,e,t=!1){if(Gn(n.app))return Promise.reject(Qo(n));let r="signIn",i=await MM(n,r,e),s=await ld._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function cI(n,e,t,r){return Et(n).onIdTokenChanged(e,t,r)}function lI(n,e,t){return Et(n).beforeAuthStateChanged(e,t)}function uI(n){return Et(n).signOut()}var Jm="__sak";var Zm=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jm,"1"),this.storage.removeItem(Jm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var xz=1e3,Az=10,Rz=(()=>{class n extends Zm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);mz()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Az):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},xz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),OM=Rz;var kz=(()=>{class n extends Zm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),dI=kz;function Pz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var Nz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async d=>d(r.origin,o)),u=await Pz(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function hI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Gw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=hI("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let v=p;if(v.data.eventId===u)switch(v.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(v.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function ai(){return window}function Mz(n){ai().location.href=n}function FM(){return typeof ai().WorkerGlobalScope<"u"&&typeof ai().importScripts=="function"}async function Oz(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fz(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Lz(){return FM()?self:null}var LM="firebaseLocalStorageDb",Vz=1,Xm="firebaseLocalStorage",VM="fbase_key",Zo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function rg(n,e){return n.transaction([Xm],e?"readwrite":"readonly").objectStore(Xm)}function Uz(){let n=indexedDB.deleteDatabase(LM);return new Zo(n).toPromise()}function zw(){let n=indexedDB.open(LM,Vz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Xm,{keyPath:VM})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Xm)?e(r):(r.close(),await Uz(),e(await zw()))})})}async function lM(n,e,t){let r=rg(n,!0).put({[VM]:e,value:t});return new Zo(r).toPromise()}async function Bz(n,e){let t=rg(n,!1).get(e),r=await new Zo(t).toPromise();return r===void 0?null:r.value}function uM(n,e){let t=rg(n,!0).delete(e);return new Zo(t).toPromise()}var jz=800,$z=3,Hz=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zw(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>$z)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nz._getInstance(Lz()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Oz(),!this.activeServiceWorker)return;this.sender=new Gw(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Fz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await zw();return await lM(t,Jm,"1"),await uM(t,Jm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>lM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>Bz(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>uM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=rg(s,!1).getAll();return new Zo(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),UM=Hz;var Hye=PM("rcb"),Gye=new Jo(3e4,6e4);function BM(n,e){return e?Hi(e):(me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ud=class extends ad{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Gz(n){return Dz(n.auth,new ud(n),n.bypassAuthState)}function zz(n){let{auth:e,user:t}=n;return me(t,e,"internal-error"),Tz(t,new ud(n),n.bypassAuthState)}async function qz(n){let{auth:e,user:t}=n;return me(t,e,"internal-error"),Cz(t,new ud(n),n.bypassAuthState)}var eg=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gz;case"linkViaPopup":case"linkViaRedirect":return qz;case"reauthViaPopup":case"reauthViaRedirect":return zz;default:ci(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Wz=new Jo(2e3,1e4);async function fI(n,e,t){if(Gn(n.app))return Promise.reject(Or(n,"operation-not-supported-in-this-environment"));let r=ng(n);ez(n,e,cd);let i=BM(r,t);return new Kz(r,"signInViaPopup",e,i).executeNotNull()}var Kz=(()=>{class n extends eg{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return me(t,this.auth,"internal-error"),t}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");let t=hI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Wz.get())};t()}}n.currentPopupAction=null;return n})(),Yz="pendingRedirect",jm=new Map,qw=class extends eg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=jm.get(this.auth._key());if(!e){try{let r=await Qz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jm.set(this.auth._key(),e)}return this.bypassAuthState||jm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Qz(n,e){let t=Xz(e),r=Zz(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function Jz(n,e){jm.set(n._key(),e)}function Zz(n){return Hi(n._redirectPersistence)}function Xz(n){return Bm(Yz,n.config.apiKey,n.name)}async function e9(n,e,t=!1){if(Gn(n.app))return Promise.reject(Qo(n));let r=ng(n),i=BM(r,e),o=await new qw(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var t9=600*1e3,Ww=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!n9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!jM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Or(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=t9&&this.cachedEventUids.clear(),this.cachedEventUids.has(dM(e))}saveEventToCache(e){this.cachedEventUids.add(dM(e)),this.lastProcessedEventTime=Date.now()}};function dM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function jM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function n9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jM(n);default:return!1}}async function r9(n,e={}){return Cc(n,"GET","/v1/projects",e)}var i9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s9=/^https?/;async function o9(n){if(n.config.emulator)return;let{authorizedDomains:e}=await r9(n);for(let t of e)try{if(a9(t))return}catch{}ci(n,"unauthorized-domain")}function a9(n){let e=Fw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!s9.test(t))return!1;if(i9.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var c9=new Jo(3e4,6e4);function hM(){let n=ai().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function l9(n){return new Promise((e,t)=>{var r,i,s;function o(){hM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hM(),t(Or(n,"network-request-failed"))},timeout:c9.get()})}if(!((i=(r=ai().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ai().gapi)===null||s===void 0)&&s.load)o();else{let a=PM("iframefcb");return ai()[a]=()=>{gapi.load?o():t(Or(n,"network-request-failed"))},yz(`${bz()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw $m=null,e})}var $m=null;function u9(n){return $m=$m||l9(n),$m}var d9=new Jo(5e3,15e3),h9="__/auth/iframe",f9="emulator/auth/iframe",p9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g9(n){let e=n.config;me(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Zw(e,f9):`https://${n.config.authDomain}/${h9}`,r={apiKey:e.apiKey,appName:n.name,v:Ls},i=m9.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${mc(r).slice(1)}`}async function _9(n){let e=await u9(n),t=ai().gapi;return me(t,n,"internal-error"),e.open({where:document.body,url:g9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p9,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Or(n,"network-request-failed"),a=ai().setTimeout(()=>{s(o)},d9.get());function c(){ai().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var v9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y9=500,b9=600,E9="_blank",w9="http://localhost",tg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function I9(n,e,t,r=y9,i=b9){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},v9),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ht().toLowerCase();t&&(a=CM(u)?E9:t),IM(u)&&(e=e||w9,c.scrollbars="yes");let d=Object.entries(c).reduce((v,[b,S])=>`${v}${b}=${S},`,"");if(pz(u)&&a!=="_self")return S9(e||"",a),new tg(null);let p=window.open(e||"",a,d);me(p,n,"popup-blocked");try{p.focus()}catch{}return new tg(p)}function S9(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var C9="__/auth/handler",T9="emulator/auth/handler",D9=encodeURIComponent("fac");async function fM(n,e,t,r,i,s){me(n.config.authDomain,n,"auth-domain-config-required"),me(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ls,eventId:i};if(e instanceof cd){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",$P(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,p]of Object.entries(s||{}))o[d]=p}if(e instanceof Qm){let d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=await n._getAppCheckToken(),u=c?`#${D9}=${encodeURIComponent(c)}`:"";return`${x9(n)}?${mc(a).slice(1)}${u}`}function x9({config:n}){return n.emulator?Zw(n,T9):`https://${n.authDomain}/${C9}`}var Ow="webStorageSupport",Kw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dI,this._completeRedirectFn=e9,this._overrideRedirectResult=Jz}async _openPopup(e,t,r,i){var s;Gi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await fM(e,t,r,Fw(),i);return I9(e,o,hI())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await fM(e,t,r,Fw(),i);return Mz(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Gi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await _9(e),r=new Ww(e);return t.register("authEvent",i=>(me(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ow,{type:Ow},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Ow];o!==void 0&&t(!!o),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=o9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RM()||SM()||rI()}},$M=Kw;var pM="@firebase/auth",mM="1.10.8";var Yw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function A9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R9(n){Pr(new bn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kM(n)},u=new $w(r,i,s,c);return Ez(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pr(new bn("auth-internal",e=>{let t=ng(e.getProvider("auth").getImmediate());return(r=>new Yw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wt(pM,mM,A9(n)),wt(pM,mM,"esm2017")}var k9=300,P9=BE("authIdTokenMaxAge")||k9,gM=null,N9=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>P9)return;let i=t?.token;gM!==i&&(gM=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pI(n=Ho()){let e=gc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=sI(n,{popupRedirectResolver:$M,persistence:[UM,OM,dI]}),r=BE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=N9(s.toString());lI(t,o,()=>o(t.currentUser)),cI(t,a=>o(a))}}let i=VE("auth");return i&&oI(t,`http://${i}`),t}function M9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}vz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Or("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",M9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R9("Browser");var HM="auth",Xo=class{constructor(e){return e}},dd=class{constructor(){return vc(HM)}};var mI=new Z("angularfire2.auth-instances");function Cq(n,e){let t=Yu(HM,n,e);return t&&new Xo(t)}function Tq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Xo(r)}}var Dq={provide:dd,deps:[[new Vn,mI]]},xq={provide:Xo,useFactory:Cq,deps:[[new Vn,mI],Vi]};function GM(n,...e){return wt("angularfire",Vs.full,"auth"),br([xq,Dq,{provide:mI,useFactory:Tq(n),multi:!0,deps:[Ve,Ze,Us,zo,[new Vn,yc],...e]}])}var zM=pt(nM,!0);var qM=pt(pI,!0);var WM=pt(fI,!0,2);var KM=pt(uI,!0,2);var YM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},QM={};var zi,gI;(function(){var n;function e(x,I){function C(){}C.prototype=I.prototype,x.D=I.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(A,R,N){for(var T=Array(arguments.length-2),Yn=2;Yn<arguments.length;Yn++)T[Yn-2]=arguments[Yn];return I.prototype[R].apply(A,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,I,C){C||(C=0);var A=Array(16);if(typeof I=="string")for(var R=0;16>R;++R)A[R]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(R=0;16>R;++R)A[R]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=x.g[0],C=x.g[1],R=x.g[2];var N=x.g[3],T=I+(N^C&(R^N))+A[0]+3614090360&4294967295;I=C+(T<<7&4294967295|T>>>25),T=N+(R^I&(C^R))+A[1]+3905402710&4294967295,N=I+(T<<12&4294967295|T>>>20),T=R+(C^N&(I^C))+A[2]+606105819&4294967295,R=N+(T<<17&4294967295|T>>>15),T=C+(I^R&(N^I))+A[3]+3250441966&4294967295,C=R+(T<<22&4294967295|T>>>10),T=I+(N^C&(R^N))+A[4]+4118548399&4294967295,I=C+(T<<7&4294967295|T>>>25),T=N+(R^I&(C^R))+A[5]+1200080426&4294967295,N=I+(T<<12&4294967295|T>>>20),T=R+(C^N&(I^C))+A[6]+2821735955&4294967295,R=N+(T<<17&4294967295|T>>>15),T=C+(I^R&(N^I))+A[7]+4249261313&4294967295,C=R+(T<<22&4294967295|T>>>10),T=I+(N^C&(R^N))+A[8]+1770035416&4294967295,I=C+(T<<7&4294967295|T>>>25),T=N+(R^I&(C^R))+A[9]+2336552879&4294967295,N=I+(T<<12&4294967295|T>>>20),T=R+(C^N&(I^C))+A[10]+4294925233&4294967295,R=N+(T<<17&4294967295|T>>>15),T=C+(I^R&(N^I))+A[11]+2304563134&4294967295,C=R+(T<<22&4294967295|T>>>10),T=I+(N^C&(R^N))+A[12]+1804603682&4294967295,I=C+(T<<7&4294967295|T>>>25),T=N+(R^I&(C^R))+A[13]+4254626195&4294967295,N=I+(T<<12&4294967295|T>>>20),T=R+(C^N&(I^C))+A[14]+2792965006&4294967295,R=N+(T<<17&4294967295|T>>>15),T=C+(I^R&(N^I))+A[15]+1236535329&4294967295,C=R+(T<<22&4294967295|T>>>10),T=I+(R^N&(C^R))+A[1]+4129170786&4294967295,I=C+(T<<5&4294967295|T>>>27),T=N+(C^R&(I^C))+A[6]+3225465664&4294967295,N=I+(T<<9&4294967295|T>>>23),T=R+(I^C&(N^I))+A[11]+643717713&4294967295,R=N+(T<<14&4294967295|T>>>18),T=C+(N^I&(R^N))+A[0]+3921069994&4294967295,C=R+(T<<20&4294967295|T>>>12),T=I+(R^N&(C^R))+A[5]+3593408605&4294967295,I=C+(T<<5&4294967295|T>>>27),T=N+(C^R&(I^C))+A[10]+38016083&4294967295,N=I+(T<<9&4294967295|T>>>23),T=R+(I^C&(N^I))+A[15]+3634488961&4294967295,R=N+(T<<14&4294967295|T>>>18),T=C+(N^I&(R^N))+A[4]+3889429448&4294967295,C=R+(T<<20&4294967295|T>>>12),T=I+(R^N&(C^R))+A[9]+568446438&4294967295,I=C+(T<<5&4294967295|T>>>27),T=N+(C^R&(I^C))+A[14]+3275163606&4294967295,N=I+(T<<9&4294967295|T>>>23),T=R+(I^C&(N^I))+A[3]+4107603335&4294967295,R=N+(T<<14&4294967295|T>>>18),T=C+(N^I&(R^N))+A[8]+1163531501&4294967295,C=R+(T<<20&4294967295|T>>>12),T=I+(R^N&(C^R))+A[13]+2850285829&4294967295,I=C+(T<<5&4294967295|T>>>27),T=N+(C^R&(I^C))+A[2]+4243563512&4294967295,N=I+(T<<9&4294967295|T>>>23),T=R+(I^C&(N^I))+A[7]+1735328473&4294967295,R=N+(T<<14&4294967295|T>>>18),T=C+(N^I&(R^N))+A[12]+2368359562&4294967295,C=R+(T<<20&4294967295|T>>>12),T=I+(C^R^N)+A[5]+4294588738&4294967295,I=C+(T<<4&4294967295|T>>>28),T=N+(I^C^R)+A[8]+2272392833&4294967295,N=I+(T<<11&4294967295|T>>>21),T=R+(N^I^C)+A[11]+1839030562&4294967295,R=N+(T<<16&4294967295|T>>>16),T=C+(R^N^I)+A[14]+4259657740&4294967295,C=R+(T<<23&4294967295|T>>>9),T=I+(C^R^N)+A[1]+2763975236&4294967295,I=C+(T<<4&4294967295|T>>>28),T=N+(I^C^R)+A[4]+1272893353&4294967295,N=I+(T<<11&4294967295|T>>>21),T=R+(N^I^C)+A[7]+4139469664&4294967295,R=N+(T<<16&4294967295|T>>>16),T=C+(R^N^I)+A[10]+3200236656&4294967295,C=R+(T<<23&4294967295|T>>>9),T=I+(C^R^N)+A[13]+681279174&4294967295,I=C+(T<<4&4294967295|T>>>28),T=N+(I^C^R)+A[0]+3936430074&4294967295,N=I+(T<<11&4294967295|T>>>21),T=R+(N^I^C)+A[3]+3572445317&4294967295,R=N+(T<<16&4294967295|T>>>16),T=C+(R^N^I)+A[6]+76029189&4294967295,C=R+(T<<23&4294967295|T>>>9),T=I+(C^R^N)+A[9]+3654602809&4294967295,I=C+(T<<4&4294967295|T>>>28),T=N+(I^C^R)+A[12]+3873151461&4294967295,N=I+(T<<11&4294967295|T>>>21),T=R+(N^I^C)+A[15]+530742520&4294967295,R=N+(T<<16&4294967295|T>>>16),T=C+(R^N^I)+A[2]+3299628645&4294967295,C=R+(T<<23&4294967295|T>>>9),T=I+(R^(C|~N))+A[0]+4096336452&4294967295,I=C+(T<<6&4294967295|T>>>26),T=N+(C^(I|~R))+A[7]+1126891415&4294967295,N=I+(T<<10&4294967295|T>>>22),T=R+(I^(N|~C))+A[14]+2878612391&4294967295,R=N+(T<<15&4294967295|T>>>17),T=C+(N^(R|~I))+A[5]+4237533241&4294967295,C=R+(T<<21&4294967295|T>>>11),T=I+(R^(C|~N))+A[12]+1700485571&4294967295,I=C+(T<<6&4294967295|T>>>26),T=N+(C^(I|~R))+A[3]+2399980690&4294967295,N=I+(T<<10&4294967295|T>>>22),T=R+(I^(N|~C))+A[10]+4293915773&4294967295,R=N+(T<<15&4294967295|T>>>17),T=C+(N^(R|~I))+A[1]+2240044497&4294967295,C=R+(T<<21&4294967295|T>>>11),T=I+(R^(C|~N))+A[8]+1873313359&4294967295,I=C+(T<<6&4294967295|T>>>26),T=N+(C^(I|~R))+A[15]+4264355552&4294967295,N=I+(T<<10&4294967295|T>>>22),T=R+(I^(N|~C))+A[6]+2734768916&4294967295,R=N+(T<<15&4294967295|T>>>17),T=C+(N^(R|~I))+A[13]+1309151649&4294967295,C=R+(T<<21&4294967295|T>>>11),T=I+(R^(C|~N))+A[4]+4149444226&4294967295,I=C+(T<<6&4294967295|T>>>26),T=N+(C^(I|~R))+A[11]+3174756917&4294967295,N=I+(T<<10&4294967295|T>>>22),T=R+(I^(N|~C))+A[2]+718787259&4294967295,R=N+(T<<15&4294967295|T>>>17),T=C+(N^(R|~I))+A[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var C=I-this.blockSize,A=this.B,R=this.h,N=0;N<I;){if(R==0)for(;N<=C;)i(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<I;)if(A[R++]=x.charCodeAt(N++),R==this.blockSize){i(this,A),R=0;break}}else for(;N<I;)if(A[R++]=x[N++],R==this.blockSize){i(this,A),R=0;break}}this.h=R,this.o+=I},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var C=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=C&255,C/=256;for(this.u(x),x=Array(16),I=C=0;4>I;++I)for(var A=0;32>A;A+=8)x[C++]=this.g[I]>>>A&255;return x};function s(x,I){var C=a;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=I(x)}function o(x,I){this.h=I;for(var C=[],A=!0,R=x.length-1;0<=R;R--){var N=x[R]|0;A&&N==I||(C[R]=N,A=!1)}this.g=C}var a={};function c(x){return-128<=x&&128>x?s(x,function(I){return new o([I|0],0>I?-1:0)}):new o([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return p;if(0>x)return M(u(-x));for(var I=[],C=1,A=0;x>=C;A++)I[A]=x/C|0,C*=4294967296;return new o(I,0)}function d(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return M(d(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(I,8)),A=p,R=0;R<x.length;R+=8){var N=Math.min(8,x.length-R),T=parseInt(x.substring(R,R+N),I);8>N?(N=u(Math.pow(I,N)),A=A.j(N).add(u(T))):(A=A.j(C),A=A.add(u(T)))}return A}var p=c(0),v=c(1),b=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-M(this).m();for(var x=0,I=1,C=0;C<this.g.length;C++){var A=this.i(C);x+=(0<=A?A:4294967296+A)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(S(this))return"0";if(P(this))return"-"+M(this).toString(x);for(var I=u(Math.pow(x,6)),C=this,A="";;){var R=fe(C,I).g;C=H(C,R.j(I));var N=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=R,S(C))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function S(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function P(x){return x.h==-1}n.l=function(x){return x=H(this,x),P(x)?-1:S(x)?0:1};function M(x){for(var I=x.g.length,C=[],A=0;A<I;A++)C[A]=~x.g[A];return new o(C,~x.h).add(v)}n.abs=function(){return P(this)?M(this):this},n.add=function(x){for(var I=Math.max(this.g.length,x.g.length),C=[],A=0,R=0;R<=I;R++){var N=A+(this.i(R)&65535)+(x.i(R)&65535),T=(N>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);A=T>>>16,N&=65535,T&=65535,C[R]=T<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function H(x,I){return x.add(M(I))}n.j=function(x){if(S(this)||S(x))return p;if(P(this))return P(x)?M(this).j(M(x)):M(M(this).j(x));if(P(x))return M(this.j(M(x)));if(0>this.l(b)&&0>x.l(b))return u(this.m()*x.m());for(var I=this.g.length+x.g.length,C=[],A=0;A<2*I;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<x.g.length;R++){var N=this.i(A)>>>16,T=this.i(A)&65535,Yn=x.i(R)>>>16,rs=x.i(R)&65535;C[2*A+2*R]+=T*rs,J(C,2*A+2*R),C[2*A+2*R+1]+=N*rs,J(C,2*A+2*R+1),C[2*A+2*R+1]+=T*Yn,J(C,2*A+2*R+1),C[2*A+2*R+2]+=N*Yn,J(C,2*A+2*R+2)}for(A=0;A<I;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=I;A<2*I;A++)C[A]=0;return new o(C,0)};function J(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function ie(x,I){this.g=x,this.h=I}function fe(x,I){if(S(I))throw Error("division by zero");if(S(x))return new ie(p,p);if(P(x))return I=fe(M(x),I),new ie(M(I.g),M(I.h));if(P(I))return I=fe(x,M(I)),new ie(M(I.g),I.h);if(30<x.g.length){if(P(x)||P(I))throw Error("slowDivide_ only works with positive integers.");for(var C=v,A=I;0>=A.l(x);)C=Xe(C),A=Xe(A);var R=xe(C,1),N=xe(A,1);for(A=xe(A,2),C=xe(C,2);!S(A);){var T=N.add(A);0>=T.l(x)&&(R=R.add(C),N=T),A=xe(A,1),C=xe(C,1)}return I=H(x,R.j(I)),new ie(R,I)}for(R=p;0<=x.l(I);){for(C=Math.max(1,Math.floor(x.m()/I.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=u(C),T=N.j(I);P(T)||0<T.l(x);)C-=A,N=u(C),T=N.j(I);S(N)&&(N=v),R=R.add(N),x=H(x,T)}return new ie(R,x)}n.A=function(x){return fe(this,x).h},n.and=function(x){for(var I=Math.max(this.g.length,x.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)&x.i(A);return new o(C,this.h&x.h)},n.or=function(x){for(var I=Math.max(this.g.length,x.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)|x.i(A);return new o(C,this.h|x.h)},n.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)^x.i(A);return new o(C,this.h^x.h)};function Xe(x){for(var I=x.g.length+1,C=[],A=0;A<I;A++)C[A]=x.i(A)<<1|x.i(A-1)>>>31;return new o(C,x.h)}function xe(x,I){var C=I>>5;I%=32;for(var A=x.g.length-C,R=[],N=0;N<A;N++)R[N]=0<I?x.i(N+C)>>>I|x.i(N+C+1)<<32-I:x.i(N+C);return new o(R,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gI=QM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,zi=QM.Integer=o}).apply(typeof YM<"u"?YM:typeof self<"u"?self:typeof window<"u"?window:{});var ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qi={};var _I,Rq,Tc,vI,hd,sg,yI,bI,EI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,g){return l==Array.prototype||l==Object.prototype||(l[h]=g.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ig=="object"&&ig];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var g=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var k=l[E];if(!(k in g))break e;g=g[k]}l=l[l.length-1],E=g[l],h=h(E),h!=E&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var g=0,E=!1,k={next:function(){if(!E&&g<l.length){var L=g++;return{value:h(L,l[L]),done:!1}}return E=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,g){return g})}});var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,g){return l.call.apply(l.bind,arguments)}function p(l,h,g){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,E),l.apply(h,k)}}return function(){return l.apply(h,arguments)}}function v(l,h,g){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,v.apply(null,arguments)}function b(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function S(l,h){function g(){}g.prototype=h.prototype,l.aa=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(E,k,L){for(var Y=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)Y[tt-2]=arguments[tt];return h.prototype[k].apply(E,Y)}}function P(l){let h=l.length;if(0<h){let g=Array(h);for(let E=0;E<h;E++)g[E]=l[E];return g}return[]}function M(l,h){for(let g=1;g<arguments.length;g++){let E=arguments[g];if(c(E)){let k=l.length||0,L=E.length||0;l.length=k+L;for(let Y=0;Y<L;Y++)l[k+Y]=E[Y]}else l.push(E)}}class H{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function J(l){return/^[\s\xa0]*$/.test(l)}function ie(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function fe(l){return fe[" "](l),l}fe[" "]=function(){};var Xe=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function xe(l,h,g){for(let E in l)h.call(g,l[E],E,l)}function x(l,h){for(let g in l)h.call(void 0,l[g],g,l)}function I(l){let h={};for(let g in l)h[g]=l[g];return h}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,h){let g,E;for(let k=1;k<arguments.length;k++){E=arguments[k];for(g in E)l[g]=E[g];for(let L=0;L<C.length;L++)g=C[L],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function R(l){var h=1;l=l.split(":");let g=[];for(;0<h&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function N(l){a.setTimeout(()=>{throw l},0)}function T(){var l=Ne;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Yn{constructor(){this.h=this.g=null}add(h,g){let E=rs.get();E.set(h,g),this.h?this.h.next=E:this.g=E,this.h=E}}var rs=new H(()=>new se,l=>l.reset());class se{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ue=!1,Ne=new Yn,St=()=>{let l=a.Promise.resolve(void 0);ce=()=>{l.then(Qn)}};var Qn=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(g){N(g)}var h=rs;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}ue=!1};function _t(){this.s=this.s,this.C=this.C}_t.prototype.s=!1,_t.prototype.ma=function(){this.s||(this.s=!0,this.N())},_t.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var lt=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,h),a.removeEventListener("test",g,h)}catch{}return l})();function is(l,h){if(ct.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(Xe){e:{try{fe(h.nodeName);var k=!0;break e}catch{}k=!1}k||(h=null)}}else g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:e_[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&is.aa.h.call(this)}}S(is,ct);var e_={2:"touch",3:"pen",4:"mouse"};is.prototype.h=function(){is.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var vt="closure_listenable_"+(1e6*Math.random()|0),_i=0;function Sn(l,h,g,E,k){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!E,this.ha=k,this.key=++_i,this.da=this.fa=!1}function vi(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ss(l){this.src=l,this.g={},this.h=0}ss.prototype.add=function(l,h,g,E,k){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var Y=n_(l,h,E,k);return-1<Y?(h=l[Y],g||(h.fa=!1)):(h=new Sn(h,this.src,L,!!E,k),h.fa=g,l.push(h)),h};function t_(l,h){var g=h.type;if(g in l.g){var E=l.g[g],k=Array.prototype.indexOf.call(E,h,void 0),L;(L=0<=k)&&Array.prototype.splice.call(E,k,1),L&&(vi(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function n_(l,h,g,E){for(var k=0;k<l.length;++k){var L=l[k];if(!L.da&&L.listener==h&&L.capture==!!g&&L.ha==E)return k}return-1}var r_="closure_lm_"+(1e6*Math.random()|0),i_={};function JT(l,h,g,E,k){if(E&&E.once)return XT(l,h,g,E,k);if(Array.isArray(h)){for(var L=0;L<h.length;L++)JT(l,h[L],g,E,k);return null}return g=c_(g),l&&l[vt]?l.K(h,g,u(E)?!!E.capture:!!E,k):ZT(l,h,g,!1,E,k)}function ZT(l,h,g,E,k,L){if(!h)throw Error("Invalid event type");var Y=u(k)?!!k.capture:!!k,tt=o_(l);if(tt||(l[r_]=tt=new ss(l)),g=tt.add(h,g,E,Y,L),g.proxy)return g;if(E=GV(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)lt||(k=Y),k===void 0&&(k=!1),l.addEventListener(h.toString(),E,k);else if(l.attachEvent)l.attachEvent(tD(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function GV(){function l(g){return h.call(l.src,l.listener,g)}let h=zV;return l}function XT(l,h,g,E,k){if(Array.isArray(h)){for(var L=0;L<h.length;L++)XT(l,h[L],g,E,k);return null}return g=c_(g),l&&l[vt]?l.L(h,g,u(E)?!!E.capture:!!E,k):ZT(l,h,g,!0,E,k)}function eD(l,h,g,E,k){if(Array.isArray(h))for(var L=0;L<h.length;L++)eD(l,h[L],g,E,k);else E=u(E)?!!E.capture:!!E,g=c_(g),l&&l[vt]?(l=l.i,h=String(h).toString(),h in l.g&&(L=l.g[h],g=n_(L,g,E,k),-1<g&&(vi(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete l.g[h],l.h--)))):l&&(l=o_(l))&&(h=l.g[h.toString()],l=-1,h&&(l=n_(h,g,E,k)),(g=-1<l?h[l]:null)&&s_(g))}function s_(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[vt])t_(h.i,l);else{var g=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(g,E,l.capture):h.detachEvent?h.detachEvent(tD(g),E):h.addListener&&h.removeListener&&h.removeListener(E),(g=o_(h))?(t_(g,l),g.h==0&&(g.src=null,h[r_]=null)):vi(l)}}}function tD(l){return l in i_?i_[l]:i_[l]="on"+l}function zV(l,h){if(l.da)l=!0;else{h=new is(h,this);var g=l.listener,E=l.ha||l.src;l.fa&&s_(l),l=g.call(E,h)}return l}function o_(l){return l=l[r_],l instanceof ss?l:null}var a_="__closure_events_fn_"+(1e9*Math.random()>>>0);function c_(l){return typeof l=="function"?l:(l[a_]||(l[a_]=function(h){return l.handleEvent(h)}),l[a_])}function tn(){_t.call(this),this.i=new ss(this),this.M=this,this.F=null}S(tn,_t),tn.prototype[vt]=!0,tn.prototype.removeEventListener=function(l,h,g,E){eD(this,l,h,g,E)};function un(l,h){var g,E=l.F;if(E)for(g=[];E;E=E.F)g.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new ct(h,l);else if(h instanceof ct)h.target=h.target||l;else{var k=h;h=new ct(E,l),A(h,k)}if(k=!0,g)for(var L=g.length-1;0<=L;L--){var Y=h.g=g[L];k=vh(Y,E,!0,h)&&k}if(Y=h.g=l,k=vh(Y,E,!0,h)&&k,k=vh(Y,E,!1,h)&&k,g)for(L=0;L<g.length;L++)Y=h.g=g[L],k=vh(Y,E,!1,h)&&k}tn.prototype.N=function(){if(tn.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var g=l.g[h],E=0;E<g.length;E++)vi(g[E]);delete l.g[h],l.h--}}this.F=null},tn.prototype.K=function(l,h,g,E){return this.i.add(String(l),h,!1,g,E)},tn.prototype.L=function(l,h,g,E){return this.i.add(String(l),h,!0,g,E)};function vh(l,h,g,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var k=!0,L=0;L<h.length;++L){var Y=h[L];if(Y&&!Y.da&&Y.capture==g){var tt=Y.listener,Kt=Y.ha||Y.src;Y.fa&&t_(l.i,Y),k=tt.call(Kt,E)!==!1&&k}}return k&&!E.defaultPrevented}function nD(l,h,g){if(typeof l=="function")g&&(l=v(l,g));else if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function rD(l){l.g=nD(()=>{l.g=null,l.i&&(l.i=!1,rD(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class qV extends _t{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:rD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wl(l){_t.call(this),this.h=l,this.g={}}S(wl,_t);var iD=[];function sD(l){xe(l.g,function(h,g){this.g.hasOwnProperty(g)&&s_(h)},l),l.g={}}wl.prototype.N=function(){wl.aa.N.call(this),sD(this)},wl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var l_=a.JSON.stringify,WV=a.JSON.parse,KV=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function u_(){}u_.prototype.h=null;function oD(l){return l.h||(l.h=l.i())}function aD(){}var Il={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function d_(){ct.call(this,"d")}S(d_,ct);function h_(){ct.call(this,"c")}S(h_,ct);var ro={},cD=null;function yh(){return cD=cD||new tn}ro.La="serverreachability";function lD(l){ct.call(this,ro.La,l)}S(lD,ct);function Sl(l){let h=yh();un(h,new lD(h))}ro.STAT_EVENT="statevent";function uD(l,h){ct.call(this,ro.STAT_EVENT,l),this.stat=h}S(uD,ct);function dn(l){let h=yh();un(h,new uD(h,l))}ro.Ma="timingevent";function dD(l,h){ct.call(this,ro.Ma,l),this.size=h}S(dD,ct);function Cl(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Tl(){this.g=!0}Tl.prototype.xa=function(){this.g=!1};function YV(l,h,g,E,k,L){l.info(function(){if(l.g)if(L)for(var Y="",tt=L.split("&"),Kt=0;Kt<tt.length;Kt++){var Ge=tt[Kt].split("=");if(1<Ge.length){var nn=Ge[0];Ge=Ge[1];var rn=nn.split("_");Y=2<=rn.length&&rn[1]=="type"?Y+(nn+"="+Ge+"&"):Y+(nn+"=redacted&")}}else Y=null;else Y=L;return"XMLHTTP REQ ("+E+") [attempt "+k+"]: "+h+`
`+g+`
`+Y})}function QV(l,h,g,E,k,L,Y){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+k+"]: "+h+`
`+g+`
`+L+" "+Y})}function Ia(l,h,g,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+ZV(l,g)+(E?" "+E:"")})}function JV(l,h){l.info(function(){return"TIMEOUT: "+h})}Tl.prototype.info=function(){};function ZV(l,h){if(!l.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var E=g[l];if(!(2>E.length)){var k=E[1];if(Array.isArray(k)&&!(1>k.length)){var L=k[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Y=1;Y<k.length;Y++)k[Y]=""}}}}return l_(g)}catch{return h}}var bh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},f_;function Eh(){}S(Eh,u_),Eh.prototype.g=function(){return new XMLHttpRequest},Eh.prototype.i=function(){return{}},f_=new Eh;function os(l,h,g,E){this.j=l,this.i=h,this.l=g,this.R=E||1,this.U=new wl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fD}function fD(){this.i=null,this.g="",this.h=!1}var pD={},p_={};function m_(l,h,g){l.L=1,l.v=Ch(yi(h)),l.m=g,l.P=!0,mD(l,null)}function mD(l,h){l.F=Date.now(),wh(l),l.A=yi(l.v);var g=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),AD(g.i,"t",E),l.C=0,g=l.j.J,l.h=new fD,l.g=WD(l.j,g?h:null,!l.m),0<l.O&&(l.M=new qV(v(l.Y,l,l.g),l.O)),h=l.U,g=l.g,E=l.ca;var k="readystatechange";Array.isArray(k)||(k&&(iD[0]=k.toString()),k=iD);for(var L=0;L<k.length;L++){var Y=JT(g,k[L],E||h.handleEvent,!1,h.h||h);if(!Y)break;h.g[Y.key]=Y}h=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Sl(),YV(l.i,l.u,l.A,l.l,l.R,l.m)}os.prototype.ca=function(l){l=l.target;let h=this.M;h&&bi(l)==3?h.j():this.Y(l)},os.prototype.Y=function(l){try{if(l==this.g)e:{let rn=bi(this.g);var h=this.g.Ba();let Ta=this.g.Z();if(!(3>rn)&&(rn!=3||this.g&&(this.h.h||this.g.oa()||FD(this.g)))){this.J||rn!=4||h==7||(h==8||0>=Ta?Sl(3):Sl(2)),g_(this);var g=this.g.Z();this.X=g;t:if(gD(this)){var E=FD(this.g);l="";var k=E.length,L=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){io(this),Dl(this);var Y="";break t}this.h.i=new a.TextDecoder}for(h=0;h<k;h++)this.h.h=!0,l+=this.h.i.decode(E[h],{stream:!(L&&h==k-1)});E.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,QV(this.i,this.u,this.A,this.l,this.R,rn,g),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Kt=this.g;if((tt=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(tt)){var Ge=tt;break t}}Ge=null}if(g=Ge)Ia(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,__(this,g);else{this.o=!1,this.s=3,dn(12),io(this),Dl(this);break e}}if(this.P){g=!0;let _r;for(;!this.J&&this.C<Y.length;)if(_r=XV(this,Y),_r==p_){rn==4&&(this.s=4,dn(14),g=!1),Ia(this.i,this.l,null,"[Incomplete Response]");break}else if(_r==pD){this.s=4,dn(15),Ia(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else Ia(this.i,this.l,_r,null),__(this,_r);if(gD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||Y.length!=0||this.h.h||(this.s=1,dn(16),g=!1),this.o=this.o&&g,!g)Ia(this.i,this.l,Y,"[Invalid Chunked Response]"),io(this),Dl(this);else if(0<Y.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),I_(nn),nn.M=!0,dn(11))}}else Ia(this.i,this.l,Y,null),__(this,Y);rn==4&&io(this),this.o&&!this.J&&(rn==4?HD(this.j,this):(this.o=!1,wh(this)))}else gU(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,dn(12)):(this.s=0,dn(13)),io(this),Dl(this)}}}catch{}finally{}};function gD(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function XV(l,h){var g=l.C,E=h.indexOf(`
`,g);return E==-1?p_:(g=Number(h.substring(g,E)),isNaN(g)?pD:(E+=1,E+g>h.length?p_:(h=h.slice(E,E+g),l.C=E+g,h)))}os.prototype.cancel=function(){this.J=!0,io(this)};function wh(l){l.S=Date.now()+l.I,_D(l,l.I)}function _D(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Cl(v(l.ba,l),h)}function g_(l){l.B&&(a.clearTimeout(l.B),l.B=null)}os.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(JV(this.i,this.A),this.L!=2&&(Sl(),dn(17)),io(this),this.s=2,Dl(this)):_D(this,this.S-l)};function Dl(l){l.j.G==0||l.J||HD(l.j,l)}function io(l){g_(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,sD(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function __(l,h){try{var g=l.j;if(g.G!=0&&(g.g==l||v_(g.h,l))){if(!l.K&&v_(g.h,l)&&g.G==3){try{var E=g.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var k=E;if(k[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Rh(g),xh(g);else break e;w_(g),dn(18)}}else g.za=k[1],0<g.za-g.T&&37500>k[2]&&g.F&&g.v==0&&!g.C&&(g.C=Cl(v(g.Za,g),6e3));if(1>=bD(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else oo(g,11)}else if((l.K||g.g==l)&&Rh(g),!J(h))for(k=g.Da.g.parse(h),h=0;h<k.length;h++){let Ge=k[h];if(g.T=Ge[0],Ge=Ge[1],g.G==2)if(Ge[0]=="c"){g.K=Ge[1],g.ia=Ge[2];let nn=Ge[3];nn!=null&&(g.la=nn,g.j.info("VER="+g.la));let rn=Ge[4];rn!=null&&(g.Aa=rn,g.j.info("SVER="+g.Aa));let Ta=Ge[5];Ta!=null&&typeof Ta=="number"&&0<Ta&&(E=1.5*Ta,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;let _r=l.g;if(_r){let Ph=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ph){var L=E.h;L.g||Ph.indexOf("spdy")==-1&&Ph.indexOf("quic")==-1&&Ph.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(y_(L,L.h),L.h=null))}if(E.D){let S_=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;S_&&(E.ya=S_,ut(E.I,E.D,S_))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var Y=l;if(E.qa=qD(E,E.J?E.ia:null,E.W),Y.K){ED(E.h,Y);var tt=Y,Kt=E.L;Kt&&(tt.I=Kt),tt.B&&(g_(tt),wh(tt)),E.g=Y}else jD(E);0<g.i.length&&Ah(g)}else Ge[0]!="stop"&&Ge[0]!="close"||oo(g,7);else g.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?oo(g,7):E_(g):Ge[0]!="noop"&&g.l&&g.l.ta(Ge),g.v=0)}}Sl(4)}catch{}}var eU=class{constructor(l,h){this.g=l,this.map=h}};function vD(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yD(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function bD(l){return l.h?1:l.g?l.g.size:0}function v_(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function y_(l,h){l.g?l.g.add(h):l.h=h}function ED(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}vD.prototype.cancel=function(){if(this.i=wD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function wD(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let g of l.g.values())h=h.concat(g.D);return h}return P(l.i)}function tU(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],g=l.length,E=0;E<g;E++)h.push(l[E]);return h}h=[],g=0;for(E in l)h[g++]=l[E];return h}function nU(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var g=0;g<l;g++)h.push(g);return h}h=[],g=0;for(let E in l)h[g++]=E;return h}}}function ID(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var g=nU(l),E=tU(l),k=E.length,L=0;L<k;L++)h.call(void 0,E[L],g&&g[L],l)}var SD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rU(l,h){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var E=l[g].indexOf("="),k=null;if(0<=E){var L=l[g].substring(0,E);k=l[g].substring(E+1)}else L=l[g];h(L,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function so(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof so){this.h=l.h,Ih(this,l.j),this.o=l.o,this.g=l.g,Sh(this,l.s),this.l=l.l;var h=l.i,g=new Rl;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),CD(this,g),this.m=l.m}else l&&(h=String(l).match(SD))?(this.h=!1,Ih(this,h[1]||"",!0),this.o=xl(h[2]||""),this.g=xl(h[3]||"",!0),Sh(this,h[4]),this.l=xl(h[5]||"",!0),CD(this,h[6]||"",!0),this.m=xl(h[7]||"")):(this.h=!1,this.i=new Rl(null,this.h))}so.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Al(h,TD,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Al(h,TD,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Al(g,g.charAt(0)=="/"?oU:sU,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Al(g,cU)),l.join("")};function yi(l){return new so(l)}function Ih(l,h,g){l.j=g?xl(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Sh(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function CD(l,h,g){h instanceof Rl?(l.i=h,lU(l.i,l.h)):(g||(h=Al(h,aU)),l.i=new Rl(h,l.h))}function ut(l,h,g){l.i.set(h,g)}function Ch(l){return ut(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function xl(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Al(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,iU),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function iU(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var TD=/[#\/\?@]/g,sU=/[#\?:]/g,oU=/[#\?]/g,aU=/[#\?@]/g,cU=/#/g;function Rl(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function as(l){l.g||(l.g=new Map,l.h=0,l.i&&rU(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}n=Rl.prototype,n.add=function(l,h){as(this),this.i=null,l=Sa(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function DD(l,h){as(l),h=Sa(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function xD(l,h){return as(l),h=Sa(l,h),l.g.has(h)}n.forEach=function(l,h){as(this),this.g.forEach(function(g,E){g.forEach(function(k){l.call(h,k,E,this)},this)},this)},n.na=function(){as(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let E=0;E<h.length;E++){let k=l[E];for(let L=0;L<k.length;L++)g.push(h[E])}return g},n.V=function(l){as(this);let h=[];if(typeof l=="string")xD(this,l)&&(h=h.concat(this.g.get(Sa(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)h=h.concat(l[g])}return h},n.set=function(l,h){return as(this),this.i=null,l=Sa(this,l),xD(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function AD(l,h,g){DD(l,h),0<g.length&&(l.i=null,l.g.set(Sa(l,h),P(g)),l.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var E=h[g];let L=encodeURIComponent(String(E)),Y=this.V(E);for(E=0;E<Y.length;E++){var k=L;Y[E]!==""&&(k+="="+encodeURIComponent(String(Y[E]))),l.push(k)}}return this.i=l.join("&")};function Sa(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function lU(l,h){h&&!l.j&&(as(l),l.i=null,l.g.forEach(function(g,E){var k=E.toLowerCase();E!=k&&(DD(this,E),AD(this,k,g))},l)),l.j=h}function uU(l,h){let g=new Tl;if(a.Image){let E=new Image;E.onload=b(cs,g,"TestLoadImage: loaded",!0,h,E),E.onerror=b(cs,g,"TestLoadImage: error",!1,h,E),E.onabort=b(cs,g,"TestLoadImage: abort",!1,h,E),E.ontimeout=b(cs,g,"TestLoadImage: timeout",!1,h,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function dU(l,h){let g=new Tl,E=new AbortController,k=setTimeout(()=>{E.abort(),cs(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(L=>{clearTimeout(k),L.ok?cs(g,"TestPingServer: ok",!0,h):cs(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(k),cs(g,"TestPingServer: error",!1,h)})}function cs(l,h,g,E,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),E(g)}catch{}}function hU(){this.g=new KV}function fU(l,h,g){let E=g||"";try{ID(l,function(k,L){let Y=k;u(k)&&(Y=l_(k)),h.push(E+L+"="+encodeURIComponent(Y))})}catch(k){throw h.push(E+"type="+encodeURIComponent("_badmap")),k}}function kl(l){this.l=l.Ub||null,this.j=l.eb||!1}S(kl,u_),kl.prototype.g=function(){return new Th(this.l,this.j)},kl.prototype.i=(function(l){return function(){return l}})({});function Th(l,h){tn.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Th,tn),n=Th.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Nl(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pl(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Nl(this)),this.g&&(this.readyState=3,Nl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;RD(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function RD(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Pl(this):Nl(this),this.readyState==3&&RD(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Pl(this))},n.Qa=function(l){this.g&&(this.response=l,Pl(this))},n.ga=function(){this.g&&Pl(this)};function Pl(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Nl(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function Nl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Th.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function kD(l){let h="";return xe(l,function(g,E){h+=E,h+=":",h+=g,h+=`\r
`}),h}function b_(l,h,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=kD(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ut(l,h,g))}function yt(l){tn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(yt,tn);var pU=/^https?$/i,mU=["POST","PUT"];n=yt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():f_.g(),this.v=this.o?oD(this.o):oD(f_),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(L){PD(this,L);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var k in E)g.set(k,E[k]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(let L of E.keys())g.set(L,E.get(L));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),k=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(mU,h,void 0))||E||k||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,Y]of g)this.g.setRequestHeader(L,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{OD(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){PD(this,L)}};function PD(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,ND(l),Dh(l)}function ND(l){l.A||(l.A=!0,un(l,"complete"),un(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,un(this,"complete"),un(this,"abort"),Dh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dh(this,!0)),yt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?MD(this):this.bb())},n.bb=function(){MD(this)};function MD(l){if(l.h&&typeof o<"u"&&(!l.v[1]||bi(l)!=4||l.Z()!=2)){if(l.u&&bi(l)==4)nD(l.Ea,0,l);else if(un(l,"readystatechange"),bi(l)==4){l.h=!1;try{let Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var E;if(E=Y===0){var k=String(l.D).match(SD)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),E=!pU.test(k?k.toLowerCase():"")}g=E}if(g)un(l,"complete"),un(l,"success");else{l.m=6;try{var L=2<bi(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",ND(l)}}finally{Dh(l)}}}}function Dh(l,h){if(l.g){OD(l);let g=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||un(l,"ready");try{g.onreadystatechange=E}catch{}}}function OD(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function bi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),WV(h)}};function FD(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function gU(l){let h={};l=(l.g&&2<=bi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(J(l[E]))continue;var g=R(l[E]);let k=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let L=h[k]||[];h[k]=L,L.push(g)}x(h,function(E){return E.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ml(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function LD(l){this.Aa=0,this.i=[],this.j=new Tl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ml("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ml("baseRetryDelayMs",5e3,l),this.cb=Ml("retryDelaySeedMs",1e4,l),this.Wa=Ml("forwardChannelMaxRetries",2,l),this.wa=Ml("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new vD(l&&l.concurrentRequestLimit),this.Da=new hU,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=LD.prototype,n.la=8,n.G=1,n.connect=function(l,h,g,E){dn(0),this.W=l,this.H=h||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=qD(this,null,this.W),Ah(this)};function E_(l){if(VD(l),l.G==3){var h=l.U++,g=yi(l.I);if(ut(g,"SID",l.K),ut(g,"RID",h),ut(g,"TYPE","terminate"),Ol(l,g),h=new os(l,l.j,h),h.L=2,h.v=Ch(yi(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=h.v,g=!0),g||(h.g=WD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),wh(h)}zD(l)}function xh(l){l.g&&(I_(l),l.g.cancel(),l.g=null)}function VD(l){xh(l),l.u&&(a.clearTimeout(l.u),l.u=null),Rh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ah(l){if(!yD(l.h)&&!l.s){l.s=!0;var h=l.Ga;ce||St(),ue||(ce(),ue=!0),Ne.add(h,l),l.B=0}}function _U(l,h){return bD(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Cl(v(l.Ga,l,h),GD(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let k=new os(this,this.j,l),L=this.o;if(this.S&&(L?(L=I(L),A(L,this.S)):L=this.S),this.m!==null||this.O||(k.H=L,L=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=BD(this,k,h),g=yi(this.I),ut(g,"RID",l),ut(g,"CVER",22),this.D&&ut(g,"X-HTTP-Session-Id",this.D),Ol(this,g),L&&(this.O?h="headers="+encodeURIComponent(String(kD(L)))+"&"+h:this.m&&b_(g,this.m,L)),y_(this.h,k),this.Ua&&ut(g,"TYPE","init"),this.P?(ut(g,"$req",h),ut(g,"SID","null"),k.T=!0,m_(k,g,null)):m_(k,g,h),this.G=2}}else this.G==3&&(l?UD(this,l):this.i.length==0||yD(this.h)||UD(this))};function UD(l,h){var g;h?g=h.l:g=l.U++;let E=yi(l.I);ut(E,"SID",l.K),ut(E,"RID",g),ut(E,"AID",l.T),Ol(l,E),l.m&&l.o&&b_(E,l.m,l.o),g=new os(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),h&&(l.i=h.D.concat(l.i)),h=BD(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),y_(l.h,g),m_(g,E,h)}function Ol(l,h){l.H&&xe(l.H,function(g,E){ut(h,E,g)}),l.l&&ID({},function(g,E){ut(h,E,g)})}function BD(l,h,g){g=Math.min(l.i.length,g);var E=l.l?v(l.l.Na,l.l,l):null;e:{var k=l.i;let L=-1;for(;;){let Y=["count="+g];L==-1?0<g?(L=k[0].g,Y.push("ofs="+L)):L=0:Y.push("ofs="+L);let tt=!0;for(let Kt=0;Kt<g;Kt++){let Ge=k[Kt].g,nn=k[Kt].map;if(Ge-=L,0>Ge)L=Math.max(0,k[Kt].g-100),tt=!1;else try{fU(nn,Y,"req"+Ge+"_")}catch{E&&E(nn)}}if(tt){E=Y.join("&");break e}}}return l=l.i.splice(0,g),h.D=l,E}function jD(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ce||St(),ue||(ce(),ue=!0),Ne.add(h,l),l.v=0}}function w_(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Cl(v(l.Fa,l),GD(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,$D(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Cl(v(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dn(10),xh(this),$D(this))};function I_(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function $D(l){l.g=new os(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=yi(l.qa);ut(h,"RID","rpc"),ut(h,"SID",l.K),ut(h,"AID",l.T),ut(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&ut(h,"TO",l.ja),ut(h,"TYPE","xmlhttp"),Ol(l,h),l.m&&l.o&&b_(h,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Ch(yi(h)),g.m=null,g.P=!0,mD(g,l)}n.Za=function(){this.C!=null&&(this.C=null,xh(this),w_(this),dn(19))};function Rh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function HD(l,h){var g=null;if(l.g==h){Rh(l),I_(l),l.g=null;var E=2}else if(v_(l.h,h))g=h.D,ED(l.h,h),E=1;else return;if(l.G!=0){if(h.o)if(E==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var k=l.B;E=yh(),un(E,new dD(E,g)),Ah(l)}else jD(l);else if(k=h.s,k==3||k==0&&0<h.X||!(E==1&&_U(l,h)||E==2&&w_(l)))switch(g&&0<g.length&&(h=l.h,h.i=h.i.concat(g)),k){case 1:oo(l,5);break;case 4:oo(l,10);break;case 3:oo(l,6);break;default:oo(l,2)}}}function GD(l,h){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*h}function oo(l,h){if(l.j.info("Error code "+h),h==2){var g=v(l.fb,l),E=l.Xa;let k=!E;E=new so(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ih(E,"https"),Ch(E),k?uU(E.toString(),g):dU(E.toString(),g)}else dn(2);l.G=0,l.l&&l.l.sa(h),zD(l),VD(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function zD(l){if(l.G=0,l.ka=[],l.l){let h=wD(l.h);(h.length!=0||l.i.length!=0)&&(M(l.ka,h),M(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function qD(l,h,g){var E=g instanceof so?yi(g):new so(g);if(E.g!="")h&&(E.g=h+"."+E.g),Sh(E,E.s);else{var k=a.location;E=k.protocol,h=h?h+"."+k.hostname:k.hostname,k=+k.port;var L=new so(null);E&&Ih(L,E),h&&(L.g=h),k&&Sh(L,k),g&&(L.l=g),E=L}return g=l.D,h=l.ya,g&&h&&ut(E,g,h),ut(E,"VER",l.la),Ol(l,E),E}function WD(l,h,g){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new yt(new kl({eb:g})):new yt(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function KD(){}n=KD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function kh(){}kh.prototype.g=function(l,h){return new On(l,h)};function On(l,h){tn.call(this),this.g=new LD(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!J(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!J(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ca(this)}S(On,tn),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){E_(this.g)},On.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=l_(l),l=g);h.i.push(new eU(h.Ya++,l)),h.G==3&&Ah(h)},On.prototype.N=function(){this.g.l=null,delete this.j,E_(this.g),delete this.g,On.aa.N.call(this)};function YD(l){d_.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(YD,d_);function QD(){h_.call(this),this.status=1}S(QD,h_);function Ca(l){this.g=l}S(Ca,KD),Ca.prototype.ua=function(){un(this.g,"a")},Ca.prototype.ta=function(l){un(this.g,new YD(l))},Ca.prototype.sa=function(l){un(this.g,new QD)},Ca.prototype.ra=function(){un(this.g,"b")},kh.prototype.createWebChannel=kh.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,EI=qi.createWebChannelTransport=function(){return new kh},bI=qi.getStatEventTarget=function(){return yh()},yI=qi.Event=ro,sg=qi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bh.NO_ERROR=0,bh.TIMEOUT=8,bh.HTTP_ERROR=6,hd=qi.ErrorCode=bh,hD.COMPLETE="complete",vI=qi.EventType=hD,aD.EventType=Il,Il.OPEN="a",Il.CLOSE="b",Il.ERROR="c",Il.MESSAGE="d",tn.prototype.listen=tn.prototype.K,Tc=qi.WebChannel=aD,Rq=qi.FetchXmlHttpFactory=kl,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,_I=qi.XhrIo=yt}).apply(typeof ig<"u"?ig:typeof self<"u"?self:typeof window<"u"?window:{});var JM="@firebase/firestore",ZM="4.8.0";var Gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");var Kc="11.10.0";var ra=new ii("@firebase/firestore");function Dc(){return ra.logLevel}function ne(n,...e){if(ra.logLevel<=Oe.DEBUG){let t=e.map(uC);ra.debug(`Firestore (${Kc}): ${n}`,...t)}}function Ki(n,...e){if(ra.logLevel<=Oe.ERROR){let t=e.map(uC);ra.error(`Firestore (${Kc}): ${n}`,...t)}}function Ys(n,...e){if(ra.logLevel<=Oe.WARN){let t=e.map(uC);ra.warn(`Firestore (${Kc}): ${n}`,...t)}}function uC(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function de(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,GO(n,r,t)}function GO(n,e,t){let r=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ki(r),new Error(r)}function $e(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||GO(e,i,r)}function ve(n,e){return n}var B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Q=class extends Hn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var dr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var hg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},CI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gt.UNAUTHENTICATED))}shutdown(){}},TI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},DI=class{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new dr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new dr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new hg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}},xI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},AI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new xI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},RI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);let r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fg(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function kq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function zO(){return new TextEncoder}var bd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=kq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Re(n,e){return n<e?-1:n>e?1:0}function kI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Re(r,i);{let s=zO(),o=Pq(s.encode(XM(n,t)),s.encode(XM(e,t)));return o!==0?o:Re(r,i)}}t+=r>65535?2:1}return Re(n.length,e.length)}function XM(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Pq(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Re(n[t],e[t]);return Re(n.length,e.length)}function Mc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var eO="__name__",pg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&de(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Re(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):kI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zi.fromString(e.substring(4,e.length-2))}},ot=class n extends pg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Q(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Nq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zn=class n extends pg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Nq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eO}static keyField(){return new n([eO])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Q(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var he=class n{constructor(e){this.path=e}static fromPath(e){return new n(ot.fromString(e))}static fromName(e){return new n(ot.fromString(e).popFirst(5))}static empty(){return new n(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ot(e.slice()))}};function qO(n,e,t){if(!t)throw new Q(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Mq(n,e,t,r){if(e===!0&&r===!0)throw new Q(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tO(n){if(!he.isDocumentKey(n))throw new Q(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nO(n){if(he.isDocumentKey(n))throw new Q(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WO(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":de(12329,{type:typeof n})}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Wg(n);throw new Q(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Oq(n,e){if(e<=0)throw new Q(B.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Lt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Od(n,e){if(!WO(n))throw new Q(B.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Q(B.INVALID_ARGUMENT,t);return!0}var rO=-62135596800,iO=1e6,Vt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*iO);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rO)throw new Q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iO}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Od(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-rO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:Lt("string",Vt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};var ge=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Vt(0,0))}static max(){return new n(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ed=-1,PI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};PI.UNKNOWN_ID=-1;function Fq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Vt(t+1,0):new Vt(t,r));return new ia(i,he.empty(),e)}function Lq(n){return new ia(n.readTime,n.key,Ed)}var ia=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ge.min(),he.empty(),Ed)}static max(){return new n(ge.max(),he.empty(),Ed)}};function Vq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Re(n.largestBatchId,e.largestBatchId))}var Uq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",NI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Yc(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==Uq)throw n;ne("LocalStore","Unexpectedly lost primary lease")}var q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Bq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qc(n){return n.name==="IndexedDbTransactionError"}var dC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),hC=-1;function Fd(n){return n==null}function wd(n){return n===0&&1/n==-1/0}function jq(n){return typeof n=="number"&&Number.isInteger(n)&&!wd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var KO="";function $q(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sO(e)),e=Hq(n.get(t),e);return sO(e)}function Hq(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case KO:t+="";break;default:t+=s}}return t}function sO(n){return n+KO+""}var Gq="remoteDocuments",YO="owner";var QO="mutationQueues";var JO="mutations";var ZO="documentMutations",zq="remoteDocumentsV14";var XO="remoteDocumentGlobal";var e2="targets";var t2="targetDocuments";var n2="targetGlobal",r2="collectionParents";var i2="clientMetadata";var s2="bundles";var o2="namedQueries";var qq="indexConfiguration";var Wq="indexState";var Kq="indexEntries";var a2="documentOverlays";var Yq="globals";var Qq=[QO,JO,ZO,Gq,e2,YO,n2,t2,i2,XO,r2,s2,o2],qbe=[...Qq,a2],Jq=[QO,JO,ZO,zq,e2,YO,n2,t2,i2,XO,r2,s2,o2,a2],Zq=Jq,Xq=[...Zq,qq,Wq,Kq];var Wbe=[...Xq,Yq];function oO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function eo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function c2(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var It=class n{constructor(e,t){this.comparator=e,this.root=t||li.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,li.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kc(this.root,e,this.comparator,!0)}},kc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},li=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}};li.EMPTY=null,li.RED=!0,li.BLACK=!1;li.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new li(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var zt=class n{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mg(this.data.getIterator())}getIteratorFrom(e){return new mg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},mg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ur=class n{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new n([])}unionWith(e){let t=new zt(zn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var gg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ln=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gg("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ln.EMPTY_BYTE_STRING=new ln("");var eW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(n){if($e(!!n,39018),typeof n=="string"){let e=0,t=eW.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qi(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}var l2="server_timestamp",u2="__type__",d2="__previous_value__",h2="__local_write_time__";function fC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[u2])===null||t===void 0?void 0:t.stringValue)===l2}function Kg(n){let e=n.mapValue.fields[d2];return fC(e)?Kg(e):e}function Id(n){let e=Yi(n.mapValue.fields[h2].timestampValue);return new Vt(e.seconds,e.nanos)}var MI=class{constructor(e,t,r,i,s,o,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},_g="(default)",vg=class n{constructor(e,t){this.projectId=e,this.database=t||_g}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===_g}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var pC="__type__",f2="__max__",og={mapValue:{fields:{__type__:{stringValue:f2}}}},mC="__vector__",Oc="value";function Qs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fC(n)?4:m2(n)?9007199254740991:p2(n)?10:11:de(28295,{value:n})}function di(n,e){if(n===e)return!0;let t=Qs(n);if(t!==Qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Id(n).isEqual(Id(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Yi(i.timestampValue),a=Yi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Qi(i.bytesValue).isEqual(Qi(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return mt(i.geoPointValue.latitude)===mt(s.geoPointValue.latitude)&&mt(i.geoPointValue.longitude)===mt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return mt(i.integerValue)===mt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=mt(i.doubleValue),a=mt(s.doubleValue);return o===a?wd(o)===wd(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Mc(n.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(oO(o)!==oO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!di(o[c],a[c])))return!1;return!0})(n,e);default:return de(52216,{left:n})}}function Sd(n,e){return(n.values||[]).find(t=>di(t,e))!==void 0}function Fc(n,e){if(n===e)return 0;let t=Qs(n),r=Qs(e);if(t!==r)return Re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=mt(s.integerValue||s.doubleValue),c=mt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return aO(n.timestampValue,e.timestampValue);case 4:return aO(Id(n),Id(e));case 5:return kI(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Qi(s),c=Qi(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=Re(a[u],c[u]);if(d!==0)return d}return Re(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Re(mt(s.latitude),mt(o.latitude));return a!==0?a:Re(mt(s.longitude),mt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return cO(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,u,d;let p=s.fields||{},v=o.fields||{},b=(a=p[Oc])===null||a===void 0?void 0:a.arrayValue,S=(c=v[Oc])===null||c===void 0?void 0:c.arrayValue,P=Re(((u=b?.values)===null||u===void 0?void 0:u.length)||0,((d=S?.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:cO(b,S)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===og.mapValue&&o===og.mapValue)return 0;if(s===og.mapValue)return 1;if(o===og.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){let v=kI(c[p],d[p]);if(v!==0)return v;let b=Fc(a[c[p]],u[d[p]]);if(b!==0)return b}return Re(c.length,d.length)})(n.mapValue,e.mapValue);default:throw de(23264,{le:t})}}function aO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Re(n,e);let t=Yi(n),r=Yi(e),i=Re(t.seconds,r.seconds);return i!==0?i:Re(t.nanos,r.nanos)}function cO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Fc(t[i],r[i]);if(s)return s}return Re(t.length,r.length)}function Lc(n){return OI(n)}function OI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Yi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Qi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return he.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=OI(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${OI(t.fields[o])}`;return i+"}"})(n.mapValue):de(61005,{value:n})}function lg(n){switch(Qs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Kg(n);return e?16+lg(e):16;case 5:return 2*n.stringValue.length;case 6:return Qi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+lg(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return eo(r.fields,(s,o)=>{i+=s.length+lg(o)}),i})(n.mapValue);default:throw de(13486,{value:n})}}function lO(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function FI(n){return!!n&&"integerValue"in n}function gC(n){return!!n&&"arrayValue"in n}function uO(n){return!!n&&"nullValue"in n}function dO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ug(n){return!!n&&"mapValue"in n}function p2(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pC])===null||t===void 0?void 0:t.stringValue)===mC}function md(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return eo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=md(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=md(n.arrayValue.values[t]);return e}return Object.assign({},n)}function m2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===f2}var Ybe={mapValue:{fields:{[pC]:{stringValue:mC},[Oc]:{arrayValue:{}}}}};var Pn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ug(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=md(t)}setAll(e){let t=zn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=md(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());ug(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ug(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){eo(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(md(this.value))}};function g2(n){let e=[];return eo(n.fields,(t,r)=>{let i=new zn([t]);if(ug(r)){let s=g2(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ur(e)}var Wn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ge.min(),ge.min(),ge.min(),Pn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ge.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ge.min(),ge.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ge.min(),ge.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vc=class{constructor(e,t){this.position=e,this.inclusive=t}};function hO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),t.key):r=Fc(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!di(n.position[t],e.position[t]))return!1;return!0}var sa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function tW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var yg=class{},Ft=class n extends yg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new VI(e,t,r):t==="array-contains"?new jI(e,r):t==="in"?new $I(e,r):t==="not-in"?new HI(e,r):t==="array-contains-any"?new GI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new UI(e,r):new BI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fc(t,this.value)):t!==null&&Qs(this.value)===Qs(t)&&this.matchesComparison(Fc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fr=class n extends yg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return _2(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function _2(n){return n.op==="and"}function v2(n){return nW(n)&&_2(n)}function nW(n){for(let e of n.filters)if(e instanceof Fr)return!1;return!0}function LI(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+Lc(n.value);if(v2(n))return n.filters.map(e=>LI(e)).join(",");{let e=n.filters.map(t=>LI(t)).join(",");return`${n.op}(${e})`}}function y2(n,e){return n instanceof Ft?(function(r,i){return i instanceof Ft&&r.op===i.op&&r.field.isEqual(i.field)&&di(r.value,i.value)})(n,e):n instanceof Fr?(function(r,i){return i instanceof Fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&y2(o,i.filters[a]),!0):!1})(n,e):void de(19439)}function b2(n){return n instanceof Ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${Lc(t.value)}`})(n):n instanceof Fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(b2).join(" ,")+"}"})(n):"Filter"}var VI=class extends Ft{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){let t=he.comparator(e.key,this.key);return this.matchesComparison(t)}},UI=class extends Ft{constructor(e,t){super(e,"in",t),this.keys=E2("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},BI=class extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=E2("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function E2(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}var jI=class extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return gC(t)&&Sd(t.arrayValue,this.value)}},$I=class extends Ft{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Sd(this.value.arrayValue,t)}},HI=class extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sd(this.value.arrayValue,t)}},GI=class extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!gC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sd(this.value.arrayValue,r))}};var zI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function pO(n,e=null,t=[],r=[],i=null,s=null,o=null){return new zI(n,e,t,r,i,s,o)}function _C(n){let e=ve(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>LI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),Fd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lc(r)).join(",")),e.Pe=t}return e.Pe}function vC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!y2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fO(n.startAt,e.startAt)&&fO(n.endAt,e.endAt)}function qI(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Js=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function rW(n,e,t,r,i,s,o,a){return new Js(n,e,t,r,i,s,o,a)}function Yg(n){return new Js(n)}function mO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function w2(n){return n.collectionGroup!==null}function gd(n){let e=ve(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zt(zn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new sa(s,r))}),t.has(zn.keyField().canonicalString())||e.Te.push(new sa(zn.keyField(),r))}return e.Te}function ui(n){let e=ve(n);return e.Ie||(e.Ie=iW(e,gd(n))),e.Ie}function iW(n,e){if(n.limitType==="F")return pO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new sa(i.field,s)});let t=n.endAt?new Vc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vc(n.startAt.position,n.startAt.inclusive):null;return pO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function WI(n,e){let t=n.filters.concat([e]);return new Js(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bg(n,e,t){return new Js(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qg(n,e){return vC(ui(n),ui(e))&&n.limitType===e.limitType}function I2(n){return`${_C(ui(n))}|lt:${n.limitType}`}function xc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>b2(i)).join(", ")}]`),Fd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Lc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Lc(i)).join(",")),`Target(${r})`})(ui(n))}; limitType=${n.limitType})`}function Jg(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of gd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let u=hO(o,a,c);return o.inclusive?u<=0:u<0})(r.startAt,gd(r),i)||r.endAt&&!(function(o,a,c){let u=hO(o,a,c);return o.inclusive?u>=0:u>0})(r.endAt,gd(r),i))})(n,e)}function sW(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function S2(n){return(e,t)=>{let r=!1;for(let i of gd(n)){let s=oW(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oW(n,e,t){let r=n.field.isKeyField()?he.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Fc(c,u):de(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:n.dir})}}var Ji=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return c2(this.inner)}size(){return this.innerSize}};var aW=new It(he.comparator);function Zi(){return aW}var C2=new It(he.comparator);function fd(...n){let e=C2;for(let t of n)e=e.insert(t.key,t);return e}function T2(n){let e=C2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ea(){return _d()}function D2(){return _d()}function _d(){return new Ji(n=>n.toString(),(n,e)=>n.isEqual(e))}var cW=new It(he.comparator),lW=new zt(he.comparator);function Le(...n){let e=lW;for(let t of n)e=e.add(t);return e}var uW=new zt(Re);function dW(){return uW}function yC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wd(e)?"-0":e}}function x2(n){return{integerValue:""+n}}function hW(n,e){return jq(e)?x2(e):yC(n,e)}var Uc=class{constructor(){this._=void 0}};function fW(n,e,t){return n instanceof Bc?(function(i,s){let o={fields:{[u2]:{stringValue:l2},[h2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fC(s)&&(s=Kg(s)),s&&(o.fields[d2]=s),{mapValue:o}})(t,e):n instanceof oa?R2(n,e):n instanceof aa?k2(n,e):(function(i,s){let o=A2(i,s),a=gO(o)+gO(i.Ee);return FI(o)&&FI(i.Ee)?x2(a):yC(i.serializer,a)})(n,e)}function pW(n,e,t){return n instanceof oa?R2(n,e):n instanceof aa?k2(n,e):t}function A2(n,e){return n instanceof jc?(function(r){return FI(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Bc=class extends Uc{},oa=class extends Uc{constructor(e){super(),this.elements=e}};function R2(n,e){let t=P2(e);for(let r of n.elements)t.some(i=>di(i,r))||t.push(r);return{arrayValue:{values:t}}}var aa=class extends Uc{constructor(e){super(),this.elements=e}};function k2(n,e){let t=P2(e);for(let r of n.elements)t=t.filter(i=>!di(i,r));return{arrayValue:{values:t}}}var jc=class extends Uc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function gO(n){return mt(n.integerValue||n.doubleValue)}function P2(n){return gC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function mW(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof oa&&i instanceof oa||r instanceof aa&&i instanceof aa?Mc(r.elements,i.elements,di):r instanceof jc&&i instanceof jc?di(r.Ee,i.Ee):r instanceof Bc&&i instanceof Bc})(n.transform,e.transform)}var KI=class{constructor(e,t){this.version=e,this.transformResults=t}},En=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function dg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var $c=class{};function N2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hc(n.key,En.none()):new ca(n.key,n.data,En.none());{let t=n.data,r=Pn.empty(),i=new zt(zn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hi(n.key,r,new ur(i.toArray()),En.none())}}function gW(n,e,t){n instanceof ca?(function(i,s,o){let a=i.value.clone(),c=vO(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof hi?(function(i,s,o){if(!dg(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=vO(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(M2(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function vd(n,e,t,r){return n instanceof ca?(function(s,o,a,c){if(!dg(s.precondition,o))return a;let u=s.value.clone(),d=yO(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof hi?(function(s,o,a,c){if(!dg(s.precondition,o))return a;let u=yO(s.fieldTransforms,c,o),d=o.data;return d.setAll(M2(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return dg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function _W(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=A2(r.transform,i||null);s!=null&&(t===null&&(t=Pn.empty()),t.set(r.field,s))}return t||null}function _O(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Mc(r,i,(s,o)=>mW(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ca=class extends $c{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hi=class extends $c{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function M2(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function vO(n,e,t){let r=new Map;$e(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,pW(o,a,t[i]))}return r}function yO(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,fW(s,o,e))}return r}var Hc=class extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Eg=class extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var YI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&gW(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=vd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=vd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=D2();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=N2(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&Mc(this.mutations,e.mutations,(t,r)=>_O(t,r))&&Mc(this.baseMutations,e.baseMutations,(t,r)=>_O(t,r))}},QI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return cW})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var JI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ZI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Mt,je;function O2(n){switch(n){case B.OK:return de(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return de(15467,{code:n})}}function F2(n){if(n===void 0)return Ki("GRPC error has no .code"),B.UNKNOWN;switch(n){case Mt.OK:return B.OK;case Mt.CANCELLED:return B.CANCELLED;case Mt.UNKNOWN:return B.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return B.INTERNAL;case Mt.UNAVAILABLE:return B.UNAVAILABLE;case Mt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Mt.NOT_FOUND:return B.NOT_FOUND;case Mt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Mt.ABORTED:return B.ABORTED;case Mt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Mt.DATA_LOSS:return B.DATA_LOSS;default:return de(39323,{code:n})}}(je=Mt||(Mt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";var bO=null;var vW=new zi([4294967295,4294967295],0);function EO(n){let e=zO().encode(n),t=new gI;return t.update(e),new Uint8Array(t.digest())}function wO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zi([t,r],0),new zi([i,s],0)]}var XI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ta(`Invalid padding: ${t}`);if(r<0)throw new ta(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ta(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ta(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=zi.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(zi.fromNumber(r)));return i.compare(vW)===1&&(i=new zi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=EO(e),[r,i]=wO(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=EO(e),[r,i]=wO(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ta=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wg=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Cd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ge.min(),i,new It(Re),Zi(),Le())}},Cd=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Le(),Le(),Le())}};var Pc=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Ig=class{constructor(e,t){this.targetId=e,this.De=t}},Sg=class{constructor(e,t,r=ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Cg=class{constructor(){this.ve=0,this.Ce=IO(),this.Fe=ln.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Le(),t=Le(),r=Le();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:de(38017,{changeType:s})}}),new Cd(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=IO()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},eS=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Zi(),this.je=ag(),this.Je=ag(),this.He=new It(Re)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(qI(s))if(r===0){let o=new he(s.path);this.Xe(t,o,Wn.newNoDocument(o,ge.min()))}else $e(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}bO?.ct((function(d,p,v,b,S){var P,M,H,J,ie,fe;let Xe={localCacheCount:d,existenceFilterCount:p.count,databaseId:v.database,projectId:v.projectId},xe=p.unchangedNames;return xe&&(Xe.bloomFilter={applied:S===0,hashCount:(P=xe?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(J=(H=(M=xe?.bits)===null||M===void 0?void 0:M.bitmap)===null||H===void 0?void 0:H.length)!==null&&J!==void 0?J:0,padding:(fe=(ie=xe?.bits)===null||ie===void 0?void 0:ie.padding)!==null&&fe!==void 0?fe:0,mightContain:x=>{var I;return(I=b?.mightContain(x))!==null&&I!==void 0&&I}}),Xe})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Qi(r).toUint8Array()}catch(c){if(c instanceof gg)return Ys("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new XI(o,i,s)}catch(c){return Ys(c instanceof ta?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&qI(a.target)){let c=new he(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,Wn.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=Le();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new wg(e,t,this.He,this.ze,r);return this.ze=Zi(),this.je=ag(),this.Je=ag(),this.He=new It(Re),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Cg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new zt(Re),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new zt(Re),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Cg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function ag(){return new It(he.comparator)}function IO(){return new It(he.comparator)}var yW={asc:"ASCENDING",desc:"DESCENDING"},bW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EW={and:"AND",or:"OR"},tS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function nS(n,e){return n.useProto3Json||Fd(e)?e:{value:e}}function Tg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wW(n,e){return Tg(n,e.toTimestamp())}function qn(n){return $e(!!n,49232),ge.fromTimestamp((function(t){let r=Yi(t);return new Vt(r.seconds,r.nanos)})(n))}function bC(n,e){return rS(n,e).canonicalString()}function rS(n,e){let t=(function(i){return new ot(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function V2(n){let e=ot.fromString(n);return $e(G2(e),10190,{key:e.toString()}),e}function Dg(n,e){return bC(n.databaseId,e.path)}function yd(n,e){let t=V2(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(B2(t))}function U2(n,e){return bC(n.databaseId,e)}function IW(n){let e=V2(n);return e.length===4?ot.emptyPath():B2(e)}function iS(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function B2(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function SO(n,e,t){return{name:Dg(n,e),fields:t.value.mapValue.fields}}function SW(n,e){return"found"in e?(function(r,i){$e(!!i.found,43571),i.found.name,i.found.updateTime;let s=yd(r,i.found.name),o=qn(i.found.updateTime),a=i.found.createTime?qn(i.found.createTime):ge.min(),c=new Pn({mapValue:{fields:i.found.fields}});return Wn.newFoundDocument(s,o,a,c)})(n,e):"missing"in e?(function(r,i){$e(!!i.missing,3894),$e(!!i.readTime,22933);let s=yd(r,i.missing),o=qn(i.readTime);return Wn.newNoDocument(s,o)})(n,e):de(7234,{result:e})}function CW(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:de(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,d){return u.useProto3Json?($e(d===void 0||typeof d=="string",58123),ln.fromBase64String(d||"")):($e(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ln.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){let d=u.code===void 0?B.UNKNOWN:F2(u.code);return new Q(d,u.message||"")})(o);t=new Sg(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=yd(n,r.document.name),s=qn(r.document.updateTime),o=r.document.createTime?qn(r.document.createTime):ge.min(),a=new Pn({mapValue:{fields:r.document.fields}}),c=Wn.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new Pc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=yd(n,r.document),s=r.readTime?qn(r.readTime):ge.min(),o=Wn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Pc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=yd(n,r.document),s=r.removedTargetIds||[];t=new Pc([],s,i,null)}else{if(!("filter"in e))return de(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new ZI(i,s),a=r.targetId;t=new Ig(a,o)}}return t}function j2(n,e){let t;if(e instanceof ca)t={update:SO(n,e.key,e.value)};else if(e instanceof Hc)t={delete:Dg(n,e.key)};else if(e instanceof hi)t={update:SO(n,e.key,e.data),updateMask:MW(e.fieldMask)};else{if(!(e instanceof Eg))return de(16599,{Rt:e.type});t={verify:Dg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Bc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof aa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jc)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw de(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:wW(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:de(27497)})(n,e.precondition)),t}function TW(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?qn(i.updateTime):qn(s);return o.isEqual(ge.min())&&(o=qn(s)),new KI(o,i.transformResults||[])})(t,e))):[]}function DW(n,e){return{documents:[U2(n,e.path)]}}function xW(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=U2(n,i);let s=(function(u){if(u.length!==0)return H2(Fr.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(u){if(u.length!==0)return u.map(d=>(function(v){return{field:Ac(v.field),direction:kW(v.dir)}})(d))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=nS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function AW(n){let e=IW(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){$e(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=(function(p){let v=$2(p);return v instanceof Fr&&v2(v)?v.getFilters():[v]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(v=>(function(S){return new sa(Rc(S.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(v))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let v;return v=typeof p=="object"?p.value:p,Fd(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(p){let v=!!p.before,b=p.values||[];return new Vc(b,v)})(t.startAt));let u=null;return t.endAt&&(u=(function(p){let v=!p.before,b=p.values||[];return new Vc(b,v)})(t.endAt)),rW(e,i,o,s,a,"F",c,u)}function RW(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Rc(t.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Rc(t.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Rc(t.unaryFilter.field);return Ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Rc(t.unaryFilter.field);return Ft.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ft.create(Rc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fr.create(t.compositeFilter.filters.map(r=>$2(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de(1026)}})(t.compositeFilter.op))})(n):de(30097,{filter:n})}function kW(n){return yW[n]}function PW(n){return bW[n]}function NW(n){return EW[n]}function Ac(n){return{fieldPath:n.canonicalString()}}function Rc(n){return zn.fromServerFormat(n.fieldPath)}function H2(n){return n instanceof Ft?(function(t){if(t.op==="=="){if(dO(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NAN"}};if(uO(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dO(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NOT_NAN"}};if(uO(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ac(t.field),op:PW(t.op),value:t.value}}})(n):n instanceof Fr?(function(t){let r=t.getFilters().map(i=>H2(i));return r.length===1?r[0]:{compositeFilter:{op:NW(t.op),filters:r}}})(n):de(54877,{filter:n})}function MW(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function G2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Td=class n{constructor(e,t,r,i,s=ge.min(),o=ge.min(),a=ln.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var sS=class{constructor(e){this.gt=e}};function OW(n){let e=AW({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bg(e,e.limit,"L"):e}var xg=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(mt(e.integerValue));else if("doubleValue"in e){let r=mt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),wd(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Yi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Qi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?m2(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):p2(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):de(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Oc,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(mt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),he.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};xg.Ut=new xg;var oS=class{constructor(){this.Dn=new aS}addToCollectionParentIndex(e,t){return this.Dn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(ia.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(ia.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}},aS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zt(ot.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zt(ot.comparator)).toArray()}};var Qbe=new Uint8Array(0);var CO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},z2=41943040,lr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(z2,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);var Dd=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var TO="LruGarbageCollector",FW=1048576;function DO([n,e],[t,r]){let i=Re(n,t);return i===0?Re(e,r):i}var cS=class{constructor(e){this.Tr=e,this.buffer=new zt(DO),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();DO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},lS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ne(TO,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qc(t)?ne(TO,"Ignoring IndexedDB error during garbage collection: ",t):await Yc(t)}await this.Rr(3e5)})}},uS=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return q.resolve(dC.ue);let r=new cS(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(CO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CO):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Dc()<=Oe.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function LW(n,e){return new uS(n,e)}var dS=class{constructor(){this.changes=new Ji(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var hS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var fS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&vd(r.mutation,i,ur.empty(),Vt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){let i=ea();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=fd();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ea();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Zi(),o=_d(),a=(function(){return _d()})();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof hi)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),vd(d.mutation,u,d.mutation.getFieldMask(),Vt.now())):o.set(u.key,ur.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var p;return a.set(u,new hS(d,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=_d(),i=new It((o,a)=>o-a),s=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||ur.empty();d=a.applyToLocalView(u,d),r.set(c,d);let p=(i.get(a.batchId)||Le()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,p=D2();d.forEach(v=>{if(!s.has(v)){let b=N2(t.get(v),r.get(v));b!==null&&p.set(v,b),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):w2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(ea()),a=Ed,c=s;return o.next(u=>q.forEach(u,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(d)?q.resolve():this.remoteDocumentCache.getEntry(e,d).next(v=>{c=c.insert(d,v)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Le())).next(d=>({batchId:a,changes:T2(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let i=fd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=fd();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,c=>{let u=(function(p,v){return new Js(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,Wn.newInvalidDocument(d)))});let a=fd();return o.forEach((c,u)=>{let d=s.get(c);d!==void 0&&vd(d.mutation,u,ur.empty(),Vt.now()),Jg(t,u)&&(a=a.insert(c,u))}),a})}};var pS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return q.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:qn(i.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:OW(i.bundledQuery),readTime:qn(i.readTime)}})(t)),q.resolve()}};var mS=class{constructor(){this.overlays=new It(he.comparator),this.kr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ea();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){let i=ea(),s=t.length+1,o=new he(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new It((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=ea(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=ea(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return q.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new JI(t,r));let s=this.kr.get(t);s===void 0&&(s=Le(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var gS=class{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}};var xd=class{constructor(){this.qr=new zt(Ot.Qr),this.$r=new zt(Ot.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ot(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ot(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new he(new ot([])),r=new Ot(t,e),i=new Ot(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new he(new ot([])),r=new Ot(t,e),i=new Ot(t,e+1),s=Le();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ot(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ot=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return he.comparator(e.key,t.key)||Re(e.Hr,t.Hr)}static Ur(e,t){return Re(e.Hr,t.Hr)||he.comparator(e.key,t.key)}};var _S=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new zt(Ot.Qr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new YI(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Ot(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,t){return q.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?hC:this.er-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ot(t,0),i=new Ot(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zt(Re);return t.forEach(i=>{let s=new Ot(i,0),o=new Ot(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),q.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;he.isDocumentKey(s)||(s=s.child(""));let o=new Ot(new he(s),0),a=new zt(Re);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},o),q.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){$e(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return q.forEach(t.mutations,i=>{let s=new Ot(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ot(t,0),i=this.Yr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var vS=class{constructor(e){this.ni=e,this.docs=(function(){return new It(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let r=Zi();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Wn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Zi(),o=t.path,a=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Vq(Lq(d),r)<=0||(i.has(d.key)||Jg(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){de(9500)}ri(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yS(this)}getSize(e){return q.resolve(this.size)}},yS=class extends dS{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var bS=class{constructor(e){this.persistence=e,this.ii=new Ji(t=>_C(t),vC),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.si=0,this.oi=new xd,this.targetCount=0,this._i=Dd.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),q.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Dd(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.hr(t),q.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),q.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.oi.containsKey(t))}};var Ag=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new dC(0),this.ci=!1,this.ci=!0,this.li=new gS,this.referenceDelegate=e(this),this.hi=new bS(this),this.indexManager=new oS,this.remoteDocumentCache=(function(i){return new vS(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new sS(t),this.Ti=new pS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new _S(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);let i=new ES(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return q.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},ES=class extends NI{constructor(e){super(),this.currentSequenceNumber=e}},wS=class n{constructor(e){this.persistence=e,this.Ai=new xd,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw de(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.mi,r=>{let i=he.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,ge.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return q.or([()=>q.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Rg=class n{constructor(e,t){this.persistence=e,this.gi=new Ji(r=>$q(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=LW(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return q.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?q.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,ge.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),q.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lg(e.data.value)),t}Sr(e,t,r){return q.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var IS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Le(),i=Le();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var SS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var CS=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return BP()?8:Bq(Ht())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new SS;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Dc()<=Oe.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",xc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),q.resolve()):(Dc()<=Oe.DEBUG&&ne("QueryEngine","Query:",xc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Dc()<=Oe.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",xc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(t))):q.resolve())}ps(e,t){if(mO(t))return q.resolve(null);let r=ui(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=bg(t,null,"F"),r=ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Le(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,o,c.readTime)?this.ps(e,bg(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return mO(t)||i.isEqual(ge.min())?q.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?q.resolve(null):(Dc()<=Oe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xc(t)),this.vs(e,o,t,Fq(i,Ed)).next(a=>a))})}bs(e,t){let r=new zt(S2(e));return t.forEach((i,s)=>{Jg(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Dc()<=Oe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",xc(t)),this.gs.getDocumentsMatchingQuery(e,t,ia.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var EC="LocalStore",VW=3e8,TS=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new It(Re),this.Ms=new Ji(s=>_C(s),vC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function UW(n,e,t,r){return new TS(n,e,t,r)}async function q2(n,e){let t=ve(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Le();for(let u of i){o.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of s){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function BW(n,e){let t=ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,d){let p=u.batch,v=p.keys(),b=q.resolve();return v.forEach(S=>{b=b.next(()=>d.getEntry(c,S)).next(P=>{let M=u.docVersions.get(S);$e(M!==null,48541),P.version.compareTo(M)<0&&(p.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),d.addEntry(P)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function W2(n){let e=ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function jW(n,e){let t=ve(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,p)=>{let v=i.get(p);if(!v)return;a.push(t.hi.removeMatchingKeys(s,d.removedDocuments,p).next(()=>t.hi.addMatchingKeys(s,d.addedDocuments,p)));let b=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(ln.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,r)),i=i.insert(p,b),(function(P,M,H){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=VW?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(v,b,d)&&a.push(t.hi.updateTargetData(s,b))});let c=Zi(),u=Le();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push($W(s,o,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(ge.min())){let d=t.hi.getLastRemoteSnapshotVersion(s).next(p=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.Fs=i,s))}function $W(n,e,t){let r=Le(),i=Le();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Zi();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ne(EC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function HW(n,e){let t=ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hC),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GW(n,e){let t=ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Td(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function DS(n,e,t){let r=ve(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Qc(o))throw o;ne(EC,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function xO(n,e,t){let r=ve(n),i=ge.min(),s=Le();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,u,d){let p=ve(c),v=p.Ms.get(d);return v!==void 0?q.resolve(p.Fs.get(v)):p.hi.getTargetData(u,d)})(r,o,ui(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:ge.min(),t?s:Le())).next(a=>(zW(r,sW(e),a),{documents:a,qs:s})))}function zW(n,e,t){let r=n.xs.get(e)||ge.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var kg=class{constructor(){this.activeTargetIds=dW()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var xS=class{constructor(){this.Fo=new kg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new kg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var AS=class{xo(e){}shutdown(){}};var AO="ConnectivityMonitor",Pg=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ne(AO,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ne(AO,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var cg=null;function RS(){return cg===null?cg=(function(){return 268435456+Math.round(2147483648*Math.random())})():cg++,"0x"+cg.toString(16)}var wI="RestConnection",qW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},kS=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===_g?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=RS(),a=this.Go(e,t.toUriEncodedString());ne(wI,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:u}=new URL(a),d=Os(u);return this.jo(e,a,c,r,d).then(p=>(ne(wI,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ys(wI,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Kc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=qW[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var PS=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var cn="WebChannelConnection",NS=class extends kS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=RS();return new Promise((a,c)=>{let u=new _I;u.setWithCredentials(!0),u.listenOnce(vI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case hd.NO_ERROR:let p=u.getResponseJson();ne(cn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case hd.TIMEOUT:ne(cn,`RPC '${e}' ${o} timed out`),c(new Q(B.DEADLINE_EXCEEDED,"Request time out"));break;case hd.HTTP_ERROR:let v=u.getStatus();if(ne(cn,`RPC '${e}' ${o} failed with status:`,v,"response text:",u.getResponseText()),v>0){let b=u.getResponseJson();Array.isArray(b)&&(b=b[0]);let S=b?.error;if(S&&S.status&&S.message){let P=(function(H){let J=H.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(J)>=0?J:B.UNKNOWN})(S.status);c(new Q(P,S.message))}else c(new Q(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Q(B.UNAVAILABLE,"Connection failed."));break;default:de(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ne(cn,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);ne(cn,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",d,r,15)})}P_(e,t,r){let i=RS(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=EI(),a=bI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");ne(cn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let p=o.createWebChannel(d,c);this.T_(p);let v=!1,b=!1,S=new PS({Ho:M=>{b?ne(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(v||(ne(cn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),ne(cn,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),P=(M,H,J)=>{M.listen(H,ie=>{try{J(ie)}catch(fe){setTimeout(()=>{throw fe},0)}})};return P(p,Tc.EventType.OPEN,()=>{b||(ne(cn,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),P(p,Tc.EventType.CLOSE,()=>{b||(b=!0,ne(cn,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(p))}),P(p,Tc.EventType.ERROR,M=>{b||(b=!0,Ys(cn,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),S.__(new Q(B.UNAVAILABLE,"The operation could not be completed")))}),P(p,Tc.EventType.MESSAGE,M=>{var H;if(!b){let J=M.data[0];$e(!!J,16349);let ie=J,fe=ie?.error||((H=ie[0])===null||H===void 0?void 0:H.error);if(fe){ne(cn,`RPC '${e}' stream ${i} received error:`,fe);let Xe=fe.status,xe=(function(C){let A=Mt[C];if(A!==void 0)return F2(A)})(Xe),x=fe.message;xe===void 0&&(xe=B.INTERNAL,x="Unknown error status: "+Xe+" with message "+fe.message),b=!0,S.__(new Q(xe,x)),p.close()}else ne(cn,`RPC '${e}' stream ${i} received:`,J),S.a_(J)}}),P(a,yI.STAT_EVENT,M=>{M.stat===sg.PROXY?ne(cn,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===sg.NOPROXY&&ne(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function II(){return typeof document<"u"?document:null}function Zg(n){return new tS(n,!0)}var Ad=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var RO="PersistentStream",Ng=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Ad(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new Q(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ne(RO,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ne(RO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},MS=class extends Ng{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=CW(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ge.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?qn(o.readTime):ge.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=iS(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=qI(c)?{documents:DW(s,c)}:{query:xW(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=L2(s,o.resumeToken);let u=nS(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Tg(s,o.snapshotVersion.toTimestamp());let u=nS(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=RW(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=iS(this.serializer),t.removeTarget=e,this.k_(t)}},OS=class extends Ng{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=TW(e.writeResults,e.commitTime),r=qn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=iS(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>j2(this.serializer,r))};this.k_(t)}};var FS=class{},LS=class extends FS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Q(B.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,rS(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(B.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,rS(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(B.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},VS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ki(t),this._a=!1):ne("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var la="RemoteStore",US=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{da(this)&&(ne(la,"Restarting streams for network reachability change."),await(async function(c){let u=ve(c);u.Ia.add(4),await Ld(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Xg(u)})(this))})}),this.Aa=new VS(r,i)}};async function Xg(n){if(da(n))for(let e of n.da)await e(!0)}async function Ld(n){for(let e of n.da)await e(!1)}function K2(n,e){let t=ve(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),CC(t)?SC(t):Jc(t).x_()&&IC(t,e))}function wC(n,e){let t=ve(n),r=Jc(t);t.Ta.delete(e),r.x_()&&Y2(t,e),t.Ta.size===0&&(r.x_()?r.B_():da(t)&&t.Aa.set("Unknown"))}function IC(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jc(n).H_(e)}function Y2(n,e){n.Ra.$e(e),Jc(n).Y_(e)}function SC(n){n.Ra=new eS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Jc(n).start(),n.Aa.aa()}function CC(n){return da(n)&&!Jc(n).M_()&&n.Ta.size>0}function da(n){return ve(n).Ia.size===0}function Q2(n){n.Ra=void 0}async function WW(n){n.Aa.set("Online")}async function KW(n){n.Ta.forEach((e,t)=>{IC(n,e)})}async function YW(n,e){Q2(n),CC(n)?(n.Aa.la(e),SC(n)):n.Aa.set("Unknown")}async function QW(n,e,t){if(n.Aa.set("Online"),e instanceof Sg&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){ne(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mg(n,r)}else if(e instanceof Pc?n.Ra.Ye(e):e instanceof Ig?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ge.min()))try{let r=await W2(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.Ta.get(u);d&&s.Ta.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let d=s.Ta.get(c);if(!d)return;s.Ta.set(c,d.withResumeToken(ln.EMPTY_BYTE_STRING,d.snapshotVersion)),Y2(s,c);let p=new Td(d.target,c,u,d.sequenceNumber);IC(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ne(la,"Failed to raise snapshot:",r),await Mg(n,r)}}async function Mg(n,e,t){if(!Qc(e))throw e;n.Ia.add(1),await Ld(n),n.Aa.set("Offline"),t||(t=()=>W2(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ne(la,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Xg(n)})}function J2(n,e){return e().catch(t=>Mg(n,t,e))}async function e0(n){let e=ve(n),t=Zs(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:hC;for(;JW(e);)try{let i=await HW(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,ZW(e,i)}catch(i){await Mg(e,i)}Z2(e)&&X2(e)}function JW(n){return da(n)&&n.Pa.length<10}function ZW(n,e){n.Pa.push(e);let t=Zs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Z2(n){return da(n)&&!Zs(n).M_()&&n.Pa.length>0}function X2(n){Zs(n).start()}async function XW(n){Zs(n).na()}async function e7(n){let e=Zs(n);for(let t of n.Pa)e.X_(t.mutations)}async function t7(n,e,t){let r=n.Pa.shift(),i=QI.from(r,e,t);await J2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await e0(n)}async function n7(n,e){e&&Zs(n).Z_&&await(async function(r,i){if((function(o){return O2(o)&&o!==B.ABORTED})(i.code)){let s=r.Pa.shift();Zs(r).N_(),await J2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await e0(r)}})(n,e),Z2(n)&&X2(n)}async function kO(n,e){let t=ve(n);t.asyncQueue.verifyOperationInProgress(),ne(la,"RemoteStore received new credentials");let r=da(t);t.Ia.add(3),await Ld(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Xg(t)}async function r7(n,e){let t=ve(n);e?(t.Ia.delete(2),await Xg(t)):e||(t.Ia.add(2),await Ld(t),t.Aa.set("Unknown"))}function Jc(n){return n.Va||(n.Va=(function(t,r,i){let s=ve(t);return s.ia(),new MS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:WW.bind(null,n),e_:KW.bind(null,n),n_:YW.bind(null,n),J_:QW.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),CC(n)?SC(n):n.Aa.set("Unknown")):(await n.Va.stop(),Q2(n))})),n.Va}function Zs(n){return n.ma||(n.ma=(function(t,r,i){let s=ve(t);return s.ia(),new OS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:XW.bind(null,n),n_:n7.bind(null,n),ea:e7.bind(null,n),ta:t7.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await e0(n)):(await n.ma.stop(),n.Pa.length>0&&(ne(la,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var BS=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function TC(n,e){if(Ki("AsyncQueue",`${e}: ${n}`),Qc(n))return new Q(B.UNAVAILABLE,`${e}: ${n}`);throw n}var Og=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=fd(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Fg=class{constructor(){this.fa=new It(he.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):de(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Gc=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Og.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var jS=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},$S=class{constructor(){this.queries=PO(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ve(t),s=i.queries;i.queries=PO(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new Q(B.ABORTED,"Firestore shutting down"))}};function PO(){return new Ji(n=>I2(n),Qg)}async function DC(n,e){let t=ve(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new jS,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=TC(o,`Initialization of query '${xc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&AC(t)}async function xC(n,e){let t=ve(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function i7(n,e){let t=ve(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&AC(t)}function s7(n,e,t){let r=ve(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function AC(n){n.Da.forEach(e=>{e.next()})}var HS,NO;(NO=HS||(HS={})).Fa="default",NO.Cache="cache";var Rd=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Gc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==HS.Cache}};var Lg=class{constructor(e){this.key=e}},Vg=class{constructor(e){this.key=e}},GS=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Le(),this.mutatedKeys=Le(),this.Xa=S2(e),this.eu=new Og(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Fg,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{let v=i.get(d),b=Jg(this.query,p)?p:null,S=!!v&&this.mutatedKeys.has(v.key),P=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),M=!1;v&&b?v.data.isEqual(b.data)?S!==P&&(r.track({type:3,doc:b}),M=!0):this.iu(v,b)||(r.track({type:2,doc:b}),M=!0,(c&&this.Xa(b,c)>0||u&&this.Xa(b,u)<0)&&(a=!0)):!v&&b?(r.track({type:0,doc:b}),M=!0):v&&!b&&(r.track({type:1,doc:v}),M=!0,(c||u)&&(a=!0)),M&&(b?(o=o.add(b),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((d,p)=>(function(b,S){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{At:M})}};return P(b)-P(S)})(d.type,p.type)||this.Xa(d.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new Gc(this.query,e.eu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Fg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Le(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Vg(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Lg(r))}),t}uu(e){this.Ha=e.qs,this.Za=Le();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Gc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},RC="SyncEngine",zS=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},qS=class{constructor(e){this.key=e,this.lu=!1}},WS=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ji(a=>I2(a),Qg),this.Tu=new Map,this.Iu=new Set,this.du=new It(he.comparator),this.Eu=new Map,this.Au=new xd,this.Ru={},this.Vu=new Map,this.mu=Dd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function o7(n,e,t=!0){let r=sF(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await eF(r,e,t,!0),i}async function a7(n,e){let t=sF(n);await eF(t,e,!0,!1)}async function eF(n,e,t,r){let i=await GW(n.localStore,ui(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await c7(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&K2(n.remoteStore,i),a}async function c7(n,e,t,r,i){n.gu=(p,v,b)=>(async function(P,M,H,J){let ie=M.view.nu(H);ie.Ds&&(ie=await xO(P.localStore,M.query,!1).then(({documents:x})=>M.view.nu(x,ie)));let fe=J&&J.targetChanges.get(M.targetId),Xe=J&&J.targetMismatches.get(M.targetId)!=null,xe=M.view.applyChanges(ie,P.isPrimaryClient,fe,Xe);return OO(P,M.targetId,xe._u),xe.snapshot})(n,p,v,b);let s=await xO(n.localStore,e,!0),o=new GS(e,s.qs),a=o.nu(s.documents),c=Cd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);OO(n,t,u._u);let d=new zS(e,t,o);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function l7(n,e,t){let r=ve(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Qg(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await DS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&wC(r.remoteStore,i.targetId),KS(r,i.targetId)}).catch(Yc)):(KS(r,i.targetId),await DS(r.localStore,i.targetId,!0))}async function u7(n,e){let t=ve(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),wC(t.remoteStore,r.targetId))}async function d7(n,e,t){let r=v7(n);try{let i=await(function(o,a){let c=ve(o),u=Vt.now(),d=a.reduce((b,S)=>b.add(S.key),Le()),p,v;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=Zi(),P=Le();return c.Os.getEntries(b,d).next(M=>{S=M,S.forEach((H,J)=>{J.isValidDocument()||(P=P.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,S)).next(M=>{p=M;let H=[];for(let J of a){let ie=_W(J,p.get(J.key).overlayedDocument);ie!=null&&H.push(new hi(J.key,ie,g2(ie.value.mapValue),En.exists(!0)))}return c.mutationQueue.addMutationBatch(b,u,H,a)}).next(M=>{v=M;let H=M.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(b,M.batchId,H)})}).then(()=>({batchId:v.batchId,changes:T2(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new It(Re)),u=u.insert(a,c),o.Ru[o.currentUser.toKey()]=u})(r,i.batchId,t),await Vd(r,i.changes),await e0(r.remoteStore)}catch(i){let s=TC(i,"Failed to persist write");t.reject(s)}}async function tF(n,e){let t=ve(n);try{let r=await jW(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?$e(o.lu,14607):i.removedDocuments.size>0&&($e(o.lu,42227),o.lu=!1))}),await Vd(t,r,e)}catch(r){await Yc(r)}}function MO(n,e,t){let r=ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=ve(o);c.onlineState=a;let u=!1;c.queries.forEach((d,p)=>{for(let v of p.wa)v.va(a)&&(u=!0)}),u&&AC(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function h7(n,e,t){let r=ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new It(he.comparator);o=o.insert(s,Wn.newNoDocument(s,ge.min()));let a=Le().add(s),c=new wg(ge.min(),new Map,new It(Re),o,a);await tF(r,c),r.du=r.du.remove(s),r.Eu.delete(e),kC(r)}else await DS(r.localStore,e,!1).then(()=>KS(r,e,t)).catch(Yc)}async function f7(n,e){let t=ve(n),r=e.batch.batchId;try{let i=await BW(t.localStore,e);rF(t,r,null),nF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Vd(t,i)}catch(i){await Yc(i)}}async function p7(n,e,t){let r=ve(n);try{let i=await(function(o,a){let c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(p=>($e(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})})(r.localStore,e);rF(r,e,t),nF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Vd(r,i)}catch(i){await Yc(i)}}function nF(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function rF(n,e,t){let r=ve(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function KS(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||iF(n,r)})}function iF(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(wC(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),kC(n))}function OO(n,e,t){for(let r of t)r instanceof Lg?(n.Au.addReference(r.key,e),m7(n,r)):r instanceof Vg?(ne(RC,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||iF(n,r.key)):de(19791,{yu:r})}function m7(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ne(RC,"New document in limbo: "+t),n.Iu.add(r),kC(n))}function kC(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new he(ot.fromString(e)),r=n.mu.next();n.Eu.set(r,new qS(t)),n.du=n.du.insert(t,r),K2(n.remoteStore,new Td(ui(Yg(t.path)),r,"TargetPurposeLimboResolution",dC.ue))}}async function Vd(n,e,t){let r=ve(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);let p=IS.Es(c.targetId,u);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,u){let d=ve(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>q.forEach(u,v=>q.forEach(v.Is,b=>d.persistence.referenceDelegate.addReference(p,v.targetId,b)).next(()=>q.forEach(v.ds,b=>d.persistence.referenceDelegate.removeReference(p,v.targetId,b)))))}catch(p){if(!Qc(p))throw p;ne(EC,"Failed to update sequence numbers: "+p)}for(let p of u){let v=p.targetId;if(!p.fromCache){let b=d.Fs.get(v),S=b.snapshotVersion,P=b.withLastLimboFreeSnapshotVersion(S);d.Fs=d.Fs.insert(v,P)}}})(r.localStore,s))}async function g7(n,e){let t=ve(n);if(!t.currentUser.isEqual(e)){ne(RC,"User change. New user:",e.toKey());let r=await q2(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Q(B.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vd(t,r.Bs)}}function _7(n,e){let t=ve(n),r=t.Eu.get(e);if(r&&r.lu)return Le().add(r.key);{let i=Le(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function sF(n){let e=ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h7.bind(null,e),e.hu.J_=i7.bind(null,e.eventManager),e.hu.pu=s7.bind(null,e.eventManager),e}function v7(n){let e=ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p7.bind(null,e),e}var oF=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Zg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return UW(this.persistence,new CS,t.initialUser,this.serializer)}Du(t){return new Ag(wS.Vi,this.serializer)}bu(t){return new xS}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),YS=class extends oF{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){$e(this.persistence.referenceDelegate instanceof Rg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new lS(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?lr.withCacheSize(this.cacheSizeBytes):lr.DEFAULT;return new Ag(r=>Rg.Vi(r,t),this.serializer)}};var y7=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>MO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=g7.bind(null,this.syncEngine),await r7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new $S})()}createDatastore(t){let r=Zg(t.databaseInfo.databaseId),i=(function(o){return new NS(o)})(t.databaseInfo);return(function(o,a,c,u){return new LS(o,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new US(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>MO(this.syncEngine,r,0),(function(){return Pg.C()?new Pg:new AS})())}createSyncEngine(t,r){return(function(s,o,a,c,u,d,p){let v=new WS(s,o,a,c,u,d);return p&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=ve(s);ne(la,"RemoteStore shutting down."),o.Ia.add(5),await Ld(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var kd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var QS=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Q(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await(async function(i,s){let o=ve(i),a={documents:s.map(p=>Dg(o.serializer,p))},c=await o.Jo("BatchGetDocuments",o.serializer.databaseId,ot.emptyPath(),a,s.length),u=new Map;c.forEach(p=>{let v=SW(o.serializer,p);u.set(v.key.toString(),v)});let d=[];return s.forEach(p=>{let v=u.get(p.toString());$e(!!v,55234,{key:p}),d.push(v)}),d})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=he.fromPath(r);this.mutations.push(new Eg(i,this.precondition(i)))}),await(async function(r,i){let s=ve(r),o={writes:i.map(a=>j2(s.serializer,a))};await s.Wo("Commit",s.serializer.databaseId,ot.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw de(50498,{Wu:e.constructor.name});t=ge.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Q(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ge.min())?En.exists(!1):En.updateTime(t):En.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ge.min()))throw new Q(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return En.updateTime(t)}return En.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var JS=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Gu=r.maxAttempts,this.F_=new Ad(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{let e=new QS(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{let t=this.updateFunction(e);return!Fd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!O2(t)}return!1}};var Xs="FirestoreClient",ZS=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=bd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ne(Xs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne(Xs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=TC(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function SI(n,e){n.asyncQueue.verifyOperationInProgress(),ne(Xs,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await q2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ys("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ne("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ys("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function FO(n,e){n.asyncQueue.verifyOperationInProgress();let t=await b7(n);ne(Xs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>kO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>kO(e.remoteStore,i)),n._onlineComponents=e}async function b7(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne(Xs,"Using user provided OfflineComponentProvider");try{await SI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ys("Error using user provided cache. Falling back to memory cache: "+t),await SI(n,new oF)}}else ne(Xs,"Using default OfflineComponentProvider"),await SI(n,new YS(void 0));return n._offlineComponents}async function PC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne(Xs,"Using user provided OnlineComponentProvider"),await FO(n,n._uninitializedComponentsProvider._online)):(ne(Xs,"Using default OnlineComponentProvider"),await FO(n,new y7))),n._onlineComponents}function E7(n){return PC(n).then(e=>e.syncEngine)}function w7(n){return PC(n).then(e=>e.datastore)}async function Ug(n){let e=await PC(n),t=e.eventManager;return t.onListen=o7.bind(null,e.syncEngine),t.onUnlisten=l7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=a7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=u7.bind(null,e.syncEngine),t}function I7(n,e,t={}){let r=new dr;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let d=new kd({next:v=>{d.Ou(),o.enqueueAndForget(()=>xC(s,p));let b=v.docs.has(a);!b&&v.fromCache?u.reject(new Q(B.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&c&&c.source==="server"?u.reject(new Q(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new Rd(Yg(a.path),d,{includeMetadataChanges:!0,ka:!0});return DC(s,p)})(await Ug(n),n.asyncQueue,e,t,r)),r.promise}function S7(n,e,t={}){let r=new dr;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let d=new kd({next:v=>{d.Ou(),o.enqueueAndForget(()=>xC(s,p)),v.fromCache&&c.source==="server"?u.reject(new Q(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new Rd(a,d,{includeMetadataChanges:!0,ka:!0});return DC(s,p)})(await Ug(n),n.asyncQueue,e,t,r)),r.promise}function aF(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var LO=new Map;var cF="firestore.googleapis.com",VO=!0,Bg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cF,this.ssl=VO}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:VO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=z2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FW)throw new Q(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},zc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new CI;switch(r.type){case"firstParty":return new AI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=LO.get(t);r&&(ne("ComponentProvider","Removing Datastore"),LO.delete(t),r.terminate())})(this),Promise.resolve()}};function lF(n,e,t,r={}){var i;n=wn(n,zc);let s=Os(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(_m(`https://${c}`),vm("Firestore",!0)),o.host!==cF&&o.host!==c&&Ys("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!ri(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=Gt.MOCK_USER;else{d=MP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Q(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Gt(v)}n._authCredentials=new TI(new hg(d,p))}}var Xi=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ut=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Od(t,n._jsonSchema))return new n(e,r||null,new he(ot.fromString(t.referencePath)))}};Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:Lt("string",Ut._jsonSchemaVersion),referencePath:Lt("string")};var zs=class n extends Xi{constructor(e,t,r){super(e,t,Yg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new he(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function uF(n,e,...t){if(n=Et(n),qO("collection","path",e),n instanceof zc){let r=ot.fromString(e,...t);return nO(r),new zs(n,null,r)}{if(!(n instanceof Ut||n instanceof zs))throw new Q(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ot.fromString(e,...t));return nO(r),new zs(n.firestore,null,r)}}function NC(n,e,...t){if(n=Et(n),arguments.length===1&&(e=bd.newId()),qO("doc","path",e),n instanceof zc){let r=ot.fromString(e,...t);return tO(r),new Ut(n,null,new he(r))}{if(!(n instanceof Ut||n instanceof zs))throw new Q(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ot.fromString(e,...t));return tO(r),new Ut(n.firestore,n instanceof zs?n.converter:null,new he(r))}}var UO="AsyncQueue",jg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Ad(this,"async_queue_retry"),this.oc=()=>{let r=II();r&&ne(UO,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=II();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=II();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new dr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Qc(e))throw e;ne(UO,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ki("INTERNAL UNHANDLED ERROR: ",BO(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=BS.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&de(47125,{hc:BO(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function BO(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function jO(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var hr=class extends zc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new jg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jg(e),this._firestoreClient=void 0,await e}}};function dF(n,e){let t=typeof n=="object"?n:Ho(),r=typeof n=="string"?n:e||_g,i=gc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=NP("firestore");s&&lF(i,...s)}return i}function Ud(n){if(n._terminated)throw new Q(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||C7(n),n._firestoreClient}function C7(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,u,d){return new MI(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,aF(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new ZS(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Wi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ln.fromBase64String(e))}catch(t){throw new Q(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Od(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Wi._jsonSchemaVersion="firestore/bytes/1.0",Wi._jsonSchema={type:Lt("string",Wi._jsonSchemaVersion),bytes:Lt("string")};var ua=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Pd=class{constructor(e){this._methodName=e}};var qs=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Od(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};qs._jsonSchemaVersion="firestore/geoPoint/1.0",qs._jsonSchema={type:Lt("string",qs._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};var Ws=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Od(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Q(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ws._jsonSchemaVersion="firestore/vectorValue/1.0",Ws._jsonSchema={type:Lt("string",Ws._jsonSchemaVersion),vectorValues:Lt("object")};var T7=/^__.*__$/,XS=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ca(e,this.data,t,this.fieldTransforms)}},$g=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function hF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ec:n})}}var eC=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Gg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(hF(this.Ec)&&T7.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},tC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zg(e)}Dc(e,t,r,i=!1){return new eC({Ec:e,methodName:t,bc:r,path:zn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bd(n){let e=n._freezeSettings(),t=Zg(n._databaseId);return new tC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MC(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);OC("Data must be an object, but it was:",o,r);let a=mF(r,o),c,u;if(s.merge)c=new ur(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let p of s.mergeFields){let v=nC(e,p,t);if(!o.contains(v))throw new Q(B.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);_F(d,v)||d.push(v)}c=new ur(d),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new XS(new Pn(a),c,u)}var Hg=class n extends Pd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function fF(n,e,t,r){let i=n.Dc(1,e,t);OC("Data must be an object, but it was:",i,r);let s=[],o=Pn.empty();eo(r,(c,u)=>{let d=FC(e,c,t);u=Et(u);let p=i.gc(d);if(u instanceof Hg)s.push(d);else{let v=jd(u,p);v!=null&&(s.push(d),o.set(d,v))}});let a=new ur(s);return new $g(o,a,i.fieldTransforms)}function pF(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[nC(e,r,t)],c=[i];if(s.length%2!=0)throw new Q(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(nC(e,s[v])),c.push(s[v+1]);let u=[],d=Pn.empty();for(let v=a.length-1;v>=0;--v)if(!_F(u,a[v])){let b=a[v],S=c[v];S=Et(S);let P=o.gc(b);if(S instanceof Hg)u.push(b);else{let M=jd(S,P);M!=null&&(u.push(b),d.set(b,M))}}let p=new ur(u);return new $g(d,p,o.fieldTransforms)}function D7(n,e,t,r=!1){return jd(t,n.Dc(r?4:3,e))}function jd(n,e){if(gF(n=Et(n)))return OC("Unsupported field value:",e,n),mF(n,e);if(n instanceof Pd)return(function(r,i){if(!hF(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=jd(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hW(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Vt.fromDate(r);return{timestampValue:Tg(i.serializer,s)}}if(r instanceof Vt){let s=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tg(i.serializer,s)}}if(r instanceof qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wi)return{bytesValue:L2(i.serializer,r._byteString)};if(r instanceof Ut){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ws)return(function(o,a){return{mapValue:{fields:{[pC]:{stringValue:mC},[Oc]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return yC(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Wg(r)}`)})(n,e)}function mF(n,e){let t={};return c2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(n,(r,i)=>{let s=jd(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function gF(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Vt||n instanceof qs||n instanceof Wi||n instanceof Ut||n instanceof Pd||n instanceof Ws)}function OC(n,e,t){if(!gF(t)||!WO(t)){let r=Wg(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function nC(n,e,t){if((e=Et(e))instanceof ua)return e._internalPath;if(typeof e=="string")return FC(n,e);throw Gg("Field path arguments must be of type string or ",n,!1,void 0,t)}var x7=new RegExp("[~\\*/\\[\\]]");function FC(n,e,t){if(e.search(x7)>=0)throw Gg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ua(...e.split("."))._internalPath}catch{throw Gg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gg(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Q(B.INVALID_ARGUMENT,a+n+c)}function _F(n,e){return n.some(t=>t.isEqual(e))}var qc=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new rC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(t0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},rC=class extends qc{data(){return super.data()}};function t0(n,e){return typeof e=="string"?FC(n,e):e instanceof ua?e._internalPath:e._delegate._internalPath}function vF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Q(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nd=class{},Md=class extends Nd{};function yF(n,e,...t){let r=[];e instanceof Nd&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof iC).length,a=s.filter(c=>c instanceof zg).length;if(o>1||o>0&&a>0)throw new Q(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var zg=class n extends Md{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return IF(e._query,t),new Xi(e.firestore,e.converter,WI(e._query,t))}_parse(e){let t=Bd(e.firestore);return(function(s,o,a,c,u,d,p){let v;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Q(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){HO(p,d);let S=[];for(let P of p)S.push($O(c,s,P));v={arrayValue:{values:S}}}else v=$O(c,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||HO(p,d),v=D7(a,o,p,d==="in"||d==="not-in");return Ft.create(u,d,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function bF(n,e,t){let r=e,i=t0("where",n);return zg._create(i,r,t)}var iC=class n extends Nd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Fr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)IF(o,c),o=WI(o,c)})(e._query,t),new Xi(e.firestore,e.converter,WI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var sC=class n extends Md{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new Q(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sa(s,o)})(e._query,this._field,this._direction);return new Xi(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new Js(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function EF(n,e="asc"){let t=e,r=t0("orderBy",n);return sC._create(r,t)}var oC=class n extends Md{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Xi(e.firestore,e.converter,bg(e._query,this._limit,this._limitType))}};function wF(n){return Oq("limit",n),oC._create("limit",n,"F")}function $O(n,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new Q(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w2(e)&&t.indexOf("/")!==-1)throw new Q(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ot.fromString(t));if(!he.isDocumentKey(r))throw new Q(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lO(n,new he(r))}if(t instanceof Ut)return lO(n,t._key);throw new Q(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wg(t)}.`)}function HO(n,e){if(!Array.isArray(n)||n.length===0)throw new Q(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IF(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Q(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var qg=class{convertValue(e,t="none"){switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return eo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Oc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>mt(o.doubleValue));return new Ws(s)}convertGeoPoint(e){return new qs(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Kg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Id(e));default:return null}}convertTimestamp(e){let t=Yi(e);return new Vt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ot.fromString(e);$e(G2(r),9688,{name:e});let i=new vg(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(t)||Ki(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function LC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var aC=class extends qg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}};var Gs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ks=class n extends qc{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(t0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ks._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ks._jsonSchema={type:Lt("string",Ks._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};var Nc=class extends Ks{data(e={}){return super.data(e)}},na=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Gs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Nc(this._firestore,this._userDataWriter,r.key,r,new Gs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Nc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Nc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:A7(a.type),doc:c,oldIndex:u,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function A7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:n})}}function SF(n){n=wn(n,Ut);let e=wn(n.firestore,hr);return I7(Ud(e),n._key).then(t=>kF(e,n,t))}na._jsonSchemaVersion="firestore/querySnapshot/1.0",na._jsonSchema={type:Lt("string",na._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};var Wc=class extends qg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}};function CF(n){n=wn(n,Xi);let e=wn(n.firestore,hr),t=Ud(e),r=new Wc(e);return vF(n._query),S7(t,n._query).then(i=>new na(e,r,n,i))}function TF(n,e,t){n=wn(n,Ut);let r=wn(n.firestore,hr),i=LC(n.converter,e,t);return n0(r,[MC(Bd(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,En.none())])}function DF(n,e,t,...r){n=wn(n,Ut);let i=wn(n.firestore,hr),s=Bd(i),o;return o=typeof(e=Et(e))=="string"||e instanceof ua?pF(s,"updateDoc",n._key,e,t,r):fF(s,"updateDoc",n._key,e),n0(i,[o.toMutation(n._key,En.exists(!0))])}function xF(n){return n0(wn(n.firestore,hr),[new Hc(n._key,En.none())])}function AF(n,e){let t=wn(n.firestore,hr),r=NC(n),i=LC(n.converter,e);return n0(t,[MC(Bd(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}function RF(n,...e){var t,r,i;n=Et(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||jO(e[o])||(s=e[o++]);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(jO(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,u,d;if(n instanceof Ut)u=wn(n.firestore,hr),d=Yg(n._key.path),c={next:p=>{e[o]&&e[o](kF(u,n,p))},error:e[o+1],complete:e[o+2]};else{let p=wn(n,Xi);u=wn(p.firestore,hr),d=p._query;let v=new Wc(u);c={next:b=>{e[o]&&e[o](new na(u,v,p,b))},error:e[o+1],complete:e[o+2]},vF(n._query)}return(function(v,b,S,P){let M=new kd(P),H=new Rd(b,M,S);return v.asyncQueue.enqueueAndForget(async()=>DC(await Ug(v),H)),()=>{M.Ou(),v.asyncQueue.enqueueAndForget(async()=>xC(await Ug(v),H))}})(Ud(u),d,a,c)}function n0(n,e){return(function(r,i){let s=new dr;return r.asyncQueue.enqueueAndForget(async()=>d7(await E7(r),i,s)),s.promise})(Ud(n),e)}function kF(n,e,t){let r=t.docs.get(e._key),i=new Wc(n);return new Ks(n,i,e._key,r,new Gs(t.hasPendingWrites,t.fromCache),e.converter)}var R7={maxAttempts:5};function pd(n,e){if((n=Et(n)).firestore!==e)throw new Q(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var cC=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bd(e)}get(e){let t=pd(e,this._firestore),r=new aC(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return de(24041);let s=i[0];if(s.isFoundDocument())return new qc(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new qc(this._firestore,r,t._key,null,t.converter);throw de(18433,{doc:s})})}set(e,t,r){let i=pd(e,this._firestore),s=LC(i.converter,t,r),o=MC(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){let s=pd(e,this._firestore),o;return o=typeof(t=Et(t))=="string"||t instanceof ua?pF(this._dataReader,"Transaction.update",s._key,t,r,i):fF(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){let t=pd(e,this._firestore);return this._transaction.delete(t._key),this}};var lC=class extends cC{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=pd(e,this._firestore),r=new Wc(this._firestore);return super.get(e).then(i=>new Ks(this._firestore,r,t._key,i._document,new Gs(!1,!1),t.converter))}};function PF(n,e,t){n=wn(n,hr);let r=Object.assign(Object.assign({},R7),t);return(function(s){if(s.maxAttempts<1)throw new Q(B.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(s,o,a){let c=new dr;return s.asyncQueue.enqueueAndForget(async()=>{let u=await w7(s);new JS(s.asyncQueue,u,a,o,c).zu()}),c.promise})(Ud(n),i=>e(new lC(n,i)),r)}(function(e,t=!0){(function(i){Kc=i})(Ls),Pr(new bn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new hr(new DI(r.getProvider("auth-internal")),new RI(o,r.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Q(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vg(u.options.projectId,d)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),wt(JM,ZM,e),wt(JM,ZM,"esm2017")})();var ha=class{constructor(e){return e}},NF="firestore",VC=class{constructor(){return vc(NF)}};var UC=new Z("angularfire2.firestore-instances");function k7(n,e){let t=Yu(NF,n,e);return t&&new ha(t)}function P7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ha(r)}}var N7={provide:VC,deps:[[new Vn,UC]]},M7={provide:ha,useFactory:k7,deps:[[new Vn,UC],Vi]};function MF(n,...e){return wt("angularfire",Vs.full,"fst"),br([M7,N7,{provide:UC,useFactory:P7(n),multi:!0,deps:[Ve,Ze,Us,zo,[new Vn,dd],[new Vn,yc],...e]}])}var Zc=pt(AF,!0,2);var fr=pt(uF,!0,2);var BC=pt(xF,!0,2);var fi=pt(NC,!0,2);var jC=pt(SF,!0);var $d=pt(CF,!0);var OF=pt(dF,!0);var Xc=pt(wF,!0,2);var r0=pt(RF,!0);var el=pt(EF,!0,2),fa=pt(yF,!0,2);var i0=pt(PF,!0),FF=pt(TF,!0,2);var $C=pt(DF,!0,2);var LF=pt(bF,!0,2);var VF={production:!1,firebase:{apiKey:"AIzaSyBQ18QYhul1hn4RaOsgCsWUW_YaxrwEoqQ",authDomain:"jeub2-online.firebaseapp.com",projectId:"jeub2-online",storageBucket:"jeub2-online.firebasestorage.app",messagingSenderId:"702638381652",appId:"1:702638381652:web:fd034689545996dd8d2bc1",measurementId:"G-M3MPPHV9VB"}};var Se="primary",eh=Symbol("RouteTitle"),WC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ol(n){return new WC(n)}function F7(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function u0(n){return new Promise((e,t)=>{n.pipe(Ei()).subscribe({next:r=>e(r),error:r=>t(r)})})}function L7(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!pi(n[t],e[t]))return!1;return!0}function pi(n,e){let t=n?KC(n):void 0,r=e?KC(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!WF(n[i],e[i]))return!1;return!0}function KC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function WF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function KF(n){return n.length>0?n[n.length-1]:null}function ya(n){return Gl(n)?n:ki(n)?Ye(Promise.resolve(n)):De(n)}function YF(n){return Gl(n)?u0(n):Promise.resolve(n)}var V7={exact:JF,subset:ZF},QF={exact:U7,subset:B7,ignored:()=>!0};function UF(n,e,t){return V7[t.paths](n.root,e.root,t.matrixParams)&&QF[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function U7(n,e){return pi(n,e)}function JF(n,e,t){if(!ga(n.segments,e.segments)||!a0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!JF(n.children[r],e.children[r],t))return!1;return!0}function B7(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>WF(n[t],e[t]))}function ZF(n,e,t){return XF(n,e,e.segments,t)}function XF(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ga(i,t)||e.hasChildren()||!a0(i,t,r))}else if(n.segments.length===t.length){if(!ga(n.segments,t)||!a0(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!ZF(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ga(n.segments,i)||!a0(n.segments,i,r)||!n.children[Se]?!1:XF(n.children[Se],e,s,r)}}function a0(n,e,t){return e.every((r,i)=>QF[t](n[i].parameters,r.parameters))}var mi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Je([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ol(this.queryParams),this._queryParamMap}toString(){return H7.serialize(this)}},Je=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return c0(this)}},ma=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ol(this.parameters),this._parameterMap}toString(){return tL(this)}};function j7(n,e){return ga(n,e)&&n.every((t,r)=>pi(t.parameters,e[r].parameters))}function ga(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function $7(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Se&&(t=t.concat(e(i,r)))}),t}var ul=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>new to,providedIn:"root"})}return n})(),to=class{parse(e){let t=new QC(e);return new mi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Hd(e.root,!0)}`,r=q7(e.queryParams),i=typeof e.fragment=="string"?`#${G7(e.fragment)}`:"";return`${t}${r}${i}`}},H7=new to;function c0(n){return n.segments.map(e=>tL(e)).join("/")}function Hd(n,e){if(!n.hasChildren())return c0(n);if(e){let t=n.children[Se]?Hd(n.children[Se],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Se&&r.push(`${i}:${Hd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=$7(n,(r,i)=>i===Se?[Hd(n.children[Se],!1)]:[`${i}:${Hd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Se]!=null?`${c0(n)}/${t[0]}`:`${c0(n)}/(${t.join("//")})`}}function eL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function s0(n){return eL(n).replace(/%3B/gi,";")}function G7(n){return encodeURI(n)}function YC(n){return eL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function l0(n){return decodeURIComponent(n)}function BF(n){return l0(n.replace(/\+/g,"%20"))}function tL(n){return`${YC(n.path)}${z7(n.parameters)}`}function z7(n){return Object.entries(n).map(([e,t])=>`;${YC(e)}=${YC(t)}`).join("")}function q7(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${s0(t)}=${s0(i)}`).join("&"):`${s0(t)}=${s0(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var W7=/^[^\/()?;#]+/;function HC(n){let e=n.match(W7);return e?e[0]:""}var K7=/^[^\/()?;=#]+/;function Y7(n){let e=n.match(K7);return e?e[0]:""}var Q7=/^[^=?&#]+/;function J7(n){let e=n.match(Q7);return e?e[0]:""}var Z7=/^[^&#]+/;function X7(n){let e=n.match(Z7);return e?e[0]:""}var QC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Je([],{}):new Je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Se]=new Je(e,t)),r}parseSegment(){let e=HC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new ma(l0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Y7(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=HC(this.remaining);i&&(r=i,this.capture(r))}e[l0(t)]=l0(r)}parseQueryParam(e){let t=J7(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=X7(this.remaining);o&&(r=o,this.capture(r))}let i=BF(t),s=BF(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=HC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Se);let o=this.parseChildren();t[s??Se]=Object.keys(o).length===1&&o[Se]?o[Se]:new Je([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function nL(n){return n.segments.length>0?new Je([],{[Se]:n}):n}function rL(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=rL(i);if(r===Se&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Je(n.segments,e);return eK(t)}function eK(n){if(n.numberOfChildren===1&&n.children[Se]){let e=n.children[Se];return new Je(n.segments.concat(e.segments),e.children)}return n}function al(n){return n instanceof mi}function tK(n,e,t=null,r=null,i=new to){let s=iL(n);return sL(s,e,t,r,i)}function iL(n){let e;function t(s){let o={};for(let c of s.children){let u=t(c);o[c.outlet]=u}let a=new Je(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=nL(r);return e??i}function sL(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return GC(s,s,s,t,r,i);let o=nK(e);if(o.toRoot())return GC(s,s,new Je([],{}),t,r,i);let a=rK(o,s,n),c=a.processChildren?zd(a.segmentGroup,a.index,o.commands):aL(a.segmentGroup,a.index,o.commands);return GC(s,a.segmentGroup,c,t,r,i)}function d0(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Wd(n){return typeof n=="object"&&n!=null&&n.outlets}function jF(n,e,t){n||="\u0275";let r=new mi;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function GC(n,e,t,r,i,s){let o={};for(let[u,d]of Object.entries(r??{}))o[u]=Array.isArray(d)?d.map(p=>jF(u,p,s)):jF(u,d,s);let a;n===e?a=t:a=oL(n,e,t);let c=nL(rL(a));return new mi(c,o,i)}function oL(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=oL(s,e,t)}),new Je(n.segments,r)}var h0=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&d0(r[0]))throw new z(4003,!1);let i=r.find(Wd);if(i&&i!==KF(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function nK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new h0(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new h0(t,e,r)}var nl=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function rK(n,e,t){if(n.isAbsolute)return new nl(e,!0,0);if(!t)return new nl(e,!1,NaN);if(t.parent===null)return new nl(t,!0,0);let r=d0(n.commands[0])?0:1,i=t.segments.length-1+r;return iK(t,i,n.numberOfDoubleDots)}function iK(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new nl(r,!1,i-s)}function sK(n){return Wd(n[0])?n[0].outlets:{[Se]:n}}function aL(n,e,t){if(n??=new Je([],{}),n.segments.length===0&&n.hasChildren())return zd(n,e,t);let r=oK(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Je(n.segments.slice(0,r.pathIndex),{});return s.children[Se]=new Je(n.segments.slice(r.pathIndex),n.children),zd(s,0,i)}else return r.match&&i.length===0?new Je(n.segments,{}):r.match&&!n.hasChildren()?JC(n,e,t):r.match?zd(n,0,i):JC(n,e,t)}function zd(n,e,t){if(t.length===0)return new Je(n.segments,{});{let r=sK(t),i={};if(Object.keys(r).some(s=>s!==Se)&&n.children[Se]&&n.numberOfChildren===1&&n.children[Se].segments.length===0){let s=zd(n.children[Se],e,t);return new Je(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=aL(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Je(n.segments,i)}}function oK(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Wd(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!HF(c,u,o))return s;r+=2}else{if(!HF(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function JC(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Wd(s)){let c=aK(s.outlets);return new Je(r,c)}if(i===0&&d0(t[0])){let c=n.segments[e];r.push(new ma(c.path,$F(t[0]))),i++;continue}let o=Wd(s)?s.outlets[Se]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&d0(a)?(r.push(new ma(o,$F(a))),i+=2):(r.push(new ma(o,{})),i++)}return new Je(r,{})}function aK(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=JC(new Je([],{}),0,r))}),e}function $F(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function HF(n,e,t){return n==t.path&&pi(e,t.parameters)}var rl="imperative",qt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(qt||{}),pr=class{id;url;constructor(e,t){this.id=e,this.url=t}},_a=class extends pr{type=qt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gi=class extends pr{urlAfterRedirects;type=qt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Nn||{}),Kd=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Kd||{}),es=class extends pr{reason;code;type=qt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ts=class extends pr{reason;code;type=qt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Yd=class extends pr{error;target;type=qt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},f0=class extends pr{urlAfterRedirects;state;type=qt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ZC=class extends pr{urlAfterRedirects;state;type=qt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},XC=class extends pr{urlAfterRedirects;state;shouldActivate;type=qt.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},eT=class extends pr{urlAfterRedirects;state;type=qt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tT=class extends pr{urlAfterRedirects;state;type=qt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nT=class{route;type=qt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},rT=class{route;type=qt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},iT=class{snapshot;type=qt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sT=class{snapshot;type=qt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oT=class{snapshot;type=qt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},aT=class{snapshot;type=qt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qd=class{routerEvent;position;anchor;type=qt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Jd=class{},cl=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function cK(n){return!(n instanceof Jd)&&!(n instanceof cl)}function lK(n,e){return n.providers&&!n._injector&&(n._injector=oc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Lr(n){return n.outlet||Se}function uK(n,e){let t=n.filter(r=>Lr(r)===e);return t.push(...n.filter(r=>Lr(r)!==e)),t}function dl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var cT=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return dl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new hl(this.rootInjector)}},hl=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new cT(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ae(bt))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),p0=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=lT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=lT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=uT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return uT(e,this._root).map(t=>t.value)}};function lT(n,e){if(n===e.value)return e;for(let t of e.children){let r=lT(n,t);if(r)return r}return null}function uT(n,e){if(n===e.value)return[e];for(let t of e.children){let r=uT(n,t);if(r.length)return r.unshift(e),r}return[]}var Kn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function tl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var m0=class extends p0{snapshot;constructor(e,t){super(e),this.snapshot=t,_T(this,e)}toString(){return this.snapshot.toString()}};function cL(n){let e=dK(n),t=new et([new ma("",{})]),r=new et({}),i=new et({}),s=new et({}),o=new et(""),a=new va(t,r,s,o,i,Se,n,e.root);return a.snapshot=e.root,new m0(new Kn(a,[]),e)}function dK(n){let e={},t={},r={},s=new il([],e,r,"",t,Se,n,null,{});return new _0("",new Kn(s,[]))}var va=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ue(u=>u[eh]))??De(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ue(e=>ol(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ue(e=>ol(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function g0(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&uL(i)&&(r.resolve[eh]=i.title),r}var il=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[eh]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ol(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ol(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},_0=class extends p0{url;constructor(e,t){super(t),this.url=e,_T(this,t)}toString(){return lL(this._root)}};function _T(n,e){e.value._routerState=n,e.children.forEach(t=>_T(n,t))}function lL(n){let e=n.children.length>0?` { ${n.children.map(lL).join(", ")} } `:"";return`${n.value}${e}`}function zC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,pi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),pi(e.params,t.params)||n.paramsSubject.next(t.params),L7(e.url,t.url)||n.urlSubject.next(t.url),pi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function dT(n,e){let t=pi(n.params,e.params)&&j7(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||dT(n.parent,e.parent))}function uL(n){return typeof n.title=="string"||n.title===null}var hK=new Z(""),dL=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Se;activateEvents=new ke;deactivateEvents=new ke;attachEvents=new ke;detachEvents=new ke;routerOutletData=XR();parentContexts=F(hl);location=F(Un);changeDetector=F(Dt);inputBinder=F(th,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new hT(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Pt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Tr]})}return n})(),hT=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===va?this.route:e===hl?this.childContexts:e===hK?this.outletData:this.parent.get(e,t)}},th=new Z(""),vT=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=mf([r.queryParams,r.params,r.data]).pipe(Tn(([s,o,a],c)=>(a=O(O(O({},s),o),a),c===0?De(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=sk(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),hL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&W(0,"router-outlet")},dependencies:[dL],encapsulation:2})}return n})();function yT(n){let e=n.children&&n.children.map(yT),t=e?re(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Se&&(t.component=hL),t}function fK(n,e,t){let r=Zd(n,e._root,t?t._root:void 0);return new m0(r,e)}function Zd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=pK(n,e,t);return new Kn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Zd(n,a)),o}}let r=mK(e.value),i=e.children.map(s=>Zd(n,s));return new Kn(r,i)}}function pK(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zd(n,r,i);return Zd(n,r)})}function mK(n){return new va(new et(n.url),new et(n.params),new et(n.queryParams),new et(n.fragment),new et(n.data),n.outlet,n.component,n)}var Xd=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},fL="ngNavigationCancelingError";function v0(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=al(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=pL(!1,Nn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function pL(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[fL]=!0,t.cancellationCode=e,t}function gK(n){return mL(n)&&al(n.url)}function mL(n){return!!n&&n[fL]}var _K=(n,e,t,r)=>Ue(i=>(new fT(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),fT=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),zC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=tl(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=tl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=tl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=tl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new aT(s.value.snapshot))}),e.children.length&&this.forwardEvent(new sT(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(zC(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),zC(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},y0=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},sl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function vK(n,e,t){let r=n._root,i=e?e._root:null;return Gd(r,i,t,[r.value])}function yK(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function fl(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!bv(n)?n:e.get(n):r}function Gd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=tl(e);return n.children.forEach(o=>{bK(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>qd(a,t.getContext(o),i)),i}function bK(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=EK(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new y0(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Gd(n,e,a?a.children:null,r,i):Gd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new sl(a.outlet.component,o))}else o&&qd(e,a,i),i.canActivateChecks.push(new y0(r)),s.component?Gd(n,null,a?a.children:null,r,i):Gd(n,null,t,r,i);return i}function EK(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ga(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ga(n.url,e.url)||!pi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dT(n,e)||!pi(n.queryParams,e.queryParams);case"paramsChange":default:return!dT(n,e)}}function qd(n,e,t){let r=tl(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?qd(o,e.children.getContext(s),t):qd(o,null,t):qd(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new sl(e.outlet.component,i)):t.canDeactivateChecks.push(new sl(null,i)):t.canDeactivateChecks.push(new sl(null,i))}function nh(n){return typeof n=="function"}function wK(n){return typeof n=="boolean"}function IK(n){return n&&nh(n.canLoad)}function SK(n){return n&&nh(n.canActivate)}function CK(n){return n&&nh(n.canActivateChild)}function TK(n){return n&&nh(n.canDeactivate)}function DK(n){return n&&nh(n.canMatch)}function gL(n){return n instanceof ho||n?.name==="EmptyError"}var o0=Symbol("INITIAL_VALUE");function ll(){return Tn(n=>mf(n.map(e=>e.pipe(st(1),Va(o0)))).pipe(Ue(e=>{for(let t of e)if(t!==!0){if(t===o0)return o0;if(t===!1||xK(t))return t}return!0}),fn(e=>e!==o0),st(1)))}function xK(n){return al(n)||n instanceof Xd}function _L(n){return n.aborted?De(void 0).pipe(st(1)):new _e(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function vL(n){return Ur(_L(n))}function AK(n,e){return Yt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?De(re(O({},t),{guardsResult:!0})):RK(o,r,i,n).pipe(Yt(a=>a&&wK(a)?kK(r,s,n,e):De(a)),Ue(a=>re(O({},t),{guardsResult:a})))})}function RK(n,e,t,r){return Ye(n).pipe(Yt(i=>FK(i.component,i.route,t,e,r)),Ei(i=>i!==!0,!0))}function kK(n,e,t,r){return Ye(e).pipe(La(i=>Oa(NK(i.route.parent,r),PK(i.route,r),OK(n,i.path,t),MK(n,i.route,t))),Ei(i=>i!==!0,!0))}function PK(n,e){return n!==null&&e&&e(new oT(n)),De(!0)}function NK(n,e){return n!==null&&e&&e(new iT(n)),De(!0)}function MK(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return De(!0);let i=r.map(s=>zl(()=>{let o=dl(e)??t,a=fl(s,o),c=SK(a)?a.canActivate(e,n):kt(o,()=>a(e,n));return ya(c).pipe(Ei())}));return De(i).pipe(ll())}function OK(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>yK(o)).filter(o=>o!==null).map(o=>zl(()=>{let a=o.guards.map(c=>{let u=dl(o.node)??t,d=fl(c,u),p=CK(d)?d.canActivateChild(r,n):kt(u,()=>d(r,n));return ya(p).pipe(Ei())});return De(a).pipe(ll())}));return De(s).pipe(ll())}function FK(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return De(!0);let o=s.map(a=>{let c=dl(e)??i,u=fl(a,c),d=TK(u)?u.canDeactivate(n,e,t,r):kt(c,()=>u(n,e,t,r));return ya(d).pipe(Ei())});return De(o).pipe(ll())}function LK(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return De(!0);let o=s.map(a=>{let c=fl(a,n),u=IK(c)?c.canLoad(e,t):kt(n,()=>c(e,t)),d=ya(u);return i?d.pipe(vL(i)):d});return De(o).pipe(ll(),yL(r))}function yL(n){return H_(Qt(e=>{if(typeof e!="boolean")throw v0(n,e)}),Ue(e=>e===!0))}function VK(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return De(!0);let o=s.map(a=>{let c=fl(a,n),u=DK(c)?c.canMatch(e,t):kt(n,()=>c(e,t)),d=ya(u);return i?d.pipe(vL(i)):d});return De(o).pipe(ll(),yL(r))}var pa=class bL extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,bL.prototype)}},pT=class EL extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,EL.prototype)}};function UK(n){throw new z(4e3,!1)}function BK(n){throw pL(!1,Nn.GuardRejected)}var jK=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Se])throw UK(`${e.redirectTo}`);i=i.children[Se]}}async applyRedirectCommands(e,t,r,i,s){let o=await $K(t,i,s);if(o instanceof mi)throw new pT(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new pT(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new mi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Je(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function $K(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:u,data:d,title:p}=e;return u0(ya(kt(t,()=>r({params:u,data:d,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:p}))))}var mT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function HK(n,e,t,r,i,s){let o=wL(n,e,t);return o.matched?(r=lK(e,r),VK(r,e,t,i,s).pipe(Ue(a=>a===!0?o:O({},mT)))):De(o)}function wL(n,e,t){if(e.path==="**")return GK(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},mT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||F7)(t,n,e);if(!i)return O({},mT);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?O(O({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function GK(n){return{matched:!0,parameters:n.length>0?KF(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function GF(n,e,t,r){return t.length>0&&WK(n,t,r)?{segmentGroup:new Je(e,qK(r,new Je(t,n.children))),slicedSegments:[]}:t.length===0&&KK(n,t,r)?{segmentGroup:new Je(n.segments,zK(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Je(n.segments,n.children),slicedSegments:t}}function zK(n,e,t,r){let i={};for(let s of t)if(b0(n,e,s)&&!r[Lr(s)]){let o=new Je([],{});i[Lr(s)]=o}return O(O({},r),i)}function qK(n,e){let t={};t[Se]=e;for(let r of n)if(r.path===""&&Lr(r)!==Se){let i=new Je([],{});t[Lr(r)]=i}return t}function WK(n,e,t){return t.some(r=>b0(n,e,r)&&Lr(r)!==Se)}function KK(n,e,t){return t.some(r=>b0(n,e,r))}function b0(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function YK(n,e,t){return e.length===0&&!n.children[t]}var QK=class{};async function JK(n,e,t,r,i,s,o="emptyOnly",a){return new XK(n,e,t,r,i,o,s,a).recognize()}var ZK=31,XK=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new jK(this.urlSerializer,this.urlTree)}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}async recognize(){let e=GF(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Kn(r,t),s=new _0("",i),o=tK(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new il([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Se,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Se,t),rootSnapshot:t}}catch(r){if(r instanceof pT)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pa?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof Kn?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let u=r.children[c],d=uK(t,c),p=await this.processSegmentGroup(e,d,u,c,i);o.push(...p)}let a=IL(o);return eY(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(u){if(u instanceof pa||gL(u))continue;throw u}if(YK(r,i,s))return new QK;throw new pa(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(Lr(r)!==o&&(o===Se||!b0(i,s,r)))throw new pa(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new pa(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:p,remainingSegments:v}=wL(t,i,s);if(!c)throw new pa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ZK&&(this.allowRedirects=!1));let b=new il(s,u,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,zF(i),Lr(i),i.component??i._loadedComponent??null,i,qF(i)),S=g0(b,a,this.paramsInheritanceStrategy);if(b.params=Object.freeze(S.params),b.data=Object.freeze(S.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=await this.applyRedirects.applyRedirectCommands(d,i.redirectTo,p,b,e),M=await this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,M.concat(v),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await u0(HK(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new pa(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),u=r._loadedInjector??e,{parameters:d,consumedSegments:p,remainingSegments:v}=a,b=new il(p,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,zF(r),Lr(r),r.component??r._loadedComponent??null,r,qF(r)),S=g0(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(S.params),b.data=Object.freeze(S.data);let{segmentGroup:P,slicedSegments:M}=GF(t,p,v,c);if(M.length===0&&P.hasChildren()){let ie=await this.processChildren(u,c,P,b);return new Kn(b,ie)}if(c.length===0&&M.length===0)return new Kn(b,[]);let H=Lr(r)===s,J=await this.processSegment(u,c,P,M,H?Se:s,!0,b);return new Kn(b,J instanceof Kn?[J]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await u0(LK(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw BK(t)}return{routes:[],injector:e}}};function eY(n){n.sort((e,t)=>e.value.outlet===Se?-1:t.value.outlet===Se?1:e.value.outlet.localeCompare(t.value.outlet))}function tY(n){let e=n.value.routeConfig;return e&&e.path===""}function IL(n){let e=[],t=new Set;for(let r of n){if(!tY(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=IL(r.children);e.push(new Kn(r.value,i))}return e.filter(r=>!t.has(r))}function zF(n){return n.data||{}}function qF(n){return n.resolve||{}}var nY=new Z("",{factory:()=>JK});function rY(n,e,t,r,i,s,o){let a=n.get(nY);return Yt(c=>De(c).pipe(Tn(u=>a(n,e,t,r,u.extractedUrl,i,s,o)),Ue(({state:u,tree:d})=>re(O({},c),{targetSnapshot:u,urlAfterRedirects:d}))))}function iY(n,e){return Yt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return De(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of SL(c))o.add(u);let a=0;return Ye(o).pipe(La(c=>s.has(c)?sY(c,r,n,e):(c.data=g0(c,c.parent,n).resolve,De(void 0))),Qt(()=>a++),vf(1),Yt(c=>a===o.size?De(t):on))})}function SL(n){let e=n.children.map(t=>SL(t)).flat();return[n,...e]}function sY(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!uL(i)&&(s[eh]=i.title),zl(()=>(n.data=g0(n,n.parent,t).resolve,oY(s,n,e,r).pipe(Ue(o=>(n._resolvedData=o,n.data=O(O({},n.data),o),null)))))}function oY(n,e,t,r){let i=KC(n);if(i.length===0)return De({});let s={};return Ye(i).pipe(Yt(o=>aY(n[o],e,t,r).pipe(Ei(),Qt(a=>{if(a instanceof Xd)throw v0(new to,a);s[o]=a}))),vf(1),Ue(()=>s),Fa(o=>gL(o)?on:Q_(o)))}function aY(n,e,t,r){let i=dl(e)??r,s=fl(n,i),o=s.resolve?s.resolve(e,t):kt(i,()=>s(e,t));return ya(o)}function qC(n){return Tn(e=>{let t=n(e);return t?Ye(t).pipe(Ue(()=>e)):De(e)})}var CL=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Se);return r}getResolvedTitleForRoute(t){return t.data[eh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>F(cY),providedIn:"root"})}return n})(),cY=(()=>{class n extends CL{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ae(Dk))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pl=new Z("",{factory:()=>({})}),rh=new Z(""),E0=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=F(xb);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await YF(kt(t,()=>r.loadComponent())),o=await DL(TL(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await lY(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function lY(n,e,t,r){let i=await YF(kt(t,()=>n.loadChildren())),s=await DL(TL(i)),o;s instanceof bp||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,u=!1;return Array.isArray(o)?(c=o,u=!0):(a=o.create(t).injector,c=a.get(rh,[],{optional:!0,self:!0}).flat()),{routes:c.map(yT),injector:a}}function uY(n){return n&&typeof n=="object"&&"default"in n}function TL(n){return uY(n)?n.default:n}async function DL(n){return n}var bT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>F(dY),providedIn:"root"})}return n})(),dY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ET=new Z(""),wT=new Z("");function xL(n,e,t){let r=n.get(wT),i=n.get(nt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),hY(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&kt(n,()=>c({transition:a,from:e,to:t})),o}function hY(n){return new Promise(e=>{Ro({read:()=>setTimeout(e)},{injector:n})})}var fY=()=>{},IT=new Z(""),w0=(()=>{class n{currentNavigation=Xt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Xt(null);events=new Ee;transitionAbortWithErrorSubject=new Ee;configLoader=F(E0);environmentInjector=F(bt);destroyRef=F(tr);urlSerializer=F(ul);rootContexts=F(hl);location=F(Ns);inputBindingEnabled=F(th,{optional:!0})!==null;titleStrategy=F(CL);options=F(pl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=F(bT);createViewTransition=F(ET,{optional:!0});navigationErrorHandler=F(IT,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>De(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new nT(i)),r=i=>this.events.next(new rT(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Tt(()=>{this.transitions?.next(re(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new et(null),this.transitions.pipe(fn(r=>r!==null),Tn(r=>{let i=!1,s=new AbortController;return De(r).pipe(Tn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Nn.SupersededByNewNavigation),on;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?re(O({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new ts(o.id,this.urlSerializer.serialize(o.rawUrl),"",Kd.IgnoredSameUrlNavigation)),o.resolve(!1),on;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return De(o).pipe(Tn(d=>(this.events.next(new _a(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?on:Promise.resolve(d))),rY(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Qt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(v=>(v.finalUrl=d.urlAfterRedirects,v));let p=new f0(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:p,source:v,restoredState:b,extras:S}=o,P=new _a(d,this.urlSerializer.serialize(p),v,b);this.events.next(P);let M=cL(this.rootComponentType).snapshot;return this.currentTransition=r=re(O({},o),{targetSnapshot:M,urlAfterRedirects:p,extras:re(O({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(H=>(H.finalUrl=p,H)),De(r)}else return this.events.next(new ts(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Kd.IgnoredByUrlHandlingStrategy)),o.resolve(!1),on}),Qt(o=>{let a=new ZC(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ue(o=>(this.currentTransition=r=re(O({},o),{guards:vK(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),AK(this.environmentInjector,o=>this.events.next(o)),Qt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw v0(this.urlSerializer,o.guardsResult);let a=new XC(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),fn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Nn.GuardRejected),!1)),qC(o=>{if(o.guards.canActivateChecks.length!==0)return De(o).pipe(Qt(a=>{let c=new eT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Tn(a=>{let c=!1;return De(a).pipe(iY(this.paramsInheritanceStrategy,this.environmentInjector),Qt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Nn.NoDataFromResolver)}}))}),Qt(a=>{let c=new tT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),qC(o=>{let a=u=>{let d=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let p=dl(u)??this.environmentInjector;d.push(this.configLoader.loadComponent(p,u.routeConfig).then(v=>{u.component=v}))}for(let p of u.children)d.push(...a(p));return d},c=a(o.targetSnapshot.root);return c.length===0?De(o):Ye(Promise.all(c).then(()=>o))}),qC(()=>this.afterPreactivation()),Tn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?Ye(c).pipe(Ue(()=>r)):De(r)}),Ue(o=>{let a=fK(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=re(O({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Qt(()=>{this.events.next(new Jd)}),_K(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),st(1),Ur(_L(s.signal).pipe(fn(()=>!i&&!r.targetRouterState),Qt(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Nn.Aborted)}))),Qt({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=fY,a)),this.lastSuccessfulNavigation.set(Tt(this.currentNavigation)),this.events.next(new gi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ur(this.transitionAbortWithErrorSubject.pipe(Qt(o=>{throw o}))),X_(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Nn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Fa(o=>{if(this.destroyed)return r.resolve(!1),on;if(i=!0,mL(o))this.events.next(new es(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),gK(o)?this.events.next(new cl(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Yd(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=kt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Xd){let{message:u,cancellationCode:d}=v0(this.urlSerializer,c);this.events.next(new es(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new cl(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return on}))}))}cancelNavigationTransition(t,r,i){let s=new es(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Tt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pY(n){return n!==rl}var mY=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>F(gY),providedIn:"root"})}return n})(),gT=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},gY=(()=>{class n extends gT{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ps(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ST=(()=>{class n{urlSerializer=F(ul);options=F(pl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=F(Ns);urlHandlingStrategy=F(bT);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof mi?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=cL(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>F(AL),providedIn:"root"})}return n})(),AL=(()=>{class n extends ST{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof _a?this.updateStateMemento():t instanceof ts?this.commitTransition(r):t instanceof f0?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Jd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof es&&t.code!==Nn.SupersededByNewNavigation&&t.code!==Nn.Redirect?this.restoreHistory(r):t instanceof Yd?this.restoreHistory(r,!0):t instanceof gi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=O(O({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=O(O({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ps(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CT(n,e){n.events.pipe(fn(t=>t instanceof gi||t instanceof es||t instanceof Yd||t instanceof ts),Ue(t=>t instanceof gi||t instanceof ts?0:(t instanceof es?t.code===Nn.Redirect||t.code===Nn.SupersededByNewNavigation:!1)?2:1),fn(t=>t!==2),st(1)).subscribe(()=>{e()})}var _Y={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ba=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=F(bb);stateManager=F(ST);options=F(pl,{optional:!0})||{};pendingTasks=F(Ti);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=F(w0);urlSerializer=F(ul);location=F(Ns);urlHandlingStrategy=F(bT);injector=F(bt);_events=new Ee;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=F(mY);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=F(rh,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!F(th,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ke;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=Tt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof es&&r.code!==Nn.Redirect&&r.code!==Nn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gi)this.navigated=!0;else if(r instanceof cl){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||pY(i.source)},o);this.scheduleNavigation(a,rl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}cK(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=O({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(nr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Tt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(yT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=O(O({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let v=i?i.snapshot:this.routerState.snapshot.root;p=iL(v)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return sL(p,t,d,u??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=al(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,rl,null,r)}navigate(t,r={skipLocationChange:!1}){return yY(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(bs(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},_Y):r===!1?i=O({},vY):i=r,al(t))return UF(this.currentUrlTree,t,i);let s=this.parseUrl(t);return UF(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((p,v)=>{a=p,c=v});let d=this.pendingTasks.add();return CT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yY(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new z(4008,!1)}var ih=class{};var RL=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(fn(t=>t instanceof gi),La(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=oc(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ye(i).pipe(ps())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=Ye(this.loader.loadChildren(t,r)):i=De(null);let s=i.pipe(Yt(o=>o===null?De(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(t,r);return Ye([s,o]).pipe(ps())}else return s})}static \u0275fac=function(r){return new(r||n)(ae(ba),ae(bt),ae(ih),ae(E0))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kL=new Z(""),bY=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=rl;restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _a?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gi?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ts&&t.code===Kd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Qd))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Qd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){pb()};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function EY(){return F(ba).routerState.root}function sh(n,e){return{\u0275kind:n,\u0275providers:e}}function wY(){let n=F(Ze);return e=>{let t=n.get(ir);if(e!==t.components[0])return;let r=n.get(ba),i=n.get(PL);n.get(DT)===1&&r.initialNavigation(),n.get(OL,null,{optional:!0})?.setUpPreloading(),n.get(kL,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var PL=new Z("",{factory:()=>new Ee}),DT=new Z("",{factory:()=>1});function NL(){let n=[{provide:Zy,useValue:!0},{provide:DT,useValue:0},Cp(()=>{let e=F(Ze);return e.get(Bb,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(ba),s=e.get(PL);CT(i,()=>{r(!0)}),e.get(w0).afterPreactivation=()=>(r(!0),s.closed?De(void 0):s),i.initialNavigation()}))})];return sh(2,n)}function ML(){let n=[Cp(()=>{F(ba).setUpLocationChangeListener()}),{provide:DT,useValue:2}];return sh(3,n)}var OL=new Z("");function FL(n){return sh(0,[{provide:OL,useExisting:RL},{provide:ih,useExisting:n}])}function LL(){return sh(8,[vT,{provide:th,useExisting:vT}])}function VL(n){Ao("NgRouterViewTransitions");let e=[{provide:ET,useValue:xL},{provide:wT,useValue:O({skipNextTransition:!!n?.skipInitialTransition},n)}];return sh(9,e)}var UL=[Ns,{provide:ul,useClass:to},ba,hl,{provide:va,useFactory:EY},E0,[]],I0=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[UL,[],{provide:rh,multi:!0,useValue:t},[],r?.errorHandler?{provide:IT,useValue:r.errorHandler}:[],{provide:pl,useValue:r||{}},r?.useHash?SY():CY(),IY(),r?.preloadingStrategy?FL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?TY(r):[],r?.bindToComponentInputs?LL().\u0275providers:[],r?.enableViewTransitions?VL().\u0275providers:[],DY()]}}static forChild(t){return{ngModule:n,providers:[{provide:rh,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ft({type:n});static \u0275inj=dt({})}return n})();function IY(){return{provide:kL,useFactory:()=>{let n=F(yk),e=F(Ve),t=F(pl),r=F(w0),i=F(ul);return t.scrollOffset&&n.setOffset(t.scrollOffset),new bY(i,r,n,e,t)}}}function SY(){return{provide:Mi,useClass:qb}}function CY(){return{provide:Mi,useClass:Fp}}function TY(n){return[n.initialNavigation==="disabled"?ML().\u0275providers:[],n.initialNavigation==="enabledBlocking"?NL().\u0275providers:[]]}var TT=new Z("");function DY(){return[{provide:TT,useFactory:wY},{provide:Tp,multi:!0,useExisting:TT}]}var AY=[],S0=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ft({type:n});static \u0275inj=dt({imports:[I0.forRoot(AY),I0]})};var C0=(s=>(s.CASINO="CASINO",s.FREELANCE_DEV="FREELANCE_DEV",s.WEB_AGENCY="WEB_AGENCY",s.FOODTRUCK="FOODTRUCK",s.FACTORY="FACTORY",s))(C0||{});var ml=(i=>(i.CHAIR="CHAIR",i.SCREEN="SCREEN",i.COFFEE="COFFEE",i.PC="PC",i))(ml||{}),oh=(u=>(u.BUN="BUN",u.STEAK="STEAK",u.CHEESE="CHEESE",u.SALAD="SALAD",u.TOMATO="TOMATO",u.SAUCE="SAUCE",u.ONION="ONION",u.PICKLE="PICKLE",u.BACON="BACON",u))(oh||{});var Ea=[{id:"DEFAULT",name:"VS Code Dark",cost:0,bgClass:"bg-[#1e1e1e]",textClass:"text-slate-200",accentClass:"text-blue-400",cursorClass:"bg-blue-500",borderClass:"border-slate-700",successClass:"text-green-400"},{id:"MATRIX",name:"The Matrix",cost:2500,bgClass:"bg-black",textClass:"text-green-700 font-mono",accentClass:"text-green-400",cursorClass:"bg-green-500",borderClass:"border-green-800",successClass:"text-green-400 neon-glow"},{id:"DRACULA",name:"Dracula",cost:5e3,bgClass:"bg-[#282a36]",textClass:"text-[#f8f8f2]",accentClass:"text-[#bd93f9]",cursorClass:"bg-[#bd93f9]",borderClass:"border-[#6272a4]",successClass:"text-[#ff79c6] drop-shadow-md"},{id:"SOLARIZED",name:"Solarized Light",cost:1e4,bgClass:"bg-[#fdf6e3]",textClass:"text-[#657b83]",accentClass:"text-[#b58900]",cursorClass:"bg-[#d33682]",borderClass:"border-[#93a1a1]",successClass:"text-[#d33682] font-bold"}];var Mn=class n{constructor(e,t){this.auth=e;this.firestore=t;this.authInstance=e,this.user$=zM(this.auth),this.user$.subscribe(r=>{this.currentUserId=r?.uid||null,this.currentUsername=r?.displayName||"Anonyme",r&&(console.log("\u2705 Connect\xE9:",r.uid),this.listenToInvites(r.uid))}),this.listenToPublicEvents()}user$;currentUserId=null;currentUsername="Anonyme";authInstance;publicEvents$=new et(["Bienvenue sur JEUB2 Online \u2022 En attente de gagnants..."]);invites$=new et([]);activeGame$=new et(null);async createMultiplayerGame(e,t){if(!this.currentUserId)throw new Error("Not connected");let r=[{id:0,userId:"BOT",username:"Bot",avatar:"\u{1F916}",hand:[],score:0,bet:0,status:"EMPTY"},{id:1,userId:this.currentUserId,username:e,avatar:"\u{1F451}",hand:[],score:0,bet:0,status:"WAITING_BET"},{id:2,userId:t,username:"Invit\xE9",avatar:"\u{1F464}",hand:[],score:0,bet:0,status:"WAITING_BET"}],i={id:"",hostId:this.currentUserId,hostName:e,guestId:t,guestName:"Invit\xE9",deck:[],hostHand:[],guestHand:[],dealerHand:[],dealerScore:0,hostScore:0,guestScore:0,betAmount:0,winner:null,status:"WAITING",turn:"HOST",seats:r,turnIndex:1,phase:"LOBBY",timestamp:Date.now()};return(await Zc(fr(this.firestore,"active_games"),i)).id}joinGameRoom(e){let t=fi(this.firestore,"active_games",e);r0(t,r=>{if(r.exists()){let i=r.data(),s=re(O({},i),{id:r.id});this.activeGame$.next(s)}else this.activeGame$.next(null)}),this.currentUserId&&jC(t).then(r=>{if(r.exists()){let i=r.data();if(i.guestId===this.currentUserId&&i.seats[2].userId!==this.currentUserId){let s=[...i.seats];s[2].userId=this.currentUserId,s[2].username=this.currentUsername,s[2].avatar="\u{1F464}",s[2].status="READY",$C(t,{seats:s})}}})}async leaveGameRoom(e,t){if(!e)return;let r=fi(this.firestore,"active_games",e);try{await i0(this.firestore,async i=>{let s=await i.get(r);if(!s.exists())return;let a=[...s.data().seats];a[t]&&(a[t].status="LEFT",a[t].avatar="\u{1F6AA}"),i.update(r,{seats:a})})}catch{}this.activeGame$.next(null)}async updatePlayerBet(e,t,r,i=!1){if(!e)return;let s=fi(this.firestore,"active_games",e);try{await i0(this.firestore,async o=>{let a=await o.get(s);if(!a.exists())return;let u=[...a.data().seats];u[t]&&(u[t].bet=r,(!u[t].username||u[t].username==="Invit\xE9")&&(u[t].username=this.currentUsername||"Joueur"),i?u[t].status="READY_TO_PLAY":u[t].status==="READY_TO_PLAY"&&(u[t].status="BETTING")),o.update(s,{seats:u})})}catch{}}async updateGameState(e,t){await $C(fi(this.firestore,"active_games",e),t)}leaveGame(){this.activeGame$.next(null)}async sendInvite(e,t,r,i,s){this.currentUserId&&await Zc(fr(this.firestore,"invites"),{fromId:this.currentUserId,fromName:s,toId:e,gameId:r,amount:i,timestamp:Date.now(),gameType:"BLACKJACK"})}async acceptInvite(e){return e.id&&await BC(fi(this.firestore,"invites",e.id)),e.gameId}async declineInvite(e){e.id&&await BC(fi(this.firestore,"invites",e.id))}listenToInvites(e){let t=fa(fr(this.firestore,"invites"),LF("toId","==",e));r0(t,r=>{let i=r.docs.map(s=>O({id:s.id},s.data()));this.invites$.next(i)})}async getOnlinePlayers(){try{let e=fa(fr(this.firestore,"players"),el("lastUpdated","desc"),Xc(50)),t=await $d(e),r=Date.now();return t.docs.map(i=>O({id:i.id},i.data())).filter(i=>i.username&&i.id!==this.currentUserId&&i.username!=="Entrepreneur"&&r-(i.lastUpdated||0)<120*1e3).map(i=>({id:i.id,username:i.username,title:i.user?.title||"Joueur",money:i.money,avatarId:i.user?.avatarId||"\u{1F464}"}))}catch{return[]}}listenToPublicEvents(){let e=fa(fr(this.firestore,"public_events"),el("timestamp","desc"),Xc(10));r0(e,t=>{let r=t.docs.map(i=>i.data()).map(i=>i.text);r.length>0&&this.publicEvents$.next(r)})}async logPublicEvent(e,t="INFO"){try{await Zc(fr(this.firestore,"public_events"),{text:e,type:t,timestamp:Date.now()})}catch{}}async loginGoogle(){let e=new aI;return e.setCustomParameters({prompt:"select_account"}),await WM(this.auth,e)}async logout(){return await KM(this.auth)}async saveProgress(e){if(!this.currentUserId)return;let t=fi(this.firestore,"players",this.currentUserId);try{await FF(t,{username:e.user?.username||"Anonyme",money:e.money,gems:e.gems||0,day:e.day,timeOfDay:e.timeOfDay,hasCompletedIntro:e.hasCompletedIntro,user:e.user,companies:e.companies,employees:e.employees||[],foodtruckUpgrades:e.foodtruckUpgrades,freelanceUpgrades:e.freelanceUpgrades,foodtruckMastery:e.foodtruckMastery,dailyStats:e.dailyStats,achievements:e.achievements,leaderboardStats:{money:e.money,username:e.user?.username||"Anonyme",creationDate:e.user?.creationDate||Date.now(),stats:e.stats||{}},lastUpdated:Date.now()},{merge:!0})}catch{}}async loadProgress(){if(!this.currentUserId)return null;try{let e=await jC(fi(this.firestore,"players",this.currentUserId));return e.exists()?e.data():null}catch{return null}}getLeaderboard(){let e=fa(fr(this.firestore,"players"),el("leaderboardStats.money","desc"),Xc(50));return Ye($d(e)).pipe(Ue(t=>t.docs.map(r=>O({id:r.id},r.data().leaderboardStats))))}getHoldings(){let e=fa(fr(this.firestore,"holdings"),el("totalValuation","desc"),Xc(20));return Ye($d(e)).pipe(Ue(t=>t.docs.map(r=>O({id:r.id},r.data()))))}async createHolding(e,t){if(!this.currentUserId)return;let r={id:"",name:e,leaderName:t,totalValuation:0,membersCount:1,icon:"\u{1F3E2}"};await Zc(fr(this.firestore,"holdings"),r)}getMarketItems(){let e=fa(fr(this.firestore,"market"),el("timestamp","desc"),Xc(50));return Ye($d(e)).pipe(Ue(t=>t.docs.map(r=>O({id:r.id},r.data()))))}async sellItem(e){await Zc(fr(this.firestore,"market"),e)}async buyItem(e){if(!e.id)return"ERROR";let t=fi(this.firestore,"market",e.id);try{return await i0(this.firestore,async r=>{if(!(await r.get(t)).exists())throw"SOLD";r.delete(t)}),"SUCCESS"}catch{return"SOLD"}}static \u0275fac=function(t){return new(t||n)(ae(Xo),ae(ha))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var xT={DEV_JUNIOR:{role:"DEV_JUNIOR",name:"Stagiaire",baseCost:2e3,costFactor:1.5,baseDailySalary:100,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.2,description:"Code lentement"},DEV_SENIOR:{role:"DEV_SENIOR",name:"Lead Dev",baseCost:1e4,costFactor:1.6,baseDailySalary:800,salaryFactor:1.3,baseEfficiency:4,efficiencyFactor:1.4,description:"Code tr\xE8s vite + Bonus"},COOK:{role:"COOK",name:"Cuisinier",baseCost:500,costFactor:1.55,baseDailySalary:50,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.1,description:"Cuisine"},SERVER:{role:"SERVER",name:"Serveur",baseCost:300,costFactor:1.6,baseDailySalary:40,salaryFactor:1.15,baseEfficiency:5,efficiencyFactor:1.05,description:"Service"},CASHIER:{role:"CASHIER",name:"Caissier",baseCost:200,costFactor:1.4,baseDailySalary:30,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Caisse"},STOCK_MANAGER:{role:"STOCK_MANAGER",name:"Stock",baseCost:500,costFactor:1.4,baseDailySalary:60,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Stock"},WORKER:{role:"WORKER",name:"Ouvrier",baseCost:2e3,costFactor:1.4,baseDailySalary:200,salaryFactor:1.1,baseEfficiency:1,efficiencyFactor:1.1,description:"Prod"},LINE_MANAGER:{role:"LINE_MANAGER",name:"Chef",baseCost:1e4,costFactor:1.5,baseDailySalary:1e3,salaryFactor:1.2,baseEfficiency:1,efficiencyFactor:1.2,description:"Supervision"}},at=class n{constructor(e){this.firebaseService=e;this.loadLocalState(),ms(this.TICK_RATE_MS).subscribe(()=>this.gameLoop()),ms(3e4).subscribe(()=>this.saveToCloud()),this.firebaseService.user$.subscribe(t=>{t?this.loadCloudDataForUser(t):this.isLoading$.next(!1)})}SAVE_KEY="JEUB2_SAVE_V3_ONLINE";TICK_RATE_MS=1e3;HOURS_PER_TICK=1/60;dayEnded$=new Ee;isLoading$=new et(!0);defaultState={user:{username:"Joueur",title:"D\xE9butant",creationDate:Date.now(),avatarId:"\u{1F468}\u200D\u{1F4BC}"},money:2e3,gems:0,totalMoneyEarned:0,hasCompletedIntro:!1,tutoFlags:{foodtruckIntroSeen:!1},day:1,timeOfDay:6,companies:[this.createCompany("3","FOODTRUCK","Burger Truck",!0,0),this.createCompany("1","CASINO","Casino Royal",!1,1e3),this.createCompany("2","FREELANCE_DEV","Agence Web",!1,500),this.createCompany("4","FACTORY","Usine Tesla",!1,2e4)],employees:[],foodtruckMastery:this.initFoodtruckMastery(),foodtruckUpgrades:{grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:["BUN","STEAK"],maxServiceReached:1,hasKeyboard:!1},freelanceUpgrades:{chairLevel:0,screenLevel:0,coffeeLevel:0,pcLevel:0,bossBeaten:0,contractsCompleted:0,ownedThemes:["DEFAULT"],activeThemeId:"DEFAULT"},dailyStats:{revenue:0,expenses:0,customersServed:0,day:1},quests:[],achievements:[],activeEvents:[],lastSavedAt:Date.now(),lastOnlineAt:Date.now(),stats:{foodtruckIncome:0,burgersServed:0,bestServiceCombo:0,fastestBurgerMs:0,freelanceIncome:0,maxWpm:0,totalCharsTyped:0,factoryIncome:0,itemsProduced:0,blackjackIncome:0,handsPlayed:0,highestBet:0,biggestWin:0,totalPlayTimeMinutes:0}};state$=new et(this.defaultState);gameState$=this.state$.asObservable();getMoney(){return this.state$.getValue().money}createCompany(e,t,r,i,s){return{id:e,type:t,name:r,unlocked:i,unlockCost:s,level:1,baseRevenuePerAction:10,revenuePerSecond:0,costPerSecond:0,netProfitPerSecond:0,employees:[]}}async loadCloudDataForUser(e){this.isLoading$.next(!0);let t=await this.firebaseService.loadProgress();if(t){t.user&&(t.user.username==="Entrepreneur"||t.user.username==="Anonyme")&&e.displayName&&(t.user.username=e.displayName,this.updateUsername(e.displayName));let r=this.removeDuplicateCompanies(t.companies||[]),i=re(O(O({},this.defaultState),t),{companies:r});i.stats||(i.stats=this.defaultState.stats),this.state$.next(i),this.saveLocalState()}this.isLoading$.next(!1)}removeDuplicateCompanies(e){let t=new Set,r=e.filter(i=>{let s=t.has(i.id);return t.add(i.id),!s});return this.defaultState.companies.forEach(i=>{r.find(s=>s.id===i.id)||r.push(i)}),r.sort((i,s)=>parseInt(i.id)-parseInt(s.id))}async checkIfUserHasSave(e){return!!await this.firebaseService.loadProgress()}async initializeNewUser(e,t){let r=JSON.parse(JSON.stringify(this.defaultState));r.user={username:t,title:"D\xE9butant",creationDate:Date.now(),avatarId:"\u{1F468}\u200D\u{1F4BC}"},r.lastSavedAt=Date.now(),this.state$.next(r),this.saveLocalState(),await this.firebaseService.saveProgress(r)}unlockCompany(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({companies:r.companies.map(i=>i.id===e?re(O({},i),{unlocked:!0}):i)}),this.saveLocalState(),this.saveToCloud()}}updateUsername(e){let t=this.state$.getValue();this.updateState({user:re(O({},t.user),{username:e})}),this.saveToCloud()}addMoney(e){let t=this.state$.getValue(),r=O({},t.dailyStats||{day:t.day,revenue:0,expenses:0,customersServed:0});e>0&&(r.revenue+=e),this.updateState({money:t.money+e,totalMoneyEarned:e>0?t.totalMoneyEarned+e:t.totalMoneyEarned,dailyStats:r})}spendMoney(e){let t=this.state$.getValue();return t.money>=e?(this.updateState({money:t.money-e}),!0):!1}gameLoop(){let e=this.state$.getValue();if(!e.hasCompletedIntro)return;let t=e.timeOfDay+this.HOURS_PER_TICK,r=e.day,i=O({},e.dailyStats);if(t>=24){t=0;let s=0;e.companies.forEach(o=>{o.employees.forEach(a=>{s+=a.dailySalary})}),s>0&&(this.addMoney(-s),i.expenses+=s),this.dayEnded$.next(re(O({},i),{day:e.day})),r++,i={day:r,revenue:0,expenses:0,customersServed:0}}this.updateState({day:r,timeOfDay:t,dailyStats:i})}completeIntro(){let t=this.state$.getValue().companies.map(r=>r.id==="3"?re(O({},r),{unlocked:!0}):r);this.updateState({hasCompletedIntro:!0,money:2e3,companies:t}),this.saveToCloud()}initFoodtruckMastery(){let e={};return Object.values(oh).forEach(t=>e[t]={level:1,xp:0,xpMax:5}),e}updateState(e){this.state$.next(O(O({},this.state$.getValue()),e))}saveLocalState(){localStorage.setItem(this.SAVE_KEY,JSON.stringify(this.state$.getValue()))}loadLocalState(){let e=localStorage.getItem(this.SAVE_KEY);if(e)try{this.state$.next(O(O({},this.defaultState),JSON.parse(e))),this.isLoading$.next(!1)}catch{}}async saveToCloud(){let e=this.state$.getValue(),t=this.firebaseService.authInstance.currentUser;!t||t.isAnonymous&&!e.hasCompletedIntro||e.user?.username==="Entrepreneur"||e.user?.username==="Anonyme"||await this.firebaseService.saveProgress(e)}getNextHireCost(e,t){let r=this.state$.getValue().companies.find(i=>i.id===e);return r?Math.floor(xT[t].baseCost*Math.pow(1.5,r.employees.filter(i=>i.role===t).length)):0}hireEmployee(e,t){let r=this.getNextHireCost(e,t);if(this.spendMoney(r)){let i=this.state$.getValue(),s={id:Math.random().toString(36).substr(2,9),role:t,hiredAt:Date.now(),dailySalary:xT[t].baseDailySalary,efficiency:1,isPaused:!1};this.updateState({companies:i.companies.map(o=>o.id===e?re(O({},o),{employees:[...o.employees,s]}):o)}),this.saveLocalState()}}buySetupUpgrade(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=O({},r.freelanceUpgrades);switch(e){case"CHAIR":i.chairLevel=1;break;case"SCREEN":i.screenLevel=1;break;case"COFFEE":i.coffeeLevel=1;break;case"PC":i.pcLevel=1;break}this.updateState({freelanceUpgrades:i}),this.saveLocalState()}}buyFreelanceTheme(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({freelanceUpgrades:re(O({},r.freelanceUpgrades),{ownedThemes:[...r.freelanceUpgrades.ownedThemes,e]})}),this.saveLocalState()}}setFreelanceTheme(e){let t=this.state$.getValue();this.updateState({freelanceUpgrades:re(O({},t.freelanceUpgrades),{activeThemeId:e})}),this.saveLocalState()}buyFoodtruckUpgrade(e,t){if(this.spendMoney(t)){let r=this.state$.getValue(),i=O({},r.foodtruckUpgrades);e==="grill"?i.grillLevel++:e==="marketing"?i.marketingLevel++:i.serviceLevel++,this.updateState({foodtruckUpgrades:i}),this.saveLocalState()}}unlockIngredient(e,t){if(this.spendMoney(t)){let r=this.state$.getValue();this.updateState({foodtruckUpgrades:re(O({},r.foodtruckUpgrades),{unlockedIngredients:[...r.foodtruckUpgrades.unlockedIngredients,e]})}),this.saveLocalState()}}unlockKeyboard(e){if(this.spendMoney(e)){let t=this.state$.getValue();this.updateState({foodtruckUpgrades:re(O({},t.foodtruckUpgrades),{hasKeyboard:!0})}),this.saveLocalState()}}buyPrestigeItem(e){let t=this.state$.getValue(),r="PRESTIGE_"+e.id;if(t.achievements.some(i=>i.id===r))return!1;if(this.spendMoney(e.cost)){let i=[...t.achievements,{id:r,name:e.name,icon:e.icon}];return this.updateState({achievements:i}),this.saveToCloud(),!0}return!1}getEmployeeConfig(e){return xT[e]}getTotalEmployeePower(e,t){return this.state$.getValue().companies.find(r=>r.type===e)?.employees.filter(r=>r.role===t).length||0}incrementContractsCompleted(){let e=this.state$.getValue();this.updateState({freelanceUpgrades:re(O({},e.freelanceUpgrades),{contractsCompleted:(e.freelanceUpgrades.contractsCompleted||0)+1})})}incrementBossBeaten(){let e=this.state$.getValue();this.updateState({freelanceUpgrades:re(O({},e.freelanceUpgrades),{bossBeaten:e.freelanceUpgrades.bossBeaten+1})})}toggleEmployeePause(e,t){let r=this.state$.getValue();this.updateState({companies:r.companies.map(i=>i.id===e?re(O({},i),{employees:i.employees.map(s=>s.id===t?re(O({},s),{isPaused:!s.isPaused}):s)}):i)})}updateMaxServiceReached(e){let t=this.state$.getValue();e>t.foodtruckUpgrades.maxServiceReached&&this.updateState({foodtruckUpgrades:re(O({},t.foodtruckUpgrades),{maxServiceReached:e})})}unlockIngredientByService(e){let t=this.state$.getValue();t.foodtruckUpgrades.unlockedIngredients.includes(e)||this.updateState({foodtruckUpgrades:re(O({},t.foodtruckUpgrades),{unlockedIngredients:[...t.foodtruckUpgrades.unlockedIngredients,e]})})}upgradeEmployeeSetup(e,t,r){if(this.spendMoney(r)){let i=this.state$.getValue();this.updateState({companies:i.companies.map(s=>s.id===e?re(O({},s),{employees:s.employees.map(o=>o.id===t?re(O({},o),{efficiency:o.efficiency+1}):o)}):s)})}}updateIngredientMastery(e){this.updateState({foodtruckMastery:e})}incrementCustomersServed(){let e=this.state$.getValue(),t=O({},e.dailyStats);t.customersServed++,this.updateState({dailyStats:t})}setTimeOfDay(e){this.updateState({timeOfDay:e})}logoutAndClear(){localStorage.removeItem(this.SAVE_KEY),this.firebaseService.logout().then(()=>window.location.reload())}hardResetGame(){confirm("Tout effacer ?")&&(localStorage.removeItem(this.SAVE_KEY),window.location.reload())}connectOnline(){}static \u0275fac=function(t){return new(t||n)(ae(Mn))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wt=class n{audioCtx;isMuted=!1;noiseBuffer;constructor(){let e=window.AudioContext||window.webkitAudioContext;this.audioCtx=new e,this.noiseBuffer=this.createNoiseBuffer(1)}resume(){this.audioCtx.state==="suspended"&&this.audioCtx.resume()}playTone(e,t,r,i,s=0,o=0){if(this.isMuted)return;this.resume();let a=this.audioCtx.currentTime,c=this.audioCtx.createOscillator(),u=this.audioCtx.createGain();if(c.type=t,c.frequency.setValueAtTime(e,a),c.detune.value=s,u.gain.setValueAtTime(i,a),u.gain.exponentialRampToValueAtTime(.001,a+r),o>0){let d=this.audioCtx.createBiquadFilter();d.type="lowpass",d.frequency.setValueAtTime(o,a),c.connect(d).connect(u).connect(this.audioCtx.destination)}else c.connect(u).connect(this.audioCtx.destination);c.start(a),c.stop(a+r)}playNoise(e,t,r,i){if(this.isMuted)return;this.resume();let s=this.audioCtx.currentTime,o=this.audioCtx.createBufferSource();o.buffer=this.noiseBuffer;let a=this.audioCtx.createBiquadFilter();a.type=t,a.frequency.setValueAtTime(r,s);let c=this.audioCtx.createGain();c.gain.setValueAtTime(i,s),c.gain.exponentialRampToValueAtTime(.001,s+e),o.connect(a).connect(c).connect(this.audioCtx.destination),o.start(s),o.stop(s+e)}playCash(){this.playTone(1200,"square",.1,.1),setTimeout(()=>this.playTone(1600,"square",.1,.1),80)}playSuccess(){[523,659,783,1046].forEach((e,t)=>{setTimeout(()=>this.playTone(e,"sine",.2,.1),t*100)})}playError(){this.playTone(150,"sawtooth",.3,.2)}playPop(){this.playTone(600,"sine",.1,.1)}playSoftPop(){this.playTone(400,"sine",.1,.05)}startRainAmbience(){}stopRainAmbience(){}playTrashInBin(){this.playNoise(.2,"lowpass",200,.5)}playPaperSound(){this.playNoise(.1,"highpass",1e3,.3)}playLeafSound(){this.playNoise(.15,"bandpass",500,.2)}playCanSound(){this.playNoise(.1,"highpass",2e3,.4)}playScratchSound(){this.playNoise(.1,"bandpass",800,.3)}playSteakSound(){this.playNoise(.3,"lowpass",400,.4)}playSaladSound(){this.playNoise(.1,"highpass",1500,.3)}getVariation(){return Math.random()*50-25}playKeystroke(){this.playRandomKey()}playRandomKey(){this.playTone(300,"triangle",.05,.1,this.getVariation())}playSpace(){this.playTone(150,"square",.1,.15,this.getVariation())}createNoiseBuffer(e){let t=this.audioCtx.sampleRate*e,r=this.audioCtx.createBuffer(1,t,this.audioCtx.sampleRate),i=r.getChannelData(0);for(let s=0;s<t;s++)i[s]=Math.random()*2-1;return r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var AT;function RY(){if(AT==null){let n=typeof document<"u"?document.head:null;AT=!!(n&&(n.createShadowRoot||n.attachShadow))}return AT}function T0(n){if(RY()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function ah(n){return n.composedPath?n.composedPath()[0]:n.target}function BL(n){return n.buttons===0||n.detail===0}function jL(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function $L(n,e=0){return kY(n)?Number(n):arguments.length===2?e:0}function kY(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function ns(n){return n instanceof en?n.nativeElement:n}var D0=new WeakMap,HL=(()=>{class n{_appRef;_injector=F(Ze);_environmentInjector=F(bt);load(t){let r=this._appRef=this._appRef||this._injector.get(ir),i=D0.get(r);i||(i={loaders:new Set,refs:[]},D0.set(r,i),r.onDestroy(()=>{D0.get(r)?.refs.forEach(s=>s.destroy()),D0.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(ik(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var RT;try{RT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{RT=!1}var GL=(()=>{class n{_platformId=F(xi);isBrowser=this._platformId?vk(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||RT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var PY=new Z("cdk-dir-doc",{providedIn:"root",factory:()=>F(nt)}),NY=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function MY(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?NY.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var zL=(()=>{class n{get value(){return this.valueSignal()}valueSignal=Xt("ltr");change=new ke;constructor(){let t=F(PY,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(MY(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var OY=20,qL=(()=>{class n{_platform=F(GL);_listeners;_viewportSize;_change=new Ee;_document=F(nt);constructor(){let t=F(Ve),r=F(xn).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect(),o=-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:o,left:a}}change(t=OY){return t>0?this._change.pipe(J_(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var WL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ft({type:n});static \u0275inj=dt({})}return n})();function NT(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?QL(n,e):(r==="input"||r==="select"||r==="textarea")&&YL(n,e),KL("canvas",n,e,QL),KL("input, textarea, select",n,e,YL),e}function KL(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}var FY=0;function YL(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${FY++}`)}function QL(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function BT(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function MT(n,e,t){let{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function LY(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,s=e.top+e.height>n.bottom;return t||r||i||s}function uh(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function JL(n,e,t,r){let{top:i,right:s,bottom:o,left:a,width:c,height:u}=n,d=c*e,p=u*e;return r>i-p&&r<o+p&&t>a-d&&t<s+d}var x0=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:BT(t)})})}handleScroll(e){let t=ah(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,s,o;if(t===this._document){let u=this.getViewportScrollPosition();s=u.top,o=u.left}else s=t.scrollTop,o=t.scrollLeft;let a=i.top-s,c=i.left-o;return this.positions.forEach((u,d)=>{u.clientRect&&t!==d&&t.contains(d)&&uh(u.clientRect,a,c)}),i.top=s,i.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function cV(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function jT(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function _l(n,e){let t=e?"":"none";jT(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function ZL(n,e,t){jT(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function A0(n,e){return e&&e!="none"?n+" "+e:n}function XL(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=dh(e.left,e.top)}function dh(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function eV(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function VY(n){let e=getComputedStyle(n),t=kT(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),s=kT(e,"transition-duration"),o=kT(e,"transition-delay");return eV(s[i])+eV(o[i])}function kT(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var UY=new Set(["position"]),OT=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,s,o,a,c,u,d){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=u,this._renderer=d}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),tV(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return VY(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let s=e.matchSize?this._initialDomRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=cV(o,this._document),this._previewEmbeddedView=o,e.matchSize?XL(i,s):i.style.transform=dh(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=NT(this._rootElement),XL(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return jT(i.style,{"pointer-events":"none",margin:tV(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},UY),_l(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}};function tV(n){return"showPopover"in n}var BY={passive:!0},nV={passive:!1},jY={passive:!1,capture:!0},$Y=800,rV="cdk-drag-placeholder",iV=new Set(["position"]),FT=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Xt(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new Ee;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Ke.EMPTY;_pointerUpSubscription=Ke.EMPTY;_scrollSubscription=Ke.EMPTY;_resizeSubscription=Ke.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>_l(t,e)))}_disabled=!1;beforeStarted=new Ee;started=new Ee;released=new Ee;ended=new Ee;entered=new Ee;exited=new Ee;dropped=new Ee;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,s,o,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new x0(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>ns(r)),this._handles.forEach(r=>_l(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=ns(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,nV),r.listen(t,"touchstart",this._pointerDown,BY),r.listen(t,"dragstart",this._nativeDragStart,nV)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?ns(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&LY(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let s=this._activeTransform.x,o=this._activeTransform.y,a=s+r,c=o+i;this._rootElement.style.transform=dh(a,c),this._activeTransform={x:a,y:c},this._passiveTransform={x:a,y:c}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),_l(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),_l(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),s=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+s>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),c=this._dropContainer;if(!a){this._endDragSequence(e);return}(!c||!c.isDragging()&&!c.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=r.x-i.x+this._passiveTransform.x,s.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){ch(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",HY,jY)}),r){let i=this._rootElement,s=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");s.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new OT(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,t)),ZL(i,!1,iV),this._document.body.appendChild(s.replaceChild(o,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=ch(t),s=!i&&t.button!==0,o=this._rootElement,a=ah(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+$Y>Date.now(),u=i?jL(t):BL(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||s||c||u)return;if(this._handles.length){let v=o.style;this._rootElementTapHighlight=v.webkitTapHighlightColor||"",v.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(v=>this._updateOnScroll(v)),this._boundaryElement&&(this._boundaryRect=BT(this._boundaryElement));let d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){ZL(this._rootElement,!0,iV),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{let o=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(o+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(s,this._dropContainer,a),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&ah(a)===this._preview.element&&a.propertyName==="transform")&&(o(),r(),clearTimeout(s))},s=setTimeout(i,t*1.5),o=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=cV(this._placeholderRef,this._document)):r=NT(this._rootElement),r.style.pointerEvents="none",r.classList.add(rV),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=ch(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,u=o.pageY-s.top-a.top;return{x:s.left-e.left+c,y:s.top-e.top+u}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=ch(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:u}=this._getPreviewRect(),d=a.top+o,p=a.bottom-(u-o),v=a.left+s,b=a.right-(c-s);r=sV(r,v,b),i=sV(i,d,p)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,_l(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=dh(e*r,t*r),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=A0(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=dh(e,t);this._preview.setTransform(A0(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:ch(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=ah(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&uh(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=T0(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return ns(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,r){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let i=this._anchor??=NT(this._placeholder);i.classList.remove(rV),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):ns(t.element).appendChild(i)}}};function sV(n,e,t){return Math.max(e,Math.min(t,n))}function ch(n){return n.type[0]==="t"}function HY(n){n.preventDefault()}function lV(n,e,t){let r=oV(e,n.length-1),i=oV(t,n.length-1);if(r===i)return;let s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}function oV(n,e){return Math.max(0,Math.min(e,n))}var R0=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(M=>M.drag===e),u=s[o],d=s[c].clientRect,p=u.clientRect,v=c>o?1:-1,b=this._getItemOffsetPx(d,p,v),S=this._getSiblingOffsetPx(c,s,v),P=s.slice();return lV(s,c,o),s.forEach((M,H)=>{if(P[H]===M)return;let J=M.drag===e,ie=J?b:S,fe=J?e.getPlaceholderElement():M.drag.getRootElement();M.offset+=ie;let Xe=Math.round(M.offset*(1/M.drag.scale));a?(fe.style.transform=A0(`translate3d(${Xe}px, 0, 0)`,M.initialTransform),uh(M.clientRect,0,ie)):(fe.style.transform=A0(`translate3d(0, ${Xe}px, 0)`,M.initialTransform),uh(M.clientRect,ie,0))}),this._previousSwap.overlaps=MT(p,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:o}}enter(e,t,r,i){let s=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement(),u=o[s];if(u===e&&(u=o[s+1]),!u&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=o[0]),a>-1&&o.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){let d=u.getRootElement();d.parentElement.insertBefore(c,d),o.splice(s,0,e)}else this._element.appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{uh(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:BT(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=i?t.left-e.left:t.top-e.top;return r===-1&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=t[e].clientRect,o=t[e+r*-1],a=s[i?"width":"height"]*r;if(o){let c=i?"left":"top",u=i?"right":"bottom";r===-1?a-=o.clientRect[c]-s[u]:a+=s[c]-o.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}else{let o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(i){let u=s?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return s?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,e)?-1:o}},LT=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let s=this._getItemIndexFromPointerPosition(e,t,r),o=this._previousSwap;if(s===-1||this._activeItems[s]===e)return null;let a=this._activeItems[s];if(o.drag===a&&o.overlaps&&o.deltaX===i.x&&o.deltaY===i.y)return null;let c=this.getItemIndex(e),u=e.getPlaceholderElement(),d=a.getRootElement();s>c?d.after(u):d.before(u),lV(this._activeItems,c,s);let p=this._getRootNode().elementFromPoint(t,r);return o.deltaX=i.x,o.deltaY=i.y,o.drag=a,o.overlaps=d===p||d.contains(p),{previousIndex:c,currentIndex:s}}enter(e,t,r,i){let s=this._activeItems.indexOf(e);s>-1&&this._activeItems.splice(s,1);let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;o===-1&&(o=this._getClosestItemIndexToPointer(e,t,r));let a=this._activeItems[o];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(o,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,s]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==s&&(s===null?e.appendChild(i):s.parentNode===e&&e.insertBefore(i,s))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),s=i?this._activeItems.findIndex(o=>{let a=o.getRootElement();return i===a||a.contains(i)}):-1;return s===-1||!this._sortPredicate(s,e)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=T0(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){let a=this._activeItems[o];if(a!==e){let{x:c,y:u}=a.getRootElement().getBoundingClientRect(),d=Math.hypot(t-c,r-u);d<i&&(i=d,s=o)}}return s}},aV=.05,uV=.05,gr=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(gr||{}),In=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(In||{}),VT=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new Ee;entered=new Ee;exited=new Ee;dropped=new Ee;sorted=new Ee;receivingStarted=new Ee;receivingStopped=new Ee;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Ke.EMPTY;_verticalScrollDirection=gr.NONE;_horizontalScrollDirection=In.NONE;_scrollNode;_stopScrollTimers=new Ee;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s;let o=this.element=ns(e);this._document=r,this.withOrientation("vertical").withElementContainer(o),t.registerDropContainer(this),this._parentPositions=new x0(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof R0&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new LT(this._document,this._dragDropRegistry);else{let t=new R0(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=ns(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!JL(this._domRect,aV,t,r))return;let s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=gr.NONE,s=In.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||JL(o.clientRect,aV,e,t)&&([i,s]=GY(a,o.clientRect,this._direction,e,t),(i||s)&&(r=a))}),!i&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};i=dV(c,t),s=hV(c,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),ms(0,Jh).pipe(Ur(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===gr.UP?e.scrollBy(0,-t):this._verticalScrollDirection===gr.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===In.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===In.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&MT(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!MT(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=T0(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function dV(n,e){let{top:t,bottom:r,height:i}=n,s=i*uV;return e>=t-s&&e<=t+s?gr.UP:e>=r-s&&e<=r+s?gr.DOWN:gr.NONE}function hV(n,e){let{left:t,right:r,width:i}=n,s=i*uV;return e>=t-s&&e<=t+s?In.LEFT:e>=r-s&&e<=r+s?In.RIGHT:In.NONE}function GY(n,e,t,r,i){let s=dV(e,i),o=hV(e,r),a=gr.NONE,c=In.NONE;if(s){let u=n.scrollTop;s===gr.UP?u>0&&(a=gr.UP):n.scrollHeight-u>n.clientHeight&&(a=gr.DOWN)}if(o){let u=n.scrollLeft;t==="rtl"?o===In.RIGHT?u<0&&(c=In.RIGHT):n.scrollWidth+u>n.clientWidth&&(c=In.LEFT):o===In.LEFT?u>0&&(c=In.LEFT):n.scrollWidth-u>n.clientWidth&&(c=In.RIGHT)}return[a,c]}var lh={capture:!0},PT={passive:!1,capture:!0},zY=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),fV=(()=>{class n{_ngZone=F(Ve);_document=F(nt);_styleLoader=F(HL);_renderer=F(xn).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new Ee;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Xt([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new Ee;pointerUp=new Ee;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,PT)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(zY),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),s=a=>this.pointerUp.next(a),o=[["scroll",a=>this._scroll.next(a),lh],["selectstart",this._preventDefaultWhileDragging,PT]];i?o.push(["touchend",s,lh],["touchcancel",s,lh]):o.push(["mouseup",s,lh]),i||o.push(["mousemove",a=>this.pointerMove.next(a),PT]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=o.map(([a,c,u])=>this._renderer.listen(this._document,a,c,u))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new _e(i=>this._ngZone.runOutsideAngular(()=>{let s=this._renderer.listen(t,"scroll",o=>{this._activeDragInstances().length&&i.next(o)},lh);return()=>{s()}}))),_f(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qY={dragStartThreshold:5,pointerDirectionChangeThreshold:5},pV=(()=>{class n{_document=F(nt);_ngZone=F(Ve);_viewportRuler=F(qL);_dragDropRegistry=F(fV);_renderer=F(xn).createRenderer(null,null);constructor(){}createDrag(t,r=qY){return new FT(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new VT(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UT=new Z("CDK_DRAG_PARENT");var WY=new Z("CdkDragHandle");var KY=new Z("CDK_DRAG_CONFIG"),YY=new Z("CdkDropList"),mV=(()=>{class n{element=F(en);dropContainer=F(YY,{optional:!0,skipSelf:!0});_ngZone=F(Ve);_viewContainerRef=F(Un);_dir=F(zL,{optional:!0});_changeDetectorRef=F(Dt);_selfHandle=F(WY,{optional:!0,self:!0});_parentDrag=F(UT,{optional:!0,skipSelf:!0});_dragDropRegistry=F(fV);_destroyed=new Ee;_handles=new et([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new ke;released=new ke;ended=new ke;entered=new ke;exited=new ke;dropped=new ke;moved=new _e(t=>{let r=this._dragRef.moved.pipe(Ue(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=F(Ze);constructor(){let t=this.dropContainer,r=F(KY,{optional:!0}),i=F(pV);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(Ur(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Ro(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):ns(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:$L(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(st(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:u,previewContainer:d}=t;this.disabled=c??!1,this.dragStartDelay=i||0,this.lockAxis=r||null,s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.pipe(Qt(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Tn(t=>_f(...t.map(r=>r._stateChanges.pipe(Va(r))))),Ur(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Pt({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&le("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Mo],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Vb]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Ni([{provide:UT,useExisting:n}]),Tr]})}return n})();var QY=new Z("CdkDragPlaceholder"),gV=(()=>{class n{templateRef=F(Cr);_drag=F(UT,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Pt({type:n,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[Ni([{provide:QY,useExisting:n}])]})}return n})();var _V=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ft({type:n});static \u0275inj=dt({providers:[pV],imports:[WL]})}return n})();var ZY=["binRef"];function XY(n,e){if(n&1&&(f(0,"header",10)(1,"div",11)(2,"div",12),y(3,"P"),m(),f(4,"h1",13),y(5,"JEUB2 "),f(6,"span",14),y(7,"Prologue"),m()()(),f(8,"div",15)(9,"span",16),y(10),oe(11,"number"),m()()()),n&2){let t=D();_(10),G("",Be(11,1,t.currentMoney,"1.0-0")," \u20AC")}}function eQ(n,e){if(n&1&&W(0,"div",17),n&2){let t=e.$implicit;we("left",t.x,"px")("top",t.y,"px")("background-color",t.color)("opacity",t.life)("transform","scale("+t.life+")")}}function tQ(n,e){if(n&1){let t=ee();f(0,"div",28)(1,"button",29),U("click",function(){j(t);let i=D(2);return $(i.startPark())}),y(2," Commencer \xE0 chercher... \u{1F5D1}\uFE0F "),m()()}}function nQ(n,e){if(n&1&&(f(0,"div",18),W(1,"div",19)(2,"div",20),f(3,"div",21)(4,"div",22),y(5,"\u{1F976}"),m()(),f(6,"div",23)(7,"div",24),y(8,"Moi (Gal\xE9rien)"),m(),f(9,"div",25),y(10),f(11,"span",26),y(12,"|"),m()(),V(13,tQ,3,0,"div",27),m()()),n&2){let t=D();_(10),te(t.displayedDialogue),_(3),w("ngIf",t.isTextFinished)}}function rQ(n,e){n&1&&W(0,"div")}function iQ(n,e){if(n&1){let t=ee();f(0,"div",39),U("cdkDragStarted",function(){let i=j(t).$implicit,s=D(2);return $(s.onDragStart(i))})("cdkDragEnded",function(i){let s=j(t).$implicit,o=D(2);return $(o.onDragEnded(i,s))}),W(1,"div",40),f(2,"div",41),y(3),m(),V(4,rQ,1,0,"div",42),m()}if(n&2){let t=e.$implicit,r=D(2);we("left",t.x,"%")("top",t.y,"%")("transform","rotate("+t.rotation+"deg) scale("+t.scale+")"),le("floating-anim",!r.isDragging),_(3),te(r.getIcon(t.type))}}function sQ(n,e){if(n&1){let t=ee();f(0,"div",43)(1,"button",44),U("click",function(){j(t);let i=D(2);return $(i.goToShop())}),y(2,"Aller au Tabac \u27A1\uFE0F"),m()()}}function oQ(n,e){if(n&1&&(f(0,"div",30),W(1,"div",19)(2,"div",20),f(3,"div",31,0)(5,"div",32)(6,"div",33)(7,"span",34),y(8,"\u{1F5D1}\uFE0F"),m()()(),f(9,"span",35),y(10,"Jette ici !"),m()(),f(11,"div",36),V(12,iQ,5,9,"div",37),m(),V(13,sQ,3,0,"div",38),m()),n&2){let t=D();_(3),le("bin-active",t.isHoveringBin)("bin-eating",t.isEating),_(9),w("ngForOf",t.trashItems)("ngForTrackBy",t.trackByItemId),_(),w("ngIf",t.currentMoney>=100)}}function aQ(n,e){if(n&1){let t=ee();f(0,"div",28)(1,"button",29),U("click",function(){j(t);let i=D(2);return $(i.buyTicket())}),f(2,"span",48),y(3,"\u{1F3AB}"),m(),y(4," Acheter un ticket (100\u20AC) "),m()()}}function cQ(n,e){if(n&1&&(f(0,"div",45)(1,"div",46)(2,"div",47),y(3,"LE BALTO"),m()(),f(4,"div",21)(5,"div",22),y(6,"\u{1F9D4}\u{1F3FB}\u200D\u2642\uFE0F"),m()(),f(7,"div",23)(8,"div",24),y(9,"G\xE9rard (Patron)"),m(),f(10,"div",25),y(11),f(12,"span",26),y(13,"|"),m()(),V(14,aQ,5,0,"div",27),m()()),n&2){let t=D();_(11),te(t.displayedDialogue),_(3),w("ngIf",t.isTextFinished)}}function lQ(n,e){n&1&&(f(0,"span",65),y(1,"$"),m())}function uQ(n,e){if(n&1){let t=ee();f(0,"div",63),U("mouseenter",function(){let i=j(t).$implicit,s=D(2);return $(s.scratch(i))}),V(1,lQ,2,0,"span",64),m()}if(n&2){let t=e.$implicit,r=D(2);le("scratched",r.scratched[t]),_(),w("ngIf",!r.scratched[t])}}function dQ(n,e){if(n&1){let t=ee();f(0,"button",66),U("click",function(){j(t);let i=D(2);return $(i.goToOutro())}),y(1," ENCAISSER LE GAIN \u{1F4B8} "),m()}}function hQ(n,e){if(n&1&&(f(0,"div",49)(1,"div",50)(2,"div",51)(3,"div",52),y(4,"\u{1F48E} DIAMOND CASH \u{1F48E}"),m(),f(5,"div",53),y(6,"Grattez pour gagner"),m()(),f(7,"div",54)(8,"div",55)(9,"div",56)(10,"div",57),y(11,"10 000 \u20AC"),m(),f(12,"div",58),y(13,"\u{1F389} JACKPOT \u{1F389}"),m()(),f(14,"div",59),V(15,uQ,2,3,"div",60),m()()(),f(16,"div",61),V(17,dQ,2,0,"button",62),m()()()),n&2){let t=D();_(15),w("ngForOf",t.scratchGrid),_(2),w("ngIf",t.isRevealed)}}function fQ(n,e){if(n&1){let t=ee();f(0,"div",28)(1,"button",70),U("click",function(){j(t);let i=D(2);return $(i.finishIntro())}),y(2," \u{1F354} ACHETER LE FOODTRUCK "),m()()}}function pQ(n,e){if(n&1&&(f(0,"div",67)(1,"div",21)(2,"div",22),y(3,"\u{1F911}"),m()(),f(4,"div",68)(5,"div",24),y(6,"Moi (Nouveau Riche)"),m(),f(7,"div",69),y(8),f(9,"span",26),y(10,"|"),m()(),V(11,fQ,3,0,"div",27),m()()),n&2){let t=D();_(8),te(t.displayedDialogue),_(3),w("ngIf",t.isTextFinished)}}var k0=class n{constructor(e,t,r){this.gameState=e;this.sound=t;this.cdr=r}binRef;phase="INTRO_DIALOGUE";currentMoney=0;particles=[];trashItems=[];isHoveringBin=!1;isEating=!1;isDragging=!1;currentDialogueText="";displayedDialogue="";isTextFinished=!1;typeWriterInterval;introText="Il pleut encore... J'en ai marre de cette vie de gal\xE8re. J'ai froid, j'ai faim. Si seulement je pouvais trouver 100 balles pour tenter ma chance au loto...";shopText="Alors mon petit... Une sale journ\xE9e hein ? T'es tout tremp\xE9. T'as enfin r\xE9uni les 100 balles ? Allez, prends ce ticket, c'est ta chance.";outroText="C'est... C'est pas possible... 10.000 EUROS ?! J'AI GAGN\xC9 ! Adieu la rue ! Je sais ce que je vais faire... Je vais racheter ce vieux Foodtruck abandonn\xE9 au coin de la rue. C'est le d\xE9but de mon empire !";scratchGrid=Array.from({length:60},(e,t)=>t);scratched=new Array(60).fill(!1);isRevealed=!1;ngOnInit(){this.sound.startRainAmbience(),this.startDialogue(this.introText)}ngOnDestroy(){this.sound.stopRainAmbience(),this.typeWriterInterval&&clearInterval(this.typeWriterInterval)}startDialogue(e){this.currentDialogueText=e,this.displayedDialogue="",this.isTextFinished=!1;let t=0;this.typeWriterInterval&&clearInterval(this.typeWriterInterval),this.typeWriterInterval=setInterval(()=>{t<this.currentDialogueText.length?(this.displayedDialogue+=this.currentDialogueText.charAt(t),t%3===0&&this.sound.playKeystroke(),t++,this.cdr.detectChanges()):(clearInterval(this.typeWriterInterval),this.isTextFinished=!0,this.cdr.detectChanges())},30)}startPark(){this.phase="PARK",this.spawnTrashWave()}goToShop(){this.phase="SHOP",this.sound.stopRainAmbience(),setTimeout(()=>this.startDialogue(this.shopText),800)}buyTicket(){this.currentMoney=0,this.phase="SCRATCH",this.sound.playPop()}goToOutro(){this.phase="OUTRO_DIALOGUE",this.sound.playSuccess(),setTimeout(()=>this.startDialogue(this.outroText),800)}finishIntro(){this.gameState.completeIntro()}trackByItemId(e,t){return t.id}spawnTrashWave(){this.trashItems=[];for(let e=0;e<40;e++)this.trashItems.push({id:Math.random(),x:Math.random()*80+10,y:Math.random()*70+10,type:Math.random()>.6?"can":Math.random()>.3?"paper":"leaf",rotation:Math.random()*360,scale:1,delay:Math.random()*2})}onDragStart(e){this.isDragging=!0,e.type==="can"?this.sound.playCanSound():e.type==="paper"?this.sound.playPaperSound():this.sound.playLeafSound()}onDragEnded(e,t){this.isDragging=!1,this.isHoveringBin=!1;let r=e.dropPoint,i=this.binRef.nativeElement.getBoundingClientRect();r.x>=i.left-50&&r.x<=i.right+50&&r.y>=i.top-50&&r.y<=i.bottom+50?this.cleanTrash(t):e.source.reset()}cleanTrash(e){this.trashItems=this.trashItems.filter(r=>r.id!==e.id),this.sound.playTrashInBin(),this.isEating=!0,setTimeout(()=>this.isEating=!1,200);let t=this.binRef.nativeElement.getBoundingClientRect();this.spawnParticles(t.left+t.width/2,t.top+t.height/2,"#22c55e"),this.currentMoney+=10,this.trashItems.length===0&&this.currentMoney<100&&setTimeout(()=>this.spawnTrashWave(),500)}getIcon(e){return e==="can"?"\u{1F96B}":e==="paper"?"\u{1F961}":"\u{1F342}"}scratch(e){this.scratched[e]||(this.scratched[e]=!0,Math.random()>.5&&this.sound.playScratchSound(),this.scratched.filter(t=>t).length>36&&!this.isRevealed&&(this.isRevealed=!0,this.sound.playSuccess(),this.spawnConfetti()))}spawnParticles(e,t,r){for(let i=0;i<8;i++)this.particles.push({id:Math.random(),x:e,y:t,color:r,speedX:(Math.random()-.5)*15,speedY:(Math.random()-1)*15,life:1});this.animateParticles()}spawnConfetti(){for(let e=0;e<50;e++)this.particles.push({id:Math.random(),x:window.innerWidth/2,y:window.innerHeight/2,color:["#f00","#0f0","#00f","#ff0"][Math.floor(Math.random()*4)],speedX:(Math.random()-.5)*25,speedY:(Math.random()-.5)*25,life:1});this.animateParticles()}animateParticles(){this.particles.length!==0&&(this.particles.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,e.life-=.03}),this.particles=this.particles.filter(e=>e.life>0),this.particles.length>0&&requestAnimationFrame(()=>this.animateParticles()))}static \u0275fac=function(t){return new(t||n)(X(at),X(Wt),X(Dt))};static \u0275cmp=qe({type:n,selectors:[["app-intro-game"]],viewQuery:function(t,r){if(t&1&&Pi(ZY,5),t&2){let i;Jr(i=Zr())&&(r.binRef=i.first)}},standalone:!1,decls:9,vars:7,consts:[["binRef",""],[1,"intro-container"],["class","intro-header",4,"ngIf"],[1,"fx-layer"],["class","particle",3,"left","top","background-color","opacity","transform",4,"ngFor","ngForOf"],["class","scene dialogue-scene fadeIn",4,"ngIf"],["class","scene park-scene fadeIn",4,"ngIf"],["class","scene shop-scene fadeIn",4,"ngIf"],["class","scene scratch-scene fadeIn",4,"ngIf"],["class","scene dialogue-scene fadeIn outro-bg",4,"ngIf"],[1,"intro-header"],[1,"flex","items-center","gap-3"],[1,"logo-box"],[1,"text-xl","font-bold","tracking-tight","text-white"],[1,"text-xs","font-normal","text-slate-400","ml-2"],[1,"money-badge"],[1,"text-green-400","font-bold","text-xl","mr-2"],[1,"particle"],[1,"scene","dialogue-scene","fadeIn"],[1,"rain-layer","layer-1"],[1,"rain-layer","layer-2"],[1,"character-container","slide-up"],[1,"character-emoji"],[1,"dialogue-box-container"],[1,"speaker-name"],[1,"dialogue-text"],[1,"cursor"],["class","dialogue-actions",4,"ngIf"],[1,"dialogue-actions"],[1,"action-btn",3,"click"],[1,"scene","park-scene","fadeIn"],[1,"bin-container"],[1,"bin-body"],[1,"bin-base"],[1,"bin-emoji"],[1,"bin-label"],[1,"trash-zone"],["class","trash-item","cdkDrag","",3,"floating-anim","left","top","transform","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf","ngForTrackBy"],["class","next-step-container",4,"ngIf"],["cdkDrag","",1,"trash-item",3,"cdkDragStarted","cdkDragEnded"],[1,"trash-shadow"],[1,"trash-content"],[4,"cdkDragPlaceholder"],[1,"next-step-container"],[1,"next-btn","pulse-glow",3,"click"],[1,"scene","shop-scene","fadeIn"],[1,"shop-bg"],[1,"neon-sign"],[1,"icon"],[1,"scene","scratch-scene","fadeIn"],[1,"ticket","zoom-in"],[1,"ticket-top"],[1,"ticket-logo"],[1,"ticket-sub"],[1,"scratch-zone-border"],[1,"scratch-zone"],[1,"winner-content"],[1,"win-amount"],[1,"win-emoji"],[1,"scratch-cover"],["class","scratch-pixel",3,"scratched","mouseenter",4,"ngFor","ngForOf"],[1,"ticket-footer"],["class","claim-btn pulse",3,"click",4,"ngIf"],[1,"scratch-pixel",3,"mouseenter"],["class","pattern",4,"ngIf"],[1,"pattern"],[1,"claim-btn","pulse",3,"click"],[1,"scene","dialogue-scene","fadeIn","outro-bg"],[1,"dialogue-box-container","light-theme"],[1,"dialogue-text","text-black"],[1,"action-btn","gold-btn",3,"click"]],template:function(t,r){t&1&&(f(0,"div",1),V(1,XY,12,4,"header",2),f(2,"div",3),V(3,eQ,1,10,"div",4),m(),V(4,nQ,14,2,"div",5)(5,oQ,14,7,"div",6)(6,cQ,15,2,"div",7)(7,hQ,18,2,"div",8)(8,pQ,12,2,"div",9),m()),t&2&&(_(),w("ngIf",r.phase==="PARK"||r.phase==="SCRATCH"),_(2),w("ngForOf",r.particles),_(),w("ngIf",r.phase==="INTRO_DIALOGUE"),_(),w("ngIf",r.phase==="PARK"),_(),w("ngIf",r.phase==="SHOP"),_(),w("ngIf",r.phase==="SCRATCH"),_(),w("ngIf",r.phase==="OUTRO_DIALOGUE"))},dependencies:[Nt,xt,mV,gV,Bt],styles:[`.intro-container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;background:#0f172a;display:flex;flex-direction:column;font-family:Segoe UI,sans-serif;-webkit-user-select:none;user-select:none;position:absolute;top:0;left:0}.intro-header[_ngcontent-%COMP%]{background:#0f172ae6;border-bottom:1px solid #1e293b;height:64px;display:flex;justify-content:space-between;align-items:center;padding:0 24px;z-index:50}.logo-box[_ngcontent-%COMP%]{width:32px;height:32px;background:#2563eb;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}.money-badge[_ngcontent-%COMP%]{background:#020617;padding:8px 20px;border-radius:99px;border:1px solid rgba(22,163,74,.3)}.scene[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;height:100%;overflow:hidden}.dialogue-scene[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;background:#0f172a}.character-container[_ngcontent-%COMP%]{position:relative;z-index:10;margin-bottom:-10px}.character-emoji[_ngcontent-%COMP%]{font-size:12rem;filter:drop-shadow(0 0 30px rgba(0,0,0,.5))}.dialogue-box-container[_ngcontent-%COMP%]{width:90%;max-width:800px;margin-bottom:40px;z-index:20;background:#0f172af2;border:2px solid #475569;border-radius:8px;padding:24px;box-shadow:0 20px 50px #0009;position:relative;min-height:160px;display:flex;flex-direction:column}.outro-bg[_ngcontent-%COMP%]{background:radial-gradient(circle at center,#fef3c7,#fff7ed)}.light-theme[_ngcontent-%COMP%]{background:#fffffff2;border-color:#fbbf24;box-shadow:0 20px 50px #d9770633}.light-theme[_ngcontent-%COMP%]   .dialogue-text[_ngcontent-%COMP%]{color:#1e293b;font-weight:700}.speaker-name[_ngcontent-%COMP%]{position:absolute;top:-16px;left:24px;background:#d97706;color:#fff;padding:4px 16px;font-weight:700;font-size:.9rem;border-radius:4px;text-transform:uppercase}.dialogue-text[_ngcontent-%COMP%]{font-family:monospace;font-size:1.2rem;color:#e2e8f0;line-height:1.6;margin-top:10px;flex:1}.cursor[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite;color:#d97706;font-weight:700}.dialogue-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;animation:_ngcontent-%COMP%_fadeIn .5s}.action-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#16a34a,#15803d);color:#fff;border:1px solid #4ade80;padding:12px 24px;border-radius:6px;font-weight:700;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;gap:10px}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #22c55e66}.gold-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#f59e0b,#d97706);border-color:#fbbf24;color:#78350f}.park-scene[_ngcontent-%COMP%]{background:radial-gradient(circle at 50% 20%,#334155,#1e293b,#020617)}.rain-layer[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="40"><line x1="0" y1="0" x2="2" y2="10" stroke="rgba(148, 163, 184, 0.3)" stroke-width="1"/></svg>');z-index:5}.layer-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rain .8s linear infinite;opacity:.6;background-size:20px 40px}.layer-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rain 1.5s linear infinite;opacity:.3;background-size:40px 80px;transform:scale(1.5)}@keyframes _ngcontent-%COMP%_rain{0%{background-position:0 0}to{background-position:20px 100vh}}.trash-zone[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:30}.trash-item[_ngcontent-%COMP%]{position:absolute;width:60px;height:60px;display:flex;align-items:center;justify-content:center;cursor:grab;touch-action:none;transition:transform .1s}.trash-content[_ngcontent-%COMP%]{font-size:3.5rem;filter:drop-shadow(0 4px 6px rgba(0,0,0,.4));position:relative;z-index:2}.trash-shadow[_ngcontent-%COMP%]{position:absolute;bottom:5px;left:15%;width:70%;height:10px;background:#000;opacity:.3;filter:blur(4px);border-radius:50%;z-index:1;transition:all .2s}.trash-item[_ngcontent-%COMP%]:active   .trash-shadow[_ngcontent-%COMP%]{transform:scale(.5);opacity:.1;bottom:-20px}.floating-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.bin-container[_ngcontent-%COMP%]{position:absolute;bottom:40px;right:40px;width:140px;height:160px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;z-index:25;transition:transform .2s}.bin-body[_ngcontent-%COMP%]{font-size:6rem;filter:drop-shadow(0 10px 20px rgba(0,0,0,.5))}.bin-active[_ngcontent-%COMP%]{transform:scale(1.1)}.bin-eating[_ngcontent-%COMP%]   .bin-body[_ngcontent-%COMP%]{transform:scaleY(.8) scaleX(1.2)}.bin-label[_ngcontent-%COMP%]{font-weight:700;color:#cbd5e1;background:#0009;padding:4px 12px;border-radius:12px}.next-step-container[_ngcontent-%COMP%]{position:absolute;bottom:100px;width:100%;display:flex;justify-content:center;z-index:200}.next-btn[_ngcontent-%COMP%]{padding:15px 40px;background:linear-gradient(45deg,#f59e0b,#d97706);color:#fff;font-weight:900;font-size:1.3rem;border:none;border-radius:50px;cursor:pointer;box-shadow:0 10px 20px #d9770666;text-transform:uppercase}.pulse-glow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseGlow 2s infinite}@keyframes _ngcontent-%COMP%_pulseGlow{0%{box-shadow:0 0 #f59e0bb3}70%{box-shadow:0 0 0 20px #f59e0b00}to{box-shadow:0 0 #f59e0b00}}.shop-scene[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#2a0a0a,#1a0505);display:flex;flex-direction:column;align-items:center;justify-content:flex-end}.shop-bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.neon-sign[_ngcontent-%COMP%]{position:absolute;top:15%;left:50%;transform:translate(-50%);font-family:monospace;font-weight:900;font-size:4rem;color:#ff4d4d;text-shadow:0 0 20px #ff0000;border:4px solid #ff4d4d;padding:10px 30px;border-radius:20px;box-shadow:0 0 30px #f006;animation:_ngcontent-%COMP%_flicker 3s infinite}@keyframes _ngcontent-%COMP%_flicker{0%,to{opacity:1}50%{opacity:.8}52%{opacity:.2}54%{opacity:.8}}.scratch-scene[_ngcontent-%COMP%]{background:#0f172a;display:flex;justify-content:center;align-items:center}.ticket[_ngcontent-%COMP%]{width:360px;background:#f8fafc;border-radius:12px;overflow:hidden;box-shadow:0 25px 50px -12px #00000080;border:1px solid #94a3b8}.ticket-top[_ngcontent-%COMP%]{background:#1e1b4b;padding:20px;text-align:center;border-bottom:4px solid #fbbf24}.ticket-logo[_ngcontent-%COMP%]{font-family:Impact,sans-serif;font-size:2rem;color:#fbbf24;letter-spacing:1px}.ticket-sub[_ngcontent-%COMP%]{color:#94a3b8;font-size:.8rem;text-transform:uppercase;margin-top:5px}.scratch-zone-border[_ngcontent-%COMP%]{padding:20px;background:#e2e8f0}.scratch-zone[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;border:2px dashed #94a3b8;background:#fff;border-radius:8px;overflow:hidden}.winner-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(circle,#fef3c7,#fffbeb)}.win-amount[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:900;color:#16a34a}.win-emoji[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:10px;animation:pulse 1s infinite}.scratch-cover[_ngcontent-%COMP%]{position:absolute;inset:0;display:grid;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(6,1fr)}.scratch-pixel[_ngcontent-%COMP%]{background:#94a3b8;border:1px solid #64748b;display:flex;justify-content:center;align-items:center;cursor:crosshair}.scratch-pixel[_ngcontent-%COMP%]:nth-child(odd){background:#cbd5e1}.scratch-pixel.scratched[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.ticket-footer[_ngcontent-%COMP%]{padding:15px;text-align:center;background:#f1f5f9}.claim-btn[_ngcontent-%COMP%]{width:100%;background:#16a34a;color:#fff;font-weight:700;padding:12px;border:none;border-radius:6px;font-size:1.2rem;cursor:pointer}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .8s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.fadeIn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:0}}.particle[_ngcontent-%COMP%]{position:absolute;width:8px;height:8px;border-radius:50%;pointer-events:none;z-index:200}`]})};var CV=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(X(Ai),X(en))};static \u0275dir=Pt({type:n})}return n})(),TV=(()=>{class n extends CV{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ps(n)))(i||n)}})();static \u0275dir=Pt({type:n,features:[Ri]})}return n})(),WT=new Z("");var gQ={provide:WT,useExisting:Si(()=>bl),multi:!0};function _Q(){let n=$n()?$n().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var vQ=new Z(""),bl=(()=>{class n extends CV{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!_Q())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(X(Ai),X(en),X(vQ,8))};static \u0275dir=Pt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&U("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Ni([gQ]),Ri]})}return n})();var yQ=new Z(""),bQ=new Z("");function DV(n){return n!=null}function xV(n){return ki(n)?Ye(n):n}function AV(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function RV(n,e){return e.map(t=>t(n))}function EQ(n){return!n.validate}function kV(n){return n.map(e=>EQ(e)?e:t=>e.validate(t))}function wQ(n){if(!n)return null;let e=n.filter(DV);return e.length==0?null:function(t){return AV(RV(t,e))}}function PV(n){return n!=null?wQ(kV(n)):null}function IQ(n){if(!n)return null;let e=n.filter(DV);return e.length==0?null:function(t){let r=RV(t,e).map(xV);return ql(r).pipe(Ue(AV))}}function NV(n){return n!=null?IQ(kV(n)):null}function vV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function SQ(n){return n._rawValidators}function CQ(n){return n._rawAsyncValidators}function $T(n){return n?Array.isArray(n)?n:[n]:[]}function N0(n,e){return Array.isArray(n)?n.includes(e):n===e}function yV(n,e){let t=$T(e);return $T(n).forEach(i=>{N0(t,i)||t.push(i)}),t}function bV(n,e){return $T(e).filter(t=>!N0(n,t))}var M0=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=PV(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=NV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},HT=class extends M0{name;get formDirective(){return null}get path(){return null}},gh=class extends M0{_parent=null;name=null;valueAccessor=null},GT=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var F0=(()=>{class n extends GT{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(X(gh,2))};static \u0275dir=Pt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&le("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ri]})}return n})();var hh="VALID",P0="INVALID",vl="PENDING",fh="DISABLED",wa=class{},O0=class extends wa{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ph=class extends wa{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},mh=class extends wa{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},yl=class extends wa{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var zT=class extends wa{source;constructor(e){super(),this.source=e}};function TQ(n){return(L0(n)?n.validators:n)||null}function DQ(n){return Array.isArray(n)?PV(n):n||null}function xQ(n,e){return(L0(e)?e.asyncValidators:n)||null}function AQ(n){return Array.isArray(n)?NV(n):n||null}function L0(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var qT=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Tt(this.statusReactive)}set status(e){Tt(()=>this.statusReactive.set(e))}_status=Su(()=>this.statusReactive());statusReactive=Xt(void 0);get valid(){return this.status===hh}get invalid(){return this.status===P0}get pending(){return this.status==vl}get disabled(){return this.status===fh}get enabled(){return this.status!==fh}errors;get pristine(){return Tt(this.pristineReactive)}set pristine(e){Tt(()=>this.pristineReactive.set(e))}_pristine=Su(()=>this.pristineReactive());pristineReactive=Xt(!0);get dirty(){return!this.pristine}get touched(){return Tt(this.touchedReactive)}set touched(e){Tt(()=>this.touchedReactive.set(e))}_touched=Su(()=>this.touchedReactive());touchedReactive=Xt(!1);get untouched(){return!this.touched}_events=new Ee;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(yV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bV(e,this._rawAsyncValidators))}hasValidator(e){return N0(this._rawValidators,e)}hasAsyncValidator(e){return N0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(re(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new mh(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new mh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(re(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ph(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ph(!0,r))}markAsPending(e={}){this.status=vl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(re(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=fh,this.errors=null,this._forEachChild(i=>{i.disable(re(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new O0(this.value,r)),this._events.next(new yl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(re(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hh,this._forEachChild(r=>{r.enable(re(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(re(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hh||this.status===vl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new O0(this.value,t)),this._events.next(new yl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(re(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fh:hh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=vl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=xV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new yl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ke,this.statusChanges=new ke}_calculateStatus(){return this._allControlsDisabled()?fh:this.errors?P0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vl)?vl:this._anyControlsHaveStatus(P0)?P0:hh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ph(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new mh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){L0(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=DQ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=AQ(this._rawAsyncValidators)}};var MV=new Z("",{factory:()=>KT}),KT="always";function RQ(n,e){return[...e.path,n]}function kQ(n,e,t=KT){NQ(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),MQ(n,e),FQ(n,e),OQ(n,e),PQ(n,e)}function EV(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function PQ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function NQ(n,e){let t=SQ(n);e.validator!==null?n.setValidators(vV(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=CQ(n);e.asyncValidator!==null?n.setAsyncValidators(vV(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();EV(e._rawValidators,i),EV(e._rawAsyncValidators,i)}function MQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&OV(n,e)})}function OQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&OV(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function OV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function FQ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function LQ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function VQ(n){return Object.getPrototypeOf(n.constructor)===TV}function UQ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===bl?t=s:VQ(s)?r=s:i=s}),i||r||t||null}function wV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function IV(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var BQ=class extends qT{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(TQ(t),xQ(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),L0(t)&&(t.nonNullable||t.initialValueIsDefault)&&(IV(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new zT(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){IV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var jQ={provide:gh,useExisting:Si(()=>_h)},SV=Promise.resolve(),_h=(()=>{class n extends gh{_changeDetectorRef;callSetDisabledState;control=new BQ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ke;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=UQ(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),LQ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){kQ(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){SV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Mo(r);SV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?RQ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(X(HT,9),X(yQ,10),X(bQ,10),X(WT,10),X(Dt,8),X(MV,8))};static \u0275dir=Pt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ni([jQ]),Ri,Tr]})}return n})();var $Q={provide:WT,useExisting:Si(()=>YT),multi:!0},YT=(()=>{class n extends TV{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ps(n)))(i||n)}})();static \u0275dir=Pt({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&U("change",function(o){return i.onChange(o.target.value)})("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ni([$Q]),Ri]})}return n})();var HQ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ft({type:n});static \u0275inj=dt({})}return n})();var FV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:MV,useValue:t.callSetDisabledState??KT}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ft({type:n});static \u0275inj=dt({imports:[HQ]})}return n})();function GQ(n,e){if(n&1&&(f(0,"p",18),y(1),m()),n&2){let t=D(2);_(),G(" \u274C ",t.errorMessage," ")}}function zQ(n,e){n&1&&(f(0,"p",19),y(1," Reprenez votre partie l\xE0 o\xF9 vous l'avez laiss\xE9e. "),m())}function qQ(n,e){if(n&1){let t=ee();f(0,"div",7)(1,"div",8)(2,"h1",9),y(3," JEUB2 "),m(),f(4,"div",10),y(5," ONLINE EDITION "),m(),f(6,"div",11),y(7,"Devenez le CEO ultime"),m()(),f(8,"div",12)(9,"button",13),U("click",function(){j(t);let i=D();return $(i.login())}),f(10,"span",14),y(11,"G"),m(),f(12,"span"),y(13,"SE CONNECTER AVEC GOOGLE"),m(),W(14,"div",15),m(),V(15,GQ,2,1,"p",16)(16,zQ,2,0,"p",17),m()()}if(n&2){let t=D();_(15),w("ngIf",t.errorMessage),_(),w("ngIf",!t.errorMessage)}}function WQ(n,e){if(n&1){let t=ee();f(0,"div",20)(1,"div",21),y(2,"\u{1F44B}"),m(),f(3,"h2",22),y(4,"Bienvenue, CEO !"),m(),f(5,"p",23),y(6,"Confirmez votre identit\xE9 pour cr\xE9er votre holding :"),m(),f(7,"input",24),Po("ngModelChange",function(i){j(t);let s=D();return ac(s.chosenUsername,i)||(s.chosenUsername=i),$(i)}),U("keyup.enter",function(){j(t);let i=D();return $(i.confirmName())}),m(),f(8,"button",25),U("click",function(){j(t);let i=D();return $(i.confirmName())}),y(9," LANCER L'EMPIRE \u{1F680} "),m()()}if(n&2){let t=D();_(7),ko("ngModel",t.chosenUsername),_(),w("disabled",!t.chosenUsername)}}var V0=class n{constructor(e,t,r){this.firebase=e;this.gameState=t;this.sound=r}isChoosingName=!1;chosenUsername="";pendingUser=null;errorMessage="";async login(){this.sound.playSoftPop(),this.errorMessage="";try{await this.firebase.loginGoogle();let e=this.firebase.authInstance.currentUser;if(e)if(await this.gameState.checkIfUserHasSave(e))console.log("\u{1F4BE} Sauvegarde trouv\xE9e !"),await this.gameState.loadCloudDataForUser(e);else{console.log("\u{1F195} Nouvelle partie."),this.pendingUser=e;let r=e.displayName,i=e.email?e.email.split("@")[0]:"PDG";this.chosenUsername=r||i,this.chosenUsername&&this.chosenUsername!=="Entrepreneur"?await this.confirmName():this.isChoosingName=!0}}catch(e){console.error(e),this.errorMessage="Erreur connexion : "+e.message}}async confirmName(){this.chosenUsername.trim()&&(this.sound.playSuccess(),this.pendingUser&&await this.gameState.initializeNewUser(this.pendingUser,this.chosenUsername))}static \u0275fac=function(t){return new(t||n)(X(Mn),X(at),X(Wt))};static \u0275cmp=qe({type:n,selectors:[["app-title-screen"]],standalone:!1,decls:8,vars:2,consts:[[1,"h-screen","w-screen","bg-slate-950","flex","flex-col","items-center","justify-center","relative","overflow-hidden","font-sans","select-none"],[1,"absolute","inset-0","opacity-20","pointer-events-none"],[1,"absolute","top-0","left-0","w-full","h-full","bg-[radial-gradient(circle_at_50%_50%,_#3b82f6_0%,_transparent_50%)]","animate-pulse"],[1,"grid-bg","absolute","inset-0"],["class","z-10 flex flex-col items-center gap-8 animate-fade-in-up",4,"ngIf"],["class","z-20 bg-slate-900 border border-slate-700 p-8 rounded-2xl shadow-2xl flex flex-col items-center gap-6 animate-fade-in max-w-md w-full mx-4",4,"ngIf"],[1,"absolute","bottom-4","text-slate-700","text-xs","font-mono"],[1,"z-10","flex","flex-col","items-center","gap-8","animate-fade-in-up"],[1,"relative","group","cursor-default"],[1,"text-8xl","md:text-9xl","font-black","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-b","from-white","to-slate-400","drop-shadow-2xl"],[1,"absolute","-top-4","-right-8","bg-blue-600","text-white","text-xs","font-bold","px-2","py-1","rounded","rotate-12","shadow-lg"],[1,"text-center","text-slate-500","font-mono","text-sm","tracking-[0.5em]","mt-2","uppercase"],[1,"flex","flex-col","items-center","gap-4","mt-8"],[1,"group","relative","px-8","py-4","bg-white","text-slate-900","font-black","text-xl","rounded-full","shadow-[0_0_40px_rgba(255,255,255,0.3)]","hover:shadow-[0_0_60px_rgba(255,255,255,0.5)]","hover:scale-105","transition-all","duration-300","flex","items-center","gap-3",3,"click"],[1,"text-2xl"],[1,"absolute","inset-0","rounded-full","border-2","border-white","opacity-0","group-hover:opacity-100","group-hover:scale-110","transition-all","duration-500"],["class","text-red-400 font-bold text-xs mt-4 max-w-xs text-center bg-red-900/20 p-2 rounded border border-red-500/30",4,"ngIf"],["class","text-slate-600 text-xs mt-4 max-w-xs text-center",4,"ngIf"],[1,"text-red-400","font-bold","text-xs","mt-4","max-w-xs","text-center","bg-red-900/20","p-2","rounded","border","border-red-500/30"],[1,"text-slate-600","text-xs","mt-4","max-w-xs","text-center"],[1,"z-20","bg-slate-900","border","border-slate-700","p-8","rounded-2xl","shadow-2xl","flex","flex-col","items-center","gap-6","animate-fade-in","max-w-md","w-full","mx-4"],[1,"text-4xl"],[1,"text-2xl","font-black","text-white","text-center"],[1,"text-slate-400","text-center","text-sm"],["type","text","placeholder","Votre Pseudo...",1,"w-full","bg-slate-800","border","border-slate-600","rounded-lg","px-4","py-3","text-white","font-bold","text-center","focus:border-blue-500","focus:outline-none","transition-colors","text-xl",3,"ngModelChange","keyup.enter","ngModel"],[1,"w-full","py-3","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-bold","rounded-lg","transition-all","shadow-lg",3,"click","disabled"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1),W(2,"div",2)(3,"div",3),m(),V(4,qQ,17,2,"div",4)(5,WQ,10,2,"div",5),f(6,"div",6),y(7,"v1.2.0 \u2022 Blackjack Update"),m()()),t&2&&(_(4),w("ngIf",!r.isChoosingName),_(),w("ngIf",r.isChoosingName))},dependencies:[xt,bl,F0,_h],styles:[".grid-bg[_ngcontent-%COMP%]{background-image:linear-gradient(rgba(255,255,255,.05) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.05) 1px,transparent 1px);background-size:50px 50px}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};var YQ=["*"];function QQ(n,e){n&1&&(f(0,"div",43),y(1,"\u{1F525} RUSH (20h-02h) -1s \u{1F525}"),m())}function JQ(n,e){n&1&&(f(0,"div",44),y(1,"\u{1F451} Client VIP \u{1F451}"),m())}function ZQ(n,e){n&1&&(f(0,"div",45),y(1,"Service Midi"),m())}function XQ(n,e){if(n&1&&(f(0,"span",46),y(1),m()),n&2){let t=D();_(),G("\u{1F468}\u200D\u{1F373} ",t.cookCount," Auto")}}function eJ(n,e){if(n&1&&(f(0,"span",47),y(1),m()),n&2){let t=D();_(),G("\u26A1 +",t.serverBonus,"% Vit.")}}function tJ(n,e){if(n&1&&(f(0,"div",48),y(1),m()),n&2){let t=e.$implicit,r=e.index,i=D();we("animation-delay",r*50+"ms"),_(),G(" ",i.getIcon(t)," ")}}function nJ(n,e){n&1&&(f(0,"div",49)(1,"span"),y(2,"\u2705 PR\xCAT"),m(),f(3,"span",50),y(4,"Envoie !"),m()())}function rJ(n,e){if(n&1&&W(0,"div",51),n&2){let t=e.$implicit;we("left",t.x,"px")("top",t.y,"px")("background-color",t.color)("transform","rotate("+t.rotation+"deg)")}}function iJ(n,e){if(n&1&&(f(0,"div",52),y(1),m()),n&2){let t=e.$implicit,r=e.index,i=D();we("z-index",r),_(),G(" ",i.getIcon(t)," ")}}function sJ(n,e){if(n&1&&(f(0,"div",53),y(1),m()),n&2){let t=e.$implicit;we("left",t.x,"px")("top",t.y,"px"),w("ngClass",t.type),_(),G(" ",t.text," ")}}function oJ(n,e){if(n&1&&(f(0,"div",60),y(1),m()),n&2){let t=D().index;_(),G(" ",t+1," ")}}function aJ(n,e){if(n&1){let t=ee();f(0,"button",54),U("click",function(i){let s=j(t).$implicit,o=D();return $(o.addIngredient(s,i))}),V(1,oJ,2,1,"div",55),f(2,"span",56),y(3),m(),f(4,"span",57),y(5),m(),f(6,"div",58),W(7,"div",59),m()()}if(n&2){let t=e.$implicit,r=D();_(),w("ngIf",r.upgrades.hasKeyboard),_(2),te(r.getIcon(t)),_(2),te(r.getShortName(t)),_(2),we("width",r.mastery[t].xp/r.mastery[t].xpMax*100,"%")}}function cJ(n,e){n&1&&(f(0,"span",61),y(1,"ESPACE"),m())}var U0=class n{constructor(e,t,r){this.gameState=e;this.cdr=t;this.soundService=r;this.allIngredientsList.forEach(i=>this.mastery[i]={level:1,xp:0,xpMax:5})}CONFIG={TIME:{startSeconds:10,lessPerLevel:1,minSeconds:2},ECONOMY:{baseReward:35,percentPerLevel:20,ingredientLevelBonus:10},VIP:{chance:.1,rewardMult:5,timeDivisor:2},PROGRESSION:{unlockCheeseLevel:3,unlockSaladLevel:6,unlockTomatoLevel:9},FX:{confettiEvery:5,feverThreshold:5,confettiColors:["#ef4444","#3b82f6","#22c55e","#eab308","#a855f7","#ffffff"]},AUTO:{cookSpeedBase:5e3,serverSlowPct:10},UNLOCK_COSTS:{CHEESE:1e3,ONION:500,SALAD:2e3,BACON:3500,PICKLE:0,TOMATO:0,SAUCE:0}};currentMoney=0;isVip=!1;triggerShake=!1;comboMultiplier=1;currentOrder=[];currentStack=[];allIngredientsList=Object.values(oh);currentAvailableIngredients=[];mastery={};upgrades={grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:[],maxServiceReached:1,hasKeyboard:!1};cookCount=0;serverCount=0;serverBonus=0;autoCookInterval;displayTimeLeft=0;totalTimeForLevel=0;isRunning=!1;rafId;endTime=0;floatingTexts=[];particles=[];counter=0;timeOfDay=6;currentDay=1;burgerStartTime=0;get isFeverMode(){return this.timeOfDay>=20||this.timeOfDay<2}get remainingOrder(){return this.currentOrder.slice(this.currentStack.length)}handleKeyboardEvent(e){if(!this.upgrades.hasKeyboard)return;let t=e.key,r=parseInt(t);!isNaN(r)&&r>0&&r<=this.currentAvailableIngredients.length&&this.addIngredient(this.currentAvailableIngredients[r-1]),(t===" "||t==="Enter")&&(e.preventDefault(),this.validateBurger())}ngOnInit(){this.gameState.gameState$.subscribe(e=>{this.currentMoney=e.money,this.timeOfDay=e.timeOfDay,this.currentDay=e.day,e.foodtruckMastery&&(this.mastery=JSON.parse(JSON.stringify(e.foodtruckMastery))),e.foodtruckUpgrades&&(this.upgrades=O({},e.foodtruckUpgrades));let t=e.companies.find(r=>r.type==="FOODTRUCK");if(t){let r=this.gameState.getTotalEmployeePower(t.type,"COOK"),i=this.gameState.getTotalEmployeePower(t.type,"SERVER");this.cookCount=Math.floor(r),this.serverBonus=Math.min(75,i)}this.cdr.markForCheck()}),this.resetGame(1)}ngOnDestroy(){this.stopChrono(),this.stopAutoCook()}startAutoCook(){if(this.stopAutoCook(),this.cookCount>0){let e=Math.max(500,this.CONFIG.AUTO.cookSpeedBase/this.cookCount);this.autoCookInterval=setInterval(()=>{this.isRunning&&(this.performAutoAction(),this.cdr.markForCheck())},e)}}stopAutoCook(){this.autoCookInterval&&clearInterval(this.autoCookInterval)}performAutoAction(){this.currentStack.length<this.currentOrder.length?this.addIngredient(this.currentOrder[this.currentStack.length],void 0,!0):this.validateBurger()}addIngredient(e,t,r=!1){this.isRunning||(this.startChrono(),this.startAutoCook()),r||(["STEAK","BACON"].includes(e)?this.soundService.playSteakSound():["SALAD","ONION"].includes(e)?this.soundService.playSaladSound():this.soundService.playSoftPop()),this.currentStack.push(e),r&&this.spawnText("\u{1F916}",100+Math.random()*150,200,"auto");let i=this.currentStack.length-1;this.currentOrder[i]!==e&&(this.spawnText("RAT\xC9 !",t?.clientX||200,t?.clientY||200,"error"),this.failLevel()),this.cdr.markForCheck()}validateBurger(e){if(this.currentStack.length!==this.currentOrder.length){this.failLevel();return}let t=Date.now()-this.burgerStartTime;this.gameState.gameState$.pipe(st(1)).subscribe(i=>{let s=O({},i.stats);s.burgersServed=(s.burgersServed||0)+1,s.bestServiceCombo=Math.max(s.bestServiceCombo||0,this.comboMultiplier),(s.fastestBurgerMs===0||t<s.fastestBurgerMs)&&(s.fastestBurgerMs=t),this.gameState.updateState({stats:s})}),this.stopChrono(),this.stopAutoCook(),this.soundService.playSuccess(),this.gameState.incrementCustomersServed(),this.gainXpForIngredients(e);let r=this.getCurrentReward();this.gameState.addMoney(r),this.spawnText(`+${Math.floor(r)}\u20AC`,200,150,this.isVip?"vip":"success"),this.gameState.updateMaxServiceReached(this.comboMultiplier),this.comboMultiplier>=6&&this.gameState.unlockIngredientByService("PICKLE"),this.comboMultiplier>=10&&this.gameState.unlockIngredientByService("TOMATO"),this.comboMultiplier>=15&&this.gameState.unlockIngredientByService("SAUCE"),(this.isVip||this.comboMultiplier%this.CONFIG.FX.confettiEvery===0)&&this.spawnConfetti(),this.resetGame(this.comboMultiplier+1)}failLevel(){this.stopChrono(),this.stopAutoCook(),this.soundService.playError(),this.triggerShake=!0,setTimeout(()=>{this.triggerShake=!1,this.cdr.markForCheck()},400),this.resetGame(1)}resetGame(e,t=!1){this.comboMultiplier=e,this.currentStack=[],this.isRunning=!1,this.burgerStartTime=Date.now(),t?this.isVip=!0:this.isVip=Math.random()<this.CONFIG.VIP.chance+this.upgrades.marketingLevel*.02;let r=this.CONFIG.TIME.startSeconds-(this.comboMultiplier-1)*this.CONFIG.TIME.lessPerLevel;r+=this.upgrades.grillLevel*.5,this.isFeverMode&&!this.isVip&&(r-=1),r<this.CONFIG.TIME.minSeconds&&(r=this.CONFIG.TIME.minSeconds),this.serverBonus>0&&(r=r*(1+this.serverBonus/100)),this.isVip&&(r=r/this.CONFIG.VIP.timeDivisor),this.totalTimeForLevel=r*1e3,this.displayTimeLeft=this.totalTimeForLevel,this.generateSmartOrder(),this.cdr.detectChanges()}generateSmartOrder(){let e=["STEAK"];(this.isUnlocked("CHEESE")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockCheeseLevel)&&e.push("CHEESE"),(this.isUnlocked("SALAD")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockSaladLevel)&&e.push("SALAD"),(this.isUnlocked("TOMATO")||this.comboMultiplier>=this.CONFIG.PROGRESSION.unlockTomatoLevel)&&e.push("TOMATO"),this.allIngredientsList.forEach(i=>{this.isUnlocked(i)&&!e.includes(i)&&i!=="BUN"&&e.push(i)}),this.currentAvailableIngredients=["BUN",...e];let t=Math.min(6,1+Math.floor(this.comboMultiplier/3)),r=[];for(let i=0;i<t;i++)r.push(e[Math.floor(Math.random()*e.length)]);this.currentOrder=["BUN",...r,"BUN"]}getCurrentReward(){let e=1+this.CONFIG.ECONOMY.percentPerLevel/100,t=this.CONFIG.ECONOMY.baseReward*Math.pow(e,this.comboMultiplier-1);t+=this.upgrades.serviceLevel*5;let r=0;this.currentOrder.forEach(o=>{this.mastery[o]&&(r+=this.mastery[o].level)});let s=1+((this.currentOrder.length>0?r/this.currentOrder.length:1)-1)*(this.CONFIG.ECONOMY.ingredientLevelBonus/100);return t=t*s,this.isVip&&(t=t*this.CONFIG.VIP.rewardMult),t}gainXpForIngredients(e){[...new Set(this.currentStack)].forEach(r=>{this.mastery[r]||(this.mastery[r]={level:1,xp:0,xpMax:5});let i=this.mastery[r];i.xp++,i.xp>=i.xpMax&&(i.level++,i.xp=0,i.xpMax=Math.floor(i.xpMax*1.5),e&&this.spawnText(`${this.getIcon(r)} UP!`,e.clientX,e.clientY-50,"levelup"))}),this.gameState.updateIngredientMastery(this.mastery)}startChrono(){this.isRunning=!0,this.endTime=Date.now()+this.totalTimeForLevel;let e=()=>{if(!this.isRunning)return;let t=this.endTime-Date.now();t<=0?(this.displayTimeLeft=0,this.spawnText("TEMPS \xC9COUL\xC9 !",200,200,"error"),this.failLevel(),this.cdr.detectChanges()):(this.displayTimeLeft=t,this.cdr.detectChanges(),this.rafId=requestAnimationFrame(e))};this.rafId=requestAnimationFrame(e)}stopChrono(){this.isRunning=!1,this.rafId&&cancelAnimationFrame(this.rafId)}getBarPercentage(){return this.displayTimeLeft/this.totalTimeForLevel*100}isTimeRunningOut(){return this.getBarPercentage()<30}getActionBtnClass(){return this.isFeverMode&&!this.isVip?"bg-red-600 hover:bg-red-500 border-red-800 text-white shadow-[0_4px_20px_rgba(239,68,68,0.4)] animate-pulse":this.isVip?"bg-gradient-to-r from-amber-600 to-amber-500 border-amber-700 text-amber-50 shadow-[0_4px_20px_rgba(245,158,11,0.4)]":"bg-blue-600 hover:bg-blue-500 border-blue-700 text-white"}getButtonLabel(){return this.isFeverMode&&!this.isVip?"\u{1F525} FEVER !":this.isVip?"\u{1F451} SERVIR LE ROI DU BURGER":"\u{1F6CE}\uFE0F ENVOYER"}formatGameTime(e){let t=Math.floor(e),r=Math.floor((e-t)*60);return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}spawnConfetti(){for(let e=0;e<30;e++)this.particles.push({id:this.counter++,x:Math.random()*300+50,y:200,color:this.CONFIG.FX.confettiColors[Math.floor(Math.random()*this.CONFIG.FX.confettiColors.length)],rotation:Math.random()*360,speedX:(Math.random()-.5)*10,speedY:(Math.random()-1)*15-5});this.animateParticles()}animateParticles(){this.particles.length!==0&&(this.particles.forEach(e=>{e.x+=e.speedX,e.y+=e.speedY,e.speedY+=.5,e.rotation+=5}),this.particles=this.particles.filter(e=>e.y<600),this.particles.length>0&&requestAnimationFrame(()=>{this.animateParticles(),this.cdr.detectChanges()}))}spawnText(e,t,r,i){let s=this.counter++;this.floatingTexts.push({id:s,text:e,x:t||200,y:r||100,type:i}),setTimeout(()=>{this.floatingTexts=this.floatingTexts.filter(o=>o.id!==s),this.cdr.detectChanges()},1e3)}isUnlocked(e){return this.upgrades.unlockedIngredients.includes(e)}getShortName(e){return{BUN:"Pain",STEAK:"Viande",CHEESE:"Fromage",SALAD:"Salade",TOMATO:"Tomate",SAUCE:"Sauce",ONION:"Oignon",PICKLE:"Cornich.",BACON:"Bacon"}[e]||e}getIcon(e){return{BUN:"\u{1F35E}",STEAK:"\u{1F969}",CHEESE:"\u{1F9C0}",SALAD:"\u{1F96C}",TOMATO:"\u{1F345}",SAUCE:"\u{1F963}",ONION:"\u{1F9C5}",PICKLE:"\u{1F952}",BACON:"\u{1F953}"}[e]||"\u2753"}static \u0275fac=function(t){return new(t||n)(X(at),X(Dt),X(Wt))};static \u0275cmp=qe({type:n,selectors:[["app-foodtruck-game"]],hostBindings:function(t,r){t&1&&U("keydown",function(s){return r.handleKeyboardEvent(s)},yu)},standalone:!1,ngContentSelectors:YQ,decls:60,vars:43,consts:[[1,"h-full","bg-slate-900","p-6","flex","flex-col","gap-6","font-sans","select-none","overflow-hidden","relative","transition-colors","duration-500"],[1,"grid","grid-cols-12","gap-6","h-24","shrink-0","z-10"],[1,"col-span-3","card-panel","flex","flex-col","justify-center","px-6","relative","overflow-hidden","group"],[1,"text-slate-500","text-[10px]","font-bold","uppercase","tracking-widest","mb-1","label-text"],[1,"text-2xl","font-black","text-white","tracking-tight","value-text","group-hover:scale-105","transition-transform","origin-left"],[1,"absolute","right-2","bottom-[-10px]","text-6xl","opacity-10","rotate-12","emoji-bg"],[1,"col-span-6","card-panel","flex","items-center","justify-between","px-2","relative"],[1,"flex","flex-col","items-center","justify-center","w-24","h-full","border-r","border-white/10"],[1,"text-3xl","font-black","text-white","value-text"],[1,"text-[9px]","text-slate-500","uppercase","font-bold","label-text"],[1,"flex-1","flex","flex-col","items-center","justify-center"],["class","text-red-500 font-black text-lg animate-pulse tracking-widest uppercase glow-text",4,"ngIf"],["class","text-amber-400 font-black text-lg animate-pulse tracking-widest uppercase glow-text",4,"ngIf"],["class","text-slate-400 font-bold text-xs uppercase tracking-wide",4,"ngIf"],[1,"flex","gap-2","mt-1","opacity-80"],["class","badge-pill bg-blue-500/20 text-blue-300 border-blue-500/30",4,"ngIf"],["class","badge-pill bg-green-500/20 text-green-300 border-green-500/30",4,"ngIf"],[1,"col-span-3","card-panel","flex","flex-col","justify-center","items-end","px-6","relative","overflow-hidden"],[1,"text-3xl","font-mono","font-bold","text-white","z-10","value-text"],[1,"absolute","bottom-0","left-0","h-1.5","w-full","bg-black/20"],[1,"h-full","transition-all","duration-200"],[1,"flex-1","grid","grid-cols-12","gap-6","min-h-0","z-0"],[1,"col-span-3","card-panel","flex","flex-col","items-center","py-4","overflow-hidden"],[1,"text-[10px]","font-bold","text-slate-500","uppercase","tracking-widest","mb-2","label-text","shrink-0"],[1,"mb-3","flex","flex-col","items-center","bg-slate-950/30","w-full","py-2","border-y","border-white/5","shrink-0"],[1,"text-2xl","font-black","text-green-400","tracking-tight"],[1,"text-[8px]","text-slate-500","uppercase","font-bold"],[1,"flex-1","min-h-0","w-full","overflow-y-auto","custom-scroll","px-2","flex","flex-col","items-center","gap-2","pb-2"],["class","w-14 h-14 shrink-0 rounded-xl flex items-center justify-center text-3xl shadow-inner border border-white/5 bg-black/20 animate-in",3,"animation-delay",4,"ngFor","ngForOf"],["class","mt-4 text-green-400 font-bold text-xs animate-pulse flex flex-col items-center",4,"ngIf"],[1,"col-span-9","card-panel","relative","overflow-hidden","flex","items-end","justify-center","pb-10","group","bg-grid-pattern"],[1,"absolute","inset-0","pointer-events-none"],["class","absolute w-2 h-2 rounded-full",3,"left","top","background-color","transform",4,"ngFor","ngForOf"],[1,"relative","z-10","flex","flex-col-reverse","items-center","transition-transform","duration-200"],["class","text-8xl -mb-14 drop-shadow-2xl animate-pop hover:scale-105 transition-transform cursor-pointer select-none",3,"zIndex",4,"ngFor","ngForOf"],[1,"w-72","h-6","bg-slate-700/50","rounded-[100%]","mt-8","shadow-xl","blur-sm","z-[-1]","plate-shadow"],["class","absolute pointer-events-none font-bold text-3xl z-50 animate-float",3,"left","top","ngClass",4,"ngFor","ngForOf"],[1,"shrink-0","card-panel","p-4","z-20","shadow-2xl","border-t","border-white/10","transition-all","duration-300"],[1,"flex","gap-4","items-stretch"],[1,"flex-1","flex","flex-wrap","gap-2","justify-center","content-center"],["class",`relative group bg-slate-800 border-b-4 border-slate-950 rounded-xl 
                              active:border-b-0 active:translate-y-1 transition-all 
                              flex flex-col items-center justify-center overflow-hidden hover:bg-slate-700 ing-key
                              w-20 h-20 lg:w-24 lg:h-24`,3,"click",4,"ngFor","ngForOf"],[1,"w-32","lg:w-48","rounded-xl","font-black","text-lg","lg:text-xl","uppercase","tracking-widest","shadow-lg","border-b-4","active:border-b-0","active:translate-y-1","transition-all","flex","flex-col","items-center","justify-center","text-center","leading-none","action-key","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none","shrink-0","self-stretch","min-h-[5rem]",3,"click","disabled","ngClass"],["class","text-[10px] opacity-60 font-normal mt-1 border border-white/30 px-2 rounded",4,"ngIf"],[1,"text-red-500","font-black","text-lg","animate-pulse","tracking-widest","uppercase","glow-text"],[1,"text-amber-400","font-black","text-lg","animate-pulse","tracking-widest","uppercase","glow-text"],[1,"text-slate-400","font-bold","text-xs","uppercase","tracking-wide"],[1,"badge-pill","bg-blue-500/20","text-blue-300","border-blue-500/30"],[1,"badge-pill","bg-green-500/20","text-green-300","border-green-500/30"],[1,"w-14","h-14","shrink-0","rounded-xl","flex","items-center","justify-center","text-3xl","shadow-inner","border","border-white/5","bg-black/20","animate-in"],[1,"mt-4","text-green-400","font-bold","text-xs","animate-pulse","flex","flex-col","items-center"],[1,"text-[9px]","opacity-70"],[1,"absolute","w-2","h-2","rounded-full"],[1,"text-8xl","-mb-14","drop-shadow-2xl","animate-pop","hover:scale-105","transition-transform","cursor-pointer","select-none"],[1,"absolute","pointer-events-none","font-bold","text-3xl","z-50","animate-float",3,"ngClass"],[1,"relative","group","bg-slate-800","border-b-4","border-slate-950","rounded-xl","active:border-b-0","active:translate-y-1","transition-all","flex","flex-col","items-center","justify-center","overflow-hidden","hover:bg-slate-700","ing-key","w-20","h-20","lg:w-24","lg:h-24",3,"click"],["class","absolute top-1 left-1 bg-white/20 text-white/70 text-[10px] px-1.5 rounded font-mono border border-white/10",4,"ngIf"],[1,"text-3xl","lg:text-4xl","mb-1","group-hover:scale-110","transition-transform","duration-200"],[1,"text-[8px]","lg:text-[9px]","font-bold","text-slate-500","uppercase","tracking-wide","group-hover:text-slate-300","label-text","truncate","w-full","text-center","px-1"],[1,"absolute","bottom-0","left-0","w-full","h-1","bg-black/40"],[1,"h-full","bg-blue-500","transition-all","duration-300"],[1,"absolute","top-1","left-1","bg-white/20","text-white/70","text-[10px]","px-1.5","rounded","font-mono","border","border-white/10"],[1,"text-[10px]","opacity-60","font-normal","mt-1","border","border-white/30","px-2","rounded"]],template:function(t,r){t&1&&(xp(),f(0,"div",0),Ap(1),f(2,"div",1)(3,"div",2)(4,"div",3),y(5,"Caisse"),m(),f(6,"div",4),y(7),oe(8,"number"),m(),f(9,"div",5),y(10,"\u{1F4B0}"),m()(),f(11,"div",6)(12,"div",7)(13,"span",8),y(14),m(),f(15,"span",9),y(16),m()(),f(17,"div",10),V(18,QQ,2,0,"div",11)(19,JQ,2,0,"div",12)(20,ZQ,2,0,"div",13),f(21,"div",14),V(22,XQ,2,1,"span",15)(23,eJ,2,1,"span",16),m()()(),f(24,"div",17)(25,"div",3),y(26,"Temps Restant"),m(),f(27,"div",18),y(28),oe(29,"number"),m(),f(30,"div",19),W(31,"div",20),m()()(),f(32,"div",21)(33,"div",22)(34,"div",23),y(35,"\xC0 Pr\xE9parer"),m(),f(36,"div",24)(37,"span",25),y(38),oe(39,"number"),m(),f(40,"span",26),y(41,"Valeur Commande"),m()(),f(42,"div",27),V(43,tJ,2,3,"div",28)(44,nJ,5,0,"div",29),m()(),f(45,"div",30)(46,"div",31),V(47,rJ,1,8,"div",32),m(),f(48,"div",33),V(49,iJ,2,3,"div",34),W(50,"div",35),m(),V(51,sJ,2,6,"div",36),m()(),f(52,"div",37)(53,"div",38)(54,"div",39),V(55,aJ,8,5,"button",40),m(),f(56,"button",41),U("click",function(s){return r.validateBurger(s)}),f(57,"span"),y(58),m(),V(59,cJ,2,0,"span",42),m()()()()),t&2&&(le("vip-theme",r.isVip)("fever-theme",r.isFeverMode&&!r.isVip),_(7),G(" ",Be(8,34,r.currentMoney,"1.0-0")," \u20AC "),_(7),te(r.formatGameTime(r.timeOfDay)),_(2),G("Jour ",r.currentDay),_(2),w("ngIf",r.isFeverMode),_(),w("ngIf",r.isVip&&!r.isFeverMode),_(),w("ngIf",!r.isFeverMode&&!r.isVip),_(2),w("ngIf",r.cookCount>0),_(),w("ngIf",r.serverBonus>0),_(5),G("",Be(29,37,r.displayTimeLeft/1e3,"1.1-1"),"s"),_(3),we("width",r.getBarPercentage(),"%"),le("bg-blue-500",!r.isTimeRunningOut()&&!r.isVip&&!r.isFeverMode)("bg-red-500",r.isTimeRunningOut()||r.isFeverMode)("bg-amber-400",r.isVip),_(7),G("",Be(39,40,r.getCurrentReward(),"1.0-0")," \u20AC"),_(5),w("ngForOf",r.remainingOrder),_(),w("ngIf",r.remainingOrder.length===0),_(3),w("ngForOf",r.particles),_(),we("transform","scale("+(1-r.currentStack.length*.02)+")"),_(),w("ngForOf",r.currentStack),_(2),w("ngForOf",r.floatingTexts),_(4),w("ngForOf",r.currentAvailableIngredients),_(),w("disabled",r.currentStack.length===0)("ngClass",r.getActionBtnClass()),_(2),te(r.getButtonLabel()),_(),w("ngIf",r.upgrades.hasKeyboard))},dependencies:[Oi,Nt,xt,Bt],styles:[".card-panel[_ngcontent-%COMP%]{background-color:#1e293b;border:1px solid #334155;border-radius:1rem;box-shadow:0 4px 6px -1px #0000001a}.badge-pill[_ngcontent-%COMP%]{padding:2px 8px;border-radius:99px;font-size:10px;font-weight:700;border:1px solid;display:inline-block}.vip-theme[_ngcontent-%COMP%]   .card-panel[_ngcontent-%COMP%]{background-color:#2a2010;border-color:#78350f}.vip-theme[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#d97706}.vip-theme[_ngcontent-%COMP%]   .value-text[_ngcontent-%COMP%]{color:#fcd34d;text-shadow:0 0 10px rgba(251,191,36,.5)}.vip-theme[_ngcontent-%COMP%]   .ing-key[_ngcontent-%COMP%]{background-color:#451a03;border-color:#78350f}.vip-theme[_ngcontent-%COMP%]   .plate-shadow[_ngcontent-%COMP%]{background-color:#b45309;opacity:.5}.vip-theme[_ngcontent-%COMP%]   .glow-text[_ngcontent-%COMP%]{text-shadow:0 0 15px #fbbf24}.fever-theme[_ngcontent-%COMP%]   .card-panel[_ngcontent-%COMP%]{background-color:#2a1010;border-color:#7f1d1d}.fever-theme[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#f87171}.fever-theme[_ngcontent-%COMP%]   .value-text[_ngcontent-%COMP%]{color:#fecaca;text-shadow:0 0 10px rgba(239,68,68,.5)}.fever-theme[_ngcontent-%COMP%]   .glow-text[_ngcontent-%COMP%]{text-shadow:0 0 15px #ef4444}.bg-grid-pattern[_ngcontent-%COMP%]{background-image:radial-gradient(#334155 1px,transparent 1px);background-size:20px 20px;background-position:center}.vip-theme[_ngcontent-%COMP%]   .bg-grid-pattern[_ngcontent-%COMP%]{background-image:radial-gradient(#92400e 1px,transparent 1px)}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.4,0,.2,1) backwards}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-pop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop .15s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}.animate-float[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_floatUp .8s forwards ease-out}@keyframes _ngcontent-%COMP%_floatUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-40px)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade .2s ease-out}@keyframes _ngcontent-%COMP%_fade{0%{opacity:0}to{opacity:1}}.success[_ngcontent-%COMP%]{color:#4ade80;text-shadow:0 2px 0 #000}.error[_ngcontent-%COMP%]{color:#ef4444;text-shadow:0 2px 0 #000}.vip[_ngcontent-%COMP%]{color:#fbbf24;text-shadow:0 0 10px #b45309;font-size:2.5rem}.auto[_ngcontent-%COMP%]{color:#60a5fa;text-shadow:0 2px 0 #1e3a8a}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:2px}"],changeDetection:0})};var B0=class n{constructor(e){this.gameState=e}progress=0;maxProgress=15;itemValue=150;get progressPercent(){return Math.floor(this.progress/this.maxProgress*100)}work(){this.progress++,this.progress>=this.maxProgress&&this.finishItem()}finishItem(){this.gameState.addMoney(this.itemValue),this.progress=0}static \u0275fac=function(t){return new(t||n)(X(at))};static \u0275cmp=qe({type:n,selectors:[["app-factory-game"]],standalone:!1,decls:13,vars:4,consts:[[1,"p-8","bg-slate-800","rounded-xl","border","border-slate-700","text-white","flex","flex-col","items-center","shadow-xl"],[1,"text-2xl","font-bold","mb-8","text-blue-400"],[1,"relative","w-56","h-56","mb-8","cursor-pointer","transition-transform","active:scale-95",3,"click"],[1,"absolute","inset-0","rounded-full","border-8","border-slate-700","bg-slate-900"],[1,"absolute","inset-0","rounded-full","bg-blue-600","opacity-50","transition-all","duration-75"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","z-10","select-none"],[1,"text-4xl","font-black"],[1,"text-xs","text-slate-400","uppercase","mt-1"],[1,"w-full","max-w-xs","py-4","bg-orange-600","hover:bg-orange-500","text-white","rounded-lg","font-bold","text-xl","uppercase","tracking-wider","shadow-lg","border-b-4","border-orange-800","active:border-0","active:translate-y-1","transition-all",3,"click"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"h3",1),y(2,"\u{1F3ED} Ligne d'Assemblage"),m(),f(3,"div",2),U("click",function(){return r.work()}),W(4,"div",3)(5,"div",4),f(6,"div",5)(7,"span",6),y(8),m(),f(9,"span",7),y(10,"Assemblage"),m()()(),f(11,"button",8),U("click",function(){return r.work()}),y(12),m()()),t&2&&(_(5),we("clip-path","inset("+(100-r.progressPercent)+"% 0 0 0)"),_(3),G("",r.progressPercent,"%"),_(4),G(" PRODUIRE (+",r.itemValue,"\u20AC) "))},encapsulation:2})};var hJ=["hiddenInput"],VV=(n,e)=>[n,e],UV=(n,e,t)=>[n,e,t];function fJ(n,e){if(n&1){let t=ee();f(0,"button",23),U("click",function(i){j(t);let s=D(2);return i.stopPropagation(),$(s.drinkCoffee())}),y(1," \u2615 PAUSE "),m()}}function pJ(n,e){n&1&&(f(0,"div",24),y(1,"GEL\xC9"),m())}function mJ(n,e){if(n&1&&(f(0,"div",9)(1,"div",19)(2,"span",20),y(3),oe(4,"number"),m()(),V(5,fJ,2,0,"button",21)(6,pJ,2,0,"div",22),m()),n&2){let t=D();_(),w("ngClass",cc(8,VV,t.activeTheme.borderClass,t.activeTheme.bgClass)),_(),w("ngClass",t.activeTheme.accentClass),_(),G("",Be(4,5,t.currentWpm,"1.0-0")," WPM"),_(2),w("ngIf",t.coffeeLevel>0&&!t.isCoffeeActive&&t.coffeeAvailable),_(),w("ngIf",t.isCoffeeActive)}}function gJ(n,e){n&1&&(f(0,"div",25)(1,"span",26),y(2,"\u{1F441}\uFE0F"),m(),f(3,"span",27),y(4,"MODE SUPERVISION"),m()())}function _J(n,e){n&1&&(f(0,"span",28),W(1,"span",29)(2,"span",30),m())}function vJ(n,e){if(n&1&&(f(0,"div",31),y(1),m()),n&2){let t=e.$implicit,r=D();w("ngClass",Rp(2,UV,r.activeTheme.borderClass,r.activeTheme.accentClass,r.activeTheme.bgClass)),_(),G(" ",t," ")}}function yJ(n,e){if(n&1){let t=ee();f(0,"div",38),U("click",function(i){let s=j(t).$implicit,o=D(2);return i.stopPropagation(),$(o.startMission(s))}),f(1,"div",39)(2,"span",40),y(3),m(),f(4,"span",41),y(5),m()(),f(6,"h3",42),y(7),m(),f(8,"div",43)(9,"div",44)(10,"span",45),y(11,"Gain"),m(),f(12,"span",46),y(13),oe(14,"number"),m()(),f(15,"div",47)(16,"span",45),y(17,"Temps"),m(),f(18,"span",48),y(19),m()()()()}if(n&2){let t=e.$implicit,r=D(2);w("ngClass",Rp(12,UV,r.activeTheme.borderClass,r.activeTheme.bgClass,r.getMissionClass(t.difficulty))),_(3),te(r.getIcon(t.difficulty)),_(),w("ngClass",r.getDifficultyClass(t.difficulty)),_(),te(t.difficulty),_(2),te(t.title),_(),w("ngClass",r.activeTheme.borderClass),_(4),w("ngClass",r.activeTheme.accentClass),_(),G("",Be(14,9,r.calculateReward(t),"1.0-0")," \u20AC"),_(6),G("",t.timeLimit,"s")}}function bJ(n,e){if(n&1&&(f(0,"div",32)(1,"div",33)(2,"h2",34),y(3,"\u{1F4DC} Vos Contrats"),m(),f(4,"p",35),y(5,"Vos employ\xE9s g\xE8rent leurs propres projets en autonomie."),m(),f(6,"div",36),V(7,yJ,20,16,"div",37),m()()()),n&2){let t=D();_(7),w("ngForOf",t.availableMissions)}}function EJ(n,e){n&1&&W(0,"div",63)}function wJ(n,e){if(n&1&&(f(0,"div",64)(1,"div",65),y(2),m(),f(3,"div",66),y(4,"COMBO"),m()()),n&2){let t=D(2);le("opacity-0",t.currentCombo<2),_(),le("from-amber-400",t.currentCombo>=50),_(),G("x",t.currentCombo)}}function IJ(n,e){if(n&1&&(f(0,"div",67)(1,"div"),y(2),m(),f(3,"div"),y(4),m(),f(5,"div",68),y(6),oe(7,"number"),m()()),n&2){let t,r,i=D(2);_(2),or("CIBLE: ",i.watchedEmployee.role==="DEV_JUNIOR"?"JUNIOR":"SENIOR"," #",i.watchedEmployee.id),_(2),G("TACHE: ",((t=i.getWorkerState(i.watchedEmployee.id))==null||t.currentMission==null?null:t.currentMission.title)||"EN ATTENTE..."),_(2),G("TOTAL G\xC9N\xC9R\xC9: ",Be(7,4,((r=i.getWorkerState(i.watchedEmployee.id))==null?null:r.sessionEarnings)||0,"1.0-0")," \u20AC")}}function SJ(n,e){if(n&1&&W(0,"span",73),n&2){let t=D(4);w("ngClass",t.activeTheme.cursorClass)}}function CJ(n,e){if(n&1&&(f(0,"span"),V(1,SJ,1,1,"span",71),f(2,"span",72),y(3),m()()),n&2){let t=e.$implicit,r=D(3);_(),w("ngIf",t.index===r.getCursorIndex()),_(),w("ngClass",r.getCharClass(t.index,t.value)),_(),te(r.getDisplayChar(t.index))}}function TJ(n,e){if(n&1&&(f(0,"span",69),V(1,CJ,4,3,"span",70),m()),n&2){let t=e.$implicit;le("whitespace-nowrap",!t.isSpace),_(),w("ngForOf",t.chars)}}function DJ(n,e){n&1&&(f(0,"div",74),y(1,"CORRIGEZ !"),m())}function xJ(n,e){if(n&1&&(f(0,"div",75),y(1),oe(2,"number"),m()),n&2){let t=D(2);le("text-red-500",t.timeLeft<=5),_(),G("",Be(2,3,t.timeLeft,"1.1-1"),"s")}}function AJ(n,e){if(n&1){let t=ee();f(0,"button",76),U("click",function(){j(t);let i=D(2);return $(i.stopWatching())}),y(1," \u{1F6AB} ARR\xCATER LA SUPERVISION "),m()}}function RJ(n,e){if(n&1){let t=ee();f(0,"input",77,1),U("input",function(i){j(t);let s=D(2);return $(s.onInput(i))})("blur",function(){j(t);let i=D(2);return $(i.focusInput())}),m()}}function kJ(n,e){if(n&1&&(f(0,"div",49),W(1,"div",50),V(2,EJ,1,0,"div",51),f(3,"div",52,0),V(5,wJ,5,5,"div",53)(6,IJ,8,7,"div",54),f(7,"div",55)(8,"div",56),V(9,TJ,2,3,"span",57),m(),V(10,DJ,2,0,"div",58),m(),f(11,"div",59),V(12,xJ,3,6,"div",60)(13,AJ,2,0,"button",61),m(),V(14,RJ,2,0,"input",62),m()()),n&2){let t=D();_(),w("ngClass",t.activeTheme.bgClass),_(),w("ngIf",t.watchedEmployee),_(3),w("ngIf",!t.watchedEmployee),_(),w("ngIf",t.watchedEmployee),_(),le("shake-anim",t.hasError),_(2),w("ngForOf",t.currentDisplayTokens),_(),w("ngIf",t.isFinishedButWrong&&!t.watchedEmployee),_(2),w("ngIf",!t.watchedEmployee),_(),w("ngIf",t.watchedEmployee),_(),w("ngIf",!t.watchedEmployee)}}function PJ(n,e){if(n&1&&(f(0,"div",104),y(1),m()),n&2){let t=D(2);_(),G("",t.TEAM_BUILDING_COST,"\u20AC \u2022 30s \u2022 Boost x2.5")}}function NJ(n,e){n&1&&(f(0,"div",105)(1,"div",106),y(2,"\u{1F47B}"),m(),f(3,"div"),y(4,"Aucun employ\xE9."),m()())}function MJ(n,e){n&1&&(f(0,"div",124),y(1,"PAUSE"),m())}function OJ(n,e){n&1&&(f(0,"div",125),y(1,"ACTIF"),m())}function FJ(n,e){n&1&&(f(0,"div",126),y(1,"En attente..."),m())}function LJ(n,e){n&1&&(f(0,"div",127),y(1,"Travaille"),m())}function VJ(n,e){if(n&1&&(f(0,"div",128),W(1,"div",129),m()),n&2){let t=e.ngIf,r=D(3);_(),we("width",t.targetText&&t.targetText.length>0?t.typedText.length/t.targetText.length*100:0,"%"),w("ngClass",r.isTeamBuildingActive?"bg-orange-500":"bg-blue-500")}}function UJ(n,e){if(n&1){let t=ee();f(0,"div",107)(1,"div",108)(2,"div",109)(3,"span",40),y(4),m(),f(5,"div")(6,"div",110),y(7),m(),f(8,"div",111),y(9),m(),f(10,"div",112),y(11),oe(12,"number"),m()()(),f(13,"div",113),V(14,MJ,2,0,"div",114)(15,OJ,2,0,"div",115)(16,FJ,2,0,"div",116)(17,LJ,2,0,"div",117),m()(),V(18,VJ,2,3,"div",118),f(19,"div",119)(20,"button",120),U("click",function(){let i=j(t).$implicit,s=D(2);return $(s.watchEmployee(i))}),f(21,"span"),y(22,"\u{1F441}\uFE0F"),m(),f(23,"span",121),y(24,"VOIR \xC9CRAN"),m()(),f(25,"button",122),U("click",function(){let i=j(t).$implicit,s=D(2);return $(s.trainEmployee(i))}),f(26,"span"),y(27,"FORMATION"),m(),f(28,"span"),y(29),m()(),f(30,"button",123),U("click",function(){let i=j(t).$implicit,s=D(2);return $(s.togglePause(i))}),y(31),m()()()}if(n&2){let t,r,i,s,o,a=e.$implicit,c=e.index,u=D(2);le("opacity-50",a.isPaused),_(4),te(a.role==="DEV_JUNIOR"?"\u{1F468}\u200D\u{1F4BB}":"\u{1F9D9}\u200D\u2642\uFE0F"),_(3),G("Dev #",c+1),_(2),G("-",a.role==="DEV_JUNIOR"?u.SALARY_JUNIOR:u.SALARY_SENIOR," \u20AC/min"),_(),le("text-green-400",(((t=u.getWorkerState(a.id))==null?null:t.sessionEarnings)||0)>0)("text-slate-500",(((r=u.getWorkerState(a.id))==null?null:r.sessionEarnings)||0)===0),_(),G(" G\xE9n\xE9r\xE9: +",Be(12,18,((i=u.getWorkerState(a.id))==null?null:i.sessionEarnings)||0,"1.0-0")," \u20AC "),_(3),w("ngIf",a.isPaused),_(),w("ngIf",!a.isPaused),_(),w("ngIf",!((s=u.getWorkerState(a.id))!=null&&s.currentMission)),_(),w("ngIf",(o=u.getWorkerState(a.id))==null?null:o.currentMission),_(),w("ngIf",u.getWorkerState(a.id)),_(7),w("disabled",u.currentMoney<u.getTrainCost(a)),_(4),G("",u.getTrainCost(a),"\u20AC"),_(2),te(a.isPaused?"REPRENDRE":"METTRE EN PAUSE")}}function BJ(n,e){if(n&1){let t=ee();f(0,"div",78),U("click",function(i){return j(t),$(i.stopPropagation())}),f(1,"div",79)(2,"div",80)(3,"div",44)(4,"h3",81),y(5,"\u{1F465} GESTION & FINANCES"),m(),f(6,"div",82)(7,"span",83),y(8,"Effectif: "),f(9,"b",84),y(10),m()(),f(11,"span",83),y(12,"Charges: "),f(13,"b",85),y(14),m()(),f(15,"span",86),y(16,"Total G\xE9n\xE9r\xE9: "),f(17,"b",87),y(18),oe(19,"number"),m()()()(),f(20,"button",88),U("click",function(){j(t);let i=D();return $(i.toggleStaff())}),y(21,"\u2715"),m()(),f(22,"div",89)(23,"div",90)(24,"button",91),U("click",function(){j(t);let i=D();return $(i.startTeamBuilding())}),f(25,"span",40),y(26,"\u{1F355}"),m(),f(27,"div",92)(28,"div"),y(29),m(),V(30,PJ,2,1,"div",93),m()(),f(31,"div",94)(32,"div",95),y(33,"Stagiaire"),m(),f(34,"div",96),y(35),m(),f(36,"button",97),U("click",function(){j(t);let i=D();return $(i.hire(0))}),y(37),m()(),f(38,"div",98)(39,"div",95),y(40,"Senior"),m(),f(41,"div",96),y(42),m(),f(43,"button",99),U("click",function(){j(t);let i=D();return $(i.hire(1))}),y(44),m()()(),f(45,"div",100),V(46,NJ,5,0,"div",101),f(47,"div",102),V(48,UJ,32,21,"div",103),m()()()()()}if(n&2){let t=D();_(10),te(t.employees.length),_(4),G("-",t.totalSalaryCost," \u20AC / min"),_(4),G("+",Be(19,15,t.totalSessionEarnings,"1.0-0")," \u20AC"),_(6),w("disabled",t.currentMoney<t.TEAM_BUILDING_COST||t.isTeamBuildingActive)("ngClass",t.isTeamBuildingActive?"bg-green-600 text-white animate-pulse":"bg-gradient-to-r from-orange-600 to-red-600 text-white hover:brightness-110"),_(5),te(t.isTeamBuildingActive?"PARTY EN COURS !":"PIZZA PARTY"),_(),w("ngIf",!t.isTeamBuildingActive),_(5),G("Petits contrats. Co\xFBt: ",t.SALARY_JUNIOR,"\u20AC/min"),_(),w("disabled",!t.canHire(0)),_(),G("",t.getHireCost(0)," \u20AC"),_(5),G("Gros contrats. Co\xFBt: ",t.SALARY_SENIOR,"\u20AC/min"),_(),w("disabled",!t.canHire(1)),_(),G("",t.getHireCost(1)," \u20AC"),_(2),w("ngIf",t.employees.length===0),_(2),w("ngForOf",t.employees)}}function jJ(n,e){if(n&1&&(f(0,"div",142)(1,"span"),y(2,"Bonus \xC9cran"),m(),f(3,"span"),y(4),oe(5,"number"),m()()),n&2){let t=D(3);_(4),G("+",Be(5,1,t.getScreenBonus((t.activeMission==null?null:t.activeMission.reward)||0),"1.0-0")," \u20AC")}}function $J(n,e){if(n&1&&(f(0,"div",136)(1,"div",119)(2,"div",137)(3,"span"),y(4,"Base"),m(),f(5,"span"),y(6),m()(),f(7,"div",138)(8,"span"),y(9,"Combo"),m(),f(10,"span"),y(11),m()(),V(12,jJ,6,4,"div",139),W(13,"div",140),f(14,"div",141)(15,"span"),y(16,"TOTAL"),m(),f(17,"span"),y(18),oe(19,"number"),m()()()()),n&2){let t=D(2);_(6),G("",t.activeMission==null?null:t.activeMission.reward," \u20AC"),_(5),G("+",t.maxComboReached," \u20AC"),_(),w("ngIf",t.screenLevel>0),_(6),G("+",Be(19,4,t.lastReward,"1.0-0")," \u20AC")}}function HJ(n,e){if(n&1){let t=ee();f(0,"div",130),U("click",function(i){return j(t),$(i.stopPropagation())}),f(1,"div",131)(2,"div",132),y(3),m(),f(4,"h3",133),y(5),m(),V(6,$J,20,7,"div",134),f(7,"button",135),U("click",function(){j(t);let i=D();return $(i.closeResult())}),y(8,"Continuer \u27A1\uFE0F"),m()()()}if(n&2){let t=D();_(3),te(t.missionResult==="SUCCESS"?"\u{1F3C6}":"\u{1F480}"),_(),le("text-green-400",t.missionResult==="SUCCESS")("text-red-400",t.missionResult==="FAIL"),_(),te(t.missionResult==="SUCCESS"?"CONTRAT REMPLI":"\xC9CHEC"),_(),w("ngIf",t.missionResult==="SUCCESS")}}var j0=class n{constructor(e,t,r){this.gameStateService=e;this.soundService=t;this.cdr=r}hiddenInput;availableMissions=[];activeMission=null;currentLineIndex=0;currentTargetLine="";currentDisplayTokens=[];userInput="";timeLeft=0;timerInterval;missionResult=null;lastReward=0;hasError=!1;currentCombo=0;maxComboReached=0;startTime=0;endTime=0;totalCharsTyped=0;isShopOpen=!1;isStaffOpen=!1;chairLevel=0;screenLevel=0;coffeeLevel=0;pcLevel=0;isCoffeeActive=!1;coffeeAvailable=!0;currentMoney=0;contractsCompleted=0;employees=[];workerStates={};workerInterval;notifications=[];watchedEmployee=null;activeTheme=Ea[0];isTeamBuildingActive=!1;teamBuildingEndTime=0;TEAM_BUILDING_COST=2e3;TEAM_BUILDING_DURATION=3e4;salaryInterval;SALARY_INTERVAL_MS=6e4;SALARY_JUNIOR=150;SALARY_SENIOR=450;get totalSalaryCost(){return this.employees.reduce((e,t)=>{let r=t.role==="DEV_JUNIOR"?this.SALARY_JUNIOR:this.SALARY_SENIOR;return e+r},0)}get totalSessionEarnings(){return Object.values(this.workerStates).reduce((e,t)=>e+(t.sessionEarnings||0),0)}WORDS_EASY=["chat","chien","ami","pain","eau","mer","ciel","mur","sac","bus","lit","bol","the","sel","coq","or","loi","nez","vis","rue","pin","pot","jeu","gaz","main","pied","joie","papa","cafe"];WORDS_HARD=["voiture","maison","enfant","ecole","manger","dormir","prendre","parler","soleil","jardin","fleur","oiseau","pomme","table","chaise","livre","crayon","porte","fenetre","arbres","nuage","pluie","neige","route","ville","famille","musique","bonheur","sourire","liberte","courage","vitesse"];WORDS_HACKER=["mainframe","firewall","bypass","encrypt","socket","buffer","overflow","inject","root","sudo","access","denied","proxy","daemon","kernel","panic","matrix","cyber","secure","token"];get isFinishedButWrong(){return this.userInput.length===this.currentTargetLine.length&&this.userInput!==this.currentTargetLine}get currentWpm(){if(!this.startTime)return 0;let t=((this.endTime||Date.now())-this.startTime)/6e4;return t<.001?0:Math.floor(this.totalCharsTyped/5/t)}ngOnInit(){this.gameStateService.gameState$.subscribe(e=>{if(this.currentMoney=e.money,e.freelanceUpgrades){this.chairLevel=e.freelanceUpgrades.chairLevel,this.screenLevel=e.freelanceUpgrades.screenLevel,this.coffeeLevel=e.freelanceUpgrades.coffeeLevel,this.pcLevel=e.freelanceUpgrades.pcLevel,this.contractsCompleted=e.freelanceUpgrades.contractsCompleted||0;let r=e.freelanceUpgrades.activeThemeId,i=Ea.find(s=>s.id===r);i&&(this.activeTheme=i)}let t=e.companies.find(r=>r.id==="2");t&&(this.employees=t.employees,this.employees.forEach(r=>{this.workerStates[r.id]||(this.workerStates[r.id]={currentMission:null,targetText:"",typedText:"",progress:0,status:"IDLE",cooldown:0,sessionEarnings:0})})),this.cdr.markForCheck()}),this.generateMissions(),this.startWorkerSimulation(),this.startSalaryTimer()}ngOnDestroy(){this.stopTimer(),this.stopWatching(),this.workerInterval&&clearInterval(this.workerInterval),this.salaryInterval&&clearInterval(this.salaryInterval)}focusInput(){!this.isShopOpen&&!this.isStaffOpen&&!this.watchedEmployee&&!this.missionResult&&this.activeMission&&setTimeout(()=>{this.hiddenInput&&this.hiddenInput.nativeElement.focus()},0)}toggleShop(){this.isShopOpen=!this.isShopOpen,this.isStaffOpen=!1,this.isShopOpen||this.focusInput(),this.cdr.markForCheck()}toggleStaff(){this.isStaffOpen=!this.isStaffOpen,this.isShopOpen=!1,this.cdr.markForCheck()}startTeamBuilding(){this.currentMoney>=this.TEAM_BUILDING_COST&&!this.isTeamBuildingActive&&(this.gameStateService.addMoney(-this.TEAM_BUILDING_COST),this.isTeamBuildingActive=!0,this.teamBuildingEndTime=Date.now()+this.TEAM_BUILDING_DURATION,this.soundService.playSuccess(),this.showNotification("\u{1F355} PIZZA PARTY ACTIV\xC9E ! (+150% Vitesse)"),setTimeout(()=>{this.isTeamBuildingActive=!1,this.showNotification("Fin de la Pizza Party..."),this.cdr.markForCheck()},this.TEAM_BUILDING_DURATION))}getCost(e){return{CHAIR:2e3,SCREEN:5e3,COFFEE:1500,PC:2e4}[e]||0}canBuy(e){return this.currentMoney>=this.getCost(e)}buyItem(e){this.gameStateService.buySetupUpgrade(e,this.getCost(e))}getHireCost(e){let t=e===0?"DEV_JUNIOR":"DEV_SENIOR";return this.gameStateService.getNextHireCost("2",t)}canHire(e){return this.currentMoney>=this.getHireCost(e)}hire(e){let t=e===0?"DEV_JUNIOR":"DEV_SENIOR";this.gameStateService.hireEmployee("2",t)}getTrainCost(e){return Math.floor(500*Math.pow(1.5,e.efficiency))}trainEmployee(e){this.gameStateService.upgradeEmployeeSetup("2",e.id,this.getTrainCost(e))}togglePause(e){this.gameStateService.toggleEmployeePause("2",e.id)}drinkCoffee(){this.isCoffeeActive||!this.coffeeAvailable||(this.isCoffeeActive=!0,this.coffeeAvailable=!1,this.soundService.playPop(),setTimeout(()=>{this.isCoffeeActive=!1,this.cdr.markForCheck()},5e3))}startSalaryTimer(){this.salaryInterval&&clearInterval(this.salaryInterval),this.salaryInterval=setInterval(()=>{this.paySalaries()},this.SALARY_INTERVAL_MS)}paySalaries(){let e=this.totalSalaryCost;e>0&&(this.gameStateService.addMoney(-e),this.soundService.playRandomKey(),this.showNotification(`\u{1F4B8} Salaires vers\xE9s : -${e} \u20AC`),this.cdr.markForCheck())}startWorkerSimulation(){this.workerInterval&&clearInterval(this.workerInterval),this.workerInterval=setInterval(()=>{this.employees.forEach(e=>{if(e.isPaused)return;let t=this.workerStates[e.id];if(t){if(t.status==="IDLE")if(t.cooldown>0)t.cooldown-=this.isTeamBuildingActive?.3:.1;else{let r=e.role==="DEV_JUNIOR"?Math.random()>.7?"MEDIUM":"EASY":"HARD",i=this.createMission(0,r);t.currentMission=i,t.targetText=i.lines[0],t.typedText="",t.status="WORKING"}else if(t.status==="WORKING"&&t.targetText){let r=e.role==="DEV_SENIOR"?.3:.1;if(r+=e.efficiency*.05,this.isTeamBuildingActive&&(r*=2.5),Math.random()<r&&(t.typedText+=t.targetText[t.typedText.length],this.watchedEmployee&&this.watchedEmployee.id===e.id&&(this.currentDisplayTokens=this.prepareDisplayTokens(t.targetText),this.soundService.playRandomKey()),t.typedText.length>=t.targetText.length)){let i=Math.floor(t.currentMission.reward*.2);this.gameStateService.addMoney(i),t.sessionEarnings=(t.sessionEarnings||0)+i,this.showNotification(`+${i}\u20AC (${e.role==="DEV_JUNIOR"?"Jr":"Sr"})`),t.status="IDLE",t.currentMission=null,t.cooldown=3}}}}),this.cdr.markForCheck()},100)}getWorkerState(e){return this.workerStates[e]}showNotification(e){this.notifications.push(e),setTimeout(()=>{this.notifications.shift(),this.cdr.markForCheck()},2e3)}watchEmployee(e){this.watchedEmployee=e,this.isStaffOpen=!1;let t=this.workerStates[e.id];t&&t.targetText&&(this.currentDisplayTokens=this.prepareDisplayTokens(t.targetText)),this.cdr.markForCheck()}stopWatching(){this.watchedEmployee=null,this.activeMission&&(this.loadLine(this.activeMission.lines[this.currentLineIndex]),setTimeout(()=>this.focusInput(),100)),this.isStaffOpen=!0,this.cdr.markForCheck()}generateMissions(){this.availableMissions=[];let e=.05+this.pcLevel*.02,t=this.pcLevel>0?.1:0;for(let r=0;r<3;r++){let i=Math.random();if(i<e)this.availableMissions.push(this.createMission(r,"BOSS"));else if(i<e+t)this.availableMissions.push(this.createMission(r,"HACKER"));else{let s=Math.random()>.6?"HARD":Math.random()>.3?"MEDIUM":"EASY";this.availableMissions.push(this.createMission(r,s))}}}createMission(e,t){let r=30,i=100,s=2,o=5;return t==="BOSS"?(r=45,i=5e3,s=5,o=10):t==="HACKER"?(r=20,i=2e3,s=4,o=6):t==="EASY"?(r=20,i=150,s=2,o=4):t==="MEDIUM"?(r=35,i=400,s=3,o=6):(r=50,i=1e3,s=4,o=8),{id:e,title:t==="BOSS"?"URGENCE":t==="HACKER"?"HACKING":"Mission",description:t==="HACKER"?"Piratage...":"Tapez vite.",difficulty:t,reward:i,timeLimit:r,lines:this.generateRandomLines(s,o,t)}}generateRandomLines(e,t,r){let i=[],s=r==="HACKER"?this.WORDS_HACKER:r==="HARD"||r==="BOSS"?this.WORDS_HARD:this.WORDS_EASY;for(let o=0;o<e;o++){let a=[];for(let c=0;c<t;c++)a.push(s[Math.floor(Math.random()*s.length)]);i.push(a.join(" "))}return i}prepareDisplayTokens(e){let t=[],r=0;return e.split(/(\s+)/).forEach(s=>{if(s.length===0)return;let o=[];for(let a=0;a<s.length;a++)o.push({value:s[a],index:r}),r++;t.push({isSpace:/^\s+$/.test(s),chars:o})}),t}startMission(e){this.activeMission=e,this.currentLineIndex=0,this.loadLine(e.lines[0]),this.userInput="",this.timeLeft=e.timeLimit,this.missionResult=null,this.currentCombo=0,this.maxComboReached=0,this.totalCharsTyped=0,this.startTime=Date.now(),this.endTime=0,this.isCoffeeActive=!1,this.coffeeAvailable=!0,this.startTimer(),this.soundService.playPop(),setTimeout(()=>this.focusInput(),100),this.cdr.markForCheck()}loadLine(e){this.currentTargetLine=e,this.currentDisplayTokens=this.prepareDisplayTokens(e),this.userInput="",this.hiddenInput&&(this.hiddenInput.nativeElement.value="")}startTimer(){this.stopTimer();let e=Date.now();this.timerInterval=setInterval(()=>{if(this.isCoffeeActive){e=Date.now();return}let t=Date.now(),r=(t-e)/1e3;e=t;let i=1-this.chairLevel*.2;this.timeLeft-=r*i,this.timeLeft<=0&&(this.timeLeft=0,this.endMission(!1)),this.cdr.markForCheck()},100)}stopTimer(){this.timerInterval&&clearInterval(this.timerInterval)}handleKeyboard(e){!this.activeMission||this.missionResult||this.isShopOpen||this.isStaffOpen||this.watchedEmployee||this.focusInput()}onInput(e){if(!this.activeMission||this.missionResult)return;let t=e.target.value;t.length>this.currentTargetLine.length?(this.userInput=t.slice(0,this.currentTargetLine.length),e.target.value=this.userInput):this.userInput=t,this.userInput.length>this.totalCharsTyped&&(this.userInput[this.userInput.length-1]===" "?this.soundService.playSpace():this.soundService.playRandomKey(),this.checkInput()),this.totalCharsTyped=this.userInput.length,this.cdr.markForCheck()}checkInput(){let e=this.userInput.length-1;e<0||(this.userInput[e]===this.currentTargetLine[e]?(this.currentCombo++,this.currentCombo>this.maxComboReached&&(this.maxComboReached=this.currentCombo)):(this.currentCombo=0,this.triggerError()),this.userInput===this.currentTargetLine&&(this.soundService.playSuccess(),setTimeout(()=>this.nextLine(),150)))}triggerError(){this.hasError=!0,this.soundService.playError(),setTimeout(()=>{this.hasError=!1,this.cdr.markForCheck()},300)}nextLine(){this.currentLineIndex++,this.activeMission&&this.currentLineIndex>=this.activeMission.lines.length?this.endMission(!0):this.activeMission&&(this.loadLine(this.activeMission.lines[this.currentLineIndex]),this.cdr.markForCheck())}calculateReward(e){let t=e.reward*(this.screenLevel*.5);return e.reward+t}getScreenBonus(e){return e*(this.screenLevel*.5)}endMission(e){if(this.stopTimer(),this.endTime=Date.now(),this.missionResult=e?"SUCCESS":"FAIL",e&&this.activeMission){let t=this.currentWpm;this.gameStateService.gameState$.pipe(st(1)).subscribe(s=>{let o=O({},s.stats);o.maxWpm=Math.max(o.maxWpm||0,t),o.totalCharsTyped=(o.totalCharsTyped||0)+this.totalCharsTyped,this.gameStateService.updateState({stats:o})});let r=this.calculateReward(this.activeMission),i=this.maxComboReached;this.lastReward=r+i,this.gameStateService.addMoney(this.lastReward),this.gameStateService.incrementContractsCompleted(),this.activeMission.difficulty==="BOSS"&&this.gameStateService.incrementBossBeaten(),this.soundService.playSuccess()}else this.soundService.playError();this.cdr.markForCheck()}closeResult(){this.missionResult=null,this.activeMission=null,this.generateMissions(),this.cdr.markForCheck()}getCursorIndex(){return this.watchedEmployee?this.workerStates[this.watchedEmployee.id]?.typedText.length||0:this.userInput.length}getDisplayChar(e){if(this.watchedEmployee){let t=this.workerStates[this.watchedEmployee.id];return t?e<t.typedText.length?t.typedText[e]:t.targetText[e]:""}return e<this.userInput.length?this.userInput[e]:this.currentTargetLine[e]}getCharClass(e,t){if(this.watchedEmployee){let i=this.workerStates[this.watchedEmployee.id];return i?e>=i.typedText.length?this.activeTheme.textClass+" opacity-40":this.activeTheme.successClass:""}if(e>=this.userInput.length)return this.activeTheme.textClass+" opacity-40";let r=this.userInput[e];return r===t?this.activeTheme.successClass:r===" "?"bg-red-500/50 text-white":"text-red-500 font-bold"}getIcon(e){return e==="BOSS"?"\u{1F479}":e==="HACKER"?"\u{1F4BB}":e==="EASY"?"\u{1F7E2}":e==="MEDIUM"?"\u{1F7E0}":"\u{1F534}"}getDifficultyClass(e){return e==="HACKER"?"border-green-500 text-green-500 bg-green-900/20":e==="BOSS"?"border-red-500 text-red-500 bg-red-900/20 animate-pulse":"border-slate-500 text-slate-500"}getMissionClass(e){return e==="HACKER"?"border-green-500 bg-green-900/10":e==="BOSS"?"border-red-500 bg-red-900/10":"border-slate-700 bg-slate-800"}static \u0275fac=function(t){return new(t||n)(X(at),X(Wt),X(Dt))};static \u0275cmp=qe({type:n,selectors:[["app-freelance-dev-game"]],viewQuery:function(t,r){if(t&1&&Pi(hJ,5),t&2){let i;Jr(i=Zr())&&(r.hiddenInput=i.first)}},hostBindings:function(t,r){t&1&&U("keydown",function(s){return r.handleKeyboard(s)},yu)},standalone:!1,decls:23,vars:18,consts:[["gameZone",""],["hiddenInput",""],[1,"h-full","font-sans","flex","flex-col","relative","overflow-hidden","select-none","transition-colors","duration-500",3,"click","ngClass"],[1,"p-4","border-b","flex","justify-between","items-center","shadow-md","z-10","relative",3,"ngClass"],[1,"flex","items-center","gap-4"],[1,"w-3","h-3","rounded-full","bg-red-500","animate-pulse"],[1,"text-sm","font-bold","opacity-50","hidden","sm:block"],["class","flex items-center gap-3",4,"ngIf"],["class","flex items-center gap-3 bg-red-900/30 border border-red-500/50 px-3 py-1 rounded text-red-400 animate-pulse",4,"ngIf"],[1,"flex","items-center","gap-3"],[1,"px-3","py-1","bg-blue-600","hover:bg-blue-500","text-white","text-xs","font-bold","rounded","shadow","flex","items-center","gap-2","transition-all","relative",3,"click"],["class","absolute -top-1 -right-1 flex h-2 w-2",4,"ngIf"],[1,"font-bold","font-mono","text-lg",3,"ngClass"],[1,"absolute","top-20","right-4","z-20","pointer-events-none","flex","flex-col","gap-2","items-end"],["class","backdrop-blur px-3 py-1 rounded border text-xs shadow-lg animate-fade-out-up",3,"ngClass",4,"ngFor","ngForOf"],["class","flex-1 p-8 overflow-y-auto custom-scroll",4,"ngIf"],["class","flex-1 flex flex-col relative transition-colors duration-500",4,"ngIf"],["class","absolute inset-0 bg-slate-950/95 z-50 flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],["class","absolute inset-0 bg-slate-900/90 z-50 flex items-center justify-center backdrop-blur-md animate-fade-in",3,"click",4,"ngIf"],[1,"px-3","py-1","rounded-full","border","text-xs","font-bold","flex","gap-2",3,"ngClass"],[3,"ngClass"],["class","bg-amber-700 hover:bg-amber-600 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 transition-all animate-bounce",3,"click",4,"ngIf"],["class","text-amber-400 text-xs font-black animate-pulse",4,"ngIf"],[1,"bg-amber-700","hover:bg-amber-600","text-white","px-3","py-1","rounded-full","text-xs","font-bold","flex","items-center","gap-1","transition-all","animate-bounce",3,"click"],[1,"text-amber-400","text-xs","font-black","animate-pulse"],[1,"flex","items-center","gap-3","bg-red-900/30","border","border-red-500/50","px-3","py-1","rounded","text-red-400","animate-pulse"],[1,"text-lg"],[1,"font-black","text-xs","uppercase","tracking-widest"],[1,"absolute","-top-1","-right-1","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-green-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-green-500"],[1,"backdrop-blur","px-3","py-1","rounded","border","text-xs","shadow-lg","animate-fade-out-up",3,"ngClass"],[1,"flex-1","p-8","overflow-y-auto","custom-scroll"],[1,"max-w-4xl","mx-auto"],[1,"text-3xl","font-black","mb-2","tracking-tight","flex","items-center","gap-3"],[1,"opacity-60","mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","group relative border rounded-xl p-5 cursor-pointer transition-all hover:-translate-y-1 hover:shadow-xl",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"group","relative","border","rounded-xl","p-5","cursor-pointer","transition-all","hover:-translate-y-1","hover:shadow-xl",3,"click","ngClass"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-2xl"],[1,"px-2","py-1","rounded","text-[10px]","font-bold","uppercase","tracking-wider","border",3,"ngClass"],[1,"font-bold","text-lg","mb-1","transition-colors","group-hover:opacity-80"],[1,"mt-4","pt-4","border-t","flex","justify-between","items-center",3,"ngClass"],[1,"flex","flex-col"],[1,"text-[10px]","opacity-60","uppercase"],[1,"font-bold",3,"ngClass"],[1,"flex","flex-col","items-end"],[1,"font-bold"],[1,"flex-1","flex","flex-col","relative","transition-colors","duration-500"],[1,"absolute","inset-0","opacity-10","pointer-events-none",3,"ngClass"],["class","absolute inset-0 pointer-events-none z-10 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] bg-[length:100%_4px,3px_100%]",4,"ngIf"],[1,"flex-1","p-8","flex","flex-col","justify-center","items-center","relative","overflow-hidden"],["class","absolute top-10 right-10 flex flex-col items-end transition-all duration-200 z-30",3,"opacity-0",4,"ngIf"],["class","absolute top-10 left-10 z-30 font-mono text-sm opacity-70",4,"ngIf"],[1,"relative","z-20","w-full","max-w-5xl","text-center","leading-relaxed","select-none","cursor-text","transition-transform","duration-100"],[1,"text-4xl","font-sans","font-medium","tracking-normal","opacity-80"],["class","inline-block",3,"whitespace-nowrap",4,"ngFor","ngForOf"],["class","mt-8 text-red-500 font-bold text-xl animate-bounce",4,"ngIf"],[1,"absolute","bottom-8","flex","flex-col","items-center","z-30"],["class","text-5xl font-mono font-black transition-colors duration-300 drop-shadow-lg",3,"text-red-500",4,"ngIf"],["class","px-6 py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded shadow-lg transition-transform active:scale-95 flex items-center gap-2",3,"click",4,"ngIf"],["type","text","class","absolute opacity-0 top-0 left-0 h-full w-full cursor-text","autofocus","","autocomplete","off","spellcheck","false",3,"input","blur",4,"ngIf"],[1,"absolute","inset-0","pointer-events-none","z-10","bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))]","bg-[length:100%_4px,3px_100%]"],[1,"absolute","top-10","right-10","flex","flex-col","items-end","transition-all","duration-200","z-30"],[1,"text-6xl","font-black","italic","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-b","from-white","to-slate-400"],[1,"text-xs","font-bold","opacity-50","uppercase","tracking-widest"],[1,"absolute","top-10","left-10","z-30","font-mono","text-sm","opacity-70"],[1,"text-green-400","mt-2"],[1,"inline-block"],[4,"ngFor","ngForOf"],["class","inline-block w-[3px] h-8 align-middle animate-pulse -mb-1 mr-[1px] rounded-full shadow-[0_0_15px_rgba(59,130,246,1)]",3,"ngClass",4,"ngIf"],[1,"transition-all","duration-150","border-b-2","border-transparent","inline-block","min-w-[12px]","whitespace-pre","text-center",3,"ngClass"],[1,"inline-block","w-[3px]","h-8","align-middle","animate-pulse","-mb-1","mr-[1px]","rounded-full","shadow-[0_0_15px_rgba(59,130,246,1)]",3,"ngClass"],[1,"mt-8","text-red-500","font-bold","text-xl","animate-bounce"],[1,"text-5xl","font-mono","font-black","transition-colors","duration-300","drop-shadow-lg"],[1,"px-6","py-3","bg-red-600","hover:bg-red-500","text-white","font-bold","rounded","shadow-lg","transition-transform","active:scale-95","flex","items-center","gap-2",3,"click"],["type","text","autofocus","","autocomplete","off","spellcheck","false",1,"absolute","opacity-0","top-0","left-0","h-full","w-full","cursor-text",3,"input","blur"],[1,"absolute","inset-0","bg-slate-950/95","z-50","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-slate-700","w-full","max-w-4xl","h-[85%]","rounded-2xl","shadow-2xl","flex","flex-col","overflow-hidden"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-900"],[1,"font-black","text-white","text-2xl","flex","items-center","gap-3"],[1,"text-xs","font-mono","mt-2","flex","gap-4"],[1,"text-slate-400","bg-slate-800","px-2","py-1","rounded"],[1,"text-white"],[1,"text-red-400"],[1,"text-slate-400","bg-slate-800","px-2","py-1","rounded","border","border-green-500/30"],[1,"text-green-400"],[1,"w-8","h-8","rounded-full","bg-slate-800","hover:bg-slate-700","text-slate-400","flex","items-center","justify-center","transition-colors",3,"click"],[1,"flex-1","flex","overflow-hidden"],[1,"w-1/3","bg-slate-950","p-4","border-r","border-slate-800","flex","flex-col","gap-4","overflow-y-auto"],[1,"w-full","py-4","rounded-xl","font-black","text-sm","uppercase","tracking-wider","shadow-lg","flex","flex-col","items-center","justify-center","gap-2","transition-all","transform","active:scale-95","border","border-white/10",3,"click","disabled","ngClass"],[1,"text-center","leading-tight"],["class","text-[10px] opacity-80 font-normal mt-1",4,"ngIf"],[1,"bg-slate-900","p-3","rounded","border","border-slate-800","hover:border-blue-500","transition-colors","mt-2"],[1,"font-bold","text-white"],[1,"text-xs","text-slate-400","mb-2"],[1,"w-full","py-2","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-800","text-white","text-xs","font-bold","rounded",3,"click","disabled"],[1,"bg-slate-900","p-3","rounded","border","border-slate-800","hover:border-purple-500","transition-colors"],[1,"w-full","py-2","bg-purple-600","hover:bg-purple-500","disabled:bg-slate-800","text-white","text-xs","font-bold","rounded",3,"click","disabled"],[1,"flex-1","p-6","bg-slate-900","overflow-y-auto","custom-scroll"],["class","h-full flex flex-col items-center justify-center text-slate-600",4,"ngIf"],[1,"grid","grid-cols-2","gap-4"],["class","bg-slate-800 p-3 rounded-lg border border-slate-700 relative",3,"opacity-50",4,"ngFor","ngForOf"],[1,"text-[10px]","opacity-80","font-normal","mt-1"],[1,"h-full","flex","flex-col","items-center","justify-center","text-slate-600"],[1,"text-4xl","mb-2"],[1,"bg-slate-800","p-3","rounded-lg","border","border-slate-700","relative"],[1,"flex","justify-between","items-start","mb-2"],[1,"flex","items-center","gap-2"],[1,"font-bold","text-white","text-sm"],[1,"text-[9px]","font-mono","text-red-400"],[1,"text-[9px]","font-mono","font-bold"],[1,"flex","flex-col","gap-1","items-end"],["class","text-[10px] bg-red-900 text-red-300 px-2 py-0.5 rounded",4,"ngIf"],["class","text-[10px] bg-green-900 text-green-300 px-2 py-0.5 rounded",4,"ngIf"],["class","text-[9px] text-slate-400 mt-1",4,"ngIf"],["class","text-[9px] text-blue-400 mt-1",4,"ngIf"],["class","h-1 w-full bg-black rounded-full mb-2 overflow-hidden",4,"ngIf"],[1,"flex","flex-col","gap-2"],[1,"w-full","py-1.5","bg-slate-700","hover:bg-slate-600","text-white","text-[10px]","font-bold","rounded","border","border-slate-600","flex","items-center","justify-center","gap-2","group",3,"click"],[1,"group-hover:text-blue-200"],[1,"w-full","py-1.5","bg-green-700","hover:bg-green-600","disabled:bg-slate-700","text-white","text-[10px]","font-bold","rounded","flex","justify-between","px-2",3,"click","disabled"],[1,"w-full","py-1.5","bg-slate-700","hover:bg-slate-600","text-white","text-[10px]","font-bold","rounded",3,"click"],[1,"text-[10px]","bg-red-900","text-red-300","px-2","py-0.5","rounded"],[1,"text-[10px]","bg-green-900","text-green-300","px-2","py-0.5","rounded"],[1,"text-[9px]","text-slate-400","mt-1"],[1,"text-[9px]","text-blue-400","mt-1"],[1,"h-1","w-full","bg-black","rounded-full","mb-2","overflow-hidden"],[1,"h-full","transition-all","duration-300",3,"ngClass"],[1,"absolute","inset-0","bg-slate-900/90","z-50","flex","items-center","justify-center","backdrop-blur-md","animate-fade-in",3,"click"],[1,"bg-slate-800","p-8","rounded-2xl","border-2","shadow-2xl","max-w-sm","w-full","text-center"],[1,"text-6xl","mb-4"],[1,"text-2xl","font-black","uppercase","mb-6"],["class","bg-green-900/20 p-4 rounded-xl mb-6 border border-green-500/30 w-full",4,"ngIf"],[1,"w-full","py-4","rounded-xl","font-bold","uppercase","tracking-wider","transition-all","shadow-lg","active:scale-95","bg-slate-700","hover:bg-slate-600","text-white",3,"click"],[1,"bg-green-900/20","p-4","rounded-xl","mb-6","border","border-green-500/30","w-full"],[1,"flex","justify-between","items-center","text-sm","text-green-200/70"],[1,"flex","justify-between","items-center","text-sm","text-amber-400","font-bold"],["class","flex justify-between items-center text-sm text-purple-400 font-bold",4,"ngIf"],[1,"h-px","bg-green-500/30","my-1"],[1,"flex","justify-between","items-center","text-2xl","font-black","text-green-400"],[1,"flex","justify-between","items-center","text-sm","text-purple-400","font-bold"]],template:function(t,r){t&1&&(f(0,"div",2),U("click",function(){return r.focusInput()}),f(1,"div",3)(2,"div",4),W(3,"div",5),f(4,"span",6),y(5,"FreelanceOS v30"),m(),V(6,mJ,7,11,"div",7)(7,gJ,5,0,"div",8),m(),f(8,"div",9)(9,"button",10),U("click",function(s){return s.stopPropagation(),r.toggleStaff()}),f(10,"span"),y(11,"\u{1F465}"),m(),y(12," \xC9QUIPE "),V(13,_J,3,0,"span",11),m(),f(14,"div",12),y(15),oe(16,"number"),m()()(),f(17,"div",13),V(18,vJ,2,6,"div",14),m(),V(19,bJ,8,1,"div",15)(20,kJ,15,11,"div",16)(21,BJ,49,18,"div",17)(22,HJ,9,7,"div",18),m()),t&2&&(w("ngClass",cc(15,VV,r.activeTheme.bgClass,r.activeTheme.textClass)),_(),w("ngClass",r.activeTheme.borderClass),_(5),w("ngIf",r.activeMission&&!r.watchedEmployee),_(),w("ngIf",r.watchedEmployee),_(6),w("ngIf",r.employees.length>0),_(),w("ngClass",r.activeTheme.accentClass),_(),G(" ",Be(16,12,r.currentMoney,"1.0-0")," \u20AC "),_(3),w("ngForOf",r.notifications),_(),w("ngIf",!r.activeMission&&!r.watchedEmployee),_(),w("ngIf",r.activeMission||r.watchedEmployee),_(),w("ngIf",r.isStaffOpen),_(),w("ngIf",r.missionResult))},dependencies:[Oi,Nt,xt,Bt],styles:[".custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:3px}.shake-anim[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .2s cubic-bezier(.36,.07,.19,.97) both}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-2px,0,0)}20%,80%{transform:translate3d(4px,0,0)}40%,60%{transform:translate3d(6px,0,0)}}.neon-glow[_ngcontent-%COMP%]{color:#4ade80;text-shadow:0 0 5px #4ade80,0 0 10px #4ade80;font-weight:900;transform:scale(1.1)}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.animate-fade-out-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOutUp 2s ease-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}"],changeDetection:0})};var H0=n=>({$implicit:n}),BV=()=>["WIN","LOSE","PUSH","BLACKJACK"],QT=()=>["WIN","BLACKJACK"];function zJ(n,e){if(n&1&&(f(0,"div",37)(1,"div",38)(2,"div",39)(3,"span",40),W(4,"span",41),y(5," Session En Cours "),m()(),f(6,"div",42)(7,"div",43)(8,"span",44),y(9,"Gain Net"),m(),f(10,"span",45),y(11),oe(12,"number"),m()(),f(13,"div",46)(14,"span",47),y(15,"Pertes"),m(),f(16,"span",48),y(17),oe(18,"number"),m()(),f(19,"div",49)(20,"div",50)(21,"span",51),y(22,"Mains"),m(),f(23,"span",52),y(24),m()(),f(25,"div",50)(26,"span",51),y(27,"Blackjacks"),m(),f(28,"span",53),y(29),m()()()()()()),n&2){let t=D();w("@fadeIn",void 0),_(10),le("text-green-400",t.sessionStats.netProfit>0)("text-red-400",t.sessionStats.netProfit<0)("text-slate-400",t.sessionStats.netProfit===0),w("@statPop",t.sessionStats.netProfit),_(),or(" ",t.sessionStats.netProfit>0?"+":"","",Me(12,13,t.sessionStats.netProfit)," \u20AC "),_(6),G("-",Me(18,15,t.sessionStats.totalLost)," \u20AC"),_(7),te(t.sessionStats.handsPlayed),_(5),te(t.sessionStats.blackjacks)}}function qJ(n,e){if(n&1&&(f(0,"span",54),y(1),m()),n&2){let t=D();_(),te(t.dealerScore)}}function WJ(n,e){n&1&&An(0)}function KJ(n,e){if(n&1&&(f(0,"div",55),V(1,WJ,1,0,"ng-container",56),m()),n&2){let t=e.$implicit,r=e.index,i=D(),s=sr(48);we("z-index",r)("transform","translateX("+(r-(i.dealerHand.length-1)/2)*45+"px)"),w("@dealCard",void 0),_(),w("ngTemplateOutlet",s)("ngTemplateOutletContext",Bn(7,H0,t))}}function YJ(n,e){n&1&&(f(0,"div",62),y(1,"Miser Ici"),m())}function QJ(n,e){n&1&&An(0)}function JJ(n,e){if(n&1&&(f(0,"div",63),V(1,QJ,1,0,"ng-container",56),m()),n&2){let t=D().$implicit;D(2);let r=sr(46);w("@chipDrop",void 0),_(),w("ngTemplateOutlet",r)("ngTemplateOutletContext",Bn(3,H0,t.bet))}}function ZJ(n,e){n&1&&(f(0,"div",64),y(1,"Ajouter"),m())}function XJ(n,e){if(n&1){let t=ee();f(0,"div",58),U("click",function(){let i=j(t).$implicit,s=D(2);return $(s.addBetToSlot(i))}),V(1,YJ,2,0,"div",59)(2,JJ,2,5,"div",60)(3,ZJ,2,0,"div",61),m()}if(n&2){let t=e.$implicit;le("border-yellow-500",t.bet>0)("bg-yellow-500-10",t.bet>0),_(),w("ngIf",t.bet===0),_(),w("ngIf",t.bet>0),_(),w("ngIf",t.bet>0)}}function eZ(n,e){if(n&1&&(Yr(0),V(1,XJ,4,7,"div",57),Qr()),n&2){let t=D();_(),w("ngForOf",t.bettingSlots)}}function tZ(n,e){n&1&&(f(0,"div",75)(1,"span",76),y(2,"Votre Tour"),m(),er(),f(3,"svg",77),W(4,"path",78),m()()),n&2&&w("@fadeIn",void 0)}function nZ(n,e){n&1&&An(0)}function rZ(n,e){if(n&1&&(f(0,"div",79),V(1,nZ,1,0,"ng-container",56),m()),n&2){let t=e.$implicit,r=e.index,i=D().$implicit;D(2);let s=sr(48);we("z-index",r)("transform","translateX("+(r-(i.cards.length-1)/2)*35+"px)"),w("@dealCard",void 0),_(),w("ngTemplateOutlet",s)("ngTemplateOutletContext",Bn(7,H0,t))}}function iZ(n,e){if(n&1&&(f(0,"div",80),W(1,"div",81),f(2,"span",82),y(3),m()()),n&2){let t=D().$implicit;_(3),G("",t.bet," \u20AC")}}function sZ(n,e){if(n&1&&(f(0,"div",86),y(1),oe(2,"number"),m()),n&2){let t=D(2).$implicit;_(),G("+",Me(2,1,t.resultAmount)," \u20AC")}}function oZ(n,e){if(n&1&&(f(0,"div",83)(1,"div",84),y(2),m(),V(3,sZ,3,3,"div",85),m()),n&2){let t=D().$implicit;w("@chipDrop",void 0),_(),le("bg-green-600",yn(21,QT).includes(t.status))("border-green-800",yn(22,QT).includes(t.status))("text-white",yn(23,QT).includes(t.status))("bg-red-600",t.status==="LOSE")("border-red-800",t.status==="LOSE")("text-white",t.status==="LOSE")("bg-blue-600",t.status==="PUSH")("border-blue-800",t.status==="PUSH")("text-white",t.status==="PUSH"),_(),G(" ",t.resultMessage," "),_(),w("ngIf",t.resultAmount)}}function aZ(n,e){if(n&1&&(f(0,"div",66),V(1,tZ,5,1,"div",67),f(2,"div",68),y(3),m(),f(4,"div",69)(5,"div",70),V(6,rZ,2,9,"div",71),m()(),f(7,"div",72),V(8,iZ,4,1,"div",73)(9,oZ,4,24,"div",74),m()()),n&2){let t=e.$implicit,r=e.index,i=D(2);le("opacity-30",i.gameState==="PLAYING"&&i.activeHandIndex!==r)("scale-100",i.gameState==="PLAYING"&&i.activeHandIndex!==r)("scale-110",i.gameState==="PLAYING"&&i.activeHandIndex===r)("z-10",i.gameState==="PLAYING"&&i.activeHandIndex!==r)("z-50",i.gameState==="PLAYING"&&i.activeHandIndex===r),_(),w("ngIf",i.gameState==="PLAYING"&&i.activeHandIndex===r),_(),le("text-green-400",t.score<=21)("text-red-500",t.score>21),_(),G(" ",t.score," "),_(3),w("ngForOf",t.cards),_(2),w("ngIf",!yn(19,BV).includes(t.status)),_(),w("ngIf",yn(20,BV).includes(t.status))}}function cZ(n,e){if(n&1&&(Yr(0),V(1,aZ,10,21,"div",65),Qr()),n&2){let t=D();_(),w("ngForOf",t.playerHands)}}function lZ(n,e){n&1&&(f(0,"div",104),y(1,"\u25BC"),m())}function uZ(n,e){n&1&&An(0)}function dZ(n,e){if(n&1){let t=ee();f(0,"button",102),U("click",function(){let i=j(t).$implicit,s=D(2);return $(s.selectedChip=i.val)}),V(1,lZ,2,0,"div",103)(2,uZ,1,0,"ng-container",56),m()}if(n&2){let t=e.$implicit,r=D(2),i=sr(44);le("opacity-50",r.currentMoney<t.val)("grayscale",r.currentMoney<t.val),_(),w("ngIf",r.selectedChip===t.val),_(),w("ngTemplateOutlet",i)("ngTemplateOutletContext",Bn(7,H0,t))}}function hZ(n,e){if(n&1){let t=ee();f(0,"div",87)(1,"div",88),V(2,dZ,3,9,"button",89),m(),W(3,"div",90),f(4,"div",91)(5,"button",92),U("click",function(){j(t);let i=D();return $(i.clearBets())}),er(),f(6,"svg",93),W(7,"path",94)(8,"path",95)(9,"path",96),m(),xs(),f(10,"span"),y(11,"Vider"),m()(),f(12,"button",97),U("click",function(){j(t);let i=D();return $(i.allIn())}),f(13,"span",98),y(14,"\u{1F525}"),m(),f(15,"span"),y(16,"ALL IN"),m()(),f(17,"button",99),U("click",function(){j(t);let i=D();return $(i.dealSequence())}),f(18,"span"),y(19,"Distribuer"),m(),er(),f(20,"svg",100),W(21,"path",101),m()()()()}if(n&2){let t=D();w("@fadeIn",void 0),_(2),w("ngForOf",t.chips),_(3),w("disabled",t.totalBet===0),_(7),w("disabled",t.currentMoney===0),_(5),w("disabled",t.totalBet===0)}}function fZ(n,e){if(n&1){let t=ee();f(0,"button",112),U("click",function(){j(t);let i=D(2);return $(i.double())}),f(1,"div",113),y(2,"x2"),m(),f(3,"span",108),y(4,"Doubler"),m()()}}function pZ(n,e){if(n&1){let t=ee();f(0,"button",114),U("click",function(){j(t);let i=D(2);return $(i.split())}),f(1,"div",115),y(2,"\u2442"),m(),f(3,"span",108),y(4,"Split"),m()()}}function mZ(n,e){if(n&1){let t=ee();f(0,"div",105)(1,"button",106),U("click",function(){j(t);let i=D();return $(i.hit())}),f(2,"div",107),y(3,"+"),m(),f(4,"span",108),y(5,"Carte"),m()(),f(6,"button",109),U("click",function(){j(t);let i=D();return $(i.stand())}),f(7,"div",107),y(8,"\u270B"),m(),f(9,"span",108),y(10,"Rester"),m()(),V(11,fZ,5,0,"button",110)(12,pZ,5,0,"button",111),m()}if(n&2){let t=D();w("@fadeIn",void 0),_(11),w("ngIf",t.canDouble),_(),w("ngIf",t.canSplit)}}function gZ(n,e){if(n&1){let t=ee();f(0,"div")(1,"button",116),U("click",function(){j(t);let i=D();return $(i.reset())}),er(),f(2,"svg",117),W(3,"path",118)(4,"path",119),m(),xs(),f(5,"span"),y(6,"NOUVELLE MAIN"),m()()()}n&2&&w("@fadeIn",void 0)}function _Z(n,e){if(n&1&&(f(0,"div",120),W(1,"div",121),f(2,"div",122)(3,"span",123),y(4),m()(),W(5,"div",124),m()),n&2){let t=e.$implicit;we("background","linear-gradient(135deg, "+t.color+" 0%, "+t.accent+" 100%)"),_(3),we("color",t.accent),_(),te(t.val)}}function vZ(n,e){if(n&1&&(f(0,"div",125),W(1,"div",126)(2,"div",127),f(3,"div",128)(4,"span",129),y(5),m()()()),n&2){let t=e.$implicit;_(5),te(t)}}function yZ(n,e){if(n&1&&(Yr(0),f(1,"div",131)(2,"span",132),y(3),m(),f(4,"span",133),y(5),m()(),f(6,"div",134)(7,"span",132),y(8),m(),f(9,"span",133),y(10),m()(),f(11,"div",135)(12,"span",136),y(13),m()(),Qr()),n&2){let t=D().$implicit;_(2),le("text-red-600",t.isRed)("text-black",!t.isRed),_(),te(t.value),_(),le("text-red-600",t.isRed)("text-black",!t.isRed),_(),te(t.suit),_(2),le("text-red-600",t.isRed)("text-black",!t.isRed),_(),te(t.value),_(),le("text-red-600",t.isRed)("text-black",!t.isRed),_(),te(t.suit),_(2),le("text-red-600",t.isRed)("text-black",!t.isRed),_(),te(t.suit)}}function bZ(n,e){n&1&&(Yr(0),f(1,"div",137)(2,"div",138),W(3,"div",139),m()(),Qr())}function EZ(n,e){if(n&1&&(f(0,"div",130),V(1,yZ,14,25,"ng-container",33)(2,bZ,4,0,"ng-container",33),m()),n&2){let t=e.$implicit;le("bg-red-900",t.isFaceDown)("border-red-950",t.isFaceDown),_(),w("ngIf",!t.isFaceDown),_(),w("ngIf",t.isFaceDown)}}var $0=class n{constructor(e,t,r){this.gameStateSvc=e;this.sound=t;this.cdr=r}exit=new ke;currentMoney=0;deck=[];dealerHand=[];bettingSlots=[{id:0,bet:0},{id:1,bet:0},{id:2,bet:0}];playerHands=[];activeHandIndex=-1;gameState="BETTING";showStats=!0;sessionStats={handsPlayed:0,blackjacks:0,netProfit:0,biggestWin:0,totalLost:0};selectedChip=100;chips=[{val:5,color:"#64748b",border:"#475569",accent:"#334155"},{val:25,color:"#22c55e",border:"#16a34a",accent:"#15803d"},{val:100,color:"#171717",border:"#404040",accent:"#0a0a0a"},{val:500,color:"#a855f7",border:"#9333ea",accent:"#7e22ce"},{val:1e3,color:"#eab308",border:"#ca8a04",accent:"#a16207"},{val:5e3,color:"#f97316",border:"#ea580c",accent:"#c2410c"}];DECK_COUNT=6;SHUFFLE_THRESHOLD=.5;ngOnInit(){this.gameStateSvc.gameState$.subscribe(e=>this.currentMoney=e.money),this.createShoe()}get totalBet(){return this.bettingSlots.reduce((e,t)=>e+t.bet,0)}get currentHand(){return this.playerHands[this.activeHandIndex]}get dealerScore(){return this.calculateScore(this.dealerHand)}get canDouble(){return this.currentHand?this.currentHand.cards.length===2&&this.currentMoney>=this.currentHand.bet:!1}get canSplit(){if(!this.currentHand)return!1;let e=this.currentHand.cards;return e.length===2&&e[0].numValue===e[1].numValue&&this.currentMoney>=this.currentHand.bet}toggleStats(){this.showStats=!this.showStats}addBetToSlot(e){this.currentMoney>=this.selectedChip&&(this.gameStateSvc.addMoney(-this.selectedChip),e.bet+=this.selectedChip,this.sound.playNoise(.05,"lowpass",400,.4))}clearBets(){this.bettingSlots.forEach(e=>{e.bet>0&&(this.gameStateSvc.addMoney(e.bet),e.bet=0)}),this.sound.playSoftPop()}async dealSequence(){if(this.totalBet!==0){this.checkReshuffle(),this.playerHands=this.bettingSlots.filter(e=>e.bet>0).map(e=>({id:e.id,cards:[],bet:e.bet,score:0,status:"PLAYING"})),this.dealerHand=[],this.gameState="PLAYING";for(let e of this.playerHands)await this.wait(200),e.cards.push(this.draw()),e.score=this.calculateScore(e.cards),this.sound.playNoise(.1,"highpass",1e3,.3),this.cdr.detectChanges();await this.wait(200),this.dealerHand.push(this.draw()),this.sound.playNoise(.1,"highpass",1e3,.3),this.cdr.detectChanges();for(let e of this.playerHands)await this.wait(200),e.cards.push(this.draw()),e.score=this.calculateScore(e.cards),this.sound.playNoise(.1,"highpass",1e3,.3),this.cdr.detectChanges();await this.wait(200),this.dealerHand.push(re(O({},this.draw()),{isFaceDown:!0})),this.sound.playNoise(.1,"highpass",1e3,.3),this.cdr.detectChanges(),await this.wait(500),this.checkDealerBlackjack()?this.resolveAllHands():this.startPlayingPhase()}}deal(){this.dealSequence()}wait(e){return new Promise(t=>setTimeout(t,e))}checkDealerBlackjack(){let e=this.dealerHand[1].numValue;return this.dealerHand[0].numValue+e===21}startPlayingPhase(){this.gameState="PLAYING",this.activeHandIndex=0,this.processCurrentHand()}processCurrentHand(){let e=this.currentHand;if(!e){this.playDealer();return}e.score===21&&e.cards.length===2&&!e.isSplit&&(e.status="BLACKJACK",setTimeout(()=>this.nextHand(),1e3))}nextHand(){this.activeHandIndex++,this.processCurrentHand()}hit(){let e=this.currentHand;e.cards.push(this.draw()),e.score=this.calculateScore(e.cards),this.sound.playNoise(.05,"highpass",1e3,.2),e.score>21?(e.status="BUST",e.resultMessage="BUSTED",this.sound.playError(),setTimeout(()=>this.nextHand(),600)):e.score===21&&setTimeout(()=>this.nextHand(),400)}stand(){this.currentHand.status="STAND",this.nextHand()}double(){let e=this.currentHand;this.currentMoney>=e.bet&&(this.gameStateSvc.addMoney(-e.bet),e.bet*=2,e.cards.push(this.draw()),e.score=this.calculateScore(e.cards),e.status="DOUBLED",e.score>21&&(e.status="BUST",e.resultMessage="BUSTED",this.sound.playError()),setTimeout(()=>this.nextHand(),800))}split(){let e=this.currentHand;if(this.currentMoney>=e.bet){this.gameStateSvc.addMoney(-e.bet),this.sound.playNoise(.1,"highpass",500,.3);let t=e.cards.pop(),r={id:Date.now(),cards:[t],bet:e.bet,score:0,status:"PLAYING",isSplit:!0};e.isSplit=!0,this.playerHands.splice(this.activeHandIndex+1,0,r),e.cards.push(this.draw()),e.score=this.calculateScore(e.cards),r.cards.push(this.draw()),r.score=this.calculateScore(r.cards)}}async playDealer(){this.dealerHand[1].isFaceDown=!1,this.cdr.detectChanges(),await this.wait(800);let e=this.calculateScore(this.dealerHand);for(;e<17;)this.dealerHand.push(this.draw()),e=this.calculateScore(this.dealerHand),this.cdr.detectChanges(),this.sound.playNoise(.05,"highpass",1e3,.2),await this.wait(1e3);this.resolveAllHands()}resolveAllHands(){this.gameState="FINISHED";let e=this.calculateScore(this.dealerHand),t=e===21&&this.dealerHand.length===2;this.playerHands.forEach(r=>{if(r.status==="BUST"){r.status="LOSE",this.updateSessionStats(-r.bet,!1);return}let i=r.status==="BLACKJACK",s=0;t?i?(r.status="PUSH",r.resultMessage="EGALIT\xC9",s=r.bet):(r.status="LOSE",r.resultMessage="PERDU"):i?(r.resultMessage="BLACKJACK !",s=r.bet*2.5):e>21?(r.status="WIN",r.resultMessage="DEALER SAUTE",s=r.bet*2):r.score>e?(r.status="WIN",r.resultMessage="GAGN\xC9",s=r.bet*2):r.score===e?(r.status="PUSH",r.resultMessage="EGALIT\xC9",s=r.bet):(r.status="LOSE",r.resultMessage="PERDU"),s>0?(r.resultAmount=s-r.bet,this.gameStateSvc.addMoney(s),this.updateSessionStats(s-r.bet,["WIN","BLACKJACK"].includes(r.status)&&i),["WIN","BLACKJACK"].includes(r.status)&&this.sound.playCash()):this.updateSessionStats(-r.bet,!1)}),this.gameStateSvc.gameState$.pipe(st(1)).subscribe(r=>{let i=O({},r.stats);i.blackjackIncome=(i.blackjackIncome||0)+this.playerHands.reduce((o,a)=>o+(a.resultAmount||-a.bet),0),i.handsPlayed=(i.handsPlayed||0)+this.playerHands.length;let s=Math.max(...this.playerHands.map(o=>o.resultAmount||0));s>(i.biggestWin||0)&&(i.biggestWin=s),this.gameStateSvc.updateState({stats:i})})}allIn(){let e=this.currentMoney;e<=0||(this.gameStateSvc.addMoney(-e),this.bettingSlots[1].bet+=e,this.sound.playNoise(.2,"lowpass",600,.6))}updateSessionStats(e,t){this.sessionStats.handsPlayed++,this.sessionStats.netProfit+=e,e<0&&(this.sessionStats.totalLost+=Math.abs(e)),t&&this.sessionStats.blackjacks++,e>this.sessionStats.biggestWin&&(this.sessionStats.biggestWin=e)}reset(){this.dealerHand=[],this.playerHands=[],this.activeHandIndex=-1,this.gameState="BETTING",this.bettingSlots.forEach(e=>e.bet=0)}createShoe(){let e=["\u2660","\u2665","\u2666","\u2663"],t=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];this.deck=[];for(let r=0;r<this.DECK_COUNT;r++)for(let i of e)for(let s of t)this.deck.push({suit:i,value:s,numValue:this.getVal(s),isRed:i==="\u2665"||i==="\u2666",id:Math.random().toString(),isFaceDown:!1});this.shuffle()}shuffle(){this.deck.sort(()=>Math.random()-.5),this.sound.playNoise(.5,"highpass",500,.3)}checkReshuffle(){this.deck.length<52*this.DECK_COUNT*.4&&this.createShoe()}getVal(e){return parseInt(e)||(e==="A"?11:10)}draw(){return this.deck.length===0&&this.createShoe(),this.deck.pop()}calculateScore(e){let t=0,r=0;for(let i of e)i.isFaceDown||(t+=i.numValue,i.value==="A"&&r++);for(;t>21&&r>0;)t-=10,r--;return t}static \u0275fac=function(t){return new(t||n)(X(at),X(Wt),X(Dt))};static \u0275cmp=qe({type:n,selectors:[["app-blackjack-solo"]],outputs:{exit:"exit"},standalone:!1,decls:49,vars:18,consts:[["chipTemplate",""],["chipStackTemplate",""],["cardTemplate",""],[1,"fixed","inset-0","z-[9999]","w-screen","h-screen","flex","flex-col","overflow-hidden","select-none","font-sans","bg-[#1a1a1a]"],[1,"absolute","inset-0","z-0","bg-[radial-gradient(circle_at_center,_#1a4731_0%,_#0f291e_60%,_#05100c_100%)]"],[1,"absolute","inset-0","z-0","opacity-15","mix-blend-overlay",2,"background-image","url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9IjAuMSIvPgo8L3N2Zz4=')"],[1,"absolute","top-6","right-6","z-[100]","flex","gap-3"],["title","Stats",1,"w-12","h-12","rounded-full","bg-slate-800/80","hover:bg-slate-700","text-blue-400","hover:text-white","flex","items-center","justify-center","transition-all","border","border-slate-600","shadow-lg","active:scale-95",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M3 3v18h18"],["d","M18 17V9"],["d","M13 17V5"],["d","M8 17v-3"],[1,"w-12","h-12","rounded-full","bg-red-900/50","hover:bg-red-600","text-white/80","hover:text-white","flex","items-center","justify-center","transition-all","border","border-red-500/30","shadow-lg","active:scale-95",3,"click"],[1,"absolute","top-6","left-6","z-[100]"],[1,"bg-slate-900/90","backdrop-blur-xl","pl-2","pr-6","py-2","rounded-full","border","border-slate-700","flex","items-center","gap-4","shadow-[0_0_20px_rgba(0,0,0,0.5)]"],[1,"w-10","h-10","rounded-full","bg-gradient-to-b","from-yellow-400","to-yellow-600","flex","items-center","justify-center","text-black","font-black","text-lg","shadow-inner","border-2","border-yellow-300"],[1,"flex","flex-col"],[1,"text-[9px]","text-slate-400","font-bold","uppercase","tracking-widest","leading-none","mb-1"],[1,"text-2xl","text-white","font-mono","font-bold","leading-none","tracking-tight"],["class","absolute top-24 right-6 z-[90] flex flex-col gap-2",4,"ngIf"],[1,"flex-1","relative","flex","flex-col","z-10","h-full"],[1,"h-[40%]","relative","flex","flex-col","items-center","justify-center","pt-8"],[1,"absolute","right-[5%]","top-12","w-36","h-24","bg-gradient-to-br","from-red-900","to-red-950","rounded-xl","border-l-4","border-t-2","border-red-800","shadow-2xl","transform","rotate-6","hidden","lg:flex","items-center","justify-center"],[1,"absolute","inset-0","bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]","opacity-20"],[1,"text-white/20","font-black","uppercase","tracking-widest","text-xs","transform","rotate-90"],[1,"flex","items-center","gap-2","mb-8","transition-opacity","duration-300"],[1,"text-[10px]","font-black","text-slate-400","uppercase","tracking-[0.2em]"],["class","bg-slate-800 text-white font-mono font-bold text-xs px-2 py-1 rounded shadow border border-slate-600",4,"ngIf"],[1,"relative","w-full","flex","justify-center",2,"height","140px"],[1,"relative","h-full","flex","justify-center","items-center"],["class","absolute transition-all duration-500 ease-out",3,"zIndex","transform",4,"ngFor","ngForOf"],[1,"flex-1","flex","items-end","justify-center","gap-6","md:gap-12","px-4","pb-52","z-20"],[4,"ngIf"],[1,"absolute","bottom-0","w-full","h-36","bg-gradient-to-t","from-[#050505]","via-[#0a0a0a]","to-transparent","border-t","border-white/5","flex","items-center","justify-center","z-[100]","px-4","pb-4"],["class","flex items-center gap-8 w-full max-w-5xl justify-between",4,"ngIf"],["class","flex gap-6",4,"ngIf"],[1,"absolute","top-24","right-6","z-[90]","flex","flex-col","gap-2"],[1,"bg-slate-900/95","backdrop-blur-xl","p-5","rounded-2xl","border","border-slate-700","shadow-2xl","w-64","text-sm"],[1,"flex","justify-between","items-center","border-b","border-slate-700","pb-3","mb-3"],[1,"text-xs","text-yellow-500","font-bold","uppercase","tracking-widest","flex","items-center","gap-2"],[1,"w-2","h-2","rounded-full","bg-green-500","animate-pulse"],[1,"space-y-3"],[1,"flex","justify-between","items-center","bg-slate-800/50","p-2","rounded"],[1,"text-slate-400"],[1,"font-mono","font-bold","text-base"],[1,"flex","justify-between","items-center","px-2"],[1,"text-slate-500"],[1,"font-mono","font-bold","text-red-500"],[1,"grid","grid-cols-2","gap-2","mt-2"],[1,"bg-slate-800","p-2","rounded","flex","flex-col","items-center"],[1,"text-[10px]","text-slate-500","uppercase"],[1,"font-bold","text-white"],[1,"font-bold","text-yellow-400"],[1,"bg-slate-800","text-white","font-mono","font-bold","text-xs","px-2","py-1","rounded","shadow","border","border-slate-600"],[1,"absolute","transition-all","duration-500","ease-out"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","group relative w-40 h-64 rounded-2xl border-[3px] border-dashed border-white/10 flex flex-col items-center justify-center cursor-pointer transition-all duration-200 hover:border-yellow-500/50 hover:bg-white/5 active:scale-95",3,"border-yellow-500","bg-yellow-500-10","click",4,"ngFor","ngForOf"],[1,"group","relative","w-40","h-64","rounded-2xl","border-[3px]","border-dashed","border-white/10","flex","flex-col","items-center","justify-center","cursor-pointer","transition-all","duration-200","hover:border-yellow-500/50","hover:bg-white/5","active:scale-95",3,"click"],["class","text-white/20 font-black uppercase tracking-widest text-xs group-hover:text-yellow-500 transition-colors pointer-events-none",4,"ngIf"],["class","relative filter drop-shadow-2xl",4,"ngIf"],["class","absolute bottom-6 text-[10px] font-bold text-yellow-500 uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity",4,"ngIf"],[1,"text-white/20","font-black","uppercase","tracking-widest","text-xs","group-hover:text-yellow-500","transition-colors","pointer-events-none"],[1,"relative","filter","drop-shadow-2xl"],[1,"absolute","bottom-6","text-[10px]","font-bold","text-yellow-500","uppercase","tracking-widest","opacity-0","group-hover:opacity-100","transition-opacity"],["class","relative min-w-[200px] h-64 flex flex-col items-center transition-all duration-500",3,"opacity-30","scale-100","scale-110","z-10","z-50",4,"ngFor","ngForOf"],[1,"relative","min-w-[200px]","h-64","flex","flex-col","items-center","transition-all","duration-500"],["class","absolute -top-16 flex flex-col items-center gap-1 animate-bounce",4,"ngIf"],[1,"mb-4","px-3","py-1.5","rounded-lg","bg-slate-900","font-mono","font-bold","text-white","border","border-slate-700","text-xs","relative","z-20","transition-colors","duration-300","shadow-xl"],[1,"relative","w-full","h-full","flex","justify-center"],[1,"relative","h-full","w-full","flex","justify-center","items-start"],["class","absolute top-0 transition-all duration-300 ease-out hover:-translate-y-6",3,"zIndex","transform",4,"ngFor","ngForOf"],[1,"absolute","-bottom-16","flex","flex-col","items-center","w-full","whitespace-nowrap","z-50"],["class","flex items-center gap-2 bg-slate-900/80 px-3 py-1 rounded-full border border-slate-700 shadow-lg mb-2",4,"ngIf"],["class","flex flex-col items-center gap-1",4,"ngIf"],[1,"absolute","-top-16","flex","flex-col","items-center","gap-1","animate-bounce"],[1,"text-yellow-400","text-xs","font-bold","uppercase","tracking-widest","shadow-black","drop-shadow-md"],["width","24","height","24","viewBox","0 0 24 24","fill","#facc15"],["d","M7 10l5 5 5-5z"],[1,"absolute","top-0","transition-all","duration-300","ease-out","hover:-translate-y-6"],[1,"flex","items-center","gap-2","bg-slate-900/80","px-3","py-1","rounded-full","border","border-slate-700","shadow-lg","mb-2"],[1,"w-3","h-3","rounded-full","bg-yellow-500"],[1,"text-xs","font-bold","text-white"],[1,"flex","flex-col","items-center","gap-1"],[1,"text-lg","font-black","uppercase","shadow-[0_4px_10px_rgba(0,0,0,0.5)]","px-4","py-2","rounded-xl","border-b-4","transition-transform","hover:scale-105"],["class","text-sm font-bold text-green-400 drop-shadow-md font-mono mt-1",4,"ngIf"],[1,"text-sm","font-bold","text-green-400","drop-shadow-md","font-mono","mt-1"],[1,"flex","items-center","gap-8","w-full","max-w-5xl","justify-between"],[1,"flex","gap-3","bg-black/40","p-3","rounded-2xl","border","border-white/10","shadow-inner","overflow-x-auto","scrollbar-hide"],["class","relative group transition-transform hover:-translate-y-2 active:scale-95 flex-shrink-0",3,"opacity-50","grayscale","click",4,"ngFor","ngForOf"],[1,"h-16","w-px","bg-white/10","mx-2"],[1,"flex","gap-4"],[1,"h-16","w-20","rounded-xl","bg-slate-800","hover:bg-slate-700","text-slate-300","font-bold","text-xs","uppercase","tracking-wide","border-b-4","border-slate-950","active:border-b-0","active:translate-y-1","transition-all","disabled:opacity-50","flex","flex-col","items-center","justify-center","gap-1","shadow-lg",3,"click","disabled"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M3 6h18"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"],["d","M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"h-16","w-24","rounded-xl","bg-gradient-to-b","from-purple-600","to-purple-800","hover:from-purple-500","hover:to-purple-700","text-white","font-black","text-xs","uppercase","tracking-widest","border-b-4","border-purple-950","active:border-b-0","active:translate-y-1","transition-all","disabled:opacity-50","flex","flex-col","items-center","justify-center","gap-1","shadow-[0_0_20px_rgba(168,85,247,0.4)]","group",3,"click","disabled"],[1,"text-xl","group-hover:scale-125","transition-transform"],[1,"h-16","px-12","rounded-xl","bg-gradient-to-b","from-green-500","to-green-700","hover:from-green-400","hover:to-green-600","text-white","font-black","text-lg","uppercase","tracking-widest","border-b-4","border-green-900","active:border-b-0","active:translate-y-1","transition-all","disabled:opacity-50","disabled:grayscale","shadow-[0_0_30px_rgba(34,197,94,0.3)]","flex","items-center","gap-3",3,"click","disabled"],["width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M5 3L19 12L5 21V3Z"],[1,"relative","group","transition-transform","hover:-translate-y-2","active:scale-95","flex-shrink-0",3,"click"],["class","absolute -top-3 left-1/2 -translate-x-1/2 text-yellow-400 text-[10px] font-bold animate-bounce",4,"ngIf"],[1,"absolute","-top-3","left-1/2","-translate-x-1/2","text-yellow-400","text-[10px]","font-bold","animate-bounce"],[1,"flex","gap-6"],[1,"action-btn","from-slate-600","to-slate-800","border-slate-950","text-green-400","hover:text-green-300",3,"click"],[1,"text-3xl","mb-1"],[1,"text-[10px]","font-black","uppercase","tracking-widest"],[1,"action-btn","from-red-600","to-red-800","border-red-950","text-white",3,"click"],["class","action-btn from-yellow-500 to-yellow-700 border-yellow-900 text-black",3,"click",4,"ngIf"],["class","action-btn from-purple-600 to-purple-800 border-purple-950 text-white",3,"click",4,"ngIf"],[1,"action-btn","from-yellow-500","to-yellow-700","border-yellow-900","text-black",3,"click"],[1,"text-2xl","mb-1","font-black"],[1,"action-btn","from-purple-600","to-purple-800","border-purple-950","text-white",3,"click"],[1,"text-2xl","mb-1","rotate-90"],[1,"h-16","px-12","rounded-full","bg-white","hover:bg-slate-200","text-black","font-black","text-xl","border-b-4","border-slate-400","active:border-b-0","active:translate-y-1","transition-all","shadow-[0_0_40px_rgba(255,255,255,0.4)]","animate-pulse","flex","items-center","gap-3",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","3"],["d","M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"],["d","M3 3v5h5"],[1,"w-16","h-16","rounded-full","shadow-[0_4px_6px_rgba(0,0,0,0.5),inset_0_-4px_4px_rgba(0,0,0,0.3)]","relative","flex","items-center","justify-center","font-sans","select-none"],[1,"absolute","inset-0","rounded-full","border-[6px]","border-dashed","border-white/40","opacity-80"],[1,"w-10","h-10","rounded-full","bg-white/90","shadow-inner","flex","items-center","justify-center","border","border-slate-300","z-10"],[1,"font-black","text-xs","text-black","tracking-tighter"],[1,"absolute","top-0","left-0","w-full","h-1/2","bg-gradient-to-b","from-white/20","to-transparent","rounded-t-full","pointer-events-none"],[1,"w-20","h-20","rounded-full","bg-yellow-500","border-[6px]","border-dashed","border-white/40","shadow-[0_10px_20px_rgba(0,0,0,0.6)]","flex","items-center","justify-center","relative"],[1,"absolute","bottom-1","w-full","h-full","rounded-full","bg-yellow-600","-z-10","translate-y-1"],[1,"absolute","bottom-2","w-full","h-full","rounded-full","bg-yellow-700","-z-20","translate-y-2"],[1,"w-12","h-12","rounded-full","bg-white","flex","items-center","justify-center","border","border-slate-300","shadow-inner"],[1,"font-black","text-black","text-sm"],[1,"w-28","h-40","rounded-xl","shadow-[2px_4px_10px_rgba(0,0,0,0.5)]","relative","select-none","overflow-hidden","bg-white","border","border-slate-200","transition-transform","backface-hidden"],[1,"absolute","top-1.5","left-1.5","flex","flex-col","items-center","leading-none"],[1,"font-black","text-2xl","tracking-tighter"],[1,"text-xl","mt-0.5"],[1,"absolute","bottom-1.5","right-1.5","flex","flex-col","items-center","leading-none","rotate-180"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"text-7xl","drop-shadow-sm","transform"],[1,"w-full","h-full","p-2"],[1,"w-full","h-full","border-2","border-white/20","rounded-lg","bg-[repeating-linear-gradient(45deg,#7f1d1d_0,#7f1d1d_10px,#991b1b_10px,#991b1b_20px)]","flex","items-center","justify-center"],[1,"w-12","h-12","bg-black/30","rounded-full","blur-md"]],template:function(t,r){if(t&1){let i=ee();f(0,"div",3),W(1,"div",4)(2,"div",5),f(3,"div",6)(4,"button",7),U("click",function(){return j(i),$(r.toggleStats())}),er(),f(5,"svg",8),W(6,"path",9)(7,"path",10)(8,"path",11)(9,"path",12),m()(),xs(),f(10,"button",13),U("click",function(){return j(i),$(r.exit.emit())}),y(11,"\u2715"),m()(),f(12,"div",14)(13,"div",15)(14,"div",16),y(15,"\u20AC"),m(),f(16,"div",17)(17,"span",18),y(18,"Votre Solde"),m(),f(19,"span",19),y(20),oe(21,"number"),m()()()(),V(22,zJ,30,17,"div",20),f(23,"div",21)(24,"div",22)(25,"div",23),W(26,"div",24),f(27,"span",25),y(28,"Blackjack"),m()(),f(29,"div",26)(30,"span",27),y(31,"Croupier"),m(),V(32,qJ,2,1,"span",28),m(),f(33,"div",29)(34,"div",30),V(35,KJ,2,9,"div",31),m()()(),f(36,"div",32),V(37,eZ,2,1,"ng-container",33)(38,cZ,2,1,"ng-container",33),m()(),f(39,"div",34),V(40,hZ,22,5,"div",35)(41,mZ,13,3,"div",36)(42,gZ,7,1,"div",33),m(),V(43,_Z,6,5,"ng-template",null,0,Xr)(45,vZ,6,1,"ng-template",null,1,Xr)(47,EZ,3,6,"ng-template",null,2,Xr),m()}t&2&&(w("@tableIntro",void 0),_(12),w("@fadeIn",void 0),_(8),te(Be(21,15,r.currentMoney,"1.0-0")),_(2),w("ngIf",r.showStats),_(7),le("opacity-100",r.gameState!=="BETTING")("opacity-0",r.gameState==="BETTING"),_(3),w("ngIf",r.dealerScore>0),_(3),w("ngForOf",r.dealerHand),_(2),w("ngIf",r.gameState==="BETTING"),_(),w("ngIf",r.gameState!=="BETTING"),_(2),w("ngIf",r.gameState==="BETTING"),_(),w("ngIf",r.gameState==="PLAYING"),_(),w("ngIf",r.gameState==="FINISHED"))},dependencies:[Nt,xt,Au,Bt],styles:[".action-btn[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:20px;background-image:linear-gradient(to bottom,var(--tw-gradient-from),var(--tw-gradient-to));display:flex;flex-direction:column;align-items:center;justify-content:center;transition:all .1s;cursor:pointer;border-bottom-width:6px;box-shadow:0 10px 15px -3px #00000080}.action-btn[_ngcontent-%COMP%]:active{transform:translateY(6px);border-bottom-width:0;box-shadow:none}.action-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollbar-hide[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.bg-yellow-500-10[_ngcontent-%COMP%]{background-color:#eab3081a}"],data:{animation:[$t("tableIntro",[Rt(":enter",[Pe({transform:"scale(1.05)",opacity:0}),At("800ms cubic-bezier(0.2, 0.8, 0.2, 1)",Pe({transform:"scale(1)",opacity:1}))])]),$t("dealCard",[Rt(":enter",[Pe({transform:"translate(50vw, -50vh) scale(0.5)",opacity:0}),At("400ms cubic-bezier(0.16, 1, 0.3, 1)",Pe({transform:"translate(0, 0) scale(1)",opacity:1}))])]),$t("chipDrop",[Rt(":enter",[Pe({transform:"translateY(-50px) scale(1.5) rotate(180deg)",opacity:0}),At("400ms cubic-bezier(0.175, 0.885, 0.32, 1.275)",Pe({transform:"translateY(0) scale(1) rotate(0)",opacity:1}))])]),$t("fadeIn",[Rt(":enter",[Pe({opacity:0,transform:"translateY(10px)"}),At("300ms ease-out",Pe({opacity:1,transform:"translateY(0)"}))]),Rt(":leave",[At("200ms ease-in",Pe({opacity:0,transform:"translateY(10px)"}))])]),$t("statPop",[Rt(":increment",[Pe({transform:"scale(1.5)",color:"#4ade80"}),At("300ms ease-out",Pe({transform:"scale(1)",color:"*"}))])])]}})};var IZ=n=>({seat:n,index:1}),SZ=n=>({seat:n,index:2}),z0=n=>({$implicit:n}),CZ=()=>["WIN","LOSE","PUSH","BLACKJACK","BUST"],jV=()=>["WIN","BLACKJACK"],$V=()=>["LOSE","BUST"];function TZ(n,e){if(n&1){let t=ee();f(0,"div",28)(1,"div",29)(2,"div",30),y(3,"\u{1F464}"),m(),f(4,"div",31),y(5),f(6,"span",32),y(7,"a rejoint la table"),m()()(),f(8,"button",33),U("click",function(){j(t);let i=D(2);return $(i.launchBetting())}),y(9,"OUVRIR LA TABLE"),m()()}if(n&2){let t=D(2);_(5),G("",t.game==null||t.game.seats==null||t.game.seats[2]==null?null:t.game.seats[2].username," ")}}function DZ(n,e){n&1&&(f(0,"div",34),y(1,"L'h\xF4te va lancer la partie..."),m())}function xZ(n,e){if(n&1&&(f(0,"div",23)(1,"div",24),y(2,"\u23F3"),m(),f(3,"div",25),y(4,"En attente de l'adversaire..."),m(),V(5,TZ,10,1,"div",26)(6,DZ,2,0,"div",27),m()),n&2){let t=D();w("@fadeIn",void 0),_(5),w("ngIf",t.isHost&&(t.game==null||t.game.seats==null||t.game.seats[2]==null?null:t.game.seats[2].userId)),_(),w("ngIf",!t.isHost)}}function AZ(n,e){if(n&1&&(f(0,"div",47),y(1),m()),n&2){let t=D(2);w("@fadeIn",void 0),_(),G(" ",t.statusMessage," ")}}function RZ(n,e){if(n&1&&(f(0,"div",48)(1,"span",49),y(2,"Croupier"),m(),f(3,"div",50),y(4),m()()),n&2){let t=D(2);_(4),G(" ",t.game.dealerScore," ")}}function kZ(n,e){n&1&&An(0)}function PZ(n,e){if(n&1&&(f(0,"div",51),V(1,kZ,1,0,"ng-container",46),m()),n&2){let t=e.$implicit,r=e.index,i=D(2),s=sr(32);we("z-index",r)("transform","translateX("+(r-(i.game.dealerHand.length-1)/2)*45+"px)"),w("@dealCard",void 0),_(),w("ngTemplateOutlet",s)("ngTemplateOutletContext",Bn(7,z0,t))}}function NZ(n,e){n&1&&An(0)}function MZ(n,e){n&1&&An(0)}function OZ(n,e){if(n&1&&(f(0,"div",35),V(1,AZ,2,2,"div",36),f(2,"div",37)(3,"div",38),W(4,"div",39),f(5,"span",40),y(6,"Deck"),m()(),V(7,RZ,5,1,"div",41),f(8,"div",42)(9,"div",43),V(10,PZ,2,9,"div",44),m()()(),f(11,"div",45),V(12,NZ,1,0,"ng-container",46)(13,MZ,1,0,"ng-container",46),m()()),n&2){let t=D(),r=sr(26);_(),w("ngIf",t.statusMessage),_(6),w("ngIf",t.game&&(t.game.dealerScore||0)>0),_(3),w("ngForOf",t.game.dealerHand)("ngForTrackBy",t.trackByCardId),_(2),w("ngTemplateOutlet",r)("ngTemplateOutletContext",Bn(8,IZ,t.game.seats[1])),_(),w("ngTemplateOutlet",r)("ngTemplateOutletContext",Bn(10,SZ,t.game.seats[2]))}}function FZ(n,e){n&1&&An(0)}function LZ(n,e){if(n&1){let t=ee();f(0,"button",63),U("click",function(){let i=j(t).$implicit,s=D(3);return $(s.addBet(i.val))}),V(1,FZ,1,0,"ng-container",46),m()}if(n&2){let t=e.$implicit,r=D(3),i=sr(28);w("disabled",r.currentMoney<t.val),_(),w("ngTemplateOutlet",i)("ngTemplateOutletContext",Bn(3,z0,t))}}function VZ(n,e){if(n&1){let t=ee();f(0,"div",56)(1,"div",57),V(2,LZ,2,5,"button",58),m(),W(3,"div",59),f(4,"button",60),U("click",function(){j(t);let i=D(2);return $(i.validateBet())}),f(5,"span"),y(6,"VALIDER"),m(),er(),f(7,"svg",61),W(8,"path",62),m()()()}if(n&2){let t=D(2);w("@fadeIn",void 0),_(2),w("ngForOf",t.chips),_(2),w("disabled",t.mySeat.bet===0)}}function UZ(n,e){n&1&&(f(0,"div",64),y(1," EN ATTENTE DE L'AUTRE JOUEUR... "),m()),n&2&&w("@fadeIn",void 0)}function BZ(n,e){if(n&1){let t=ee();f(0,"div",65)(1,"button",66),U("click",function(){j(t);let i=D(2);return $(i.hit())}),f(2,"div",67),y(3,"+"),m(),f(4,"span",68),y(5,"Carte"),m()(),f(6,"button",69),U("click",function(){j(t);let i=D(2);return $(i.stand())}),f(7,"div",67),y(8,"\u270B"),m(),f(9,"span",68),y(10,"Rester"),m()()()}n&2&&w("@fadeIn",void 0)}function jZ(n,e){n&1&&(f(0,"div",72),y(1,"Attente de l'h\xF4te..."),m())}function $Z(n,e){if(n&1){let t=ee();f(0,"button",73),U("click",function(){j(t);let i=D(3);return $(i.restartGame())}),er(),f(1,"svg",74),W(2,"path",75)(3,"path",76),m(),xs(),f(4,"span"),y(5,"REJOUER"),m()()}}function HZ(n,e){if(n&1&&(f(0,"div",65),V(1,jZ,2,0,"div",70)(2,$Z,6,0,"button",71),m()),n&2){let t=D(2);w("@fadeIn",void 0),_(),w("ngIf",!t.isHost),_(),w("ngIf",t.isHost)}}function GZ(n,e){if(n&1&&(f(0,"div",52),V(1,VZ,9,3,"div",53)(2,UZ,2,1,"div",54)(3,BZ,11,1,"div",55)(4,HZ,3,3,"div",55),m()),n&2){let t=D();_(),w("ngIf",t.game.phase==="BETTING"&&t.mySeat.status!=="READY_TO_PLAY"),_(),w("ngIf",t.game.phase==="BETTING"&&t.mySeat.status==="READY_TO_PLAY"),_(),w("ngIf",t.game.phase==="PLAYING"&&t.isMyTurn),_(),w("ngIf",t.game.phase==="RESULT")}}function zZ(n,e){if(n&1){let t=ee();f(0,"div",85)(1,"div",86)(2,"div",87),y(3),m(),f(4,"div")(5,"div",88),y(6),m(),f(7,"div",89),y(8),oe(9,"number"),m()()(),f(10,"button",90),U("click",function(){let i=j(t).$implicit,s=D(2);return $(s.invite(i))}),y(11,"INVITER"),m()()}if(n&2){let t=e.$implicit;_(3),te(t.avatarId),_(3),te(t.username),_(2),or("",t.title," \u2022 ",Me(9,4,t.money)," \u20AC")}}function qZ(n,e){n&1&&(f(0,"div",91),y(1,"Aucun joueur disponible :("),m())}function WZ(n,e){if(n&1){let t=ee();f(0,"div",77)(1,"div",78)(2,"button",79),U("click",function(){j(t);let i=D();return $(i.showOnlinePlayers=!1)}),y(3,"\u2715"),m(),f(4,"h3",80)(5,"span",81),y(6,"\u{1F30D}"),m(),y(7," JOUEURS EN LIGNE"),m(),f(8,"div",82),V(9,zZ,12,6,"div",83)(10,qZ,2,0,"div",84),m()()()}if(n&2){let t=D();_(9),w("ngForOf",t.onlinePlayers),_(),w("ngIf",t.onlinePlayers.length===0)}}function KZ(n,e){if(n&1){let t=ee();f(0,"button",92),U("click",function(){j(t);let i=D();return $(i.loadOnlinePlayers())}),f(1,"span"),y(2,"TROUVER DES JOUEURS"),m(),f(3,"span",93),y(4,"\u{1F50D}"),m()()}}function YZ(n,e){if(n&1&&(f(0,"div",103)(1,"span",104),y(2),m(),er(),f(3,"svg",105),W(4,"path",106),m()()),n&2){let t=D().seat;_(2),G("Tour de ",t.username)}}function QZ(n,e){if(n&1&&(f(0,"div",50),y(1),m()),n&2){let t=D().seat;le("text-green-400",t.score<=21)("text-red-500",t.score>21),_(),te(t.score)}}function JZ(n,e){n&1&&An(0)}function ZZ(n,e){if(n&1&&(f(0,"div",107),V(1,JZ,1,0,"ng-container",46),m()),n&2){let t=e.$implicit,r=e.index,i=D().seat;D();let s=sr(32);we("z-index",r)("transform","translateX("+(r-(i.hand.length-1)/2)*35+"px)"),w("@dealCard",void 0),_(),w("ngTemplateOutlet",s)("ngTemplateOutletContext",Bn(7,z0,t))}}function XZ(n,e){n&1&&An(0)}function eX(n,e){n&1&&(f(0,"div",110),y(1,"Pr\xEAt"),m())}function tX(n,e){if(n&1&&(f(0,"div",108),V(1,XZ,1,0,"ng-container",46)(2,eX,2,0,"div",109),m()),n&2){let t=D().seat;D();let r=sr(30);_(),w("ngTemplateOutlet",r)("ngTemplateOutletContext",Bn(3,z0,t.bet)),_(),w("ngIf",t.status==="READY_TO_PLAY")}}function nX(n,e){if(n&1&&(f(0,"div",111),y(1),m()),n&2){let t=D().seat;le("text-green-400",yn(14,jV).includes(t.status))("border-green-600",yn(15,jV).includes(t.status))("text-red-500",yn(16,$V).includes(t.status))("border-red-600",yn(17,$V).includes(t.status))("text-blue-300",t.status==="PUSH")("border-blue-500",t.status==="PUSH"),w("@chipDrop",void 0),_(),G(" ",t.status==="BUST"?"BUSTED":t.status," ")}}function rX(n,e){if(n&1&&(f(0,"div",94),V(1,YZ,5,1,"div",95),f(2,"div",96)(3,"div",97),y(4),m(),V(5,QZ,2,5,"div",98),m(),f(6,"div",99),V(7,ZZ,2,9,"div",100),m(),V(8,tX,3,5,"div",101)(9,nX,2,18,"div",102),m()),n&2){let t=e.seat,r=e.index,i=D();le("opacity-40",(i.game==null?null:i.game.turnIndex)!==r&&(i.game==null?null:i.game.phase)==="PLAYING"),_(),w("ngIf",(i.game==null?null:i.game.turnIndex)===r&&(i.game==null?null:i.game.phase)==="PLAYING"),_(3),te(t.username),_(),w("ngIf",t.hand.length>0),_(2),w("ngForOf",t.hand)("ngForTrackBy",i.trackByCardId),_(),w("ngIf",t.bet>0),_(),w("ngIf",yn(9,CZ).includes(t.status)&&(i.game==null?null:i.game.phase)==="RESULT")}}function iX(n,e){if(n&1&&(f(0,"div",112),W(1,"div",113),f(2,"div",114)(3,"span",115),y(4),m()(),W(5,"div",116),m()),n&2){let t=e.$implicit;we("background","linear-gradient(135deg, "+t.color+" 0%, "+t.accent+" 100%)"),_(3),we("color",t.accent),_(),te(t.val)}}function sX(n,e){if(n&1&&(f(0,"div",117),W(1,"div",118)(2,"div",119),f(3,"div",120)(4,"span",121),y(5),m()()()),n&2){let t=e.$implicit;_(5),te(t)}}function oX(n,e){if(n&1&&(f(0,"div",122)(1,"div",123),W(2,"div",124),f(3,"div",125)(4,"span",126),y(5),m(),f(6,"span",127),y(7),m()(),f(8,"div",128)(9,"span",126),y(10),m(),f(11,"span",127),y(12),m()(),f(13,"div",129)(14,"span",130),y(15),m()()(),f(16,"div",131)(17,"div",132)(18,"div",133),W(19,"div",134),m()()()()),n&2){let t=e.$implicit;we("transform",t.isFaceDown?"rotateY(180deg)":"rotateY(0deg)"),_(4),le("text-red-600",t.isRed)("text-black",!t.isRed),_(),te(t.value),_(),le("text-red-600",t.isRed)("text-black",!t.isRed),_(),te(t.suit),_(2),le("text-red-600",t.isRed)("text-black",!t.isRed),_(),te(t.value),_(),le("text-red-600",t.isRed)("text-black",!t.isRed),_(),te(t.suit),_(2),le("text-red-600",t.isRed)("text-black",!t.isRed),_(),te(t.suit)}}var G0=class n{constructor(e,t,r,i){this.firebase=e;this.gameState=t;this.sound=r;this.cdr=i}exit=new ke;currentMoney=0;game=null;gameSub=null;mySeatIndex=-1;onlinePlayers=[];showOnlinePlayers=!1;chips=[{val:100,color:"#171717",border:"#404040",accent:"#0a0a0a"},{val:500,color:"#a855f7",border:"#9333ea",accent:"#7e22ce"},{val:1e3,color:"#eab308",border:"#ca8a04",accent:"#a16207"},{val:5e3,color:"#f97316",border:"#ea580c",accent:"#c2410c"}];ngOnInit(){this.gameState.gameState$.subscribe(e=>this.currentMoney=e.money),this.gameSub=this.firebase.activeGame$.subscribe(e=>{if(this.game&&e&&this.isHost&&e.turnIndex===3&&e.phase==="PLAYING"&&this.playDealerTurn(),this.game=e,e){this.mySeatIndex=e.hostId===this.firebase.currentUserId?1:2;let t=this.mySeatIndex===1?2:1;if(e.seats[t].status==="LEFT"&&e.phase==="PLAYING"&&(alert("L'adversaire a quitt\xE9 !"),this.exit.emit()),e.phase==="RESULT"&&this.mySeat.status==="WIN"&&!this.mySeat.resultAmount){let r=this.mySeat.bet*2;this.gameState.addMoney(r),this.sound.playCash(),this.mySeat.resultAmount=r}else if(e.phase==="RESULT"&&this.mySeat.status==="PUSH"&&!this.mySeat.resultAmount)this.gameState.addMoney(this.mySeat.bet),this.mySeat.resultAmount=this.mySeat.bet;else if(e.phase==="RESULT"&&this.mySeat.status==="BLACKJACK"&&!this.mySeat.resultAmount){let r=this.mySeat.bet*2.5;this.gameState.addMoney(r),this.sound.playCash(),this.mySeat.resultAmount=r}}this.cdr.markForCheck()})}ngOnDestroy(){this.gameSub&&this.gameSub.unsubscribe()}trackByCardId(e,t){return t.id}get isHost(){return this.game?.hostId===this.firebase.currentUserId}get mySeat(){return this.game?.seats[this.mySeatIndex]}get isMyTurn(){return this.game?.turnIndex===this.mySeatIndex}get myRole(){return this.isHost?"H\xD4TE":"INVIT\xC9"}get statusMessage(){return this.game?this.game.phase==="BETTING"?"Placez vos mises...":this.game.phase==="DEALER_TURN"?"Le croupier joue...":this.game.phase==="RESULT"?"R\xE9sultats !":this.isMyTurn?"\xC0 VOUS DE JOUER !":`Au tour de ${this.game.seats[this.game.turnIndex]?.username}...`:""}async loadOnlinePlayers(){this.onlinePlayers=await this.firebase.getOnlinePlayers(),this.showOnlinePlayers=!0,this.cdr.markForCheck()}async invite(e){let t=await this.firebase.createMultiplayerGame(this.firebase.currentUsername,e.id);this.firebase.sendInvite(e.id,e.username,t,0,this.firebase.currentUsername),this.firebase.joinGameRoom(t),this.showOnlinePlayers=!1}addBet(e){this.currentMoney>=e&&(this.gameState.addMoney(-e),this.mySeat.bet+=e,this.sound.playNoise(.05,"lowpass",400,.4),this.game&&this.firebase.updatePlayerBet(this.game.id,this.mySeatIndex,this.mySeat.bet,!1))}validateBet(){if(this.game&&(this.mySeat.status="READY_TO_PLAY",this.firebase.updatePlayerBet(this.game.id,this.mySeatIndex,this.mySeat.bet,!0),this.isHost)){let e=this.game.seats[2];(e.status==="READY_TO_PLAY"||e.status==="LEFT")&&this.dealInitialCards()}}launchBetting(){this.game&&this.firebase.updateGameState(this.game.id,{phase:"BETTING"})}restartGame(){if(this.game&&this.isHost){let e=JSON.parse(JSON.stringify(this.game.seats));e.forEach(t=>{t.hand=[],t.score=0,t.bet=0,t.status="WAITING_BET",t.resultAmount=0}),this.firebase.updateGameState(this.game.id,{phase:"BETTING",seats:e,dealerHand:[],dealerScore:0,turnIndex:1,deck:[]})}}tryQuit(){this.mySeat&&this.mySeat.bet>0&&this.game?.phase==="PLAYING"&&!confirm("Partie en cours ! Vous perdrez votre mise. Quitter ?")||(this.game&&this.firebase.leaveGameRoom(this.game.id,this.mySeatIndex),this.firebase.leaveGame(),this.exit.emit())}createShoe(){let e=["\u2660","\u2665","\u2666","\u2663"],t=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],r=[];for(let i=0;i<6;i++)for(let s of e)for(let o of t)r.push({suit:s,value:o,numValue:parseInt(o)||(o==="A"?11:10),isRed:s==="\u2665"||s==="\u2666",id:Math.random().toString(),isFaceDown:!1});return r.sort(()=>Math.random()-.5)}async dealInitialCards(){if(!this.game)return;let e=this.createShoe(),t=[...this.game.seats],r=[];for(let i=1;i<=2;i++)t[i].status==="READY_TO_PLAY"&&(t[i].hand=[e.pop(),e.pop()],t[i].score=this.calculateScore(t[i].hand),t[i].status="PLAYING",t[i].score===21&&(t[i].status="BLACKJACK"));r.push(e.pop()),r.push(re(O({},e.pop()),{isFaceDown:!0})),await this.firebase.updateGameState(this.game.id,{deck:e,seats:t,dealerHand:r,dealerScore:this.calculateScore(r),phase:"PLAYING",turnIndex:1})}hit(){this.doAction("hit")}stand(){this.doAction("stand")}async doAction(e){if(!this.game)return;let t=JSON.parse(JSON.stringify(this.game.seats)),r=t[this.mySeatIndex],i=this.game.deck;if((!i||i.length===0)&&(i=this.createShoe()),e==="hit"){let s=i.pop();s&&(r.hand.push(s),r.score=this.calculateScore(r.hand),r.score>21?(r.status="BUST",this.sound.playError(),await this.firebase.updateGameState(this.game.id,{seats:t,deck:i}),this.passTurn()):(this.sound.playNoise(.1,"highpass",1e3,.2),await this.firebase.updateGameState(this.game.id,{seats:t,deck:i})))}else r.status="STAND",await this.firebase.updateGameState(this.game.id,{seats:t}),this.passTurn()}async passTurn(){if(!this.game)return;let e=this.mySeatIndex+1;this.mySeatIndex===2&&(e=3),await this.firebase.updateGameState(this.game.id,{turnIndex:e})}async playDealerTurn(){if(!this.game)return;console.log("\u{1F3B2} D\xC9BUT TOUR CROUPIER"),await this.firebase.updateGameState(this.game.id,{phase:"DEALER_TURN"});let e=[...this.game.dealerHand],t=[...this.game.deck];t.length||(t=this.createShoe()),e[1].isFaceDown=!1,await this.firebase.updateGameState(this.game.id,{dealerHand:e,dealerScore:this.calculateScore(e)}),await new Promise(i=>setTimeout(i,1e3));let r=0;for(;this.calculateScore(e)<17&&r<10;){let i=t.pop();if(!i)break;e.push(i),await this.firebase.updateGameState(this.game.id,{dealerHand:e,deck:t,dealerScore:this.calculateScore(e)}),await new Promise(s=>setTimeout(s,1e3)),r++}this.resolveGame(e)}async resolveGame(e){if(!this.game)return;let t=[...this.game.seats],r=this.calculateScore(e);t.forEach(i=>{i.id!==0&&(i.status==="BUST"?i.status="LOSE":i.status==="BLACKJACK"||(r>21||i.score>r?i.status="WIN":i.score===r?i.status="PUSH":i.status="LOSE"))}),await this.firebase.updateGameState(this.game.id,{seats:t,phase:"RESULT"})}calculateScore(e){let t=0,r=0;for(let i of e)i.isFaceDown||(t+=i.numValue,i.value==="A"&&r++);for(;t>21&&r>0;)t-=10,r--;return t}static \u0275fac=function(t){return new(t||n)(X(Mn),X(at),X(Wt),X(Dt))};static \u0275cmp=qe({type:n,selectors:[["app-blackjack-multi"]],outputs:{exit:"exit"},standalone:!1,decls:33,vars:12,consts:[["playerZone",""],["chipTemplate",""],["chipStackTemplate",""],["cardTemplate",""],[1,"fixed","inset-0","z-[9999]","w-screen","h-screen","flex","flex-col","overflow-hidden","select-none","font-sans","bg-[#1a1a1a]"],[1,"absolute","inset-0","z-0","bg-[radial-gradient(circle_at_center,_#1a4731_0%,_#0f291e_60%,_#05100c_100%)]"],[1,"absolute","inset-0","z-0","opacity-15","mix-blend-overlay",2,"background-image","url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9IjAuMSIvPgo8L3N2Zz4=')"],[1,"absolute","top-6","right-6","z-[100]","flex","gap-3"],[1,"bg-black/60","backdrop-blur-md","px-4","py-2","rounded-full","border","border-purple-500/30","flex","items-center","gap-2"],[1,"w-2","h-2","rounded-full","bg-purple-500","animate-pulse"],[1,"text-xs","font-bold","text-purple-300","uppercase","tracking-wider"],[1,"w-10","h-10","rounded-full","bg-red-900/50","hover:bg-red-600","text-white/80","hover:text-white","flex","items-center","justify-center","transition-all","border","border-red-500/30","shadow-lg","active:scale-95",3,"click"],[1,"absolute","top-6","left-6","z-[100]"],[1,"bg-slate-900/90","backdrop-blur-xl","pl-2","pr-6","py-2","rounded-full","border","border-slate-700","flex","items-center","gap-4","shadow-[0_0_20px_rgba(0,0,0,0.5)]"],[1,"w-10","h-10","rounded-full","bg-gradient-to-b","from-yellow-400","to-yellow-600","flex","items-center","justify-center","text-black","font-black","text-lg","shadow-inner","border-2","border-yellow-300"],[1,"flex","flex-col"],[1,"text-[9px]","text-slate-400","font-bold","uppercase","tracking-widest","leading-none","mb-1"],[1,"text-2xl","text-white","font-mono","font-bold","leading-none","tracking-tight"],["class","absolute inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm",4,"ngIf"],["class","flex-1 relative flex flex-col z-10 h-full",4,"ngIf"],["class","absolute bottom-0 w-full h-36 bg-gradient-to-t from-[#050505] via-[#0a0a0a] to-transparent border-t border-white/5 flex items-center justify-center z-[100] px-4 pb-4",4,"ngIf"],["class","absolute inset-0 z-[120] bg-black/90 backdrop-blur-xl flex items-center justify-center p-8",4,"ngIf"],["class","absolute bottom-10 left-1/2 -translate-x-1/2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white px-8 py-4 rounded-full font-black shadow-lg transition-all hover:scale-105 active:scale-95 flex items-center gap-3 z-50",3,"click",4,"ngIf"],[1,"absolute","inset-0","z-50","flex","flex-col","items-center","justify-center","bg-black/80","backdrop-blur-sm"],[1,"text-6xl","mb-6","animate-bounce"],[1,"text-2xl","font-black","text-white","mb-8","tracking-widest","uppercase"],["class","flex flex-col gap-6 items-center bg-slate-900 p-8 rounded-2xl border border-slate-700 shadow-2xl",4,"ngIf"],["class","text-slate-400 font-mono text-sm animate-pulse bg-black/40 px-4 py-2 rounded-full",4,"ngIf"],[1,"flex","flex-col","gap-6","items-center","bg-slate-900","p-8","rounded-2xl","border","border-slate-700","shadow-2xl"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-full","bg-blue-600","flex","items-center","justify-center","text-2xl"],[1,"text-xl","font-bold","text-white"],[1,"text-slate-400","text-sm"],[1,"px-10","py-4","bg-gradient-to-r","from-green-600","to-green-500","hover:from-green-500","hover:to-green-400","text-white","font-black","rounded-xl","shadow-lg","transition-all","transform","hover:scale-105",3,"click"],[1,"text-slate-400","font-mono","text-sm","animate-pulse","bg-black/40","px-4","py-2","rounded-full"],[1,"flex-1","relative","flex","flex-col","z-10","h-full"],["class","absolute top-24 left-1/2 -translate-x-1/2 bg-black/60 text-white px-6 py-2 rounded-full text-xs font-bold border border-white/10 shadow-xl backdrop-blur-md z-50 tracking-widest uppercase",4,"ngIf"],[1,"h-[40%]","relative","flex","flex-col","items-center","justify-center","pt-8"],[1,"absolute","right-[5%]","top-12","w-36","h-24","bg-gradient-to-br","from-red-900","to-red-950","rounded-xl","border-l-4","border-t-2","border-red-800","shadow-2xl","transform","rotate-6","hidden","lg:flex","items-center","justify-center"],[1,"absolute","inset-0","bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]","opacity-20"],[1,"text-white/20","font-black","uppercase","tracking-widest","text-xs","transform","rotate-90"],["class","absolute top-[40%] left-1/2 -translate-x-1/2 -translate-y-full z-20 flex flex-col items-center gap-1",4,"ngIf"],[1,"relative","w-full","flex","justify-center",2,"height","140px"],[1,"relative","h-full","flex","justify-center","items-center"],["class","absolute transition-all duration-500 ease-out",3,"zIndex","transform",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex-1","grid","grid-cols-2","gap-8","px-4","pb-52","z-20","items-end"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"absolute","top-24","left-1/2","-translate-x-1/2","bg-black/60","text-white","px-6","py-2","rounded-full","text-xs","font-bold","border","border-white/10","shadow-xl","backdrop-blur-md","z-50","tracking-widest","uppercase"],[1,"absolute","top-[40%]","left-1/2","-translate-x-1/2","-translate-y-full","z-20","flex","flex-col","items-center","gap-1"],[1,"text-[10px]","font-black","text-slate-400","uppercase","tracking-wider","shadow-black","drop-shadow-md"],[1,"px-3","py-1.5","rounded-lg","bg-slate-900","font-mono","font-bold","text-white","border","border-slate-700","text-xs","shadow-xl"],[1,"absolute","transition-all","duration-500","ease-out"],[1,"absolute","bottom-0","w-full","h-36","bg-gradient-to-t","from-[#050505]","via-[#0a0a0a]","to-transparent","border-t","border-white/5","flex","items-center","justify-center","z-[100]","px-4","pb-4"],["class","flex items-center gap-8 w-full max-w-5xl justify-between",4,"ngIf"],["class","text-white font-bold animate-pulse text-lg tracking-widest bg-black/50 px-6 py-3 rounded-full border border-white/10",4,"ngIf"],["class","flex gap-6",4,"ngIf"],[1,"flex","items-center","gap-8","w-full","max-w-5xl","justify-between"],[1,"flex","gap-3","bg-black/40","p-3","rounded-2xl","border","border-white/10","shadow-inner","overflow-x-auto","scrollbar-hide"],["class","relative group transition-transform hover:-translate-y-2 active:scale-95 flex-shrink-0 disabled:opacity-30 disabled:grayscale",3,"disabled","click",4,"ngFor","ngForOf"],[1,"h-16","w-px","bg-white/10","mx-2"],[1,"h-16","px-12","rounded-xl","bg-gradient-to-b","from-green-500","to-green-700","hover:from-green-400","hover:to-green-600","text-white","font-black","text-lg","uppercase","tracking-widest","border-b-4","border-green-900","active:border-b-0","active:translate-y-1","transition-all","disabled:opacity-50","disabled:grayscale","shadow-lg","flex","items-center","gap-3",3,"click","disabled"],["width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M5 3L19 12L5 21V3Z"],[1,"relative","group","transition-transform","hover:-translate-y-2","active:scale-95","flex-shrink-0","disabled:opacity-30","disabled:grayscale",3,"click","disabled"],[1,"text-white","font-bold","animate-pulse","text-lg","tracking-widest","bg-black/50","px-6","py-3","rounded-full","border","border-white/10"],[1,"flex","gap-6"],[1,"action-btn","from-slate-600","to-slate-800","border-slate-950","text-green-400","hover:text-green-300",3,"click"],[1,"text-3xl","mb-1"],[1,"text-[10px]","font-black","uppercase","tracking-widest"],[1,"action-btn","from-red-600","to-red-800","border-red-950","text-white",3,"click"],["class","text-slate-400 font-mono text-xs uppercase tracking-widest bg-black/60 px-4 py-2 rounded",4,"ngIf"],["class","h-16 px-12 rounded-xl bg-white hover:bg-slate-200 text-black font-black text-xl border-b-4 border-slate-400 active:border-b-0 active:translate-y-1 transition-all shadow-[0_0_40px_rgba(255,255,255,0.4)] animate-pulse flex items-center gap-3",3,"click",4,"ngIf"],[1,"text-slate-400","font-mono","text-xs","uppercase","tracking-widest","bg-black/60","px-4","py-2","rounded"],[1,"h-16","px-12","rounded-xl","bg-white","hover:bg-slate-200","text-black","font-black","text-xl","border-b-4","border-slate-400","active:border-b-0","active:translate-y-1","transition-all","shadow-[0_0_40px_rgba(255,255,255,0.4)]","animate-pulse","flex","items-center","gap-3",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","3"],["d","M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"],["d","M3 3v5h5"],[1,"absolute","inset-0","z-[120]","bg-black/90","backdrop-blur-xl","flex","items-center","justify-center","p-8"],[1,"bg-slate-900","w-full","max-w-lg","rounded-2xl","border","border-slate-700","shadow-2xl","p-6","relative"],[1,"absolute","top-4","right-4","text-slate-500","hover:text-white",3,"click"],[1,"text-white","font-black","text-2xl","mb-6","flex","items-center","gap-3"],[1,"text-3xl"],[1,"max-h-[60vh]","overflow-y-auto","custom-scroll","space-y-2"],["class","p-4 bg-slate-800 rounded-xl border border-slate-700 flex justify-between items-center group hover:border-purple-500 transition-colors",4,"ngFor","ngForOf"],["class","text-center text-slate-500 py-8",4,"ngIf"],[1,"p-4","bg-slate-800","rounded-xl","border","border-slate-700","flex","justify-between","items-center","group","hover:border-purple-500","transition-colors"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-slate-700","flex","items-center","justify-center","text-xl"],[1,"font-bold","text-white","group-hover:text-purple-400","transition-colors"],[1,"text-xs","text-slate-500"],[1,"bg-purple-600","hover:bg-purple-500","text-white","text-xs","font-bold","px-4","py-2","rounded-lg","shadow-lg","transition-all","active:scale-95",3,"click"],[1,"text-center","text-slate-500","py-8"],[1,"absolute","bottom-10","left-1/2","-translate-x-1/2","bg-gradient-to-r","from-purple-600","to-indigo-600","hover:from-purple-500","hover:to-indigo-500","text-white","px-8","py-4","rounded-full","font-black","shadow-lg","transition-all","hover:scale-105","active:scale-95","flex","items-center","gap-3","z-50",3,"click"],[1,"text-xl"],[1,"flex","flex-col","items-center","relative","transition-all","duration-300"],["class","absolute -top-16 flex flex-col items-center gap-1 animate-bounce z-50",4,"ngIf"],[1,"mb-4","flex","flex-col","items-center","gap-1","z-20","relative"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-wider"],["class","px-3 py-1.5 rounded-lg bg-slate-900 font-mono font-bold text-white border border-slate-700 text-xs shadow-xl",3,"text-green-400","text-red-500",4,"ngIf"],[1,"relative","h-40","w-full","flex","justify-center"],["class","absolute top-0 transition-all duration-300 ease-out hover:-translate-y-4",3,"zIndex","transform",4,"ngFor","ngForOf","ngForTrackBy"],["class","mt-4 relative",4,"ngIf"],["class","absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 text-2xl font-black uppercase drop-shadow shadow-xl px-4 py-2 rounded-xl border-4 bg-black/80 backdrop-blur-md",3,"text-green-400","border-green-600","text-red-500","border-red-600","text-blue-300","border-blue-500",4,"ngIf"],[1,"absolute","-top-16","flex","flex-col","items-center","gap-1","animate-bounce","z-50"],[1,"text-yellow-400","text-[10px]","font-bold","uppercase","tracking-widest","shadow-black","drop-shadow-md"],["width","24","height","24","viewBox","0 0 24 24","fill","#facc15"],["d","M7 10l5 5 5-5z"],[1,"absolute","top-0","transition-all","duration-300","ease-out","hover:-translate-y-4"],[1,"mt-4","relative"],["class","absolute -right-12 top-1/2 -translate-y-1/2 bg-green-500 text-black text-[9px] font-black px-2 py-0.5 rounded uppercase",4,"ngIf"],[1,"absolute","-right-12","top-1/2","-translate-y-1/2","bg-green-500","text-black","text-[9px]","font-black","px-2","py-0.5","rounded","uppercase"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","z-50","text-2xl","font-black","uppercase","drop-shadow","shadow-xl","px-4","py-2","rounded-xl","border-4","bg-black/80","backdrop-blur-md"],[1,"w-16","h-16","rounded-full","shadow-[0_4px_6px_rgba(0,0,0,0.5),inset_0_-4px_4px_rgba(0,0,0,0.3)]","relative","flex","items-center","justify-center","font-sans","select-none"],[1,"absolute","inset-0","rounded-full","border-[6px]","border-dashed","border-white/40","opacity-80"],[1,"w-10","h-10","rounded-full","bg-white/90","shadow-inner","flex","items-center","justify-center","border","border-slate-300","z-10"],[1,"font-black","text-xs","text-black","tracking-tighter"],[1,"absolute","top-0","left-0","w-full","h-1/2","bg-gradient-to-b","from-white/20","to-transparent","rounded-t-full","pointer-events-none"],[1,"w-20","h-20","rounded-full","bg-yellow-500","border-[6px]","border-dashed","border-white/40","shadow-xl","flex","items-center","justify-center","relative","transform","scale-75","lg:scale-100"],[1,"absolute","bottom-1","w-full","h-full","rounded-full","bg-yellow-600","-z-10","translate-y-1"],[1,"absolute","bottom-2","w-full","h-full","rounded-full","bg-yellow-700","-z-20","translate-y-2"],[1,"w-12","h-12","rounded-full","bg-white","flex","items-center","justify-center","border","border-slate-300","shadow-inner"],[1,"font-black","text-black","text-sm"],[1,"w-24","h-36","md:w-28","md:h-40","rounded-xl","shadow-xl","relative","select-none","overflow-hidden","transition-transform","duration-700","transform-style-3d"],[1,"absolute","inset-0","bg-white","border","border-slate-300","rounded-xl","backface-hidden","flex","flex-col","items-center","justify-center","overflow-hidden"],[1,"absolute","inset-0","opacity-10","bg-[url('https://www.transparenttextures.com/patterns/cream-paper.png')]"],[1,"absolute","top-1.5","left-1.5","flex","flex-col","items-center","leading-none"],[1,"font-black","text-2xl","tracking-tighter"],[1,"text-xl","mt-0.5"],[1,"absolute","bottom-1.5","right-1.5","flex","flex-col","items-center","leading-none","rotate-180"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"text-7xl","drop-shadow-sm","transform"],[1,"absolute","inset-0","bg-red-900","border-4","border-white/90","rounded-xl","backface-hidden",2,"transform","rotateY(180deg)"],[1,"w-full","h-full","p-2"],[1,"w-full","h-full","border-2","border-white/20","rounded-lg","bg-[repeating-linear-gradient(45deg,#7f1d1d_0,#7f1d1d_10px,#991b1b_10px,#991b1b_20px)]","flex","items-center","justify-center"],[1,"w-12","h-12","bg-black/30","rounded-full","blur-md"]],template:function(t,r){if(t&1){let i=ee();f(0,"div",4),W(1,"div",5)(2,"div",6),f(3,"div",7)(4,"div",8),W(5,"span",9),f(6,"span",10),y(7),m()(),f(8,"button",11),U("click",function(){return j(i),$(r.tryQuit())}),y(9,"\u2715"),m()(),f(10,"div",12)(11,"div",13)(12,"div",14),y(13,"\u20AC"),m(),f(14,"div",15)(15,"span",16),y(16,"Votre Solde"),m(),f(17,"span",17),y(18),oe(19,"number"),m()()()(),V(20,xZ,7,3,"div",18)(21,OZ,14,12,"div",19)(22,GZ,5,4,"div",20)(23,WZ,11,2,"div",21)(24,KZ,5,0,"button",22)(25,rX,10,10,"ng-template",null,0,Xr)(27,iX,6,5,"ng-template",null,1,Xr)(29,sX,6,1,"ng-template",null,2,Xr)(31,oX,20,27,"ng-template",null,3,Xr),m()}t&2&&(w("@tableIntro",void 0),_(7),te(r.myRole),_(3),w("@fadeIn",void 0),_(8),te(Be(19,9,r.currentMoney,"1.0-0")),_(2),w("ngIf",(r.game==null?null:r.game.phase)==="LOBBY"),_(),w("ngIf",r.game&&r.game.phase!=="LOBBY"),_(),w("ngIf",r.game&&r.game.phase!=="LOBBY"),_(),w("ngIf",r.showOnlinePlayers),_(),w("ngIf",!r.game))},dependencies:[Nt,xt,Au,Bt],styles:[".action-btn[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:20px;background-image:linear-gradient(to bottom,var(--tw-gradient-from),var(--tw-gradient-to));display:flex;flex-direction:column;align-items:center;justify-content:center;transition:all .1s;cursor:pointer;border-bottom-width:6px;box-shadow:0 10px 15px -3px #00000080}.action-btn[_ngcontent-%COMP%]:active{transform:translateY(6px);border-bottom-width:0;box-shadow:none}.action-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollbar-hide[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.transform-style-3d[_ngcontent-%COMP%]{transform-style:preserve-3d}.backface-hidden[_ngcontent-%COMP%]{backface-visibility:hidden}"],data:{animation:[$t("tableIntro",[Rt(":enter",[Pe({transform:"scale(1.05)",opacity:0}),At("800ms cubic-bezier(0.2, 0.8, 0.2, 1)",Pe({transform:"scale(1)",opacity:1}))])]),$t("dealCard",[Rt(":enter",[Pe({transform:"translate(40vw, -40vh) rotate(120deg) scale(0.5)",opacity:0}),At("500ms cubic-bezier(0.16, 1, 0.3, 1)",Pe({transform:"translate(0, 0) rotate(0) scale(1)",opacity:1}))])]),$t("fadeIn",[Rt(":enter",[Pe({opacity:0,transform:"translateY(10px)"}),At("300ms ease-out",Pe({opacity:1,transform:"translateY(0)"}))])]),$t("chipDrop",[Rt(":enter",[Pe({transform:"translateY(-50px) scale(1.5)",opacity:0}),At("300ms cubic-bezier(0.175, 0.885, 0.32, 1.275)",Pe({transform:"translateY(0) scale(1)",opacity:1}))])])]}})};function cX(n,e){if(n&1&&(f(0,"div",43),y(1),m()),n&2){let t=D();_(),G(" ",t.freeSpins," Tours Gratuits (x2) ")}}function lX(n,e){n&1&&(f(0,"div",49)(1,"span",50),y(2,"\u{1F0CF}"),m(),f(3,"span",50),y(4,"\u{1F48E}"),m()())}function uX(n,e){if(n&1&&(f(0,"div",51),y(1),m()),n&2){let t=D().$implicit,r=D();le("scale-125",r.winAmount>0),_(),G(" ",t.icon," ")}}function dX(n,e){if(n&1){let t=ee();f(0,"button",52),U("click",function(){j(t);let i=D().index,s=D();return $(s.toggleHold(i))}),y(1),m()}if(n&2){let t=D().index,r=D();le("bg-red-600",r.isHeld[t])("text-white",r.isHeld[t])("bg-slate-700",!r.isHeld[t])("text-slate-300",!r.isHeld[t]),_(),G(" ",r.isHeld[t]?"HELD":"HOLD"," ")}}function hX(n,e){n&1&&(f(0,"div",53)(1,"span",54),y(2,"\u{1F512}"),m()())}function fX(n,e){if(n&1&&(f(0,"div",44),V(1,lX,5,0,"div",45)(2,uX,2,3,"div",46)(3,dX,2,9,"button",47)(4,hX,3,0,"div",48),m()),n&2){let t=e.index,r=D();_(),w("ngIf",r.isSpinning[t]),_(),w("ngIf",!r.isSpinning[t]),_(),w("ngIf",r.canHold&&!r.isSpinning[t]&&r.freeSpins===0),_(),w("ngIf",r.isHeld[t])}}function pX(n,e){if(n&1&&(f(0,"div",55),W(1,"div",56),f(2,"div",57),y(3),oe(4,"number"),m()()),n&2){let t=D();w("@winLightBurst",void 0),_(3),G(" +",Me(4,2,t.winAmount)," \u20AC ")}}function mX(n,e){n&1&&(f(0,"span"),y(1,"\u{1F340} COUP DE POUCE !"),m())}function gX(n,e){n&1&&(f(0,"span"),y(1,"3 Symboles \u2022 Wild \u{1F0CF} \u2022 Scatter \u{1F31F}"),m())}function _X(n,e){if(n&1&&(f(0,"div",58),V(1,mX,2,0,"span",59)(2,gX,2,0,"span",59),m()),n&2){let t=D();_(),w("ngIf",t.nudgeChance),_(),w("ngIf",!t.nudgeChance)}}function vX(n,e){if(n&1){let t=ee();f(0,"button",60),U("click",function(){let i=j(t).$implicit,s=D();return $(s.bet=i)}),y(1),oe(2,"number"),m()}if(n&2){let t=e.$implicit,r=D();le("border-yellow-500",r.bet===t)("text-yellow-400",r.bet===t)("bg-yellow-900/30",r.bet===t)("border-slate-700",r.bet!==t)("text-slate-500",r.bet!==t),_(),G(" ",Me(2,11,t)," ")}}function yX(n,e){if(n&1&&(f(0,"span",61),y(1),oe(2,"number"),m()),n&2){let t=D();_(),G("(Co\xFBt: ",Me(2,1,t.getTotalCost())," \u20AC)")}}function bX(n,e){if(n&1&&(f(0,"span",62),y(1),m()),n&2){let t=e.$implicit;_(),G(" ",t," ")}}function EX(n,e){n&1&&(f(0,"span",63),y(1,"En attente de gagnants..."),m())}function wX(n,e){if(n&1){let t=ee();f(0,"div",64),U("click",function(){j(t);let i=D();return $(i.showStats=!1)}),f(1,"div",65),U("click",function(i){return j(t),$(i.stopPropagation())}),f(2,"h3",66),y(3,"\u{1F3B0} Mes Statistiques"),m(),f(4,"div",67)(5,"div",68)(6,"span",69),y(7,"Spins Totaux"),m(),f(8,"span",70),y(9),m()(),f(10,"div",68)(11,"span",69),y(12,"Victoires"),m(),f(13,"span",71),y(14),m()(),f(15,"div",68)(16,"span",69),y(17,"Plus Gros Gain"),m(),f(18,"span",72),y(19),oe(20,"number"),m()(),f(21,"div",68)(22,"span",69),y(23,"Argent Mis\xE9"),m(),f(24,"span",70),y(25),oe(26,"number"),m()(),f(27,"div",68)(28,"span",69),y(29,"RTP (Retour)"),m(),f(30,"span",73),y(31),oe(32,"number"),m()()()()()}if(n&2){let t=D();_(9),te(t.sessionStats.spins),_(5),te(t.sessionStats.wins),_(5),G("",Me(20,5,t.sessionStats.bestWin)," \u20AC"),_(6),G("",Me(26,7,t.sessionStats.totalBet)," \u20AC"),_(6),G("",t.sessionStats.totalBet>0?Be(32,9,t.sessionStats.totalWon/t.sessionStats.totalBet*100,"1.1-1"):0,"%")}}var q0=class n{constructor(e,t,r){this.gameState=e;this.sound=t;this.firebaseService=r}exit=new ke;currentMoney=0;symbols=[{id:0,icon:"\u{1F0CF}",value:0,weight:4,isWild:!0},{id:1,icon:"\u{1F352}",value:5,weight:60},{id:2,icon:"\u{1F347}",value:10,weight:45},{id:3,icon:"\u{1F34B}",value:15,weight:35},{id:4,icon:"\u{1F514}",value:20,weight:15},{id:5,icon:"7\uFE0F\u20E3",value:50,weight:8},{id:6,icon:"\u{1F48E}",value:100,weight:3},{id:99,icon:"\u{1F31F}",value:0,weight:5,isScatter:!0}];themes=[{id:"vegas",name:"Vegas",bg:"#0f0518",border:"#eab308",accent:"#7c3aed",font:"sans"},{id:"cyber",name:"Cyberpunk",bg:"#000000",border:"#06b6d4",accent:"#ec4899",font:"mono"},{id:"egypt",name:"Pharaon",bg:"#1c1917",border:"#fbbf24",accent:"#d97706",font:"serif"}];currentThemeIdx=0;reels=[];isSpinning=[!1,!1,!1];isHeld=[!1,!1,!1];isNudging=[!1,!1,!1];spinning=!1;bet=50;winAmount=0;jackpot=1e4;freeSpins=0;canHold=!1;isTurbo=!1;nudgeChance=!1;showStats=!1;sessionStats={spins:0,wins:0,totalBet:0,totalWon:0,bestWin:0};tickerMessages=[];subs=new Ke;jackpotInterval;ngOnInit(){this.subs.add(this.gameState.gameState$.subscribe(e=>this.currentMoney=e.money)),this.subs.add(this.firebaseService.publicEvents$.subscribe(e=>{this.tickerMessages=e})),this.reels=[this.getRandomSymbol(),this.getRandomSymbol(),this.getRandomSymbol()],this.jackpotInterval=setInterval(()=>this.jackpot+=Math.random()*5,2e3)}ngOnDestroy(){this.subs.unsubscribe(),clearInterval(this.jackpotInterval)}get currentTheme(){return this.themes[this.currentThemeIdx]}get heldCost(){return this.isHeld.filter(e=>e).length*(this.bet*.5)}get availableBets(){let e=[50,100,500,1e3];return this.currentMoney>1e6?[...e,25e3,5e4,1e5]:e}getTotalCost(){return this.freeSpins>0?0:this.bet+this.heldCost}cycleTheme(){this.currentThemeIdx=(this.currentThemeIdx+1)%this.themes.length,this.sound.playSoftPop()}toggleHold(e){!this.canHold||this.freeSpins>0||(this.isHeld[e]=!this.isHeld[e],this.sound.playSoftPop())}getRandomSymbol(){let e=this.symbols.reduce((r,i)=>r+i.weight,0),t=Math.random()*e;for(let r of this.symbols){if(t<r.weight)return r;t-=r.weight}return this.symbols[0]}spin(){let e=this.getTotalCost();if(this.currentMoney<e&&this.freeSpins===0||this.spinning)return;this.spinning=!0,this.winAmount=0,this.nudgeChance=!1,this.isNudging=[!1,!1,!1],this.freeSpins>0?this.freeSpins--:(this.gameState.addMoney(-e),this.sessionStats.totalBet+=e),this.sessionStats.spins++,this.sound.playNoise(.3,"lowpass",150,.5),this.reels.forEach((i,s)=>{this.isHeld[s]||(this.isSpinning[s]=!0)});let t=this.isTurbo?200:1e3,r=this.isTurbo?100:600;setTimeout(()=>this.stopReel(0),t),setTimeout(()=>this.stopReel(1),t+r),setTimeout(()=>this.stopReel(2),t+r*2)}stopReel(e){this.isHeld[e]||(this.reels[e]=this.getRandomSymbol(),this.isSpinning[e]=!1,this.sound.playNoise(.1,"highpass",1200,.2)),e===2&&this.checkWin()}checkWin(){let[e,t,r]=this.reels,i=0,s=!1,o=this.reels.filter(v=>!v.isWild&&!v.isScatter),a=o.length>0?o[0].id:6,c=e.id===a||e.isWild,u=t.id===a||t.isWild,d=r.id===a||r.isWild;c&&u&&d&&!e.isScatter&&!t.isScatter&&!r.isScatter&&(i=this.symbols.find(b=>b.id===a)?.value||0,a===6&&(s=!0)),this.reels.filter(v=>v.isScatter).length===3&&(this.freeSpins+=10,this.sound.playSuccess()),i>0?(this.winAmount=this.bet*i,this.freeSpins>0&&(this.winAmount*=2),this.sessionStats.wins++,this.sessionStats.totalWon+=this.winAmount,this.winAmount>this.sessionStats.bestWin&&(this.sessionStats.bestWin=this.winAmount),s?(this.winAmount+=this.jackpot,this.jackpot=1e4,this.sound.playCash(),this.firebaseService.logPublicEvent(`\u{1F48E} JACKPOT ! ${this.firebaseService.currentUsername} a gagn\xE9 ${this.winAmount}\u20AC !`,"JACKPOT")):i>=20?(this.sound.playCash(),this.firebaseService.logPublicEvent(`\u{1F525} BIG WIN ! ${this.firebaseService.currentUsername} a gagn\xE9 ${this.winAmount}\u20AC !`,"WIN")):this.sound.playSuccess(),setTimeout(()=>this.gameState.addMoney(this.winAmount),500),this.canHold=!1):this.tryNudgeOrHold(),this.spinning=!1,this.isHeld=[!1,!1,!1]}tryNudgeOrHold(){let[e,t,r]=this.reels;if((e.id===t.id||t.id===r.id||e.id===r.id)&&Math.random()<.2){this.nudgeChance=!0;let i=e.id===t.id?2:t.id===r.id?0:1;this.isNudging[i]=!0,setTimeout(()=>{this.reels[i]=this.reels[i===0?1:0],this.isNudging[i]=!1,this.checkWin()},300);return}this.canHold=!0}static \u0275fac=function(t){return new(t||n)(X(at),X(Wt),X(Mn))};static \u0275cmp=qe({type:n,selectors:[["app-slot-machine"]],outputs:{exit:"exit"},standalone:!1,decls:56,vars:33,consts:[[1,"absolute","inset-0","w-full","h-full","flex","flex-col","items-center","overflow-hidden","font-sans","select-none"],[1,"absolute","inset-0","opacity-30","bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')]","mix-blend-overlay"],[1,"absolute","-top-1/2","-left-1/2","w-[200%]","h-[200%]","bg-[conic-gradient(from_0deg_at_50%_50%,_transparent_0deg,_var(--accent-color)_30deg,_transparent_60deg)]","animate-slow-rotate","opacity-20","pointer-events-none"],[1,"absolute","top-4","left-1/2","-translate-x-1/2","z-30","w-full","max-w-lg"],[1,"bg-black/80","border-2","border-yellow-500","rounded-b-2xl","p-2","text-center","shadow-[0_0_30px_rgba(234,179,8,0.4)]","relative","overflow-hidden"],[1,"absolute","inset-0","bg-yellow-500/10","animate-pulse"],[1,"text-[10px]","font-bold","text-yellow-200","uppercase","tracking-[0.5em]","mb-1"],[1,"text-4xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-b","from-yellow-300","to-yellow-600","font-mono","tracking-tighter"],[1,"absolute","top-6","left-6","z-40","flex","flex-col","gap-2"],[1,"bg-black/60","backdrop-blur-xl","px-4","py-2","rounded-full","border","border-white/10","flex","items-center","gap-3"],[1,"text-yellow-400","font-bold"],[1,"flex","flex-col"],[1,"text-[9px]","text-slate-400","uppercase","font-bold"],[1,"text-white","font-mono","font-bold"],[1,"bg-slate-800/80","hover:bg-slate-700","text-white","px-4","py-2","rounded-full","text-xs","font-bold","border","border-white/10","flex","items-center","gap-2","transition-all",3,"click"],[1,"absolute","top-6","right-6","z-50","w-10","h-10","rounded-full","bg-white/5","hover:bg-red-600","text-white","flex","items-center","justify-center","transition-all","border","border-white/10",3,"click"],[1,"relative","z-10","w-full","h-full","flex","flex-col","items-center","justify-center","gap-6"],[1,"relative","p-6","rounded-[2rem]","bg-black","border-[4px]","shadow-2xl","transition-all","duration-500","scale-90","md:scale-100"],["class","absolute -top-6 left-1/2 -translate-x-1/2 bg-red-600 text-white px-6 py-1 rounded-t-xl font-bold text-xs uppercase animate-bounce border-x border-t border-red-400 z-0",4,"ngIf"],[1,"absolute","top-1/2","left-0","-translate-y-1/2","w-full","h-[2px]","bg-red-600","z-40","pointer-events-none","shadow-[0_0_15px_red]","opacity-80"],[1,"flex","gap-3","relative","z-20"],["class","w-28 h-48 bg-gradient-to-b from-slate-200 to-slate-400 overflow-hidden relative rounded-lg shadow-inner flex flex-col items-center justify-center group border-x-2 border-black/20",4,"ngFor","ngForOf"],[1,"h-16","w-full","flex","items-center","justify-center","relative","z-50"],["class","relative",4,"ngIf"],["class","text-white/50 text-xs font-bold uppercase tracking-[0.2em] bg-black/40 px-4 py-2 rounded-full border border-white/10",4,"ngIf"],[1,"flex","flex-col","items-center","gap-4","bg-black/80","p-5","rounded-3xl","border","border-white/10","backdrop-blur-xl","w-full","max-w-2xl"],[1,"flex","items-center","gap-4","w-full","justify-between","px-4"],[1,"flex","flex-col","items-center","gap-1","group",3,"click"],[1,"w-10","h-6","rounded-full","p-1","transition-colors","duration-300"],[1,"w-4","h-4","bg-white","rounded-full","shadow-md","transform","transition-transform","duration-300"],[1,"text-[9px]","font-bold","text-slate-400","uppercase","group-hover:text-white"],[1,"flex","gap-2","overflow-x-auto","scrollbar-hide"],["class","px-4 py-2 rounded-lg font-bold text-xs transition-all border-2 shrink-0",3,"border-yellow-500","text-yellow-400","bg-yellow-900/30","border-slate-700","text-slate-500","click",4,"ngFor","ngForOf"],[1,"group","relative","w-full","md:w-80","h-16","bg-gradient-to-b","from-yellow-400","to-yellow-700","rounded-full","shadow-[0_6px_0_#854d0e]","active:translate-y-1","active:shadow-none","transition-all","flex","items-center","justify-center","overflow-hidden","disabled:grayscale","disabled:cursor-not-allowed",3,"click","disabled"],[1,"absolute","inset-0","bg-white/20","-skew-x-12","-translate-x-full","group-hover:translate-x-full","transition-transform","duration-700"],[1,"flex","flex-col","items-center","leading-none"],[1,"text-2xl","font-black","text-yellow-950","uppercase","tracking-widest","drop-shadow-sm"],["class","text-[10px] font-bold text-yellow-900 opacity-80",4,"ngIf"],[1,"absolute","bottom-0","w-full","bg-black/90","border-t","border-white/10","py-1","overflow-hidden","z-50"],[1,"whitespace-nowrap","animate-ticker","inline-block"],["class","mx-8 text-xs font-mono text-green-400",4,"ngFor","ngForOf"],["class","mx-8 text-xs font-mono text-slate-500",4,"ngIf"],["class","absolute inset-0 bg-black/90 z-[100] flex items-center justify-center p-8",3,"click",4,"ngIf"],[1,"absolute","-top-6","left-1/2","-translate-x-1/2","bg-red-600","text-white","px-6","py-1","rounded-t-xl","font-bold","text-xs","uppercase","animate-bounce","border-x","border-t","border-red-400","z-0"],[1,"w-28","h-48","bg-gradient-to-b","from-slate-200","to-slate-400","overflow-hidden","relative","rounded-lg","shadow-inner","flex","flex-col","items-center","justify-center","group","border-x-2","border-black/20"],["class","absolute inset-0 flex flex-col items-center justify-center animate-spin-reel opacity-80","style","filter: blur(10px);",4,"ngIf"],["class","text-7xl transform transition-all duration-200",3,"scale-125",4,"ngIf"],["class","absolute bottom-2 left-1/2 -translate-x-1/2 text-[10px] font-black uppercase px-2 py-1 rounded border shadow-lg transition-all z-50 hover:scale-110",3,"bg-red-600","text-white","bg-slate-700","text-slate-300","click",4,"ngIf"],["class","absolute inset-0 bg-red-500/20 border-2 border-red-500 pointer-events-none rounded-lg flex items-center justify-center",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","animate-spin-reel","opacity-80",2,"filter","blur(10px)"],[1,"text-7xl","my-4"],[1,"text-7xl","transform","transition-all","duration-200"],[1,"absolute","bottom-2","left-1/2","-translate-x-1/2","text-[10px]","font-black","uppercase","px-2","py-1","rounded","border","shadow-lg","transition-all","z-50","hover:scale-110",3,"click"],[1,"absolute","inset-0","bg-red-500/20","border-2","border-red-500","pointer-events-none","rounded-lg","flex","items-center","justify-center"],[1,"text-4xl","opacity-50"],[1,"relative"],[1,"absolute","inset-0","bg-white","blur-xl","opacity-60","animate-pulse-fast","scale-150","rounded-full"],[1,"bg-gradient-to-r","from-yellow-400","to-yellow-600","text-black","px-10","py-3","rounded-full","font-black","text-3xl","shadow-2xl","border-4","border-white","relative","z-10","transform","scale-110"],[1,"text-white/50","text-xs","font-bold","uppercase","tracking-[0.2em]","bg-black/40","px-4","py-2","rounded-full","border","border-white/10"],[4,"ngIf"],[1,"px-4","py-2","rounded-lg","font-bold","text-xs","transition-all","border-2","shrink-0",3,"click"],[1,"text-[10px]","font-bold","text-yellow-900","opacity-80"],[1,"mx-8","text-xs","font-mono","text-green-400"],[1,"mx-8","text-xs","font-mono","text-slate-500"],[1,"absolute","inset-0","bg-black/90","z-[100]","flex","items-center","justify-center","p-8",3,"click"],[1,"bg-slate-900","border","border-slate-700","p-6","rounded-2xl","w-full","max-w-sm","shadow-2xl",3,"click"],[1,"text-xl","font-bold","text-white","mb-4","border-b","border-slate-700","pb-2"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"text-slate-400"],[1,"text-white"],[1,"text-green-400"],[1,"text-yellow-400"],[1,"text-blue-400"]],template:function(t,r){t&1&&(f(0,"div",0),W(1,"div",1)(2,"div",2),f(3,"div",3)(4,"div",4),W(5,"div",5),f(6,"div",6),y(7,"Mega Jackpot"),m(),f(8,"div",7),y(9),oe(10,"number"),m()()(),f(11,"div",8)(12,"div",9)(13,"div",10),y(14,"\u20AC"),m(),f(15,"div",11)(16,"span",12),y(17,"Solde"),m(),f(18,"span",13),y(19),oe(20,"number"),m()()(),f(21,"button",14),U("click",function(){return r.showStats=!r.showStats}),y(22," \u{1F4CA} Stats "),m(),f(23,"button",14),U("click",function(){return r.cycleTheme()}),y(24," \u{1F3A8} Th\xE8me "),m()(),f(25,"button",15),U("click",function(){return r.exit.emit()}),y(26,"\u2715"),m(),f(27,"div",16)(28,"div",17),V(29,cX,2,1,"div",18),W(30,"div",19),f(31,"div",20),V(32,fX,5,4,"div",21),m()(),f(33,"div",22),V(34,pX,5,4,"div",23)(35,_X,3,2,"div",24),m(),f(36,"div",25)(37,"div",26)(38,"button",27),U("click",function(){return r.isTurbo=!r.isTurbo}),f(39,"div",28),W(40,"div",29),m(),f(41,"span",30),y(42,"Turbo \u26A1"),m()(),f(43,"div",31),V(44,vX,3,13,"button",32),m()(),f(45,"button",33),U("click",function(){return r.spin()}),W(46,"div",34),f(47,"div",35)(48,"span",36),y(49,"TOURNER"),m(),V(50,yX,3,3,"span",37),m()()()(),f(51,"div",38)(52,"div",39),V(53,bX,2,1,"span",40)(54,EX,2,0,"span",41),m()(),V(55,wX,33,12,"div",42),m()),t&2&&(we("background",r.currentTheme.bg)("--accent-color",r.currentTheme.accent),_(9),G(" ",Be(10,27,r.jackpot,"1.0-0")," \u20AC "),_(10),te(Be(20,30,r.currentMoney,"1.0-0")),_(8),w("@machineFlash",r.winAmount>0?"win":"idle"),_(),we("border-color",r.currentTheme.border)("box-shadow","0 0 60px "+r.currentTheme.accent+"80"),_(),w("ngIf",r.freeSpins>0),_(3),w("ngForOf",r.reels),_(2),w("ngIf",r.winAmount>0),_(),w("ngIf",r.winAmount===0&&!r.spinning),_(4),le("bg-green-500",r.isTurbo)("bg-slate-700",!r.isTurbo),_(),le("translate-x-4",r.isTurbo),_(4),w("ngForOf",r.availableBets),_(),w("disabled",r.spinning||r.currentMoney<r.getTotalCost()),_(5),w("ngIf",r.heldCost>0),_(3),w("ngForOf",r.tickerMessages),_(),w("ngIf",r.tickerMessages.length===0),_(),w("ngIf",r.showStats))},dependencies:[Nt,xt,Bt],styles:[".animate-spin-reel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spinBlur .15s linear infinite}.animate-slow-rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 20s linear infinite}.animate-ticker[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_ticker 30s linear infinite}.animate-nudge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_nudgeAnim .3s ease-in-out}@keyframes _ngcontent-%COMP%_spinBlur{0%{transform:translateY(-20%) scaleY(1.2);opacity:.5}to{transform:translateY(20%) scaleY(1.2);opacity:.5}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_ticker{0%{transform:translate(100%)}to{transform:translate(-100%)}}@keyframes _ngcontent-%COMP%_nudgeAnim{0%,to{transform:translateY(0)}50%{transform:translateY(15px)}}.text-shadow-neon[_ngcontent-%COMP%]{text-shadow:0 0 10px currentColor}"],data:{animation:[$t("reelSpin",[Rt("* => spin",[At("{{time}} ease-in-out",Wp([Pe({transform:"translateY(0)",offset:0,filter:"blur(0px)"}),Pe({transform:"translateY(-1500px)",offset:1,filter:"blur(8px)"})]))])]),$t("winLightBurst",[Rt(":enter",[Pe({transform:"scale(0.5)",opacity:0,filter:"brightness(1)"}),At("0.6s cubic-bezier(0.22, 1, 0.36, 1)",Wp([Pe({transform:"scale(0.5)",opacity:0,filter:"brightness(5)",offset:0}),Pe({transform:"scale(1.1)",opacity:1,filter:"brightness(2)",offset:.3}),Pe({transform:"scale(1)",opacity:1,filter:"brightness(1)",offset:1})]))])]),$t("machineFlash",[qp("win",Pe({filter:"drop-shadow(0 0 30px #eab308) brightness(1.1)"})),qp("idle",Pe({filter:"drop-shadow(0 0 15px var(--accent-color)) brightness(1)"})),Rt("idle => win",[At("0.5s ease-out")]),Rt("win => idle",[At("1s ease-out")])])]}})};var El=class n{constructor(e){this.gameState=e;this.loadFromStorage()}defaultItems=[{id:"p_s1",game:"PLINKO",category:"SKIN",name:"Classique",price:0,value:"\u{1F534}",unlocked:!0,selected:!0},{id:"p_s2",game:"PLINKO",category:"SKIN",name:"Bleu",price:1e3,value:"\u{1F535}",unlocked:!1,selected:!1},{id:"p_s3",game:"PLINKO",category:"SKIN",name:"Alien",price:5e3,value:"\u{1F47D}",unlocked:!1,selected:!1},{id:"p_s4",game:"PLINKO",category:"SKIN",name:"Feu",price:1e4,value:"\u{1F525}",unlocked:!1,selected:!1},{id:"p_s5",game:"PLINKO",category:"SKIN",name:"Balle 8",price:2e4,value:"\u{1F3B1}",unlocked:!1,selected:!1},{id:"p_s6",game:"PLINKO",category:"SKIN",name:"Diamant",price:5e4,value:"\u{1F48E}",unlocked:!1,selected:!1},{id:"p_s7",game:"PLINKO",category:"SKIN",name:"Bitcoin",price:1e5,value:"\u{1F4B0}",unlocked:!1,selected:!1},{id:"p_t1",game:"PLINKO",category:"THEME",name:"Cyberpunk",price:0,unlocked:!0,selected:!0,value:{bg:"#020617",panelBg:"#0f172a",accent:"#06b6d4",text:"#ecfeff",pegColor:"#0e7490"}},{id:"p_t2",game:"PLINKO",category:"THEME",name:"Matrix",price:25e3,unlocked:!1,selected:!1,value:{bg:"#000000",panelBg:"#051a05",accent:"#22c55e",text:"#dcfce7",pegColor:"#15803d"}},{id:"p_t3",game:"PLINKO",category:"THEME",name:"Gold",price:1e5,unlocked:!1,selected:!1,value:{bg:"#1c1917",panelBg:"#292524",accent:"#fbbf24",text:"#fffbeb",pegColor:"#d97706"}}];itemsSubject=new et(this.defaultItems);items$=this.itemsSubject.asObservable();STORAGE_KEY="global_shop_v2";getEquippedItem(e,t){let r=this.itemsSubject.value.find(i=>i.game===e&&i.category===t&&i.selected);return r?r.value:e==="PLINKO"&&t==="SKIN"?"\u{1F534}":e==="PLINKO"&&t==="THEME"?this.defaultItems.find(i=>i.id==="p_t1").value:null}buyOrEquip(e){let t=[...this.itemsSubject.value],r=t.find(i=>i.id===e.id);r&&(r.unlocked?(t.forEach(i=>{i.game===r.game&&i.category===r.category&&(i.selected=!1)}),r.selected=!0,this.saveToStorage(t)):this.gameState.getMoney()>=r.price&&(this.gameState.addMoney(-r.price),r.unlocked=!0,t.forEach(s=>{s.game===r.game&&s.category===r.category&&(s.selected=!1)}),r.selected=!0,this.saveToStorage(t)),this.itemsSubject.next(t))}saveToStorage(e){let t=e.map(r=>({id:r.id,unlocked:r.unlocked,selected:r.selected}));localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}loadFromStorage(){let e=localStorage.getItem(this.STORAGE_KEY);if(e){let t=JSON.parse(e),r=[...this.defaultItems];t.forEach(i=>{let s=r.find(o=>o.id===i.id);s&&(s.unlocked=i.unlocked,s.selected=i.selected)}),this.itemsSubject.next(r)}}static \u0275fac=function(t){return new(t||n)(ae(at))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var SX=["canvas"],CX=["container"],TX=()=>[100,500,1e3,2500];function DX(n,e){if(n&1){let t=ee();f(0,"button",30),U("click",function(){let i=j(t).$implicit,s=D();return $(s.bet=i)}),y(1),m()}if(n&2){let t=e.$implicit;_(),G(" ",t," ")}}function xX(n,e){if(n&1){let t=ee();f(0,"button",31),U("click",function(){let i=j(t).$implicit,s=D();return $(s.setRisk(i))}),y(1),m()}if(n&2){let t=e.$implicit,r=D();we("background",r.risk===t?r.currentTheme.accent:"transparent")("color",r.risk===t?"#000":"inherit"),_(),te(t)}}function AX(n,e){if(n&1&&(f(0,"div",32)(1,"span",33),y(2),m(),f(3,"span"),y(4),oe(5,"number"),m()()),n&2){let t=e.$implicit,r=D();_(),we("color",t.multiplier>=1?r.currentTheme.accent:"#ef4444"),_(),G("x",t.multiplier),_(),le("opacity-50",t.amount<=0),_(),or("",t.amount>0?"+":"","",Me(5,7,t.amount))}}var W0=class n{constructor(e,t){this.gameState=e;this.shop=t}canvasRef;containerRef;exit=new ke;ctx;animationFrameId=0;currentMoney=0;bet=100;rows=16;risk="MEDIUM";risks=["LOW","MEDIUM","HIGH"];width=800;height=600;pegRadius=4;ballRadius=9;gravity=.6;friction=.55;pegs=[];balls=[];multipliers=[];history=[];get currentTheme(){return this.shop.getEquippedItem("PLINKO","THEME")}ngAfterViewInit(){this.gameState.gameState$.subscribe(e=>this.currentMoney=e.money),this.shop.items$.subscribe(()=>{this.updateBoard()}),this.ctx=this.canvasRef.nativeElement.getContext("2d",{alpha:!1}),this.resize(),window.addEventListener("resize",()=>this.resize()),this.loop()}ngOnDestroy(){cancelAnimationFrame(this.animationFrameId),window.removeEventListener("resize",()=>this.resize())}resize(){if(this.containerRef){let e=this.containerRef.nativeElement;this.canvasRef.nativeElement.width=e.clientWidth,this.canvasRef.nativeElement.height=e.clientHeight,this.width=e.clientWidth,this.height=e.clientHeight,this.updateBoard()}}setRisk(e){this.risk=e,this.updateBoard()}updateBoard(){this.pegs=[],this.multipliers=[];let t=this.height*.8/(this.rows+2),r=this.height*.1;for(let c=0;c<this.rows;c++){let u=c+3,d=(u-1)*t,p=(this.width-d)/2;for(let v=0;v<u;v++)this.pegs.push({x:p+v*t,y:r+c*t,radius:this.pegRadius,hitAnim:0})}let i=this.rows+1,s=t,o=(this.width-i*s)/2,a=this.getRiggedMultipliers(this.rows);for(let c=0;c<i;c++){let u=a[c],d=this.currentTheme.panelBg;u>=1&&(d=this.currentTheme.accent),u<1&&(d="#333"),this.multipliers.push({value:u,x:o+c*s,y:r+this.rows*t+t/2,w:s-4,h:40,c:d})}}getRiggedMultipliers(e){let t=e+1,r=Math.floor(t/2),i=new Array(t).fill(0);for(let s=0;s<t;s++){let o=Math.abs(s-r);this.risk==="HIGH"?o<=1?i[s]=.1:o===2?i[s]=.2:o===3?i[s]=.4:i[s]=.2*Math.pow(2.1,o-2):this.risk==="MEDIUM"?o<=2?i[s]=.5:o===3?i[s]=1:i[s]=.8*Math.pow(1.4,o-2):o<=2?i[s]=.8:i[s]=1+(o-2)*.3,i[s]>1e3&&(i[s]=1e3),i[s]=Math.floor(i[s]*10)/10}return i}dropBall(){if(this.currentMoney<this.bet)return;this.gameState.addMoney(-this.bet);let e=this.width/2+(Math.random()-.5)*5;this.balls.push({id:Math.random(),x:e,y:50,vx:0,vy:0,radius:this.ballRadius,skin:this.shop.getEquippedItem("PLINKO","SKIN"),value:this.bet})}dropRafale(){let e=0,t=setInterval(()=>{e++>=20||this.currentMoney<this.bet?clearInterval(t):this.dropBall()},40)}loop(){this.ctx.fillStyle=this.currentTheme.bg,this.ctx.fillRect(0,0,this.width,this.height);for(let e=this.balls.length-1;e>=0;e--){let t=this.balls[e];t.vy+=this.gravity,t.x+=t.vx,t.y+=t.vy,t.vx-=(t.x-this.width/2)*5e-4;for(let r of this.pegs){let i=t.x-r.x,s=t.y-r.y,o=i*i+s*s,a=t.radius+r.radius;if(o<a*a){let c=Math.atan2(s,i);r.hitAnim=1;let u=2.5;t.vx=Math.cos(c)*u+(Math.random()-.5)*.5,t.vy=Math.sin(c)*u;let d=a-Math.sqrt(o);t.x+=i/Math.sqrt(o)*d,t.y+=s/Math.sqrt(o)*d}}if(t.y>this.height-100){let r=this.multipliers.find(i=>t.x>=i.x&&t.x<=i.x+i.w);if(r&&t.y>r.y){let i=t.value*r.value;this.gameState.addMoney(i);let s=i-t.value;this.history.unshift({multiplier:r.value,amount:s,isWin:s>0}),this.balls.splice(e,1)}else t.y>this.height&&this.balls.splice(e,1)}}for(let e of this.pegs){this.ctx.beginPath();let t=e.hitAnim>.01?e.radius+e.hitAnim*3:e.radius;this.ctx.arc(e.x,e.y,t,0,Math.PI*2),this.ctx.fillStyle=e.hitAnim>.01?"#fff":this.currentTheme.pegColor,this.ctx.fill(),e.hitAnim*=.85}for(let e of this.multipliers)this.ctx.fillStyle=e.c,this.ctx.fillRect(e.x,e.y,e.w,e.h),this.ctx.fillStyle="#fff",this.ctx.font="bold 10px monospace",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(e.value+"x",e.x+e.w/2,e.y+e.h/2);this.ctx.font=this.ballRadius*2.2+"px Arial";for(let e of this.balls)this.ctx.shadowBlur=10,this.ctx.shadowColor=this.currentTheme.accent,this.ctx.fillText(e.skin,e.x,e.y+2),this.ctx.shadowBlur=0;this.animationFrameId=requestAnimationFrame(()=>this.loop())}static \u0275fac=function(t){return new(t||n)(X(at),X(El))};static \u0275cmp=qe({type:n,selectors:[["app-plinko-game"]],viewQuery:function(t,r){if(t&1&&(Pi(SX,5),Pi(CX,5)),t&2){let i;Jr(i=Zr())&&(r.canvasRef=i.first),Jr(i=Zr())&&(r.containerRef=i.first)}},outputs:{exit:"exit"},standalone:!1,decls:46,vars:36,consts:[["container",""],["canvas",""],[1,"absolute","inset-0","w-full","h-full","flex","overflow-hidden","font-mono","select-none","transition-colors","duration-500"],[1,"relative","z-20","w-80","border-r","p-6","flex","flex-col","gap-4","shadow-2xl","h-full","overflow-y-auto","backdrop-blur-md","transition-all","duration-500"],[1,"flex","items-center","justify-between","mb-4","shrink-0"],[1,"font-black","text-3xl","italic","tracking-tighter","transform","-skew-x-6"],[1,"text-xs","align-top","opacity-50","not-italic","ml-1"],[1,"p-4","rounded-xl","border","shadow-lg","transition-all"],[1,"text-[10px]","font-bold","uppercase","tracking-widest","mb-1","opacity-70"],[1,"text-3xl","font-black"],[1,"flex","flex-col","gap-4","mt-2"],[1,"flex","justify-between","text-xs","font-bold","opacity-70","uppercase","mb-1"],["type","range","min","10","max","5000","step","10",1,"w-full","h-2","rounded","bg-black/40",3,"ngModelChange","ngModel"],[1,"flex","gap-1","mt-1"],["class","flex-1 py-1 text-[9px] font-bold rounded border border-white/10 hover:bg-white/10 transition-colors",3,"click",4,"ngFor","ngForOf"],[1,"text-xs","font-bold","opacity-70","uppercase","mb-1"],[1,"flex","rounded","p-1","bg-black/20","border","border-white/10"],["class","flex-1 py-2 text-[10px] font-bold transition-all",3,"background","color","click",4,"ngFor","ngForOf"],["type","range","min","8","max","16","step","1",1,"w-full","h-2","rounded","bg-black/40",3,"ngModelChange","change","ngModel"],[1,"flex","flex-col","gap-2","mt-4"],[1,"w-full","h-16","rounded-lg","shadow-lg","flex","items-center","justify-center","gap-2","font-black","text-xl","tracking-widest","border","border-white/20","disabled:opacity-50","transition-all","active:scale-95",3,"click","disabled"],[1,"w-full","h-12","rounded-lg","flex","items-center","justify-center","gap-2","font-bold","text-sm","bg-white/5","border","border-white/10","hover:bg-white/10","transition-all",3,"click","disabled"],[1,"flex-1","min-h-[100px]","overflow-hidden","flex","flex-col","mt-4","border-t","border-white/10","pt-4"],[1,"text-[10px]","font-bold","opacity-50","uppercase","mb-2"],[1,"flex-1","overflow-y-auto","custom-scroll","flex","flex-col","gap-1","pr-1"],["class","flex justify-between p-2 rounded bg-black/20 text-xs animate-in",4,"ngFor","ngForOf"],[1,"mt-auto","w-full","py-3","rounded","border","border-red-500/30","text-red-500","hover:bg-red-500/10","text-xs","font-bold","uppercase","transition-all",3,"click"],[1,"relative","z-10","flex-1","flex","flex-col"],[1,"flex-1","relative","overflow-hidden","flex","items-center","justify-center"],[1,"shadow-2xl","rounded-xl"],[1,"flex-1","py-1","text-[9px]","font-bold","rounded","border","border-white/10","hover:bg-white/10","transition-colors",3,"click"],[1,"flex-1","py-2","text-[10px]","font-bold","transition-all",3,"click"],[1,"flex","justify-between","p-2","rounded","bg-black/20","text-xs","animate-in"],[1,"font-bold"]],template:function(t,r){if(t&1){let i=ee();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5),y(4," PLINKO "),f(5,"span",6),y(6,"v2"),m()()(),f(7,"div",7)(8,"div",8),y(9,"Votre Solde"),m(),f(10,"div",9),y(11),oe(12,"number"),m()(),f(13,"div",10)(14,"div")(15,"div",11),y(16),m(),f(17,"input",12),Po("ngModelChange",function(o){return j(i),ac(r.bet,o)||(r.bet=o),$(o)}),m(),f(18,"div",13),V(19,DX,2,1,"button",14),m()(),f(20,"div")(21,"div",15),y(22,"Difficult\xE9"),m(),f(23,"div",16),V(24,xX,2,5,"button",17),m()(),f(25,"div")(26,"div",15),y(27),m(),f(28,"input",18),Po("ngModelChange",function(o){return j(i),ac(r.rows,o)||(r.rows=o),$(o)}),U("change",function(){return j(i),$(r.updateBoard())}),m()()(),f(29,"div",19)(30,"button",20),U("click",function(){return j(i),$(r.dropBall())}),y(31,"L\xC2CHER"),m(),f(32,"button",21),U("click",function(){return j(i),$(r.dropRafale())}),y(33," \u{1F525} RAFALE "),m()(),f(34,"div",22)(35,"div",23),y(36,"Historique"),m(),f(37,"div",24),V(38,AX,6,9,"div",25),m()(),f(39,"button",26),U("click",function(){return j(i),$(r.exit.emit())}),y(40,"Quitter"),m()(),f(41,"div",27)(42,"div",28,0),W(44,"canvas",29,1),m()()()}t&2&&(we("background",r.currentTheme.bg)("color",r.currentTheme.text),_(),we("background-color",r.currentTheme.panelBg)("border-color",r.currentTheme.accent+"40"),_(2),we("text-shadow","0 0 20px "+r.currentTheme.accent),_(4),we("background-color","rgba(0,0,0,0.3)")("border-color",r.currentTheme.accent),_(4),G("",Be(12,32,r.currentMoney,"1.0-0")," \u20AC"),_(5),G("Mise: ",r.bet," \u20AC"),_(),we("accent-color",r.currentTheme.accent),ko("ngModel",r.bet),_(2),w("ngForOf",yn(35,TX)),_(5),w("ngForOf",r.risks),_(3),G("Rang\xE9es: ",r.rows),_(),we("accent-color",r.currentTheme.accent),ko("ngModel",r.rows),_(2),we("background",r.currentTheme.accent)("color","#000"),w("disabled",r.currentMoney<r.bet),_(2),w("disabled",r.currentMoney<r.bet*10),_(6),w("ngForOf",r.history))},dependencies:[Nt,bl,YT,F0,_h,Bt],styles:[".custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0003}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:2px}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}"]})};function kX(n,e){if(n&1){let t=ee();f(0,"div",4),W(1,"div",5),f(2,"div",6)(3,"div",7),y(4,"\u{1F3B0}"),m(),f(5,"h1",8),y(6,"CASINO ROYAL"),m(),f(7,"p",9),y(8,"FAITES VOS JEUX"),m()(),f(9,"div",10)(10,"button",11),U("click",function(){j(t);let i=D();return $(i.selectGame("BLACKJACK"))}),W(11,"div",12),f(12,"div",13),y(13,"\u2660\uFE0F"),m(),f(14,"div",14)(15,"div",15),y(16,"BLACKJACK"),m(),f(17,"p",16),y(18,"Le classique."),m()()(),f(19,"button",17),U("click",function(){j(t);let i=D();return $(i.selectGame("SLOTS"))}),W(20,"div",18),f(21,"div",19),y(22,"\u{1F352}"),m(),f(23,"div",14)(24,"div",15),y(25,"SLOTS"),m(),f(26,"p",20),y(27,"Jackpot Diamant."),m()()(),f(28,"button",21),U("click",function(){j(t);let i=D();return $(i.selectGame("PLINKO"))}),W(29,"div",22),f(30,"div",23),y(31,"\u{1F534}"),m(),f(32,"div",14)(33,"div",15),y(34,"PLINKO"),m(),f(35,"p",24),y(36,"La chute gagnante."),m()()()()()}n&2&&w("@fade",void 0)}function PX(n,e){if(n&1){let t=ee();f(0,"div",25)(1,"button",26),U("click",function(){j(t);let i=D();return $(i.selectedGame=null)}),y(2,"\u2B05 RETOUR"),m(),f(3,"h2",27),y(4,"Table de Blackjack"),m(),f(5,"div",28)(6,"button",29),U("click",function(){j(t);let i=D();return $(i.mode="SOLO")}),f(7,"span",30),y(8,"\u{1F464}"),m(),f(9,"span",31),y(10,"SOLO"),m()(),f(11,"button",32),U("click",function(){j(t);let i=D();return $(i.mode="MULTI")}),f(12,"span",30),y(13,"\u{1F30D}"),m(),f(14,"span",31),y(15,"ONLINE"),m()()()()}n&2&&w("@fade",void 0)}function NX(n,e){if(n&1){let t=ee();f(0,"app-blackjack-solo",33),U("exit",function(){j(t);let i=D();return $(i.mode=null)}),m()}}function MX(n,e){if(n&1){let t=ee();f(0,"app-blackjack-multi",33),U("exit",function(){j(t);let i=D();return $(i.mode=null)}),m()}}function OX(n,e){if(n&1){let t=ee();f(0,"app-slot-machine",33),U("exit",function(){j(t);let i=D();return $(i.selectedGame=null)}),m()}}function FX(n,e){if(n&1){let t=ee();f(0,"app-plinko-game",33),U("exit",function(){j(t);let i=D();return $(i.selectedGame=null)}),m()}}var K0=class n{constructor(e){this.firebase=e}selectedGame=null;mode=null;sub=null;ngOnInit(){this.sub=this.firebase.activeGame$.subscribe(e=>{e&&(e.hostId===this.firebase.currentUserId||e.guestId===this.firebase.currentUserId)&&(this.selectedGame="BLACKJACK",this.mode="MULTI")})}selectGame(e){this.selectedGame=e,this.mode=null}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}static \u0275fac=function(t){return new(t||n)(X(Mn))};static \u0275cmp=qe({type:n,selectors:[["app-blackjack-game"]],standalone:!1,decls:7,vars:6,consts:[[1,"h-full","w-full","bg-slate-950","relative","overflow-hidden","flex","flex-col","font-sans","select-none"],["class","absolute inset-0 z-50 flex flex-col items-center justify-center bg-[#0f0518]",4,"ngIf"],["class","absolute inset-0 z-50 flex flex-col items-center justify-center bg-slate-900/95",4,"ngIf"],[3,"exit",4,"ngIf"],[1,"absolute","inset-0","z-50","flex","flex-col","items-center","justify-center","bg-[#0f0518]"],[1,"absolute","inset-0","bg-[radial-gradient(circle_at_center,_#2e1065_0%,_#000000_100%)]","opacity-80"],[1,"z-10","text-center","mb-8"],[1,"text-6xl","mb-4"],[1,"text-6xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-yellow-200","via-yellow-500","to-yellow-200","tracking-tighter","uppercase","drop-shadow-2xl"],[1,"text-purple-300","font-mono","tracking-widest","text-sm","mt-4"],[1,"z-10","flex","gap-6","flex-wrap","justify-center","px-4"],[1,"group","relative","w-64","h-80","bg-green-900/40","rounded-3xl","border","border-green-500/30","hover:border-green-400","transition-all","hover:scale-105","shadow-2xl","flex","flex-col","items-center","justify-center","gap-6","overflow-hidden","cursor-pointer","backdrop-blur-sm",3,"click"],[1,"absolute","inset-0","bg-green-600/10","group-hover:bg-green-600/20","transition-colors"],[1,"text-7xl","group-hover:rotate-12","transition-transform","duration-500"],[1,"text-center","z-10"],[1,"text-2xl","font-black","text-white"],[1,"text-xs","text-green-200/60","mt-2","px-6","uppercase","tracking-wide"],[1,"group","relative","w-64","h-80","bg-purple-900/40","rounded-3xl","border","border-purple-500/30","hover:border-purple-400","transition-all","hover:scale-105","shadow-2xl","flex","flex-col","items-center","justify-center","gap-6","overflow-hidden","cursor-pointer","backdrop-blur-sm",3,"click"],[1,"absolute","inset-0","bg-purple-600/10","group-hover:bg-purple-600/20","transition-colors"],[1,"text-7xl","group-hover:-rotate-12","transition-transform","duration-500"],[1,"text-xs","text-purple-200/60","mt-2","px-6","uppercase","tracking-wide"],[1,"group","relative","w-64","h-80","bg-pink-900/40","rounded-3xl","border","border-pink-500/30","hover:border-pink-400","transition-all","hover:scale-105","shadow-2xl","flex","flex-col","items-center","justify-center","gap-6","overflow-hidden","cursor-pointer","backdrop-blur-sm",3,"click"],[1,"absolute","inset-0","bg-pink-600/10","group-hover:bg-pink-600/20","transition-colors"],[1,"text-7xl","group-hover:translate-y-2","transition-transform","duration-500"],[1,"text-xs","text-pink-200/60","mt-2","px-6","uppercase","tracking-wide"],[1,"absolute","inset-0","z-50","flex","flex-col","items-center","justify-center","bg-slate-900/95"],[1,"absolute","top-8","left-8","text-slate-500","hover:text-white","flex","items-center","gap-2","font-bold",3,"click"],[1,"text-4xl","font-black","text-white","mb-12","uppercase","tracking-widest"],[1,"flex","gap-8"],[1,"w-64","h-40","bg-slate-800","rounded-xl","border-2","border-slate-600","hover:border-blue-500","hover:bg-slate-700","transition-all","flex","flex-col","items-center","justify-center","gap-2",3,"click"],[1,"text-4xl"],[1,"font-bold","text-white"],[1,"w-64","h-40","bg-slate-800","rounded-xl","border-2","border-slate-600","hover:border-purple-500","hover:bg-slate-700","transition-all","flex","flex-col","items-center","justify-center","gap-2",3,"click"],[3,"exit"]],template:function(t,r){t&1&&(f(0,"div",0),V(1,kX,37,1,"div",1)(2,PX,16,1,"div",2)(3,NX,1,0,"app-blackjack-solo",3)(4,MX,1,0,"app-blackjack-multi",3)(5,OX,1,0,"app-slot-machine",3)(6,FX,1,0,"app-plinko-game",3),m()),t&2&&(_(),w("ngIf",r.selectedGame===null),_(),w("ngIf",r.selectedGame==="BLACKJACK"&&r.mode===null),_(),w("ngIf",r.selectedGame==="BLACKJACK"&&r.mode==="SOLO"),_(),w("ngIf",r.selectedGame==="BLACKJACK"&&r.mode==="MULTI"),_(),w("ngIf",r.selectedGame==="SLOTS"),_(),w("ngIf",r.selectedGame==="PLINKO"))},dependencies:[xt,$0,G0,q0,W0],encapsulation:2,data:{animation:[$t("fade",[Rt(":enter",[Pe({opacity:0}),At("300ms ease-out",Pe({opacity:1}))]),Rt(":leave",[At("200ms ease-in",Pe({opacity:0}))])])]}})};var VX=(n,e)=>[n,e];function UX(n,e){if(n&1){let t=ee();f(0,"button",15),U("click",function(){let i=j(t).$implicit,s=D();return $(s.activeTab=i.id)}),f(1,"span",16),y(2),m(),y(3),m()}if(n&2){let t=e.$implicit,r=D();w("ngClass",r.activeTab===t.id?"border-violet-500 text-white bg-white/5":"border-transparent text-slate-500 hover:text-slate-300 hover:bg-white/5"),_(2),te(t.icon),_(),G(" ",t.label," ")}}function BX(n,e){n&1&&(f(0,"div",37),y(1,"ACTIF"),m())}function jX(n,e){if(n&1){let t=ee();f(0,"div",29),V(1,BX,2,0,"div",30),f(2,"div",31)(3,"span"),y(4),f(5,"span",32),y(6,"code();"),m(),y(7),m()(),f(8,"div",33)(9,"div")(10,"div",34),y(11),m(),f(12,"div",35),y(13),oe(14,"number"),m()(),f(15,"button",36),U("click",function(){let i=j(t).$implicit,s=D(2);return $(s.buyOrEquipTheme(i))}),y(16),m()()()}if(n&2){let t=e.$implicit,r=D(2);le("border-purple-500",r.isThemeActive(t.id)),_(),w("ngIf",r.isThemeActive(t.id)),_(),w("ngClass",cc(13,VX,t.bgClass,t.textClass)),_(2),G("function dev() ","{"," "),_(),w("ngClass",t.accentClass),_(2),G(" ","}"),_(4),te(t.name),_(2),te(t.cost===0?"Gratuit":Me(14,11,t.cost)+" \u20AC"),_(2),w("ngClass",r.isThemeOwned(t.id)?"bg-slate-700 text-white hover:bg-purple-600":"bg-green-600 text-white hover:bg-green-500"),_(),G(" ",r.isThemeOwned(t.id)?r.isThemeActive(t.id)?"\xC9QUIP\xC9":"METTRE":"ACHETER"," ")}}function $X(n,e){if(n&1){let t=ee();f(0,"div",17)(1,"section")(2,"h3",18)(3,"span",19),y(4,"\u{1F5A5}\uFE0F"),m(),y(5," SETUP & MAT\xC9RIEL"),m(),f(6,"div",20)(7,"div",21)(8,"div",22),y(9,"\u{1FA91}"),m(),f(10,"div",23),y(11,"CHAISE ERGO"),m(),f(12,"div",24),y(13),m(),f(14,"button",25),U("click",function(){j(t);let i=D();return $(i.buySetup(i.setupItems.CHAIR,2e3))}),y(15),m()(),f(16,"div",21)(17,"div",22),y(18,"\u{1F5A5}\uFE0F"),m(),f(19,"div",23),y(20,"DOUBLE \xC9CRAN"),m(),f(21,"div",24),y(22),m(),f(23,"button",25),U("click",function(){j(t);let i=D();return $(i.buySetup(i.setupItems.SCREEN,5e3))}),y(24),m()(),f(25,"div",21)(26,"div",22),y(27,"\u2615"),m(),f(28,"div",23),y(29,"MACHINE \xC0 CAF\xC9"),m(),f(30,"div",24),y(31),m(),f(32,"button",25),U("click",function(){j(t);let i=D();return $(i.buySetup(i.setupItems.COFFEE,1500))}),y(33),m()(),f(34,"div",21)(35,"div",22),y(36,"\u{1F680}"),m(),f(37,"div",23),y(38,"PC QUANTIQUE"),m(),f(39,"div",24),y(40),m(),f(41,"button",25),U("click",function(){j(t);let i=D();return $(i.buySetup(i.setupItems.PC,2e4))}),y(42),m()()()(),f(43,"section")(44,"h3",26)(45,"span",19),y(46,"\u{1F3A8}"),m(),y(47," TH\xC8MES \xC9DITEUR"),m(),f(48,"div",27),V(49,jX,17,16,"div",28),m()()()}if(n&2){let t=D();_(13),G("Niveau ",t.freelanceUpgrades.chairLevel),_(),w("disabled",t.freelanceUpgrades.chairLevel>0||t.currentMoney<2e3),_(),G(" ",t.freelanceUpgrades.chairLevel>0?"POSS\xC9D\xC9":"2 000 \u20AC"," "),_(7),G("Niveau ",t.freelanceUpgrades.screenLevel),_(),w("disabled",t.freelanceUpgrades.screenLevel>0||t.currentMoney<5e3),_(),G(" ",t.freelanceUpgrades.screenLevel>0?"POSS\xC9D\xC9":"5 000 \u20AC"," "),_(7),G("Niveau ",t.freelanceUpgrades.coffeeLevel),_(),w("disabled",t.freelanceUpgrades.coffeeLevel>0||t.currentMoney<1500),_(),G(" ",t.freelanceUpgrades.coffeeLevel>0?"POSS\xC9D\xC9":"1 500 \u20AC"," "),_(7),G("Niveau ",t.freelanceUpgrades.pcLevel),_(),w("disabled",t.freelanceUpgrades.pcLevel>0||t.currentMoney<2e4),_(),G(" ",t.freelanceUpgrades.pcLevel>0?"POSS\xC9D\xC9":"20 000 \u20AC"," "),_(7),w("ngForOf",t.themes)}}function HX(n,e){n&1&&(f(0,"div",64),y(1,"D\xC9BLOQU\xC9"),m())}function GX(n,e){if(n&1){let t=ee();f(0,"button",65),U("click",function(){j(t);let i=D().$implicit,s=D(2);return $(s.unlockIngredient(i.id,i.cost))}),y(1),oe(2,"number"),m()}if(n&2){let t=D().$implicit,r=D(2);w("disabled",r.currentMoney<t.cost),_(),G(" ",Me(2,2,t.cost)," \u20AC ")}}function zX(n,e){n&1&&(f(0,"div",66),y(1,"Disponible"),m())}function qX(n,e){if(n&1&&(f(0,"div",60),V(1,HX,2,0,"div",61),f(2,"div",55),y(3),m(),f(4,"div",56),y(5),m(),V(6,GX,3,4,"button",62)(7,zX,2,0,"div",63),m()),n&2){let t=e.$implicit,r=D(2);le("opacity-50",!r.isIngredientUnlocked(t.id)&&r.currentMoney<t.cost),_(),w("ngIf",r.isIngredientUnlocked(t.id)),_(2),te(t.icon),_(2),te(t.name),_(),w("ngIf",!r.isIngredientUnlocked(t.id)),_(),w("ngIf",r.isIngredientUnlocked(t.id))}}function WX(n,e){if(n&1){let t=ee();f(0,"button",67),U("click",function(){j(t);let i=D(2);return $(i.unlockKeyboard())}),y(1," 5 000 \u20AC "),m()}if(n&2){let t=D(2);w("disabled",t.currentMoney<5e3)}}function KX(n,e){n&1&&(f(0,"div",68),y(1,"POSS\xC9D\xC9"),m())}function YX(n,e){if(n&1){let t=ee();f(0,"div",17)(1,"section")(2,"h3",38)(3,"span",19),y(4,"\u2B06\uFE0F"),m(),y(5," AM\xC9LIORATIONS"),m(),f(6,"div",39)(7,"div",40)(8,"div",41)(9,"span",42),y(10,"\u{1F525}"),m(),f(11,"span",43),y(12),m()(),f(13,"div",44),y(14,"VITESSE DU GRILL"),m(),f(15,"div",45),y(16,"Cuit les burgers plus vite."),m(),f(17,"button",46),U("click",function(){j(t);let i=D();return $(i.buyFoodtruckUpgrade("grill"))}),y(18),oe(19,"number"),m()(),f(20,"div",40)(21,"div",41)(22,"span",42),y(23,"\u{1F4E2}"),m(),f(24,"span",47),y(25),m()(),f(26,"div",44),y(27,"MARKETING"),m(),f(28,"div",45),y(29,"Attire plus de clients VIP."),m(),f(30,"button",48),U("click",function(){j(t);let i=D();return $(i.buyFoodtruckUpgrade("marketing"))}),y(31),oe(32,"number"),m()(),f(33,"div",40)(34,"div",41)(35,"span",42),y(36,"\u{1F91D}"),m(),f(37,"span",49),y(38),m()(),f(39,"div",44),y(40,"QUALIT\xC9 SERVICE"),m(),f(41,"div",45),y(42,"Augmente le prix des burgers."),m(),f(43,"button",50),U("click",function(){j(t);let i=D();return $(i.buyFoodtruckUpgrade("service"))}),y(44),oe(45,"number"),m()()()(),f(46,"section")(47,"h3",51)(48,"span",19),y(49,"\u{1F969}"),m(),y(50," INGR\xC9DIENTS & EXTRAS"),m(),f(51,"div",52),V(52,qX,8,7,"div",53),f(53,"div",54)(54,"div",55),y(55,"\u2328\uFE0F"),m(),f(56,"div",56),y(57,"CLAVIER PRO"),m(),f(58,"div",57),y(59,"Raccourcis touches 1-9"),m(),V(60,WX,2,1,"button",58)(61,KX,2,0,"div",59),m()()()()}if(n&2){let t=D();_(12),G("Niv ",t.foodtruckUpgrades.grillLevel),_(5),w("disabled",t.currentMoney<t.getFoodtruckCost("grill")),_(),G(" Am\xE9liorer (",Me(19,12,t.getFoodtruckCost("grill"))," \u20AC) "),_(7),G("Niv ",t.foodtruckUpgrades.marketingLevel),_(5),w("disabled",t.currentMoney<t.getFoodtruckCost("marketing")),_(),G(" Am\xE9liorer (",Me(32,14,t.getFoodtruckCost("marketing"))," \u20AC) "),_(7),G("Niv ",t.foodtruckUpgrades.serviceLevel),_(5),w("disabled",t.currentMoney<t.getFoodtruckCost("service")),_(),G(" Am\xE9liorer (",Me(45,16,t.getFoodtruckCost("service"))," \u20AC) "),_(8),w("ngForOf",t.availableIngredients),_(8),w("ngIf",!t.foodtruckUpgrades.hasKeyboard),_(),w("ngIf",t.foodtruckUpgrades.hasKeyboard)}}function QX(n,e){if(n&1&&(f(0,"div",86)(1,"span",87),y(2),oe(3,"number"),m()()),n&2){let t=D().$implicit;_(2),te(Be(3,1,t.price,"1.0-0"))}}function JX(n,e){n&1&&W(0,"div",88)}function ZX(n,e){if(n&1){let t=ee();f(0,"div",82),U("click",function(){let i=j(t).$implicit,s=D(2);return $(s.shop.buyOrEquip(i))}),f(1,"div",83),y(2),m(),V(3,QX,4,4,"div",84)(4,JX,1,0,"div",85),m()}if(n&2){let t=e.$implicit;w("ngClass",t.selected?"border-fuchsia-500 bg-fuchsia-500/10 shadow-[0_0_15px_rgba(217,70,239,0.2)]":"border-slate-700 bg-slate-800"),_(2),te(t.value),_(),w("ngIf",!t.unlocked),_(),w("ngIf",t.selected)}}function XX(n,e){n&1&&(f(0,"span",98),y(1,"D\xC9BLOQU\xC9"),m())}function eee(n,e){if(n&1&&(f(0,"div",99),y(1),oe(2,"number"),m()),n&2){let t=D().$implicit;_(),G(" ",Be(2,1,t.price,"1.0-0")," \u20AC ")}}function tee(n,e){n&1&&(f(0,"div",100),y(1," ACTIF "),m())}function nee(n,e){if(n&1){let t=ee();f(0,"div",89),U("click",function(){let i=j(t).$implicit,s=D(2);return $(s.shop.buyOrEquip(i))}),f(1,"div",90)(2,"div",91),W(3,"div",92),m(),f(4,"div",93)(5,"span",94),y(6),m(),V(7,XX,2,0,"span",95),m()(),V(8,eee,3,4,"div",96)(9,tee,2,0,"div",97),m()}if(n&2){let t=e.$implicit;w("ngClass",t.selected?"border-fuchsia-500 bg-fuchsia-500/5":"border-slate-700 bg-slate-800"),_(2),we("background",t.value.bg),_(4),te(t.name),_(),w("ngIf",t.unlocked),_(),w("ngIf",!t.unlocked),_(),w("ngIf",t.selected)}}function ree(n,e){if(n&1&&(f(0,"div",69)(1,"div",70)(2,"span",71),y(3,"\u{1F3B0}"),m(),f(4,"h3",72),y(5,"Plinko Casino"),m()(),f(6,"div",73)(7,"div",74)(8,"h4",75),W(9,"span",76),y(10," Skins de Balle "),m(),f(11,"div",77),V(12,ZX,5,4,"div",78),m()(),f(13,"div",74)(14,"h4",75),W(15,"span",79),y(16," Th\xE8mes Visuels "),m(),f(17,"div",80),V(18,nee,10,7,"div",81),m()()()()),n&2){let t=D();_(12),w("ngForOf",t.plinkoSkins),_(6),w("ngForOf",t.plinkoThemes)}}var Y0=class n{constructor(e,t){this.gameState=e;this.shop=t}close=new ke;currentMoney=0;setupItems=ml;freelanceUpgrades={};themes=Ea;foodtruckUpgrades={grillLevel:1,marketingLevel:1,serviceLevel:1,unlockedIngredients:[],maxServiceReached:1,hasKeyboard:!1};availableIngredients=[{id:"CHEESE",name:"Fromage",icon:"\u{1F9C0}",cost:1e3},{id:"ONION",name:"Oignon",icon:"\u{1F9C5}",cost:500},{id:"SALAD",name:"Salade",icon:"\u{1F96C}",cost:2e3},{id:"BACON",name:"Bacon",icon:"\u{1F953}",cost:3500},{id:"PICKLE",name:"Cornichon",icon:"\u{1F952}",cost:5e3},{id:"TOMATO",name:"Tomate",icon:"\u{1F345}",cost:7500},{id:"SAUCE",name:"Sauce",icon:"\u{1F963}",cost:1e4}];plinkoSkins=[];plinkoThemes=[];tabs=[{id:"FREELANCE",label:"Freelance Dev",icon:"\u{1F4BB}"},{id:"FOODTRUCK",label:"Burger Truck",icon:"\u{1F354}"},{id:"CASINO",label:"Casino & Plinko",icon:"\u{1F3B0}"}];activeTab="FREELANCE";ngOnInit(){this.gameState.gameState$.subscribe(e=>{this.currentMoney=e.money,e.freelanceUpgrades&&(this.freelanceUpgrades=e.freelanceUpgrades),e.foodtruckUpgrades&&(this.foodtruckUpgrades=e.foodtruckUpgrades)}),this.shop.items$.subscribe(e=>{this.plinkoSkins=e.filter(t=>t.game==="PLINKO"&&t.category==="SKIN"),this.plinkoThemes=e.filter(t=>t.game==="PLINKO"&&t.category==="THEME")})}buySetup(e,t){this.gameState.buySetupUpgrade(e,t)}isThemeOwned(e){return this.freelanceUpgrades.ownedThemes?.includes(e)}isThemeActive(e){return this.freelanceUpgrades.activeThemeId===e}buyOrEquipTheme(e){this.isThemeOwned(e.id)?this.gameState.setFreelanceTheme(e.id):this.gameState.buyFreelanceTheme(e.id,e.cost)}getFoodtruckCost(e){let t=this.foodtruckUpgrades[e+"Level"]||1;return Math.floor(150*Math.pow(1.6,t))}buyFoodtruckUpgrade(e){let t=this.getFoodtruckCost(e);this.gameState.buyFoodtruckUpgrade(e,t)}isIngredientUnlocked(e){return this.foodtruckUpgrades.unlockedIngredients?.includes(e)}unlockIngredient(e,t){this.gameState.unlockIngredient(e,t)}unlockKeyboard(){this.gameState.unlockKeyboard(5e3)}static \u0275fac=function(t){return new(t||n)(X(at),X(El))};static \u0275cmp=qe({type:n,selectors:[["app-global-shop"]],outputs:{close:"close"},standalone:!1,decls:23,vars:8,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/90","backdrop-blur-sm","p-4","animate-in","fade-in"],[1,"w-full","max-w-6xl","bg-[#0f172a]","border","border-slate-700","rounded-2xl","shadow-2xl","flex","flex-col","max-h-[90vh]","overflow-hidden"],[1,"p-6","border-b","border-slate-800","flex","justify-between","items-center","bg-slate-950/80","shrink-0"],[1,"text-3xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-violet-400","to-fuchsia-400","uppercase","tracking-widest","italic","transform","-skew-x-6"],[1,"text-xs","text-slate-400","font-bold","mt-1","tracking-wider","uppercase"],[1,"text-right","bg-slate-900/50","p-3","rounded-xl","border","border-slate-800"],[1,"text-[10px]","text-slate-500","font-black","uppercase","tracking-widest"],[1,"text-2xl","font-mono","font-bold","text-emerald-400","text-shadow-glow"],[1,"flex","border-b","border-slate-800","bg-slate-950/50","overflow-x-auto"],["class","px-6 py-4 text-xs font-black uppercase tracking-widest transition-all border-b-2 flex items-center gap-2 whitespace-nowrap",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"p-8","overflow-y-auto","custom-scroll","flex-1","bg-[#0f172a]"],["class","space-y-10",4,"ngIf"],["class","space-y-8",4,"ngIf"],[1,"p-4","border-t","border-slate-800","flex","justify-end","bg-slate-950/80"],[1,"px-8","py-3","rounded-xl","bg-slate-800","hover:bg-red-900/50","border","border-slate-600","hover:border-red-500","text-slate-300","hover:text-white","font-black","text-xs","uppercase","tracking-widest","transition-all",3,"click"],[1,"px-6","py-4","text-xs","font-black","uppercase","tracking-widest","transition-all","border-b-2","flex","items-center","gap-2","whitespace-nowrap",3,"click","ngClass"],[1,"text-lg"],[1,"space-y-10"],[1,"font-black","text-lg","text-cyan-400","mb-4","flex","items-center","gap-2"],[1,"text-2xl"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],[1,"bg-slate-800/50","rounded-xl","p-4","border","border-slate-700","hover:border-cyan-500/50","transition-all","group"],[1,"text-4xl","mb-2","group-hover:scale-110","transition-transform"],[1,"font-black","text-white","text-sm"],[1,"text-xs","text-slate-400","mb-3"],[1,"w-full","py-2","rounded","bg-cyan-600","hover:bg-cyan-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-bold","text-xs","uppercase",3,"click","disabled"],[1,"font-black","text-lg","text-purple-400","mb-4","flex","items-center","gap-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4"],["class","bg-slate-800 rounded-xl p-4 border border-slate-700 hover:border-purple-500 transition-all cursor-pointer relative overflow-hidden",3,"border-purple-500",4,"ngFor","ngForOf"],[1,"bg-slate-800","rounded-xl","p-4","border","border-slate-700","hover:border-purple-500","transition-all","cursor-pointer","relative","overflow-hidden"],["class","absolute top-0 right-0 p-2 bg-purple-600 text-white text-[10px] font-bold rounded-bl-xl",4,"ngIf"],[1,"h-16","w-full","rounded-lg","mb-3","border","border-white/10","flex","items-center","justify-center","font-mono","text-xs","p-2","overflow-hidden",3,"ngClass"],[3,"ngClass"],[1,"flex","justify-between","items-end"],[1,"font-bold","text-white","text-sm"],[1,"text-[10px]","text-slate-400"],[1,"px-3","py-1","rounded","text-[10px]","font-bold","uppercase","transition-colors",3,"click","ngClass"],[1,"absolute","top-0","right-0","p-2","bg-purple-600","text-white","text-[10px]","font-bold","rounded-bl-xl"],[1,"font-black","text-lg","text-orange-400","mb-4","flex","items-center","gap-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"bg-slate-800/50","p-4","rounded-xl","border","border-slate-700","flex","flex-col","gap-2"],[1,"flex","justify-between"],[1,"text-3xl"],[1,"text-xs","font-bold","bg-slate-900","px-2","py-1","rounded","text-orange-400"],[1,"font-black","text-white"],[1,"text-xs","text-slate-400","mb-2"],[1,"mt-auto","w-full","py-2","bg-orange-600","hover:bg-orange-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-bold","text-xs","rounded","uppercase",3,"click","disabled"],[1,"text-xs","font-bold","bg-slate-900","px-2","py-1","rounded","text-blue-400"],[1,"mt-auto","w-full","py-2","bg-blue-600","hover:bg-blue-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-bold","text-xs","rounded","uppercase",3,"click","disabled"],[1,"text-xs","font-bold","bg-slate-900","px-2","py-1","rounded","text-green-400"],[1,"mt-auto","w-full","py-2","bg-green-600","hover:bg-green-500","disabled:bg-slate-700","disabled:text-slate-500","text-white","font-bold","text-xs","rounded","uppercase",3,"click","disabled"],[1,"font-black","text-lg","text-red-400","mb-4","flex","items-center","gap-2"],[1,"grid","grid-cols-2","md:grid-cols-4","lg:grid-cols-5","gap-3"],["class","bg-slate-800 rounded-xl p-3 border border-slate-700 relative overflow-hidden",3,"opacity-50",4,"ngFor","ngForOf"],[1,"bg-slate-800","rounded-xl","p-3","border","border-slate-700","relative","overflow-hidden","col-span-2","md:col-span-1"],[1,"text-3xl","mb-2","text-center"],[1,"font-bold","text-white","text-xs","text-center","mb-1"],[1,"text-[9px]","text-slate-400","text-center","mb-2"],["class","w-full py-1 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold rounded",3,"disabled","click",4,"ngIf"],["class","text-[10px] text-center text-purple-400 font-bold",4,"ngIf"],[1,"bg-slate-800","rounded-xl","p-3","border","border-slate-700","relative","overflow-hidden"],["class","absolute top-0 right-0 bg-green-500 text-black text-[9px] font-black px-2 py-0.5 rounded-bl-lg",4,"ngIf"],["class","w-full py-1 bg-yellow-600 hover:bg-yellow-500 text-white text-[10px] font-bold rounded",3,"disabled","click",4,"ngIf"],["class","text-[10px] text-center text-green-400 font-bold",4,"ngIf"],[1,"absolute","top-0","right-0","bg-green-500","text-black","text-[9px]","font-black","px-2","py-0.5","rounded-bl-lg"],[1,"w-full","py-1","bg-yellow-600","hover:bg-yellow-500","text-white","text-[10px]","font-bold","rounded",3,"click","disabled"],[1,"text-[10px]","text-center","text-green-400","font-bold"],[1,"w-full","py-1","bg-purple-600","hover:bg-purple-500","text-white","text-[10px]","font-bold","rounded",3,"click","disabled"],[1,"text-[10px]","text-center","text-purple-400","font-bold"],[1,"space-y-8"],[1,"flex","items-center","gap-3","mb-6","text-fuchsia-400","border-b","border-fuchsia-900/30","pb-2"],[1,"text-2xl","filter","drop-shadow-[0_0_5px_rgba(232,121,249,0.5)]"],[1,"font-black","text-lg","uppercase","tracking-widest","text-shadow-fuchsia"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-slate-900/50","rounded-xl","p-5","border","border-slate-800"],[1,"text-xs","font-bold","text-slate-500","uppercase","mb-4","flex","items-center","gap-2"],[1,"w-2","h-2","rounded-full","bg-fuchsia-500"],[1,"grid","grid-cols-4","sm:grid-cols-5","gap-3"],["class","relative aspect-square rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:scale-105 hover:bg-slate-800 group",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"w-2","h-2","rounded-full","bg-blue-500"],[1,"flex","flex-col","gap-3"],["class","relative p-3 rounded-xl border flex items-center justify-between cursor-pointer transition-all hover:bg-slate-800 group",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"relative","aspect-square","rounded-xl","border","flex","flex-col","items-center","justify-center","cursor-pointer","transition-all","hover:scale-105","hover:bg-slate-800","group",3,"click","ngClass"],[1,"text-3xl","filter","drop-shadow-md","group-hover:scale-110","transition-transform"],["class","absolute inset-0 bg-black/70 backdrop-blur-[1px] rounded-xl flex items-center justify-center flex-col z-10",4,"ngIf"],["class","absolute top-1 right-1 w-2 h-2 bg-fuchsia-500 rounded-full shadow-[0_0_5px_#d946ef]",4,"ngIf"],[1,"absolute","inset-0","bg-black/70","backdrop-blur-[1px]","rounded-xl","flex","items-center","justify-center","flex-col","z-10"],[1,"text-[10px]","font-black","text-yellow-400"],[1,"absolute","top-1","right-1","w-2","h-2","bg-fuchsia-500","rounded-full","shadow-[0_0_5px_#d946ef]"],[1,"relative","p-3","rounded-xl","border","flex","items-center","justify-between","cursor-pointer","transition-all","hover:bg-slate-800","group",3,"click","ngClass"],[1,"flex","items-center","gap-4"],[1,"w-10","h-10","rounded-lg","border","border-white/10","shadow-lg","relative","overflow-hidden"],[1,"absolute","inset-0","bg-gradient-to-br","from-white/20","to-transparent"],[1,"flex","flex-col"],[1,"text-sm","font-bold","text-white","group-hover:text-fuchsia-300","transition-colors"],["class","text-[10px] text-slate-500 font-bold",4,"ngIf"],["class","px-3 py-1 bg-yellow-600/20 text-yellow-400 border border-yellow-600/50 text-xs font-bold rounded-lg group-hover:bg-yellow-600 group-hover:text-black transition-all",4,"ngIf"],["class","px-3 py-1 bg-fuchsia-600 text-white text-[10px] font-bold rounded-lg shadow-[0_0_10px_rgba(217,70,239,0.4)]",4,"ngIf"],[1,"text-[10px]","text-slate-500","font-bold"],[1,"px-3","py-1","bg-yellow-600/20","text-yellow-400","border","border-yellow-600/50","text-xs","font-bold","rounded-lg","group-hover:bg-yellow-600","group-hover:text-black","transition-all"],[1,"px-3","py-1","bg-fuchsia-600","text-white","text-[10px]","font-bold","rounded-lg","shadow-[0_0_10px_rgba(217,70,239,0.4)]"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),y(5," BOUTIQUE GLOBALE "),m(),f(6,"p",4),y(7,"D\xE9pensez votre fortune"),m()(),f(8,"div",5)(9,"div",6),y(10,"SOLDE ACTUEL"),m(),f(11,"div",7),y(12),oe(13,"number"),m()()(),f(14,"div",8),V(15,UX,4,3,"button",9),m(),f(16,"div",10),V(17,$X,50,13,"div",11)(18,YX,62,18,"div",11)(19,ree,19,2,"div",12),m(),f(20,"div",13)(21,"button",14),U("click",function(){return r.close.emit()}),y(22," Fermer la boutique "),m()()()()),t&2&&(_(12),G("",Be(13,5,r.currentMoney,"1.0-0")," \u20AC"),_(3),w("ngForOf",r.tabs),_(2),w("ngIf",r.activeTab==="FREELANCE"),_(),w("ngIf",r.activeTab==="FOODTRUCK"),_(),w("ngIf",r.activeTab==="CASINO"))},dependencies:[Oi,Nt,xt,Bt],styles:[".custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0f172a}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:3px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#475569}.text-shadow-glow[_ngcontent-%COMP%]{text-shadow:0 0 10px rgba(52,211,153,.5)}.text-shadow-cyan[_ngcontent-%COMP%]{text-shadow:0 0 10px rgba(34,211,238,.5)}.text-shadow-fuchsia[_ngcontent-%COMP%]{text-shadow:0 0 10px rgba(232,121,249,.5)}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_zoomIn .2s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_zoomIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};function see(n,e){n&1&&W(0,"app-title-screen")}function oee(n,e){n&1&&(f(0,"div",2)(1,"div",3),y(2,"\u{1F680}"),m(),f(3,"div",4),y(4,"CHARGEMENT..."),m()())}function aee(n,e){if(n&1){let t=ee();f(0,"div",11)(1,"div",12),y(2,"\u2694\uFE0F"),m(),f(3,"div",13)(4,"div",14),y(5),m(),f(6,"div",15),y(7),m()(),f(8,"div",16)(9,"button",17),U("click",function(){let i=j(t).$implicit,s=D(3);return $(s.acceptInvite(i))}),y(10,"OUI"),m(),f(11,"button",18),U("click",function(){let i=j(t).$implicit,s=D(3);return $(s.firebaseService.declineInvite(i))}),y(12,"NON"),m()()()}if(n&2){let t=e.$implicit;_(5),G("D\xC9FI DE ",t.fromName),_(2),or("",t.gameType||"BLACKJACK"," \u2022 ",t.amount," \u20AC")}}function cee(n,e){if(n&1&&(f(0,"div",9),V(1,aee,13,3,"div",10),m()),n&2){let t=e.ngIf;_(),w("ngForOf",t)}}function lee(n,e){n&1&&W(0,"app-intro-game")}function uee(n,e){if(n&1&&(f(0,"div",55),y(1),m()),n&2){let t=D(2).$implicit;_(),G("\u{1F465} ",t.employees.length)}}function dee(n,e){if(n&1){let t=ee();f(0,"button",49),U("click",function(){j(t);let i=D().$implicit,s=D(3);return $(s.selectCompany(i))}),f(1,"div",50)(2,"div")(3,"div",51)(4,"span",52),y(5),m(),y(6),m(),f(7,"div",53),y(8),m()(),V(9,uee,2,1,"div",54),m()()}if(n&2){let t=D().$implicit,r=D(3);w("ngClass",(r.selectedCompany==null?null:r.selectedCompany.id)===t.id?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-900/20":"bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-300 hover:border-slate-600"),_(5),te(t.type===r.JobType.FOODTRUCK?"\u{1F354}":t.type===r.JobType.FACTORY?"\u{1F3ED}":t.type===r.JobType.FREELANCE_DEV?"\u{1F4BB}":"\u{1F3B0}"),_(),te(t.name),_(2),G("Niveau ",t.level),_(),w("ngIf",t.employees.length>0)}}function hee(n,e){if(n&1){let t=ee();f(0,"div",56)(1,"div",57)(2,"div",58)(3,"span",59),y(4),m(),y(5),m(),f(6,"span"),y(7,"\u{1F512}"),m()(),f(8,"button",60),oe(9,"async"),U("click",function(){j(t);let i=D().$implicit,s=D(3);return $(s.buyCompany(i))}),f(10,"span"),y(11,"ACHETER"),m(),f(12,"span",61),y(13),oe(14,"number"),m()()()}if(n&2){let t,r=D().$implicit,i=D(3);_(4),te(r.type===i.JobType.FOODTRUCK?"\u{1F354}":r.type===i.JobType.FACTORY?"\u{1F3ED}":r.type===i.JobType.FREELANCE_DEV?"\u{1F4BB}":"\u{1F3B0}"),_(),te(r.name),_(3),w("disabled",(((t=Me(9,4,i.gameState$))==null?null:t.money)||0)<i.getUnlockCost(r.type)),_(5),G("",Be(14,6,i.getUnlockCost(r.type),"1.0-0")," \u20AC")}}function fee(n,e){if(n&1&&(f(0,"div",46),V(1,dee,10,5,"button",47)(2,hee,15,9,"div",48),m()),n&2){let t=e.$implicit;_(),w("ngIf",t.unlocked),_(),w("ngIf",!t.unlocked)}}function pee(n,e){n&1&&(f(0,"div",62)(1,"div",63),y(2,"\u{1F448}"),m(),f(3,"h2",64),y(4,"S\xE9lectionnez une activit\xE9"),m(),f(5,"p",65),y(6,"Cliquez sur une entreprise \xE0 gauche."),m()())}function mee(n,e){n&1&&W(0,"app-freelance-dev-game",66)}function gee(n,e){n&1&&W(0,"app-foodtruck-game",66)}function _ee(n,e){n&1&&W(0,"app-factory-game",66)}function vee(n,e){n&1&&W(0,"app-blackjack-game",66)}function yee(n,e){if(n&1){let t=ee();f(0,"div",19)(1,"div",20)(2,"div",21)(3,"h1",22)(4,"span",23),y(5,"\u{1F680}"),m(),y(6," JEUB2 "),f(7,"span",24),y(8,"v1.3"),m()(),f(9,"div",25)(10,"div",26)(11,"span",27),y(12,"Argent"),m(),f(13,"span",28),y(14),oe(15,"async"),oe(16,"number"),m()(),f(17,"div",29)(18,"span",27),y(19),oe(20,"async"),m(),f(21,"span",30),y(22),oe(23,"async"),m()()()(),f(24,"div",31)(25,"button",32),U("click",function(){j(t);let i=D(2);return $(i.toggleGlobalShop())}),f(26,"span",33),y(27,"\u{1F6D2}"),m(),y(28," BOUTIQUE"),m()(),f(29,"div",34)(30,"div",35),y(31,"Mes Entreprises"),m(),V(32,fee,3,2,"div",36),oe(33,"async"),m(),f(34,"div",37)(35,"div",38),W(36,"span",39),y(37),oe(38,"async"),oe(39,"async"),m(),f(40,"button",40),U("click",function(){j(t);let i=D(2);return $(i.toggleOnlineTab())}),f(41,"span"),y(42,"\u{1F30D}"),m(),y(43," Online / Classement"),m(),f(44,"div",16)(45,"button",41),U("click",function(){j(t);let i=D(2);return $(i.logout())}),f(46,"span"),y(47,"\u{1F6AA}"),m()(),f(48,"button",42),U("click",function(){j(t);let i=D(2);return $(i.toggleAdmin())}),f(49,"span"),y(50,"\u{1F575}\uFE0F\u200D\u2642\uFE0F"),m()()()()(),f(51,"div",43),V(52,pee,7,0,"div",44)(53,mee,1,0,"app-freelance-dev-game",45)(54,gee,1,0,"app-foodtruck-game",45)(55,_ee,1,0,"app-factory-game",45)(56,vee,1,0,"app-blackjack-game",45),m()()}if(n&2){let t,r,i,s,o,a=D(2);_(14),G("",Be(16,12,(t=Me(15,10,a.gameState$))==null?null:t.money,"1.0-0")," \u20AC"),_(5),G("Jour ",(r=Me(20,15,a.gameState$))==null?null:r.day),_(3),te(a.formatTime(((i=Me(23,17,a.gameState$))==null?null:i.timeOfDay)||6)),_(10),w("ngForOf",(s=Me(33,19,a.gameState$))==null?null:s.companies),_(5),te(((o=Me(38,21,a.firebaseService.user$))==null?null:o.displayName)||((o=Me(39,23,a.gameState$))==null||o.user==null?null:o.user.username)||"Anonyme"),_(15),w("ngIf",!a.selectedCompany),_(),w("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FREELANCE_DEV),_(),w("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FOODTRUCK),_(),w("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.FACTORY),_(),w("ngIf",(a.selectedCompany==null?null:a.selectedCompany.type)===a.JobType.CASINO)}}function bee(n,e){if(n&1){let t=ee();f(0,"app-global-shop",67),U("close",function(){j(t);let i=D(2);return $(i.toggleGlobalShop())}),m()}}function Eee(n,e){if(n&1){let t=ee();f(0,"div",68),U("click",function(){j(t);let i=D(2);return $(i.toggleAdmin())}),f(1,"div",69),U("click",function(i){return j(t),$(i.stopPropagation())}),f(2,"h2",70)(3,"span"),y(4,"\u{1F575}\uFE0F\u200D\u2642\uFE0F"),m(),y(5," ZONE DE TRICHE"),m(),f(6,"div",71)(7,"div",72)(8,"button",73),U("click",function(){j(t);let i=D(2);return $(i.adminAddMoney(1e3))}),y(9,"+1k \u20AC"),m(),f(10,"button",73),U("click",function(){j(t);let i=D(2);return $(i.adminAddMoney(1e5))}),y(11,"+100k \u20AC"),m()(),f(12,"div",74)(13,"button",75),U("click",function(){j(t);let i=D(2);return $(i.resetData())}),y(14,"\u26A0\uFE0F EFFACER MA SAUVEGARDE"),m()()()()()}}function wee(n,e){if(n&1&&(Yr(0),V(1,cee,2,1,"div",5),oe(2,"async"),V(3,lee,1,0,"app-intro-game",0),oe(4,"async"),V(5,yee,57,25,"div",6),oe(6,"async"),V(7,bee,1,0,"app-global-shop",7)(8,Eee,15,0,"div",8),Qr()),n&2){let t,r,i=D();_(),w("ngIf",Me(2,5,i.firebaseService.invites$)),_(2),w("ngIf",!((t=Me(4,7,i.gameState$))!=null&&t.hasCompletedIntro)),_(2),w("ngIf",(r=Me(6,9,i.gameState$))==null?null:r.hasCompletedIntro),_(2),w("ngIf",i.isGlobalShopOpen),_(),w("ngIf",i.isAdminOpen)}}var Q0=class n{constructor(e,t,r){this.gameStateService=e;this.soundService=t;this.firebaseService=r;this.gameState$=this.gameStateService.gameState$}gameState$;selectedCompany=null;dailyReport=null;isGlobalShopOpen=!1;isAdminOpen=!1;isOnlineTabOpen=!1;isRefreshing=!1;activeTab="LEADERBOARD";selectedPlayer=null;tickerMessages=["Bienvenue sur le march\xE9 mondial !","Le Bitcoin est en chute libre...","Qui sera le prochain CEO de l'ann\xE9e ?"];tickerIndex=0;newUsername="";newHoldingName="";JobType=C0;SetupItem=ml;availableThemes=Ea;leaderboard=[];marketItems=[];holdings=[];prestigeItems=[{id:"WATCH",name:"Rolex en Or",icon:"\u231A",cost:5e3,desc:"Le temps c'est de l'argent."},{id:"CAR",name:"Tesla Model S",icon:"\u{1F697}",cost:45e3,desc:"Z\xE9ro \xE9mission, 100% style."},{id:"APARTMENT",name:"Penthouse",icon:"\u{1F3E2}",cost:25e4,desc:"Vue sur tout ton empire."},{id:"ISLAND",name:"\xCEle Priv\xE9e",icon:"\u{1F3DD}\uFE0F",cost:5e6,desc:"La retraite anticip\xE9e."}];ngOnInit(){this.gameState$.pipe(Ue(e=>{let t=e.companies.find(i=>i.type==="FOODTRUCK"&&i.unlocked),r=e.companies.find(i=>i.unlocked);return t||r}),fn(e=>!!e),st(1)).subscribe(e=>{!this.selectedCompany&&e&&(this.selectedCompany=e)}),this.gameState$.subscribe(e=>{e.user&&!this.newUsername&&(this.newUsername=e.user.username)}),this.gameStateService.dayEnded$.subscribe(e=>{this.dailyReport=e,this.soundService.playSuccess()}),ms(5e3).subscribe(()=>{this.tickerIndex=(this.tickerIndex+1)%this.tickerMessages.length})}toggleOnlineTab(){this.isOnlineTabOpen=!this.isOnlineTabOpen,this.isOnlineTabOpen&&this.refreshOnlineData()}async connect(){await this.gameStateService.connectOnline(),this.refreshOnlineData()}refreshOnlineData(){this.isRefreshing||(this.isRefreshing=!0,this.soundService.playNoise(.1,"highpass",2e3,.1),ql({leaderboard:this.firebaseService.getLeaderboard(),market:this.firebaseService.getMarketItems(),holdings:this.firebaseService.getHoldings()}).subscribe({next:e=>{this.leaderboard=e.leaderboard.filter(t=>t.username&&t.username!=="Entrepreneur"&&t.username!=="Anonyme"&&t.username!=="Joueur"),this.marketItems=e.market,this.holdings=e.holdings,this.isRefreshing=!1},error:e=>{console.error("Err refresh:",e),this.isRefreshing=!1}}))}acceptInvite(e){this.firebaseService.acceptInvite(e).then(t=>{this.firebaseService.joinGameRoom(t),this.gameStateService.gameState$.pipe(st(1)).subscribe(r=>{let i=r.companies.find(s=>s.type==="CASINO");i&&(this.selectedCompany=i)})})}toggleGlobalShop(){this.isGlobalShopOpen=!this.isGlobalShopOpen,this.isGlobalShopOpen&&this.soundService.playSoftPop()}getSetupCost(e){return{CHAIR:2e3,SCREEN:5e3,COFFEE:1500,PC:2e4}[e]||0}getSetupLevel(e,t){if(!e.freelanceUpgrades)return 0;switch(t){case"CHAIR":return e.freelanceUpgrades.chairLevel;case"SCREEN":return e.freelanceUpgrades.screenLevel;case"COFFEE":return e.freelanceUpgrades.coffeeLevel;case"PC":return e.freelanceUpgrades.pcLevel;default:return 0}}buySetup(e){let t=this.getSetupCost(e);this.gameState$.pipe(st(1)).subscribe(r=>{r.money>=t?(this.gameStateService.buySetupUpgrade(e,t),this.soundService.playSuccess()):this.soundService.playError()})}isThemeOwned(e,t){return e.freelanceUpgrades.ownedThemes.includes(t)}isActiveTheme(e,t){return e.freelanceUpgrades.activeThemeId===t}buyOrEquipTheme(e){this.gameState$.pipe(st(1)).subscribe(t=>{this.isThemeOwned(t,e.id)?(this.gameStateService.setFreelanceTheme(e.id),this.soundService.playSoftPop()):t.money>=e.cost?(this.gameStateService.buyFreelanceTheme(e.id,e.cost),this.soundService.playSuccess()):this.soundService.playError()})}getFoodtruckLevel(e,t){return e.foodtruckUpgrades&&e.foodtruckUpgrades[t+"Level"]||1}getFoodtruckCost(e,t){let r=this.getFoodtruckLevel(e,t);return Math.floor(150*Math.pow(1.6,r))}buyFoodtruck(e){this.gameState$.pipe(st(1)).subscribe(t=>{let r=this.getFoodtruckCost(t,e);t.money>=r?(this.gameStateService.buyFoodtruckUpgrade(e,r),this.soundService.playSuccess()):this.soundService.playError()})}buyKeyboard(){this.gameState$.pipe(st(1)).subscribe(e=>{e.money>=5e3&&!e.foodtruckUpgrades.hasKeyboard?(this.gameStateService.unlockKeyboard(5e3),this.soundService.playSuccess()):this.soundService.playError()})}hasPrestigeItem(e,t){return e.achievements.some(r=>r.id==="PRESTIGE_"+t)}buyPrestige(e){this.gameStateService.buyPrestigeItem(e)?this.soundService.playSuccess():this.soundService.playError()}getMyPrestigeItems(e){return e.achievements.filter(t=>t.id.startsWith("PRESTIGE_"))}getUnlockCost(e){switch(e){case"FREELANCE_DEV":return 10;case"FACTORY":return 50;case"CASINO":return 25;default:return 0}}buyCompany(e){let t=this.getUnlockCost(e.type);t>0&&(this.gameStateService.unlockCompany(e.id,t),this.soundService.playSuccess())}updateUsername(){this.newUsername?.trim()&&(this.gameStateService.updateUsername(this.newUsername.trim()),this.soundService.playSuccess())}createHolding(){this.newHoldingName&&this.firebaseService.createHolding(this.newHoldingName,this.newUsername).then(()=>{this.refreshOnlineData(),this.newHoldingName="",this.soundService.playSuccess()})}sellEmployee(){this.gameState$.pipe(st(1)).subscribe(e=>{let t={sellerId:this.firebaseService.currentUserId||"anon",sellerName:e.user?.username||"Anonyme",type:"Dev Senior",price:5e3,timestamp:Date.now(),rarity:"RARE"};this.firebaseService.sellItem(t),this.soundService.playCash(),setTimeout(()=>this.refreshOnlineData(),1e3)})}buyItem(e){this.gameState$.pipe(st(1)).subscribe(async t=>{if(t.money>=e.price){let r=await this.firebaseService.buyItem(e);r==="SUCCESS"?(this.gameStateService.addMoney(-e.price),e.type==="Dev Senior"&&this.gameStateService.hireEmployee("2","DEV_SENIOR"),this.soundService.playSuccess(),this.refreshOnlineData()):r==="SNIPER_PROTECTION"?(alert("\u{1F6D1} Protection Sniper ! Attendez quelques secondes."),this.soundService.playError()):(alert("Trop tard ! Objet d\xE9j\xE0 vendu."),this.soundService.playError(),this.refreshOnlineData())}else this.soundService.playError()})}getRankClass(e){return e===0?"bg-yellow-500/20 border-yellow-500/50 text-yellow-100 shadow-[0_0_15px_rgba(234,179,8,0.3)]":e===1?"bg-slate-300/10 border-slate-300/50 text-slate-200":e===2?"bg-amber-700/10 border-amber-700/50 text-amber-200":"bg-slate-800/50 border-slate-700 text-slate-400 hover:bg-slate-700 transition-colors"}viewPlayerDetails(e){this.selectedPlayer=e,this.soundService.playSoftPop()}closePlayerDetails(){this.selectedPlayer=null}selectCompany(e){e.unlocked&&(this.gameState$.subscribe(t=>{let r=t.companies.find(i=>i.id===e.id);r&&this.selectedCompany?.id===r.id&&(this.selectedCompany=r)}),this.selectedCompany=e,this.soundService.playSoftPop())}formatTime(e){let t=Math.floor(e),r=Math.floor((e-t)*60);return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}toggleAdmin(){this.isAdminOpen=!this.isAdminOpen}adminAddMoney(e){this.gameStateService.addMoney(e),this.soundService.playCash()}adminSetTime(e){let t=parseFloat(e.target.value);!isNaN(t)&&t>=0&&t<=24&&this.gameStateService.setTimeOfDay(t)}resetData(){this.gameStateService.hardResetGame()}logout(){confirm("Se d\xE9connecter ?")&&this.gameStateService.logoutAndClear()}closeReport(){this.dailyReport=null}static \u0275fac=function(t){return new(t||n)(X(at),X(Wt),X(Mn))};static \u0275cmp=qe({type:n,selectors:[["app-game-shell"]],standalone:!1,decls:8,vars:13,consts:[[4,"ngIf"],["class","fixed inset-0 bg-slate-950 flex flex-col items-center justify-center z-[9999]",4,"ngIf"],[1,"fixed","inset-0","bg-slate-950","flex","flex-col","items-center","justify-center","z-[9999]"],[1,"text-6xl","animate-bounce","mb-6"],[1,"text-white","font-bold","text-2xl","tracking-widest","animate-pulse"],["class","fixed top-4 left-1/2 -translate-x-1/2 z-[1000] flex flex-col gap-2 pointer-events-auto",4,"ngIf"],["class","flex h-screen w-full bg-slate-950 text-slate-200 font-sans overflow-hidden",4,"ngIf"],[3,"close",4,"ngIf"],["class","fixed inset-0 bg-red-950/90 z-[999] flex items-center justify-center backdrop-blur-sm animate-fade-in",3,"click",4,"ngIf"],[1,"fixed","top-4","left-1/2","-translate-x-1/2","z-[1000]","flex","flex-col","gap-2","pointer-events-auto"],["class","bg-slate-900 border border-purple-500 p-4 rounded-xl shadow-2xl flex items-center gap-4 animate-bounce min-w-[300px]",4,"ngFor","ngForOf"],[1,"bg-slate-900","border","border-purple-500","p-4","rounded-xl","shadow-2xl","flex","items-center","gap-4","animate-bounce","min-w-[300px]"],[1,"text-3xl"],[1,"flex-1"],[1,"font-bold","text-white","text-sm"],[1,"text-xs","text-purple-300"],[1,"flex","gap-2"],[1,"bg-green-600","hover:bg-green-500","text-white","p-2","rounded-lg","text-xs","font-bold",3,"click"],[1,"bg-red-600/20","hover:bg-red-600","text-red-400","hover:text-white","p-2","rounded-lg","text-xs","font-bold",3,"click"],[1,"flex","h-screen","w-full","bg-slate-950","text-slate-200","font-sans","overflow-hidden"],[1,"w-64","bg-slate-900","border-r","border-slate-800","flex","flex-col","shrink-0","z-20","shadow-xl"],[1,"p-4","border-b","border-slate-800","flex","flex-col","gap-1","bg-slate-950/50"],[1,"font-black","text-xl","tracking-tighter","text-white","flex","items-center","gap-2"],[1,"text-2xl"],[1,"text-xs","font-normal","text-slate-500","border","border-slate-700","rounded","px-1"],[1,"flex","justify-between","items-end","mt-2"],[1,"flex","flex-col"],[1,"text-[10px]","uppercase","font-bold","text-slate-500","tracking-widest"],[1,"text-green-400","font-mono","font-bold","text-lg"],[1,"flex","flex-col","items-end"],[1,"text-blue-400","font-mono","font-bold","text-sm"],[1,"p-3","pb-0"],[1,"w-full","py-3","bg-gradient-to-r","from-purple-600","to-indigo-600","hover:from-purple-500","hover:to-indigo-500","text-white","font-black","uppercase","tracking-widest","rounded-xl","shadow-lg","border","border-white/10","flex","items-center","justify-center","gap-2","transition-all","hover:scale-[1.02]","active:scale-95",3,"click"],[1,"text-xl"],[1,"flex-1","overflow-y-auto","p-3","space-y-2","custom-scroll"],[1,"text-[10px]","font-bold","text-slate-600","uppercase","tracking-widest","px-2","mb-1","mt-2"],["class","mb-2",4,"ngFor","ngForOf"],[1,"p-4","border-t","border-slate-800","bg-slate-950/30","flex","flex-col","gap-2"],[1,"text-[10px]","text-slate-500","text-center","flex","items-center","justify-center","gap-2"],[1,"w-2","h-2","bg-green-500","rounded-full","animate-pulse"],[1,"w-full","py-2","px-3","rounded-lg","border","border-blue-500","text-blue-400","hover:bg-blue-900/30","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","py-2","px-3","rounded-lg","border","border-red-900/50","text-red-500","hover:bg-red-950/30","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","py-2","px-3","rounded-lg","border","border-slate-700","text-slate-400","hover:bg-slate-800","text-xs","font-bold","uppercase","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"flex-1","relative","bg-slate-950","overflow-hidden","flex","flex-col","z-0"],["class","h-full flex flex-col items-center justify-center text-slate-600",4,"ngIf"],["class","w-full h-full block",4,"ngIf"],[1,"mb-2"],["class","w-full text-left p-3 rounded-xl transition-all duration-200 border relative group overflow-hidden",3,"ngClass","click",4,"ngIf"],["class","w-full p-3 rounded-xl border border-slate-800 bg-slate-900/50 relative overflow-hidden flex flex-col gap-2 opacity-80 hover:opacity-100 transition-opacity",4,"ngIf"],[1,"w-full","text-left","p-3","rounded-xl","transition-all","duration-200","border","relative","group","overflow-hidden",3,"click","ngClass"],[1,"relative","z-10","flex","justify-between","items-start"],[1,"font-bold","text-sm","flex","items-center","gap-2"],[1,"text-lg"],[1,"text-xs","opacity-70","mt-1"],["class","bg-black/20 px-2 py-1 rounded text-[10px] font-bold",4,"ngIf"],[1,"bg-black/20","px-2","py-1","rounded","text-[10px]","font-bold"],[1,"w-full","p-3","rounded-xl","border","border-slate-800","bg-slate-900/50","relative","overflow-hidden","flex","flex-col","gap-2","opacity-80","hover:opacity-100","transition-opacity"],[1,"flex","justify-between","items-center","opacity-60"],[1,"font-bold","text-sm","flex","items-center","gap-2","text-slate-400"],[1,"text-lg","grayscale"],[1,"w-full","py-2","bg-green-600","hover:bg-green-500","disabled:bg-slate-800","disabled:text-slate-600","text-white","font-bold","rounded-lg","transition-all","text-xs","flex","justify-center","items-center","gap-2","shadow-lg",3,"click","disabled"],[1,"bg-black/20","px-1.5","rounded","text-green-100"],[1,"h-full","flex","flex-col","items-center","justify-center","text-slate-600"],[1,"text-6xl","mb-6","animate-bounce"],[1,"text-2xl","font-bold","text-slate-500"],[1,"text-slate-600","mt-2"],[1,"w-full","h-full","block"],[3,"close"],[1,"fixed","inset-0","bg-red-950/90","z-[999]","flex","items-center","justify-center","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-red-500","p-8","rounded-xl","w-96","shadow-2xl",3,"click"],[1,"text-2xl","font-black","text-red-500","mb-6","flex","items-center","gap-2"],[1,"space-y-4"],[1,"grid","grid-cols-2","gap-2"],[1,"w-full","py-3","bg-red-900/20","border","border-red-500/50","hover:bg-red-800","hover:text-white","text-red-300","font-bold","rounded","transition-all",3,"click"],[1,"pt-4","border-t","border-slate-800"],[1,"w-full","py-4","bg-black","border-2","border-red-600","text-red-500","hover:bg-red-600","hover:text-white","font-black","rounded-lg","mt-2","transition-all","uppercase","tracking-widest",3,"click"]],template:function(t,r){t&1&&(V(0,see,1,0,"app-title-screen",0),oe(1,"async"),V(2,oee,5,0,"div",1),oe(3,"async"),oe(4,"async"),V(5,wee,9,11,"ng-container",0),oe(6,"async"),oe(7,"async")),t&2&&(w("ngIf",!Me(1,3,r.firebaseService.user$)),_(2),w("ngIf",Me(3,5,r.gameStateService.isLoading$)&&Me(4,7,r.firebaseService.user$)),_(3),w("ngIf",Me(6,9,r.firebaseService.user$)&&!Me(7,11,r.gameStateService.isLoading$)))},dependencies:[Oi,Nt,xt,k0,V0,U0,B0,j0,K0,Y0,Kb,Bt],encapsulation:2})};var J0=class n{title="JEUB2";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(t,r){t&1&&W(0,"app-game-shell")},dependencies:[Q0],encapsulation:2})};var Z0=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ft({type:n});static \u0275inj=dt({imports:[Oo,_V,FV]})};_k(xP);var X0=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ft({type:n,bootstrap:[J0]});static \u0275inj=dt({providers:[{provide:No,useValue:"fr-FR"},oN(()=>aN(VF.firebase)),GM(()=>qM()),MF(()=>OF())],imports:[Fu,DP,Oo,S0,Z0]})};iE().bootstrapModule(X0).catch(n=>console.error(n));
